{"version":3,"file":"og.esm.js","sources":["../../../src/math.ts","../../../src/LonLat.ts","../../../src/mercator.ts","../../../src/Extent.ts","../../../src/math/Mat3.ts","../../../src/math/Vec4.ts","../../../src/math/Mat4.ts","../../../src/math/Quat.ts","../../../src/math/Vec3.ts","../../../src/math/Vec2.ts","../../../src/utils/colorTable.ts","../../../src/utils/shared.ts","../../../src/astro/jd.ts","../../../src/bv/Box.ts","../../../src/bv/Sphere.ts","../../../src/Events.ts","../../../src/ui/View.ts","../../../src/ui/Button.ts","../../../src/control/Control.ts","../../../src/control/CompassButton.ts","../../../src/ui/icons.ts","../../../src/ui/Dialog.ts","../../../src/ui/ToggleButton.ts","../../../src/quadTree/quadTree.ts","../../../src/layer/Material.ts","../../../src/layer/Layer.ts","../../../src/layer/CanvasTiles.ts","../../../src/control/DebugInfo.ts","../../../src/ui/ButtonGroup.ts","../../../src/utils/BaseWorker.ts","../../../src/entity/LabelWorker.ts","../../../src/entity/BaseBillboard.ts","../../../src/entity/Billboard.ts","../../../src/entity/Geometry.ts","../../../src/math/Line2.ts","../../../src/math/Line3.ts","../../../src/math/Plane.ts","../../../src/math/Ray.ts","../../../src/utils/objParser.ts","../../../src/Object3d.ts","../../../src/entity/GeoObject.ts","../../../src/entity/Label.ts","../../../src/entity/PointCloud.ts","../../../src/entity/Polyline.ts","../../../src/entity/Ray.ts","../../../src/entity/Strip.ts","../../../src/entity/Entity.ts","../../../src/scene/BaseNode.ts","../../../src/scene/RenderNode.ts","../../../src/cons.ts","../../../src/webgl/types.ts","../../../src/webgl/variableHandlers.ts","../../../src/webgl/Program.ts","../../../src/shaders/billboard.ts","../../../src/entity/BaseBillboardHandler.ts","../../../src/entity/BillboardHandler.ts","../../../src/shaders/geoObject.ts","../../../src/entity/GeoObjectHandler.ts","../../../src/shaders/label.ts","../../../src/entity/LabelHandler.ts","../../../src/shaders/pointCloud.ts","../../../src/entity/PointCloudHandler.ts","../../../src/shaders/polyline.ts","../../../src/entity/PolylineHandler.ts","../../../src/shaders/ray.ts","../../../src/entity/RayHandler.ts","../../../src/entity/StripHandler.ts","../../../src/entity/EntityCollection.ts","../../../src/math/coder.ts","../../../src/utils/earcut.ts","../../../src/entity/GeometryHandler.ts","../../../src/layer/Vector.ts","../../../src/control/drawing/PolygonDrawingScene.ts","../../../src/control/drawing/LineStringDrawingScene.ts","../../../src/control/drawing/DrawingControl.ts","../../../src/control/DrawingSwitcher.ts","../../../src/utils/units.ts","../../../src/control/EarthCoordinates.ts","../../../src/control/EarthNavigation.ts","../../../src/layer/BaseGeoImage.ts","../../../src/control/GeoImageDragControl.ts","../../../src/input/input.ts","../../../src/control/KeyboardNavigation.ts","../../../src/control/LayerAnimation.ts","../../../src/control/LayerSwitcher.ts","../../../src/ui/Slider.ts","../../../src/ui/Color.ts","../../../src/control/Lighting.ts","../../../src/Lock.ts","../../../src/control/MouseNavigation.ts","../../../src/control/MouseWheelZoomControl.ts","../../../src/control/ruler/RulerScene.ts","../../../src/control/ruler/Ruler.ts","../../../src/control/heightRuler/HeightRulerScene.ts","../../../src/control/heightRuler/HeightRuler.ts","../../../src/control/RulerSwitcher.ts","../../../src/control/ScaleControl.ts","../../../src/control/ShowFps.ts","../../../src/control/SimpleNavigation.ts","../../../src/control/SimpleSkyBackground.ts","../../../src/astro/astro.ts","../../../src/astro/earth.ts","../../../src/light/LightSource.ts","../../../src/control/Sun.ts","../../../src/control/ToggleWireframe.ts","../../../src/control/TouchNavigation.ts","../../../src/control/ZoomControl.ts","../../../src/control/selection/SelectionScene.ts","../../../src/control/selection/Selection.ts","../../../src/control/timeline/timelineUtils.ts","../../../src/control/timeline/TimelineModel.ts","../../../src/control/timeline/TimelineView.ts","../../../src/control/timeline/TimelineControl.ts","../../../src/Deferred.ts","../../../src/control/elevationProfile/ElevationProfile.ts","../../../src/control/elevationProfile/ElevationProfileView.ts","../../../src/control/elevationProfile/ElevationProfileScene.ts","../../../src/control/elevationProfile/ElevationProfileButtonsView.ts","../../../src/control/elevationProfile/PointListDialog.ts","../../../src/control/elevationProfile/ElevationProfileLegend.ts","../../../src/control/elevationProfile/ElevationProfileControl.ts","../../../src/control/AtmosphereConfig.ts","../../../src/scene/Axes.ts","../../../src/segment/segmentHelper.ts","../../../src/shaders/utils.ts","../../../src/shaders/atmos.ts","../../../src/shaders/drawnode.ts","../../../src/webgl/BaseFramebuffer.ts","../../../src/ImageCanvas.ts","../../../src/webgl/Framebuffer.ts","../../../src/control/Atmosphere.ts","../../../src/proj/Proj.ts","../../../src/proj/EPSG3857.ts","../../../src/segment/Slice.ts","../../../src/segment/Segment.ts","../../../src/quadTree/Node.ts","../../../src/QueueArray.ts","../../../src/quadTree/EntityCollectionsTreeStrategy.ts","../../../src/quadTree/QuadTreeStrategy.ts","../../../src/proj/EPSG4326.ts","../../../src/segment/SegmentLonLat.ts","../../../src/quadTree/EntityCollectionNode.ts","../../../src/quadTree/earth/EarthEntityCollectionNodeLonLat.ts","../../../src/quadTree/earth/EarthEntityCollectionsTreeStrategy.ts","../../../src/quadTree/earth/EarthQuadTreeStrategy.ts","../../../src/terrain/Geoid.ts","../../../src/utils/GeoImageCreator.ts","../../../src/utils/Loader.ts","../../../src/utils/NormalMapCreator.ts","../../../src/proj/equi.ts","../../../src/utils/PlainSegmentWorker.ts","../../../src/camera/Frustum.ts","../../../src/camera/Camera.ts","../../../src/camera/PlanetCamera.ts","../../../src/utils/TerrainWorker.ts","../../../src/utils/VectorTileCreator.ts","../../../src/ellipsoid/Ellipsoid.ts","../../../src/ellipsoid/wgs84.ts","../../../src/scene/Planet.ts","../../../src/shaders/skybox.ts","../../../src/scene/SkyBox.ts","../../../src/terrain/EmptyTerrain.ts","../../../src/terrain/GlobusTerrain.ts","../../../src/layer/XYZ.ts","../../../src/layer/WMS.ts","../../../src/terrain/BilTerrain.ts","../../../src/terrain/RgbTerrain.ts","../../../src/terrain/GlobusRgbTerrain.ts","../../../src/layer/GeoImage.ts","../../../src/layer/GeoTexture2d.ts","../../../src/layer/GeoVideo.ts","../../../src/layer/KML.ts","../../../src/layer/OpenStreetMap.ts","../../../src/layer/Bing.ts","../../../src/Clock.ts","../../../src/webgl/ProgramController.ts","../../../src/Stack.ts","../../../src/webgl/Handler.ts","../../../src/webgl/Multisample.ts","../../../src/input/KeyboardHandler.ts","../../../src/input/MouseHandler.ts","../../../src/input/TouchHandler.ts","../../../src/renderer/RendererEvents.ts","../../../src/shaders/depth.ts","../../../src/Rectangle.ts","../../../src/utils/ImagesCacheManager.ts","../../../src/utils/TextureAtlas.ts","../../../src/utils/FontAtlas.ts","../../../src/shaders/screenFrame.ts","../../../src/shaders/toneMapping.ts","../../../src/renderer/Renderer.ts","../../../src/Globe.ts","../../../src/ellipsoid/mars.ts","../../../src/ellipsoid/moon.ts","../../../src/Popup.ts","../../../src/segment/SegmentLonLatEqui.ts","../../../src/quadTree/equi/EquiEntityCollectionNodeLonLat.ts","../../../src/quadTree/equi/EquiEntityCollectionsTreeStrategy.ts","../../../src/quadTree/equi/EquiQuadTreeStrategy.ts","../../../src/quadTree/EPSG4326/EPSG4326QuadTreeStrategy.ts","../../../src/quadTree/wgs84/Wgs84QuadTreeStrategy.ts","../../../src/quadTree/index.ts"],"sourcesContent":["import {Vec3} from \"./math/Vec3\";\n\n/** @const */\nexport const TWO_PI = 2.0 * Math.PI;\n\n/** @const */\nexport const PI_TWO = Math.PI / 2.0;\n\nexport const X = 0;\nexport const Y = 1;\nexport const Z = 2;\nexport const W = 3;\n\nexport const MAX_FLOAT = Number.MAX_VALUE || 1.7976931348623157e308;\n\n/** @const */\nexport const LOG2 = Math.log(2);\n/** @const */\nexport const MAX32 = 2147483647;\n/** @const */\nexport const MAX = 549755748352;\n/** @const */\nexport const MIN = -MAX;\n\n/** @const */\nexport const RADIANS = Math.PI / 180.0;\n/** @const */\nexport const DEGREES = 180.0 / Math.PI;\n\n/** @const */\nexport const DEGREES_DOUBLE = 2.0 * DEGREES;\n/** @const */\nexport const RADIANS_HALF = 0.5 * RADIANS;\n\n/** @const */\nexport const ARCSECONDS_TO_RADIANS = 0.00000484813681109536;\n/** @const */\nexport const RADIANS_TO_HOURS = 3.8197186342054880584532103209403;\n/** @const */\nexport const HOURS_TO_RADIANS = 0.26179938779914943653855361527329;\n/** @const */\nexport const HOURS_TO_DEGREES = 15.0;\n/** @const */\nexport const DEGREES_TO_HOURS = 1.0 / 15.0;\n\n/** @const */\nexport const SQRT_HALF = Math.sqrt(0.5);\n\nexport const EPS1 = 1e-1;\nexport const EPS2 = 1e-2;\nexport const EPS3 = 1e-3;\nexport const EPS4 = 1e-4;\nexport const EPS5 = 1e-5;\nexport const EPS6 = 1e-6;\nexport const EPS7 = 1e-7;\nexport const EPS8 = 1e-8;\nexport const EPS9 = 1e-9;\nexport const EPS10 = 1e-10;\nexport const EPS11 = 1e-11;\nexport const EPS12 = 1e-12;\nexport const EPS13 = 1e-13;\nexport const EPS14 = 1e-14;\nexport const EPS15 = 1e-15;\nexport const EPS16 = 1e-16;\nexport const EPS17 = 1e-17;\nexport const EPS18 = 1e-18;\nexport const EPS19 = 1e-19;\nexport const EPS20 = 1e-20;\n\n/**\n * The log function returns the power to which the base value has to be raised to produce n.\n * @function\n * @param {number} n - Produce value.\n * @param {number} base - Base value.\n * @returns {number} -\n * @example\n * log(64, 2)\n * //returns 6\n */\nexport function log(n: number, base: number): number {\n    return Math.log(n) / Math.log(base);\n}\n\n/**\n * Clamp the number.\n * @function\n * @param {number} number - Input number.\n * @param {number} min - Minimal edge.\n * @param {number} max - Maximal edge.\n * @returns {number} -\n * @example\n * clamp(12, 1, 5)\n * //returns 5\n */\nexport function clamp(number: number, min: number, max: number): number {\n    return Math.max(min, Math.min(number, max));\n}\n\n/**\n * Converts degrees value to radians.\n * @function\n * @param {number} degrees - Degree value.\n * @returns {number} -\n */\nexport function DEG2RAD(degrees: number): number {\n    return degrees * RADIANS;\n}\n\n/**\n * Converts radians value to degrees.\n * @function\n * @param {number} angle - Degree value.\n * @returns {number} -\n */\nexport function RAD2DEG(angle: number): number {\n    return angle * DEGREES;\n}\n\n/**\n * Check the number is a power of two.\n * @function\n * @param {number} x - Input value.\n * @returns {boolean} -\n */\nexport function isPowerOfTwo(x: number): boolean {\n    return (x & (x - 1)) === 0;\n}\n\n/**\n * Returns next value that is power of two.\n * @function\n * @param {number} x - Input value.\n * @param {number} [maxValue=4096] - Maximal value.\n * @returns {number} -\n */\nexport function nextHighestPowerOfTwo(x: number, maxValue: number = 4096): number {\n    --x;\n    for (let i = 1; i < 32; i <<= 1) {\n        x = x | (x >> i);\n    }\n    return (x + 1) > maxValue ? maxValue : x + 1\n}\n\n/**\n * Returns random integer number within the bounds.\n * @function\n * @param {number} min - Minimal bound.\n * @param {number} max - Maximal bound.\n * @returns {number} -\n */\nexport function randomi(min: number = 0, max: number = 1): number {\n    return Math.floor(Math.random() * (max - min)) + min;\n}\n\n/**\n * Returns random number within the bounds.\n * @function\n * @param {number} [min=0] - Minimal bound.\n * @param {number} [max=1] - Maximal bound.\n * @returns {number} -\n */\nexport function random(min: number = 0, max: number = 1): number {\n    return Math.random() * (max - min) + min;\n}\n\n/**\n * Converts degrees value to decimal.\n * @function\n * @param {number} d - Degrees.\n * @param {number} m - Minutes.\n * @param {number} s - Seconds.\n * @param {boolean} [p] - Positive flag. False - default.\n * @returns {number} -\n **/\nexport function degToDec(d: number, m: number, s: number, p: number): number {\n    if (p) {\n        return d + m / 60.0 + s / 3600.0;\n    } else {\n        return -d - m / 60.0 - s / 3600.0;\n    }\n}\n\n/**\n * The modulo operation that also works for negative dividends.\n * @function\n * @param {number} m - The dividend.\n * @param {number} n - The divisor.\n * @returns {number} The remainder.\n */\nexport function mod(m: number, n: number): number {\n    return ((m % n) + n) % n;\n}\n\n/**\n * Returns an angle in the range 0 <= angle <= 2Pi which is equivalent to the provided angle.\n * @function\n * @param {number} a - Angle in radians\n * @returns {number} -\n */\nexport function zeroTwoPI(a: number): number {\n    const res = mod(a, TWO_PI);\n    if (Math.abs(res) < EPS14 && Math.abs(a) > EPS14) {\n        return TWO_PI;\n    }\n    return res;\n}\n\n/**\n * Returns 0.0 if x is smaller than edge and otherwise 1.0.\n * @function\n * @param {number} edge -\n * @param {number} x - Value to edge.\n * @returns {number} -\n */\nexport function step(edge: number, x: number): number {\n    return x < edge ? 0.0 : 1.0;\n}\n\n/**\n * The frac function returns the fractional part of x, i.e. x minus floor(x).\n * @function\n * @param {number} x - Input value.\n * @returns {number} -\n */\nexport function frac(x: number): number {\n    const mx = Math.abs(x)\n    return mx - Math.floor(mx);\n}\n\n/**\n * Returns Math.log(x) / Math.log(2)\n * @function\n * @param {number} x - Input value.\n * @returns {number} -\n */\nexport function log2(x: number): number {\n    return Math.log(x) / LOG2;\n}\n\n/**\n * Returns two power of n.\n * @function\n * @param {number} n - Power value.\n * @returns {number} -\n */\nexport function exp2(n: number): number {\n    return Math.pow(2, n);\n}\n\n/**\n * Returns two power of integer n.\n * @function\n * @param {number} n - Integer power value.\n * @returns {number} -\n */\nexport function pow2i(n: number): number {\n    return 2 << (n - 1);\n}\n\n/**\n * Returns a slice of linear interpolation t * (h1 - h0)\n * @param {number} t - A value that linearly interpolates between the h0 parameter and the h1 parameter.\n * @param {number} h1 - End value.\n * @param {number} h0 - Start value.\n * @returns {number} -\n */\nexport function slice(t: number, h1: number, h0: number): number {\n    return t * (h1 - h0);\n}\n\n/**\n * Performs a linear interpolation.\n * @function\n * @param {number} t - A value that linearly interpolates between the h0 parameter and the h1 parameter.\n * @param {number} h1 - End value.\n * @param {number} h0 - Start value.\n * @returns {number} -\n */\nexport function lerp(t: number, h1: number, h0: number): number {\n    return h0 + t * (h1 - h0);\n}\n\nexport function cube(f: number): number {\n    return f * f * f;\n}\n\nexport function square(f: number): number {\n    return f * f;\n}\n\nexport function bezier1v(t: number, p0: number, p1: number, p2: number, p3: number): number {\n    return (\n        cube(1 - t) * p0 + 3 * square(1 - t) * t * p1 + 3 * (1 - t) * square(t) * p2 + cube(t) * p3\n    );\n}\n\n/**\n * Performs a 3D bezier interpolation.\n * @function\n * @param {number} t - Interpolation value.\n * @param {Vec3} p0 - First control point.\n * @param {Vec3} p1 - Second control point.\n * @param {Vec3} p2 - Third control point.\n * @param {Vec3} p3 - Fourth control point.\n * @returns {Vec3} -\n */\nexport function bezier3v(t: number, p0: Vec3, p1: Vec3, p2: Vec3, p3: Vec3): Vec3 {\n\n    let u = 1 - t;\n    let tt = t * t;\n    let uu = u * u;\n    let uuu = uu * u;\n    let ttt = tt * t;\n\n    return p0.scaleTo(uuu)\n        .addA(p1.scaleTo(3 * uu * t))\n        .addA(p2.scaleTo(3 * u * tt))\n        .addA(p3.scaleTo(ttt));\n}\n\n/**\n * Clamp angle value within 360.\n * @function\n * @param {number} x - Input angle.\n * @returns {number} -\n */\nexport function rev(x: number): number {\n    return x - Math.floor(x / 360.0) * 360.0;\n}\n\n/**\n * Clamp longitude within: -180 to +180 degrees.\n * @function\n * @param {number} lon - Longitude.\n * @returns {number} -\n */\nexport function norm_lon(lon: number): number {\n    return lon > 180 ? ((lon + 180) % 360) - 180 : lon < -180 ? ((lon - 180) % 360) + 180 : lon;\n}\n\n/**\n * Returns an angle in the range -Pi <= angle <= Pi which is equivalent to the provided angle.\n * @function\n * @param {number} a - Angle in radians.\n * @returns {number} -\n */\nexport function negativePItoPI(a: number): number {\n    return zeroTwoPI(a + Math.PI) - Math.PI;\n}\n\n/**\n * Solve using iteration method and a fixed number of steps.\n * @function\n * @param {Function} f - Equation. Used in Euler's equation(see og.orbit) solving.\n * @param {number} x0 - First approximation.\n * @param {number} maxIter - Maximum iterations.\n * @returns {number} -\n */\nexport function solve_iteration_fixed(f: (x: number) => number, x0: number, maxIter: number): number {\n    let x = 0;\n    let x2 = x0;\n    for (let i = 0; i < maxIter; i++) {\n        x = x2;\n        x2 = f(x);\n    }\n    return x2;\n}\n\n/**\n * Solve using iteration; terminate when error is below err or the maximum\n * number of iterations is reached. Used in Euler's equation(see og.orbit) solving.\n * @function\n * @param {(x: number) => number} f - Equation.\n * @param {number} x0 - First approximation.\n * @param {number} err - Maximal accepted error value.\n * @param {number} maxIter - Maximum iterations.\n * @returns {number} -\n */\nexport function solve_iteration(f: (x: number) => number, x0: number, err: number, maxIter: number = 50): number {\n    let x = 0;\n    let x2 = x0;\n    for (let i = 0; i < maxIter; i++) {\n        x = x2;\n        x2 = f(x);\n        if (Math.abs(x2 - x) < err) {\n            return x2;\n        }\n    }\n    return x2;\n}\n\n/**\n * Equation function.\n * @callback equationCallback\n * @param {number} x - Equation variable.\n */\n\n/**\n *\n * @param a - First bearing angle\n * @param b - Second bearing angle\n * @returns {number}\n */\nfunction getAngleDirection(a: number, b: number): number {\n    let a_y = Math.cos(a),\n        a_x = Math.sin(a),\n        b_y = Math.cos(b),\n        b_x = Math.sin(b);\n    let c = a_y * b_x - b_y * a_x,\n        d = a_x * b_x + a_y * b_y;\n    if (c > 0.0) {\n        return Math.acos(d);\n    }\n    return -Math.acos(d);\n}\n\n/**\n * Returns angle between two azimuths\n * @param {number} a - First azimuth angle\n * @param {number} b - Second azimuth angle\n * @returns {number}\n */\nexport function getAngleBetweenAzimuths(a: number, b: number): number {\n    a = zeroTwoPI(a);\n    b = zeroTwoPI(b);\n    return ((((a - b) % 360) + 360 + 180) % 360) - 180;\n}","import * as mercator from \"./mercator\";\nimport {NumberArray2} from \"./math/Vec2\";\nimport {NumberArray3} from \"./math/Vec3\";\n\nconst HALF_PI = Math.PI * 0.5;\nconst INV_PI_BY_180 = 180.0 / Math.PI;\nconst INV_PI_BY_360 = INV_PI_BY_180 * 2.0;\nconst PI_BY_360 = Math.PI / 360.0;\nconst INV_PI_BY_180_HALF_PI = INV_PI_BY_180 * HALF_PI;\n\n/**\n * Represents a geographical point with a certain latitude, longitude and height.\n * @class\n * @param {number} [lon] - Longitude.\n * @param {number} [lat] - Latitude.\n * @param {number} [height] - Height over the surface.\n */\nexport class LonLat {\n    /**\n     * Longitude.\n     * @public\n     * @type {number}\n     */\n    public lon: number = 0;\n\n    /**\n     * Latitude.\n     * @public\n     * @type {number}\n     */\n    public lat: number = 0;\n\n    /**\n     * Height.\n     * @public\n     * @type {number}\n     */\n    public height: number = 0;\n\n    constructor(lon: number = 0, lat: number = 0, height: number = 0) {\n        this.lon = lon;\n        this.lat = lat;\n        this.height = height;\n    }\n\n    /**\n     * Check zero coordinates\n     * @returns {boolean} -\n     */\n    public isZero(): boolean {\n        return this.lon === 0.0 && this.lat === 0.0 && this.height === 0.0;\n    }\n\n    /**\n     * Creates coordinates array.\n     * @static\n     * @param{Array.<Array<number>>} arr - Coordinates array data. (exactly 3 entries)\n     * @return{Array.<LonLat>} the same coordinates array but each element is LonLat instance.\n     */\n    static join(arr: NumberArray2[] | NumberArray3[]): LonLat[] {\n        let res = [];\n        for (let i = 0; i < arr.length; i++) {\n            let ai = arr[i];\n            res[i] = new LonLat(ai[0], ai[1], ai[2]);\n        }\n        return res;\n    }\n\n    /**\n     * Creates an object by coordinate array.\n     * @static\n     * @param {Array.<number>} arr - Coordinates array, where first is longitude, second is latitude and third is a height. (exactly 3 entries)\n     * @returns {LonLat} -\n     */\n    static createFromArray(arr: [number, number, number]): LonLat {\n        return new LonLat(arr[0], arr[1], arr[2]);\n    }\n\n    /**\n     * Create array from lonLat\n     * @param lonLat\n     * @returns {number[]}\n     */\n    static toArray(lonLat: LonLat): [number, number, number] {\n        return [lonLat.lon, lonLat.lat, lonLat.height]\n    }\n\n    /**\n     * Create array from lonLat\n     * @returns {number[]}\n     */\n    public toArray(): [number, number, number] {\n        return LonLat.toArray(this);\n    }\n\n    /**\n     * Converts degrees to mercator coordinates.\n     * @static\n     * @param {number} lon - Degrees longitude.\n     * @param {number} lat - Degrees latitude.\n     * @param {number} [height] - Height.\n     * @returns {LonLat} -\n     */\n    static forwardMercator(lon: number, lat: number, height: number): LonLat {\n        return new LonLat(\n            lon * mercator.POLE_BY_180,\n            Math.log(Math.tan((90.0 + lat) * PI_BY_360)) * mercator.POLE_BY_PI,\n            height\n        );\n    }\n\n    /**\n     * Converts degrees to mercator coordinates.\n     * @static\n     * @param {LonLat} lonLat - Input geodetic degree coordinates\n     * @param {LonLat} res - Output mercator coordinates\n     * @returns {LonLat} - Output mercator coordinates\n     */\n    static forwardMercatorRes(lonLat: LonLat, res: LonLat): LonLat {\n        res.lon = lonLat.lon * mercator.POLE_BY_180;\n        res.lat = Math.log(Math.tan((90.0 + lonLat.lat) * PI_BY_360)) * mercator.POLE_BY_PI,\n            res.height = lonLat.height;\n        return res;\n    }\n\n    /**\n     * Converts mercator to degrees coordinates.\n     * @static\n     * @param {number} x - Mercator longitude.\n     * @param {number} y - Mercator latitude.\n     * @param {number} [height] - Height.\n     * @returns {LonLat} -\n     */\n    static inverseMercator(x: number, y: number, height: number = 0): LonLat {\n        return new LonLat(\n            x * mercator.INV_POLE_BY_180,\n            INV_PI_BY_360 * Math.atan(Math.exp(y * mercator.PI_BY_POLE)) - INV_PI_BY_180_HALF_PI,\n            height\n        );\n    }\n\n    /**\n     * Sets coordinates.\n     * @public\n     * @param {number} [lon] - Longitude.\n     * @param {number} [lat] - Latitude.\n     * @param {number} [height] - Height.\n     * @returns {LonLat} -\n     */\n    public set(lon: number = 0, lat: number = 0, height: number = 0): LonLat {\n        this.lon = lon;\n        this.lat = lat;\n        this.height = height;\n        return this;\n    }\n\n    /**\n     * Copy coordinates.\n     * @public\n     * @param {LonLat} [lonLat] - Coordinates to copy.\n     * @returns {LonLat} -\n     */\n    public copy(lonLat: LonLat): LonLat {\n        this.lon = lonLat.lon;\n        this.lat = lonLat.lat;\n        this.height = lonLat.height;\n        return this;\n    }\n\n    /**\n     * Clone the coordinates.\n     * @public\n     * @returns {LonLat} -\n     */\n    public clone(): LonLat {\n        return new LonLat(this.lon, this.lat, this.height);\n    }\n\n    /**\n     * Converts to mercator coordinates.\n     * @public\n     * @returns {LonLat} -\n     */\n    public forwardMercator(): LonLat {\n        return LonLat.forwardMercator(this.lon, this.lat, this.height);\n    }\n\n    public forwardMercatorEPS01(): LonLat {\n        let lat = this.lat;\n        if (lat > 89.9) {\n            lat = 89.9;\n        } else if (lat < -89.9) {\n            lat = -89.9;\n        }\n        return new LonLat(\n            this.lon * mercator.POLE_BY_180,\n            Math.log(Math.tan((90.0 + lat) * PI_BY_360)) * mercator.POLE_BY_PI\n        );\n    }\n\n    /**\n     * Converts from mercator coordinates.\n     * @public\n     * @returns {LonLat} -\n     */\n    public inverseMercator(): LonLat {\n        return LonLat.inverseMercator(this.lon, this.lat, this.height);\n    }\n\n    /**\n     * Compares coordinates.\n     * @public\n     * @param {LonLat} b - Coordinate to compare with.\n     * @returns {boolean} -\n     */\n    public equal(b: LonLat): boolean {\n        if (b.height) {\n            return this.lon === b.lon && this.lat === b.lat && this.height === b.height;\n        } else {\n            return this.lon === b.lon && this.lat === b.lat;\n        }\n    }\n}\n","import {Extent} from \"./Extent\";\nimport {LonLat} from './LonLat';\n\n/**\n * Mercator size.\n * @const\n * @type {number}\n */\nexport const POLE = 20037508.34;\n\nexport const POLE2 = POLE * 2.0;\n\nexport const PI_BY_POLE = Math.PI / POLE;\n\nexport const POLE_BY_PI = POLE / Math.PI;\n\nconst HALF_PI = Math.PI * 0.5;\n\nexport const POLE_BY_180 = POLE / 180.0;\n\nexport const INV_POLE_BY_180 = 180.0 / POLE;\n\nconst PI_BY_360 = Math.PI / 360.0;\n\nconst PI_BY_180 = Math.PI / 180.0;\n\nconst INV_PI_BY_180 = 180.0 / Math.PI;\n\n/**\n * Double mercator size.\n * @const\n * @type {number}\n */\nexport const POLE_DOUBLE = 2.0 * POLE;\n\n/**\n * One by mercator double size.\n * @const\n * @type {number}\n */\nexport const ONE_BY_POLE_DOUBLE = 1.0 / POLE_DOUBLE;\n\nexport function forward(lonLat: LonLat): LonLat {\n    return new LonLat(lonLat.lon * POLE / 180.0, Math.log(Math.tan((90.0 + lonLat.lat) * PI_BY_360)) * POLE_BY_PI, lonLat.height);\n}\n\n/**\n * Converts degrees longitude to mercator coordinate.\n * @function\n * @param {number} lon - Degrees geodetic longitude.\n * @returns {number} -\n */\nexport function forward_lon(lon: number): number {\n    return lon * POLE / 180.0;\n}\n\n/**\n * Converts degrees latitude to mercator coordinate.\n * @function\n * @param {number} lat - Degrees geodetic latitude.\n * @returns {number} -\n */\nexport function forward_lat(lat: number): number {\n    return Math.log(Math.tan((90.0 + lat) * PI_BY_360)) * POLE_BY_PI;\n}\n\n/**\n * Converts mercator longitude to degrees coordinate.\n * @function\n * @param {number} lon - Mercator longitude.\n * @returns {number} -\n */\nexport function inverse_lon(lon: number): number {\n    return 180 * lon / POLE;\n}\n\n/**\n * Converts mercator latitude to degrees coordinate.\n * @function\n * @param {number} lon - Mercator latitude.\n * @returns {number} -\n */\nexport function inverse_lat(lat: number): number {\n    return INV_PI_BY_180 * (2.0 * Math.atan(Math.exp(lat * PI_BY_POLE)) - HALF_PI);\n}\n\n/**\n * Returns mercator map tile grid horizontal coordinate index by geodetic\n * longitude and zoom level. Where top left corner of the grid is 0 coordinate index.\n * @function\n * @param {number} lon - Geodetic degrees longitude.\n * @param {number} zoom - Zoom level.\n * @returns {number}\n */\nexport function getTileX(lon: number, zoom: number): number {\n    return Math.floor((lon + 180) / 360.0 * Math.pow(2, zoom));\n}\n\n/**\n * Returns mercator map tile grid vertical coordinate index by geodetic\n * latitude and zoom level. Where top left corner of the grid is 0 coordinate index.\n * @function\n * @param {number} lat - Geodetic degrees latitude.\n * @param {number} zoom - Zoom level.\n * @returns {number}\n */\nexport function getTileY(lat: number, zoom: number): number {\n    return Math.floor((1.0 - Math.log(Math.tan(lat * PI_BY_180) + 1.0 / Math.cos(lat * PI_BY_180)) / Math.PI) * 0.5 * Math.pow(2, zoom));\n}\n\n/**\n * Converts geodetic coordinate array to mercator coordinate array.\n * @function\n * @param {Array.<LonLat>} lonLatArr - LonLat array to convert.\n * @returns {Array.<LonLat>}\n */\nexport function forwardArray(lonlatArr: LonLat[]): LonLat[] {\n    let res: LonLat[] = [];\n    for (let i = 0; i < lonlatArr.length; i++) {\n        res.push(lonlatArr[i].forwardMercator());\n    }\n    return res;\n}\n\nexport function getTileExtent(x: number, y: number, z: number): Extent {\n    let size = POLE2 / (1 << z),//Math.pow(2, z),\n        sw = new LonLat(-POLE + x * size, POLE - y * size - size);\n    return new Extent(sw, new LonLat(sw.lon + size, sw.lat + size));\n}\n\n/**\n * Max mercator latitude.\n * @const\n * @type {number}\n */\nexport const MAX_LAT = inverse_lat(POLE);\n\n/**\n * Min mercator latitude.\n * @const\n * @type {number}\n */\nexport const MIN_LAT = -MAX_LAT;\n","import * as math from \"./math\";\nimport * as mercator from \"./mercator\";\nimport {Ellipsoid} from \"./ellipsoid/Ellipsoid\";\nimport {LonLat} from \"./LonLat\";\n\n/**\n * Represents geographical coordinates extent.\n * @class\n * @param {LonLat} [sw] - South West extent corner coordinates.\n * @param {LonLat} [ne] - North East extent corner coordinates.\n */\nexport class Extent {\n    public southWest: LonLat;\n    public northEast: LonLat;\n\n    constructor(sw: LonLat = new LonLat(), ne: LonLat = new LonLat()) {\n        this.southWest = sw;\n        this.northEast = ne;\n    }\n\n    /**\n     * Creates extent instance from values in array.\n     * @static\n     * @param {Array.<number>} arr - South west and north-east longitude and latitudes packed in array. (exactly 4 entries)\n     * @return {Extent} Extent object.\n     */\n    static createFromArray(arr: [number, number, number, number]): Extent {\n        return new Extent(new LonLat(arr[0], arr[1]), new LonLat(arr[2], arr[3]));\n    }\n\n    /**\n     * Creates bound extent instance by coordinate array.\n     * @static\n     * @param {Array.<LonLat>} arr - Coordinate array.\n     * @return {Extent} Extent object.\n     */\n    static createByCoordinates(arr: LonLat[]): Extent {\n        let lonmin = math.MAX,\n            lonmax = math.MIN,\n            latmin = math.MAX,\n            latmax = math.MIN;\n        for (let i = 0; i < arr.length; i++) {\n            const vi = arr[i];\n            if (vi.lon < lonmin) lonmin = vi.lon;\n            if (vi.lon > lonmax) lonmax = vi.lon;\n            if (vi.lat < latmin) latmin = vi.lat;\n            if (vi.lat > latmax) latmax = vi.lat;\n        }\n        return new Extent(new LonLat(lonmin, latmin), new LonLat(lonmax, latmax));\n    }\n\n    /**\n     * Creates bound extent instance by coordinates array.\n     * @static\n     * @param {Array.<Array<number>>} arr - Coordinate array. (exactly 2 entries)\n     * @return {Extent} Extent object.\n     */\n    static createByCoordinatesArr(arr: [number, number][]): Extent {\n        let lonmin = math.MAX,\n            lonmax = math.MIN,\n            latmin = math.MAX,\n            latmax = math.MIN;\n        for (let i = 0; i < arr.length; i++) {\n            const vi = arr[i];\n            if (vi[0] < lonmin) lonmin = vi[0];\n            if (vi[0] > lonmax) lonmax = vi[0];\n            if (vi[1] < latmin) latmin = vi[1];\n            if (vi[1] > latmax) latmax = vi[1];\n        }\n        return new Extent(new LonLat(lonmin, latmin), new LonLat(lonmax, latmax));\n    }\n\n    /**\n     * Creates extent by mer—Åator grid tile coordinates.\n     * @static\n     * @param {number} x -\n     * @param {number} y -\n     * @param {number} z -\n     * @param {number} width -\n     * @param {number} height -\n     * @returns {Extent} -\n     */\n    static fromTile(\n        x: number,\n        y: number,\n        z: number,\n        width: number = mercator.POLE_DOUBLE,\n        height: number = mercator.POLE_DOUBLE): Extent {\n        const H = 1 << z;//Math.pow(2, z);\n        const W = H;//Math.pow(2, z);\n        const lnSize = width / W;\n        const ltSize = height / H;\n\n        const left = -width * 0.5 + x * lnSize,\n            top = height * 0.5 - y * ltSize,\n            bottom = top - ltSize,\n            right = left + lnSize;\n\n        return new Extent(new LonLat(left, bottom), new LonLat(right, top));\n    }\n\n    /**\n     * Sets current bounding extent object by coordinate array.\n     * @public\n     * @param {Array.<LonLat>} arr - Coordinate array.\n     * @return {Extent} Current extent.\n     */\n    public setByCoordinates(arr: LonLat[]): Extent {\n        let lonmin = math.MAX,\n            lonmax = math.MIN,\n            latmin = math.MAX,\n            latmax = math.MIN;\n        for (let i = 0; i < arr.length; i++) {\n            const vi = arr[i];\n            if (vi.lon < lonmin) lonmin = vi.lon;\n            if (vi.lon > lonmax) lonmax = vi.lon;\n            if (vi.lat < latmin) latmin = vi.lat;\n            if (vi.lat > latmax) latmax = vi.lat;\n        }\n        this.southWest.lon = lonmin;\n        this.southWest.lat = latmin;\n        this.northEast.lon = lonmax;\n        this.northEast.lat = latmax;\n        return this;\n    }\n\n    /**\n     * Determines if point inside extent.\n     * @public\n     * @param {LonLat} lonlat - Coordinate point.\n     * @return {boolean} Returns true if point inside extent.\n     */\n    public isInside(lonlat: LonLat): boolean {\n        const sw = this.southWest;\n        const ne = this.northEast;\n        return (\n            lonlat.lon >= sw.lon && lonlat.lon <= ne.lon &&\n            lonlat.lat >= sw.lat && lonlat.lat <= ne.lat\n        );\n    }\n\n    /**\n     * Returns true if two extent overlap each other.\n     * @public\n     * @param {Extent} e - Another extent.\n     * @return {boolean} -\n     */\n    public overlaps(e: Extent): boolean {\n        const sw = this.southWest;\n        const ne = this.northEast;\n        return (\n            sw.lon <= e.northEast.lon &&\n            ne.lon >= e.southWest.lon &&\n            sw.lat <= e.northEast.lat &&\n            ne.lat >= e.southWest.lat\n        );\n    }\n\n    /**\n     * Gets extent width.\n     * @public\n     * @return {number} Extent width.\n     */\n    public getWidth(): number {\n        return this.northEast.lon - this.southWest.lon;\n    }\n\n    /**\n     * Gets extent height.\n     * @public\n     * @return {number} Extent height.\n     */\n    public getHeight(): number {\n        return this.northEast.lat - this.southWest.lat;\n    }\n\n    /**\n     * Creates clone instance of the current extent.\n     * @public\n     * @return {Extent} Extent clone.\n     */\n    public clone(): Extent {\n        return new Extent(this.southWest.clone(), this.northEast.clone());\n    }\n\n    /**\n     * Gets the center coordinate of the extent.\n     * @public\n     * @return {number} Center coordinate.\n     */\n    public getCenter(): LonLat {\n        const sw = this.southWest;\n        const ne = this.northEast;\n        return new LonLat(sw.lon + (ne.lon - sw.lon) * 0.5, sw.lat + (ne.lat - sw.lat) * 0.5);\n    }\n\n    /**\n     * @public\n     */\n    public getNorthWest(): LonLat {\n        return new LonLat(this.southWest.lon, this.northEast.lat);\n    }\n\n    /**\n     * @public\n     */\n    public getNorthEast(): LonLat {\n        return new LonLat(this.northEast.lon, this.northEast.lat);\n    }\n\n    /**\n     * @public\n     */\n    public getSouthWest(): LonLat {\n        return new LonLat(this.southWest.lon, this.southWest.lat);\n    }\n\n    /**\n     * @public\n     */\n    public getSouthEast(): LonLat {\n        return new LonLat(this.northEast.lon, this.southWest.lat);\n    }\n\n    /**\n     * @public\n     */\n    public getNorth(): number {\n        return this.northEast.lat;\n    }\n\n    public getEast(): number {\n        return this.northEast.lon;\n    }\n\n    /**\n     * @public\n     */\n    public getWest(): number {\n        return this.southWest.lon;\n    }\n\n    /**\n     * @public\n     */\n    public getSouth(): number {\n        return this.southWest.lat;\n    }\n\n    /**\n     * Returns extents are equals.\n     * @param {Extent} extent - Extent.\n     * @returns {boolean} -\n     */\n    public equals(extent: Extent): boolean {\n        return (\n            this.southWest.lon === extent.southWest.lon &&\n            this.southWest.lat === extent.southWest.lat &&\n            this.northEast.lon === extent.northEast.lon &&\n            this.northEast.lat === extent.northEast.lat\n        );\n    }\n\n    /**\n     * Converts extent coordinates to mercator projection coordinates.\n     * @public\n     * @return {Extent} New instance of the current extent.\n     */\n    public forwardMercator(): Extent {\n        return new Extent(this.southWest.forwardMercator(), this.northEast.forwardMercator());\n    }\n\n    /**\n     * Converts extent coordinates from mercator projection to degrees.\n     * @public\n     * @return {Extent} New instance of the current extent.\n     */\n    public inverseMercator(): Extent {\n        return new Extent(this.southWest.inverseMercator(), this.northEast.inverseMercator());\n    }\n\n    /**\n     * Gets cartesian bounding bounds of the current ellipsoid.\n     * @public\n     * @param {Ellipsoid} ellipsoid - Ellipsoid.\n     * @return {Array.<number>} Cartesian 3d coordinate array. (exactly 6 entries)\n     */\n    public getCartesianBounds(ellipsoid: Ellipsoid): [number, number, number, number, number, number] {\n        let xmin = math.MAX,\n            xmax = math.MIN,\n            ymin = math.MAX,\n            ymax = math.MIN,\n            zmin = math.MAX,\n            zmax = math.MIN;\n\n        const v = [\n            new LonLat(this.southWest.lon, this.southWest.lat),\n            new LonLat(this.southWest.lon, this.northEast.lat),\n            new LonLat(this.northEast.lon, this.northEast.lat),\n            new LonLat(this.northEast.lon, this.southWest.lat)\n        ];\n\n        for (let i = 0; i < v.length; i++) {\n            const coord = ellipsoid.lonLatToCartesian(v[i]);\n            const x = coord.x;\n            const y = coord.y;\n            const z = coord.z;\n            if (x < xmin) xmin = x;\n            if (x > xmax) xmax = x;\n            if (y < ymin) ymin = y;\n            if (y > ymax) ymax = y;\n            if (z < zmin) zmin = z;\n            if (z > zmax) zmax = z;\n        }\n\n        return [xmin, ymin, zmin, xmax, ymax, zmax];\n    }\n\n    public toString(): string {\n        return (\n            `[${this.southWest.lon.toFixed(5)}, ${this.southWest.lat.toFixed(5)}, ${this.northEast.lon.toFixed(5)}, ${this.northEast.lat.toFixed(5)}]`\n        );\n    }\n}\n","import {Mat4} from \"./Mat4\";\nimport {Vec3} from \"./Vec3\";\n\nexport type NumberArray9 = [\n    number, number, number,\n    number, number, number,\n    number, number, number\n];\n\n/**\n * Class represents a 3x3 matrix.\n * @class\n */\nexport class Mat3 {\n\n    /**\n     * A 3x3 matrix, indexing as a column-major order array.\n     * @public\n     * @type {Array.<number>}\n     */\n    public _m: NumberArray9 = [\n        0, 0, 0,\n        0, 0, 0,\n        0, 0, 0\n    ];\n\n    constructor() {\n    }\n\n    /**\n     * Sets column-major order array matrix.\n     * @public\n     * @param {Array.<number>} m - Matrix array.\n     * @returns {Mat3}\n     */\n    public set(m: NumberArray9): Mat3 {\n        this._m[0] = m[0];\n        this._m[1] = m[1];\n        this._m[2] = m[2];\n        this._m[3] = m[3];\n        this._m[4] = m[4];\n        this._m[5] = m[5];\n        this._m[6] = m[6];\n        this._m[7] = m[7];\n        this._m[8] = m[8];\n        return this;\n    }\n\n    /**\n     * Duplicates a Mat3 instance.\n     * @public\n     * @returns {Mat3}\n     */\n    public clone(): Mat3 {\n        let res = new Mat3();\n        res.set(this._m);\n        return res;\n    }\n\n    /**\n     * Copy matrix.\n     * @public\n     * @param {Mat3} a - Matrix to copy.\n     * @returns {Mat3}\n     */\n    public copy(a: Mat3): Mat3 {\n        return this.set(a._m);\n    }\n\n    /**\n     * Creates transposed matrix from the current.\n     * @public\n     * @returns {Mat3}\n     */\n    public transposeTo(): Mat3 {\n        let res = new Mat3();\n        let m = this._m;\n        res._m[0] = m[0];\n        res._m[1] = m[3];\n        res._m[2] = m[6];\n        res._m[3] = m[1];\n        res._m[4] = m[4];\n        res._m[5] = m[7];\n        res._m[6] = m[2];\n        res._m[7] = m[5];\n        res._m[8] = m[8];\n        return res;\n    }\n\n    /**\n     * Sets matrix to identity.\n     * @public\n     * @returns {Mat3}\n     */\n    public setIdentity(): Mat3 {\n        this._m[0] = 1;\n        this._m[1] = 0;\n        this._m[2] = 0;\n        this._m[3] = 0;\n        this._m[4] = 1;\n        this._m[5] = 0;\n        this._m[6] = 0;\n        this._m[7] = 0;\n        this._m[8] = 1;\n        return this;\n    }\n\n    /**\n     * Multiply to 3d vector.\n     * @public\n     * @params {Vec3} p - 3d vector.\n     * @returns {Vec3}\n     */\n    public mulVec(p: Vec3): Vec3 {\n\n        let d = p.x,\n            e = p.y,\n            g = p.z;\n\n        let m = this._m;\n\n        return new Vec3(\n            m[0] * d + m[3] * e + m[6] * g,\n            m[1] * d + m[4] * e + m[7] * g,\n            m[2] * d + m[5] * e + m[8] * g\n        );\n    }\n\n    /**\n     * Converts to 4x4 matrix.\n     * @public\n     * @returns {Mat4}\n     */\n    public toMatrix4(): Mat4 {\n\n        let res = new Mat4();\n        let b = res._m;\n        let a = this._m;\n\n        b[0] = a[0];\n        b[1] = a[1];\n        b[2] = a[2];\n        b[3] = 0;\n        b[4] = a[3];\n        b[5] = a[4];\n        b[6] = a[5];\n        b[7] = 0;\n        b[8] = a[6];\n        b[9] = a[7];\n        b[10] = a[8];\n        b[11] = 0;\n        b[12] = 0;\n        b[13] = 0;\n        b[14] = 0;\n        b[15] = 1;\n\n        return res;\n    }\n}\n\n/**\n * Mat3 factory.\n * @static\n * @return {Mat3}\n */\nexport function mat3(): Mat3 {\n    return new Mat3();\n}\n","import {frac} from \"../math\";\nimport {Vec3} from \"./Vec3\";\n\nexport type NumberArray4 = [number, number, number, number];\n\n/**\n * Class represents a 4d vector.\n * @class\n * @param {number} [x] - First value.\n * @param {number} [y] - Second value.\n * @param {number} [z] - Third value.\n * @param {number} [w] - Fourth value.\n */\nexport class Vec4 {\n\n    /**\n     * @public\n     * @type {number}\n     */\n    public x: number;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    public y: number;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    public z: number;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    public w: number;\n\n\n    constructor(x: number = 0.0, y: number = 0.0, z: number = 0.0, w: number = 0.0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n\n    /**\n     * Identity vector [0,0,0,1].\n     * @const\n     * @type {Vec4}\n     */\n    static get identity(): Vec4 {\n        return new Vec4(0, 0, 0, 1);\n    }\n\n    /**\n     * Creates 4d vector from array.\n     * @function\n     * @param {Array.<number>} arr - Array of four values\n     * @returns {Vec4}\n     */\n    static fromVec(arr: NumberArray4): Vec4 {\n        return new Vec4(arr[0], arr[1], arr[2], arr[3]);\n    }\n\n    /**\n     * Converts to Vec3, without fourth value.\n     * @public\n     * @returns {Vec3}\n     */\n    public toVec3(): Vec3 {\n        return new Vec3(this.x, this.y, this.z);\n    }\n\n    /**\n     * Returns clone vector.\n     * @public\n     * @returns {Vec4}\n     */\n    public clone(): Vec4 {\n        return new Vec4(this.x, this.y, this.z, this.w);\n    }\n\n    /**\n     * Compares with vector. Returns true if it equals another.\n     * @public\n     * @param {Vec4} v - Vector to compare.\n     * @returns {boolean}\n     */\n    public equal(v: Vec4): boolean {\n        return this.x === v.x && this.y === v.y && this.z === v.z && this.w === v.w;\n    }\n\n    /**\n     * Copy input vector's values.\n     * @param {Vec4} v - Vector to copy.\n     * @returns {Vec4}\n     */\n    public copy(v: Vec4): Vec4 {\n        this.x = v.x;\n        this.y = v.y;\n        this.z = v.z;\n        this.w = v.w;\n        return this;\n    }\n\n    /**\n     * Converts vector to a number array.\n     * @public\n     * @returns {Array.<number>} - (exactly 4 entries)\n     */\n    public toArray(): NumberArray4 {\n        return [this.x, this.y, this.z, this.w];\n    }\n\n    /**\n     * Converts vector to a number array.\n     * @public\n     * @returns {Array.<number>} - (exactly 4 entries)\n     */\n    toArray3(): [number, number, number] {\n        return [this.x, this.y, this.z];\n    }\n\n    /**\n     * Sets vector's values.\n     * @public\n     * @param {number} x - Value X.\n     * @param {number} y - Value Y.\n     * @param {number} z - Value Z.\n     * @param {number} w - Value W.\n     * @returns {Vec4}\n     */\n    public set(x: number, y: number, z: number, w: number): Vec4 {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n        return this;\n    }\n\n    /**\n     * Adds vector to the current.\n     * @public\n     * @param {Vec4} v - Vector to add.\n     * @returns {Vec4}\n     */\n    public addA(v: Vec4): Vec4 {\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n        this.w += v.w;\n        return this;\n    }\n\n    /**\n     * Subtract vector from the current.\n     * @public\n     * @param {Vec4} v - Subtract vector.\n     * @returns {Vec4}\n     */\n    public subA(v: Vec4): Vec4 {\n        this.x -= v.x;\n        this.y -= v.y;\n        this.z -= v.z;\n        this.w -= v.w;\n        return this;\n    }\n\n    /**\n     * Scale current vector.\n     * @public\n     * @param {number} scale - Scale value.\n     * @returns {Vec4}\n     */\n    public scale(scale: number): Vec4 {\n        this.x *= scale;\n        this.y *= scale;\n        this.z *= scale;\n        this.w *= scale;\n        return this;\n    }\n\n    /**\n     * Makes vector affinity. Thereby fourth component becomes to 1.0.\n     * @public\n     * @returns {Vec4}\n     */\n    public affinity(): Vec4 {\n\n        let iw = 1.0 / this.w;\n\n        this.x *= iw;\n        this.y *= iw;\n        this.z *= iw;\n        this.w = 1.0;\n\n        return this;\n    }\n\n    /**\n     * Scale current vector to another instance.\n     * @public\n     * @param {number} scale - Scale value.\n     * @returns {Vec3}\n     */\n    public scaleTo(scale: number): Vec4 {\n        return new Vec4(this.x * scale, this.y * scale, this.z * scale, this.w * scale);\n    }\n\n    /**\n     * Vector's edge function that returns vector where each component is 0.0 if it's smaller than edge and otherwise 1.0.\n     * @public\n     * @returns {Vec4}\n     */\n    public getStep(edge: number): Vec4 {\n        return new Vec4(\n            this.x < edge ? 0.0 : 1.0,\n            this.y < edge ? 0.0 : 1.0,\n            this.z < edge ? 0.0 : 1.0,\n            this.w < edge ? 0.0 : 1.0\n        );\n    }\n\n    /**\n     * The vector frac function returns the vector of fractional parts of each value, i.e. x minus floor(x).\n     * @public\n     * @param {Vec4} v - Input vector\n     * @returns {Vec4}\n     */\n    public getFrac(v: Vec4): Vec4 {\n        return new Vec4(frac(v.x), frac(v.y), frac(v.z), frac(v.w));\n    }\n\n    /**\n     * Gets vectors dot production.\n     * @public\n     * @param {Vec4} v - Another vector.\n     * @returns {number} - Dot product.\n     */\n    public dot(v: Vec4): number {\n        return v.x * this.x + v.y * this.y + v.z * this.z + v.w * this.w;\n    }\n\n    /**\n     * Returns true if vector's values are zero.\n     * @public\n     * @returns {boolean} -\n     */\n    public isZero(): boolean {\n        return !(this.x || this.y || this.z || this.w);\n    }\n}\n\n/**\n * Vector 4d object creator.\n * @function\n * @param {number} [x] - First value.\n * @param {number} [y] - Second value.\n * @param {number} [z] - Third value.\n * @param {number} [w] - Fourth value.\n * @returns {Vec4}\n */\nexport function vec4(x: number = 0, y: number = 0, z: number = 0, w: number = 0): Vec4 {\n    return new Vec4(x, y, z, w);\n}\n","import {Mat3} from \"./Mat3\";\nimport {Quat} from \"./Quat\";\nimport {Vec3} from \"./Vec3\";\nimport {Vec4} from \"./Vec4\";\n\nexport type NumberArray16 = [\n    number, number, number, number,\n    number, number, number, number,\n    number, number, number, number,\n    number, number, number, number\n];\n\n/**\n * Class represents a 4x4 matrix.\n * @class\n */\nexport class Mat4 {\n\n    /**\n     * A 4x4 matrix, index-able as a column-major order array.\n     * @public\n     * @type {Array.<number>}\n     */\n    public _m: NumberArray16 = [\n        0, 0, 0, 0,\n        0, 0, 0, 0,\n        0, 0, 0, 0,\n        0, 0, 0, 0\n    ];\n\n    constructor() {\n    }\n\n    /**\n     * Returns identity matrix instance.\n     * @static\n     * @returns {Mat4} -\n     */\n    static identity(): Mat4 {\n        let res = new Mat4();\n        res._m[0] = 1;\n        res._m[1] = 0;\n        res._m[2] = 0;\n        res._m[3] = 0;\n        res._m[4] = 0;\n        res._m[5] = 1;\n        res._m[6] = 0;\n        res._m[7] = 0;\n        res._m[8] = 0;\n        res._m[9] = 0;\n        res._m[10] = 1;\n        res._m[11] = 0;\n        res._m[12] = 0;\n        res._m[13] = 0;\n        res._m[14] = 0;\n        res._m[15] = 1;\n        return res;\n    }\n\n    /**\n     * Sets column-major order array matrix.\n     * @public\n     * @param {Array.<number>} m - Matrix array.\n     * @returns {Mat4} -\n     */\n    public set(m: NumberArray16): Mat4 {\n        this._m[0] = m[0];\n        this._m[1] = m[1];\n        this._m[2] = m[2];\n        this._m[3] = m[3];\n        this._m[4] = m[4];\n        this._m[5] = m[5];\n        this._m[6] = m[6];\n        this._m[7] = m[7];\n        this._m[8] = m[8];\n        this._m[9] = m[9];\n        this._m[10] = m[10];\n        this._m[11] = m[11];\n        this._m[12] = m[12];\n        this._m[13] = m[13];\n        this._m[14] = m[14];\n        this._m[15] = m[15];\n        return this;\n    }\n\n    /**\n     * Duplicates a Matrix3 instance.\n     * @public\n     * @returns {Mat4} -\n     */\n    public clone(): Mat4 {\n        let res = new Mat4();\n        res.set(this._m);\n        return res;\n    }\n\n    /**\n     * Copy matrix.\n     * @public\n     * @param {Mat4} a - Matrix to copy.\n     * @return {Mat4}\n     */\n    public copy(a: Mat4): Mat4 {\n        return this.set(a._m);\n    }\n\n    /**\n     * Converts to 3x3 matrix.\n     * @public\n     * @returns {Mat3} -\n     */\n    public toMatrix3(): Mat3 {\n        let res = new Mat3();\n        let a = this._m,\n            b = res._m;\n        b[0] = a[0];\n        b[1] = a[1];\n        b[2] = a[2];\n        b[3] = a[4];\n        b[4] = a[5];\n        b[5] = a[6];\n        b[6] = a[8];\n        b[7] = a[9];\n        b[8] = a[10];\n        return res;\n    }\n\n    /**\n     * Multiply to 3d vector.\n     * @public\n     * @param {Vec3} p - 3d vector.\n     * @returns {Vec3} -\n     */\n    public mulVec3(p: Vec3): Vec3 {\n        let d = p.x,\n            e = p.y,\n            g = p.z;\n        return new Vec3(\n            this._m[0] * d + this._m[4] * e + this._m[8] * g + this._m[12],\n            this._m[1] * d + this._m[5] * e + this._m[9] * g + this._m[13],\n            this._m[2] * d + this._m[6] * e + this._m[10] * g + this._m[14]\n        );\n    }\n\n    /**\n     * Multiply to 4d vector.\n     * @public\n     * @param {Vec4} p - 4d vector.\n     * @returns {Vec4} -\n     */\n    public mulVec4(p: Vec4): Vec4 {\n        let d = p.x,\n            e = p.y,\n            g = p.z,\n            f = p.w;\n        return new Vec4(\n            this._m[0] * d + this._m[4] * e + this._m[8] * g + this._m[12] * f,\n            this._m[1] * d + this._m[5] * e + this._m[9] * g + this._m[13] * f,\n            this._m[2] * d + this._m[6] * e + this._m[10] * g + this._m[14] * f,\n            this._m[3] * d + this._m[7] * e + this._m[11] * g + this._m[15] * f\n        );\n    }\n\n    /**\n     * Creates an inverse 3x3 matrix of the current.\n     * @public\n     * @returns {Mat3} -\n     */\n    public toInverseMatrix3(): Mat3 | undefined {\n        let a = this._m;\n        let c = a[0],\n            d = a[1],\n            e = a[2],\n            g = a[4],\n            f = a[5],\n            h = a[6],\n            i = a[8],\n            j = a[9],\n            k = a[10],\n            l = k * f - h * j,\n            o = -k * g + h * i,\n            m = j * g - f * i,\n            n = c * l + d * o + e * m;\n\n        if (!n) {\n            return;\n        }\n\n        n = 1.0 / n;\n\n        let res = new Mat3();\n        res._m[0] = l * n;\n        res._m[1] = (-k * d + e * j) * n;\n        res._m[2] = (h * d - e * f) * n;\n        res._m[3] = o * n;\n        res._m[4] = (k * c - e * i) * n;\n        res._m[5] = (-h * c + e * g) * n;\n        res._m[6] = m * n;\n        res._m[7] = (-j * c + d * i) * n;\n        res._m[8] = (f * c - d * g) * n;\n\n        return res;\n    }\n\n    /**\n     * Creates an inverse matrix of the current.\n     * @public\n     * @returns {Mat4} -\n     */\n    public inverseTo(res: Mat4 = new Mat4()): Mat4 {\n        let c = this._m[0],\n            d = this._m[1],\n            e = this._m[2],\n            g = this._m[3],\n            f = this._m[4],\n            h = this._m[5],\n            i = this._m[6],\n            j = this._m[7],\n            k = this._m[8],\n            l = this._m[9],\n            o = this._m[10],\n            m = this._m[11],\n            n = this._m[12],\n            p = this._m[13],\n            r = this._m[14],\n            s = this._m[15],\n            A = c * h - d * f,\n            B = c * i - e * f,\n            t = c * j - g * f,\n            u = d * i - e * h,\n            v = d * j - g * h,\n            w = e * j - g * i,\n            x = k * p - l * n,\n            y = k * r - o * n,\n            z = k * s - m * n,\n            C = l * r - o * p,\n            D = l * s - m * p,\n            E = o * s - m * r,\n            q = 1 / (A * E - B * D + t * C + u * z - v * y + w * x);\n\n        res._m[0] = (h * E - i * D + j * C) * q;\n        res._m[1] = (-d * E + e * D - g * C) * q;\n        res._m[2] = (p * w - r * v + s * u) * q;\n        res._m[3] = (-l * w + o * v - m * u) * q;\n        res._m[4] = (-f * E + i * z - j * y) * q;\n        res._m[5] = (c * E - e * z + g * y) * q;\n        res._m[6] = (-n * w + r * t - s * B) * q;\n        res._m[7] = (k * w - o * t + m * B) * q;\n        res._m[8] = (f * D - h * z + j * x) * q;\n        res._m[9] = (-c * D + d * z - g * x) * q;\n        res._m[10] = (n * v - p * t + s * A) * q;\n        res._m[11] = (-k * v + l * t - m * A) * q;\n        res._m[12] = (-f * C + h * y - i * x) * q;\n        res._m[13] = (c * C - d * y + e * x) * q;\n        res._m[14] = (-n * u + p * B - r * A) * q;\n        res._m[15] = (k * u - l * B + o * A) * q;\n\n        return res;\n    }\n\n    /**\n     * Creates a transposed matrix of the current.\n     * @public\n     * @returns {Mat4} -\n     */\n    public transposeTo(): Mat4 {\n        let res = new Mat4();\n        res._m[0] = this._m[0];\n        res._m[1] = this._m[4];\n        res._m[2] = this._m[8];\n        res._m[3] = this._m[12];\n        res._m[4] = this._m[1];\n        res._m[5] = this._m[5];\n        res._m[6] = this._m[9];\n        res._m[7] = this._m[13];\n        res._m[8] = this._m[2];\n        res._m[9] = this._m[6];\n        res._m[10] = this._m[10];\n        res._m[11] = this._m[14];\n        res._m[12] = this._m[3];\n        res._m[13] = this._m[7];\n        res._m[14] = this._m[11];\n        res._m[15] = this._m[15];\n        return res;\n    }\n\n    /**\n     * Sets matrix to identity.\n     * @public\n     * @returns {Mat4} -\n     */\n    public setIdentity(): Mat4 {\n        this._m[0] = 1;\n        this._m[1] = 0;\n        this._m[2] = 0;\n        this._m[3] = 0;\n        this._m[4] = 0;\n        this._m[5] = 1;\n        this._m[6] = 0;\n        this._m[7] = 0;\n        this._m[8] = 0;\n        this._m[9] = 0;\n        this._m[10] = 1;\n        this._m[11] = 0;\n        this._m[12] = 0;\n        this._m[13] = 0;\n        this._m[14] = 0;\n        this._m[15] = 1;\n        return this;\n    }\n\n    /**\n     * Computes the product of two matrices.\n     * @public\n     * @param {Mat4} mx - Matrix to multiply.\n     * @returns {Mat4} -\n     */\n    public mul(mx: Mat4): Mat4 {\n\n        let d = this._m[0],\n            e = this._m[1],\n            g = this._m[2],\n            f = this._m[3],\n            h = this._m[4],\n            i = this._m[5],\n            j = this._m[6],\n            k = this._m[7],\n            l = this._m[8],\n            o = this._m[9],\n            m = this._m[10],\n            n = this._m[11],\n            p = this._m[12],\n            r = this._m[13],\n            s = this._m[14],\n            a = this._m[15];\n\n        let A = mx._m[0],\n            B = mx._m[1],\n            t = mx._m[2],\n            u = mx._m[3],\n            v = mx._m[4],\n            w = mx._m[5],\n            x = mx._m[6],\n            y = mx._m[7],\n            z = mx._m[8],\n            C = mx._m[9],\n            D = mx._m[10],\n            E = mx._m[11],\n            q = mx._m[12],\n            F = mx._m[13],\n            G = mx._m[14],\n            b = mx._m[15];\n\n        let res = new Mat4();\n\n        res._m[0] = A * d + B * h + t * l + u * p;\n        res._m[1] = A * e + B * i + t * o + u * r;\n        res._m[2] = A * g + B * j + t * m + u * s;\n        res._m[3] = A * f + B * k + t * n + u * a;\n        res._m[4] = v * d + w * h + x * l + y * p;\n        res._m[5] = v * e + w * i + x * o + y * r;\n        res._m[6] = v * g + w * j + x * m + y * s;\n        res._m[7] = v * f + w * k + x * n + y * a;\n        res._m[8] = z * d + C * h + D * l + E * p;\n        res._m[9] = z * e + C * i + D * o + E * r;\n        res._m[10] = z * g + C * j + D * m + E * s;\n        res._m[11] = z * f + C * k + D * n + E * a;\n        res._m[12] = q * d + F * h + G * l + b * p;\n        res._m[13] = q * e + F * i + G * o + b * r;\n        res._m[14] = q * g + F * j + G * m + b * s;\n        res._m[15] = q * f + F * k + G * n + b * a;\n\n        return res;\n    }\n\n    /**\n     * Add translation vector to the current matrix.\n     * @public\n     * @param {Vec3} v - Translate vector.\n     * @returns {Mat4} -\n     */\n    public translate(v: Vec3): Mat4 {\n\n        let d = v.x,\n            e = v.y,\n            b = v.z;\n\n        let a = this._m;\n\n        a[12] = a[0] * d + a[4] * e + a[8] * b + a[12];\n        a[13] = a[1] * d + a[5] * e + a[9] * b + a[13];\n        a[14] = a[2] * d + a[6] * e + a[10] * b + a[14];\n        a[15] = a[3] * d + a[7] * e + a[11] * b + a[15];\n\n        return this;\n    }\n\n    /**\n     * Sets translation matrix to the position.\n     * @public\n     * @param {Vec3} v - Translate to position.\n     * @returns {Mat4} -\n     */\n    public translateToPosition(v: Vec3): Mat4 {\n        let a = this._m;\n        a[12] = v.x;\n        a[13] = v.y;\n        a[14] = v.z;\n        return this;\n    }\n\n    /**\n     * Rotate current matrix around the aligned axis and angle.\n     * @public\n     * @param {Vec3} u - Aligned axis.\n     * @param {number} angle - Aligned axis angle in radians.\n     * @returns {Mat4} -\n     */\n    public rotate(u: Vec3, angle: number): Mat4 {\n\n        let c = Math.cos(angle),\n            s = Math.sin(angle);\n\n        let rot = new Mat4();\n        let mx = rot._m;\n\n        mx[0] = c + (1 - c) * u.x * u.x;\n        mx[1] = (1 - c) * u.y * u.x - s * u.z;\n        mx[2] = (1 - c) * u.z * u.x + s * u.y;\n        mx[3] = 0;\n        mx[4] = (1 - c) * u.x * u.y + s * u.z;\n        mx[5] = c + (1 - c) * u.y * u.y;\n        mx[6] = (1 - c) * u.z * u.y - s * u.x;\n        mx[7] = 0;\n        mx[8] = (1 - c) * u.x * u.z - s * u.y;\n        mx[9] = (1 - c) * u.y * u.z + s * u.x;\n        mx[10] = c + (1 - c) * u.z * u.z;\n        mx[11] = 0;\n        mx[12] = 0;\n        mx[13] = 0;\n        mx[14] = 0;\n        mx[15] = 1;\n\n        return this.mul(rot);\n    }\n\n    /**\n     * Sets current rotation matrix around the aligned axis and angle.\n     * @public\n     * @param {Vec3} u - Aligned axis.\n     * @param {number} angle - Aligned axis angle in radians.\n     * @returns {Mat4} -\n     */\n    public setRotation(u: Vec3, angle: number): Mat4 {\n\n        let c = Math.cos(angle),\n            s = Math.sin(angle);\n\n        let mx = this._m;\n\n        mx[0] = c + (1 - c) * u.x * u.x;\n        mx[1] = (1 - c) * u.y * u.x - s * u.z;\n        mx[2] = (1 - c) * u.z * u.x + s * u.y;\n        mx[3] = 0;\n        mx[4] = (1 - c) * u.x * u.y + s * u.z;\n        mx[5] = c + (1 - c) * u.y * u.y;\n        mx[6] = (1 - c) * u.z * u.y - s * u.x;\n        mx[7] = 0;\n        mx[8] = (1 - c) * u.x * u.z - s * u.y;\n        mx[9] = (1 - c) * u.y * u.z + s * u.x;\n        mx[10] = c + (1 - c) * u.z * u.z;\n        mx[11] = 0;\n        mx[12] = 0;\n        mx[13] = 0;\n        mx[14] = 0;\n        mx[15] = 1;\n\n        return this;\n    }\n\n    /**\n     * Gets the rotation matrix from one vector to another.\n     * @public\n     * @param {Vec3} a - First vector.\n     * @param {Vec3} b - Second vector.\n     * @returns {Mat4} -\n     */\n    public rotateBetweenVectors(a: Vec3, b: Vec3): Mat4 {\n        let q = Quat.getRotationBetweenVectors(a, b);\n        return q.getMat4();\n    }\n\n    /**\n     * Scale current matrix to the vector values.\n     * @public\n     * @param {Vec3} v - Scale vector.\n     * @returns {Mat4} -\n     */\n    public scale(v: Vec3): Mat4 {\n        let mx = this._m;\n        mx[0] = mx[0] * v.x;\n        mx[1] = mx[1] * v.x;\n        mx[2] = mx[2] * v.x;\n        mx[3] = mx[3] * v.x;\n        mx[4] = mx[4] * v.y;\n        mx[5] = mx[5] * v.y;\n        mx[6] = mx[6] * v.y;\n        mx[7] = mx[7] * v.y;\n        mx[8] = mx[8] * v.z;\n        mx[9] = mx[9] * v.z;\n        mx[10] = mx[10] * v.z;\n        mx[11] = mx[11] * v.z;\n        return this;\n    }\n\n    /**\n     * Sets perspective projection matrix frustum values.\n     * @public\n     * @param {number} left -\n     * @param {number} right -\n     * @param {number} bottom -\n     * @param {number} top -\n     * @param {number} near -\n     * @param {number} far -\n     * @returns {Mat4} -\n     */\n    public setPerspective(left: number, right: number, bottom: number, top: number, near: number, far: number): Mat4 {\n\n        let h = right - left,\n            i = top - bottom,\n            j = near - far,\n            n2 = 2 * near;\n\n        let mm = this._m;\n\n        mm[0] = n2 / h;\n        mm[1] = 0;\n        mm[2] = 0;\n        mm[3] = 0;\n\n        mm[4] = 0;\n        mm[5] = n2 / i;\n        mm[6] = 0;\n        mm[7] = 0;\n\n        mm[8] = (right + left) / h;\n        mm[9] = (top + bottom) / i;\n        mm[10] = (far + near) / j;\n        mm[11] = -1;\n\n        mm[12] = 0;\n        mm[13] = 0;\n        mm[14] = (n2 * far) / j;\n        mm[15] = 0;\n\n        return this;\n    }\n\n    /**\n     * Creates current orthographic projection matrix.\n     * @public\n     * @param {number} left -\n     * @param {number} right -\n     * @param {number} bottom -\n     * @param {number} top -\n     * @param {number} near -\n     * @param {number} far -\n     * @return {Mat4} -\n     */\n    public setOrtho(left: number, right: number, bottom: number, top: number, near: number, far: number): Mat4 {\n\n        let lr = 1.0 / (left - right),\n            bt = 1.0 / (bottom - top),\n            nf = 1.0 / (near - far),\n            m = this._m;\n\n        m[0] = -2.0 * lr;\n        m[1] = 0;\n        m[2] = 0;\n        m[3] = 0;\n        m[4] = 0;\n        m[5] = -2.0 * bt;\n        m[6] = 0;\n        m[7] = 0;\n        m[8] = 0;\n        m[9] = 0;\n        m[10] = 2.0 * nf;\n        m[11] = 0;\n        m[12] = (left + right) * lr;\n        m[13] = (top + bottom) * bt;\n        m[14] = (far + near) * nf;\n        m[15] = 1.0;\n\n        return this;\n    }\n\n    /**\n     * Sets current rotation matrix by euler's angles.\n     * @public\n     * @param {number} ax - Rotation angle in radians around X axis.\n     * @param {number} ay - Rotation angle in radians around Y axis.\n     * @param {number} az - Rotation angle in radians around Z axis.\n     * @returns {Mat4} -\n     */\n    public eulerToMatrix(ax: number, ay: number, az: number): Mat4 {\n\n        let a = Math.cos(ax),\n            b = Math.sin(ax),\n            c = Math.cos(ay),\n            d = Math.sin(ay),\n            e = Math.cos(az),\n            f = Math.sin(az);\n\n        let ad = a * d,\n            bd = b * d;\n\n        let mat = this._m;\n\n        mat[0] = c * e;\n        mat[1] = -c * f;\n        mat[2] = -d;\n        mat[4] = -bd * e + a * f;\n        mat[5] = bd * f + a * e;\n        mat[6] = -b * c;\n        mat[8] = ad * e + b * f;\n        mat[9] = -ad * f + b * e;\n        mat[10] = a * c;\n        mat[3] = mat[7] = mat[11] = mat[12] = mat[13] = mat[14] = 0;\n        mat[15] = 1;\n\n        return this;\n    }\n}\n\n/**\n * Mat4 factory.\n * @static\n * @returns {Mat4} -\n */\nexport function mat4(): Mat4 {\n    return new Mat4();\n}\n","import * as math from \"../math\";\nimport {Vec3} from \"./Vec3\";\nimport {Mat4} from \"./Mat4\";\nimport {Mat3} from \"./Mat3\";\n\n/**\n * A set of 4-dimensional coordinates used to represent rotation in 3-dimensional space.\n * @constructor\n * @param {Number} [x=0.0] The X component.\n * @param {Number} [y=0.0] The Y component.\n * @param {Number} [z=0.0] The Z component.\n * @param {Number} [w=0.0] The W component.\n */\nexport class Quat {\n    /**\n     * The X component.\n     * @public\n     * @type {Number}\n     * @default 0.0\n     */\n    public x: number;\n\n    /**\n     * The Y component.\n     * @public\n     * @type {Number}\n     * @default 0.0\n     */\n    public y: number;\n\n    /**\n     * The Z component.\n     * @public\n     * @type {Number}\n     * @default 0.0\n     */\n    public z: number;\n\n    /**\n     * The W component.\n     * @public\n     * @type {Number}\n     * @default 0.0\n     */\n    public w: number;\n\n    constructor(x: number = 0.0, y: number = 0.0, z: number = 0.0, w: number = 0.0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n\n    /**\n     * Identity Quat.\n     * @const\n     * @type {Quat}\n     */\n    static get IDENTITY(): Quat {\n        return new Quat(0.0, 0.0, 0.0, 1.0);\n    }\n\n    /**\n     * Returns a Quat represents rotation around X axis.\n     * @static\n     * @param {number} a - The angle in radians to rotate around the axis.\n     * @returns {Quat} -\n     */\n    static xRotation(a: number): Quat {\n        a *= 0.5;\n        return new Quat(Math.sin(a), 0.0, 0.0, Math.cos(a));\n    }\n\n    /**\n     * Returns a Quat represents rotation around Y axis.\n     * @static\n     * @param {number} a - The angle in radians to rotate around the axis.\n     * @returns {Quat} -\n     */\n    static yRotation(a: number): Quat {\n        a *= 0.5;\n        return new Quat(0.0, Math.sin(a), 0.0, Math.cos(a));\n    }\n\n    /**\n     * Returns a Quat represents rotation around Z axis.\n     * @static\n     * @param {number} a - The angle in radians to rotate around the axis.\n     * @returns {Quat} -\n     */\n    static zRotation(a: number): Quat {\n        a *= 0.5;\n        return new Quat(0.0, 0.0, Math.sin(a), Math.cos(a));\n    }\n\n    /**\n     * Computes a Quat representing a rotation around an axis.\n     * @static\n     * @param {Vec3} axis - The axis of rotation.\n     * @param {number} [angle=0.0] The angle in radians to rotate around the axis.\n     * @returns {Quat} -\n     */\n    static axisAngleToQuat(axis: Vec3, angle: number = 0): Quat {\n        let v = axis.getNormal();\n        let half_angle = angle * 0.5;\n        let sin_a = Math.sin(half_angle);\n        return new Quat(v.x * sin_a, v.y * sin_a, v.z * sin_a, Math.cos(half_angle));\n    }\n\n    /**\n     * Computes a rotation from the given heading and up vector.\n     * @static\n     * @param {Vec3} forward - Heading target coordinates.\n     * @param {Vec3} up - Up vector.\n     * @returns {Quat} -\n     */\n    static getLookRotation(forward: Vec3, up: Vec3): Quat {\n        let f = forward.getNormal().negate();\n        let s = up.cross(f).normalize();\n        let u = f.cross(s);\n        let z = 1.0 + s.x + u.y + f.z;\n\n        if (z > 0.000001) {\n            let fd = 1.0 / (2.0 * Math.sqrt(z));\n            return new Quat((f.y - u.z) * fd, (s.z - f.x) * fd, (u.x - s.y) * fd, 0.25 / fd);\n        }\n\n        if (s.x > u.y && s.x > f.z) {\n            let fd = 1.0 / (2.0 * Math.sqrt(1.0 + s.x - u.y - f.z));\n            return new Quat(0.25 / fd, (u.x + s.y) * fd, (s.z + f.x) * fd, (f.y - u.z) * fd);\n        }\n\n        if (u.y > f.z) {\n            let fd = 1.0 / (2.0 * Math.sqrt(1.0 + u.y - s.x - f.z));\n            return new Quat((u.x + s.y) * fd, 0.25 / fd, (f.y + u.z) * fd, (s.z - f.x) * fd);\n        }\n\n        let fd = 1.0 / (2.0 * Math.sqrt(1.0 + f.z - s.x - u.y));\n        return new Quat((s.z + f.x) * fd, (f.y + u.z) * fd, 0.25 / fd, (u.x - s.y) * fd);\n    }\n\n    /**\n     * Computes a Quat from source point heading to the destination point.\n     * @static\n     * @param {Vec3} sourcePoint - Source coordinate.\n     * @param {Vec3} destPoint - Destination coordinate.\n     * @returns {Quat} -\n     */\n    static getLookAtSourceDest(sourcePoint: Vec3, destPoint: Vec3): Quat {\n        let forwardVector = destPoint.subA(sourcePoint).normalize();\n        let dot = Vec3.FORWARD.dot(forwardVector);\n        if (Math.abs(dot - -1.0) < 0.000001) {\n            return Quat.axisAngleToQuat(Vec3.UP, Math.PI);\n        }\n        if (Math.abs(dot - 1.0) < 0.000001) {\n            return new Quat(0.0, 0.0, 0.0, 1.0);\n        }\n        let rotAngle = Math.acos(dot);\n        let rotAxis = Vec3.FORWARD.cross(forwardVector).normalize();\n        return Quat.axisAngleToQuat(rotAxis, rotAngle);\n    }\n\n    /**\n     * Compute rotation between two vectors.\n     * @static\n     * @param {Vec3} u - First vector.\n     * @param {Vec3} v - Second vector.\n     * @returns {Quat} -\n     */\n    static getRotationBetweenVectors(u: Vec3, v: Vec3): Quat {\n        let w = u.cross(v);\n        let q = new Quat(w.x, w.y, w.z, 1.0 + u.dot(v));\n        return q.normalize();\n    }\n\n    /**\n     * Compute rotation between two vectors.\n     * @static\n     * @param {Vec3} u - First vector.\n     * @param {Vec3} v - Second vector.\n     * @param {Quat} res\n     * @returns {Quat} -\n     */\n    static getRotationBetweenVectorsRes(u: Vec3, v: Vec3, res: Quat): Quat {\n        let w = u.cross(v);\n        res.set(w.x, w.y, w.z, 1.0 + u.dot(v));\n        return res.normalize();\n    }\n\n    /**\n     * Compute rotation between two vectors with around vector up\n     * for exactly opposite vectors. If vectors exactly in the same\n     * direction as returns identity Quat.\n     * @static\n     * @param {Vec3} source - First vector.\n     * @param {Vec3} dest - Second vector.\n     * @param {Vec3} up - Up vector.\n     * @returns {Quat} -\n     */\n    static getRotationBetweenVectorsUp(source: Vec3, dest: Vec3, up: Vec3): Quat {\n        let dot = source.dot(dest);\n        if (Math.abs(dot + 1.0) < 0.000001) {\n            // vector source and dest point exactly in the opposite direction,\n            // so it is a 180 degrees turn around the up-axis\n            return Quat.axisAngleToQuat(up, Math.PI);\n        }\n        if (Math.abs(dot - 1.0) < 0.000001) {\n            // vector source and dest point exactly in the same direction,\n            // so we return the identity Quat\n            return new Quat(0, 0, 0, 1);\n        }\n        let rotAngle = Math.acos(dot);\n        let rotAxis = source.cross(dest).normalize();\n        return Quat.axisAngleToQuat(rotAxis, rotAngle);\n    }\n\n    static setFromEulerAngles(pitch: number, yaw: number, roll: number): Quat {\n        let res = new Quat();\n        return res.setFromEulerAngles(pitch, yaw, roll);\n    }\n\n    /**\n     * Returns true if the components are zero.\n     * @public\n     * @returns {boolean} -\n     */\n    public isZero(): boolean {\n        return this.x === 0.0 && this.y === 0.0 && this.z === 0.0 && this.w === 0.0;\n    }\n\n    /**\n     * Clear Quat. Sets zeroes.\n     * @public\n     * @returns {Quat} -\n     */\n    public clear(): Quat {\n        this.x = this.y = this.z = this.w = 0;\n        return this;\n    }\n\n    /**\n     * Sets Quat values.\n     * @public\n     * @param {Number} [x=0.0] The X component.\n     * @param {Number} [y=0.0] The Y component.\n     * @param {Number} [z=0.0] The Z component.\n     * @param {Number} [w=0.0] The W component.\n     * @returns {Quat} -\n     */\n    public set(x: number, y: number, z: number, w: number): Quat {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n        return this;\n    }\n\n    /**\n     * Copy Quat values.\n     * @public\n     * @param {Quat} q - Copy Quat.\n     * @returns {Quat} -\n     */\n    public copy(q: Quat): Quat {\n        this.x = q.x;\n        this.y = q.y;\n        this.z = q.z;\n        this.w = q.w;\n        return this;\n    }\n\n    /**\n     * Set current Quat instance to identity Quat.\n     * @public\n     * @returns {Quat} -\n     */\n    public setIdentity(): Quat {\n        this.x = 0.0;\n        this.y = 0.0;\n        this.z = 0.0;\n        this.w = 1.0;\n        return this;\n    }\n\n    /**\n     * Duplicates a Quat instance.\n     * @public\n     * @returns {Quat} -\n     */\n    public clone(): Quat {\n        return new Quat(this.x, this.y, this.z, this.w);\n    }\n\n    /**\n     * Computes the componentwise sum of two Quats.\n     * @public\n     * @param {Quat} q - Quat to add.\n     * @returns {Quat} -\n     */\n    public add(q: Quat): Quat {\n        return new Quat(this.x + q.x, this.y + q.y, this.z + q.z, this.w + q.w);\n    }\n\n    /**\n     * Computes the componentwise difference of two Quats.\n     * @public\n     * @param {Quat} q - Quat to subtract.\n     * @returns {Quat} -\n     */\n    public sub(q: Quat): Quat {\n        return new Quat(this.x - q.x, this.y - q.y, this.z - q.z, this.w - q.w);\n    }\n\n    /**\n     * Multiplies the provided Quat componentwise by the provided scalar.\n     * @public\n     * @param {Number} scale - The scalar to multiply with.\n     * @returns {Quat} -\n     */\n    public scaleTo(scale: number): Quat {\n        return new Quat(this.x * scale, this.y * scale, this.z * scale, this.w * scale);\n    }\n\n    /**\n     * Multiplies the provided Quat componentwise.\n     * @public\n     * @param {Number} scale - The scalar to multiply with.\n     * @returns {Quat} -\n     */\n    public scale(scale: number): Quat {\n        this.x *= scale;\n        this.y *= scale;\n        this.z *= scale;\n        this.w *= scale;\n        return this;\n    }\n\n    /**\n     * Converts Quat values to array.\n     * @public\n     * @returns {Array.<number>} - (exactly 4 entries)\n     */\n    public toVec(): [number, number, number, number] {\n        return [this.x, this.y, this.z, this.w];\n    }\n\n    /**\n     * Sets current quaternion by spherical coordinates.\n     * @public\n     * @param {number} lat - Latitude.\n     * @param {number} lon - Longitude.\n     * @param {number} angle - Angle in radians.\n     * @returns {Quat} -\n     */\n    public setFromSphericalCoords(lat: number, lon: number, angle: number): Quat {\n        let sin_a = Math.sin(angle / 2);\n        let cos_a = Math.cos(angle / 2);\n        let sin_lat = Math.sin(lat);\n        let cos_lat = Math.cos(lat);\n        let sin_long = Math.sin(lon);\n        let cos_long = Math.cos(lon);\n\n        this.x = sin_a * cos_lat * sin_long;\n        this.y = sin_a * sin_lat;\n        this.z = sin_a * sin_lat * cos_long;\n        this.w = cos_a;\n\n        return this;\n    }\n\n    /**\n     * Sets rotation with the given heading and up vectors.\n     * @static\n     * @param {Vec3} forward - Heading target coordinates.\n     * @param {Vec3} up - Up vector.\n     * @returns {Quat} -\n     */\n    public setLookRotation(forward: Vec3, up: Vec3): Quat {\n        let f = forward.getNormal().negate();\n        let s = up.cross(f).normalize();\n        let u = f.cross(s);\n        let z = 1.0 + s.x + u.y + f.z;\n\n        if (z > 0.000001) {\n            let fd = 1.0 / (2.0 * Math.sqrt(z));\n            this.x = (f.y - u.z) * fd;\n            this.y = (s.z - f.x) * fd;\n            this.z = (u.x - s.y) * fd;\n            this.w = 0.25 / fd;\n        } else if (s.x > u.y && s.x > f.z) {\n            let fd = 1.0 / (2.0 * Math.sqrt(1.0 + s.x - u.y - f.z));\n            this.x = 0.25 / fd;\n            this.y = (u.x + s.y) * fd;\n            this.z = (s.z + f.x) * fd;\n            this.w = (f.y - u.z) * fd;\n        } else if (u.y > f.z) {\n            let fd = 1.0 / (2.0 * Math.sqrt(1.0 + u.y - s.x - f.z));\n            this.x = (u.x + s.y) * fd;\n            this.y = 0.25 / fd;\n            this.z = (f.y + u.z) * fd;\n            this.w = (s.z - f.x) * fd;\n        } else {\n            let fd = 1.0 / (2.0 * Math.sqrt(1.0 + f.z - s.x - u.y));\n            this.x = (s.z + f.x) * fd;\n            this.y = (f.y + u.z) * fd;\n            this.z = 0.25 / fd;\n            this.w = (u.x - s.y) * fd;\n        }\n\n        return this;\n    }\n\n    /**\n     * Gets spherical coordinates.\n     * @public\n     * @returns {Object} Returns object with latitude, longitude and alpha.\n     */\n    public toSphericalCoords(): any {\n\n        let cos_a = this.w;\n        let sin_a = Math.sqrt(1.0 - cos_a * cos_a);\n\n        // var angle = Math.acos(cos_a) * 2;\n        if (Math.abs(sin_a) < 0.0005) {\n            sin_a = 1;\n        }\n\n        let tx = this.x / sin_a;\n        let ty = this.y / sin_a;\n        let tz = this.z / sin_a;\n\n        let lon, lat = -Math.asin(ty);\n\n        if (tx * tx + tz * tz < 0.0005) {\n            lon = 0;\n        } else {\n            lon = Math.atan2(tx, tz);\n        }\n\n        if (lon < 0) {\n            lon += 360.0;\n        }\n\n        return {\n            lat: lat,\n            lon: lon,\n            alpha: Math.acos(cos_a)\n        };\n    }\n\n    /**\n     * Sets current Quat representing a rotation around an axis.\n     * @public\n     * @param {Vec3} axis - The axis of rotation.\n     * @param {number} angle The angle in radians to rotate around the axis.\n     * @returns {Quat} -\n     */\n    public setFromAxisAngle(axis: Vec3, angle: number): Quat {\n        let v = axis.getNormal();\n        let half_angle = angle * 0.5;\n        let sin_a = Math.sin(half_angle);\n        this.set(v.x * sin_a, v.y * sin_a, v.z * sin_a, Math.cos(half_angle));\n        return this;\n    }\n\n    /**\n     * Returns axis and angle of the current Quat.\n     * @public\n     * @returns {Object} -\n     */\n    public getAxisAngle(): any {\n        let x = this.x,\n            y = this.y,\n            z = this.z,\n            w = this.w;\n        let vl = Math.sqrt(x * x + y * y + z * z);\n        let axis, angle;\n        if (vl > 0.0000001) {\n            let ivl = 1.0 / vl;\n            axis = new Vec3(x * ivl, y * ivl, z * ivl);\n            if (w < 0) {\n                angle = 2.0 * Math.atan2(-vl, -w); // -PI,0\n            } else {\n                angle = 2.0 * Math.atan2(vl, w); // 0,PI\n            }\n        } else {\n            axis = new Vec3(0, 0, 0);\n            angle = 0;\n        }\n\n        return {\n            axis: axis,\n            angle: angle\n        };\n    }\n\n    /**\n     * Sets current Quat by Euler's angles.\n     * @public\n     * @param {number} pitch - Pitch angle in degrees.\n     * @param {number} yaw - Yaw angle in degrees.\n     * @param {number} roll - Roll angle in degrees.\n     * @returns {Quat} -\n     */\n    public setFromEulerAngles(pitch: number, yaw: number, roll: number): Quat {\n        let ex = pitch * math.RADIANS_HALF,\n            ey = yaw * math.RADIANS_HALF,\n            ez = roll * math.RADIANS_HALF;\n\n        let cr = Math.cos(ex),\n            cp = Math.cos(ey),\n            cy = Math.cos(ez);\n\n        let sr = Math.sin(ex),\n            sp = Math.sin(ey),\n            sy = Math.sin(ez);\n\n        let cpcy = cp * cy,\n            spsy = sp * sy;\n\n        this.w = cr * cpcy + sr * spsy;\n        this.x = sr * cpcy - cr * spsy;\n        this.y = cr * sp * cy + sr * cp * sy;\n        this.z = cr * cp * sy - sr * sp * cy;\n\n        return this.normalize();\n    }\n\n    /**\n     * Returns Euler's angles of the current Quat.\n     * @public\n     * @returns {Object} -\n     */\n    public getEulerAngles(): any {\n        let x = this.x,\n            y = this.y,\n            z = this.z,\n            w = this.w;\n\n        let sqy = y * y;\n\n        let roll = Math.atan2(2.0 * (w * x + y * z), 1.0 - 2.0 * (x * x + sqy));\n\n        let a = w * y - z * x;\n\n        if (a < -1.0) {\n            a = -1.0;\n        } else if (a > 1.0) {\n            a = 1.0;\n        }\n        let pitch = Math.asin(2.0 * a);\n\n        let yaw = Math.atan2(2.0 * (w * z + x * y), 1.0 - 2.0 * (sqy + z * z));\n\n        return {\n            roll,\n            pitch,\n            yaw\n        };\n    }\n\n    /**\n     * Computes a Quat from the provided 4x4 matrix instance.\n     * @public\n     * @param {Mat4} mx - The rotation matrix.\n     * @returns {Quat} -\n     */\n    public setFromMatrix4(mx: Mat4): Quat {\n        let tr,\n            s,\n            q = [];\n        let i, j, k;\n        let m = mx._m;\n\n        let nxt = [1, 2, 0];\n\n        tr = m[0] + m[5] + m[10];\n\n        if (tr > 0.0) {\n            s = Math.sqrt(tr + 1.0);\n            this.w = s / 2.0;\n            s = 0.5 / s;\n            this.x = (m[6] - m[9]) * s;\n            this.y = (m[8] - m[2]) * s;\n            this.z = (m[1] - m[4]) * s;\n        } else {\n            i = 0;\n            if (m[5] > m[0]) i = 1;\n            if (m[10] > m[i * 5]) i = 2;\n            j = nxt[i];\n            k = nxt[j];\n\n            s = Math.sqrt(m[i * 5] - (m[j * 5] + m[k * 5]) + 1.0);\n\n            q[i] = s * 0.5;\n\n            if (s !== 0.0) s = 0.5 / s;\n\n            q[3] = (m[j * 4 + k] - m[k * 4 + j]) * s;\n            q[j] = (m[i * 4 + j] + m[j * 4 + i]) * s;\n            q[k] = (m[i * 4 + k] + m[k * 4 + i]) * s;\n\n            this.x = q[0];\n            this.y = q[1];\n            this.z = q[2];\n            this.w = q[3];\n        }\n        return this;\n    }\n\n    /**\n     * Converts current Quat to the rotation 4x4 matrix.\n     * @public\n     * @params {Mat4} [out] - Output matrix\n     * @returns {Mat4} -\n     */\n    public getMat4(out: Mat4 = new Mat4()): Mat4 {\n        let xs = this.x + this.x;\n        let ys = this.y + this.y;\n        let zs = this.z + this.z;\n        let wx = this.w * xs;\n        let wy = this.w * ys;\n        let wz = this.w * zs;\n        let xx = this.x * xs;\n        let xy = this.x * ys;\n        let xz = this.x * zs;\n        let yy = this.y * ys;\n        let yz = this.y * zs;\n        let zz = this.z * zs;\n\n        return out.set([\n            1 - (yy + zz), xy - wz, xz + wy, 0,\n            xy + wz, 1 - (xx + zz), yz - wx, 0,\n            xz - wy, yz + wx, 1 - (xx + yy), 0,\n            0, 0, 0, 1\n        ]);\n    }\n\n    /**\n     * Converts current Quat to the rotation 3x3 matrix.\n     * @public\n     * @returns {Mat3} -\n     * @todo NOT TESTED\n     */\n    public getMat3(): Mat3 {\n        let m = new Mat3();\n        let mx = m._m;\n        let c = this.x,\n            d = this.y,\n            e = this.z,\n            g = this.w,\n            f = c + c,\n            h = d + d,\n            i = e + e,\n            j = c * f,\n            k = c * h;\n\n        c = c * i;\n\n        let l = d * h;\n\n        d = d * i;\n        e = e * i;\n        f = g * f;\n        h = g * h;\n        g = g * i;\n\n        mx[0] = 1 - (l + e);\n        mx[1] = k - g;\n        mx[2] = c + h;\n        mx[3] = k + g;\n        mx[4] = 1 - (j + e);\n        mx[5] = d - f;\n        mx[6] = c - h;\n        mx[7] = d + f;\n        mx[8] = 1 - (j + l);\n\n        return m;\n    }\n\n    /**\n     * Returns quaternion and vector production.\n     * @public\n     * @param {Vec3} v - 3d Vector.\n     * @returns {Vec3} -\n     */\n    public mulVec3(v: Vec3): Vec3 {\n        // t = 2 * cross(q.xyz, v)\n        // v' = v + q.w * t + cross(q.xyz, t)\n\n        let d = v.x,\n            e = v.y,\n            g = v.z;\n\n        let b = this.x,\n            f = this.y,\n            h = this.z,\n            a = this.w;\n\n        let i = a * d + f * g - h * e,\n            j = a * e + h * d - b * g,\n            k = a * g + b * e - f * d;\n\n        d = -b * d - f * e - h * g;\n\n        return new Vec3(\n            i * a + d * -b + j * -h - k * -f,\n            j * a + d * -f + k * -b - i * -h,\n            k * a + d * -h + i * -f - j * -b\n        );\n    }\n\n    /**\n     * Computes the product of two Quats.\n     * @public\n     * @param {Quat} q - Quat to multiply.\n     * @returns {Quat} -\n     */\n    public mul(q: Quat): Quat {\n        let d = this.x,\n            e = this.y,\n            g = this.z,\n            a = this.w;\n\n        let f = q.x,\n            h = q.y,\n            i = q.z,\n            b = q.w;\n\n        return new Quat(\n            d * b + a * f + e * i - g * h,\n            e * b + a * h + g * f - d * i,\n            g * b + a * i + d * h - e * f,\n            a * b - d * f - e * h - g * i\n        );\n    }\n\n    /**\n     * Computes the product of two Quats.\n     * @public\n     * @param {Quat} q - Quat to multiply.\n     * @returns {Quat} -\n     */\n    public mulA(q: Quat): Quat {\n        let d = this.x,\n            e = this.y,\n            g = this.z,\n            a = this.w;\n\n        let f = q.x,\n            h = q.y,\n            i = q.z,\n            b = q.w;\n\n        this.x = d * b + a * f + e * i - g * h;\n        this.y = e * b + a * h + g * f - d * i;\n        this.z = g * b + a * i + d * h - e * f;\n        this.w = a * b - d * f - e * h - g * i;\n\n        return this;\n    }\n\n    /**\n     * Gets the conjugate of the Quat.\n     * @public\n     * @returns {Quat} -\n     */\n    public conjugate(): Quat {\n        return new Quat(-this.x, -this.y, -this.z, this.w);\n    }\n\n    /**\n     * Computes the inverse of the Quat.\n     * @public\n     * @returns {Quat} -\n     */\n    public inverse(): Quat {\n        let n = 1.0 / this.magnitude2();\n        return new Quat(-this.x * n, -this.y * n, -this.z * n, this.w * n);\n    }\n\n    /**\n     * Computes a magnitude of the Quat.\n     * @public\n     * @returns {number} -\n     */\n    public magnitude(): number {\n        let b = this.x,\n            c = this.y,\n            d = this.z,\n            a = this.w;\n        return Math.sqrt(b * b + c * c + d * d + a * a);\n    }\n\n    /**\n     * Computes a squared magnitude of the Quat.\n     * @public\n     * @returns {number} -\n     */\n    public magnitude2(): number {\n        let b = this.x,\n            c = this.y,\n            d = this.z,\n            a = this.w;\n        return b * b + c * c + d * d + a * a;\n    }\n\n    /**\n     * Computes the dot (scalar) product of two Quats.\n     * @public\n     * @param {Quat} q - Second quaternion.\n     * @returns {number} -\n     */\n    public dot(q: Quat): number {\n        return this.x * q.x + this.y * q.y + this.z * q.z;\n    }\n\n    /**\n     * Current Quat normalization.\n     * @public\n     * @returns {Quat} -\n     */\n    public normalize(): Quat {\n\n        let c = this.x,\n            d = this.y,\n            e = this.z,\n            g = this.w,\n            f = Math.sqrt(c * c + d * d + e * e + g * g);\n\n        if (f === 0.0) {\n            this.x = 0;\n            this.y = 0;\n            this.z = 0;\n            this.w = 0;\n            return this;\n        }\n\n        f = 1 / f;\n        this.x = c * f;\n        this.y = d * f;\n        this.z = e * f;\n        this.w = g * f;\n\n        return this;\n    }\n\n    /**\n     * Compares two Quats.\n     * @public\n     * @param {Quat} q - Second quaternion.\n     * @returns {Boolean} -\n     */\n    public isEqual(q: Quat): boolean {\n        let matching = this.dot(q);\n        if (Math.abs(matching - 1.0) < 0.001) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Performs a spherical linear interpolation between two Quats.\n     * @public\n     * @param {Quat} b - The end rotation Quat.\n     * @param {number} t - interpolation amount between the two Quats.\n     * @returns {Quat} -\n     */\n    public slerp(b: Quat, t: number): Quat {\n\n        let ax = this.x,\n            ay = this.y,\n            az = this.z,\n            aw = this.w,\n            bx = b.x,\n            by = b.y,\n            bz = b.z,\n            bw = b.w;\n\n        let omega, cosom, sinom, scale0, scale1;\n\n        cosom = ax * bx + ay * by + az * bz + aw * bw;\n\n        if (cosom < 0.0) {\n            cosom = -cosom;\n            bx = -bx;\n            by = -by;\n            bz = -bz;\n            bw = -bw;\n        }\n\n        if (1.0 - cosom > 0.000001) {\n            omega = Math.acos(cosom);\n            sinom = Math.sin(omega);\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\n            scale1 = Math.sin(t * omega) / sinom;\n        } else {\n            scale0 = 1.0 - t;\n            scale1 = t;\n        }\n\n        return new Quat(\n            scale0 * ax + scale1 * bx,\n            scale0 * ay + scale1 * by,\n            scale0 * az + scale1 * bz,\n            scale0 * aw + scale1 * bw\n        );\n    }\n\n    /**\n     * Returns a roll angle in radians.\n     * @public\n     * @param {Boolean} [reprojectAxis] -\n     * @returns {Number} -\n     */\n    public getRoll(reprojectAxis: boolean = false): number {\n\n        let x = this.x,\n            y = this.y,\n            z = this.z,\n            w = this.w;\n\n        if (reprojectAxis) {\n            let fTy = 2.0 * y;\n            let fTz = 2.0 * z;\n            let fTwz = fTz * w;\n            let fTxy = fTy * x;\n            let fTyy = fTy * y;\n            let fTzz = fTz * z;\n            return Math.atan2(fTxy + fTwz, 1.0 - (fTyy + fTzz));\n        } else {\n            return Math.atan2(2 * (x * y + w * z), w * w + x * x - y * y - z * z);\n        }\n    }\n\n    /**\n     * Returns a pitch angle in radians.\n     * @public\n     * @param {Boolean} [reprojectAxis] -\n     * @returns {number} -\n     */\n    public getPitch(reprojectAxis: boolean = false): number {\n\n        let x = this.x,\n            y = this.y,\n            z = this.z,\n            w = this.w;\n\n        if (reprojectAxis) {\n            let fTx = 2.0 * x;\n            let fTz = 2.0 * z;\n            let fTwx = fTx * w;\n            let fTxx = fTx * x;\n            let fTyz = fTz * y;\n            let fTzz = fTz * z;\n            return Math.atan2(fTyz + fTwx, 1.0 - (fTxx + fTzz));\n        } else {\n            return Math.atan2(2 * (y * z + w * x), w * w - x * x - y * y + z * z);\n        }\n    }\n\n    /**\n     * Returns a yaw angle in radians.\n     * @public\n     * @param {Boolean} [reprojectAxis] -\n     * @returns {number} -\n     */\n    public getYaw(reprojectAxis: boolean = false): number {\n\n        let x = this.x,\n            y = this.y,\n            z = this.z,\n            w = this.w;\n\n        if (reprojectAxis) {\n            let fTx = 2.0 * x;\n            let fTy = 2.0 * y;\n            let fTz = 2.0 * z;\n            let fTwy = fTy * w;\n            let fTxx = fTx * x;\n            let fTxz = fTz * x;\n            let fTyy = fTy * y;\n            return Math.atan2(fTxz + fTwy, 1.0 - (fTxx + fTyy));\n        } else {\n            return Math.asin(-2 * (x * z - w * y));\n        }\n    }\n}\n\n/**\n * Creates Quat instance.\n * @function\n * @param {Number} [x=0.0] The X component.\n * @param {Number} [y=0.0] The Y component.\n * @param {Number} [z=0.0] The Z component.\n * @param {Number} [w=0.0] The W component.\n * @returns {Quat} -\n */\nexport function quat(x: number = 0, y: number = 0, z: number = 0, w: number = 0): Quat {\n    return new Quat(x, y, z, w);\n}\n","import {Quat} from \"./Quat\";\nimport {Vec4, NumberArray4} from \"./Vec4\";\nimport {NumberArray2} from \"./Vec2\";\n\nexport type NumberArray3 = [number, number, number];\n\n/**\n * Class represents a 3d vector.\n * @class\n * @param {number} [x] - First value.\n * @param {number} [y] - Second value.\n * @param {number} [z] - Third value.\n */\nexport class Vec3 {\n\n    /**\n     * @public\n     * @type {number}\n     */\n    public x: number;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    public y: number;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    public z: number;\n\n    constructor(x: number = 0.0, y: number = 0.0, z: number = 0.0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n\n    /** @const */\n    static get UP(): Vec3 {\n        return new Vec3(0, 1, 0);\n    }\n\n    /** @const */\n    static get DOWN(): Vec3 {\n        return new Vec3(0, -1, 0);\n    }\n\n    /** @const */\n    static get RIGHT(): Vec3 {\n        return new Vec3(1, 0, 0);\n    }\n\n    /** @const */\n    static get LEFT(): Vec3 {\n        return new Vec3(-1, 0, 0);\n    }\n\n    /** @const */\n    static get FORWARD(): Vec3 {\n        return new Vec3(0, 0, -1);\n    }\n\n    /** @const */\n    static get BACKWARD(): Vec3 {\n        return new Vec3(0, 0, 1);\n    }\n\n    /** @const */\n    static get ZERO(): Vec3 {\n        return new Vec3();\n    }\n\n    /** @const */\n    static get UNIT_X(): Vec3 {\n        return new Vec3(1, 0, 0);\n    }\n\n    /** @const */\n    static get UNIT_Y(): Vec3 {\n        return new Vec3(0, 1, 0);\n    }\n\n    /** @const */\n    static get UNIT_Z(): Vec3 {\n        return new Vec3(0, 0, 1);\n    }\n\n    /** @const */\n    static get NORTH(): Vec3 {\n        return Vec3.UNIT_Z;\n    }\n\n    /**\n     * Separate 63 bit Vec3 to two Vec3 32-bit float values.\n     * @function\n     * @param {Vec3} v - Double type value.\n     * @param {Vec3} high - Out vector high values.\n     * @param {Vec3} low - Out vector low values.\n     */\n    static doubleToTwoFloats(v: Vec3, high: Vec3, low: Vec3) {\n        let x = v.x,\n            y = v.y,\n            z = v.z;\n\n        if (x >= 0.0) {\n            let doubleHigh = Math.floor(x / 65536.0) * 65536.0;\n            high.x = Math.fround(doubleHigh);\n            low.x = Math.fround(x - doubleHigh);\n        } else {\n            let doubleHigh = Math.floor(-x / 65536.0) * 65536.0;\n            high.x = Math.fround(-doubleHigh);\n            low.x = Math.fround(x + doubleHigh);\n        }\n\n        if (y >= 0.0) {\n            let doubleHigh = Math.floor(y / 65536.0) * 65536.0;\n            high.y = Math.fround(doubleHigh);\n            low.y = Math.fround(y - doubleHigh);\n        } else {\n            let doubleHigh = Math.floor(-y / 65536.0) * 65536.0;\n            high.y = Math.fround(-doubleHigh);\n            low.y = Math.fround(y + doubleHigh);\n        }\n\n        if (z >= 0.0) {\n            let doubleHigh = Math.floor(z / 65536.0) * 65536.0;\n            high.z = Math.fround(doubleHigh);\n            low.z = Math.fround(z - doubleHigh);\n        } else {\n            let doubleHigh = Math.floor(-z / 65536.0) * 65536.0;\n            high.z = Math.fround(-doubleHigh);\n            low.z = Math.fround(z + doubleHigh);\n        }\n    }\n\n    /**\n     * Separate 63 bit Vec3 to two Vec3 32-bit float values.\n     * @function\n     * @param {Vec3} v - Double type value.\n     * @param {Float32Array} high - Out vector high values.\n     * @param {Float32Array} low - Out vector low values.\n     * @returns {Array.<number>} Encoded array. (exactly 2 entries)\n     */\n    static doubleToTwoFloat32Array(v: Vec3, high: Float32Array | NumberArray3, low: Float32Array | NumberArray3) {\n        let x = v.x,\n            y = v.y,\n            z = v.z;\n\n        if (x >= 0.0) {\n            let doubleHigh = Math.floor(x / 65536.0) * 65536.0;\n            high[0] = Math.fround(doubleHigh);\n            low[0] = Math.fround(x - doubleHigh);\n        } else {\n            let doubleHigh = Math.floor(-x / 65536.0) * 65536.0;\n            high[0] = Math.fround(-doubleHigh);\n            low[0] = Math.fround(x + doubleHigh);\n        }\n\n        if (y >= 0.0) {\n            let doubleHigh = Math.floor(y / 65536.0) * 65536.0;\n            high[1] = Math.fround(doubleHigh);\n            low[1] = Math.fround(y - doubleHigh);\n        } else {\n            let doubleHigh = Math.floor(-y / 65536.0) * 65536.0;\n            high[1] = Math.fround(-doubleHigh);\n            low[1] = Math.fround(y + doubleHigh);\n        }\n\n        if (z >= 0.0) {\n            let doubleHigh = Math.floor(z / 65536.0) * 65536.0;\n            high[2] = Math.fround(doubleHigh);\n            low[2] = Math.fround(z - doubleHigh);\n        } else {\n            let doubleHigh = Math.floor(-z / 65536.0) * 65536.0;\n            high[2] = Math.fround(-doubleHigh);\n            low[2] = Math.fround(z + doubleHigh);\n        }\n    }\n\n    /**\n     * Creates 3d vector from array.\n     * @function\n     * @param {NumberArray2 | NumberArray3 | NumberArray4} arr - Input array (exactly 3 entries)\n     * @returns {Vec3} -\n     */\n    static fromVec(arr: NumberArray2 | NumberArray3 | NumberArray4): Vec3 {\n        return new Vec3(arr[0], arr[1], arr[2]);\n    }\n\n    /**\n     * Gets angle between two vectors.\n     * @static\n     * @param {Vec3} a - First vector.\n     * @param {Vec3} b - Second vector.\n     * @returns {number} -\n     */\n    static angle(a: Vec3, b: Vec3): number {\n        return Math.acos(a.dot(b) / Math.sqrt(a.length2() * b.length2()));\n    }\n\n    /**\n     * Returns two vectors linear interpolation.\n     * @static\n     * @param {Vec3} v1 - Start vector.\n     * @param {Vec3} v2 - End vector.\n     * @param {number} l - Interpolate value.\n     * @returns {Vec3} -\n     */\n    static lerp(v1: Vec3, v2: Vec3, l: number) {\n        return new Vec3(v1.x + (v2.x - v1.x) * l, v1.y + (v2.y - v1.y) * l, v1.z + (v2.z - v1.z) * l);\n    }\n\n    /**\n     * Returns summary vector.\n     * @static\n     * @param {Vec3} a - First vector.\n     * @param {Vec3} b - Second vector.\n     * @returns {Vec3} - Summary vector.\n     */\n    static add(a: Vec3, b: Vec3): Vec3 {\n        let res = new Vec3(a.x, a.y, a.z);\n        res.addA(b);\n        return res;\n    }\n\n    /**\n     * Returns two vectors subtraction.\n     * @static\n     * @param {Vec3} a - First vector.\n     * @param {Vec3} b - Second vector.\n     * @returns {Vec3} - Vectors subtraction.\n     */\n    static sub(a: Vec3, b: Vec3): Vec3 {\n        let res = new Vec3(a.x, a.y, a.z);\n        res.subA(b);\n        return res;\n    }\n\n    /**\n     * Returns scaled vector.\n     * @static\n     * @param {Vec3} a - Input vector.\n     * @param {number} scale - Scale value.\n     * @returns {Vec3} -\n     */\n    static scale(a: Vec3, scale: number): Vec3 {\n        return a.scaleTo(scale);\n    }\n\n    /**\n     * Returns two vectors production.\n     * @static\n     * @param {Vec3} a - First vector.\n     * @param {Vec3} b - Second vector.\n     * @returns {Vec3} -\n     */\n    static mul(a: Vec3, b: Vec3): Vec3 {\n        let res = new Vec3(a.x, a.y, a.z);\n        res.mulA(b);\n        return res;\n    }\n\n    /**\n     * Returns true if two vectors are non-collinear.\n     * @public\n     * @param {Vec3} a - First vector.\n     * @param {Vec3} b - Second vector.\n     * @returns {Vec3} -\n     */\n    static noncollinear(a: Vec3, b: Vec3): boolean {\n        return Boolean(a.y * b.z - a.z * b.y || a.z * b.x - a.x * b.z || a.x * b.y - a.y * b.z);\n    }\n\n    /**\n     * Get projection of the vector to plane where n - normal to the plane.\n     * @static\n     * @param {Vec3} b - Vector to project.\n     * @param {Vec3} n - Plane normal.\n     * @param {Vec3} [def] - Default value for non existed result.\n     * @returns {Vec3} -\n     */\n    static proj_b_to_plane(b: Vec3, n: Vec3, def?: Vec3): Vec3 {\n        let res = b.sub(n.scaleTo(n.dot(b) / n.dot(n)));\n        if (def && res.isZero()) {\n            return new Vec3(def.x, def.y, def.z);\n        }\n        return res;\n    }\n\n    /**\n     * Get projection of the first vector to the second.\n     * @static\n     * @param {Vec3} b - First vector.\n     * @param {Vec3} a - Second vector.\n     * @returns {Vec3} -\n     */\n    static proj_b_to_a(b: Vec3, a: Vec3): Vec3 {\n        return a.scaleTo(a.dot(b) / a.dot(a));\n    }\n\n    /**\n     * Makes vectors normalized and orthogonal to each other.\n     * Normalizes normal. Normalizes tangent and makes sure it is orthogonal to normal (that is, angle between them is 90 degrees).\n     * @static\n     * @param {Vec3} normal - Normal vector.\n     * @param {Vec3} tangent - Tangent vector.\n     * @returns {Vec3} -\n     */\n    static orthoNormalize(normal: Vec3, tangent: Vec3): Vec3 {\n        normal = normal.getNormal();\n        normal.scale(tangent.dot(normal));\n        return tangent.subA(normal).normalize();\n    }\n\n    /**\n     * Returns vector components division product one to another.\n     * @static\n     * @param {Vec3} a - First vector.\n     * @param {Vec3} b - Second vector.\n     * @returns {Vec3} -\n     */\n    static div(a: Vec3, b: Vec3): Vec3 {\n        let res = new Vec3(a.x, a.y, a.z);\n        res.divA(b);\n        return res;\n    }\n\n    static length2(a: Vec3): number {\n        return a.length2();\n    }\n\n    // static length(a: Vec3): number {\n    //     return a.length();\n    // }\n\n    static dot(a: Vec3, b: Vec3): number {\n        return a.dot(b);\n    }\n\n    /**\n     * Converts to 4d vector, Fourth value is 1.0.\n     * @public\n     * @returns {Vec4} -\n     */\n    public toVec4(): Vec4 {\n        return new Vec4(this.x, this.y, this.z, 1.0);\n    }\n\n    /**\n     * Returns clone vector.\n     * @public\n     * @returns {Vec3} -\n     */\n    public clone(): Vec3 {\n        return new Vec3(this.x, this.y, this.z);\n    }\n\n    /**\n     * Converts vector to text string.\n     * @public\n     * @returns {string} -\n     */\n    public toString(): string {\n        return `(${this.x},${this.y},${this.z})`;\n    }\n\n    /**\n     * Returns true if vector's values are zero.\n     * @public\n     * @returns {boolean} -\n     */\n    public isZero(): boolean {\n        return !(this.x || this.y || this.z);\n    }\n\n    /**\n     * Get projection of the first vector to the second.\n     * @static\n     * @param {Vec3} a - Project vector.\n     * @returns {Vec3} -\n     */\n    public projToVec(a: Vec3): Vec3 {\n        return a.scaleTo(a.dot(this) / a.dot(a));\n    }\n\n    /**\n     * Compares with vector. Returns true if it equals another.\n     * @public\n     * @param {Vec3} p - Vector to compare.\n     * @returns {boolean} -\n     */\n    public equal(p: Vec3): boolean {\n        return this.x === p.x && this.y === p.y && this.z === p.z;\n    }\n\n    /**\n     * Copy input vector's values.\n     * @param {Vec3} p - Vector to copy.\n     * @returns {Vec3} -\n     */\n    public copy(p: Vec3): Vec3 {\n        this.x = p.x;\n        this.y = p.y;\n        this.z = p.z;\n        return this;\n    }\n\n    /**\n     * Gets vector's length.\n     * @public\n     * @returns {number} -\n     */\n    public length(): number {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }\n\n    /**\n     * Returns squared vector's length.\n     * @public\n     * @returns {number} -\n     */\n    public length2(): number {\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n    }\n\n    /**\n     * Converts vector's values to a quaternion object.\n     * @public\n     * @returns {Quat} -\n     */\n    public getQuat(): Quat {\n        return new Quat(this.x, this.y, this.z);\n    }\n\n    /**\n     * Adds vector to the current.\n     * @public\n     * @param {Vec3} p - Point to add.\n     * @returns {Vec3} -\n     */\n    public addA(p: Vec3): Vec3 {\n        this.x += p.x;\n        this.y += p.y;\n        this.z += p.z;\n        return this;\n    }\n\n    /**\n     * Gets two vectors summarization.\n     * @public\n     * @param {Vec3} p - Vector to add.\n     * @returns {Vec3} Returns a sum vector.\n     */\n    public add(p: Vec3): Vec3 {\n        return new Vec3(this.x + p.x, this.y + p.y, this.z + p.z);\n    }\n\n    /**\n     * Subtract vector from the current.\n     * @public\n     * @param {Vec3} p - Subtract vector.\n     * @returns {Vec3} -\n     */\n    public subA(p: Vec3): Vec3 {\n        this.x -= p.x;\n        this.y -= p.y;\n        this.z -= p.z;\n        return this;\n    }\n\n    /**\n     * Gets vector subtraction.\n     * @public\n     * @param {Vec3} p - Subtract vector.\n     * @return {Vec3} Returns new instance of a subtraction\n     */\n    public sub(p: Vec3): Vec3 {\n        return new Vec3(this.x - p.x, this.y - p.y, this.z - p.z);\n    }\n\n    /**\n     * Scale current vector.\n     * @public\n     * @param {number} scale - Scale value.\n     * @returns {Vec3} -\n     */\n    public scale(scale: number): Vec3 {\n        this.x *= scale;\n        this.y *= scale;\n        this.z *= scale;\n        return this;\n    }\n\n    /**\n     * Scale current vector to another instance.\n     * @public\n     * @param {number} scale - Scale value.\n     * @returns {Vec3} -\n     */\n    public scaleTo(scale: number): Vec3 {\n        return new Vec3(this.x * scale, this.y * scale, this.z * scale);\n    }\n\n    /**\n     * Multiply current vector object to another and store result in the current instance.\n     * @public\n     * @param {Vec3} vec - Multiply vector.\n     * @returns {Vec3} -\n     */\n    public mulA(vec: Vec3): Vec3 {\n        this.x *= vec.x;\n        this.y *= vec.y;\n        this.z *= vec.z;\n        return this;\n    }\n\n    /**\n     * Multiply current vector object to another and returns new vector instance.\n     * @public\n     * @param {Vec3} vec - Multiply vector.\n     * @returns {Vec3} -\n     */\n    public mul(vec: Vec3): Vec3 {\n        return new Vec3(this.x * vec.x, this.y * vec.y, this.z * vec.z);\n    }\n\n    /**\n     * Divide current vector's components to another. Results stores in the current vector object.\n     * @public\n     * @param {Vec3} vec - Div vector.\n     * @returns {Vec3} -\n     */\n    public divA(vec: Vec3): Vec3 {\n        this.x /= vec.x;\n        this.y /= vec.y;\n        this.z /= vec.z;\n        return this;\n    }\n\n    /**\n     * Divide current vector's components to another and returns new vector instance.\n     * @public\n     * @param {Vec3} vec - Div vector.\n     * @returns {Vec3} -\n     */\n    public div(vec: Vec3): Vec3 {\n        return new Vec3(this.x / vec.x, this.y / vec.y, this.z / vec.z);\n    }\n\n    /**\n     * Gets vectors dot production.\n     * @public\n     * @param {Vec3} a - Another vector.\n     * @returns {number} -\n     */\n    public dot(a: Vec3): number {\n        return a.x * this.x + a.y * this.y + a.z * this.z;\n    }\n\n    /**\n     * Gets vectors dot production.\n     * @public\n     * @param {Array.<number>} arr - Array vector. (exactly 3 entries)\n     * @returns {number} -\n     */\n    public dotArr(arr: NumberArray3 | NumberArray4): number {\n        return arr[0] * this.x + arr[1] * this.y + arr[2] * this.z;\n    }\n\n    /**\n     * Gets vectors cross production.\n     * @public\n     * @param {Vec3} point3 - Another vector.\n     * @returns {Vec3} -\n     */\n    public cross(point3: Vec3): Vec3 {\n        return new Vec3(\n            this.y * point3.z - this.z * point3.y,\n            this.z * point3.x - this.x * point3.z,\n            this.x * point3.y - this.y * point3.x\n        );\n    }\n\n    /**\n     * Sets vector to zero.\n     * @public\n     * @returns {Vec3} -\n     */\n    public clear(): Vec3 {\n        this.x = this.y = this.z = 0;\n        return this;\n    }\n\n    /**\n     * Returns normalized vector.\n     * @public\n     * @returns {Vec3} -\n     */\n    public getNormal(): Vec3 {\n        let res = new Vec3();\n        res.copy(this);\n\n        let length = 1.0 / res.length();\n\n        res.x *= length;\n        res.y *= length;\n        res.z *= length;\n\n        return res;\n    }\n\n    /**\n     * Returns normalized vector.\n     * @deprecated\n     * @public\n     * @returns {Vec3} -\n     */\n    public normal(): Vec3 {\n        let res = new Vec3();\n        res.copy(this);\n\n        let length = 1.0 / res.length();\n\n        res.x *= length;\n        res.y *= length;\n        res.z *= length;\n\n        return res;\n    }\n\n    /**\n     * Returns normalized negate vector.\n     * @public\n     * @returns {Vec3} -\n     */\n    public normalNegate(): Vec3 {\n        let res = new Vec3();\n        res.copy(this);\n\n        let length = -1.0 / res.length();\n\n        res.x *= length;\n        res.y *= length;\n        res.z *= length;\n\n        return res;\n    }\n\n    /**\n     * Returns normalized negate scale vector.\n     * @public\n     * @returns {Vec3} -\n     */\n    public normalNegateScale(scale: number): Vec3 {\n        let res = new Vec3();\n        res.copy(this);\n\n        let length = -scale / res.length();\n\n        res.x *= length;\n        res.y *= length;\n        res.z *= length;\n\n        return res;\n    }\n\n    /**\n     * Returns normalized scale vector.\n     * @public\n     * @returns {Vec3} -\n     */\n    public normalScale(scale: number): Vec3 {\n        let res = new Vec3();\n        res.copy(this);\n\n        let length = scale / res.length();\n\n        res.x *= length;\n        res.y *= length;\n        res.z *= length;\n\n        return res;\n    }\n\n    /**\n     * Normalize current vector.\n     * @public\n     * @returns {Vec3} -\n     */\n    public normalize(): Vec3 {\n        let length = 1.0 / this.length();\n        this.x *= length;\n        this.y *= length;\n        this.z *= length;\n        return this;\n    }\n\n    /**\n     * Converts vector to a number array.\n     * @public\n     * @returns {Array.<number>} - (exactly 3 entries)\n     * @deprecated\n     */\n    public toVec(): NumberArray3 {\n        return [this.x, this.y, this.z];\n    }\n\n    /**\n     * Converts vector to a number array.\n     * @public\n     * @returns {Array.<number>} - (exactly 3 entries)\n     */\n    public toArray(): NumberArray3 {\n        return [this.x, this.y, this.z];\n    }\n\n    /**\n     * Gets distance to point.\n     * @public\n     * @param {Vec3} p - Distant point.\n     * @returns {number} -\n     */\n    public distance(p: Vec3): number {\n        let dx = this.x - p.x,\n            dy = this.y - p.y,\n            dz = this.z - p.z;\n        return Math.sqrt(dx * dx + dy * dy + dz * dz);\n    }\n\n    /**\n     * Gets square distance to point.\n     * @public\n     * @param {Vec3} p - Distant point.\n     * @returns {number} -\n     */\n    public distance2(p: Vec3): number {\n        let dx = this.x - p.x,\n            dy = this.y - p.y,\n            dz = this.z - p.z;\n        return dx * dx + dy * dy + dz * dz;\n    }\n\n    /**\n     * Sets vector's values.\n     * @public\n     * @param {number} x - Value X.\n     * @param {number} y - Value Y.\n     * @param {number} z - Value Z.\n     * @returns {Vec3} -\n     */\n    public set(x: number, y: number, z: number): Vec3 {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        return this;\n    }\n\n    /**\n     * Negate current vector.\n     * @public\n     * @returns {Vec3} -\n     */\n    public negate(): Vec3 {\n        this.x = -this.x;\n        this.y = -this.y;\n        this.z = -this.z;\n        return this;\n    }\n\n    /**\n     * Negate current vector to another instance.\n     * @public\n     * @returns {Vec3} -\n     */\n    public negateTo(): Vec3 {\n        return new Vec3(-this.x, -this.y, -this.z);\n    }\n\n    /**\n     * Gets projected point coordinates of the current vector on the ray.\n     * @public\n     * @param {Vec3} pos - Ray position.\n     * @param {Vec3} direction - Ray direction.\n     * @returns {Vec3} -\n     */\n    public projToRay(pos: Vec3, direction: Vec3): Vec3 {\n        let v = Vec3.proj_b_to_a(Vec3.sub(this, pos), direction);\n        v.addA(pos);\n        return v;\n    }\n\n    /**\n     * Gets angle between two vectors.\n     * @public\n     * @param {Vec3} a - Another vector.\n     * @returns {number} -\n     */\n    public angle(a: Vec3): number {\n        return Vec3.angle(this, a);\n    }\n\n    /**\n     * Returns two vectors linear interpolation.\n     * @public\n     * @param {Vec3} v2 - End vector.\n     * @param {number} l - Interpolate value.\n     * @returns {Vec3} -\n     */\n    public lerp(v2: Vec3, l: number) {\n        return new Vec3(\n            this.x + (v2.x - this.x) * l,\n            this.y + (v2.y - this.y) * l,\n            this.z + (v2.z - this.z) * l\n        );\n    }\n\n    /**\n     * Returns vector interpolation by v(t) = v1 * t + v2 * (1 - t)\n     * @public\n     * @param {Vec3} v2 - End vector.\n     * @param {number} t - Interpolate value.\n     * @returns {Vec3} -\n     */\n    public smerp(v2: Vec3, t: number): Vec3 {\n        let one_d = 1 - t;\n        return new Vec3(\n            this.x * t + v2.x * one_d,\n            this.y * t + v2.y * one_d,\n            this.z * t + v2.z * one_d\n        );\n    }\n\n    static get LERP_DELTA(): number {\n        return 1e-6;\n    }\n\n    /**\n     * Spherically interpolates between two vectors.\n     * Interpolates between current and v2 vector by amount t. The difference between this and linear interpolation (aka, \"lerp\") is that\n     * the vectors are treated as directions rather than points in space. The direction of the returned vector is interpolated\n     * by the angle and its magnitude is interpolated between the magnitudes of from and to.\n     * @public\n     * @param {Vec3} v2 -\n     * @param {number} t - The parameter t is clamped to the range [0, 1].\n     * @returns {Vec3} -\n     */\n    public slerp(v2: Vec3, t: number): Vec3 {\n        let res = new Vec3();\n\n        if (t <= 0.0) {\n            res.copy(this);\n            return res;\n        } else if (t >= 1.0) {\n            res.copy(v2);\n            return res;\n        }\n\n        let omega, sinom, scale0, scale1;\n        let cosom = this.dot(v2);\n\n        if (1.0 - cosom > Vec3.LERP_DELTA) {\n            omega = Math.acos(cosom);\n            sinom = Math.sin(omega);\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\n            scale1 = Math.sin(t * omega) / sinom;\n        } else {\n            scale0 = 1.0 - t;\n            scale1 = t;\n        }\n\n        return Vec3.add(this.scaleTo(scale0), v2.scale(scale1));\n    }\n\n    /**\n     * Gets the shortest arc quaternion to rotate this vector to the destination vector.\n     * @param {Vec3} dest -\n     * @param {Vec3} fallbackAxis -\n     * @returns {Quat} -\n     * @todo: TEST IT!\n     */\n    public getRotationTo(dest: Vec3, fallbackAxis: Vec3): Quat {\n        // Based on Stan Melax's article in Game Programming Gems\n        // Copy, since cannot modify local\n        let v0 = this.clone();\n        let v1 = dest.clone();\n        v0.normalize();\n        v1.normalize();\n\n        let d = v0.dot(v1);\n        // If dot == 1, vectors are the same\n        if (d >= 1.0) {\n            return Quat.IDENTITY.clone();\n        }\n\n        if (d < 1e-6 - 1.0) {\n            if (!fallbackAxis.equal(Vec3.ZERO)) {\n                // rotate 180 degrees about the fallback axis\n                return Quat.axisAngleToQuat(fallbackAxis, Math.PI);\n            } else {\n                // Generate an axis\n                let axis = Vec3.UNIT_X.cross(v0);\n                if (axis.isZero()) {\n                    // pick another if colinear\n                    axis = Vec3.UNIT_Y.cross(v0);\n                }\n                axis.normalize();\n                return Quat.axisAngleToQuat(axis, Math.PI);\n            }\n        } else {\n            let s = Math.sqrt((1 + d) * 2);\n            let invs = 1.0 / s;\n            let c = v0.cross(v1);\n            let q = new Quat(c.x * invs, c.y * invs, c.z * invs, s * 0.5);\n            q.normalize();\n            return q;\n        }\n    }\n}\n\n/**\n * Vector 3d object creator.\n * @function\n * @param {number} [x] - value X.\n * @param {number} [y] - value Y.\n * @param {number} [z] - value Z.\n * @returns {Vec3} -\n */\nexport function vec3(x: number = 0, y: number = 0, z: number = 0): Vec3 {\n    return new Vec3(x, y, z);\n}\n","import {Vec3} from \"./Vec3\";\n\nexport type NumberArray2 = [number, number];\n\n/**\n * Class represents a 3d vector.\n * @class\n * @param {number} [x] - First value.\n * @param {number} [y] - Second value.\n */\nexport class Vec2 {\n\n    /**\n     * @public\n     * @type {number}\n     */\n    public x: number;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    public y: number;\n\n    constructor(x: number = 0.0, y: number = 0.0) {\n        this.x = x;\n        this.y = y;\n    }\n\n    /** @const */\n    static get UP(): Vec2 {\n        return new Vec2(0, 1);\n    }\n\n    /** @const */\n    static get DOWN(): Vec2 {\n        return new Vec2(0, -1);\n    }\n\n    /** @const */\n    static get RIGHT(): Vec2 {\n        return new Vec2(1, 0);\n    }\n\n    /** @const */\n    static get LEFT(): Vec2 {\n        return new Vec2(-1, 0);\n    }\n\n    /** @const */\n    static get ZERO(): Vec2 {\n        return new Vec2();\n    }\n\n    /**\n     * Returns summary vector.\n     * @static\n     * @param {Vec2} a - First vector.\n     * @param {Vec2} b - Second vector.\n     * @returns {Vec2} - Summary vector.\n     */\n    static add(a: Vec2, b: Vec2): Vec2 {\n        const res = new Vec2(a.x, a.y);\n        res.addA(b);\n        return res;\n    }\n\n    /**\n     * Returns two vectors subtraction.\n     * @static\n     * @param {Vec2} a - First vector.\n     * @param {Vec2} b - Second vector.\n     * @returns {Vec2} - Vectors subtraction.\n     */\n    static sub(a: Vec2, b: Vec2): Vec2 {\n        var res = new Vec2(a.x, a.y);\n        res.subA(b);\n        return res;\n    }\n\n    /**\n     * Returns scaled vector.\n     * @static\n     * @param {Vec2} a - Input vector.\n     * @param {number} scale - Scale value.\n     * @returns {Vec2}\n     */\n    static scale(a: Vec2, scale: number): Vec2 {\n        let res = new Vec2(a.x, a.y);\n        res.scale(scale);\n        return res;\n    }\n\n    /**\n     * Returns two vectors production.\n     * @static\n     * @param {Vec2} a - First vector.\n     * @param {Vec2} b - Second vector.\n     * @returns {Vec2}\n     */\n    static mul(a: Vec2, b: Vec2): Vec2 {\n        let res = new Vec2(a.x, a.y);\n        res.mulA(b);\n        return res;\n    }\n\n    /**\n     * Returns vector components division product one to another.\n     * @static\n     * @param {Vec2} a - First vector.\n     * @param {Vec2} b - Second vector.\n     * @returns {Vec2}\n     */\n    static div(a: Vec2, b: Vec2): Vec2 {\n        let res = new Vec2(a.x, a.y);\n        res.divA(b);\n        return res;\n    }\n\n    /**\n     * Get projection of the first vector to the second.\n     * @static\n     * @param {Vec2} b - First vector.\n     * @param {Vec2} a - Second vector.\n     * @returns {Vec2}\n     */\n    static proj_b_to_a(b: Vec2, a: Vec2): Vec2 {\n        return a.scaleTo(a.dot(b) / a.dot(a));\n    }\n\n    /**\n     * Gets angle between two vectors.\n     * @static\n     * @param {Vec2} a - First vector.\n     * @param {Vec2} b - Second vector.\n     * @returns {number}\n     */\n    static angle(a: Vec2, b: Vec2): number {\n        return Math.acos(a.dot(b) / Math.sqrt(a.length2() * b.length2()));\n    }\n\n    /**\n     * Makes vectors normalized and orthogonal to each other.\n     * @static\n     * @param {Vec2} normal - Normal vector.\n     * @param {Vec2} tangent - Tangent vector.\n     * @returns {Vec2}\n     */\n    static orthoNormalize(normal: Vec2, tangent: Vec2): Vec2 {\n        normal = normal.normal();\n        normal.scale(tangent.dot(normal));\n        return tangent.sub(normal).normalize();\n    }\n\n    /**\n     * Converts to 3d vector, third value is 0.0.\n     * @public\n     * @returns {Vec3}\n     */\n    public toVector3(): Vec3 {\n        return new Vec3(this.x, this.y, 0);\n    }\n\n    /**\n     * Returns clone vector.\n     * @public\n     * @returns {Vec2}\n     */\n    public clone(): Vec2 {\n        return new Vec2(this.x, this.y);\n    }\n\n    /**\n     * Compares with vector. Returns true if it equals another.\n     * @public\n     * @param {Vec2} p - Vector to compare.\n     * @returns {boolean}\n     */\n    public equal(p: Vec2): boolean {\n        return this.x === p.x && this.y === p.y;\n    }\n\n    /**\n     * Copy input vector's values.\n     * @param {Vec2} point2 - Vector to copy.\n     * @returns {Vec2}\n     */\n    public copy(point2: Vec2): Vec2 {\n        this.x = point2.x;\n        this.y = point2.y;\n        return this;\n    }\n\n    /**\n     * Gets vector's length.\n     * @public\n     * @returns {number}\n     */\n    public length(): number {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n\n    /**\n     * Returns squared vector's length.\n     * @public\n     * @returns {number}\n     */\n    public length2(): number {\n        return this.x * this.x + this.y * this.y;\n    }\n\n    /**\n     * Adds vector to the current.\n     * @public\n     * @param {Vec2}\n     * @returns {Vec2}\n     */\n    public addA(v: Vec2): Vec2 {\n        this.x += v.x;\n        this.y += v.y;\n        return this;\n    }\n\n    /**\n     * Summarize two vectors.\n     * @public\n     * @param {Vec2}\n     * @returns {Vec2}\n     */\n    public add(v: Vec2): Vec2 {\n        return new Vec2(this.x + v.x, this.y + v.y);\n    }\n\n    /**\n     * Subtract vector from the current where results saved on the current instance.\n     * @public\n     * @param {Vec2} v - Subtract vector.\n     * @returns {Vec2}\n     */\n    public subA(v: Vec2): Vec2 {\n        this.x -= v.x;\n        this.y -= v.y;\n        return this;\n    }\n\n    /**\n     * Subtract vector from the current.\n     * @public\n     * @param {Vec2} v - Subtract vector.\n     * @returns {Vec2}\n     */\n    public sub(v: Vec2): Vec2 {\n        return new Vec2(this.x - v.x, this.y - v.y);\n    }\n\n    /**\n     * Scale current vector.\n     * @public\n     * @param {number} scale - Scale value.\n     * @returns {Vec2}\n     */\n    public scale(scale: number): Vec2 {\n        this.x *= scale;\n        this.y *= scale;\n        return this;\n    }\n\n    /**\n     * Scale current vector to another instance.\n     * @public\n     * @param {number} scale - Scale value.\n     * @returns {Vec2}\n     */\n    public scaleTo(scale: number): Vec2 {\n        return new Vec2(this.x * scale, this.y * scale);\n    }\n\n    /**\n     * Multiply current vector object to another and store result in the current instance.\n     * @public\n     * @param {Vec2} vec - Multiply vector.\n     * @returns {Vec2}\n     */\n    public mulA(vec: Vec2): Vec2 {\n        this.x *= vec.x;\n        this.y *= vec.y;\n        return this;\n    }\n\n    /**\n     * Multiply current vector object to another and returns new vector instance.\n     * @public\n     * @param {Vec2} vec - Multiply vector.\n     * @returns {Vec2}\n     */\n    public mul(vec: Vec2): Vec2 {\n        return new Vec2(this.x * vec.x, this.y * vec.y);\n    }\n\n    /**\n     * Divide current vector's components to another. Results stores in the current vector object.\n     * @public\n     * @param {Vec2}\n     * @returns {Vec2}\n     */\n    public divA(vec: Vec2): Vec2 {\n        this.x /= vec.x;\n        this.y /= vec.y;\n        return this;\n    }\n\n    /**\n     * Gets vectors dot production.\n     * @public\n     * @param {Vec2} v - Another vector.\n     * @returns {number}\n     */\n    public dot(v: Vec2): number {\n        return v.x * this.x + v.y * this.y;\n    }\n\n    /**\n     * Gets vectors dot production.\n     * @public\n     * @param {Array.<number>} arr - Array vector. (exactly 2 entries)\n     * @returns {number}\n     */\n    public dotArr(arr: NumberArray2): number {\n        return arr[0] * this.x + arr[1] * this.y;\n    }\n\n    /**\n     * Gets vectors cross production.\n     * @public\n     * @param {Vec2} v - Another vector.\n     * @returns {number}\n     */\n    public cross(v: Vec2): number {\n        return this.x * v.y - this.y * v.x;\n    }\n\n    /**\n     * Sets vector to zero.\n     * @public\n     * @returns {Vec2}\n     */\n    public clear(): Vec2 {\n        this.x = this.y = 0;\n        return this;\n    }\n\n    /**\n     * Returns normalized vector.\n     * @public\n     * @returns {Vec2}\n     */\n    public normal(): Vec2 {\n        let res = new Vec2();\n        res.copy(this);\n\n        let length = 1.0 / res.length();\n\n        res.x *= length;\n        res.y *= length;\n\n        return res;\n    }\n\n    /**\n     * Normalize current vector.\n     * @public\n     * @returns {Vec2}\n     */\n    public normalize(): Vec2 {\n        let length = 1.0 / this.length();\n\n        this.x *= length;\n        this.y *= length;\n\n        return this;\n    }\n\n    /**\n     * Converts vector to a number array.\n     * @public\n     * @returns {Array.<number>} - (exactly 2 entries)\n     */\n    public toVec(): NumberArray2 {\n        return [this.x, this.y];\n    }\n\n    /**\n     * Gets distance to point.\n     * @public\n     * @param {Vec2} p - Distant point.\n     * @returns {number}\n     */\n    public distance(p: Vec2): number {\n        let vec = Vec2.sub(this, p);\n        return vec.length();\n    }\n\n    /**\n     * Sets vector's values.\n     * @public\n     * @param {number} x - Value X.\n     * @param {number} y - Value Y.\n     * @returns {Vec2}\n     */\n    public set(x: number, y: number): Vec2 {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n\n    /**\n     * Negate current vector.\n     * @public\n     * @returns {Vec2}\n     */\n    public negate(): Vec2 {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    }\n\n    /**\n     * Negate current vector to another instance.\n     * @public\n     * @returns {Vec2}\n     */\n    public negateTo(): Vec2 {\n        return new Vec2(-this.x, -this.y);\n    }\n\n    /**\n     * Gets projected point coordinates of the current vector on the ray.\n     * @public\n     * @param {Vec2} pos - Ray position.\n     * @param {Vec2} direction - Ray direction.\n     * @returns {Vec2}\n     */\n    public projToRay(pos: Vec2, direction: Vec2): Vec2 {\n        let v = Vec2.proj_b_to_a(Vec2.sub(this, pos), direction);\n        v.add(pos);\n        return v;\n    }\n\n    /**\n     * Gets angle between two vectors.\n     * @public\n     * @param {Vec2} a - Another vector.\n     * @returns {number}\n     */\n    public angle(a: Vec2): number {\n        return Vec2.angle(this, a);\n    }\n\n    /**\n     * Returns two vectors linear interpolation.\n     * @public\n     * @param {Vec2} v2 - End vector.\n     * @param {number} l - Interpolate value.\n     * @returns {Vec2}\n     */\n    public lerp(v1: Vec2, v2: Vec2, l: number): Vec2 {\n        let res = this.clone();\n        if (l <= 0.0) {\n            res.copy(v1);\n        } else if (l >= 1.0) {\n            res.copy(v2);\n        } else {\n            res = Vec2.add(v1, Vec2.sub(v2, v1).scale(l));\n        }\n        return res;\n    }\n\n    static get LERP_DELTA(): number {\n        return 1e-6;\n    }\n\n    /**\n     * Spherically interpolates between two vectors.\n     * Interpolates between current and v2 vector by amount t. The difference between this and linear interpolation (aka, \"lerp\") is that\n     * the vectors are treated as directions rather than points in space. The direction of the returned vector is interpolated\n     * by the angle and its magnitude is interpolated between the magnitudes of from and to.\n     * @public\n     * @param {Vec2} v2\n     * @param {number} t - The parameter t is clamped to the range [0, 1].\n     * @returns {Vec2}\n     */\n    public slerp(v2: Vec2, t: number): Vec2 {\n        let res = new Vec2();\n\n        if (t <= 0.0) {\n            res.copy(this);\n            return res;\n        } else if (t >= 1.0) {\n            res.copy(v2);\n            return res;\n        }\n\n        let omega, sinom, scale0, scale1;\n        let cosom = this.dot(v2);\n\n        if (1.0 - cosom > Vec2.LERP_DELTA) {\n            omega = Math.acos(cosom);\n            sinom = Math.sin(omega);\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\n            scale1 = Math.sin(t * omega) / sinom;\n        } else {\n            scale0 = 1.0 - t;\n            scale1 = t;\n        }\n\n        return Vec2.add(this.scale(scale0), v2.scale(scale1));\n    }\n}\n\n/**\n * Vector 2d object creator.\n * @function\n * @param {number} [x] - First cvalue.\n * @param {number} [y] - Second value.\n * @returns {Vec2}\n */\nexport function vec2(x: number = 0, y: number = 0): Vec2 {\n    return new Vec2(x, y);\n}\n","export const colorTable: { [id: string]: string } = {\n    \"aliceblue\": \"#f0f8ff\",\n    \"antiquewhite\": \"#faebd7\",\n    \"aqua\": \"#00ffff\",\n    \"aquamarine\": \"#7fffd4\",\n    \"azure\": \"#f0ffff\",\n    \"beige\": \"#f5f5dc\",\n    \"bisque\": \"#ffe4c4\",\n    \"black\": \"#000000\",\n    \"blanchedalmond\": \"#ffebcd\",\n    \"blue\": \"#0000ff\",\n    \"blueviolet\": \"#8a2be2\",\n    \"brown\": \"#a52a2a\",\n    \"burlywood\": \"#deb887\",\n    \"cadetblue\": \"#5f9ea0\",\n    \"chartreuse\": \"#7fff00\",\n    \"chocolate\": \"#d2691e\",\n    \"coral\": \"#ff7f50\",\n    \"cornflowerblue\": \"#6495ed\",\n    \"cornsilk\": \"#fff8dc\",\n    \"crimson\": \"#dc143c\",\n    \"cyan\": \"#00ffff\",\n    \"darkblue\": \"#00008b\",\n    \"darkcyan\": \"#008b8b\",\n    \"darkgoldenrod\": \"#b8860b\",\n    \"darkgray\": \"#a9a9a9\",\n    \"darkgreen\": \"#006400\",\n    \"darkkhaki\": \"#bdb76b\",\n    \"darkmagenta\": \"#8b008b\",\n    \"darkolivegreen\": \"#556b2f\",\n    \"darkorange\": \"#ff8c00\",\n    \"darkorchid\": \"#9932cc\",\n    \"darkred\": \"#8b0000\",\n    \"darksalmon\": \"#e9967a\",\n    \"darkseagreen\": \"#8fbc8f\",\n    \"darkslateblue\": \"#483d8b\",\n    \"darkslategray\": \"#2f4f4f\",\n    \"darkturquoise\": \"#00ced1\",\n    \"darkviolet\": \"#9400d3\",\n    \"deeppink\": \"#ff1493\",\n    \"deepskyblue\": \"#00bfff\",\n    \"dimgray\": \"#696969\",\n    \"dodgerblue\": \"#1e90ff\",\n    \"firebrick\": \"#b22222\",\n    \"floralwhite\": \"#fffaf0\",\n    \"forestgreen\": \"#228b22\",\n    \"fuchsia\": \"#ff00ff\",\n    \"gainsboro\": \"#dcdcdc\",\n    \"ghostwhite\": \"#f8f8ff\",\n    \"gold\": \"#ffd700\",\n    \"goldenrod\": \"#daa520\",\n    \"gray\": \"#808080\",\n    \"green\": \"#008000\",\n    \"greenyellow\": \"#adff2f\",\n    \"honeydew\": \"#f0fff0\",\n    \"hotpink\": \"#ff69b4\",\n    \"indianred \": \"#cd5c5c\",\n    \"indigo\": \"#4b0082\",\n    \"ivory\": \"#fffff0\",\n    \"khaki\": \"#f0e68c\",\n    \"lavender\": \"#e6e6fa\",\n    \"lavenderblush\": \"#fff0f5\",\n    \"lawngreen\": \"#7cfc00\",\n    \"lemonchiffon\": \"#fffacd\",\n    \"lightblue\": \"#add8e6\",\n    \"lightcoral\": \"#f08080\",\n    \"lightcyan\": \"#e0ffff\",\n    \"lightgoldenrodyellow\": \"#fafad2\",\n    \"lightgrey\": \"#d3d3d3\",\n    \"lightgreen\": \"#90ee90\",\n    \"lightpink\": \"#ffb6c1\",\n    \"lightsalmon\": \"#ffa07a\",\n    \"lightseagreen\": \"#20b2aa\",\n    \"lightskyblue\": \"#87cefa\",\n    \"lightslategray\": \"#778899\",\n    \"lightsteelblue\": \"#b0c4de\",\n    \"lightyellow\": \"#ffffe0\",\n    \"lime\": \"#00ff00\",\n    \"limegreen\": \"#32cd32\",\n    \"linen\": \"#faf0e6\",\n    \"magenta\": \"#ff00ff\",\n    \"maroon\": \"#800000\",\n    \"mediumaquamarine\": \"#66cdaa\",\n    \"mediumblue\": \"#0000cd\",\n    \"mediumorchid\": \"#ba55d3\",\n    \"mediumpurple\": \"#9370d8\",\n    \"mediumseagreen\": \"#3cb371\",\n    \"mediumslateblue\": \"#7b68ee\",\n    \"mediumspringgreen\": \"#00fa9a\",\n    \"mediumturquoise\": \"#48d1cc\",\n    \"mediumvioletred\": \"#c71585\",\n    \"midnightblue\": \"#191970\",\n    \"mintcream\": \"#f5fffa\",\n    \"mistyrose\": \"#ffe4e1\",\n    \"moccasin\": \"#ffe4b5\",\n    \"navajowhite\": \"#ffdead\",\n    \"navy\": \"#000080\",\n    \"oldlace\": \"#fdf5e6\",\n    \"olive\": \"#808000\",\n    \"olivedrab\": \"#6b8e23\",\n    \"orange\": \"#ffa500\",\n    \"orangered\": \"#ff4500\",\n    \"orchid\": \"#da70d6\",\n    \"palegoldenrod\": \"#eee8aa\",\n    \"palegreen\": \"#98fb98\",\n    \"paleturquoise\": \"#afeeee\",\n    \"palevioletred\": \"#d87093\",\n    \"papayawhip\": \"#ffefd5\",\n    \"peachpuff\": \"#ffdab9\",\n    \"peru\": \"#cd853f\",\n    \"pink\": \"#ffc0cb\",\n    \"plum\": \"#dda0dd\",\n    \"powderblue\": \"#b0e0e6\",\n    \"purple\": \"#800080\",\n    \"rebeccapurple\": \"#663399\",\n    \"red\": \"#ff0000\",\n    \"rosybrown\": \"#bc8f8f\",\n    \"royalblue\": \"#4169e1\",\n    \"saddlebrown\": \"#8b4513\",\n    \"salmon\": \"#fa8072\",\n    \"sandybrown\": \"#f4a460\",\n    \"seagreen\": \"#2e8b57\",\n    \"seashell\": \"#fff5ee\",\n    \"sienna\": \"#a0522d\",\n    \"silver\": \"#c0c0c0\",\n    \"skyblue\": \"#87ceeb\",\n    \"slateblue\": \"#6a5acd\",\n    \"slategray\": \"#708090\",\n    \"snow\": \"#fffafa\",\n    \"springgreen\": \"#00ff7f\",\n    \"steelblue\": \"#4682b4\",\n    \"tan\": \"#d2b48c\",\n    \"teal\": \"#008080\",\n    \"thistle\": \"#d8bfd8\",\n    \"tomato\": \"#ff6347\",\n    \"turquoise\": \"#40e0d0\",\n    \"violet\": \"#ee82ee\",\n    \"wheat\": \"#f5deb3\",\n    \"white\": \"#ffffff\",\n    \"whitesmoke\": \"#f5f5f5\",\n    \"yellow\": \"#ffff00\",\n    \"yellowgreen\": \"#9acd32\"\n};","/**\n * @module og/utils/shared\n */\n\nimport {Extent} from \"../Extent\";\nimport {LonLat} from \"../LonLat\";\nimport {Vec2} from \"../math/Vec2\";\nimport {NumberArray2} from \"../math/Vec2\";\nimport {NumberArray3, Vec3} from \"../math/Vec3\";\nimport {NumberArray4, Vec4} from \"../math/Vec4\";\nimport {colorTable} from \"./colorTable\";\n\nexport function getDefault(param?: any, def?: any): boolean {\n    return param != undefined ? param : def;\n}\n\nexport function isEmpty(v: any): boolean {\n    return v == null;\n}\n\n/**\n * Returns true if the object pointer is undefined.\n * @function\n * @param {Object} obj - Object pointer.\n * @returns {boolean} Returns true if object is undefined.\n */\nexport function isUndef(obj?: any): boolean {\n    return obj === void 0;\n}\n\nexport function isUndefExt(obj: any, defVal: any): any {\n    return isUndef(obj) ? defVal : obj;\n}\n\nlet _stampCounter: number = 0;\n\nexport function stamp(obj: any): number {\n    let stamp = obj._openglobus_id;\n    if (!stamp) {\n        stamp = obj._openglobus_id = ++_stampCounter;\n    }\n    return stamp;\n}\n\nexport function isString(s: any): boolean {\n    return typeof s === \"string\" || s instanceof String;\n}\n\nfunction d2h(val: number): string {\n    return val.toString(16).padStart(2, '0');\n}\n\nexport function rgbToStringHTML(rgb: NumberArray3 | Vec3): string {\n    let r: string, g: string, b: string;\n    if (rgb instanceof Array) {\n        r = d2h(rgb[0]);\n        g = d2h(rgb[1]);\n        b = d2h(rgb[2]);\n    } else {\n        r = d2h(rgb.x);\n        g = d2h(rgb.y);\n        b = d2h(rgb.z);\n    }\n    return `#${r}${g}${b}`;\n}\n\n/**\n * Convert html color string to the RGBA number vector.\n * @param {string} htmlColor - HTML string(\"#C6C6C6\" or \"#EF5\" or \"rgb(8,8,8)\" or \"rgba(8,8,8)\") color.\n * @param {number} [opacity] - Opacity for the output vector.\n * @returns {Vec4} -\n */\nexport function htmlColorToRgba(htmlColor: string, opacity?: number): Vec4 {\n    let hColor: any | undefined = colorTable[htmlColor];\n    if (hColor) {\n        htmlColor = hColor;\n    }\n\n    if (htmlColor[0] === \"#\") {\n        let shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        let hex = htmlColor.replace(shorthandRegex, function (m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n        let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        if (result) {\n            return new Vec4(\n                parseInt(result[1], 16) / 255,\n                parseInt(result[2], 16) / 255,\n                parseInt(result[3], 16) / 255,\n                isEmpty(opacity) ? 1.0 : opacity\n            );\n        } else {\n            return new Vec4();\n        }\n    } else {\n        if (isEmpty(opacity)) {\n            opacity = 1.0;\n        }\n        let m = htmlColor.split(\",\");\n        return new Vec4(\n            parseInt(m[0].split(\"(\")[1]) / 255,\n            parseInt(m[1]) / 255,\n            parseInt(m[2]) / 255,\n            !isEmpty(m[3]) ? parseFloat(m[3]) : opacity\n        );\n    }\n}\n\nexport function htmlColorToFloat32Array(htmlColor: string, opacity?: number): Float32Array {\n    let c = htmlColorToRgba(htmlColor, opacity);\n    return new Float32Array([c.x, c.y, c.z, c.w]);\n}\n\n/**\n * Convert html color string to the RGB number vector.\n * @param {string} htmlColor - HTML string(\"#C6C6C6\" or \"#EF5\" or \"rgb(8,8,8)\" or \"rgba(8,8,8)\") color.\n * @returns {Vec3} -\n */\nexport function htmlColorToRgb(htmlColor: string): Vec3 {\n    let hColor: any | undefined = colorTable[htmlColor];\n    if (hColor) {\n        htmlColor = hColor;\n    }\n\n    if (htmlColor[0] === \"#\") {\n        let shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        let hex = htmlColor.replace(shorthandRegex, function (m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n        let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        if (result) {\n            return new Vec3(\n                parseInt(result[1], 16) / 255,\n                parseInt(result[2], 16) / 255,\n                parseInt(result[3], 16) / 255\n            );\n        } else {\n            return new Vec3();\n        }\n    } else {\n        let m = htmlColor.split(\",\");\n        return new Vec3(\n            parseInt(m[0].split(\"(\")[1]) / 255,\n            parseInt(m[1]) / 255,\n            parseInt(m[2]) / 255\n        );\n    }\n}\n\n/**\n * Replace template substrings between '{' and '}' tokens.\n * @param {string} template - String with templates in \"{\" and \"}\"\n * @param {Object} params - Template named object with subsrtings.\n * @returns {string} -\n *\n * @example <caption>Example from og.terrain that replaces tile indexes in url:</caption>\n * var substrings = {\n *       \"x\": 12,\n *       \"y\": 15,\n *       \"z\": 8\n * }\n * og.utils.stringTemplate(\"http://earth3.openglobus.org/{z}/{y}/{x}.ddm\", substrings);\n * //returns http://earth3.openglobus.org/8/15/12.ddm\n */\nexport function stringTemplate(template: string, params?: any): string {\n    return template.replace(/{[^{}]+}/g, function (key) {\n        return params[key.replace(/[{}]+/g, \"\")] || \"\";\n    });\n}\n\nexport function getHTML(template: string, params?: any): string {\n    return stringTemplate(template, params);\n}\n\nexport function parseHTML(htmlStr: string): HTMLElement[] {\n    let p = document.createElement(\"div\");\n    p.innerHTML = htmlStr;\n    let domArr: HTMLElement[] = [];\n    for (let i = 0; i < p.childNodes.length; i++) {\n        domArr.push(p.childNodes[i] as HTMLElement);\n        p.removeChild(p.childNodes[i]);\n    }\n    return domArr;\n}\n\nexport function print2d(id: string, text: string, x: number, y: number) {\n    let el = document.getElementById(id);\n    if (!el) {\n        el = document.createElement(\"div\");\n        el.id = id;\n        el.classList.add(\"defaultText\");\n        document.body.appendChild(el);\n    }\n    el.innerHTML = text;\n    el.style.left = `${x}px`;\n    el.style.top = `${y}px`;\n}\n\nexport function isNumber(value: any): boolean {\n    return typeof value === 'number';\n}\n\nexport function defaultString(str?: string, def: string = \"\"): string {\n    return str ? str.trim() : def;\n}\n\nexport function createVector3(v?: number | Vec3 | Vec2 | NumberArray3 | NumberArray2 | null, def?: Vec3): Vec3 {\n    if (v) {\n        if (isNumber(v)) {\n            return new Vec3(v as number, v as number, v as number);\n        } else if (v instanceof Vec3) {\n            return v.clone();\n        } else if (v instanceof Array) {\n            return Vec3.fromVec(v);\n        } else if (v instanceof Vec2) {\n            return new Vec3(v.x, v.y, 0.0);\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Vec3();\n}\n\nexport function createVector4(v?: Vec4 | NumberArray4 | null, def?: Vec4): Vec4 {\n    if (v) {\n        if (v instanceof Vec4) {\n            return v.clone();\n        } else if (v instanceof Array) {\n            return Vec4.fromVec(v);\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Vec4();\n}\n\nexport function createColorRGBA(c?: string | NumberArray4 | Vec4 | null, def?: Vec4): Vec4 {\n    if (c) {\n        if (isString(c)) {\n            return htmlColorToRgba(c as string);\n        } else if (c instanceof Array) {\n            return Vec4.fromVec(c);\n        } else if (c instanceof Vec4) {\n            return c.clone();\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Vec4(1.0, 1.0, 1.0, 1.0);\n}\n\nexport function createColorRGB(c?: string | NumberArray3 | Vec3 | null, def?: Vec3): Vec3 {\n    if (c) {\n        if (isString(c)) {\n            return htmlColorToRgb(c as string);\n        } else if (c instanceof Array) {\n            return Vec3.fromVec(c);\n        } else if (c instanceof Vec3) {\n            return (c as Vec3).clone();\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Vec3(1.0, 1.0, 1.0);\n}\n\nexport function createExtent(e?: Extent | [[number, number], [number, number]] | null, def?: Extent): Extent {\n    if (e) {\n        if (e instanceof Array) {\n            return new Extent(createLonLat(e[0]), createLonLat(e[1]));\n        } else if (e instanceof Extent) {\n            return e.clone();\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Extent();\n}\n\nexport function createLonLat(l?: LonLat | NumberArray2 | NumberArray3, def?: LonLat): LonLat {\n    if (l) {\n        if (l instanceof Array) {\n            return new LonLat(l[0], l[1], l[2]);\n        } else if (l instanceof LonLat) {\n            return l.clone();\n        }\n    } else if (def) {\n        return def;\n    }\n    return new LonLat();\n}\n\nexport function binarySearchFast(arr: number[] | TypedArray, x: number) {\n    let start = 0,\n        end = arr.length - 1;\n    while (start <= end) {\n        let k = Math.floor((start + end) * 0.5);\n        if (Math.abs(arr[k] - x) < 1e-3) {\n            return k;\n        } else if (arr[k] < x) {\n            start = k + 1;\n        } else {\n            end = k - 1;\n        }\n    }\n    return -1;\n}\n\n/**\n * Finds an item in a sorted array.\n * @param {any[]} ar The sorted array to search.\n * @param {any} el The item to find in the array.\n * @param {Function} compare_fn comparator The function to use to compare the item to\n *        elements in the array.\n * @returns {number} a negative number  if 'a' is less than 'b'; 0 if 'a' is equal to 'b'; 'a' positive number of 'a' is greater than 'b'.\n *\n * @example\n * // Create a comparator function to search through an array of numbers.\n * function comparator(a, b) {\n *     return a - b;\n * };\n * var numbers = [0, 2, 4, 6, 8];\n * var index = og.utils.binarySearch(numbers, 6, comparator); // 3\n */\nexport function binarySearch(ar: any[], el: any, compare_fn: Function): number {\n    let m = 0;\n    let n = ar.length - 1;\n    while (m <= n) {\n        let k = (n + m) >> 1;\n        let cmp = compare_fn(el, ar[k], k);\n        if (cmp > 0) {\n            m = k + 1;\n        } else if (cmp < 0) {\n            n = k - 1;\n        } else {\n            return k;\n        }\n    }\n    return -m - 1;\n}\n\n/**\n * @todo: replace any with generic\n * Binary insertion that uses binarySearch algorithm.\n * @param {any[]} ar - The sorted array to insert.\n * @param {any} el - The item to insert.\n * @param {Function} compare_fn - comparator The function to use to compare the item to\n *        elements in the array.\n * @returns {number} Array index position in which item inserted in.\n */\nexport function binaryInsert(ar: any[], el: any, compare_fn: Function): number {\n    let i = binarySearch(ar, el, compare_fn);\n    if (i < 0) {\n        i = ~i;\n    }\n    ar.splice(i, 0, el);\n    return i;\n}\n\n/**\n * Returns two segment lines intersection coordinate.\n * @static\n * @param {Vec2} start1 - First line first coordinate.\n * @param {Vec2} end1 - First line second coordinate.\n * @param {Vec2} start2 - Second line first coordinate.\n * @param {Vec2} end2 - Second line second coordinate.\n * @param {boolean} [isSegment] - Lines are segments.\n * @return {Vec2} - Intersection coordinate.\n */\nexport function getLinesIntersection2v(start1: Vec2, end1: Vec2, start2: Vec2, end2: Vec2, isSegment: boolean): Vec2 | undefined {\n    let dir1 = end1.sub(start1);\n    let dir2 = end2.sub(start2);\n\n    let a1 = -dir1.y;\n    let b1 = +dir1.x;\n    let d1 = -(a1 * start1.x + b1 * start1.y);\n\n    let a2 = -dir2.y;\n    let b2 = +dir2.x;\n    let d2 = -(a2 * start2.x + b2 * start2.y);\n\n    let seg1_line2_start = a2 * start1.x + b2 * start1.y + d2;\n    let seg1_line2_end = a2 * end1.x + b2 * end1.y + d2;\n\n    let seg2_line1_start = a1 * start2.x + b1 * start2.y + d1;\n    let seg2_line1_end = a1 * end2.x + b1 * end2.y + d1;\n\n    if (\n        isSegment &&\n        (seg1_line2_start * seg1_line2_end > 0 || seg2_line1_start * seg2_line1_end > 0)\n    ) {\n        return undefined;\n    }\n\n    let u = seg1_line2_start / (seg1_line2_start - seg1_line2_end);\n\n    return new Vec2(start1.x + u * dir1.x, start1.y + u * dir1.y);\n}\n\n/**\n * Returns two segment lines intersection coordinate.\n * @static\n * @param {Vec2} start1 - First line first coordinate.\n * @param {Vec2} end1 - First line second coordinate.\n * @param {Vec2} start2 - Second line first coordinate.\n * @param {Vec2} end2 - Second line second coordinate.\n * @param {boolean} [isSegment=false] - Lines are segments.\n * @return {Vec2} - Intersection coordinate.\n */\nexport function getLinesIntersectionLonLat(start1: LonLat, end1: LonLat, start2: LonLat, end2: LonLat, isSegment: boolean = false): LonLat | undefined {\n    let dir1 = new LonLat(end1.lon - start1.lon, end1.lat - start1.lat);\n    let dir2 = new LonLat(end2.lon - start2.lon, end2.lat - start2.lat);\n\n    let a1 = -dir1.lat;\n    let b1 = +dir1.lon;\n    let d1 = -(a1 * start1.lon + b1 * start1.lat);\n\n    let a2 = -dir2.lat;\n    let b2 = +dir2.lon;\n    let d2 = -(a2 * start2.lon + b2 * start2.lat);\n\n    let seg1_line2_start = a2 * start1.lon + b2 * start1.lat + d2;\n    let seg1_line2_end = a2 * end1.lon + b2 * end1.lat + d2;\n\n    let seg2_line1_start = a1 * start2.lon + b1 * start2.lat + d1;\n    let seg2_line1_end = a1 * end2.lon + b1 * end2.lat + d1;\n\n    if (\n        isSegment &&\n        (seg1_line2_start * seg1_line2_end > 0 || seg2_line1_start * seg2_line1_end > 0)\n    ) {\n        return undefined;\n    }\n\n    let u = seg1_line2_start / (seg1_line2_start - seg1_line2_end);\n\n    return new LonLat(start1.lon + u * dir1.lon, start1.lat + u * dir1.lat);\n}\n\n/**\n * Converts XML to JSON\n * @static\n * @param {Object} xml - Xml object\n * @return {Object} - Json converted object.\n */\nexport function xmlToJson(xml: any): any {\n    // Create the return object\n    let obj: any = {};\n\n    if (xml.nodeType === 1) {\n        // element\n        // do attributes\n        if (xml.attributes.length > 0) {\n            obj[\"@attributes\"] = {};\n            for (let j = 0; j < xml.attributes.length; j++) {\n                let attribute = xml.attributes.item(j);\n                obj[\"@attributes\"][attribute.nodeName] = attribute.nodeValue;\n            }\n        }\n    } else if (xml.nodeType === 3) {\n        // text\n        obj = xml.nodeValue;\n    }\n\n    // do children\n    if (xml.hasChildNodes()) {\n        for (let i = 0; i < xml.childNodes.length; i++) {\n            let item = xml.childNodes.item(i);\n            let nodeName = item.nodeName;\n            if (typeof obj[nodeName] === \"undefined\") {\n                obj[nodeName] = xmlToJson(item);\n            } else {\n                if (typeof obj[nodeName].push === \"undefined\") {\n                    let old = obj[nodeName];\n                    obj[nodeName] = [];\n                    obj[nodeName].push(old);\n                }\n                obj[nodeName].push(xmlToJson(item));\n            }\n        }\n    }\n    return obj;\n}\n\nexport const castType = {\n    string: function (v: any) {\n        return isEmpty(v) ? v : v.toString();\n    },\n\n    date: function (v: any) {\n        return isEmpty(v) ? v : new Date(v * 1000);\n    },\n\n    datetime: function (v: any) {\n        return isEmpty(v) ? v : new Date(v * 1000);\n    },\n\n    time: function (v: any) {\n        return isEmpty(v) ? v : parseInt(v);\n    },\n\n    integer: function (v: any) {\n        return isEmpty(v) ? v : parseInt(v);\n    },\n\n    float: function (v: any) {\n        return isEmpty(v) ? v : parseFloat(v);\n    },\n\n    boolean: function (str: any) {\n        if (str === null) {\n            return str;\n        }\n\n        if (typeof str === \"boolean\") {\n            if (str === true) {\n                return true;\n            }\n            return false;\n        }\n        if (typeof str === \"string\") {\n            if (str === \"\") {\n                return false;\n            }\n            str = str.replace(/^\\s+|\\s+$/g, \"\");\n            if (str.toLowerCase() === \"true\" || str.toLowerCase() === \"yes\") {\n                return true;\n            }\n            str = str.replace(/,/g, \".\");\n            str = str.replace(/^\\s*\\-\\s*/g, \"-\");\n        }\n        if (!isNaN(str)) {\n            return parseFloat(str) !== 0;\n        }\n        return false;\n    }\n};\n\nexport function base64toBlob(base64Data: string, contentType: string = \"\"): Blob {\n\n    let sliceSize = 1024;\n    let byteCharacters = atob(base64Data);\n    let bytesLength = byteCharacters.length;\n    let slicesCount = Math.ceil(bytesLength / sliceSize);\n    let byteArrays = new Array(slicesCount);\n\n    for (let sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n\n        let begin = sliceIndex * sliceSize;\n        let end = Math.min(begin + sliceSize, bytesLength);\n        let bytes = new Array(end - begin);\n\n        for (let offset = begin, i = 0; offset < end; ++i, ++offset) {\n            bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n    }\n    return new Blob(byteArrays, {type: contentType});\n}\n\nexport function base64StringToBlog(string: string): Blob {\n\n    let block = string.split(\";\");\n    let contentType = block[0].split(\":\")[1];\n    let data = block[1].split(\",\")[1];\n\n    return base64toBlob(data, contentType);\n}\n\n///**\n// *\n// * @param {LonLat} p\n// * @param {LonLat} v1\n// * @param {LonLat} v2\n// * @param {LonLat} v3\n// * @param {Array<Number>} res\n// */\n//export function cartesianToBarycentricLonLat(p, v1, v2, v3, res) {\n\n//    const y2y3 = v2.lat - v3.lat,\n//        x3x2 = v3.lon - v2.lon,\n//        x1x3 = v1.lon - v3.lon,\n//        y1y3 = v1.lat - v3.lat,\n//        y3y1 = v3.lat - v1.lat,\n//        xx3 = p.lon - v3.lon,\n//        yy3 = p.lat - v3.lat;\n\n//    const d = y2y3 * x1x3 + x3x2 * y1y3,\n//        lambda1 = (y2y3 * xx3 + x3x2 * yy3) / d,\n//        lambda2 = (y3y1 * xx3 + x1x3 * yy3) / d;\n\n//    res[0] = lambda1;\n//    res[1] = lambda2;\n//    res[2] = 1 - lambda1 - lambda2;\n\n//    return 0 <= res[0] && res[0] <= 1 && 0 <= lambda1 && lambda1 <= 1 && 0 <= lambda2 && lambda2 <= 1;\n//};\n\n/**\n * Callback throttling\n * @param {any} func\n * @param {Number} limit\n * @param {boolean} [skip]\n */\nexport function throttle(func: Function, limit: number, skip: boolean = false) {\n    let lastFunc: any;\n    let lastRan: number = 0;\n    return function () {\n        const args = arguments;\n        if (!lastRan) {\n            func.apply(null, args);\n            lastRan = Date.now();\n        } else {\n            if (skip) {\n                clearTimeout(lastFunc);\n            }\n            lastFunc = setTimeout(() => {\n                if (Date.now() - lastRan >= limit) {\n                    func.apply(null, args);\n                    lastRan = Date.now();\n                }\n            }, limit - (Date.now() - lastRan));\n        }\n    };\n}\n\n/**\n *\n * y2-----Q12--------------Q22---\n * |       |     |          |\n * |       |     |          |\n * y-------|-----P----------|----\n * |       |     |          |\n * |       |     |          |\n * |       |     |          |\n * |       |     |          |\n * |       |     |          |\n * y1-----Q11----|---------Q21---\n *         |     |          |\n *         |     |          |\n *         x1    x          x2\n *\n *\n * @param {Number} x -\n * @param {Number} y -\n * @param {Number} fQ11 -\n * @param {Number} fQ21 -\n * @param {Number} fQ12 -\n * @param {Number} fQ22 -\n * @param {Number} [x1=0.0] -\n * @param {Number} [x2=1.0] -\n * @param {Number} [y1=0.0] -\n * @param {Number} [y2=1.0] -\n */\nexport function blerp(\n    x: number, y: number, fQ11: number, fQ21: number, fQ12: number, fQ22: number,\n    x1: number = 0.0, x2: number = 1.0, y1: number = 0.0, y2: number = 1.0): number {\n    return (\n        (fQ11 * (x2 - x) * (y2 - y) +\n            fQ21 * (x - x1) * (y2 - y) +\n            fQ12 * (x2 - x) * (y - y1) +\n            fQ22 * (x - x1) * (y - y1)) /\n        ((x2 - x1) * (y2 - y1))\n    );\n}\n\nexport function blerp2(x: number, y: number, fQ11: number, fQ21: number, fQ12: number, fQ22: number): number {\n    return (\n        fQ11 * (1.0 - x) * (1.0 - y) + fQ21 * x * (1.0 - y) + fQ12 * (1.0 - x) * y + fQ22 * x * y\n    );\n}\n\nexport function extractElevationTiles(rgbaData: number[] | TypedArray, outCurrenElevations: number[] | TypedArray, outChildrenElevations: number[][][] | TypedArray[][]) {\n    let destSize = Math.sqrt(outCurrenElevations.length) - 1;\n    let destSizeOne = destSize + 1;\n    let sourceSize = Math.sqrt(rgbaData.length / 4);\n    let dt = sourceSize / destSize;\n\n    let rightHeigh = 0,\n        bottomHeigh = 0;\n\n    for (\n        let k = 0, currIndex = 0, sourceDataLength = rgbaData.length / 4;\n        k < sourceDataLength;\n        k++\n    ) {\n        let height = rgbaData[k * 4];\n\n        let i = Math.floor(k / sourceSize),\n            j = k % sourceSize;\n\n        let tileX = Math.floor(j / destSize),\n            tileY = Math.floor(i / destSize);\n\n        let destArr = outChildrenElevations[tileY][tileX];\n\n        let ii = i % destSize,\n            jj = j % destSize;\n\n        let destIndex = (ii + tileY) * destSizeOne + jj + tileX;\n\n        destArr[destIndex] = height;\n\n        if ((i + tileY) % dt === 0 && (j + tileX) % dt === 0) {\n            outCurrenElevations[currIndex++] = height;\n        }\n\n        if ((j + 1) % destSize === 0 && j !== sourceSize - 1) {\n            //current tile\n            rightHeigh = rgbaData[(k + 1) * 4];\n            let middleHeight = (height + rightHeigh) * 0.5;\n            destIndex = (ii + tileY) * destSizeOne + jj + 1;\n            destArr[destIndex] = middleHeight;\n\n            if ((i + tileY) % dt === 0) {\n                outCurrenElevations[currIndex++] = middleHeight;\n            }\n\n            //next right tile\n            let rightindex = (ii + tileY) * destSizeOne + ((jj + 1) % destSize);\n            outChildrenElevations[tileY][tileX + 1][rightindex] = middleHeight;\n        }\n\n        if ((i + 1) % destSize === 0 && i !== sourceSize - 1) {\n            //current tile\n            bottomHeigh = rgbaData[(k + sourceSize) * 4];\n            let middleHeight = (height + bottomHeigh) * 0.5;\n            destIndex = (ii + 1) * destSizeOne + jj + tileX;\n            destArr[destIndex] = middleHeight;\n\n            if ((j + tileX) % dt === 0) {\n                outCurrenElevations[currIndex++] = middleHeight;\n            }\n\n            //next bottom tile\n            let bottomindex = ((ii + 1) % destSize) * destSizeOne + jj + tileX;\n            outChildrenElevations[tileY + 1][tileX][bottomindex] = middleHeight;\n        }\n\n        if (\n            (j + 1) % destSize === 0 &&\n            j !== sourceSize - 1 &&\n            (i + 1) % destSize === 0 &&\n            i !== sourceSize - 1\n        ) {\n            //current tile\n            let rightBottomHeight = rgbaData[(k + sourceSize + 1) * 4];\n            let middleHeight = (height + rightHeigh + bottomHeigh + rightBottomHeight) * 0.25;\n            destIndex = (ii + 1) * destSizeOne + (jj + 1);\n            destArr[destIndex] = middleHeight;\n\n            outCurrenElevations[currIndex++] = middleHeight;\n\n            //next right tile\n            let rightindex = (ii + 1) * destSizeOne;\n            outChildrenElevations[tileY][tileX + 1][rightindex] = middleHeight;\n\n            //next bottom tile\n            let bottomindex = destSize;\n            outChildrenElevations[tileY + 1][tileX][bottomindex] = middleHeight;\n\n            //next right bottom tile\n            let rightBottomindex = 0;\n            outChildrenElevations[tileY + 1][tileX + 1][rightBottomindex] = middleHeight;\n        }\n    }\n}\n\nexport type TypedArray =\n    | Int8Array\n    | Uint8Array\n    | Uint8ClampedArray\n    | Int16Array\n    | Uint16Array\n    | Int32Array\n    | Uint32Array\n    | Float32Array\n    | Float64Array;\n\n/**\n * Concatenates two the same type arrays\n * @param {TypedArray} a\n * @param {TypedArray | number[]} b\n */\nexport function concatTypedArrays(a: TypedArray, b: TypedArray | number[]): TypedArray {\n    let c = new (a as any).constructor(a.length + b.length); //hacky\n    c.set(a, 0);\n    c.set(b, a.length);\n    return c;\n}\n\n/**\n * Concatenates two the same  arrays\n * @param {TypedArray | number[]} [a=[]] - First array\n * @param {TypedArray | number[]} [b=[]] - Second array\n * @return {TypedArray | number[]} -\n */\nexport function concatArrays(a: TypedArray | number[] = [], b: TypedArray | number[] = []): TypedArray | number[] {\n    if (ArrayBuffer.isView(a)) {\n        return concatTypedArrays(a as TypedArray, b as TypedArray);\n    } else {\n        for (let i = 0; i < b.length; i++) {\n            a.push(b[i]);\n        }\n        return a;\n    }\n}\n\n/**\n * Convert simple array to typed\n * @param arr {number[]}\n * @param ctor {Float32Array}\n * @returns {TypedArray}\n */\nexport function makeArrayTyped(arr: TypedArray | number[], ctor: Function = Float32Array) {\n    if (!ArrayBuffer.isView(arr)) {\n        const typedArr = new (ctor as any)(arr.length); //hacky\n        typedArr.set(arr, 0);\n        return typedArr;\n    } else {\n        return arr;\n    }\n}\n\n/**\n * Convert typed array to array\n * @param arr {TypedArray | number[]}\n * @returns {number[]}\n */\nexport function makeArray(arr: TypedArray | number[]): number[] {\n    if (ArrayBuffer.isView(arr)) {\n        return Array.from(arr);\n    } else {\n        return arr;\n    }\n}\n\n/**\n *\n * @param {TypedArray | Array} arr\n * @param {Number} starting\n * @param {Number} deleteCount\n * @param {{ result: number[] }} [out]\n */\n\nexport function spliceArray(arr: TypedArray | number[], starting: number, deleteCount: number, out?: {\n    result: number[]\n} | { result: TypedArray }): TypedArray | number[] {\n    if (ArrayBuffer.isView(arr)) {\n        if (starting < 0) {\n            deleteCount = Math.abs(starting);\n            starting += arr.length;\n        }\n        return spliceTypedArray(arr, starting, deleteCount, out as { result: TypedArray });\n    } else {\n        let res;\n        if (starting < 0) {\n            res = arr.splice(starting);\n        } else {\n            res = arr.splice(starting, deleteCount);\n        }\n        if (out) {\n            out.result = res;\n        }\n        return arr;\n    }\n}\n\n/**\n *\n * @param {TypedArray} arr\n * @param {Number} starting\n * @param {Number} deleteCount\n * @param {{ result: TypedArray }} [out]\n */\nexport function spliceTypedArray<T extends TypedArray>(arr: T, starting: number, deleteCount: number, out?: {\n    result: T\n}): T {\n    if (arr.length === 0) {\n        return arr;\n    }\n    const newSize = arr.length - deleteCount;\n    const splicedArray = new (arr as any).constructor(newSize); //hacky\n    splicedArray.set(arr.subarray(0, starting));\n    splicedArray.set(arr.subarray(starting + deleteCount), starting);\n    if (out) {\n        out.result = arr.subarray(starting, starting + deleteCount) as T;\n    }\n    return splicedArray;\n}\n\n/**\n * Returns 64-bit triangle coordinate array from inside of the source triangle array.\n * @static\n * @param {TypedArray | number[]} sourceArr - Source array\n * @param {number} gridSize - Source array square matrix size\n * @param {number} i0 - First row index source array matrix\n * @param {number} j0 - First column index\n * @param {number} size - Square matrix result size.\n * @return {Float64Array} Triangle coordinates array from the source array.\n * @TODO: optimization\n */\nexport function getMatrixSubArray64(sourceArr: TypedArray | number[], gridSize: number, i0: number, j0: number, size: number): Float64Array {\n\n    const size_1 = size + 1;\n    const i0size = i0 + size_1;\n    const j0size = j0 + size_1;\n\n    let res = new Float64Array(size_1 * size_1 * 3);\n    let vInd = 0;\n\n    for (let i = i0; i < i0size; i++) {\n        for (let j = j0; j < j0size; j++) {\n\n            let ind = 3 * (i * (gridSize + 1) + j);\n\n            res[vInd++] = sourceArr[ind];\n            res[vInd++] = sourceArr[ind + 1];\n            res[vInd++] = sourceArr[ind + 2];\n        }\n    }\n\n    return res;\n}\n\n/**\n * Returns 32-bit triangle coordinate array from inside of the source triangle array.\n * @static\n * @param {TypedArray | number[]} sourceArr - Source array\n * @param {number} gridSize - Source array square matrix size\n * @param {number} i0 - First row index source array matrix\n * @param {number} j0 - First column index\n * @param {number} size - Square matrix result size.\n * @return {Float32Array} Triangle coordinates array from the source array.\n */\nexport function getMatrixSubArray32(sourceArr: TypedArray | number[], gridSize: number, i0: number, j0: number, size: number): Float32Array {\n\n    const size_1 = size + 1;\n    const i0size = i0 + size_1;\n    const j0size = j0 + size_1;\n\n    let res = new Float32Array(size_1 * size_1 * 3);\n    let vInd = 0;\n\n    for (let i = i0; i < i0size; i++) {\n        for (let j = j0; j < j0size; j++) {\n\n            let ind = 3 * (i * (gridSize + 1) + j);\n\n            res[vInd++] = sourceArr[ind];\n            res[vInd++] = sourceArr[ind + 1];\n            res[vInd++] = sourceArr[ind + 2];\n        }\n    }\n\n    return res;\n}\n\n/**\n * Returns two float32 triangle coordinate arrays from inside of the source triangle array.\n * @TODO: optimization\n */\nexport function getMatrixSubArrayBoundsExt(\n    sourceArr: TypedArray | number[],\n    sourceArrHigh: TypedArray | number[],\n    sourceArrLow: TypedArray | number[],\n    noDataVertices: TypedArray | number[] | undefined,\n    gridSize: number,\n    i0: number,\n    j0: number,\n    size: number,\n    outArr: TypedArray | number[],\n    outArrHigh: TypedArray | number[],\n    outArrLow: TypedArray | number[],\n    outBounds: any,\n    outNoDataVertices: TypedArray | number[]\n) {\n    const i0size = i0 + size + 1;\n    const j0size = j0 + size + 1;\n\n    gridSize += 1;\n\n    let vInd = 0,\n        nInd = 0;\n\n    for (let i = i0; i < i0size; i++) {\n        for (let j = j0; j < j0size; j++) {\n            let indBy3 = i * gridSize + j,\n                ind = 3 * indBy3;\n\n            let x = sourceArr[ind],\n                y = sourceArr[ind + 1],\n                z = sourceArr[ind + 2];\n\n            if (!noDataVertices || noDataVertices[indBy3] === 0) {\n                if (x < outBounds.xmin) outBounds.xmin = x;\n                if (x > outBounds.xmax) outBounds.xmax = x;\n                if (y < outBounds.ymin) outBounds.ymin = y;\n                if (y > outBounds.ymax) outBounds.ymax = y;\n                if (z < outBounds.zmin) outBounds.zmin = z;\n                if (z > outBounds.zmax) outBounds.zmax = z;\n            } else {\n                outNoDataVertices[nInd] = 1;\n            }\n\n            nInd++;\n\n            outArr[vInd] = x;\n            outArrLow[vInd] = sourceArrLow[ind];\n            outArrHigh[vInd++] = sourceArrHigh[ind];\n\n            outArr[vInd] = y;\n            outArrLow[vInd] = sourceArrLow[ind + 1];\n            outArrHigh[vInd++] = sourceArrHigh[ind + 1];\n\n            outArr[vInd] = z;\n            outArrLow[vInd] = sourceArrLow[ind + 2];\n            outArrHigh[vInd++] = sourceArrHigh[ind + 2];\n        }\n    }\n}\n\nexport function cloneArray(items: any[]): any[] {\n    return items.map((item) => (Array.isArray(item) ? cloneArray(item) : item));\n}\n\n/**\n * Promise for load images\n * @function\n * @param {string} url - link to image.\n * @returns {Promise<Image>} Returns promise.\n */\nexport async function loadImage(url: string): Promise<HTMLImageElement> {\n    return new Promise<HTMLImageElement>(resolve => {\n        const image = new Image();\n        image.addEventListener('load', () => {\n            resolve(image);\n        });\n        image.src = url;\n        image.crossOrigin = \"\"\n        return image;\n    });\n}\n\n/**\n * Gets image is loaded\n * @param {HTMLImageElement} image\n * @returns {boolean} Returns true is the image is loaded\n */\nexport function isImageLoaded(image: HTMLImageElement): boolean {\n    return image.complete && image.naturalHeight !== 0;\n}\n\nexport function distanceFormat(v: number): string {\n    if (v > 1000) {\n        return `${(v / 1000).toFixed(2)} km`;\n    } else if (v > 9) {\n        return `${Math.round(v)} m`;\n    } else {\n        return `${v.toFixed(1)} m`;\n    }\n}\n\nexport function distanceFormatExt(v: number): [string, string] {\n    if (v > 1000) {\n        let d = v - Math.floor(v);\n        if (d !== 0) {\n            return [(v / 1000).toFixed(2), \"km\"];\n        }\n        return [(v / 1000).toFixed(0), \"km\"]\n    } else if (v > 9) {\n        return [Math.round(v).toString(), \"m\"];\n    } else {\n        if (v <= 0.01) {\n            return [\"0\", \"m\"]\n        }\n        return [v.toFixed(1), \"m\"];\n    }\n}\n\nexport function getUrlParam(paramName: string): number | undefined {\n    let urlParams = new URLSearchParams(location.search);\n    let param = urlParams.get(paramName);\n    if (param) {\n        return Number(param);\n    }\n}\n","import {binarySearch} from \"../utils/shared\";\n\nexport type JulianDate = number;\n\n/**\n * Seconds in millisecond.\n * @const\n */\nexport const SECONDS_PER_MILLISECOND = 0.001;\n\n/**\n * Milliseconds in second.\n * @const\n */\nexport const MILLISECONDS_PER_SECOND = 1000.0;\n\n/**\n * Seconds in minute.\n * @const\n */\nexport const SECONDS_PER_MINUTE = 60.0;\n\n/**\n * One by seconds in minute.\n * @const\n */\nexport const ONE_BY_SECONDS_PER_MINUTE = 1.0 / SECONDS_PER_MINUTE;\n\n/**\n * Minutes in hour.\n * @const\n */\nexport const MINUTES_PER_HOUR = 60.0;\n\n/**\n * Hours in day.\n * @const\n */\nexport const HOURS_PER_DAY = 24.0;\n\n/**\n * One by hours in day.\n * @const\n */\nexport const ONE_BY_HOURS_PER_DAY = 1.0 / HOURS_PER_DAY;\n\n/**\n * Seconds in hour.\n * @const\n */\nexport const SECONDS_PER_HOUR = 3600.0;\n\n/**\n * One by seconds in hour.\n * @const\n */\nexport const ONE_BY_SECONDS_PER_HOUR = 1.0 / SECONDS_PER_HOUR;\n\n/**\n * Seconds in 12 hours.\n * @const\n */\nexport const SECONDS_PER_12_HOURS = 12.0 * SECONDS_PER_HOUR;\n\n/**\n * Minutes in day.\n * @const\n */\nexport const MINUTES_PER_DAY = 1440.0;\n\n/**\n * One by minutes in day.\n * @const\n */\nexport const ONE_BY_MINUTES_PER_DAY = 1.0 / MINUTES_PER_DAY;\n\n/**\n * Seconds in day.\n * @const\n */\nexport const SECONDS_PER_DAY = 86400.0;\n\n/**\n * Milliseconds in day.\n * @const\n */\nexport const MILLISECONDS_PER_DAY = 86400000.0;\n\n/**\n * One by milliseconds in day.\n * @const\n */\nexport const ONE_BY_MILLISECONDS_PER_DAY = 1.0 / MILLISECONDS_PER_DAY;\n\n/**\n * One by seconds in day.\n * @const\n */\nexport const ONE_BY_SECONDS_PER_DAY = 1.0 / SECONDS_PER_DAY;\n\n/**\n * Days in julian century.\n * @const\n */\nexport const DAYS_PER_JULIAN_CENTURY = 36525.0;\n\n/**\n * Days in julian year.\n * @const\n */\nexport const DAYS_PER_JULIAN_YEAR = 365.25;\n\n/**\n * Seconds in picoseconds.\n * @const\n */\nexport const PICOSECOND = 0.000000001;\n\n/**\n * Modified julian date difference.\n * @const\n */\nexport const MODIFIED_JULIAN_DATE_DIFFERENCE = 2400000.5;\n\n/**\n * Julian date of 2000 year. Epoch.\n * @const\n */\nexport const J2000 = 2451545.0;\n\n/**\n * Returns julian days from Epoch.\n * @param {JulianDate} jd - Julian date.\n * @returns {number} Days from epoch\n */\nexport function T(jd: JulianDate): number {\n    return (jd - J2000) / DAYS_PER_JULIAN_CENTURY;\n}\n\n/**\n * Gets the date's julian day.\n * @param {number} year - Year.\n * @param {number} month - Month.\n * @param {number} day - Day.\n * @returns {number} Day number\n */\nexport function getDayNumber(year: number, month: number, day: number): number {\n    let a = ((month - 14) / 12) | 0;\n    let b = year + 4800 + a;\n    return (\n        (((1461 * b) / 4) | 0) +\n        (((367 * (month - 2 - 12 * a)) / 12) | 0) -\n        (((3 * (((b + 100) / 100) | 0)) / 4) | 0) +\n        day -\n        32075\n    );\n}\n\n/**\n * Converts javascript date to the universal(UTC) julian date.\n * @param {Date} date - Date.\n * @returns {JulianDate} UTC julian date\n */\nexport function DateToUTC(date: Date): JulianDate {\n    let dayNumber = getDayNumber(date.getUTCFullYear(), date.getUTCMonth() + 1, date.getUTCDate());\n\n    let hour = date.getUTCHours() - 12;\n    if (hour < 0) {\n        hour += 24;\n    }\n\n    let secondsOfDay =\n        date.getUTCSeconds() +\n        hour * SECONDS_PER_HOUR +\n        date.getUTCMinutes() * SECONDS_PER_MINUTE +\n        date.getUTCMilliseconds() * SECONDS_PER_MILLISECOND;\n\n    if (secondsOfDay >= SECONDS_PER_12_HOURS) {\n        dayNumber--;\n    }\n\n    let extraDays = (secondsOfDay * ONE_BY_SECONDS_PER_DAY) | 0;\n    dayNumber += extraDays;\n    secondsOfDay -= SECONDS_PER_DAY * extraDays;\n\n    if (secondsOfDay < 0) {\n        dayNumber--;\n        secondsOfDay += SECONDS_PER_DAY;\n    }\n\n    return dayNumber + secondsOfDay * ONE_BY_SECONDS_PER_DAY;\n}\n\n/**\n * Converts javascript date to the atomic(TAI) julian date.\n * @param {Date} date - Date.\n * @returns {JulianDate} TAI julian date\n */\nexport function DateToTAI(date: Date): JulianDate {\n    return UTCtoTAI(DateToUTC(date));\n}\n\n/**\n * Converts coordinated universal(UTC) julian date to atomic(TAI) julian date.\n * @param {JulianDate} jd - UTC julian date.\n * @returns {JulianDate} TAI julian date\n */\nexport function UTCtoTAI(jd: JulianDate): JulianDate {\n    let leapSeconds = leapSecondsTable;\n\n    let index = binarySearch(leapSeconds, jd, function (a: number, b: LeapSeconds) {\n        return a - b.jd;\n    });\n\n    if (index < 0) {\n        index = ~index;\n    }\n\n    if (index >= leapSeconds.length) {\n        index = leapSeconds.length - 1;\n    }\n\n    let offset = leapSeconds[index].leapSeconds;\n\n    if (index !== 0) {\n        if ((leapSeconds[index].jd - jd) * SECONDS_PER_DAY > offset) {\n            offset = leapSeconds[index - 1].leapSeconds;\n        }\n    }\n\n    return jd + offset * ONE_BY_SECONDS_PER_DAY;\n}\n\n/**\n * Converts atomic julian date(TAI) to the coordinated universal(UTC) julian date.\n * @param {JulianDate} tai - TAI julian date.\n * @returns {JulianDate | undefined} UTC julian date\n */\nexport function TAItoUTC(tai: JulianDate): JulianDate | undefined {\n    let leapSeconds = leapSecondsTable;\n    let index = binarySearch(leapSeconds, tai, function (a: JulianDate, b: LeapSeconds) {\n        return a - b.jd;\n    });\n\n    if (index < 0) {\n        index = ~index;\n    }\n\n    if (index >= leapSeconds.length) {\n        return tai - leapSeconds[index - 1].leapSeconds * ONE_BY_SECONDS_PER_DAY;\n    }\n\n    if (index === 0) {\n        return tai - leapSeconds[0].leapSeconds * ONE_BY_SECONDS_PER_DAY;\n    }\n\n    let diff = (leapSeconds[index].jd - tai) * SECONDS_PER_DAY;\n\n    if (diff === 0) {\n        return tai - leapSeconds[index].leapSeconds * ONE_BY_SECONDS_PER_DAY;\n    }\n\n    if (diff <= 1.0) {\n        return;\n    }\n\n    return tai - leapSeconds[index - 1].leapSeconds * ONE_BY_SECONDS_PER_DAY;\n}\n\n/**\n * Converts UTC julian date to the javascript date object.\n * @param {JulianDate} utc - UTC julian date.\n * @returns {Date} JavaScript Date object\n */\nexport function UTCtoDate(utc: JulianDate): Date {\n    let julianDayNumber = utc | 0;\n    let secondsOfDay = (utc - julianDayNumber) * SECONDS_PER_DAY;\n\n    if (secondsOfDay >= SECONDS_PER_12_HOURS) {\n        julianDayNumber++;\n    }\n\n    let L = (julianDayNumber + 68569) | 0;\n    let N = ((4 * L) / 146097) | 0;\n    L = (L - (((146097 * N + 3) / 4) | 0)) | 0;\n    let I = ((4000 * (L + 1)) / 1461001) | 0;\n    L = (L - (((1461 * I) / 4) | 0) + 31) | 0;\n    let J = ((80 * L) / 2447) | 0;\n    let day = (L - (((2447 * J) / 80) | 0)) | 0;\n    L = (J / 11) | 0;\n    let month = (J + 2 - 12 * L) | 0;\n    let year = (100 * (N - 49) + I + L) | 0;\n\n    let hour = (secondsOfDay * ONE_BY_SECONDS_PER_HOUR) | 0;\n    let remainingSeconds = secondsOfDay - hour * SECONDS_PER_HOUR;\n    let minute = (remainingSeconds * ONE_BY_SECONDS_PER_MINUTE) | 0;\n    remainingSeconds = remainingSeconds - minute * SECONDS_PER_MINUTE;\n    let second = remainingSeconds | 0;\n    let millisecond = ((remainingSeconds - second) * MILLISECONDS_PER_SECOND) | 0;\n\n    hour += 12;\n    if (hour > 23) {\n        hour -= 24;\n    }\n\n    return new Date(Date.UTC(year, month - 1, day, hour, minute, second, millisecond));\n}\n\n/**\n * Converts TAI julian date to the javascript date object.\n * @param {JulianDate} tai - TAI julian date.\n * @returns {Date} JavaScript Date object\n */\nexport function TAItoDate(tai: JulianDate): Date {\n    let utc = TAItoUTC(tai);\n    if (!utc) {\n        utc = TAItoUTC(addSeconds(tai, -1))!;\n        console.trace(`TAItoDate - can't convert ${tai.toString()} to utc.`);\n    }\n\n    return UTCtoDate(utc);\n}\n\n/**\n * Adds milliseconds to the julian date.\n * @param {JulianDate} jd - Julian date.\n * @param {number} milliseconds - Milliseconds to add.\n * @returns {JulianDate} Julian date\n */\nexport function addMilliseconds(jd: JulianDate, milliseconds: number): JulianDate {\n    return jd + milliseconds * ONE_BY_MILLISECONDS_PER_DAY;\n}\n\n/**\n * Adds seconds to the julian date.\n * @param {JulianDate} jd - Julian date.\n * @param {number} seconds - Seconds to add.\n * @returns {JulianDate} Julian date\n */\nexport function addSeconds(jd: JulianDate, seconds: number): JulianDate {\n    return jd + seconds * ONE_BY_SECONDS_PER_DAY;\n}\n\n/**\n * Adds hours to the julian date.\n * @param {JulianDate} jd - Julian date.\n * @param {number} hours - Hours to add.\n * @returns {JulianDate} Julian date\n */\nexport function addHours(jd: JulianDate, hours: number): JulianDate {\n    return jd + hours * ONE_BY_HOURS_PER_DAY;\n}\n\n/**\n * Adds minutes to the julian date.\n * @param {JulianDate} jd - Julian date.\n * @param {number} minutes - Minutes to add.\n * @returns {JulianDate} Julian date\n */\nexport function addMinutes(jd: JulianDate, minutes: number): JulianDate {\n    return jd + minutes * MINUTES_PER_DAY;\n}\n\n/**\n * Adds days to the julian date.\n * @param {JulianDate} jd - Julian date.\n * @param {number} days - Days to add.\n * @returns {JulianDate} Julian date\n */\nexport function addDays(jd: JulianDate, days: number): JulianDate {\n    return jd + days;\n}\n\n/**\n * Gets milliseconds of a julian date.\n * @param {JulianDate} jd - julian date.\n * @returns {number} Milliseconds\n */\nexport function getMilliseconds(jd: JulianDate): number {\n    let s = jd - (jd | 0);\n    s *= SECONDS_PER_DAY;\n    return ((s - (s | 0)) * MILLISECONDS_PER_SECOND) | 0;\n}\n\n/**\n * Gets seconds of a julian date.\n * @param {JulianDate} jd - julian date.\n * @returns {number} Seconds\n */\nexport function getSeconds(jd: JulianDate): number {\n    let s = jd - (jd | 0);\n    return s * SECONDS_PER_DAY;\n}\n\n/**\n * Gets hours of a julian date.\n * @param {JulianDate} jd - julian date.\n * @returns {number} Hours\n */\nexport function getHours(jd: JulianDate): number {\n    let julianDayNumber = jd | 0;\n    let secondsOfDay = (jd - julianDayNumber) * SECONDS_PER_DAY;\n\n    let hour = (secondsOfDay * ONE_BY_SECONDS_PER_HOUR) | 0;\n    let remainingSeconds = secondsOfDay - hour * SECONDS_PER_HOUR;\n    let minute = (remainingSeconds * ONE_BY_SECONDS_PER_MINUTE) | 0;\n    remainingSeconds = remainingSeconds - minute * SECONDS_PER_MINUTE;\n    let second = remainingSeconds | 0;\n    let millisecond = ((remainingSeconds - second) * MILLISECONDS_PER_SECOND) | 0;\n\n    hour += 12 + minute / 60 + second / 3600 + millisecond / 1000;\n    if (hour > 23) {\n        hour -= 24;\n    }\n\n    return hour;\n}\n\n/**\n * Gets minutes of a julian date.\n * @param {JulianDate} jd - julian date.\n * @returns {number} Minutes\n */\nexport function getMinutes(jd: JulianDate): number {\n    let s = jd - (jd | 0);\n    return (s * MINUTES_PER_DAY) | 0;\n}\n\n/**\n * Gets days of a julian date.\n * @param {JulianDate} jd - julian date.\n * @returns {number} Days\n */\nexport function getDays(jd: JulianDate): number {\n    return jd | 0;\n}\n\n/**\n * Returns days in seconds.\n * @param {number} s - Seconds.\n * @returns {number} Days\n */\nexport function secondsToDays(s: number): number {\n    return s * ONE_BY_SECONDS_PER_DAY;\n}\n\n/**\n * Returns seconds in days.\n * @param {number} d - Days.\n * @returns {number} Seconds\n */\nexport function daysToSeconds(d: number): number {\n    return d * SECONDS_PER_DAY;\n}\n\ntype LeapSeconds = { jd: JulianDate, leapSeconds: number };\n\nfunction __ls(jd: JulianDate, leapSeconds: number): LeapSeconds {\n    return {\n        jd: jd,\n        leapSeconds: leapSeconds\n    };\n}\n\nconst leapSecondsTable: LeapSeconds[] = [\n    __ls(2441317.5, 10.0), // 1972-01-01T00:00:00.000Z\n    __ls(2441499.5, 11.0), // 1972-07-01T00:00:00.000Z\n    __ls(2441683.5, 12.0), // 1973-01-01T00:00:00.000Z\n    __ls(2442048.5, 13.0), // 1974-01-01T00:00:00.000Z\n    __ls(2442413.5, 14.0), // 1975-01-01T00:00:00.000Z\n    __ls(2442778.5, 15.0), // 1976-01-01T00:00:00.000Z\n    __ls(2443144.5, 16.0), // 1977-01-01T00:00:00.000Z\n    __ls(2443509.5, 17.0), // 1978-01-01T00:00:00.000Z\n    __ls(2443874.5, 18.0), // 1979-01-01T00:00:00.000Z\n    __ls(2444239.5, 19.0), // 1980-01-01T00:00:00.000Z\n    __ls(2444786.5, 20.0), // 1981-07-01T00:00:00.000Z\n    __ls(2445151.5, 21.0), // 1982-07-01T00:00:00.000Z\n    __ls(2445516.5, 22.0), // 1983-01-01T00:00:00.000Z\n    __ls(2446247.5, 23.0), // 1985-07-01T00:00:00.000Z\n    __ls(2447161.5, 24.0), // 1988-01-01T00:00:00.000Z\n    __ls(2447892.5, 25.0), // 1990-01-01T00:00:00.000Z\n    __ls(2448257.5, 26.0), // 1991-01-01T00:00:00.000Z\n    __ls(2448804.5, 27.0), // 1992-07-01T00:00:00.000Z\n    __ls(2449169.5, 28.0), // 1993-07-01T00:00:00.000Z\n    __ls(2449534.5, 29.0), // 1994-07-01T00:00:00.000Z\n    __ls(2450083.5, 30.0), // 1996-01-01T00:00:00.000Z\n    __ls(2450630.5, 31.0), // 1997-07-01T00:00:00.000Z\n    __ls(2451179.5, 32.0), // 1999-01-01T00:00:00.000Z\n    __ls(2453736.5, 33.0), // 2006-01-01T00:00:00.000Z\n    __ls(2454832.5, 34.0), // 2009-01-01T00:00:00.000Z\n    __ls(2456109.5, 35.0), // 2012-07-01T00:00:00.000Z\n    __ls(2457204.5, 36.0) // 2015-07-01T00:00:00.000Z\n];\n\nexport const J2000TAI = UTCtoTAI(J2000);\n","import {Vec3} from \"../math/Vec3\";\nimport {NumberArray6} from \"./Sphere\";\nimport {Ellipsoid} from \"../ellipsoid/Ellipsoid\";\nimport {Extent} from \"../Extent\";\n\ntype Vec3Array8 = [Vec3, Vec3, Vec3, Vec3, Vec3, Vec3, Vec3, Vec3];\n\n/**\n * Bounding box class.\n * @class\n * @param {NumberArray6} [boundsArr]\n */\nclass Box {\n\n    /**\n     * Vertices array.\n     * @public\n     * @type{Array.<Vec3>}\n     */\n    public vertices: Vec3Array8\n\n    constructor(boundsArr?: NumberArray6) {\n\n        this.vertices = [\n            new Vec3(),\n            new Vec3(),\n            new Vec3(),\n            new Vec3(),\n            new Vec3(),\n            new Vec3(),\n            new Vec3(),\n            new Vec3()\n        ];\n\n        if (boundsArr) {\n            this.setFromBoundsArr(boundsArr);\n        }\n    }\n\n    public copy(bbox: Box) {\n        for (let i = 0, len = this.vertices.length; i < len; i++) {\n            this.vertices[i].copy(bbox.vertices[i]);\n        }\n    }\n\n    /**\n     * Sets bounding box coordinates by the bounds array.\n     * @param {NumberArray6} bounds - Bounds is an array where [minX, minY, minZ, maxX, maxY, maxZ]\n     */\n    public setFromBoundsArr(bounds: NumberArray6) {\n        let xmin = bounds[0],\n            xmax = bounds[3],\n            ymin = bounds[1],\n            ymax = bounds[4],\n            zmin = bounds[2],\n            zmax = bounds[5];\n\n        let v = this.vertices;\n\n        v[0].set(xmin, ymin, zmin);\n        v[1].set(xmax, ymin, zmin);\n        v[2].set(xmax, ymin, zmax);\n        v[3].set(xmin, ymin, zmax);\n        v[4].set(xmin, ymax, zmin);\n        v[5].set(xmax, ymax, zmin);\n        v[6].set(xmax, ymax, zmax);\n        v[7].set(xmin, ymax, zmax);\n    }\n\n    /**\n     * Sets bounding box coordinates by ellipsoid geodetic extend.\n     * @param {Ellipsoid} ellipsoid - Ellipsoid.\n     * @param {Extent} extent - Geodetic extent.\n     */\n    public setFromExtent(ellipsoid: Ellipsoid, extent: Extent) {\n        this.setFromBoundsArr(extent.getCartesianBounds(ellipsoid));\n    }\n}\n\nexport {Box};\n\n","import {Vec3} from \"../math/Vec3\";\nimport {Ellipsoid} from \"../ellipsoid/Ellipsoid\";\nimport {Extent} from \"../Extent\";\n\nexport type NumberArray6 = [number, number, number, number, number, number];\n\n/**\n * Bounding sphere class.\n * @class\n * @param {Number} [radius] - Bounding sphere radius.\n * @param {Vec3} [center] - Bounding sphere coordinates.\n */\nclass Sphere {\n    /**\n     * Sphere radius.\n     * @public\n     * @type {Number}\n     */\n    public radius: number;\n\n    /**\n     * Sphere coordinates.\n     * @public\n     * @type {Vec3}\n     */\n    public center: Vec3;\n\n    constructor(radius: number = 0, center?: Vec3) {\n\n        this.radius = radius;\n\n        this.center = center ? center.clone() : new Vec3();\n    }\n\n    /**\n     * Sets bounding sphere coordinates by the bounds array.\n     * @param {Array.<number>} bounds - Bounds is an array where [minX, minY, minZ, maxX, maxY, maxZ]\n     */\n    public setFromBounds(bounds: NumberArray6) {\n        let m = new Vec3(bounds[0], bounds[1], bounds[2]);\n        this.center.set(\n            m.x + (bounds[3] - m.x) * 0.5,\n            m.y + (bounds[3] - m.y) * 0.5,\n            m.z + (bounds[5] - m.z) * 0.5\n        );\n        this.radius = this.center.distance(m);\n    }\n\n    /**\n     * Sets bounding sphere coordinates by ellipsoid geodetic extend.\n     * @param {Ellipsoid} ellipsoid - Ellipsoid.\n     * @param {Extent} extent - Geodetic extent.\n     */\n    public setFromExtent(ellipsoid: Ellipsoid, extent: Extent) {\n        this.setFromBounds(extent.getCartesianBounds(ellipsoid));\n    }\n}\n\nexport {Sphere};\n","import {binaryInsert, stamp} from \"./utils/shared\";\n\nexport type EventCallback = (((...args: any[]) => boolean) | ((...args: any[]) => void));\n\nexport type EventCallbackStamp = EventCallback & { _openglobus_id?: number; _openglobus_priority?: number };\n\ntype EventCallbacks = Array<EventCallback>;\ntype EventCallbackHandler = { active: boolean; handlers: EventCallbacks };\n\nexport type EventsMap<T extends string[]> = {\n    [K in T[number]]?: EventCallbackHandler\n}\n\nexport type EventsHandler<T extends string[]> = Events<T> & EventsMap<T>;\n\nexport function createEvents<T extends string[]>(methodNames: T, sender?: any) {\n    return new Events(methodNames, sender) as EventsHandler<T>;\n}\n\n/**\n * Base events class to handle custom events.\n * @class\n * @param {Array.<string>} [eventNames] - Event names that could be dispatched.\n * @param {*} [sender]\n */\nexport class Events<T extends string[]> {\n\n    static __counter__: number = 0;\n\n    protected __id: number;\n\n    /**\n     * Registered event names.\n     * @protected\n     * @type {T}\n     */\n    protected _eventNames: T;\n\n    protected _sender: any;\n\n    /**\n     * Stop propagation flag\n     * @protected\n     * @type {boolean}\n     */\n    protected _stopPropagation: boolean;\n    protected _stampCache: any;\n\n    constructor(eventNames: T, sender?: any) {\n\n        this.__id = Events.__counter__++;\n\n        this._eventNames = [] as any;\n\n        eventNames && this.registerNames(eventNames);\n\n        this._sender = sender || this;\n\n        this._stopPropagation = false;\n\n        this._stampCache = {};\n    }\n\n    public bindSender(sender?: any) {\n        this._sender = sender || this;\n    }\n\n    /**\n     * Function that creates event object properties that would be dispatched.\n     * @public\n     * @param {Array.<string>} eventNames - Specified event names list.\n     */\n    public registerNames(eventNames: T): this {\n        for (let i = 0; i < eventNames.length; i++) {\n            (this as any)[eventNames[i]] = {\n                active: true,\n                handlers: []\n            };\n            this._eventNames.push(eventNames[i]);\n        }\n        return this;\n    }\n\n    protected _getStamp(name: string, id: number, ogid: number) {\n        return `${name}_${id}_${ogid}`;\n    }\n\n    /**\n     * Returns true if event callback has stamped.\n     * @protected\n     * @param {Object} name - Event identifier.\n     * @param {Object} obj - Event callback.\n     * @return {boolean} -\n     */\n    protected _stamp(name: string, obj: any) {\n        let ogid = stamp(obj);\n        let st = this._getStamp(name, this.__id, ogid);\n\n        if (!this._stampCache[st]) {\n            this._stampCache[st] = ogid;\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Attach listener.\n     * @public\n     * @param {string} name - Event name to listen.\n     * @param {EventCallback} callback - Event callback function.\n     * @param {any} [sender] - Event callback function owner.\n     * @param {number} [priority] - Priority of event callback.\n     */\n    public on(name: string, callback: EventCallback, sender?: any, priority: number = 0) {\n        if (this._stamp(name, callback)) {\n            if ((this as any)[name]) {\n                let c = callback.bind(sender || this._sender) as EventCallbackStamp;\n                c._openglobus_id = (callback as EventCallbackStamp)._openglobus_id;\n                c._openglobus_priority = priority;\n                binaryInsert((this as any)[name].handlers, c, (a: EventCallbackStamp, b: EventCallbackStamp) => {\n                    return (b._openglobus_priority || 0) - (a._openglobus_priority || 0);\n                });\n            }\n        }\n    }\n\n    /**\n     * Stop listening event name with specified callback function.\n     * @public\n     * @param {string} name - Event name.\n     * @param {EventCallback | null} callback - Attached  event callback.\n     */\n    public off(name: string, callback?: EventCallback | null) {\n        if (callback) {\n            let st = this._getStamp(name, this.__id, (callback as EventCallbackStamp)._openglobus_id!);\n            if ((callback as EventCallbackStamp)._openglobus_id && this._stampCache[st]) {\n                let h = (this as any)[name].handlers;\n                let i = h.length;\n                let indexToRemove = -1;\n                while (i--) {\n                    let hi = h[i];\n                    if (hi._openglobus_id === (callback as EventCallbackStamp)._openglobus_id) {\n                        indexToRemove = i;\n                        break;\n                    }\n                }\n\n                if (indexToRemove !== -1) {\n                    h.splice(indexToRemove, 1);\n                    this._stampCache[st] = undefined;\n                    delete this._stampCache[st];\n                }\n            }\n        }\n    }\n\n    /**\n     * Dispatch event.\n     * @public\n     * @param {EventCallbackHandler} event - Event instance property that created by event name.\n     * @param {Object} [args] - Callback parameters.\n     */\n    public dispatch(event: EventCallbackHandler | undefined, ...args: any[]) {\n        let result = true;\n        if (event && event.active && !this._stopPropagation) {\n            let h = event.handlers.slice(0),\n                i = h.length;\n            while (i--) {\n                if ((h[i] as any)(...args) === false) {\n                    result = false;\n                }\n            }\n        }\n        this._stopPropagation = false;\n        return result;\n    }\n\n    /**\n     * Brakes events propagation.\n     * @public\n     */\n    public stopPropagation() {\n        this._stopPropagation = true;\n    }\n\n    /**\n     * Removes all events.\n     * @public\n     */\n    public clear() {\n        for (let i = 0; i < this._eventNames.length; i++) {\n            let e = (this as any)[this._eventNames[i]];\n            e.handlers.length = 0;\n            e.handlers = [];\n        }\n        this._eventNames.length = 0;\n        this._eventNames = [] as any;\n    }\n}\n","import {createEvents, EventsHandler} from '../Events';\nimport {parseHTML, stringTemplate} from '../utils/shared';\n\nexport interface IViewParams {\n    model?: any;\n    template?: string;\n    parent?: View<any> | null;\n    classList?: string[];\n}\n\nexport type ViewEventsList = [\"render\"];\nconst VIEW_EVENTS: ViewEventsList = [\"render\"];\n\nclass View<M> {\n\n    static __counter__: number = 0;\n\n    protected __id: number;\n\n    public events: EventsHandler<ViewEventsList>;\n\n    public model: M;\n\n    public template: string;\n\n    public parent: View<any> | null;\n\n    public el: HTMLElement | null;\n\n    protected _classList: string[];\n\n    constructor(options: IViewParams = {}) {\n        this.__id = View.__counter__++;\n        this.events = createEvents<ViewEventsList>(VIEW_EVENTS);\n        this.model = options.model || null;\n        this.template = options.template || \"\";\n        this.parent = options.parent || null;\n        this._classList = options.classList || [];\n        this.el = null;\n    }\n\n    static getHTML(template: string, params: any): string {\n        return stringTemplate(template, params);\n    }\n\n    static parseHTML(htmlStr: string): HTMLElement[] {\n        return parseHTML(htmlStr);\n    }\n\n    static insertAfter(newNodes: HTMLElement | HTMLElement[], referenceNode: Node): HTMLElement[] {\n        if (!Array.isArray(newNodes)) {\n            newNodes = [newNodes];\n        }\n        for (let i = 0; i < newNodes.length; i++) {\n            if (referenceNode.parentNode) {\n                referenceNode.parentNode.insertBefore(newNodes[i], referenceNode.nextSibling);\n            }\n        }\n        return newNodes;\n    }\n\n    static insertBefore(newNodes: HTMLElement | HTMLElement[], referenceNode: Node): HTMLElement[] {\n        if (!Array.isArray(newNodes)) {\n            newNodes = [newNodes];\n        }\n        for (let i = 0; i < newNodes.length; i++) {\n            if (referenceNode.parentNode) {\n                referenceNode.parentNode.insertBefore(newNodes[i], referenceNode);\n            }\n        }\n        return newNodes;\n    }\n\n    public insertBefore(view: View<any> | HTMLElement) {\n        if (!this.el) {\n            this.render();\n        }\n        if (this.el) {\n            if (view instanceof HTMLElement && view.parentNode) {\n                View.insertBefore(this.el, view);\n            }\n            if (view instanceof View && view.el && view.el.parentNode) {\n                View.insertBefore(this.el, view.el);\n            }\n        }\n    }\n\n    public insertAfter(view: View<any> | HTMLElement) {\n        if (!this.el) {\n            this.render();\n        }\n        if (this.el) {\n            if (view instanceof HTMLElement && view.parentNode) {\n                View.insertAfter(this.el, view);\n            }\n            if (view instanceof View && view.el && view.el.parentNode) {\n                View.insertAfter(this.el, view.el);\n            }\n        }\n    }\n\n    public isEqual(view: View<any>): boolean {\n        return view.__id === this.__id;\n    }\n\n    public appendTo(node: HTMLElement, clean: boolean = false, firstPosition: boolean = false) {\n        if (node) {\n            if (!this.el) {\n                this.beforeRender(node);\n                this.render();\n            }\n\n            if (this.el && this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n\n            if (clean) {\n                node.innerHTML = \"\";\n            }\n\n            if (this.el) {\n                if (firstPosition) {\n                    if (node.childNodes[0]) {\n                        View.insertBefore(this.el, node.childNodes[0]);\n                    } else {\n                        node.appendChild(this.el);\n                    }\n                } else {\n                    node.appendChild(this.el);\n                }\n            }\n            this.afterRender(node);\n        }\n\n        return this;\n    }\n\n    public afterRender(parentNode: HTMLElement) {\n    }\n\n    public beforeRender(parentNode: HTMLElement) {\n    }\n\n    public stopPropagation() {\n        this.events.stopPropagation();\n    }\n\n    public renderTemplate(params: any): HTMLElement {\n        return View.parseHTML(View.getHTML(this.template, params || {}))[0];\n    }\n\n    public render(params?: any): this {\n        this.el = this.renderTemplate(params);\n        for (let i = 0, len = this._classList.length; i < len; i++) {\n            this.el.classList.add(this._classList[i]);\n        }\n        this.events.dispatch(this.events.render, this);\n        return this;\n    }\n\n    public select<T extends HTMLElement>(queryStr: string): T | null {\n        if (this.el) {\n            return this.el.querySelector<T>(queryStr);\n        }\n        return null as T | null;\n    }\n\n    public selectRemove(queryStr: string): HTMLElement | undefined {\n        if (this.el) {\n            let r = this.select(queryStr);\n            if (r && r.parentNode) {\n                r.parentNode.removeChild(r);\n                return r;\n            }\n        }\n    }\n\n    public selectAll(queryStr: string, callback?: Function) {\n        if (this.el) {\n            const res = this.el.querySelectorAll(queryStr);\n            if (callback) {\n                for (let i = 0, len = res.length; i < len; i++) {\n                    callback(res[i], i);\n                }\n            }\n            return res;\n        }\n    }\n\n    public remove() {\n        if (this.el && this.el.parentNode) {\n            this.el.parentNode.removeChild(this.el);\n        }\n    }\n}\n\nexport {View};\n","import {stringTemplate} from '../utils/shared';\nimport {IViewParams, View, ViewEventsList} from './View';\nimport {EventsHandler} from \"../Events\";\n\nconst TEMPLATE =\n    `<div class=\"og-button\" title=\"{title}\">\n       <div class=\"og-button-icon\">{icon}</div>\n       <div class=\"og-button-text\">{text}</div>\n    </div>`;\n\ninterface HTMLElementExt extends HTMLElement {\n    __og_button__: Button;\n}\n\nexport type ButtonEventsList = [\"click\", \"mousedown\", \"mouseup\", \"touchstart\", \"touchend\", \"touchcancel\"];\n\nconst BUTTON_EVENTS: ButtonEventsList = [\"click\", \"mousedown\", \"mouseup\", \"touchstart\", \"touchend\", \"touchcancel\"];\n\nexport interface IButtonParams extends IViewParams {\n    icon?: string;\n    text?: string;\n    title?: string;\n    name?: string;\n}\n\nclass Button extends View<null> {\n\n    public override events: EventsHandler<ButtonEventsList> & EventsHandler<ViewEventsList>;\n\n    public override el: HTMLElementExt | null;\n\n    public name: string;\n    public $icon: HTMLElement | null;\n    public $text: HTMLElement | null;\n\n    constructor(options: IButtonParams = {}) {\n        super({\n            template: stringTemplate(TEMPLATE, {\n                icon: options.icon || \"\",\n                text: options.text || \"\",\n                title: options.title || \"\"\n            }),\n            ...options\n        });\n\n        //@ts-ignore\n        this.events = this.events.registerNames(BUTTON_EVENTS);\n\n        this.el = null;\n\n        this.name = options.name || \"\";\n\n        this.$icon = null;\n        this.$text = null;\n    }\n\n    public override render(params: any): this {\n        super.render(params);\n        this.$icon = this.select(\".og-button-icon\");\n        this.$text = this.select(\".og-button-text\");\n        this.el!.__og_button__ = this;\n        this._initEvents();\n        return this;\n    }\n\n    protected _initEvents() {\n        if (this.el) {\n            this.el.addEventListener(\"click\", this._onMouseClick);\n            this.el.addEventListener(\"mousedown\", this._onMouseDown);\n            this.el.addEventListener(\"mouseup\", this._onMouseUp);\n            this.el.addEventListener(\"touchstart\", this._onTouchStart);\n            this.el.addEventListener(\"touchend\", this._onTouchEnd);\n            this.el.addEventListener(\"touchcancel\", this._onTouchCancel);\n        }\n    }\n\n    protected _onMouseDown = (e: MouseEvent) => {\n        e.preventDefault();\n        this.events.dispatch(this.events.mousedown, this, e);\n    }\n\n    protected _onMouseUp = (e: MouseEvent) => {\n        e.preventDefault();\n        this.events.dispatch(this.events.mouseup, this, e);\n    }\n\n    protected _onTouchStart = (e: TouchEvent) => {\n        e.preventDefault();\n        this.events.dispatch(this.events.touchstart, this, e);\n    }\n\n    protected _onTouchEnd = (e: TouchEvent) => {\n        e.preventDefault();\n        this.events.dispatch(this.events.touchend, this, e);\n    }\n\n    protected _onTouchCancel = (e: TouchEvent) => {\n        e.preventDefault();\n        this.events.dispatch(this.events.touchcancel, this, e);\n    }\n\n    protected _mouseClickHandler(e: MouseEvent) {\n        e.preventDefault();\n        this.events.dispatch(this.events.click, this, e);\n    }\n\n    protected _onMouseClick = (e: MouseEvent) => {\n        this._mouseClickHandler(e)\n    }\n\n    public override remove() {\n        this._clearEvents();\n        super.remove();\n    }\n\n    protected _clearEvents() {\n        this.el && this.el.removeEventListener(\"click\", this._onMouseClick);\n    }\n}\n\nexport {Button};\n","import {Planet, Renderer} from \"../index\";\n\nexport interface IControlParams {\n    name?: string;\n    autoActivate?: boolean\n}\n\n/**\n * Base control class. All other controls extend from this class.\n * @class Control\n * @param {Boolean} [options.autoActivate=true] - If true - calls initialize function after the renderer assigning.\n */\nexport class Control {\n    static __counter__: number = 0;\n    protected __id: number;\n    protected _name: string;\n\n    /**\n     * Control activity.\n     * @protected\n     * @type {boolean}\n     */\n    protected _active: boolean;\n\n    /**\n     * Control initialized.\n     * @protected\n     * @type {boolean}\n     */\n    protected _initialized: boolean;\n\n    public planet: Planet | null;\n\n    /**\n     * Assigned renderer.\n     * @public\n     * @type {Renderer}\n     */\n    public renderer: Renderer | null;\n\n    /**\n     * Auto activation flag.\n     * @public\n     * @type {boolean}\n     */\n    public autoActivate: boolean;\n\n    protected _deferredActive: boolean;\n\n    constructor(options: IControlParams = {}) {\n\n        this.__id = Control.__counter__++;\n\n        this._name = options.name || `_control_${this.__id.toString()}`;\n\n        this.planet = null;\n\n        this._initialized = false;\n\n        this.renderer = null;\n\n        this.autoActivate = options.autoActivate || false;\n\n        this._active = false;\n\n        this._deferredActive = true;\n    }\n\n    /**\n     * Returns control name.\n     * @public\n     * @return {string} -\n     */\n    public get name(): string {\n        return this._name;\n    }\n\n    /**\n     * Control initialization function have to be overridden.\n     * @public\n     */\n    public oninit() {\n    }\n\n    /**\n     * Control renderer assigning function have to be overridden.\n     * @public\n     */\n    public onadd() {\n    }\n\n    /**\n     * Control remove function have to be overridden.\n     * @public\n     */\n    public onremove() {\n    }\n\n    /**\n     * Control activation function have to be overridden.\n     * @public\n     */\n    public onactivate() {\n    }\n\n    /**\n     * Control deactivation function have to be overriden.\n     * @public\n     */\n    public ondeactivate() {\n    }\n\n    /**\n     * Assign renderer to the control.\n     * @public\n     * @type {Renderer}\n     */\n    public addTo(renderer: Renderer) {\n        if (renderer) {\n            this.renderer = renderer;\n            renderer.controls[this.name] = this;\n            this.onadd && this.onadd();\n            if (renderer.isInitialized()) {\n                this._initialized = true;\n                this.oninit && this.oninit();\n                if (this.autoActivate) {\n                    this.activate();\n                }\n            }\n        }\n    }\n\n    /**\n     * Removes control.\n     * @public\n     */\n    public remove() {\n\n        this.deactivate();\n\n        this.onremove && this.onremove();\n\n        let r = this.renderer,\n            n = this.name;\n\n        if (!r) return;\n\n        let c = r.controls[n];\n\n        if (c) {\n            if (this.isEqual(c)) {\n                delete r.controls[n];\n            }\n        }\n\n        this.renderer = null;\n        this._active = false;\n        this._initialized = false;\n    }\n\n    /**\n     * Activate control.\n     * @public\n     */\n    public activate() {\n        if (!this._active) {\n            if (!this._initialized) {\n                this._initialized = true;\n                this.oninit && this.oninit();\n            }\n            if (this._deferredActive) {\n                this._active = true;\n                this.onactivate && this.onactivate();\n            } else {\n                this._deferredActive = true;\n            }\n        }\n    }\n\n    /**\n     * Deactivate control.\n     * @public\n     */\n    public deactivate() {\n        if (this._active) {\n            this._active = false;\n            this.ondeactivate && this.ondeactivate();\n        } else if (!this._initialized) {\n            this._deferredActive = false;\n        }\n    }\n\n    /**\n     * Is control active.\n     * @public\n     */\n    public isActive(): boolean {\n        return this._active;\n    }\n\n    public isEqual(control: Control): boolean {\n        return control.__id === this.__id;\n    }\n}\n","import {Button} from \"../ui/Button\";\nimport {Control, IControlParams} from \"./Control\";\n\nconst ICON_BUTTON_SVG = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<svg\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n   xmlns:cc=\"http://creativecommons.org/ns#\"\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   viewBox=\"0 0 110.6 110.3\"\n   version=\"1.1\"\n   id=\"svg21\"\n   sodipodi:docname=\"aaa.svg\"\n   inkscape:version=\"0.92.3 (2405546, 2018-03-11)\">\n  <metadata\n     id=\"metadata11\">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about=\"\">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id=\"defs25\" />\n  <sodipodi:namedview\n     pagecolor=\"#ffffff\"\n     bordercolor=\"#666666\"\n     borderopacity=\"1\"\n     objecttolerance=\"10\"\n     gridtolerance=\"10\"\n     guidetolerance=\"10\"\n     inkscape:pageopacity=\"0\"\n     inkscape:pageshadow=\"2\"\n     inkscape:window-width=\"1920\"\n     inkscape:window-height=\"1001\"\n     id=\"namedview23\"\n     showgrid=\"false\"\n     inkscape:zoom=\"9.4900968\"\n     inkscape:cx=\"28.376998\"\n     inkscape:cy=\"60.17054\"\n     inkscape:window-x=\"-9\"\n     inkscape:window-y=\"-9\"\n     inkscape:window-maximized=\"1\"\n     inkscape:current-layer=\"svg21\" />\n  <g\n     id=\"Layer_2\"\n     data-name=\"Layer 2\"\n     transform=\"matrix(1,0,0,-1,0,110.3)\">\n    <g\n       id=\"–°–ª–æ–π_1\"\n       data-name=\"–°–ª–æ–π 1\">\n      <g\n         id=\"_Group_\"\n         data-name=\"&lt;Group&gt;\">\n        <g\n           id=\"_Group_7\"\n           data-name=\"&lt;Group&gt;\">\n          <polygon\n             id=\"_Path_7\"\n             data-name=\"&lt;Path&gt;\"\n             points=\"55.2,97.6 55.3,97.4 55.3,97.6 55.3,97.2 65.3,55.1 55.3,55.1 55.2,55.1 45.3,55.1 55.2,97.2 \"\n             style=\"fill:#ff2b45\" />\n          <polygon\n             id=\"_Path_8\"\n             data-name=\"&lt;Path&gt;\"\n             points=\"55.3,12.7 55.3,12.9 55.2,12.7 55.2,13.1 45.3,55.1 55.2,55.1 55.3,55.1 65.3,55.1 55.3,13.1 \"\n             style=\"fill:#cecece;\" />\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>`;\n\ninterface ICompasButtonParams extends IControlParams {\n\n}\n\n/**\n * Planet compass button\n */\nexport class CompassButton extends Control {\n    protected _heading: number;\n    protected _svg: HTMLElement | null;\n\n    constructor(options: ICompasButtonParams = {}) {\n        super(options);\n        this._heading = 0;\n        this._svg = null;\n    }\n\n    public override oninit() {\n\n        let btn = new Button({\n            classList: [\"og-map-button\", \"og-compass-button\"],\n            icon: ICON_BUTTON_SVG\n        });\n\n        btn.appendTo(this.renderer!.div!);\n\n        btn.events.on(\"click\", this._onClick, this);\n\n        this._svg = btn.select(\"svg\");\n\n        this.renderer!.events!.on(\"draw\", this._draw, this);\n    }\n\n    protected _onClick() {\n        const planet = this.planet!;\n        let c = planet.getCartesianFromPixelTerrain(this.renderer!.handler!.getCenter());\n        if (c) {\n            planet.flyCartesian(\n                c.normal().scaleTo(c.length() + c.distance(planet.camera.eye)),\n                null,\n                null,\n                0,\n                null,\n                null,\n                () => {\n                    planet.camera.look(c!);\n                }\n            );\n        } else {\n            planet.flyCartesian(planet.camera.eye);\n        }\n    }\n\n    protected _draw() {\n        this.setHeading(this.planet!.camera.getHeading());\n    }\n\n    public setHeading(heading: number) {\n        if (this._heading !== heading) {\n            this._heading = heading;\n            this._svg!.style.transform = `rotateZ(${-heading}deg)`;\n        }\n    }\n}\n","export const CLOSE_ICON = `<svg className=\"svg-icon\" style=\"width: 1em; height: 1em;vertical-align: middle;fill: currentColor; overflow: hidden;\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M777.856 280.192l-33.92-33.952-231.872 231.872-231.84-231.872-33.984 33.888 231.872 231.904-231.84 231.84 33.888 33.984 231.904-231.904 231.84 231.872 33.952-33.888-231.872-231.904z\"/>\n</svg>`","import {getDefault, stringTemplate} from '../utils/shared';\nimport {Button} from './Button';\nimport {CLOSE_ICON} from './icons';\nimport {IViewParams, View, ViewEventsList} from './View';\nimport {EventsHandler} from \"../Events\";\n\nexport interface IDialogParams extends IViewParams {\n    title?: string;\n    visible?: boolean;\n    resizable?: boolean;\n    width?: number;\n    height?: number;\n    left?: number;\n    top?: number;\n    minHeight?: number;\n    maxHeight?: number;\n    minWidth?: number;\n    maxWidth?: number;\n    useHide?: boolean;\n}\n\ntype DialogEventsList = [\"resize\", \"focus\", \"visibility\", \"dragstart\", \"dragend\"];\n\nconst DIALOG_EVENTS: DialogEventsList = [\"resize\", \"focus\", \"visibility\", \"dragstart\", \"dragend\"];\n\nconst TEMPLATE = `<div class=\"og-ddialog\" \n        style=\"display:{display}; resize:{resize}; width: {width}px; {height}; top: {top}px; left: {left}px; min-height: {minHeight}; max-height: {maxHeight}; min-width: {minWidth}; max-width: {maxWidth};\">\n       <div class=\"og-ddialog-header\">\n         <div class=\"og-ddialog-header__title\">{title}</div>      \n         <div class=\"og-ddialog-header__buttons\"></div>      \n        </div>\n       <div class=\"og-ddialog-container\"></div>\n    </div>>`;\n\nclass Dialog<M> extends View<M> {\n\n    static __zIndex__: number = 0;\n\n    public override events: EventsHandler<DialogEventsList> & EventsHandler<ViewEventsList>;\n\n    public $header: HTMLElement | null;\n    public $title: HTMLElement | null;\n    public $container: HTMLElement | null;\n    public $buttons: HTMLElement | null;\n\n    public useHide: boolean;\n\n    protected _startPosX: number;\n    protected _startPosY: number;\n\n    protected _closeBtn: Button;\n\n    protected _visibility: boolean;\n\n    constructor(options: IDialogParams = {}) {\n        super({\n            template: stringTemplate(TEMPLATE, {\n                title: options.title || \"\",\n                display: getDefault(options.visible, true) ? \"flex\" : \"none\",\n                resize: getDefault(options.resizable, true) ? \"both\" : \"none\",\n                width: options.width || 300,\n                height: options.height ? `height: ${options.height || 200}px` : \"\",\n                left: options.left || 0,\n                top: options.top || 0,\n                minHeight: options.minHeight ? `${options.minHeight}px` : 'unset',\n                maxHeight: options.maxHeight ? `${options.maxHeight}px` : 'unset',\n                minWidth: options.minWidth ? `${options.minWidth}px` : 'unset',\n                maxWidth: options.maxWidth ? `${options.maxWidth}px` : 'unset',\n            }),\n            ...options\n        });\n\n        //@ts-ignore\n        this.events = this.events.registerNames(DIALOG_EVENTS);\n\n        this._startPosX = 0;\n        this._startPosY = 0;\n\n        this.$header = null;\n        this.$title = null;\n        this.$container = null;\n        this.$buttons = null;\n\n        this._closeBtn = new Button({\n            icon: CLOSE_ICON,\n            classList: [\"og-button-size__20\"]\n        });\n\n        this.useHide = options.useHide || false;\n\n        this._visibility = getDefault(options.visible, true);\n    }\n\n    public setContainer(htmlStr: string) {\n        this.$container!.innerHTML = htmlStr;\n    }\n\n    public get container(): HTMLElement | null {\n        return this.$container;\n    }\n\n    public get width(): number {\n        return this.el ? parseFloat(this.el.style.width) : 0;\n    }\n\n    public get height(): number {\n        return this.el ? parseFloat(this.el.style.height) : 0;\n    }\n\n    public bringToFront() {\n        this.el!.style.zIndex = String(Dialog.__zIndex__++);\n    }\n\n    public override render(params: any): this {\n        super.render(params);\n        this.bringToFront();\n        this.$header = this.select(\".og-ddialog-header\");\n        this.$title = this.select(\".og-ddialog-header__title\");\n        this.$container = this.select(\".og-ddialog-container\");\n        this.$buttons = this.select(\".og-ddialog-header__buttons\");\n        this._initEvents();\n        this._initButtons();\n        return this;\n    }\n\n    public show() {\n        if (!this._visibility) {\n            this._visibility = true;\n            this.el!.style.display = \"flex\";\n            this.bringToFront();\n            this.events.dispatch(this.events.visibility, true, this);\n        }\n    }\n\n    public hide() {\n        if (this._visibility) {\n            this._visibility = false;\n            this.el!.style.display = \"none\";\n            this.events.dispatch(this.events.visibility, false, this);\n        }\n    }\n\n    public close() {\n        if (this.useHide) {\n            this.hide();\n        } else {\n            this.remove();\n        }\n    }\n\n    public setVisibility(visibility: boolean) {\n        if (visibility) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    protected _initButtons() {\n        this._closeBtn.events.on(\"click\", this._onCloseBtnClick);\n        this._closeBtn.appendTo(this.$buttons!);\n    }\n\n    protected _initEvents() {\n        this.$header!.addEventListener(\"mousedown\", this._onMouseDown);\n        this.el!.addEventListener(\"mousedown\", this._onMouseDownAll);\n    }\n\n    protected _onCloseBtnClick = () => {\n        this.close();\n    }\n\n    protected _onMouseDownAll = () => {\n        this.bringToFront();\n    }\n\n    protected _onMouseDown = (e: MouseEvent) => {\n        e.preventDefault();\n\n        this._startDragging();\n\n        this._startPosX = e.clientX;\n        this._startPosY = e.clientY;\n\n        document.addEventListener(\"mousemove\", this._onMouseMove);\n        document.addEventListener(\"mouseup\", this._onMouseUp);\n    }\n\n    public setPosition(x?: number, y?: number) {\n        if (x != undefined) {\n            this.el!.style.left = `${x}px`;\n        }\n        if (y != undefined) {\n            this.el!.style.top = `${y}px`;\n        }\n    }\n\n    protected _onMouseMove = (e: MouseEvent) => {\n        e.preventDefault();\n        let dx = this._startPosX - e.clientX;\n        let dy = this._startPosY - e.clientY;\n        this._startPosX = e.clientX;\n        this._startPosY = e.clientY;\n        this.setPosition(this.el!.offsetLeft - dx, this.el!.offsetTop - dy);\n    }\n\n    protected _startDragging() {\n        if (!this.el!.classList.contains(\"dragging\")) {\n            this.el!.classList.add(\"dragging\");\n            this.events.dispatch(this.events.dragstart, this);\n        }\n    }\n\n    protected _clearDragging() {\n        if (this.el!.classList.contains(\"dragging\")) {\n            this.events.dispatch(this.events.dragend, this);\n            this.el!.classList.remove(\"dragging\");\n        }\n    }\n\n    protected _onMouseUp = () => {\n        this._clearDragging();\n        document.removeEventListener(\"mouseup\", this._onMouseUp);\n        document.removeEventListener(\"mousemove\", this._onMouseMove);\n    }\n\n    public override remove() {\n        this._clearDragging();\n        this._clearEvents();\n        super.remove();\n    }\n\n    protected _clearEvents() {\n        this._closeBtn.events.off(\"click\", this._onCloseBtnClick);\n\n        document.removeEventListener(\"mouseup\", this._onMouseUp);\n        document.removeEventListener(\"mousemove\", this._onMouseMove);\n\n        this.$header!.removeEventListener(\"mousedown\", this._onMouseDown);\n        this.el!.removeEventListener(\"mousedown\", this._onMouseDownAll);\n    }\n}\n\nexport {Dialog};\n","import {Button, IButtonParams, ButtonEventsList} from './Button';\nimport {EventsHandler} from \"../Events\";\nimport {ViewEventsList} from \"./View\";\n\ninterface IToggleButtonParams extends IButtonParams {\n    isActive?: boolean;\n    preventClick?: boolean;\n}\n\ntype ToggleButtonEventsList = [\"change\"];\n\nconst TOGGLEBUTTON_EVENTS: ToggleButtonEventsList = [\"change\"];\n\nclass ToggleButton extends Button {\n\n    public override events: EventsHandler<ToggleButtonEventsList> & EventsHandler<ButtonEventsList> & EventsHandler<ViewEventsList>;\n\n    protected _isActive: boolean;\n    public preventClick: boolean;\n\n    constructor(options: IToggleButtonParams) {\n        super({\n            ...options\n        });\n\n        //@ts-ignore\n        this.events = this.events.registerNames(TOGGLEBUTTON_EVENTS);\n\n        this._isActive = options.isActive || false;\n\n        this.preventClick = options.preventClick || false;\n    }\n\n    public setActive(isActive: boolean, stopPropagation: boolean = false) {\n        if (isActive !== this._isActive) {\n            this._isActive = isActive;\n            this._toggle();\n            if (!stopPropagation) {\n                this.events.dispatch(this.events.change, isActive, this);\n            }\n        }\n    }\n\n    protected _toggle() {\n        this.el && this.el.classList.toggle(\"og-button__active\");\n    }\n\n    public get isActive(): boolean {\n        return this._isActive;\n    }\n\n    public override render(params: any): this {\n        super.render(params);\n        if (this._isActive) {\n            this._toggle();\n        }\n        return this;\n    }\n\n    protected override _onMouseClick = (e: MouseEvent) => {\n        if (!this.preventClick) {\n            this._mouseClickHandler(e);\n            this.setActive(!this.isActive);\n        }\n    }\n}\n\nexport {ToggleButton}","export const VISIBLE_DISTANCE = 3570.0;\nexport const MAX_RENDERED_NODES = 1000;\n\nexport const NW = 0;\nexport const NE = 1;\nexport const SW = 2;\nexport const SE = 3;\n\nexport const N = 0;\nexport const E = 1;\nexport const S = 2;\nexport const W = 3;\n\nexport const NOTRENDERING = 0;\nexport const RENDERING = 1;\nexport const WALKTHROUGH = 2;\n\n/**\n * World opposite side table.\n */\nexport const OPSIDE = [S, W, N, E];\n\n/**\n * First index is {N,E,S,W} and second is {NW,NE,SW,SE}\n */\nexport const NEIGHBOUR = [\n    [-1, -1, NW, NE],\n    [NE, -1, SE, -1],\n    [SW, SE, -1, -1],\n    [-1, NW, -1, SW]\n];\n\n/**\n * Neighbor's oposite part. For example oposite side\n * on the east neighbor side is: [S][SE] = NE\n */\nexport const OPPART = [\n    [SW, SE, NW, NE],\n    [NE, NW, SE, SW],\n    [SW, SE, NW, NE],\n    [NE, NW, SE, SW]\n];\n\n/**\n * Neighbos's opside array order. For example NW node\n * by E side array index is 0, SE node by S side is 1.\n */\nexport const NOPSORD = [\n    [0, 1, 0, 1],\n    [0, 0, 1, 1],\n    [0, 1, 0, 1],\n    [0, 0, 1, 1]\n];\n\n/**\n * First index is {NW,NE,SW,SE}, another one is {N,E,S,W}\n */\nexport const COMSIDE = [\n    [true, false, false, true],\n    [true, true, false, false],\n    [false, false, true, true],\n    [false, true, true, false]\n];\n\n/**\n * Gets segment part left to right or up to downo ffset against neighbour side.\n * Where 0 - no offset 1 - half segment size offset.\n */\nexport const PARTOFFSET = [\n    /*     N  E  S  W */\n    /*NW*/ [0, 1, 0, 0],\n    /*NE*/ [1, 0, 0, 0],\n    /*SW*/ [0, 1, 0, 1],\n    /*SE*/ [1, 1, 1, 1]\n];\n","import {Layer} from \"./Layer\";\nimport {Node} from \"../quadTree/Node\";\nimport {Segment} from \"../segment/Segment\";\nimport {WebGLTextureExt} from \"../webgl/Handler\";\nimport {NumberArray4} from \"../math/Vec4\";\n\n/**\n * @class Material\n * @param {Segment} segment\n * @param {Layer} layer\n */\nclass Material {\n\n    public segment: Segment;\n    public layer: Layer;\n    public isReady: boolean;\n    public isLoading: boolean;\n    public texture: WebGLTextureExt | null;\n    public pickingMask: WebGLTextureExt | null;\n\n    public textureExists: boolean;\n    public appliedNodeId: number;\n    public appliedNode: Node | null;\n    public texOffset: NumberArray4;\n    public loadingAttempts: number;\n\n    // vector data\n    public _updateTexture: WebGLTextureExt | null;\n    public _updatePickingMask: WebGLTextureExt | null;\n    public pickingReady: boolean;\n\n    constructor(segment: Segment, layer: Layer) {\n        this.segment = segment;\n        this.layer = layer;\n        this.isReady = false;\n        this.isLoading = false;\n        this.texture = null;\n        this.pickingMask = null;\n\n        this.textureExists = false;\n        this.appliedNodeId = 0;\n        this.appliedNode = null;\n        this.texOffset = [0.0, 0.0, 1.0, 1.0];\n        this.loadingAttempts = 0;\n\n        this._updateTexture = null;\n        this._updatePickingMask = null;\n        this.pickingReady = false;\n    }\n\n    public abortLoading() {\n        this.layer.abortMaterialLoading(this);\n    }\n\n    public _createTexture(img: HTMLCanvasElement | ImageBitmap | HTMLImageElement) {\n        return this.layer._planet && this.layer.createTexture!(img, this.layer._internalFormat, this.isReady ? this.texture : null);\n    }\n\n    public applyImage(img: HTMLCanvasElement | ImageBitmap | HTMLImageElement) {\n        if (this.segment.initialized) {\n            this._updateTexture = null;\n            //this.image = img;\n            this.texture = this._createTexture(img);\n            this.isReady = true;\n            this.pickingReady = true;\n            this.textureExists = true;\n            this.isLoading = false;\n            this.appliedNodeId = this.segment.node.nodeId;\n            this.texOffset = [0.0, 0.0, 1.0, 1.0];\n        }\n    }\n\n    public applyTexture(texture: WebGLTextureExt | null, pickingMask?: WebGLTextureExt | null) {\n        if (this.segment.initialized) {\n            this.texture = texture;\n            this._updateTexture = null;\n            this.pickingMask = pickingMask || null;\n            this._updatePickingMask = null;\n            this.isReady = true;\n            this.pickingReady = true;\n            this.textureExists = true;\n            this.isLoading = false;\n            this.appliedNodeId = this.segment.node.nodeId;\n            this.texOffset = [0.0, 0.0, 1.0, 1.0];\n        }\n    }\n\n    public textureNotExists() {\n        if (this.segment.initialized) {\n            this.pickingReady = true;\n            this.isLoading = false;\n            this.isReady = true;\n            this.textureExists = false;\n        }\n    }\n\n    public clear() {\n        this.loadingAttempts = 0;\n        this.layer.clearMaterial(this);\n    }\n}\n\nexport {Material};\n","import * as mercator from \"../mercator\";\nimport * as utils from \"../utils/shared\";\nimport {createColorRGB} from \"../utils/shared\";\nimport {createEvents, Events, EventsHandler} from \"../Events\";\nimport {Extent} from \"../Extent\";\nimport {LonLat} from \"../LonLat\";\nimport {Node} from \"../quadTree/Node\";\nimport {Material} from \"./Material\";\nimport {Planet} from \"../scene/Planet\";\nimport {Segment} from \"../segment/Segment\";\nimport {Vec3, NumberArray3} from \"../math/Vec3\";\nimport {NumberArray4} from \"../math/Vec4\";\nimport {IDefaultTextureParams, WebGLTextureExt} from \"../webgl/Handler\";\n\nconst FADING_RATIO = 30;\n\nexport interface ILayerParams {\n    properties?: any;\n    labelMaxLetters?: number;\n    hideInLayerSwitcher?: boolean;\n    opacity?: number;\n    minZoom?: number;\n    maxZoom?: number;\n    attribution?: string;\n    zIndex?: number;\n    isBaseLayer?: boolean;\n    defaultTextures?: [IDefaultTextureParams, IDefaultTextureParams];\n    visibility?: boolean;\n    fading?: boolean;\n    height?: number;\n    textureFilter?: string;\n    isSRGB?: boolean;\n    pickingEnabled?: boolean;\n    preLoadZoomLevels?: number[];\n    extent?: Extent | [[number, number], [number, number]];\n    ambient?: string | NumberArray3 | Vec3;\n    diffuse?: string | NumberArray3 | Vec3;\n    specular?: string | NumberArray3 | Vec3;\n    shininess?: number;\n    nightTextureCoefficient?: number;\n    iconSrc?: string | null;\n}\n\n/**\n * @class\n * Base class; normally only used for creating subclasses and not instantiated in apps.\n * A visual representation of raster or vector map data well known as a layer.\n * @class\n * @param {String} [name=\"noname\"] - Layer name.\n * @param {Object} [options] - Layer options:\n * @param {number} [options.opacity=1.0] - Layer opacity.\n * @param {number} [options.minZoom=0] - Minimal visibility zoom level.\n * @param {number} [options.maxZoom=0] - Maximal visibility zoom level.\n * @param {string} [options.attribution] - Layer attribution that displayed in the attribution area on the screen.\n * @param {boolean} [options.isBaseLayer=false] - This is a base layer.\n * @param {boolean} [options.visibility=true] - Layer visibility.\n * @param {boolean} [options.hideInLayerSwitcher=false] - Presence of layer in dialog window of LayerSwitcher control.\n * @param {boolean} [options.isSRGB=false] - Layer image webgl internal format.\n * @param {Extent} [options.extent=[[-180.0, -90.0], [180.0, 90.0]]] - Visible extent.\n * @param {string} [options.textureFilter=\"anisotropic\"] - Image texture filter. Available values: \"nearest\", \"linear\", \"mipmap\" and \"anisotropic\".\n * @param {string} [options.icon] - Icon for LayerSwitcher\n * @fires EventsHandler<LayerEventsList>#visibilitychange\n * @fires EventsHandler<LayerEventsList>#add\n * @fires EventsHandler<LayerEventsList>#remove\n * @fires EventsHandler<LayerEventsList>#mousemove\n * @fires EventsHandler<LayerEventsList>#mouseenter\n * @fires EventsHandler<LayerEventsList>#mouseleave\n * @fires EventsHandler<LayerEventsList>#lclick\n * @fires EventsHandler<LayerEventsList>#rclick\n * @fires EventsHandler<LayerEventsList>#mclick\n * @fires EventsHandler<LayerEventsList>#ldblclick\n * @fires EventsHandler<LayerEventsList>#rdblclick\n * @fires EventsHandler<LayerEventsList>#mdblclick\n * @fires EventsHandler<LayerEventsList>#lup\n * @fires EventsHandler<LayerEventsList>#rup\n * @fires EventsHandler<LayerEventsList>#mup\n * @fires EventsHandler<LayerEventsList>#ldown\n * @fires EventsHandler<LayerEventsList>#rdown\n * @fires EventsHandler<LayerEventsList>#mdown\n * @fires EventsHandler<LayerEventsList>#lhold\n * @fires EventsHandler<LayerEventsList>#rhold\n * @fires EventsHandler<LayerEventsList>#mhold\n * @fires EventsHandler<LayerEventsList>#mousewheel\n * @fires EventsHandler<LayerEventsList>#touchmove\n * @fires EventsHandler<LayerEventsList>#touchstart\n * @fires EventsHandler<LayerEventsList>#touchend\n * @fires EventsHandler<LayerEventsList>#doubletouch\n */\nclass Layer {\n\n    static __counter__: number = 0;\n\n    /**\n     * Uniq identifier.\n     * @public\n     * @type {number}\n     */\n    public __id: number;\n\n    /**\n     * Events handler.\n     * @public\n     * @type {Events}\n     */\n    public events: EventsHandler<LayerEventsList>;\n\n    /**\n     * Layer user name.\n     * @public\n     * @type {string}\n     */\n    public name: string;\n\n    public properties: any;\n\n    public hideInLayerSwitcher: boolean;\n\n    /**\n     * Minimal zoom level when layer is visible.\n     * @public\n     * @type {number}\n     */\n    public minZoom: number;\n\n    /**\n     * Maximal zoom level when layer is visible.\n     * @public\n     * @type {number}\n     */\n    public maxZoom: number;\n\n    /**\n     * Planet node.\n     * @public\n     * @type {Planet}\n     */\n    public _planet: Planet | null;\n\n    public createTexture: Function | null;\n\n    public nightTextureCoefficient: number;\n\n    protected _hasImageryTiles: boolean;\n\n    /**\n     * Layer global opacity.\n     * @public\n     * @type {number}\n     */\n    protected _opacity: number;\n\n    /**\n     * Layer attribution.\n     * @protected\n     * @type {string}\n     */\n    protected _attribution: string;\n\n    /**\n     * Layer z-index.\n     * @protected\n     * @type {number}\n     */\n    protected _zIndex: number;\n\n    /**\n     * Base layer type flag.\n     * @protected\n     * @type {boolean}\n     */\n    protected _isBaseLayer: boolean;\n\n    public _defaultTextures: [IDefaultTextureParams | null, IDefaultTextureParams | null];\n\n    /**\n     * Layer visibility.\n     * @protected\n     * @type {boolean}\n     */\n    protected _visibility: boolean;\n\n    public _fading: boolean;\n\n    protected _fadingFactor: number;\n\n    public _fadingOpacity: number;\n\n    /**\n     * Height over the ground.\n     * @public\n     * @type {number}\n     */\n    public _height: number;\n\n    protected _textureFilter: string;\n\n    protected _isSRGB: boolean;\n\n    public _internalFormat: number | null;\n\n    /**\n     * Visible degrees extent.\n     * @public\n     * @type {Extent}\n     */\n    public _extent: Extent;\n\n    /**\n     * Visible mercator extent.\n     * @public\n     * @type {Extent}\n     */\n    public _extentMerc: Extent;\n\n    /**\n     * Layer picking color. Assign when added to the planet.\n     * @public\n     * @type {Vec3}\n     */\n    public _pickingColor: Vec3;\n\n    public _pickingEnabled: boolean;\n\n    protected _isPreloadDone: boolean;\n\n    protected _preLoadZoomLevels: number[];\n\n    public _ambient: Float32Array | null;\n    public _diffuse: Float32Array | null;\n    public _specular: Float32Array | null;\n\n    public isVector: boolean = false;\n\n    protected _iconSrc: string | null;\n\n    constructor(name?: string | null, options: ILayerParams = {}) {\n\n        this.__id = Layer.__counter__++;\n\n        this._iconSrc = options.iconSrc || null;\n\n        this.events = createEvents<LayerEventsList>(LAYER_EVENTS, this);\n\n        this.name = name || \"noname\";\n\n        this.properties = options.properties || {};\n\n        this.hideInLayerSwitcher = options.hideInLayerSwitcher || false;\n\n        this._hasImageryTiles = true;\n\n        this._opacity = options.opacity != undefined ? options.opacity : 1.0;\n\n        this.minZoom = options.minZoom || 0;\n\n        this.maxZoom = options.maxZoom != undefined ? options.maxZoom : 50;\n\n        this._planet = null;\n\n        this.isVector = false;\n\n        this._attribution = options.attribution || \"\";\n\n        this._zIndex = options.zIndex || 0;\n\n        this._isBaseLayer = options.isBaseLayer || false;\n\n        this._defaultTextures = options.defaultTextures || [null, null];\n\n        this._visibility = options.visibility !== undefined ? options.visibility : true;\n\n        this._fading = options.fading || false;\n\n        this._fadingFactor = this._opacity / FADING_RATIO;\n\n        if (this._fading) {\n            this._fadingOpacity = 0;\n        } else {\n            this._fadingOpacity = this._opacity;\n        }\n\n        this._height = options.height || 0;\n\n        this._extent = new Extent();\n\n        this.createTexture = null;\n\n        this._textureFilter = options.textureFilter ? options.textureFilter.trim().toUpperCase() : \"MIPMAP\";\n\n        this._isSRGB = options.isSRGB != undefined ? options.isSRGB : false;\n\n        this._internalFormat = null;\n\n        this._extentMerc = new Extent();\n\n        // Setting the extent up\n        this.setExtent(\n            utils.createExtent(\n                options.extent,\n                new Extent(new LonLat(-180, -90), new LonLat(180, 90))\n            )\n        );\n\n        /**\n         * Layer picking color. Assign when added to the planet.\n         * @protected\n         * @type {Vec3}\n         */\n        this._pickingColor = new Vec3();\n\n        this._pickingEnabled = options.pickingEnabled !== undefined ? options.pickingEnabled : true;\n\n        this._isPreloadDone = false;\n\n        this._preLoadZoomLevels = options.preLoadZoomLevels || [0, 1];\n\n        this._ambient = null;\n        this._diffuse = null;\n        this._specular = null;\n\n        if (options.ambient) {\n            let a = utils.createColorRGB(options.ambient, new Vec3(0.2, 0.2, 0.2));\n            this._ambient = new Float32Array([a.x, a.y, a.z]);\n        }\n\n        if (options.diffuse) {\n            let d = utils.createColorRGB(options.diffuse, new Vec3(0.8, 0.8, 0.8));\n            this._diffuse = new Float32Array([d.x, d.y, d.z]);\n        }\n\n        if (options.specular) {\n            let s = utils.createColorRGB(options.specular, new Vec3(0.0003, 0.0003, 0.0003));\n            let shininess = options.shininess || 20.0;\n            this._specular = new Float32Array([s.x, s.y, s.z, shininess]);\n        }\n\n        this.nightTextureCoefficient = options.nightTextureCoefficient || 1.0;\n    }\n\n    public get iconSrc(): string | null {\n        return this._iconSrc;\n    }\n\n    public set iconSrc(src: string | null) {\n        // @todo: add event\n        this._iconSrc = src;\n    }\n\n    public set diffuse(rgb: string | NumberArray3 | Vec3 | null | undefined) {\n        if (rgb) {\n            let vec = createColorRGB(rgb);\n            this._diffuse = new Float32Array(vec.toArray());\n        } else {\n            this._diffuse = null;\n        }\n    }\n\n    public set ambient(rgb: string | NumberArray3 | Vec3 | null | undefined) {\n        if (rgb) {\n            let vec = createColorRGB(rgb);\n            this._ambient = new Float32Array(vec.toArray());\n        } else {\n            this._ambient = null;\n        }\n    }\n\n    public set specular(rgb: string | NumberArray3 | Vec3 | null | undefined) {\n        if (rgb) {\n            let vec = createColorRGB(rgb);\n            this._specular = new Float32Array([vec.x, vec.y, vec.y, this._specular ? this._specular[3] : 0.0]);\n        } else {\n            this._specular = null;\n        }\n    }\n\n    public set shininess(v: number) {\n        if (this._specular) {\n            this._specular[3] = v;\n        }\n    }\n\n    // get normalMapCreator() {\n    //     return this._normalMapCreator;\n    // }\n\n    static getTMS(x: number, y: number, z: number): { x: number; y: number; z: number } {\n        return {\n            x: x,\n            y: (1 << z) - y - 1,\n            z: z\n        };\n    }\n\n    static getTileIndex(x: number, y: number, z: number, tileGroup: number): string {\n        return `${tileGroup}::${x}_${y}_${z}`;\n    }\n\n    public get instanceName(): string {\n        return \"Layer\";\n    }\n\n    public get rendererEvents(): EventsHandler<LayerEventsList> {\n        return this.events;\n    }\n\n    public set opacity(opacity: number) {\n        if (opacity !== this._opacity) {\n            if (this._fading) {\n                if (opacity > this._opacity) {\n                    this._fadingFactor = (opacity - this._opacity) / FADING_RATIO;\n                } else if (opacity < this._opacity) {\n                    this._fadingFactor = (this._opacity - opacity) / FADING_RATIO;\n                }\n            } else {\n                this._fadingOpacity = opacity;\n            }\n            this._opacity = opacity;\n        }\n    }\n\n    public set pickingEnabled(picking: boolean) {\n        this._pickingEnabled = picking;\n    }\n\n    public get pickingEnabled(): boolean {\n        return this._pickingEnabled;\n    }\n\n    /**\n     * Returns true if a layer has imagery tiles.\n     * @public\n     * @virtual\n     * @returns {boolean} - Imagery tiles flag.\n     */\n    public hasImageryTiles(): boolean {\n        return this._hasImageryTiles;\n    }\n\n    /**\n     * Gets layer identifier.\n     * @public\n     * @returns {string} - Layer object id.\n     */\n    public getID(): number {\n        return this.__id;\n    }\n\n    public get id(): number {\n        return this.__id;\n    }\n\n    /**\n     * @todo: remove after all\n     */\n    public get _id(): number {\n        return this.__id;\n    }\n\n    /**\n     * Compares layers instances.\n     * @public\n     * @param {Layer} layer - Layer instance to compare.\n     * @returns {boolean} - Returns true if the layers is the same instance of the input.\n     */\n    public isEqual(layer: Layer): boolean {\n        return layer.__id === this.__id;\n    }\n\n    /**\n     * Assign the planet.\n     * @protected\n     * @virtual\n     * @param {Planet} planet - Planet render node.\n     */\n    public _assignPlanet(planet: Planet) {\n\n        this._planet = planet;\n\n        planet._layers.push(this);\n\n        if (planet.renderer && planet.renderer.isInitialized()) {\n            // TODO: webgl1\n            if (this._isSRGB) {\n                this._internalFormat = planet.renderer.handler.gl!.SRGB8_ALPHA8;\n            } else {\n                this._internalFormat = planet.renderer.handler.gl!.RGBA8;\n            }\n            this.createTexture = planet.renderer.handler.createTexture[this._textureFilter];\n\n            this.events.on(\"visibilitychange\", planet._onLayerVisibilityChanged, planet);\n\n            if (this._isBaseLayer && this._visibility) {\n                planet.setBaseLayer(this);\n            }\n\n            planet.events.dispatch(planet.events.layeradd, this);\n            this.events.dispatch(this.events.add, planet);\n            planet.updateVisibleLayers();\n            this._bindPicking();\n\n            if (this._visibility && this.hasImageryTiles()) {\n                this._preLoad();\n            }\n        }\n    }\n\n    public get isIdle(): boolean {\n        return this._planet && this._planet._terrainCompletedActivated || false;\n    }\n\n    /**\n     * Assign picking color to the layer.\n     * @protected\n     * @virtual\n     */\n    protected _bindPicking() {\n        this._planet && this._planet.renderer && this._planet.renderer.assignPickingColor<Layer>(this);\n    }\n\n    /**\n     * Adds layer to the planet.\n     * @public\n     * @param {Planet} planet - Adds layer to the planet.\n     */\n    public addTo(planet: Planet) {\n        if (!this._planet) {\n            this._assignPlanet(planet);\n        }\n    }\n\n    /**\n     * Removes from planet.\n     * @public\n     * @returns {Layer} -This layer.\n     */\n    public remove(): this {\n        let p = this._planet;\n        if (p) {\n            //TODO: replace to planet\n            for (let i = 0; i < p._layers.length; i++) {\n                if (this.isEqual(p._layers[i])) {\n                    p.renderer && p.renderer.clearPickingColor(this);\n                    p._layers.splice(i, 1);\n                    p.updateVisibleLayers();\n                    this.clear();\n                    p.events.dispatch(p.events.layerremove, this);\n                    this.events.dispatch(this.events.remove, p);\n                    this._planet = null;\n                    this._internalFormat = null;\n                    this.createTexture = null;\n                    return this;\n                }\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Clears layer material.\n     * @virtual\n     */\n    public clear() {\n        if (this._planet) {\n            this._planet._clearLayerMaterial(this);\n        }\n    }\n\n    /**\n     * Returns planet instance.\n     */\n    get planet(): Planet | null {\n        return this._planet;\n    }\n\n    /**\n     * Sets layer attribution text.\n     * @public\n     * @param {string} html - HTML code that represents layer attribution, it could be just a text.\n     */\n    public setAttribution(html: string) {\n        if (this._attribution !== html) {\n            this._attribution = html;\n            this._planet && this._planet.updateAttributionsList();\n        }\n    }\n\n    /**\n     * Gets layer attribution.\n     * @public\n     * @returns {string} Layer attribution\n     */\n    public getAttribution(): string {\n        return this._attribution;\n    }\n\n    /**\n     * Sets height over the ground.\n     * @public\n     * @param {number} height - Layer height.\n     */\n    public setHeight(height: number) {\n        this._height = height;\n        this._planet && this._planet.updateVisibleLayers();\n    }\n\n    /**\n     * Gets layer height.\n     * @public\n     * @returns {number} -\n     */\n    public getHeight(): number {\n        return this._height;\n    }\n\n    /**\n     * Sets z-index.\n     * @public\n     * @param {number} zIndex - Layer z-index.\n     */\n    public setZIndex(zIndex: number) {\n        this._zIndex = zIndex;\n        this._planet && this._planet.updateVisibleLayers();\n    }\n\n    /**\n     * Gets z-index.\n     * @public\n     * @returns {number} -\n     */\n    public getZIndex(): number {\n        return this._zIndex;\n    }\n\n    /**\n     * Set zIndex to the maximal value depend on other layers on the planet.\n     * @public\n     */\n    public bringToFront() {\n        if (this._planet) {\n            let vl = this._planet.visibleTileLayers;\n            let l = vl[vl.length - 1];\n            if (!l.isEqual(this)) {\n                this.setZIndex(l.getZIndex() + 1);\n            }\n        }\n    }\n\n    /**\n     * Returns true if the layer is a base.\n     * @public\n     * @returns {boolean} - Base layer flag.\n     */\n    public isBaseLayer(): boolean {\n        return this._isBaseLayer;\n    }\n\n    /**\n     * Sets base layer type true.\n     * @public\n     * @param {boolean} isBaseLayer -\n     */\n    public setBaseLayer(isBaseLayer: boolean) {\n        this._isBaseLayer = isBaseLayer;\n        if (this._planet) {\n            if (!isBaseLayer && this._planet.baseLayer && this.isEqual(this._planet.baseLayer)) {\n                this._planet.baseLayer = null;\n            }\n            this._planet.updateVisibleLayers();\n        }\n    }\n\n    /**\n     * Sets layer visibility.\n     * @public\n     * @virtual\n     * @param {boolean} visibility - Layer visibility.\n     */\n    public setVisibility(visibility: boolean) {\n        if (visibility !== this._visibility) {\n            this._visibility = visibility;\n            if (this._planet) {\n                if (this._isBaseLayer && visibility) {\n                    this._planet.setBaseLayer(this);\n                }\n                this._planet.updateVisibleLayers();\n                if (visibility && !this._isPreloadDone && !this.isVector) {\n                    this._isPreloadDone = true;\n                    this._preLoad();\n                }\n            }\n            this.events.dispatch(this.events.visibilitychange, this);\n        }\n    }\n\n    protected _forceMaterialApply(segment: Segment) {\n        let pm = segment.materials,\n            m = pm[this.__id];\n\n        if (!m) {\n            m = pm[this.__id] = this.createMaterial(segment);\n        }\n\n        if (!m.isReady) {\n            this._planet!._renderCompleted = false;\n        }\n\n        this.applyMaterial(m, true);\n    }\n\n    public clearMaterial(material: Material) {\n        //empty\n    }\n\n    public loadMaterial(material: Material, forceLoading: boolean = false) {\n        //empty\n    }\n\n    public applyMaterial(m: Material, isForced: boolean = false): NumberArray4 {\n        return [0, 0, 1, 1];\n    }\n\n    protected _preLoadRecursive(node: Node, maxZoom: number) {\n        if (node.segment.tileZoom > maxZoom) {\n            return;\n        }\n        if (this._preLoadZoomLevels.includes(node.segment.tileZoom)) {\n            this._forceMaterialApply(node.segment);\n        }\n\n        for (let i = 0, len = node.nodes.length; i < len; i++) {\n            if (node.nodes[i]) {\n                this._preLoadRecursive(node.nodes[i], maxZoom);\n            }\n        }\n    }\n\n    protected _preLoad() {\n        if (this._planet && this._preLoadZoomLevels.length) {\n\n            let p = this._planet,\n                maxZoom = Math.max(...this._preLoadZoomLevels);\n\n            for (let i = 0, len = p.quadTreeStrategy.quadTreeList.length; i < len; i++) {\n                this._preLoadRecursive(p.quadTreeStrategy.quadTreeList[i], maxZoom);\n            }\n\n        }\n    }\n\n    /**\n     * Gets layer visibility.\n     * @public\n     * @returns {boolean} - Layer visibility.\n     */\n    public getVisibility(): boolean {\n        return this._visibility;\n    }\n\n    /**\n     * Sets visible geographical extent.\n     * @public\n     * @param {Extent} extent - Layer visible geographical extent.\n     */\n    public setExtent(extent: Extent) {\n        let sw = extent.southWest.clone(),\n            ne = extent.northEast.clone();\n\n        if (sw.lat < mercator.MIN_LAT) {\n            sw.lat = mercator.MIN_LAT;\n        }\n\n        if (ne.lat > mercator.MAX_LAT) {\n            ne.lat = mercator.MAX_LAT;\n        }\n\n        this._extent = extent.clone();\n        this._extentMerc = new Extent(sw.forwardMercator(), ne.forwardMercator());\n\n        this._correctFullExtent();\n    }\n\n    /**\n     * Gets layer extent.\n     * @public\n     * @return {Extent} - Layer geodetic extent.\n     */\n    public getExtent(): Extent {\n        return this._extent;\n    }\n\n    /**\n     * Gets layer web-mercator extent.\n     * @public\n     * @return {Extent} - Layer extent.\n     */\n    public getExtentMerc(): Extent {\n        return this._extentMerc;\n    }\n\n\n    /**\n     * Fly extent.\n     * @public\n     */\n    public flyExtent() {\n        this._planet?.flyExtent(this.getExtent());\n    }\n\n    /**\n     * View extent.\n     * @public\n     */\n    public viewExtent() {\n        this._planet?.viewExtent(this.getExtent());\n    }\n\n    /**\n     * Special correction of the whole globe extent.\n     * @protected\n     */\n    protected _correctFullExtent() {\n        // var e = this._extent,\n        //    em = this._extentMerc;\n        // var ENLARGE_MERCATOR_LON = og.mercator.POLE + 50000;\n        // var ENLARGE_MERCATOR_LAT = og.mercator.POLE + 50000;\n        // if (e.northEast.lat === 90.0) {\n        //    em.northEast.lat = ENLARGE_MERCATOR_LAT;\n        // }\n        // if (e.northEast.lon === 180.0) {\n        //    em.northEast.lon = ENLARGE_MERCATOR_LON;\n        // }\n        // if (e.southWest.lat === -90.0) {\n        //    em.southWest.lat = -ENLARGE_MERCATOR_LAT;\n        // }\n        // if (e.southWest.lon === -180.0) {\n        //    em.southWest.lon = -ENLARGE_MERCATOR_LON;\n        // }\n    }\n\n    public get opacity(): number {\n        return this._opacity;\n    }\n\n    public get screenOpacity(): number {\n        return this._fading ? this._fadingOpacity : this._opacity;\n    }\n\n    public _refreshFadingOpacity() {\n        let p = this._planet!;\n        if (\n            this._visibility && p.getViewExtent().overlaps(this._extent) &&\n            p.maxCurrZoom >= this.minZoom &&\n            p.minCurrZoom <= this.maxZoom\n        ) {\n            this._fadingOpacity += this._fadingFactor;\n\n            if (\n                (this._fadingFactor > 0.0 && this._fadingOpacity > this._opacity) ||\n                (this._fadingFactor < 0.0 && this._fadingOpacity < this._opacity)\n            ) {\n                this._fadingOpacity = this._opacity;\n            }\n\n            return false;\n        } else {\n            this._fadingOpacity -= this._fadingFactor;\n            if (this._fadingOpacity <= 0) {\n                this._fadingOpacity = 0.0;\n            }\n            return false;\n        }\n    }\n\n    public createMaterial(segment: Segment): Material {\n        return new Material(segment, this);\n    }\n\n    public redraw() {\n        if (this._planet) {\n\n            this._planet.quadTreeStrategy.clearLayerMaterial(this);\n\n            // this._planet._quadTree.traverseTree((n: Node) => {\n            //         if (n.segment.materials[this.__id]) {\n            //             n.segment.materials[this.__id].clear();\n            //         }\n            //     }\n            // );\n            //\n            // this._planet._quadTreeNorth.traverseTree((n: Node) => {\n            //         if (n.segment.materials[this.__id]) {\n            //             n.segment.materials[this.__id].clear();\n            //         }\n            //     }\n            // );\n            //\n            // this._planet._quadTreeSouth.traverseTree((n: Node) => {\n            //         if (n.segment.materials[this.__id]) {\n            //             n.segment.materials[this.__id].clear();\n            //         }\n            //     }\n            // );\n        }\n    }\n\n    public abortMaterialLoading(material: Material) {\n\n    }\n\n    public abortLoading() {\n\n    }\n}\n\nexport type LayerEventsList = [\n    \"visibilitychange\",\n    \"add\",\n    \"remove\",\n    \"mousemove\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"lclick\",\n    \"rclick\",\n    \"mclick\",\n    \"ldblclick\",\n    \"rdblclick\",\n    \"mdblclick\",\n    \"lup\",\n    \"rup\",\n    \"mup\",\n    \"ldown\",\n    \"rdown\",\n    \"mdown\",\n    \"lhold\",\n    \"rhold\",\n    \"mhold\",\n    \"mousewheel\",\n    \"touchmove\",\n    \"touchstart\",\n    \"touchend\",\n    \"doubletouch\",\n    \"touchleave\",\n    \"touchenter\"\n];\n\nexport const LAYER_EVENTS: LayerEventsList = [\n    /**\n     * Triggered when layer visibility changed.\n     * @event og.Layer#visibilitychange\n     */\n    \"visibilitychange\",\n\n    /**\n     * Triggered when layer has added to the planet.\n     * @event og.Layer#add\n     */\n    \"add\",\n\n    /**\n     * Triggered when layer has removed from the planet.\n     * @event og.Layer#remove\n     */\n    \"remove\",\n\n    /**\n     * Triggered when mouse moves over the layer.\n     * @event og.Layer#mousemove\n     */\n    \"mousemove\",\n\n    /**\n     * Triggered when mouse has entered over the layer.\n     * @event og.Layer#mouseenter\n     */\n    \"mouseenter\",\n\n    /**\n     * Triggered when mouse leaves the layer.\n     * @event og.Layer#mouseenter\n     */\n    \"mouseleave\",\n\n    /**\n     * Mouse left button clicked.\n     * @event og.Layer#lclick\n     */\n    \"lclick\",\n\n    /**\n     * Mouse right button clicked.\n     * @event og.Layer#rclick\n     */\n    \"rclick\",\n\n    /**\n     * Mouse right button clicked.\n     * @event og.Layer#mclick\n     */\n    \"mclick\",\n\n    /**\n     * Mouse left button double click.\n     * @event og.Layer#ldblclick\n     */\n    \"ldblclick\",\n\n    /**\n     * Mouse right button double click.\n     * @event og.Layer#rdblclick\n     */\n    \"rdblclick\",\n\n    /**\n     * Mouse middle button double click.\n     * @event og.Layer#mdblclick\n     */\n    \"mdblclick\",\n\n    /**\n     * Mouse left button up(stop pressing).\n     * @event og.Layer#lup\n     */\n    \"lup\",\n\n    /**\n     * Mouse right button up(stop pressing).\n     * @event og.Layer#rup\n     */\n    \"rup\",\n\n    /**\n     * Mouse middle button up(stop pressing).\n     * @event og.Layer#mup\n     */\n    \"mup\",\n\n    /**\n     * Mouse left button is just pressed down(start pressing).\n     * @event og.Layer#ldown\n     */\n    \"ldown\",\n\n    /**\n     * Mouse right button is just pressed down(start pressing).\n     * @event og.Layer#rdown\n     */\n    \"rdown\",\n\n    /**\n     * Mouse middle button is just pressed down(start pressing).\n     * @event og.Layer#mdown\n     */\n    \"mdown\",\n\n    /**\n     * Mouse left button is pressing.\n     * @event og.Layer#lhold\n     */\n    \"lhold\",\n\n    /**\n     * Mouse right button is pressing.\n     * @event og.Layer#rhold\n     */\n    \"rhold\",\n\n    /**\n     * Mouse middle button is pressing.\n     * @event og.Layer#mhold\n     */\n    \"mhold\",\n\n    /**\n     * Mouse wheel is rotated.\n     * @event og.Layer#mousewheel\n     */\n    \"mousewheel\",\n\n    /**\n     * Triggered when touching moves over the layer.\n     * @event og.Layer#touchmove\n     */\n    \"touchmove\",\n\n    /**\n     * Triggered when layer begins to touch.\n     * @event og.Layer#touchstart\n     */\n    \"touchstart\",\n\n    /**\n     * Triggered when layer has finished touching.\n     * @event og.Layer#touchend\n     */\n    \"touchend\",\n\n    /**\n     * Triggered layer has double touched.\n     * @event og.Layer#doubletouch\n     */\n    \"doubletouch\",\n\n    /**\n     * Triggered when touching leaves layer borders.\n     * @event og.Layer#touchleave\n     */\n    \"touchleave\",\n\n    /**\n     * Triggered when touch enters over the layer.\n     * @event og.Layer#touchenter\n     */\n    \"touchenter\"\n];\n\nexport {Layer};\n","import * as quadTree from \"../quadTree/quadTree\";\nimport {EventCallback, EventsHandler} from \"../Events\";\nimport {ILayerParams, Layer, LayerEventsList} from \"./Layer\";\nimport {Material} from \"../layer/Material\";\nimport {NumberArray4} from \"../math/Vec4\";\nimport {Planet} from \"../scene/Planet\";\n\ntype ApplyImageFunc = (material: HTMLCanvasElement | ImageBitmap | HTMLImageElement) => void;\ntype DrawTileCallback = (material: Material, applyImage: ApplyImageFunc) => void;\n\nexport interface ICanvasTilesParams extends ILayerParams {\n    drawTile: DrawTileCallback;\n    animated?: boolean;\n    minNativeZoom?: number;\n    maxNativeZoom?: number;\n}\n\ntype CanvasTilesEventsList = [\n    \"load\",\n    \"loadend\"\n];\n\ntype CanvasTilesEventsType = EventsHandler<CanvasTilesEventsList> & EventsHandler<LayerEventsList>;\n\nconst CANVASTILES_EVENTS: CanvasTilesEventsList = [\n    /**\n     * Triggered when current tile image has loaded before rendering.\n     * @event og.layer.CanvasTiles#load\n     */\n    \"load\",\n\n    /**\n     * Triggered when all tiles have loaded or loading has stopped.\n     * @event og.layer.CanvasTiles#loadend\n     */\n    \"loadend\"\n];\n\n/**\n * Layer used to rendering each tile as a separate canvas object.\n * @class\n * @extends {Layer}\n * @param {String} [name=\"noname\"] - Layer name.\n * @param {ICanvasTilesParams} options:\n * @param {number} [options.opacity=1.0] - Layer opacity.\n * @param {number} [options.minZoom=0] - Minimal visibility zoom level.\n * @param {number} [options.maxZoom=0] - Maximal visibility zoom level.\n * @param {string} [options.attribution] - Layer attribution that displayed in the attribution area on the screen.\n * @param {boolean} [options.isBaseLayer=false] - Base layer flag.\n * @param {boolean} [options.visibility=true] - Layer visibility.\n * @param {DrawTileCallback} options.drawTile - Draw tile callback.\n * @fires EventsHandler<CanvasTilesEventsList>#load\n * @fires EventsHandler<CanvasTilesEventsList>#loadend\n */\nclass CanvasTiles extends Layer {\n\n    static MAX_REQUESTS: number = 20;\n    static __requestsCounter: number = 0\n\n    public override events: CanvasTilesEventsType;\n\n    public animated: boolean;\n\n    public minNativeZoom: number;\n    public maxNativeZoom: number;\n\n    /**\n     * Current creating tiles counter.\n     * @protected\n     * @type {number}\n     */\n    protected _counter: number;\n\n    /**\n     * Tile pending queue that waiting for create.\n     * @protected\n     * @type {Material[]}\n     */\n    protected _pendingsQueue: Material[]; // new og.QueueArray();\n\n    /**\n     * Draw tile callback.\n     * @type {DrawTileCallback}\n     * @public\n     */\n    public drawTile: DrawTileCallback;\n\n    protected _onLoadend_: EventCallback | null;\n\n\n    constructor(name: string | null, options: ICanvasTilesParams) {\n        super(name, options);\n\n        //@ts-ignore\n        this.events = this.events.registerNames(CANVASTILES_EVENTS);\n\n        this.animated = options.animated || false;\n\n        this.minNativeZoom = options.minNativeZoom || 0;\n        this.maxNativeZoom = options.maxNativeZoom || 100;\n\n        this._counter = 0;\n\n        this._pendingsQueue = []; // new og.QueueArray();\n\n        this.drawTile = options.drawTile;\n\n        this._onLoadend_ = null;\n    }\n\n    public override addTo(planet: Planet) {\n        this._onLoadend_ = this._onLoadend.bind(this);\n        this.events.on(\"loadend\", this._onLoadend_!, this);\n        return super.addTo(planet);\n    }\n\n    public override remove() {\n        this.events.off(\"loadend\", this._onLoadend_);\n        this._onLoadend_ = null;\n        return super.remove();\n    }\n\n    public _onLoadend() {\n        if (this._planet && this._planet._terrainCompletedActivated) {\n            this._planet.events.dispatch(this._planet.events.layerloadend, this);\n        }\n    }\n\n    public override get instanceName(): string {\n        return \"CanvasTiles\";\n    }\n\n    public override get isIdle() {\n        return super.isIdle && this._counter === 0;\n    }\n\n    /**\n     * Abort loading tiles.\n     * @public\n     */\n    public override abortLoading() {\n        //const q = this._pendingsQueue;\n        // for (let i = q._shiftIndex + 1; i < q._popIndex + 1; i++) {\n        //     if (q._array[i]) {\n        //         this.abortMaterialLoading(q._array[i]);\n        //     }\n        // }\n        // this._pendingsQueue.clear();\n        // for (let i = 0; i < q.length; i++) {\n        //     this.abortMaterialLoading(q[i]);\n        // }\n        this._pendingsQueue.forEach((qi: Material) => {\n            this.abortMaterialLoading(qi);\n        })\n        this._pendingsQueue = [];\n    }\n\n    /**\n     * Sets layer visibility.\n     * @public\n     * @param {boolean} visibility - Layer visibility.\n     */\n    public override setVisibility(visibility: boolean) {\n        if (visibility !== this._visibility) {\n            super.setVisibility(visibility);\n\n            if (!visibility) {\n                this.abortLoading();\n            }\n        }\n    }\n\n    /**\n     * Start to load tile material.\n     * @public\n     * @virtual\n     * @param {Material} material -\n     */\n    public override loadMaterial(material: Material) {\n        let seg = material.segment;\n\n        if (this._isBaseLayer) {\n            material.texture = seg._isNorth ? seg.planet.solidTextureOne : seg.planet.solidTextureTwo;\n        } else {\n            material.texture = seg.planet.transparentTexture;\n        }\n\n        if (this._planet!.layerLock.isFree() || material.segment.tileZoom < 2) {\n            material.isReady = false;\n            material.isLoading = true;\n            if (CanvasTiles.__requestsCounter >= CanvasTiles.MAX_REQUESTS && this._counter) {\n                this._pendingsQueue.push(material);\n            } else {\n                this._exec(material);\n            }\n        }\n    }\n\n    /**\n     * Loads material image and apply it to the planet segment.\n     * @protected\n     * @param {Material} material - Loads material image.\n     */\n    protected _exec(material: Material) {\n        CanvasTiles.__requestsCounter++;\n        this._counter++;\n        const e = this.events.load!;\n        if (e.handlers.length) {\n            this.events.dispatch(e, material);\n        }\n        requestAnimationFrame(() => {\n            this.drawTile(material, (canvas: HTMLCanvasElement | ImageBitmap | HTMLImageElement) => {\n                this._counter--;\n                CanvasTiles.__requestsCounter--;\n                this._correctCounter();\n                if (material.isLoading) {\n                    material.applyImage(canvas);\n                }\n                this._dequeueRequest();\n            });\n        });\n    }\n\n    protected _correctCounter() {\n        if (this._counter < 0) this._counter = 0;\n        if (CanvasTiles.__requestsCounter < 0) CanvasTiles.__requestsCounter = 0;\n    }\n\n    /**\n     * Abort exact material loading.\n     * @public\n     * @param {Material} material - Segment material.\n     */\n    public override abortMaterialLoading(material: Material) {\n        if (material.isLoading) {\n            this._counter--;\n            CanvasTiles.__requestsCounter--;\n            this._correctCounter();\n            this._dequeueRequest();\n        }\n        material.isLoading = false;\n        material.isReady = false;\n    }\n\n    protected _dequeueRequest() {\n        if (this._pendingsQueue.length) {\n            if (CanvasTiles.__requestsCounter < CanvasTiles.MAX_REQUESTS) {\n                const pmat = this._whilePendings();\n                if (pmat) {\n                    this._exec(pmat);\n                }\n            }\n        } else if (this._counter === 0 && this._planet && this._planet._terrainCompletedActivated) {\n            this.events.dispatch(this.events.loadend);\n        }\n    }\n\n    protected _whilePendings(): Material | null {\n        while (this._pendingsQueue.length) {\n            const pmat = this._pendingsQueue.pop();\n            if (pmat && pmat.segment && pmat.segment.node) {\n                if (pmat.segment.initialized && pmat.segment.node.getState() === quadTree.RENDERING) {\n                    return pmat;\n                }\n                pmat.isLoading = false;\n            }\n        }\n        return null;\n    }\n\n    public override applyMaterial(material: Material): NumberArray4 {\n        if (material.isReady) {\n\n            // IMPORTANT!\n            // Animated doesn't work withMaxNativeZoom\n            // It could be fixed with call drawTile method only for parent\n            // material (which is rendered on the current segment material),\n            // just for one renderer frame\n            if ((material.layer as CanvasTiles).animated) {\n                requestAnimationFrame(() => {\n                    this.drawTile(material, function (canvas) {\n                        material.applyImage(canvas);\n                    });\n                });\n            }\n\n            return material.texOffset;\n\n        } else if (material.segment.tileZoom < this.minNativeZoom) {\n            material.textureNotExists();\n        } else {\n\n            let segment = material.segment;\n            let pn = segment.node,\n                parentTextureExists = false;\n            let maxNativeZoom = (material.layer as CanvasTiles).maxNativeZoom;\n\n            if (segment.passReady && !material.isLoading && segment.tileZoom <= maxNativeZoom) {\n                this.loadMaterial(material);\n            }\n\n            let mId = this._id;\n            let psegm = material;\n            while (pn.parentNode) {\n                pn = pn.parentNode;\n                psegm = pn.segment.materials[mId];\n                if (psegm && psegm.textureExists) {\n                    parentTextureExists = true;\n                    break;\n                }\n            }\n\n            if (segment.passReady) {\n                if (pn.segment.tileZoom === maxNativeZoom) {\n                    if (segment.tileZoom > maxNativeZoom) {\n                        material.textureNotExists();\n                    }\n                } else if (pn.segment.tileZoom < maxNativeZoom) {\n\n                    let pn = segment.node;\n                    while (pn.segment.tileZoom > maxNativeZoom) {\n                        pn = pn.parentNode!;\n                    }\n\n                    let pnm = pn.segment.materials[mId];\n                    if (pnm) {\n                        !pnm.isLoading && !pnm.isReady && this.loadMaterial(pnm);\n                    } else {\n                        pnm = pn.segment.materials[material.layer._id] = material.layer.createMaterial(\n                            pn.segment\n                        );\n                        this.loadMaterial(pnm);\n                    }\n                }\n            }\n\n            if (parentTextureExists) {\n\n                //\n                // Animated doesn't work withMaxNativeZoom\n                //\n                if ((material.layer as CanvasTiles).animated) {\n                    requestAnimationFrame(() => {\n                        this.drawTile(material, function (canvas) {\n                            material.applyImage(canvas);\n                        });\n                    });\n                }\n\n                material.appliedNodeId = pn.nodeId;\n                material.texture = psegm.texture;\n                let dZ2 = 1.0 / (2 << (segment.tileZoom - pn.segment.tileZoom - 1));\n                material.texOffset[0] = segment.tileX * dZ2 - pn.segment.tileX;\n                material.texOffset[1] = segment.tileY * dZ2 - pn.segment.tileY;\n                material.texOffset[2] = dZ2;\n                material.texOffset[3] = dZ2;\n            } else {\n                material.texture = segment.planet.transparentTexture;\n                material.texOffset[0] = 0.0;\n                material.texOffset[1] = 0.0;\n                material.texOffset[2] = 1.0;\n                material.texOffset[3] = 1.0;\n            }\n        }\n\n        return material.texOffset;\n    }\n\n    public override clearMaterial(material: Material) {\n        if (material.isReady) {\n            material.isReady = false;\n            if (material.textureExists && material.texture && !material.texture.default) {\n                material.segment.handler.gl!.deleteTexture(material.texture);\n                material.texture = null;\n            }\n        }\n\n        this.abortMaterialLoading(material);\n        material.isLoading = false;\n        material.textureExists = false;\n\n        //@ts-ignore\n        material.layer = null;\n        //@ts-ignore\n        material.segment = null;\n\n        // if (material.image) {\n        //     material.image.src = \"\";\n        //     material.image = null;\n        // }\n    }\n}\n\nexport {CanvasTiles};\n","import {Control, IControlParams} from \"./Control\";\nimport {Dialog} from \"../ui/Dialog\";\nimport {ToggleButton} from \"../ui/ToggleButton\";\nimport {GlobusTerrain} from \"../terrain/GlobusTerrain\";\nimport {CanvasTiles} from \"../layer/CanvasTiles\";\n\nconst ICON_LOCK_BUTTON_SVG = `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\n<svg fill=\"#000000\" width=\"800px\" height=\"800px\" viewBox=\"-7.5 0 32 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n<title>lock</title>\n<path d=\"M14.625 15.156h2.094c0.281 0 0.5 0.25 0.5 0.531v11c0 0.281-0.219 0.5-0.5 0.5h-16.219c-0.281 0-0.5-0.219-0.5-0.5v-11c0-0.281 0.219-0.531 0.5-0.531h2.031v-5.125c0-2.875 1.844-5.25 4.688-5.25h2.688c2.875 0 4.719 2.375 4.719 5.25v5.125zM5.188 15.156h6.813v-4.875c0-1.594-1.313-2.938-2.938-2.938h-0.969c-1.594 0-2.906 1.344-2.906 2.938v4.875zM7.156 24h2.906l-0.719-3.156c0.5-0.25 0.844-0.781 0.844-1.375 0-0.906-0.719-1.594-1.594-1.594s-1.563 0.688-1.563 1.594c0 0.594 0.344 1.125 0.844 1.375z\"></path>\n</svg>`;\n\nconst ICON_BUTTON_SVG = `<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg fill=\"#000000\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n\\t width=\"800px\" height=\"800px\" viewBox=\"0 0 932.179 932.179\"\n\\t xml:space=\"preserve\">\n<g>\n\\t<path d=\"M61.2,341.538c4.9,16.8,11.7,33,20.3,48.2l-24.5,30.9c-8,10.1-7.1,24.5,1.9,33.6l42.2,42.2c9.1,9.1,23.5,9.899,33.6,1.899\n\\t\\tl30.7-24.3c15.8,9.101,32.6,16.2,50.1,21.2l4.6,39.5c1.5,12.8,12.3,22.4,25.1,22.4h59.7c12.8,0,23.6-9.601,25.1-22.4l4.4-38.1\n\\t\\tc18.8-4.9,36.8-12.2,53.7-21.7l29.7,23.5c10.1,8,24.5,7.1,33.6-1.9l42.2-42.2c9.1-9.1,9.9-23.5,1.9-33.6l-23.1-29.3\n\\t\\tc9.6-16.601,17.1-34.3,22.1-52.8l35.6-4.1c12.801-1.5,22.4-12.3,22.4-25.1v-59.7c0-12.8-9.6-23.6-22.4-25.1l-35.1-4.1\n\\t\\tc-4.801-18.3-12-35.8-21.199-52.2l21.6-27.3c8-10.1,7.1-24.5-1.9-33.6l-42.1-42.1c-9.1-9.1-23.5-9.9-33.6-1.9l-26.5,21\n\\t\\tc-17.2-10.1-35.601-17.8-54.9-23l-4-34.3c-1.5-12.8-12.3-22.4-25.1-22.4h-59.7c-12.8,0-23.6,9.6-25.1,22.4l-4,34.3\n\\t\\tc-19.8,5.3-38.7,13.3-56.3,23.8l-27.5-21.8c-10.1-8-24.5-7.1-33.6,1.9l-42.2,42.2c-9.1,9.1-9.9,23.5-1.9,33.6l23,29.1\n\\t\\tc-9.2,16.6-16.2,34.3-20.8,52.7l-36.8,4.2c-12.8,1.5-22.4,12.3-22.4,25.1v59.7c0,12.8,9.6,23.6,22.4,25.1L61.2,341.538z\n\\t\\t M277.5,180.038c54.4,0,98.7,44.3,98.7,98.7s-44.3,98.7-98.7,98.7c-54.399,0-98.7-44.3-98.7-98.7S223.1,180.038,277.5,180.038z\"/>\n\\t<path d=\"M867.699,356.238l-31.5-26.6c-9.699-8.2-24-7.8-33.199,0.9l-17.4,16.3c-14.699-7.1-30.299-12.1-46.4-15l-4.898-24\n\\t\\tc-2.5-12.4-14-21-26.602-20l-41.1,3.5c-12.6,1.1-22.5,11.4-22.9,24.1l-0.799,24.4c-15.801,5.7-30.701,13.5-44.301,23.3\n\\t\\tl-20.799-13.8c-10.602-7-24.701-5-32.9,4.7l-26.6,31.7c-8.201,9.7-7.801,24,0.898,33.2l18.201,19.399\n\\t\\tc-6.301,14.2-10.801,29.101-13.4,44.4l-26,5.3c-12.4,2.5-21,14-20,26.601l3.5,41.1c1.1,12.6,11.4,22.5,24.1,22.9l28.1,0.899\n\\t\\tc5.102,13.4,11.801,26.101,19.9,38l-15.699,23.7c-7,10.6-5,24.7,4.699,32.9l31.5,26.6c9.701,8.2,24,7.8,33.201-0.9l20.6-19.3\n\\t\\tc13.5,6.3,27.699,11,42.299,13.8l5.701,28.2c2.5,12.4,14,21,26.6,20l41.1-3.5c12.6-1.1,22.5-11.399,22.9-24.1l0.9-27.601\n\\t\\tc15-5.3,29.199-12.5,42.299-21.399l22.701,15c10.6,7,24.699,5,32.9-4.7l26.6-31.5c8.199-9.7,7.799-24-0.9-33.2l-18.301-19.399\n\\t\\tc6.701-14.2,11.602-29.2,14.4-44.601l25-5.1c12.4-2.5,21-14,20-26.601l-3.5-41.1c-1.1-12.6-11.4-22.5-24.1-22.9l-25.1-0.8\n\\t\\tc-5.201-14.6-12.201-28.399-20.9-41.2l13.699-20.6C879.4,378.638,877.4,364.438,867.699,356.238z M712.801,593.837\n\\t\\tc-44.4,3.801-83.602-29.3-87.301-73.699c-3.801-44.4,29.301-83.601,73.699-87.301c44.4-3.8,83.602,29.301,87.301,73.7\n\\t\\tC790.301,550.938,757.199,590.138,712.801,593.837z\"/>\n\\t<path d=\"M205,704.438c-12.6,1.3-22.3,11.899-22.4,24.6l-0.3,25.3c-0.2,12.7,9.2,23.5,21.8,25.101l18.6,2.399\n\\t\\tc3.1,11.301,7.5,22.101,13.2,32.301l-12,14.8c-8,9.899-7.4,24.1,1.5,33.2l17.7,18.1c8.9,9.1,23.1,10.1,33.2,2.3l14.899-11.5\n\\t\\tc10.5,6.2,21.601,11.101,33.2,14.5l2,19.2c1.3,12.6,11.9,22.3,24.6,22.4l25.301,0.3c12.699,0.2,23.5-9.2,25.1-21.8l2.3-18.2\n\\t\\tc12.601-3.101,24.601-7.8,36-14l14,11.3c9.9,8,24.101,7.4,33.201-1.5l18.1-17.7c9.1-8.899,10.1-23.1,2.301-33.2L496.6,818.438\n\\t\\tc6.6-11,11.701-22.7,15.201-35l16.6-1.7c12.6-1.3,22.299-11.9,22.4-24.6l0.299-25.301c0.201-12.699-9.199-23.5-21.799-25.1\n\\t\\tl-16.201-2.1c-3.1-12.2-7.699-24-13.699-35l10.1-12.4c8-9.9,7.4-24.1-1.5-33.2l-17.699-18.1c-8.9-9.101-23.102-10.101-33.201-2.3\n\\t\\tl-12.101,9.3c-11.399-6.9-23.6-12.2-36.399-15.8l-1.601-15.7c-1.3-12.601-11.899-22.3-24.6-22.4l-25.3-0.3\n\\t\\tc-12.7-0.2-23.5,9.2-25.101,21.8l-2,15.601c-13.199,3.399-25.899,8.6-37.699,15.399l-12.5-10.2c-9.9-8-24.101-7.399-33.201,1.5\n\\t\\tl-18.2,17.801c-9.1,8.899-10.1,23.1-2.3,33.199l10.7,13.801c-6.2,11-11.1,22.699-14.3,35L205,704.438z M368.3,675.837\n\\t\\tc36.3,0.4,65.399,30.301,65,66.601c-0.4,36.3-30.301,65.399-66.601,65c-36.3-0.4-65.399-30.3-65-66.601\n\\t\\tC302.1,704.538,332,675.438,368.3,675.837z\"/>\n</g>\n</svg>`;\n\nconst ICON_CANVASTILES_SVG = `<?xml version=\"1.0\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n    <path d=\"M 4 4 L 4 8 L 8 8 L 8 4 L 4 4 z M 10 4 L 10 8 L 14 8 L 14 4 L 10 4 z M 16 4 L 16 8 L 20 8 L 20 4 L 16 4 z M 4 10 L 4 14 L 8 14 L 8 10 L 4 10 z M 10 10 L 10 14 L 14 14 L 14 10 L 10 10 z M 16 10 L 16 14 L 20 14 L 20 10 L 16 10 z M 4 16 L 4 20 L 8 20 L 8 16 L 4 16 z M 10 16 L 10 20 L 14 20 L 14 16 L 10 16 z M 16 16 L 16 20 L 20 20 L 20 16 L 16 16 z\"/>\n</svg>`;\n\nexport interface IDebugInfoWatch {\n    label: string;\n    valEl?: HTMLElement;\n    frame?: () => string | number;\n}\n\ninterface IDebugInfoParams extends IControlParams {\n    watch?: IDebugInfoWatch[];\n}\n\nexport class DebugInfo extends Control {\n    public el: HTMLElement | null;\n    protected _watch: IDebugInfoWatch[];\n    protected _toggleBtn: ToggleButton;\n    protected _dialog: Dialog<null>;\n\n    protected _canvasTiles: CanvasTiles;\n\n    constructor(options: IDebugInfoParams = {}) {\n        if (!options.name || options.name === \"\") {\n            options.name = \"DebugInfo\";\n        }\n        super(options);\n        this.el = null;\n        this._watch = options.watch || [];\n\n        this._toggleBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-debuginfo_button\"],\n            icon: ICON_BUTTON_SVG\n        });\n\n        this._dialog = new Dialog({\n            title: \"Debug Info\",\n            visible: false,\n            useHide: true,\n            top: 120,\n            left: 60,\n            width: 480\n        });\n\n        this._dialog.events.on(\"visibility\", (v: boolean) => {\n            this._toggleBtn.setActive(v);\n        });\n\n        this._canvasTiles = new CanvasTiles(\"Tile grid\", {\n            visibility: true,\n            isBaseLayer: false,\n            hideInLayerSwitcher: true,\n            drawTile: function (material: any, applyCanvas: any) {\n\n                //\n                // This is important create canvas here!\n                //\n                let cnv = document.createElement(\"canvas\");\n                let ctx = cnv.getContext(\"2d\")!;\n                cnv.width = 256;\n                cnv.height = 256;\n\n                //Clear canvas\n                ctx.clearRect(0, 0, cnv.width, cnv.height);\n\n                //Draw border\n                ctx.beginPath();\n                ctx.rect(0, 0, cnv.width, cnv.height);\n                ctx.lineWidth = 2;\n                ctx.strokeStyle = 'black';\n                ctx.stroke();\n\n                let size;\n\n                // if (material.segment.isPole) {\n                //     let ext = material.segment.getExtentLonLat();\n                //\n                //     ctx.fillStyle = 'black';\n                //     ctx.font = 'normal ' + 29 + 'px Verdana';\n                //\n                //     ctx.textAlign = 'center';\n                //     ctx.fillText(`${ext.northEast.lon.toFixed(3)} ${ext.northEast.lat.toFixed(3)}`, cnv.width / 2, cnv.height / 2 + 20);\n                //     ctx.fillText(`${ext.southWest.lon.toFixed(3)} ${ext.southWest.lat.toFixed(3)}`, cnv.width / 2, cnv.height / 2 - 20);\n                // } else {\n                //Draw text\n                if (material.segment.tileZoom > 14) {\n                    size = \"26\";\n                } else {\n                    size = \"32\";\n                }\n                ctx.fillStyle = 'black';\n                ctx.font = 'normal ' + size + 'px Verdana';\n                ctx.textAlign = 'center';\n                ctx.fillText(material.segment.tileX + \",\" + material.segment.tileY + \",\" + material.segment.tileZoom, cnv.width / 2, cnv.height / 2);\n                //}\n\n                //Draw canvas tile\n                applyCanvas(cnv);\n            }\n        });\n    }\n\n    public addWatches(watches: IDebugInfoWatch[]) {\n        for (let i = 0; i < watches.length; i++) {\n            this.addWatch(watches[i]);\n        }\n    }\n\n    public addWatch(watch: IDebugInfoWatch) {\n        this._watch.push(watch);\n        let watchEl = document.createElement(\"div\");\n        watchEl.classList.add(\"og-watch-line\");\n        watchEl.innerHTML = `<div class=\"og-watch-label\">${watch.label}</div><div class=\"og-watch-value\"></div>`;\n        watch.valEl = watchEl.querySelector<HTMLElement>(\".og-watch-value\")!;\n        this.el!.appendChild(watchEl);\n    }\n\n    public override oninit() {\n\n        this._toggleBtn.appendTo(this.renderer!.div!);\n        this._dialog.appendTo(this.renderer!.div!);\n        this._toggleBtn.events.on(\"change\", (isActive: boolean) => {\n            this._dialog.setVisibility(isActive);\n        });\n\n        this.el = document.createElement(\"div\");\n        this.el.className = \"og-debug-info\";\n\n        let $controls = document.createElement(\"div\");\n        $controls.classList.add(\"og-debuginfo_controls\");\n        this.el.appendChild($controls);\n\n        let temp = this._watch;\n        this._watch = [];\n        for (let i = 0; i < temp.length; i++) {\n            this.addWatch(temp[i]);\n        }\n        this._dialog.container?.appendChild(this.el);\n        this.renderer!.events.on(\"draw\", this._frame, this);\n\n        let p = this.planet!;\n\n        if (p) {\n            this.addWatches([\n                {\n                    label: \"Nodes count\",\n                    frame: () => p!._renderedNodes.length\n                },\n                {\n                    label: \"Planet._fadingNodes\",\n                    frame: () => p._fadingNodes.size\n                },\n                {\n                    label: \"createdNodes\",\n                    frame: () => p._createdNodesCount\n                },\n                {\n                    label: \"indexesCache\",\n                    frame: () => p._indexesCacheToRemoveCounter\n                },\n                {\n                    label: \"distBeforeMemClear\",\n                    frame: () => Math.round(p._distBeforeMemClear)\n                },\n                {\n                    label: \"maxZoom/minZoom\",\n                    frame: () => p.maxCurrZoom + \" / \" + p?.minCurrZoom\n                },\n                {\n                    label: \"viewExtent\",\n                    frame: () => p.getViewExtent().toString()\n                },\n                {\n                    label: \"height/alt (km)\",\n                    frame: () =>\n                        `<div style=\"width:190px\">${(p.camera._lonLat.height / 1000.0).toFixed(2) +\n                        \" / \" +\n                        (p.camera.getAltitude() / 1000.0).toFixed(2)}</div>`\n                },\n                {\n                    label: \"cam.slope\",\n                    frame: () => p.camera.slope.toFixed(3)\n                },\n                {\n                    label: \"lodSize\",\n                    frame: () => Math.round(p.lodSize)\n                },\n                {\n                    label: \"deltaTime/FPS\",\n                    frame: () =>\n                        `<div style=\"width:70px\"><div style=\"width:20px; float: left;\">\n                        ${Math.round(p.renderer!.handler.deltaTime)}\n                        </div> <div style=\"float: left\">\n                        ${Math.round(1000.0 / p.renderer!.handler.deltaTime)}\n                        </div></div>`\n                },\n                {\n                    label: \"-------------------------\"\n                },\n                {\n                    label: \"_renderCompleted / renderCompletedActivated\",\n                    frame: () => `${p._renderCompleted} / ${p._renderCompletedActivated}`\n                },\n                {\n                    label: \"_terrainCompleted / terrainCompletedActivated\",\n                    frame: () => `${p._terrainCompleted} / ${p._terrainCompletedActivated}`\n                },\n                {\n                    label: \"PlainWorker\",\n                    frame: () => p._plainSegmentWorker.pendingQueue.length\n                },\n                {\n                    label: \"TileLoader\",\n                    frame: () => `${p._tileLoader.loading} ${p._tileLoader.queue.length}`\n                },\n                {\n                    label: \"TerrainLoader\",\n                    frame: () => {\n                        if (p.terrain && !p.terrain.isEmpty) {\n                            return `${(p.terrain as GlobusTerrain).loader.loading}  ${(p.terrain as GlobusTerrain).loader.queue.length}`\n                        }\n                        return \"\";\n                    }\n                },\n                {\n                    label: \"TerrainWorker\",\n                    frame: () => p._terrainWorker.pendingQueue.length\n                },\n                {\n                    label: \"NormalMapCreator\",\n                    frame: () => p._normalMapCreator.queueSize\n                },\n                {\n                    label: \"VectorTileCreator\",\n                    frame: () => p._vectorTileCreator.queueSize\n                }\n            ]);\n        }\n\n        let lockTreeBtn = new ToggleButton({\n            classList: [\"og-debuginfo_controls-button\"],\n            icon: ICON_LOCK_BUTTON_SVG,\n            title: \"Lock/Unlock quad tree\"\n        });\n        lockTreeBtn.appendTo($controls);\n\n        lockTreeBtn.events.on(\"change\", (isActive: boolean) => {\n            if (isActive) {\n                p.lockQuadTree();\n            } else {\n                p.unlockQuadTree();\n            }\n        });\n\n        let canvasTilesBtn = new ToggleButton({\n            classList: [\"og-debuginfo_controls-button\"],\n            icon: ICON_CANVASTILES_SVG,\n            title: \"Show/Hide grid\"\n        });\n        canvasTilesBtn.appendTo($controls);\n\n        canvasTilesBtn.events.on(\"change\", (isActive: boolean) => {\n            if (isActive) {\n                this.planet!.addLayer(this._canvasTiles);\n            } else {\n                this._canvasTiles.remove();\n            }\n        });\n    }\n\n    protected _frame() {\n        this._watch.forEach((w) => {\n            if (w.valEl) {\n                w.valEl.innerHTML = w.frame ? String(w.frame()) : \"\";\n            }\n        });\n    }\n}","import {ToggleButton} from \"./ToggleButton\";\nimport {createEvents, EventsHandler} from '../Events';\n\ninterface IButtonGroupParams {\n    buttons?: ToggleButton[];\n}\n\ntype ButtonGroupEventsList = [\"change\"];\n\nconst BUTTONGROUP_EVENTS: ButtonGroupEventsList = [\"change\"];\n\nclass ButtonGroup {\n\n    public events: EventsHandler<ButtonGroupEventsList>;\n\n    protected _buttons: ToggleButton[];\n\n    constructor(options: IButtonGroupParams = {}) {\n\n        this.events = createEvents<ButtonGroupEventsList>(BUTTONGROUP_EVENTS);\n\n        this._buttons = options.buttons || [];\n\n        for (let i = 0; i < this._buttons.length; i++) {\n            this._bindButton(this._buttons[i]);\n        }\n    }\n\n    protected _bindButton(button: ToggleButton) {\n        button.events.on(\"change\", this._onChange);\n    }\n\n    public add(button: ToggleButton) {\n        this._buttons.push(button);\n        this._bindButton(button);\n    }\n\n    protected _onChange = (isActive: boolean, btn: ToggleButton) => {\n        if (isActive) {\n            btn.preventClick = true;\n            for (let i = 0; i < this._buttons.length; i++) {\n                let bi = this._buttons[i];\n                if (!bi.isEqual(btn)) {\n                    bi.setActive(false);\n                    bi.preventClick = false;\n                }\n            }\n            this.events.dispatch(this.events.change, btn);\n        }\n    }\n\n    public remove(button: ToggleButton) {\n        for (let i = 0; i < this._buttons.length; i++) {\n            if (this._buttons[i].isEqual(button)) {\n                this._buttons.splice(i);\n                button.events.off(\"change\", this._onChange);\n                return;\n            }\n        }\n    }\n}\n\nexport {ButtonGroup}","export class BaseWorker<T> {\n    protected _sourceId: number;\n    protected _source: Map<number, T>;\n    protected _pendingQueue: T[];\n    protected _numWorkers: number;\n    protected _workerQueue: Worker[];\n\n    constructor(numWorkers: number = 2, program?: string) {\n        this._sourceId = 0;\n        this._source = new Map<number, T>();\n        this._pendingQueue = [];\n        this._numWorkers = numWorkers;\n        this._workerQueue = [];\n        if (program) {\n            this.setProgram(program);\n        }\n    }\n\n    public check() {\n        if (this._pendingQueue.length) {\n            this.make(this._pendingQueue.pop()!);\n        }\n    }\n\n    public setProgram(program: string) {\n        let p = new Blob([program], {type: \"application/javascript\"});\n        for (let i = 0; i < this._numWorkers; i++) {\n            let w = new Worker(URL.createObjectURL(p));\n            w.onmessage = (e: MessageEvent) => {\n                this._onMessage(e);\n                this._workerQueue && this._workerQueue.unshift(e.target as Worker);\n                this.check();\n            }\n            this._workerQueue.push(w);\n        }\n    }\n\n    public make(data: T) {\n    }\n\n    protected _onMessage(e: MessageEvent) {\n\n    }\n\n    public destroy() {\n        for (let i = 0; i < this._workerQueue.length; i++) {\n            const w = this._workerQueue[i];\n            w.onmessage = null;\n            w.terminate();\n        }\n        //@ts-ignore\n        this._pendingQueue = null;\n        //@ts-ignore\n        this._workerQueue = null;\n    }\n\n    public get pendingQueue(): T[] {\n        return this._pendingQueue;\n    }\n}","import {BaseWorker} from \"../utils/BaseWorker\";\nimport {Label} from \"../entity/Label\";\nimport {LabelHandler} from \"../entity/LabelHandler\";\n\nexport const LOCK_UPDATE = -2;\nexport const LOCK_FREE = -1;\n\ninterface LabelInfo {\n    label: Label;\n    handler: LabelHandler;\n}\n\nclass LabelWorker extends BaseWorker<LabelInfo> {\n\n    constructor(numWorkers: number = 4) {\n        super(numWorkers, LABEL_PROGRAM);\n    }\n\n    protected override _onMessage(e: MessageEvent) {\n        let s = this._source.get(e.data.id)!;\n\n        if (s.label._lockId === LOCK_UPDATE) {\n            requestAnimationFrame(() => {\n                this.make({handler: s.handler, label: s.label});\n            });\n        } else {\n            s.handler.workerCallback(e.data, s.label);\n        }\n\n        this._source.delete(e.data.id);\n    }\n\n\n    public override make(data: LabelInfo) {\n        let label = data.label,\n            handler = data.handler;\n\n        if (handler._entityCollection) {\n            let labelData = label.serializeWorkerData(this._sourceId);\n            if (labelData) {\n                if (this._workerQueue.length) {\n                    let w = this._workerQueue.pop()!;\n                    this._source.set(this._sourceId, data);\n                    label._lockId = this._sourceId;\n                    this._sourceId++;\n                    w.postMessage({\n                        labelData: labelData\n                    }, [\n                        labelData.buffer,\n                    ]);\n                } else {\n                    this._pendingQueue.push(data);\n                }\n            }\n        }\n    }\n}\n\nconst LABEL_PROGRAM = `'use strict';\n\n    function concatTypedArrays(dest, index, source) {\n        let len = source.length,\n            offset = index * len;\n        for(let i = 0; i < len; i++) {\n            dest[offset + i] = source[i];\n        }\n    }\n\n    self.onmessage = function (e) {\n        var labelData = e.data.labelData,\n            id = labelData[0],\n            maxLetters = labelData[1],\n            isVisible = labelData[2],\n            /*3, 4, 5*/_positionHigh_x = labelData[3], _positionHigh_y = labelData[4], _positionHigh_z = labelData[5],\n            /*6, 7, 8*/_positionLow_x = labelData[6], _positionLow_y = labelData[7], _positionLow_z = labelData[8],\n            /*9*/_size = labelData[9],\n            /*10, 11, 12*/_offset_x = labelData[10], _offset_y = labelData[11], _offset_z = labelData[12],\n            /*13, 14, 15, 16*/_color_x = labelData[13], _color_y = labelData[14], _color_z = labelData[15], _color_w = labelData[16],\n            /*17*/_rotation = labelData[17],\n            /*18, 19, 20*/_alignedAxis_x = labelData[18], _alignedAxis_y = labelData[19], _alignedAxis_z = labelData[20],\n            /*21*/_fontIndex = labelData[21],\n            /*22*/_outline = labelData[22],\n            /*23, 24, 25, 26*/_outlineColor_x = labelData[23], _outlineColor_y = labelData[24], _outlineColor_z = labelData[25], _outlineColor_w = labelData[26],\n            /*27, 28, 29*/_pickingColor_x = labelData[27], _pickingColor_y = labelData[28], _pickingColor_z = labelData[29]\n         \n\n        let _vertexArr = new Float32Array(maxLetters * 12),\n            _texCoordArr = new Float32Array(maxLetters * 24),\n            _gliphParamArr = new Float32Array(maxLetters * 24),\n            _positionHighArr = new Float32Array(maxLetters * 18),\n            _positionLowArr = new Float32Array(maxLetters * 18),\n            _sizeArr = new Float32Array(maxLetters * 6),\n            _offsetArr = new Float32Array(maxLetters * 18),\n            _rgbaArr = new Float32Array(maxLetters * 24),\n            _rotationArr = new Float32Array(maxLetters * 6),\n            _alignedAxisArr = new Float32Array(maxLetters * 18),\n            _fontIndexArr = new Float32Array(maxLetters * 6),\n            _outlineArr = new Float32Array(maxLetters * 6),\n            _outlineColorArr = new Float32Array(maxLetters * 24),\n            _pickingColorArr = new Float32Array(maxLetters * 18);\n        \n        for (let i = 0; i < maxLetters; i++) {\n            if (isVisible !== 0) {\n                concatTypedArrays(_vertexArr, i, [0, 0, 0, -1, 1, -1, 1, -1, 1, 0, 0, 0]);\n            } else {\n                concatTypedArrays(_vertexArr, i, [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n            }\n\n            concatTypedArrays(_texCoordArr, i, [0, 0, -1, 0, 0, 0, -1, 0, 0, 0, -1, 0, 0, 0, -1, 0, 0, 0, -1, 0, 0, 0, -1, 0]);\n            concatTypedArrays(_gliphParamArr, i, [1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0]);\n\n            var x = _positionHigh_x, y = _positionHigh_y, z = _positionHigh_z, w;\n            concatTypedArrays(_positionHighArr, i, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n\n            x = _positionLow_x; y = _positionLow_y; z = _positionLow_z;\n            concatTypedArrays(_positionLowArr, i, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n\n            x = _size;\n            concatTypedArrays(_sizeArr, i, [x, x, x, x, x, x]);\n\n            x = _offset_x; y = _offset_y; z = _offset_z;\n            concatTypedArrays(_offsetArr, i, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n\n            x = _color_x; y = _color_y; z = _color_z; w = _color_w;\n            concatTypedArrays(_rgbaArr, i, [x, y, z, w, x, y, z, w, x, y, z, w, x, y, z, w, x, y, z, w, x, y, z, w]);\n\n            x = _rotation;\n            concatTypedArrays(_rotationArr, i, [x, x, x, x, x, x]);\n\n            x = _alignedAxis_x; y = _alignedAxis_y; z = _alignedAxis_z;\n            concatTypedArrays(_alignedAxisArr, i, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n\n            x = _fontIndex;\n            concatTypedArrays(_fontIndexArr, i, [x, x, x, x, x, x]);\n\n            x = _outline;\n            concatTypedArrays(_outlineArr, i, [x, x, x, x, x, x]);\n\n            x = _outlineColor_x; y = _outlineColor_y; z = _outlineColor_z; w = _outlineColor_w;\n            concatTypedArrays(_outlineColorArr, i, [x, y, z, w, x, y, z, w, x, y, z, w, x, y, z, w, x, y, z, w, x, y, z, w]);\n\n            x = _pickingColor_x / 255; y = _pickingColor_y / 255; z = _pickingColor_z / 255;\n            concatTypedArrays(_pickingColorArr, i, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n        }\n\n        self.postMessage({\n                id: id,\n                vertexArr: _vertexArr,\n                texCoordArr: _texCoordArr,\n                gliphParamArr: _gliphParamArr,\n                positionHighArr: _positionHighArr,\n                positionLowArr: _positionLowArr,\n                sizeArr: _sizeArr,\n                offsetArr: _offsetArr,\n                rgbaArr: _rgbaArr,\n                rotationArr: _rotationArr,\n                alignedAxisArr: _alignedAxisArr,\n                fontIndexArr: _fontIndexArr,\n                outlineArr: _outlineArr,\n                outlineColorArr: _outlineColorArr,\n                pickingColorArr: _pickingColorArr\n             }, [\n                    _vertexArr.buffer,\n                    _texCoordArr.buffer,\n                    _gliphParamArr.buffer,\n                    _positionHighArr.buffer,\n                    _positionLowArr.buffer,\n                    _sizeArr.buffer,\n                    _offsetArr.buffer,\n                    _rgbaArr.buffer,\n                    _rotationArr.buffer,\n                    _alignedAxisArr.buffer,\n                    _fontIndexArr.buffer,\n                    _outlineArr.buffer,\n                    _outlineColorArr.buffer,\n                    _pickingColorArr.buffer\n            ]);\n    }`;\n\nexport {LabelWorker};","import * as utils from \"../utils/shared\";\nimport {Entity} from \"./Entity\";\nimport {LOCK_FREE, LOCK_UPDATE} from \"./LabelWorker\";\nimport {NumberArray2, Vec2} from \"../math/Vec2\";\nimport {NumberArray3, Vec3} from \"../math/Vec3\";\nimport {NumberArray4, Vec4} from \"../math/Vec4\";\nimport {BaseBillboardHandler} from \"./BaseBillboardHandler\";\n\nexport interface IBaseBillboardParams {\n    position?: NumberArray3 | Vec3;\n    rotation?: number;\n    color?: string | NumberArray4 | Vec4;\n    alignedAxis?: NumberArray3 | Vec3;\n    offset?: NumberArray2 | NumberArray3 | Vec2 | Vec3;\n    visibility?: boolean;\n}\n\n/**\n * Base prototype for billboard and label classes.\n * @class\n * @param {Object} [options] - Options:\n * @param {Vec3|Array.<number>} [options.position] - Billboard position.\n * @param {number} [options.rotation] - Screen angle rotation.\n * @param {Vec4|string|Array.<number>} [options.color] - Billboard color.\n * @param {Vec3|Array.<number>} [options.alignedAxis] - Billboard aligned vector.\n * @param {Vec3|Array.<number>} [options.offset] - Billboard center screen offset.\n * @param {boolean} [options.visibility] - Visibility.\n */\nclass BaseBillboard {\n    static __counter__: number = 0;\n    public __id: number;\n\n    /**\n     * Billboard center cartesian position.\n     * @protected\n     * @type {Vec3}\n     */\n    protected _position: Vec3;\n\n    public _positionHigh: Vec3;\n\n    public _positionLow: Vec3;\n\n    /**\n     * Screen space rotation angle.\n     * @public\n     * @type {number}\n     */\n    public _rotation: number;\n\n    /**\n     * RGBA color.\n     * @public\n     * @type {Vec4}\n     */\n    public _color: Vec4;\n\n    /**\n     * Cartesian aligned axis vector.\n     * @protected\n     * @type {Vec3}\n     */\n    protected _alignedAxis: Vec3;\n\n    /**\n     * Billboard center screen space offset. Where x,y - screen space offset and z - depth offset.\n     * @public\n     * @type {Vec3}\n     */\n    public _offset: Vec3;\n\n    /**\n     * Billboard visibility.\n     * @protected\n     * @type {boolean}\n     */\n    protected _visibility: boolean;\n\n    /**\n     * Entity instance that holds this billboard.\n     * @public\n     * @type {Entity}\n     */\n    public _entity: Entity | null;\n\n    /**\n     * Handler that stores and renders this billboard object.\n     * @public\n     * @type {BillboardHandler | null}\n     */\n    public _handler: BaseBillboardHandler | null;\n\n    /**\n     * Billboard handler array index.\n     * @public\n     * @type {number}\n     */\n    public _handlerIndex: number;\n\n    /**\n     * An indication that the object is ready to draw\n     * @public\n     * @type {number}\n     */\n    public _isReady: boolean;\n\n    public _lockId: number;\n\n    constructor(options: IBaseBillboardParams = {}) {\n\n        this.__id = BaseBillboard.__counter__++;\n\n        this._position = utils.createVector3(options.position);\n\n        this._positionHigh = new Vec3();\n\n        this._positionLow = new Vec3();\n\n        Vec3.doubleToTwoFloats(this._position, this._positionHigh, this._positionLow);\n\n        this._rotation = options.rotation || 0;\n\n        this._color = utils.createColorRGBA(options.color);\n\n        this._alignedAxis = utils.createVector3(options.alignedAxis);\n\n        this._offset = utils.createVector3(options.offset);\n\n        this._visibility = options.visibility != undefined ? options.visibility : true;\n\n        this._entity = null;\n\n        this._handler = null;\n\n        this._handlerIndex = -1;\n\n        this._isReady = false;\n\n        this._lockId = LOCK_FREE;\n    }\n\n    /**\n     * Sets billboard position.\n     * @public\n     * @param {number} x - X coordinate.\n     * @param {number} y - Y coordinate.\n     * @param {number} z - Z coordinate.\n     */\n    public setPosition(x: number, y: number, z: number) {\n        this._position.x = x;\n        this._position.y = y;\n        this._position.z = z;\n        Vec3.doubleToTwoFloats(this._position, this._positionHigh, this._positionLow);\n        if (this._isReady && this._handler) {\n            this._handler.setPositionArr(this._handlerIndex, this._positionHigh, this._positionLow);\n        } else if (this._lockId !== LOCK_FREE) {\n            this._lockId = LOCK_UPDATE;\n        }\n    }\n\n    /**\n     * Sets billboard position.\n     * @public\n     * @param {Vec3} position - Cartesian coordinates.\n     */\n    public setPosition3v(position: Vec3) {\n        this._position.x = position.x;\n        this._position.y = position.y;\n        this._position.z = position.z;\n        Vec3.doubleToTwoFloats(position, this._positionHigh, this._positionLow);\n        if (this._isReady && this._handler) {\n            this._handler.setPositionArr(this._handlerIndex, this._positionHigh, this._positionLow);\n        } else if (this._lockId !== LOCK_FREE) {\n            this._lockId = LOCK_UPDATE;\n        }\n    }\n\n    /**\n     * Returns billboard position.\n     * @public\n     * @returns {Vec3}\n     */\n    public getPosition(): Vec3 {\n        return this._position;\n    }\n\n    /**\n     * Sets screen space offset.\n     * @public\n     * @param {number} x - X offset.\n     * @param {number} y - Y offset.\n     * @param {number} [z] - Z offset.\n     */\n    public setOffset(x: number, y: number, z?: number) {\n        this._offset.x = x;\n        this._offset.y = y;\n        z != undefined && (this._offset.z = z);\n        if (this._isReady && this._handler) {\n            this._handler.setOffsetArr(this._handlerIndex, this._offset);\n        } else if (this._lockId !== LOCK_FREE) {\n            this._lockId = LOCK_UPDATE;\n        }\n    }\n\n    /**\n     * Sets screen space offset.\n     * @public\n     * @param {Vec2} offset - Offset size.\n     */\n    public setOffset3v(offset: Vec3) {\n        this.setOffset(offset.x, offset.y, offset.z);\n    }\n\n    /**\n     * Returns billboard screen space offset size.\n     * @public\n     * @returns {Vec3}\n     */\n    public getOffset(): Vec3 {\n        return this._offset;\n    }\n\n    /**\n     * Sets billboard screen space rotation in radians.\n     * @public\n     * @param {number} rotation - Screen space rotation in radians.\n     */\n    public setRotation(rotation: number) {\n        if (rotation !== this._rotation) {\n            this._rotation = rotation;\n            if (this._isReady && this._handler) {\n                this._handler.setRotationArr(this._handlerIndex, rotation);\n            } else if (this._lockId !== LOCK_FREE) {\n                this._lockId = LOCK_UPDATE;\n            }\n        }\n    }\n\n    /**\n     * Gets screen space rotation.\n     * @public\n     * @returns {number}\n     */\n    public getRotation(): number {\n        return this._rotation;\n    }\n\n    /**\n     * Sets billboard opacity.\n     * @public\n     * @param {number} a - Billboard opacity.\n     */\n    public setOpacity(a: number) {\n        if (a !== this._color.w) {\n            a != undefined && (this._color.w = a);\n            if (this._isReady && this._handler) {\n                this._handler.setRgbaArr(this._handlerIndex, this._color);\n            } else if (this._lockId !== LOCK_FREE) {\n                this._lockId = LOCK_UPDATE;\n            }\n        }\n    }\n\n    /**\n     * Sets RGBA color. Each channel from 0.0 to 1.0.\n     * @public\n     * @param {number} r - Red.\n     * @param {number} g - Green.\n     * @param {number} b - Blue.\n     * @param {number} a - Alpha.\n     */\n    public setColor(r: number, g: number, b: number, a?: number) {\n        if (a !== this._color.w || r !== this._color.x || g !== this._color.y || this._color.z !== b) {\n            this._color.x = r;\n            this._color.y = g;\n            this._color.z = b;\n            a != undefined && (this._color.w = a);\n            if (this._isReady && this._handler) {\n                this._handler.setRgbaArr(this._handlerIndex, this._color);\n            } else if (this._lockId !== LOCK_FREE) {\n                this._lockId = LOCK_UPDATE;\n            }\n        }\n    }\n\n    /**\n     * Sets RGBA color. Each channel from 0.0 to 1.0.\n     * @public\n     * @param {Vec4} color - RGBA vector.\n     */\n    public setColor4v(color: Vec4) {\n        this.setColor(color.x, color.y, color.z, color.w);\n    }\n\n    /**\n     * Sets billboard color.\n     * @public\n     * @param {string} color - HTML style color.\n     */\n    public setColorHTML(color: string) {\n        this.setColor4v(utils.htmlColorToRgba(color));\n    }\n\n    /**\n     * Returns RGBA color.\n     * @public\n     * @returns {Vec4}\n     */\n    public getColor(): Vec4 {\n        return this._color;\n    }\n\n    /**\n     * Sets billboard visibility.\n     * @public\n     * @param {boolean} visibility - Visibility flag.\n     */\n    public setVisibility(visibility: boolean) {\n        if (visibility !== this._visibility) {\n            this._visibility = visibility;\n            if (this._isReady && this._handler) {\n                this._handler.setVisibility(this._handlerIndex, visibility);\n            } else if (this._lockId !== LOCK_FREE) {\n                this._lockId = LOCK_UPDATE;\n            }\n        }\n    }\n\n    /**\n     * Returns billboard visibility.\n     * @public\n     * @returns {boolean}\n     */\n    public getVisibility(): boolean {\n        return this._visibility;\n    }\n\n    /**\n     * Sets billboard cartesian aligned vector.\n     * @public\n     * @param {number} x - Aligned vector X coordinate.\n     * @param {number} y - Aligned vector Y coordinate.\n     * @param {number} z - Aligned vector Z coordinate.\n     */\n    public setAlignedAxis(x: number, y: number, z: number) {\n        this._alignedAxis.x = x;\n        this._alignedAxis.y = y;\n        this._alignedAxis.z = z;\n        if (this._isReady && this._handler) {\n            this._handler.setAlignedAxisArr(this._handlerIndex, this._alignedAxis);\n        } else if (this._lockId !== LOCK_FREE) {\n            this._lockId = LOCK_UPDATE;\n        }\n    }\n\n    /**\n     * Sets billboard aligned vector.\n     * @public\n     * @param {Vec3} alignedAxis - Align direction.\n     */\n    public setAlignedAxis3v(alignedAxis: Vec3) {\n        this.setAlignedAxis(alignedAxis.x, alignedAxis.y, alignedAxis.z);\n    }\n\n    /**\n     * Returns aligned vector.\n     * @public\n     * @returns {Vec3}\n     */\n    public getAlignedAxis(): Vec3 {\n        return this._alignedAxis;\n    }\n\n    /**\n     * Removes billboard from handler.\n     * @public\n     */\n    public remove() {\n        this._entity = null;\n        this._handler && this._handler.remove(this);\n    }\n\n    /**\n     * Sets billboard picking color.\n     * @public\n     * @param {Vec3} color - Picking color.\n     */\n    public setPickingColor3v(color: Vec3) {\n        if (this._isReady && this._handler) {\n            this._handler.setPickingColorArr(this._handlerIndex, color);\n        } else if (this._lockId !== LOCK_FREE) {\n            this._lockId = LOCK_UPDATE;\n        }\n    }\n\n    public serializeWorkerData(workerId: number): Float32Array | null {\n        if (this._handler) {\n            return new Float32Array([]);\n        }\n        return null;\n    }\n}\n\nexport {BaseBillboard};\n","import {BaseBillboard, IBaseBillboardParams} from \"./BaseBillboard\";\nimport {BillboardHandler} from \"./BillboardHandler\";\nimport {HTMLImageElementExt} from \"../utils/ImagesCacheManager\";\n\nexport interface IBillboardParams extends IBaseBillboardParams {\n    src?: string;\n    image?: HTMLImageElement;\n    size?: [number, number];\n    width?: number;\n    height?: number;\n}\n\n/**\n * Represents basic quad billboard image.\n * @class\n * @extends {BaseBillboard}\n * @param {Object} [options] - Options:\n * @param {Vec3|Array.<number>} [options.position] - Billboard spatial position.\n * @param {number} [options.rotation] - Screen angle rotation.\n * @param {Vec4|string|Array.<number>} [options.color] - Billboard color.\n * @param {Vec3|Array.<number>} [options.alignedAxis] - Billboard aligned vector.\n * @param {Vec3|Array.<number>} [options.offset] - Billboard center screen offset.\n * @param {boolean} [options.visibility] - Visibility.\n * @param {string} [options.src] - Billboard image url source.\n * @param {Image} [options.image] - Billboard image object.\n * @param {number} [options.width] - Screen width.\n * @param {number} [options.height] - Screen height.\n * @param {number} [options.scale] - Billboard scale.\n */\nclass Billboard extends BaseBillboard {\n\n    public override _handler: BillboardHandler | null;\n\n    /**\n     * Image src.\n     * @protected\n     * @type {string}\n     */\n    protected _src: string | null;\n\n    /**\n     * Image object.\n     * @protected\n     * @type {Object}\n     */\n    protected _image: HTMLImageElement & { __nodeIndex?: number } | null;\n\n    protected _scale: number;\n\n    /**\n     * Billboard screen width.\n     * @public\n     * @type {number}\n     */\n    public _width: number;\n\n    /**\n     * Billboard screen height.\n     * @public\n     * @type {number}\n     */\n    public _height: number;\n\n    constructor(options: IBillboardParams = {}) {\n\n        super(options);\n\n        this._handler = null;\n\n        this._src = options.src || null;\n\n        this._image = options.image || null;\n\n        this._scale = 1.0;\n\n        this._width = options.width || (options.size ? options.size[0] : 30);\n\n        this._height = options.height || (options.size ? options.size[1] : 30);\n    }\n\n    /**\n     * Sets billboard image url source.\n     * @public\n     * @param {string} src - Image url.\n     */\n    public setSrc(src: string | null) {\n        this._src = src;\n        let bh = this._handler;\n        if (bh && src && src.length) {\n            let rn = bh._entityCollection.renderNode;\n            if (rn && rn.renderer) {\n                let ta = rn.renderer.billboardsTextureAtlas;\n                let that = this;\n                ta.loadImage(src, function (img: HTMLImageElementExt) {\n                    if (img.__nodeIndex != undefined && ta.get(img.__nodeIndex)) {\n                        that._image = img;\n                        bh!.setTexCoordArr(\n                            that._handlerIndex,\n                            ta.get(that._image!.__nodeIndex!)!.texCoords\n                        );\n                    } else {\n                        ta.addImage(img);\n                        ta.createTexture();\n                        that._image = img;\n                        rn!.updateBillboardsTexCoords();\n                    }\n                });\n            }\n        }\n    }\n\n    public getSrc(): string | null {\n        return this._src;\n    }\n\n    /**\n     * Sets image object.\n     * @public\n     * @param {Object} image - JavaScript image object.\n     */\n    public setImage(image: HTMLImageElement) {\n        this.setSrc(image.src);\n    }\n\n    public getImage(): HTMLImageElementExt | null {\n        return this._image;\n    }\n\n    /**\n     * Sets billboard screen size in pixels.\n     * @public\n     * @param {number} width - Billboard width.\n     * @param {number} height - Billboard height.\n     */\n    public setSize(width: number, height: number) {\n        this._width = width;\n        this._height = height;\n        this._handler &&\n        this._handler.setSizeArr(this._handlerIndex, width * this._scale, height * this._scale);\n    }\n\n    /**\n     * Returns billboard screen size.\n     * @public\n     * @returns {Object}\n     */\n    public getSize(): { width: number, height: number } {\n        return {\n            width: this._width,\n            height: this._height\n        };\n    }\n\n    /**\n     * Sets billboard screen width.\n     * @public\n     * @param {number} width - Width.\n     */\n    public setWidth(width: number) {\n        this.setSize(width, this._height);\n    }\n\n    /**\n     * Gets billboard screen width.\n     * @public\n     * @returns {number}\n     */\n    public getWidth(): number {\n        return this._width;\n    }\n\n    /**\n     * Sets billboard screen heigh.\n     * @public\n     * @param {number} height - Height.\n     */\n    public setHeight(height: number) {\n        this.setSize(this._width, height);\n    }\n\n    /**\n     * Gets billboard screen height.\n     * @public\n     * @returns {number}\n     */\n    public getHeight(): number {\n        return this._height;\n    }\n}\n\nexport {Billboard};\n","import * as utils from \"../utils/shared\";\nimport {Entity} from \"./Entity\";\nimport {Extent} from \"../Extent\";\nimport {GeometryHandler} from \"./GeometryHandler\";\nimport {LonLat} from \"../LonLat\";\nimport {NumberArray4, Vec4} from \"../math/Vec4\";\nimport {NumberArray2} from \"../math/Vec2\";\nimport {NumberArray3} from \"../math/Vec3\";\n\nexport enum GeometryTypeEnum {\n    POINT = 1,\n    LINESTRING = 2,\n    POLYGON = 3,\n    MULTIPOLYGON = 4,\n    MULTILINESTRING = 5,\n}\n\nconst GeometryType: Record<string, number> = {\n    POINT: 1,\n    LINESTRING: 2,\n    POLYGON: 3,\n    MULTIPOLYGON: 4,\n    MULTILINESTRING: 5\n};\n\nexport type CoordinatesType = NumberArray2 | NumberArray3;\n// {\n//     \"type\": \"Point\",\n//     \"coordinates\": [100.0, 0.0]\n// }\nexport type IPointCoordinates = CoordinatesType;\n\n// {\n//     \"type\": \"LineString\",\n//     \"coordinates\": [\n//         [100.0, 0.0],\n//         [101.0, 1.0]\n//     ]\n// }\nexport type ILineStringCoordinates = CoordinatesType[];\n\n// No holes\n// {\n//     \"type\": \"Polygon\",\n//     \"coordinates\": [\n//         [\n//             [100.0, 0.0],\n//             [101.0, 0.0],\n//             [101.0, 1.0],\n//             [100.0, 1.0],\n//             [100.0, 0.0]\n//         ]\n//     ]\n// }\n//\n// With holes:\n// {\n//     \"type\": \"Polygon\",\n//     \"coordinates\": [\n//         [\n//             [100.0, 0.0],\n//             [101.0, 0.0],\n//             [101.0, 1.0],\n//             [100.0, 1.0],\n//             [100.0, 0.0]\n//         ],\n//         [\n//             [100.8, 0.8],\n//             [100.8, 0.2],\n//             [100.2, 0.2],\n//             [100.2, 0.8],\n//             [100.8, 0.8]\n//         ]\n//     ]\n// }\nexport type IPolygonCoordinates = CoordinatesType[][];\n\n// {\n//     \"type\": \"MultiLineString\",\n//     \"coordinates\": [\n//         [\n//             [100.0, 0.0],\n//             [101.0, 1.0]\n//         ],\n//         [\n//             [102.0, 2.0],\n//             [103.0, 3.0]\n//         ]\n//     ]\n// }\nexport type IMultiLineStringCoordinates = ILineStringCoordinates[];\n\n// {\n//     \"type\": \"MultiPolygon\",\n//     \"coordinates\": [\n//         [\n//             [\n//                 [102.0, 2.0],\n//                 [103.0, 2.0],\n//                 [103.0, 3.0],\n//                 [102.0, 3.0],\n//                 [102.0, 2.0]\n//             ]\n//         ],\n//         [\n//             [\n//                 [100.0, 0.0],\n//                 [101.0, 0.0],\n//                 [101.0, 1.0],\n//                 [100.0, 1.0],\n//                 [100.0, 0.0]\n//             ],\n//             [\n//                 [100.2, 0.2],\n//                 [100.2, 0.8],\n//                 [100.8, 0.8],\n//                 [100.8, 0.2],\n//                 [100.2, 0.2]\n//             ]\n//         ]\n//     ]\n// }\nexport type IMultiPolygonCoordinates = IPolygonCoordinates[];\n\nexport type IGeometryCoordinates =\n    IPointCoordinates |\n    IPolygonCoordinates |\n    IMultiPolygonCoordinates |\n    ILineStringCoordinates |\n    IMultiLineStringCoordinates;\n\nexport type GeometryTypeToCoordinates = {\n    POINT: IPointCoordinates;\n    LINESTRING: ILineStringCoordinates;\n    POLYGON: IPolygonCoordinates;\n    MULTIPOLYGON: IMultiPolygonCoordinates;\n    MULTILINESTRING: IMultiLineStringCoordinates;\n};\n\ninterface IGeometry<T extends keyof typeof GeometryTypeEnum = keyof typeof GeometryTypeEnum> {\n    type: T;\n    coordinates: GeometryTypeToCoordinates[T];\n}\n\nexport interface IGeometryStyle {\n    fillColor?: string | NumberArray4 | Vec4;\n    lineColor?: string | NumberArray4 | Vec4;\n    strokeColor?: string | NumberArray4 | Vec4;\n    lineWidth?: number;\n    strokeWidth?: number;\n}\n\ninterface IGeometryStyleInternal {\n    fillColor: Vec4;\n    lineColor: Vec4;\n    strokeColor: Vec4;\n    lineWidth: number;\n    strokeWidth: number;\n}\n\nexport interface IGeometryParams<T extends keyof typeof GeometryTypeEnum = keyof typeof GeometryTypeEnum> {\n    type?: T;\n    coordinates?:  GeometryTypeToCoordinates[T];\n    style?: IGeometryStyle;\n    visibility?: boolean;\n}\n\nclass Geometry {\n    static __counter__: number = 0;\n\n    public __id: number;\n\n    /**\n     * Entity instance that holds this geometry.\n     * @public\n     * @type {Entity}\n     */\n    public _entity: Entity | null;\n\n    public _handler: GeometryHandler | null;\n    public _handlerIndex: number;\n\n    // Polygon\n    public _polyVerticesHighMerc: number[];\n    public _polyVerticesLowMerc: number[];\n    public _polyVerticesLength: number;\n    public _polyIndexesLength: number;\n    public _polyVerticesHandlerIndex: number;\n    public _polyIndexesHandlerIndex: number;\n\n    // Line(Linestring and polygon's stroke(s)\n    public _lineVerticesHighMerc: number[];\n    public _lineVerticesLowMerc: number[];\n    public _lineVerticesLength: number;\n    public _lineOrdersLength: number;\n    public _lineIndexesLength: number;\n    public _lineColorsLength: number;\n    public _lineThicknessLength: number;\n    public _lineVerticesHandlerIndex: number;\n    public _lineOrdersHandlerIndex: number;\n    public _lineIndexesHandlerIndex: number;\n    public _lineThicknessHandlerIndex: number;\n    public _lineColorsHandlerIndex: number;\n    protected _type: GeometryTypeEnum;\n    public _coordinates: IGeometryCoordinates;\n    protected _extent: Extent;\n    public _style: IGeometryStyleInternal;\n    protected _visibility: boolean;\n    public _pickingReady: boolean;\n\n    constructor(options: IGeometryParams = {}) {\n\n        this.__id = Geometry.__counter__++;\n\n        this._entity = null;\n\n        this._handler = null;\n        this._handlerIndex = -1;\n\n        this._polyVerticesHighMerc = [];\n        this._polyVerticesLowMerc = [];\n        this._polyVerticesLength = -1;\n        this._polyIndexesLength = -1;\n        this._polyVerticesHandlerIndex = -1;\n        this._polyIndexesHandlerIndex = -1;\n\n        this._lineVerticesHighMerc = [];\n        this._lineVerticesLowMerc = [];\n        this._lineVerticesLength = -1;\n        this._lineOrdersLength = -1;\n        this._lineIndexesLength = -1;\n        this._lineColorsLength = -1;\n        this._lineThicknessLength = -1;\n        this._lineVerticesHandlerIndex = -1;\n        this._lineOrdersHandlerIndex = -1;\n        this._lineIndexesHandlerIndex = -1;\n        this._lineThicknessHandlerIndex = -1;\n        this._lineColorsHandlerIndex = -1;\n\n        this._type = (options.type && Geometry.getType(options.type)) || GeometryTypeEnum.POINT;\n        this._coordinates = options.coordinates || [];\n        this._extent = Geometry.getExtent({\n                type: options.type || \"POINT\",\n                coordinates: options.coordinates || []\n            },\n            this._coordinates\n        );\n\n        options.style = options.style || {};\n\n        this._style = {\n            fillColor: utils.createColorRGBA(options.style.fillColor, new Vec4(0.19, 0.62, 0.85, 0.4)),\n            lineColor: utils.createColorRGBA(options.style.lineColor, new Vec4(0.19, 0.62, 0.85, 1)),\n            strokeColor: utils.createColorRGBA(options.style.strokeColor, new Vec4(1, 1, 1, 0.95)),\n            lineWidth: options.style.lineWidth || 3,\n            strokeWidth: options.style.strokeWidth || 0\n        };\n\n        this._visibility = options.visibility || true;\n\n        // optimization flag for picking mask rendering pass\n        this._pickingReady = false;\n    }\n\n    public get id(): number {\n        return this.__id;\n    }\n\n    public get type(): number {\n        return this._type;\n    }\n\n    static getType(typeStr: keyof typeof GeometryTypeEnum): GeometryTypeEnum {\n        return GeometryType[typeStr.toUpperCase()];\n    }\n\n    /**\n     * Returns geometry extent.\n     @static\n     @param {IGeometry} geometryObj - GeoJSON style geometry feature.\n     @param {IGeometryCoordinates} outCoordinates - Geometry feature coordinates clone.\n     @returns {Extent} -\n     */\n    static getExtent(geometryObj: IGeometry, outCoordinates: IGeometryCoordinates): Extent {\n        let res = new Extent(new LonLat(180.0, 90.0), new LonLat(-180.0, -90.0));\n        let t = Geometry.getType(geometryObj.type);\n\n        if (t === GeometryTypeEnum.POINT) {\n            let lon: number = geometryObj.coordinates[0] as number,\n                lat: number = geometryObj.coordinates[1] as number;\n            res.southWest.lon = lon;\n            res.southWest.lat = lat;\n            res.northEast.lon = lon;\n            res.northEast.lat = lat;\n            outCoordinates && (outCoordinates[0] = lon) && (outCoordinates[1] = lat);\n        } else if (t === GeometryTypeEnum.LINESTRING) {\n            let c: ILineStringCoordinates = geometryObj.coordinates as ILineStringCoordinates;\n            for (let i = 0; i < c.length; i++) {\n                let lon = c[i][0],\n                    lat = c[i][1];\n                if (lon < res.southWest.lon) res.southWest.lon = lon;\n                if (lat < res.southWest.lat) res.southWest.lat = lat;\n                if (lon > res.northEast.lon) res.northEast.lon = lon;\n                if (lat > res.northEast.lat) res.northEast.lat = lat;\n                outCoordinates && ((outCoordinates as ILineStringCoordinates)[i] = [lon, lat]);\n            }\n        } else if (t === GeometryTypeEnum.POLYGON) {\n            let c: IPolygonCoordinates = geometryObj.coordinates as IPolygonCoordinates;\n            for (let i = 0; i < c.length; i++) {\n                let ci: CoordinatesType[] = c[i];\n                outCoordinates && (outCoordinates[i] = []);\n                for (let j = 0; j < ci.length; j++) {\n                    let cij = ci[j];\n                    let lon = cij[0],\n                        lat = cij[1];\n                    if (lon < res.southWest.lon) res.southWest.lon = lon;\n                    if (lat < res.southWest.lat) res.southWest.lat = lat;\n                    if (lon > res.northEast.lon) res.northEast.lon = lon;\n                    if (lat > res.northEast.lat) res.northEast.lat = lat;\n                    outCoordinates && ((outCoordinates as IPolygonCoordinates)[i][j] = [lon, lat]);\n                }\n            }\n        } else if (t === GeometryTypeEnum.MULTIPOLYGON) {\n            let p = geometryObj.coordinates;\n            for (let i = 0; i < p.length; i++) {\n                let pi: IPolygonCoordinates = p[i] as IPolygonCoordinates;\n                outCoordinates && (outCoordinates[i] = []);\n                for (let j = 0; j < pi.length; j++) {\n                    let pij: CoordinatesType[] = pi[j];\n                    outCoordinates && ((outCoordinates as IMultiPolygonCoordinates)[i][j] = []);\n                    for (let k = 0; k < pij.length; k++) {\n                        let pijk = pij[k];\n                        let lon = pijk[0],\n                            lat = pijk[1];\n                        if (lon < res.southWest.lon) res.southWest.lon = lon;\n                        if (lat < res.southWest.lat) res.southWest.lat = lat;\n                        if (lon > res.northEast.lon) res.northEast.lon = lon;\n                        if (lat > res.northEast.lat) res.northEast.lat = lat;\n                        outCoordinates && ((outCoordinates as IMultiPolygonCoordinates)[i][j][k] = [lon, lat]);\n                    }\n                }\n            }\n        } else if (t === GeometryTypeEnum.MULTILINESTRING) {\n            let c = geometryObj.coordinates;\n            for (let i = 0; i < c.length; i++) {\n                let ci: ILineStringCoordinates = c[i] as ILineStringCoordinates;\n                outCoordinates && (outCoordinates[i] = []);\n                for (let j = 0; j < ci.length; j++) {\n                    let cij = ci[j];\n                    let lon = cij[0],\n                        lat = cij[1];\n                    if (lon < res.southWest.lon) res.southWest.lon = lon;\n                    if (lat < res.southWest.lat) res.southWest.lat = lat;\n                    if (lon > res.northEast.lon) res.northEast.lon = lon;\n                    if (lat > res.northEast.lat) res.northEast.lat = lat;\n                    outCoordinates && ((outCoordinates as IMultiLineStringCoordinates)[i][j] = [lon, lat]);\n                }\n            }\n        } else {\n            res.southWest.lon = res.southWest.lat = res.northEast.lon = res.northEast.lat = 0.0;\n            outCoordinates && (outCoordinates[0] = 0) && (outCoordinates[1] = 0);\n        }\n\n        return res;\n    }\n\n    /**\n     * @todo ASAP need test for this method\n     * @param geoJson\n     * @returns {Geometry}\n     */\n    public setGeometry(geoJson: IGeometry): Geometry {\n        let h = this._handler;\n        if (h) {\n            this.remove();\n            this._type = Geometry.getType(geoJson.type || \"Point\");\n            this._extent = Geometry.getExtent(geoJson, this._coordinates);\n            h.add(this);\n        }\n        return this;\n    }\n\n    public setFillColor(r: number, g: number, b: number, a: number = 1.0): Geometry {\n        let c = this._style.fillColor;\n        if ((c.w === 0.0 && a !== 0.0) || (c.w !== 0.0 && a === 0.0)) {\n            this._pickingReady = false;\n        }\n        c.x = r;\n        c.y = g;\n        c.z = b;\n        c.w = a;\n        this._handler && this._handler.setPolyColorArr(this, c);\n        return this;\n    }\n\n    public overlaps(extent: Extent): boolean {\n        return this._extent.overlaps(extent);\n    }\n\n    public setFillColor4v(rgba: Vec4): Geometry {\n        return this.setFillColor(rgba.x, rgba.y, rgba.z, rgba.w);\n    }\n\n    public setStrokeColor(r: number, g: number, b: number, a: number = 1.0): Geometry {\n        let c = this._style.strokeColor;\n        if ((c.w === 0.0 && a !== 0.0) || (c.w !== 0.0 && a === 0.0)) {\n            this._pickingReady = false;\n        }\n        c.x = r;\n        c.y = g;\n        c.z = b;\n        c.w = a;\n        this._handler && this._handler.setLineStrokeColorArr(this, c);\n        return this;\n    }\n\n    public setLineColor(r: number, g: number, b: number, a: number = 1.0): Geometry {\n        let c = this._style.lineColor;\n        if ((c.w === 0.0 && a !== 0.0) || (c.w !== 0.0 && a === 0.0)) {\n            this._pickingReady = false;\n        }\n        c.x = r;\n        c.y = g;\n        c.z = b;\n        c.w = a;\n        this._handler && this._handler.setLineColorArr(this, c);\n        return this;\n    }\n\n    public setStrokeColor4v(rgba: Vec4): Geometry {\n        return this.setStrokeColor(rgba.x, rgba.y, rgba.z, rgba.w);\n    }\n\n    public setLineColor4v(rgba: Vec4): Geometry {\n        return this.setLineColor(rgba.x, rgba.y, rgba.z, rgba.w);\n    }\n\n    public setStrokeOpacity(opacity: number): Geometry {\n        let c = this._style.strokeColor;\n        c.w = opacity;\n        return this.setStrokeColor(c.x, c.y, c.z, opacity);\n    }\n\n    public setLineOpacity(opacity: number): Geometry {\n        let c = this._style.lineColor;\n        c.w = opacity;\n        return this.setLineColor(c.x, c.y, c.z, opacity);\n    }\n\n    public setStrokeWidth(width: number): Geometry {\n        this._style.strokeWidth = width;\n        this._pickingReady = false;\n        this._handler && this._handler.setLineStrokeArr(this, width);\n        return this;\n    }\n\n    public bringToFront(): Geometry {\n        this._handler && this._handler.bringToFront(this);\n        return this;\n    }\n\n    public setLineWidth(width: number): Geometry {\n        this._style.lineWidth = width;\n        this._pickingReady = false;\n        this._handler && this._handler.setLineThicknessArr(this, width);\n        return this;\n    }\n\n    public setFillOpacity(opacity: number): Geometry {\n        let c = this._style.fillColor;\n        if ((c.w === 0.0 && opacity !== 0.0) || (c.w !== 0.0 && opacity === 0.0)) {\n            this._pickingReady = false;\n        }\n        c.w = opacity;\n        this._handler && this._handler.setPolyColorArr(this, c);\n        return this;\n    }\n\n    public setVisibility(visibility: boolean): Geometry {\n        this._visibility = visibility;\n        this._handler && this._handler.setGeometryVisibility(this);\n        return this;\n    }\n\n    public getVisibility(): boolean {\n        return this._visibility;\n    }\n\n    public remove() {\n        this._handler && this._handler.remove(this);\n    }\n\n    public getExtent(): Extent {\n        return this._extent.clone();\n    }\n\n    public getType(): number {\n        return this._type;\n    }\n}\n\nexport {Geometry};\n","import {Vec2} from './Vec2';\n\nexport class Line2 {\n\n    public a: number;\n    public b: number;\n    public c: number;\n\n    constructor(a = 0, b = 0, c = 0) {\n        this.a = a;\n        this.b = b;\n        this.c = c;\n    }\n\n    static get(p0: Vec2, p1: Vec2): Line2 {\n        return new Line2(p1.y - p0.y, p0.x - p1.x, p1.x * p0.y - p0.x * p1.y);\n    }\n\n    static getParallel(l: Line2, p: Vec2): Line2 {\n        return new Line2(l.a, l.b, -l.a * p.x - l.b * p.y);\n    }\n\n    static getIntersection(L0: Line2, L1: Line2): Vec2 {\n        let x = (L1.b * L0.c - L0.b * L1.c) / (L0.b * L1.a - L1.b * L0.a);\n        return new Vec2(x, -(L0.c + L0.a * x) / L0.b);\n    }\n\n    public intersects(l: Line2): Vec2 {\n        return Line2.getIntersection(this, l);\n    }\n}\n","import {EPS10} from '../math';\nimport {Sphere} from \"../bv/Sphere\";\nimport {Vec3} from './Vec3';\n\n/**\n * @todo: write tests\n * @class Line3\n * Represents a line segment in 3d space.\n * @param {Vec3} [p0] - First point of the line\n * @param {Vec3} [p1] - Second point of the line\n */\nexport class Line3 {\n\n    /**\n     * First point of the line\n     * @public\n     * @type: Vec3\n     */\n    public p0: Vec3;\n\n    /**\n     * Second point of the line\n     * @public\n     * @type: Vec3\n     */\n    public p1: Vec3;\n\n    constructor(p0?: Vec3, p1?: Vec3) {\n        this.p0 = p0 || new Vec3();\n        this.p1 = p1 || new Vec3();\n    }\n\n    public getMagnitude(): number {\n        return this.p0.distance(this.p1);\n    }\n\n    public getSphereIntersection(sphere: Sphere): [Vec3] | [Vec3, Vec3] | [] {\n        let p0 = this.p0,\n            p1 = this.p1;\n\n        let cx = sphere.center.x,\n            cy = sphere.center.y,\n            cz = sphere.center.z;\n\n        let px = p0.x,\n            py = p0.y,\n            pz = p0.z;\n\n        let vx = p1.x - px,\n            vy = p1.y - py,\n            vz = p1.z - pz;\n\n        let A = vx * vx + vy * vy + vz * vz,\n            B = 2.0 * (px * vx + py * vy + pz * vz - vx * cx - vy * cy - vz * cz),\n            C = px * px - 2 * px * cx + cx * cx + py * py - 2 * py * cy + cy * cy +\n                pz * pz - 2 * pz * cz + cz * cz - sphere.radius * sphere.radius;\n        let D = B * B - 4 * A * C;\n\n        if (D < 0) {\n            // no solutions\n            return [];\n        }\n\n        let t1 = (-B - Math.sqrt(D)) / (2.0 * A);\n\n        let solution1 = new Vec3(\n            p0.x * (1 - t1) + t1 * p1.x,\n            p0.y * (1 - t1) + t1 * p1.y,\n            p0.z * (1 - t1) + t1 * p1.z\n        );\n\n        if (D == 0) {\n            return [solution1];\n        }\n\n        let t2 = (-B + Math.sqrt(D)) / (2.0 * A);\n        let solution2 = new Vec3(\n            p0.x * (1 - t2) + t2 * p1.x,\n            p0.y * (1 - t2) + t2 * p1.y,\n            p0.z * (1 - t2) + t2 * p1.z);\n\n        // prefer a solution that's on the line segment itself\n        if (Math.abs(t1 - 0.5) < Math.abs(t2 - 0.5)) {\n            return [solution1, solution2];\n        }\n\n        return [solution2, solution1];\n    }\n\n    public intersects(line: Line3, res: Vec3, res2?: Vec3): boolean {\n\n        let p13 = this.p0.sub(line.p0),\n            p43 = line.p1.sub(line.p0);\n\n        if (Math.abs(p43.x) < EPS10 && Math.abs(p43.y) < EPS10 && Math.abs(p43.z) < EPS10) {\n            return false;\n        }\n\n        let p21 = this.p1.sub(this.p0);\n\n        if (Math.abs(p21.x) < EPS10 && Math.abs(p21.y) < EPS10 && Math.abs(p21.z) < EPS10) {\n            return false;\n        }\n\n        let d1343 = p13.x * p43.x + p13.y * p43.y + p13.z * p43.z,\n            d4321 = p43.x * p21.x + p43.y * p21.y + p43.z * p21.z,\n            d1321 = p13.x * p21.x + p13.y * p21.y + p13.z * p21.z,\n            d4343 = p43.x * p43.x + p43.y * p43.y + p43.z * p43.z,\n            d2121 = p21.x * p21.x + p21.y * p21.y + p21.z * p21.z;\n\n        let denom = d2121 * d4343 - d4321 * d4321;\n\n        if (Math.abs(denom) < EPS10) {\n            return false;\n        }\n\n        let numer = d1343 * d4321 - d1321 * d4343;\n\n        let mua = numer / denom;\n\n        res.x = this.p0.x + mua * p21.x;\n        res.y = this.p0.y + mua * p21.y;\n        res.z = this.p0.z + mua * p21.z;\n\n        if (res2) {\n\n            let mub = (d1343 + d4321 * mua) / d4343;\n\n            res2.x = line.p0.x + mub * p43.x;\n            res2.y = line.p0.y + mub * p43.y;\n            res2.z = line.p0.z + mub * p43.z;\n        }\n\n        return true;\n    }\n\n    public getNearestDistancePoint(point: Vec3, res: Vec3): boolean {\n\n        let p0 = this.p0,\n            p1 = this.p1;\n\n        let mag = this.getMagnitude();\n\n        let u =\n            (\n                ((point.x - p0.x) * (p1.x - p0.x)) +\n                ((point.y - p0.y) * (p1.y - p0.y)) +\n                ((point.z - p0.z) * (p1.z - p0.z))\n            ) /\n            (mag * mag);\n\n        res.x = p0.x + u * (p1.x - p0.x);\n        res.y = p0.y + u * (p1.y - p0.y);\n        res.z = p0.z + u * (p1.z - p0.z);\n\n        if (u < 0.0 || u > 1.0) {\n            return false;\n        }\n\n        return true;\n    }\n}","import {EPS5} from \"../math\";\nimport {Vec3} from \"./Vec3\";\nimport {Line3} from \"./Line3\";\n\nconst DISJOINT = 0\nconst COINCIDE = 1;\nconst INTERSECT = 2;\n/**\n * Plane class.\n * @constructor\n * @param {Vec3} [p] - Plane point.\n * @param {Vec3} [n] - Planet normal.\n */\nclass Plane {\n    public p: Vec3;\n    public n: Vec3;\n\n    constructor(p: Vec3, n: Vec3) {\n        this.p = p ? p.clone() : new Vec3();\n        this.n = n ? n.clone() : this.p.normal();\n    }\n\n    public set(p: Vec3, n: Vec3) {\n        this.p.copy(p);\n        this.n.copy(n);\n    }\n\n    public getNormal(): Vec3 {\n        return this.n.clone();\n    }\n\n    public distance(p: Vec3): number {\n        let pp = this.getProjection(p);\n        return p.distance(pp);\n    }\n\n    public getProjection(v: Vec3, def?: Vec3): Vec3 {\n        return Vec3.proj_b_to_plane(v, this.n, def);\n    }\n\n    public getProjectionPoint(p: Vec3, vh?: Vec3): Vec3 {\n        let v = p.sub(this.p),\n            n = this.n,\n            dist = v.dot(n);\n\n        if (vh) {\n            vh.copy(n.scale(dist));\n        } else {\n            vh = n.scale(dist);\n        }\n        return p.sub(vh);\n    }\n\n    public getIntersection(Pn1: Plane, Pn2: Plane, L: Line3): number {\n        let u = Pn1.n.cross(Pn2.n);\n\n        let ax = u.x >= 0 ? u.x : -u.x;\n        let ay = u.y >= 0 ? u.y : -u.y;\n        let az = u.z >= 0 ? u.z : -u.z;\n\n        // test if the two planes are parallel\n        if (ax + ay + az < EPS5) {\n            // Pn1 and Pn2 are near parallel\n            // test if disjoint or coincide\n            let v = Pn2.p.sub(Pn1.p);\n            if (Pn1.n.dot(v) == 0) {\n                // Pn2.V0 lies in Pn1\n                return COINCIDE; // Pn1 and Pn2 coincide\n            } else {\n                return DISJOINT; // Pn1 and Pn2 are disjoint\n            }\n        }\n\n        // Pn1 and Pn2 intersect in a line\n        // first determine max abs coordinate of cross product\n        let maxc; // max coordinate\n        if (ax > ay) {\n            if (ax > az) {\n                maxc = 1;\n            } else {\n                maxc = 3;\n            }\n        } else {\n            if (ay > az) {\n                maxc = 2;\n            } else {\n                maxc = 3;\n            }\n        }\n\n        // next, to get a point on the intersect line\n        // zero the max coord, and solve for the other two\n        let iP = new Vec3(); // intersect point\n\n        let d1, d2; // the constants in the 2 plane equations\n        d1 = -Pn1.n.dot(Pn1.p); // note: could be pre-stored  with plane\n        d2 = -Pn2.n.dot(Pn2.p); // ditto\n\n        // select max coordinate\n        if (maxc === 1) {\n            // intersect with x=0\n            iP.x = 0;\n            iP.y = (d2 * Pn1.n.z - d1 * Pn2.n.z) / u.x;\n            iP.z = (d1 * Pn2.n.y - d2 * Pn1.n.y) / u.x;\n        } else if (maxc === 2) {\n            // intersect with y=0\n            iP.x = (d1 * Pn2.n.z - d2 * Pn1.n.z) / u.y;\n            iP.y = 0;\n            iP.z = (d2 * Pn1.n.x - d1 * Pn2.n.x) / u.y;\n        } else if (maxc === 3) {\n            // intersect with z=0\n            iP.x = (d2 * Pn1.n.y - d1 * Pn2.n.y) / u.z;\n            iP.y = (d1 * Pn2.n.x - d2 * Pn1.n.x) / u.z;\n            iP.z = 0;\n        }\n        L.p0.copy(iP);\n        L.p1.copy(iP.add(u));\n        return INTERSECT;\n    }\n}\n\nexport {Plane};\n","import {EPS10} from \"../math\";\nimport {Box} from \"../bv/Box\";\nimport {Sphere} from \"../bv/Sphere\";\nimport {Vec3} from \"./Vec3\";\n\n/**\n * Represents a ray that extends infinitely from the provided origin in the provided direction.\n * @class\n * @param {Vec3} origin - The origin of the ray.\n * @param {Vec3} direction - The direction of the ray.\n */\nexport class Ray {\n    /**\n     * The origin of the ray.\n     * @public\n     * @type {Vec3}\n     */\n    public origin: Vec3;\n\n    /**\n     * The direction of the ray.\n     * @public\n     * @type {Vec3}\n     */\n    public direction: Vec3;\n\n    constructor(origin: Vec3 = Vec3.ZERO, direction: Vec3 = Vec3.ZERO) {\n\n        this.origin = origin;\n\n        this.direction = direction;\n    }\n\n    /** @const */\n    static get OUTSIDE() {\n        return 0;\n    }\n\n    /** @const */\n    static get INSIDE() {\n        return 1;\n    }\n\n    /** @const */\n    static get INPLANE() {\n        return 2;\n    }\n\n    /** @const */\n    static get AWAY() {\n        return 3;\n    }\n\n    /**\n     * Sets a ray parameters.\n     * @public\n     * @param {Vec3} origin - The origin of the ray.\n     * @param {Vec3} direction - The direction of the ray.\n     * @returns {Ray}\n     */\n    public set(origin: Vec3, direction: Vec3): Ray {\n        this.origin = origin;\n        this.direction = direction;\n        return this;\n    }\n\n    /**\n     * Computes the point along the ray on the distance.\n     * @public\n     * @param {number} distance - Point distance.\n     * @returns {Vec3}\n     */\n    public getPoint(distance: number): Vec3 {\n        return Vec3.add(this.origin, this.direction.scaleTo(distance));\n    }\n\n    /**\n     * Returns ray hit a triange result.\n     * @public\n     * @param {Vec3} v0 - First triangle corner coordinate.\n     * @param {Vec3} v1 - Second triangle corner coordinate.\n     * @param {Vec3} v2 - Third triangle corner coordinate.\n     * @param {Vec3} res - Hit point object pointer that stores hit result.\n     * @returns {number} - Hit code, could 0 - og.Ray.OUTSIDE, 1 - og.Ray.INSIDE,\n     *      2 - og.Ray.INPLANE and 3 - og.Ray.AWAY(ray goes away from triangle).\n     */\n    public hitTriangle(v0: Vec3, v1: Vec3, v2: Vec3, res: Vec3): number {\n        let u = v1.sub(v0);\n        let v = v2.sub(v0);\n        let n = u.cross(v);\n\n        let w0 = this.origin.sub(v0);\n        let a = -n.dot(w0);\n        let b = n.dot(this.direction);\n\n        // ray is  parallel to triangle plane\n        if (Math.abs(b) < EPS10) {\n            if (a === 0) {\n                res.copy(this.origin);\n                // ray lies in triangle plane\n                return Ray.INPLANE;\n            } else {\n                // ray disjoint from plane\n                return Ray.OUTSIDE;\n            }\n        }\n\n        let r = a / b;\n\n        // intersect point of ray and plane\n        res.copy(this.origin.add(this.direction.scaleTo(r)));\n\n        // ray goes away from triangle\n        if (r < 0.0) {\n            return Ray.AWAY;\n        }\n\n        // is res point inside the triangle?\n        let uu = u.dot(u);\n        let uv = u.dot(v);\n        let vv = v.dot(v);\n        let w = res.sub(v0);\n        let wu = w.dot(u);\n        let wv = w.dot(v);\n        let D = uv * uv - uu * vv;\n\n        let s = (uv * wv - vv * wu) / D;\n        if (s < 0.0 || s > 1.0) {\n            return Ray.OUTSIDE;\n        }\n\n        let t = (uv * wu - uu * wv) / D;\n        if (t < 0.0 || s + t > 1.0) {\n            return Ray.OUTSIDE;\n        }\n\n        return Ray.INSIDE;\n    }\n\n    /**\n     * Gets a ray hit a plane result. If the ray cross the plane returns 1 - og.Ray.INSIDE otherwise returns 0 - og.Ray.OUTSIDE.\n     * @public\n     * @param {Vec3} v0 - First plane point.\n     * @param {Vec3} v1 - Second plane point.\n     * @param {Vec3} v2 - Third plane point.\n     * @param {Vec3} res - Hit point object pointer that stores hit result.\n     * @returns {number}\n     */\n    public hitPlane(v0: Vec3, v1: Vec3, v2: Vec3, res: Vec3): number {\n        let u = Vec3.sub(v1, v0);\n        let v = Vec3.sub(v2, v0);\n        let n = u.cross(v);\n\n        let w0 = Vec3.sub(this.origin, v0);\n        let a = -n.dot(w0);\n        let b = n.dot(this.direction);\n\n        // ray is  parallel to the plane\n        if (Math.abs(b) < EPS10) {\n            if (a === 0) {\n                return Ray.OUTSIDE;\n            }\n        }\n\n        let r = a / b;\n\n        if (r < 0) {\n            return Ray.OUTSIDE;\n        }\n\n        let d = this.direction.scaleTo(r);\n\n        // intersect point of ray and plane\n        res.x = this.origin.x + d.x;\n        res.y = this.origin.y + d.y;\n        res.z = this.origin.z + d.z;\n\n        return Ray.INSIDE;\n    }\n\n    /**\n     * Returns a ray hit sphere coordiante. If there isn't hit returns null.\n     * @public\n     * @param {Sphere} sphere - Sphere object.\n     * @returns {Vec3}\n     */\n    public hitSphere(sphere: Sphere) {\n        let r = sphere.radius,\n            c = sphere.center,\n            o = this.origin,\n            d = this.direction;\n\n        let vpc = Vec3.sub(c, o);\n\n        if (vpc.dot(d) < 0) {\n            var l = vpc.length();\n            if (l > r) {\n                return null;\n            } else if (l === r) {\n                return o.clone();\n            }\n            let pc = c.projToRay(o, vpc);\n            var lc = Vec3.sub(pc, c).length();\n            let dist = Math.sqrt(r * r - lc * lc);\n            let di1 = dist - Vec3.sub(pc, o).length();\n            let intersection = Vec3.add(o, d.scaleTo(di1));\n            return intersection;\n        } else {\n            let pc = c.projToRay(o, d);\n            var cpcl = Vec3.sub(c, pc).length();\n            if (cpcl > sphere.radius) {\n                return null;\n            } else {\n                let dist = Math.sqrt(r * r - cpcl * cpcl);\n                let di1;\n                pc.subA(o);\n                if (vpc.length() > r) {\n                    di1 = pc.length() - dist;\n                } else {\n                    di1 = pc.length() + dist;\n                }\n                let intersection = Vec3.add(o, d.scaleTo(di1));\n                return intersection;\n            }\n        }\n    }\n\n    public hitBox(box: Box) {\n        //\n        // TODO\n        //\n    }\n}","interface IObjGeometryData {\n    vertices: number[];\n    textures: number[];\n    normals: number[];\n}\n\ninterface IObjGeometry {\n    object: string;\n    groups: string[];\n    material: string;\n    data: IObjGeometryData\n}\n\ninterface IObjData {\n    geometries: IObjGeometry[];\n    materialLibs: string[];\n}\n\nexport function objParser(text: string) {\n    const objPositions: number[][] = [[0, 0, 0]];\n    const objTexcoords: number[][] = [[0, 0]];\n    const objNormals: number[][] = [[0, 0, 0]];\n\n    // same order as `f` indices\n    const objVertexData: [number[][], number[][], number[][]] = [\n        objPositions,\n        objTexcoords,\n        objNormals,\n    ];\n\n    // same order as `f` indices\n    let vertexData: [number[], number[], number[]] = [\n        [],   // positions\n        [],   // texcoords\n        [],   // normals\n    ];\n\n    const materialLibs: string[] = [];\n    const geometries: IObjGeometry[] = [];\n    let geometry: IObjGeometry | null;\n\n    let groups: string[] = ['default'];\n    let material: string = 'default';\n    let object: string = 'default';\n\n    function newGeometry() {\n        // If there is an existing geometry and it's\n        // not empty then start a new one.\n        if (geometry && geometry.data.vertices.length) {\n            geometry = null;\n        }\n    }\n\n    function setGeometry() {\n        if (!geometry) {\n\n            const vertices: number[] = [];\n            const textures: number[] = [];\n            const normals: number[] = [];\n\n            vertexData = [\n                vertices,\n                textures,\n                normals,\n            ];\n\n            geometry = {\n                object,\n                groups,\n                material,\n                data: {\n                    vertices,\n                    textures,\n                    normals,\n                },\n            };\n\n            geometries.push(geometry);\n        }\n    }\n\n    function addVertex(vert: string) {\n        const ptn = vert.split('/');\n        ptn.forEach((objIndexStr: string, i: number) => {\n            if (!objIndexStr) {\n                return;\n            }\n            const objIndex = parseInt(objIndexStr);\n            const index = objIndex + (objIndex >= 0 ? 0 : objVertexData[i].length);\n            vertexData[i].push(...objVertexData[i][index]);\n        });\n    }\n\n    const keywords: Record<string, (parts: string[], unparsedArgs: string) => void> = {\n        v(parts: string[]) {\n            objPositions.push(parts.map(parseFloat));\n        },\n        vn(parts: string[]) {\n            objNormals.push(parts.map(parseFloat));\n        },\n        vt(parts: string[]) {\n            // should check for missing v and extra w?\n            objTexcoords.push(parts.map(parseFloat));\n        },\n        f(parts: string[]) {\n            setGeometry();\n            const numTriangles = parts.length - 2;\n            for (let tri = 0; tri < numTriangles; ++tri) {\n                addVertex(parts[0]);\n                addVertex(parts[tri + 1]);\n                addVertex(parts[tri + 2]);\n            }\n        },\n        s: () => {\n        },    // smoothing group\n        mtllib(parts: string[], unparsedArgs: string) {\n            // the spec says there can be multiple filenames here\n            // but many exist with spaces in a single filename\n            materialLibs.push(unparsedArgs);\n        },\n        usemtl(parts: string[], unparsedArgs: string) {\n            material = unparsedArgs;\n            newGeometry();\n        },\n        g(parts: string[]) {\n            groups = parts;\n            newGeometry();\n        },\n        o(parts: string[], unparsedArgs: string) {\n            object = unparsedArgs;\n            newGeometry();\n        },\n    };\n\n    const keywordRE = /(\\w*)(?: )*(.*)/;\n    const lines = text.split('\\n');\n    for (let lineNo = 0; lineNo < lines.length; ++lineNo) {\n        const line = lines[lineNo].trim();\n        if (line === '' || line.startsWith('#')) {\n            continue;\n        }\n        const m = keywordRE.exec(line);\n        if (!m) {\n            continue;\n        }\n        const [, keyword, unparsedArgs] = m;\n        const parts = line.split(/\\s+/).slice(1);\n        const handler = keywords[keyword];\n        if (!handler) {\n            console.warn('unhandled keyword:', keyword);  // eslint-disable-line no-console\n            continue;\n        }\n        handler(parts, unparsedArgs);\n    }\n\n    // remove any arrays that have no entries.\n    for (const geometry of geometries) {\n        geometry.data = Object.fromEntries(\n            Object.entries(geometry.data).filter(([key, array]) => array.length > 0)\n        ) as IObjGeometryData;\n    }\n\n    return {\n        geometries,\n        materialLibs,\n    };\n}\n\nexport function transformLeftToRightCoordinateSystem(objData: IObjData): {\n    geometries: IObjGeometry[],\n    materialLibs: string[]\n} {\n\n    const convertedGeometries: IObjGeometry[] = objData.geometries.map(geometry => {\n        const vertices = geometry.data.vertices;\n        const normals = geometry.data.normals;\n        const textures = geometry.data.textures;\n\n        rotateObject(geometry.data, 0);\n\n        let convertedVertices: number[] = [];\n        let convertedNormals: number[] = [];\n        let convertedTextures: number[] = [];\n\n        // Convert positions\n        for (let i = 0; i < vertices.length; i += 3) {\n            const x = vertices[i];\n            const y = vertices[i + 1];\n            const z = vertices[i + 2];\n            convertedVertices.push(x, y, z);\n        }\n\n        // Convert normals\n        for (let i = 0; i < normals.length; i += 3) {\n            const x = normals[i];\n            const y = normals[i + 1];\n            const z = normals[i + 2];\n            convertedNormals.push(x, y, -z);\n        }\n\n        // Convert textures\n        for (let i = 0; i < textures.length; i += 2) {\n            const s = textures[i];\n            const t = 1 - textures[i + 1];\n            convertedTextures.push(s, t);\n        }\n\n        return {\n            object: geometry.object,\n            groups: geometry.groups,\n            material: geometry.material,\n            data: {\n                vertices: convertedVertices,\n                normals: convertedNormals,\n                textures: convertedTextures\n            }\n        };\n    });\n\n    return {\n        geometries: convertedGeometries,\n        materialLibs: objData.materialLibs\n    };\n}\n\nfunction rotateObject(obj: IObjGeometryData, angle: number): { vertices: number[], normals: number[] } {\n    const cosA = Math.cos(angle);\n    const sinA = Math.sin(angle);\n\n    const vertices = obj.vertices;\n    const normals = obj.normals;\n\n    for (let i = 0; i < vertices.length; i += 3) {\n        const x = vertices[i];\n        const y = vertices[i + 1];\n        const z = vertices[i + 2];\n\n        vertices[i] = x * cosA + z * sinA;\n        vertices[i + 1] = y;\n        vertices[i + 2] = -x * sinA + z * cosA;\n\n        const nx = normals[i];\n        const ny = normals[i + 1];\n        const nz = normals[i + 2];\n\n        normals[i] = nx * cosA + nz * sinA;\n        normals[i + 1] = ny;\n        normals[i + 2] = -nx * sinA + nz * cosA;\n    }\n\n    return {\n        vertices: vertices,\n        normals: normals\n    };\n}\n\n","import {htmlColorToFloat32Array, TypedArray} from './utils/shared';\nimport {NumberArray3, Vec3} from './math/Vec3';\nimport {DEGREES, DEGREES_DOUBLE, MAX, MIN, RADIANS_HALF} from './math';\nimport {Mat4} from \"./math/Mat4\";\nimport {transformLeftToRightCoordinateSystem, objParser} from \"./utils/objParser\";\n\nfunction getColor(color?: number[] | TypedArray | string): Float32Array {\n    if (color instanceof Array) {\n        return new Float32Array(color);\n    } else if (typeof color === 'string') {\n        return htmlColorToFloat32Array(color);\n    }\n    return new Float32Array([1.0, 1.0, 1.0, 1.0]);\n}\n\ninterface IObject3dParams {\n    name?: string;\n    vertices?: number[];\n    texCoords?: number[];\n    indices?: number[];\n    normals?: number[];\n    center?: boolean;\n    src?: string;\n    color?: number[] | TypedArray | string;\n    scale?: number | Vec3;\n}\n\nclass Object3d {\n\n    protected _name: string;\n    protected _vertices: number[];\n    protected _numVertices: number;\n    protected _texCoords: number[];\n\n    /**\n     * Image src.\n     * @protected\n     * @type {string}\n     */\n    protected _src: string | null;\n\n    protected color: Float32Array;\n\n    protected _indices: number[];\n    protected _normals: number[];\n\n    constructor(data: IObject3dParams = {}) {\n\n        this._name = data.name || \"noname\";\n        this._vertices = data.vertices || [];\n        this._numVertices = this._vertices.length / 3;\n        this._texCoords = data.texCoords || new Array(2 * this._numVertices);\n\n        if (data.center) {\n            Object3d.centering(this._vertices);\n        }\n\n        /**\n         * Image src.\n         * @protected\n         * @type {string}\n         */\n        this._src = data.src || null;\n\n        this.color = getColor(data.color);\n\n        if (data.scale) {\n            let s = data.scale;\n            let scale: Vec3;\n            if (typeof s === 'number') {\n                scale = new Vec3(s, s, s);\n            } else {\n                scale = s;\n            }\n            Object3d.scale(this._vertices, scale);\n        }\n\n        if (data.indices) {\n            this._indices = data.indices;\n            this._normals = data.normals || [];\n        } else {\n            this._normals = Object3d.getNormals(this._vertices);\n            this._indices = new Array(this._vertices.length / 3);\n            for (let i = 0, len = this._indices.length; i < len; i++) {\n                this._indices[i] = i;\n            }\n        }\n    }\n\n    static centering(verts: number[]) {\n        let min_x = MAX, min_y = MAX, min_z = MAX, max_x = MIN, max_y = MIN, max_z = MIN;\n        for (let i = 0, len = verts.length; i < len; i += 3) {\n            let x = verts[i], y = verts[i + 1], z = verts[i + 2];\n            if (x < min_x) min_x = x;\n            if (y < min_y) min_y = y;\n            if (z < min_z) min_z = z;\n            if (x > max_x) max_x = x;\n            if (y > max_y) max_y = y;\n            if (z > max_z) max_z = z;\n        }\n\n        let c_x = min_x + (max_x - min_x) * 0.5;\n        let c_y = min_y + (max_y - min_y) * 0.5;\n        let c_z = min_z + (max_z - min_z) * 0.5;\n\n        for (let i = 0, len = verts.length; i < len; i += 3) {\n            verts[i] -= c_x;\n            verts[i + 1] -= c_y;\n            verts[i + 2] -= c_z;\n        }\n    }\n\n    public centering(): this {\n        Object3d.centering(this._vertices);\n        return this;\n    }\n\n    public applyMat4(m: Mat4): this {\n        for (let i = 0, len = this._vertices.length; i < len; i += 3) {\n            let v = new Vec3(this._vertices[i], this._vertices[i + 1], this._vertices[i + 2]),\n                n = new Vec3(this._normals[i], this._normals[i + 1], this._normals[i + 2]);\n\n            v = m.mulVec3(v);\n            n = m.mulVec3(n);\n\n            this._vertices[i] = v.x;\n            this._vertices[i + 1] = v.y;\n            this._vertices[i + 2] = v.z;\n\n            this._normals[i] = n.x;\n            this._normals[i + 1] = n.y;\n            this._normals[i + 2] = n.z;\n        }\n        return this;\n    }\n\n    public scale(s: Vec3): this {\n        Object3d.scale(this._vertices, s);\n        return this;\n    }\n\n    public translate(v: Vec3): this {\n        for (let i = 0, len = this._vertices.length; i < len; i += 3) {\n            this._vertices[i] += v.x;\n            this._vertices[i + 1] += v.y;\n            this._vertices[i + 2] += v.z;\n        }\n        return this;\n    }\n\n    public get src(): string | null {\n        return this._src;\n    }\n\n    public set src(src: string | null) {\n        this._src = src;\n    }\n\n    public get name(): string {\n        return this._name;\n    }\n\n    public get vertices(): number[] {\n        return this._vertices;\n    }\n\n    public get normals(): number[] {\n        return this._normals;\n    }\n\n    public get indices(): number[] {\n        return this._indices;\n    }\n\n    public get texCoords(): number[] {\n        return this._texCoords;\n    }\n\n    public get numVertices(): number {\n        return this._numVertices;\n    }\n\n    static scale(vertices: number[], s: Vec3) {\n        for (let i = 0; i < vertices.length; i += 3) {\n            vertices[i] *= s.x;\n            vertices[i + 1] *= s.y;\n            vertices[i + 2] *= s.z;\n        }\n    }\n\n    static centroid(vertices: number[]) {\n        let minX = 1000.0, minY = 1000.0, minZ = 1000.0, maxX = -1000.0, maxY = -1000.0, maxZ = -1000.0;\n\n        for (let i = 0; i < vertices.length; i += 3) {\n            let x = vertices[i], y = vertices[i + 1], z = vertices[i + 2];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (z < minZ) minZ = z;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            if (z > maxZ) maxZ = z;\n        }\n\n        return [minX + (maxX - minX) * 0.5, minY + (maxY - minY) * 0.5, minZ + (maxZ - minZ) * 0.5];\n    }\n\n    static translate(vertices: number[], v: NumberArray3) {\n        for (let i = 0; i < vertices.length; i += 3) {\n            vertices[i] += v[0];\n            vertices[i + 1] += v[1];\n            vertices[i + 2] += v[2];\n        }\n    }\n\n    static getNormals(vertices: number[]): number[] {\n        let res = new Array(vertices.length);\n\n        for (let i = 0; i < vertices.length; i += 9) {\n\n            let t03 = i, t13 = i + 3, t23 = i + 6, v0_x = vertices[t03], v0_y = vertices[t03 + 1],\n                v0_z = vertices[t03 + 2], v1_x = vertices[t13], v1_y = vertices[t13 + 1], v1_z = vertices[t13 + 2],\n                v2_x = vertices[t23], v2_y = vertices[t23 + 1], v2_z = vertices[t23 + 2], vv0_x = v1_x - v0_x,\n                vv0_y = v1_y - v0_y, vv0_z = v1_z - v0_z, vv1_x = v2_x - v0_x, vv1_y = v2_y - v0_y, vv1_z = v2_z - v0_z,\n                n_x = vv0_y * vv1_z - vv0_z * vv1_y, n_y = vv0_z * vv1_x - vv0_x * vv1_z,\n                n_z = vv0_x * vv1_y - vv0_y * vv1_x;\n\n            let l = Math.sqrt(n_x * n_x + n_y * n_y + n_z * n_z);\n\n            n_x /= l;\n            n_y /= l;\n            n_z /= l;\n\n            res[t03] = n_x;\n            res[t03 + 1] = n_y;\n            res[t03 + 2] = n_z;\n\n            res[t13] = n_x;\n            res[t13 + 1] = n_y;\n            res[t13 + 2] = n_z;\n\n            res[t23] = n_x;\n            res[t23 + 1] = n_y;\n            res[t23 + 2] = n_z;\n        }\n\n        return res;\n    }\n\n    static createSphere(lonBands: number = 16, latBands: number = 16, radius: number = 1.0,\n                        offsetX: number = 0, offsetY: number = 0, offsetZ: number = 0): Object3d {\n\n        let vertices = [], indices = [], normals = [];\n\n        for (let latNumber = 0; latNumber <= latBands; latNumber++) {\n            let theta = latNumber * Math.PI / latBands;\n            let sinTheta = Math.sin(theta);\n            let cosTheta = Math.cos(theta);\n\n            for (let longNumber = 0; longNumber <= lonBands; longNumber++) {\n                let phi = longNumber * 2 * Math.PI / lonBands;\n                let sinPhi = Math.sin(phi);\n                let cosPhi = Math.cos(phi);\n                let x = cosPhi * sinTheta + offsetX;\n                let y = cosTheta + offsetY;\n                let z = sinPhi * sinTheta + offsetZ;\n                //var u = 1 - (longNumber / lonBands);\n                //var v = latNumber / latBands;\n                normals.push(x);\n                normals.push(y);\n                normals.push(z);\n                //texCoords.push(u);\n                //texCoords.push(v);\n                vertices.push(radius * x);\n                vertices.push(radius * y);\n                vertices.push(radius * z);\n            }\n        }\n\n        for (let latNumber = 0; latNumber < latBands; latNumber++) {\n            for (let longNumber = 0; longNumber < lonBands; longNumber++) {\n                let first = (latNumber * (lonBands + 1)) + longNumber;\n                let second = first + lonBands + 1;\n\n                indices.push(first);\n                indices.push(first + 1);\n                indices.push(second);\n\n                indices.push(second);\n                indices.push(first + 1);\n                indices.push(second + 1);\n            }\n        }\n\n        return new Object3d({\n            'vertices': vertices, 'normals': normals, 'indices': indices\n        });\n    }\n\n    static createDisc(radius: number = 1.0, height: number = 0.0,\n                      radialSegments: number = 8, isTop: boolean = true, startIndex: number = 0,\n                      offsetX: number = 0, offsetY: number = 0, offsetZ: number = 0\n    ): Object3d {\n\n        let vertices = [], indices = [], normals = [];\n\n        let thetaStart = 0.0, thetaLength = Math.PI * 2;\n\n        let sign = isTop ? 1.0 : -1.0;\n\n        let centerIndexStart = startIndex;\n\n        for (let x = 1; x <= radialSegments; x++) {\n            vertices.push(offsetX, height * sign + offsetY, offsetZ);\n            normals.push(0, sign, 0);\n            //texCoords.push(0.5, 0.5);\n            startIndex++;\n        }\n\n        let centerIndexEnd = startIndex;\n\n        for (let x = 0; x <= radialSegments; x++) {\n\n            let u = x / radialSegments;\n            let theta = u * thetaLength + thetaStart;\n\n            let cosTheta = Math.cos(theta);\n            let sinTheta = Math.sin(theta);\n\n            vertices.push(radius * sinTheta + offsetX, height * sign + offsetY, radius * cosTheta + offsetZ);\n            normals.push(0, sign, 0);\n            //texCoords.push((cosTheta * 0.5) + 0.5, (sinTheta * 0.5 * sign) + 0.5);\n\n            startIndex++;\n        }\n\n        for (let x = 0; x < radialSegments; x++) {\n            let c = centerIndexStart + x, i = centerIndexEnd + x;\n            if (isTop) {\n                indices.push(i, i + 1, c);\n            } else {\n                indices.push(i + 1, i, c);\n            }\n        }\n\n        return new Object3d({\n            'vertices': vertices, 'normals': normals, 'indices': indices\n        });\n    }\n\n    /**\n     * Returns scale parameters for a frustum geoObject created with only Object3d.createFrustum();\n     * @param length\n     * @param horizontalAngle\n     * @param verticalAngle\n     */\n    static getFrustumScaleByCameraAngles(length: number, horizontalAngle: number, verticalAngle: number): Vec3 {\n        return new Vec3(\n            2.0 * length * Math.tan(RADIANS_HALF * horizontalAngle),\n            2.0 * length * Math.tan(RADIANS_HALF * verticalAngle),\n            length\n        );\n    }\n\n    /**\n     * Returns scale parameters for a frustum geoObject created with only Object3d.createFrustum();\n     * @param length\n     * @param horizontalAngle\n     * @param aspectRatio\n     */\n    static getFrustumScaleByCameraAspectRatio(length: number, horizontalAngle: number, aspectRatio: number): Vec3 {\n        let vAngle = DEGREES_DOUBLE * Math.atan(Math.tan(RADIANS_HALF * horizontalAngle) / aspectRatio);\n        return Object3d.getFrustumScaleByCameraAngles(length, horizontalAngle, vAngle);\n    }\n\n    static createFrustum(length: number = 1, width: number = 1, height: number = 1,\n                         xOffset: number = 0, yOffset: number = 0, zOffset: number = 0): Object3d {\n\n        width *= 0.5;\n        height *= 0.5;\n\n        return new Object3d({\n            vertices: [\n                //\n                //inside\n                //\n                //top\n                0 + xOffset, 0 + yOffset, 0 + zOffset,\n                -1 * width + xOffset, 1 * height + yOffset, -1 * length + zOffset,\n                1 * width + xOffset, 1 * height + yOffset, -1 * length + zOffset,\n                //bottop\n                0 + xOffset, 0 + yOffset, 0 + zOffset,\n                1 * width + xOffset, -1 * height + yOffset, -1 * length + zOffset,\n                -1 * width + xOffset, -1 * height + yOffset, -1 * length + zOffset,\n                //right\n                0 + xOffset, 0 + yOffset, 0 + zOffset,\n                1 * width + xOffset, 1 * height + yOffset, -1 * length + zOffset,\n                1 * width + xOffset, -1 * height + yOffset, -1 * length + zOffset,\n                //left\n                0 + xOffset, 0 + yOffset, 0 + zOffset,\n                -1 * width + xOffset, -1 * height + yOffset, -1 * length + zOffset,\n                -1 * width + xOffset, 1 * height + yOffset, -1 * length + zOffset,\n                //\n                // outside\n                //\n                //top\n                0 + xOffset, 0 + yOffset, 0 + zOffset,\n                1 * width + xOffset, 1 * height + yOffset, -1 * length + zOffset,\n                -1 * width + xOffset, 1 * height + yOffset, -1 * length + zOffset,\n                //bottop\n                0 + xOffset, 0 + yOffset, 0 + zOffset,\n                -1 * width + xOffset, -1 * height + yOffset, -1 * length + zOffset,\n                1 * width + xOffset, -1 * height + yOffset, -1 * length + zOffset,\n                //right\n                0 + xOffset, 0 + yOffset, 0 + zOffset,\n                1 * width + xOffset, -1 * height + yOffset, -1 * length + zOffset,\n                1 * width + xOffset, 1 * height + yOffset, -1 * length + zOffset,\n                //left\n                0 + xOffset, 0 + yOffset, 0 + zOffset,\n                -1 * width + xOffset, 1 * height + yOffset, -1 * length + zOffset,\n                -1 * width + xOffset, -1 * height + yOffset, -1 * length + zOffset\n            ]\n        });\n    }\n\n    static createCylinder(radiusTop: number = 1.0, radiusBottom: number = 1.0, height: number = 1.0,\n                          radialSegments: number = 32, heightSegments: number = 1.0, isTop: boolean = true,\n                          isBottom: boolean = true, offsetX: number = 0, offsetY: number = 0, offsetZ: number = 0): Object3d {\n\n        let vertices: number[] = [],\n            indices: number[] = [],\n            normals: number[] = [];\n\n        let thetaStart = 0.0, thetaLength = Math.PI * 2;\n\n        let index = 0;\n        let indexArray = [];\n\n        let normal = new Vec3();\n\n        let slope = (radiusBottom - radiusTop) / height;\n\n        for (let y = 0; y <= heightSegments; y++) {\n\n            let indexRow = [];\n\n            let v = y / heightSegments;\n\n            let radius = v * (radiusBottom - radiusTop) + radiusTop;\n\n            for (let x = 0; x <= radialSegments; x++) {\n\n                let u = x / radialSegments;\n\n                let theta = u * thetaLength + thetaStart;\n\n                let sinTheta = Math.sin(theta), cosTheta = Math.cos(theta);\n\n                vertices.push(radius * sinTheta + offsetX, -v * height + height + offsetY, radius * cosTheta + offsetZ);\n\n                normal.set(sinTheta, slope, cosTheta).normalize();\n                normals.push(normal.x, normal.y, normal.z);\n\n                //texCoords.push(u, 1 - v);\n\n                indexRow.push(index++);\n            }\n            indexArray.push(indexRow);\n        }\n\n        for (let x = 0; x < radialSegments; x++) {\n            for (let y = 0; y < heightSegments; y++) {\n\n                let a = indexArray[y][x], b = indexArray[y + 1][x], c = indexArray[y + 1][x + 1],\n                    d = indexArray[y][x + 1];\n\n                indices.push(a, b, d);\n                indices.push(b, c, d);\n            }\n        }\n\n        if (radiusTop !== 0.0 && isTop) {\n            let cap = Object3d.createDisc(radiusTop, height, radialSegments, true, index, offsetX, offsetY, offsetZ);\n            vertices.push(...cap.vertices);\n            normals.push(...cap.normals);\n            indices.push(...cap.indices);\n        }\n\n        if (radiusBottom !== 0.0 && isBottom) {\n            let cap = Object3d.createDisc(radiusBottom, 0, radialSegments, false, index + (isTop ? (1 + 2 * radialSegments) : 0), offsetX, offsetY, offsetZ);\n            vertices.push(...cap.vertices);\n            normals.push(...cap.normals);\n            indices.push(...cap.indices);\n        }\n\n        return new Object3d({\n            vertices: vertices,\n            normals: normals,\n            indices: indices\n        });\n    }\n\n    static createCube(length: number = 1, height: number = 1, depth: number = 1,\n                      xOffset: number = 0, yOffset: number = 0, zOffset: number = 0): Object3d {\n        let l = length * 0.5 + xOffset, h = height * 0.5 + yOffset, d = depth * 0.5 + zOffset;\n\n        return new Object3d({\n            vertices: [//bottom\n                -l, -h, d, l, -h, -d, l, -h, d, -l, -h, d, -l, -h, -d, l, -h, -d,\n\n                //top\n                -l, h, d, l, h, d, l, h, -d, -l, h, d, l, h, -d, -l, h, -d,\n\n                //front\n                -l, -h, d, l, -h, d, -l, h, d, -l, h, d, l, -h, d, l, h, d,\n\n                //back\n                -l, -h, -d, -l, h, -d, l, -h, -d, -l, h, -d, l, h, -d, l, -h, -d,\n\n                //left\n                l, -h, d, l, -h, -d, l, h, d, l, h, d, l, -h, -d, l, h, -d,\n\n                //right\n                -l, -h, d, -l, h, d, -l, -h, -d, -l, h, d, -l, h, -d, -l, -h, -d]\n        });\n    }\n\n    static createArrow(back: number = 0.0, height: number = 2.1, front: number = -15): Object3d {\n        return new Object3d({\n            vertices: [0, height, 0, 7, 0, 6, 0, 0, front,\n                0, 0, back, 7, 0, 6, 0, height, 0,\n                -7, 0, 6, 0, 0, back, 0, height, 0,\n                -7, 0, 6, 0, height, 0, 0, 0, front,\n                -7, 0, 6, 0, 0, front, 0, 0, back, 0, 0, back, 0, 0, front, 7, 0, 6]\n        });\n    }\n\n\n    static async loadObj(src: string): Promise<Object3d[]> {\n        const obj: any = await fetch(src, {mode: \"cors\",})\n            .then((response) => response.text())\n            .then((data) => transformLeftToRightCoordinateSystem(objParser(data)))\n            .catch(() => []);\n\n        return obj.geometries.map(({data: {vertices, normals, textures}}: any) => new Object3d({\n            vertices,\n            normals,\n            texCoords: textures\n        }));\n    }\n\n    merge(other: Object3d): Object3d {\n        const mergedVertices = [...this._vertices, ...other.vertices];\n        const mergedNormals = [...this._normals, ...other.normals];\n        const mergedTexCoords = [...this._texCoords, ...other.texCoords];\n\n        const offset = this._vertices.length / 3;\n        const mergedIndices = [\n            ...this._indices,\n            ...other.indices.map(index => index + offset)\n        ];\n\n        return new Object3d({\n            name: `${this._name}_${other.name}`,\n            vertices: mergedVertices,\n            texCoords: mergedTexCoords,\n            indices: mergedIndices,\n            normals: mergedNormals,\n            color: this.color\n        });\n    }\n}\n\nexport {Object3d};","import * as utils from \"../utils/shared\";\nimport {Entity} from \"./Entity\";\nimport {Quat, Vec3, Vec4} from \"../math/index\";\nimport {GeoObjectHandler, InstanceData} from \"./GeoObjectHandler\";\nimport {NumberArray3} from \"../math/Vec3\";\nimport {NumberArray4} from \"../math/Vec4\";\nimport {Object3d} from \"../Object3d\";\nimport {RADIANS} from \"../math\";\n\nexport interface IGeoObjectParams {\n    object3d?: Object3d;\n    objSrc?: string;\n    textureSrc?: string;\n    tag?: string;\n    position?: Vec3 | NumberArray3;\n    pitch?: number;\n    yaw?: number;\n    roll?: number;\n    scale?: number | Vec3 | NumberArray3;\n    translate?: Vec3 | NumberArray3;\n    color?: Vec4 | NumberArray4 | string;\n    visibility?: boolean;\n}\n\n/**\n * @class\n * @param {Object} options -  Geo object parameters:\n * @param {Vec3} [options.position] - Geo object position.\n *\n * @todo: GeoObject and GeoObjectHandler provides instanced objects only.\n * It would be nice if it could provide not instanced rendering loop too.\n */\nclass GeoObject {\n    protected _tag: string;\n\n    public instanced: boolean;\n\n    /**\n     * Entity instance that holds this geo object.\n     * @public\n     * @type {Entity}\n     */\n    public _entity: Entity | null;\n\n    /**\n     * Geo object center cartesian position.\n     * @protected\n     * @type {Vec3}\n     */\n    protected _position: Vec3;\n    public _positionHigh: Vec3;\n    public _positionLow: Vec3;\n\n    protected _pitch: number;\n    protected _yaw: number;\n    protected _roll: number;\n\n    protected _pitchRad: number;\n    protected _yawRad: number;\n    protected _rollRad: number;\n\n    protected _scale: Vec3;\n    protected _translate: Vec3;\n\n    /**\n     * RGBA color.\n     * @public\n     * @type {Vec4}\n     */\n    public _color: Vec4;\n\n    public _qRot: Quat;\n\n    protected _direction: Vec3;\n\n    public _handler: GeoObjectHandler | null;\n    public _handlerIndex = -1;\n\n    public _tagData: InstanceData | null;\n    public _tagDataIndex: number;\n\n    protected _object3d: Object3d;\n\n    protected _visibility: boolean;\n\n    protected _qNorthFrame: Quat;\n    private _textureSrc?: string;\n    public _objectSrc?: string;\n\n    protected _children: GeoObject[];\n\n    constructor(options: IGeoObjectParams) {\n\n        this._tag = options.tag || \"none\";\n\n        this.instanced = true;\n\n        this._entity = null;\n\n        this._position = utils.createVector3(options.position);\n\n        this._positionHigh = new Vec3();\n        this._positionLow = new Vec3();\n        Vec3.doubleToTwoFloats(this._position, this._positionHigh, this._positionLow);\n\n        this._pitch = options.pitch || 0.0;\n        this._yaw = options.yaw || 0.0;\n        this._roll = options.roll || 0.0;\n\n        this._pitchRad = this._pitch * RADIANS;\n        this._yawRad = this._yaw * RADIANS;\n        this._rollRad = this._roll * RADIANS;\n\n        this._scale = utils.createVector3(options.scale, new Vec3(1, 1, 1));\n        this._translate = utils.createVector3(options.translate, new Vec3());\n\n        this._color = utils.createColorRGBA(options.color);\n\n        this._qRot = Quat.IDENTITY;\n\n        this._handler = null;\n        this._handlerIndex = -1;\n\n        this._tagData = null;\n        this._tagDataIndex = -1;\n        let object3d = options.object3d;\n        if ((!options.object3d || options.object3d?.vertices.length === 0)) {\n            object3d = new Object3d();\n        }\n        if (options.objSrc) {\n            this.setObjectSrc(options.objSrc)\n            this._objectSrc = options.objSrc;\n        }\n        this._object3d = object3d as Object3d;\n        if (options.textureSrc) {\n            this.setTextureSrc(options.textureSrc)\n        }\n        this._visibility = (options.visibility != undefined ? options.visibility : true);\n\n        this._children = [];\n\n        this._direction = new Vec3();\n\n        this._qNorthFrame = new Quat();\n    }\n\n    public get tag() {\n        return this._tag;\n    }\n\n    public getPosition(): Vec3 {\n        return this._position;\n    }\n\n    public getPitch(): number {\n        return this._pitch;\n    }\n\n    public getYaw(): number {\n        return this._yaw;\n    }\n\n    public getRoll(): number {\n        return this._roll;\n    }\n\n    public get object3d(): Object3d {\n        return this._object3d;\n    }\n\n    public get vertices(): number[] {\n        return this._object3d.vertices;\n    }\n\n    public get normals(): number[] {\n        return this._object3d.normals;\n    }\n\n    public get texCoords(): number[] {\n        return this._object3d.texCoords;\n    }\n\n    public get indices(): number[] {\n        return this._object3d.indices;\n    }\n\n    /**\n     * Sets geo object opacity.\n     * @public\n     * @param {number} a - Billboard opacity.\n     */\n    public setOpacity(a: number) {\n        this._color.w = a;\n        this.setColor(this._color.x, this._color.y, this._color.z, a);\n    }\n\n    /**\n     * Sets color.\n     * @public\n     * @param {number} r - Red.\n     * @param {number} g - Green.\n     * @param {number} b - Blue.\n     * @param {number} [a] - Alpha.\n     */\n    public setColor(r: number, g: number, b: number, a?: number) {\n        this._color.x = r;\n        this._color.y = g;\n        this._color.z = b;\n        a != undefined && (this._color.w = a);\n        this._handler && this._handler.setRgbaArr(this._tagData!, this._tagDataIndex, this._color);\n    }\n\n    /**\n     * Sets color.\n     * @public\n     * @param {Vec3 | Vec4} color - RGBA vector.\n     */\n    public setColor4v(color: Vec3 | Vec4) {\n        this._color.x = color.x;\n        this._color.y = color.y;\n        this._color.z = color.z;\n        (color as Vec4).w != undefined && (this._color.w = (color as Vec4).w);\n        this._handler && this._handler.setRgbaArr(this._tagData!, this._tagDataIndex, this._color);\n    }\n\n    /**\n     * Sets geo object visibility.\n     * @public\n     * @param {boolean} visibility - Visibility flag.\n     */\n    public setVisibility(visibility: boolean) {\n        this._visibility = visibility;\n        this._handler && this._handler.setVisibility(this._tagData!, this._tagDataIndex, visibility);\n    }\n\n    /**\n     * Returns geo object visibility.\n     * @public\n     * @returns {boolean}\n     */\n    public getVisibility(): boolean {\n        return this._visibility;\n    }\n\n    /**\n     * Sets geo object position.\n     * @public\n     * @param {number} x - X coordinate.\n     * @param {number} y - Y coordinate.\n     * @param {number} z - Z coordinate.\n     */\n    public setPosition(x: number, y: number, z: number) {\n        this._position.x = x;\n        this._position.y = y;\n        this._position.z = z;\n        Vec3.doubleToTwoFloats(this._position, this._positionHigh, this._positionLow);\n        this._handler &&\n        this._handler.setPositionArr(this._tagData!, this._tagDataIndex, this._positionHigh, this._positionLow);\n        this.updateRotation();\n    }\n\n    /**\n     * Sets geo object position.\n     * @public\n     * @param {Vec3} position - Cartesian coordinates.\n     */\n    public setPosition3v(position: Vec3) {\n        this._position.x = position.x;\n        this._position.y = position.y;\n        this._position.z = position.z;\n        Vec3.doubleToTwoFloats(position, this._positionHigh, this._positionLow);\n        this._handler && this._handler.setPositionArr(this._tagData!, this._tagDataIndex, this._positionHigh, this._positionLow);\n        this.updateRotation();\n    }\n\n    public setYaw(yaw: number) {\n        this._yaw = yaw;\n        this._yawRad = yaw * RADIANS;\n        this.updateRotation();\n    }\n\n    public setObject(object: Object3d) {\n        this._object3d = object;\n    }\n\n    public setObjectSrc(src: string) {\n        this._objectSrc = src;\n        this._handler && this._handler.setObjectSrc(src, this.tag);\n    }\n\n    public setTextureSrc(src: string) {\n        this._textureSrc = src;\n        this._object3d && (this._object3d.src = src);\n        this._handler && this._handler.setTextureTag(src, this.tag);\n    }\n\n    public setColorHTML(color: string) {\n        this.setColor4v(utils.htmlColorToRgba(color));\n    }\n\n    /**\n     *\n     * @param {number} pitch - Pitch in radians\n     */\n    public setPitch(pitch: number) {\n        this._pitch = pitch;\n        this._pitchRad = pitch * RADIANS;\n        this.updateRotation();\n    }\n\n    public setRoll(roll: number) {\n        this._roll = roll;\n        this._rollRad = roll * RADIANS;\n        this.updateRotation();\n    }\n\n    public setPitchYawRoll(pitch: number, yaw: number, roll: number) {\n        this._pitch = pitch;\n        this._yaw = yaw;\n        this._roll = roll;\n\n        this._pitchRad = pitch * RADIANS;\n        this._yawRad = yaw * RADIANS;\n        this._rollRad = roll * RADIANS;\n\n        this.updateRotation();\n    }\n\n    public setScale(scale: number) {\n        this._scale.x = this._scale.y = this._scale.z = scale;\n        this._handler && this._handler.setScaleArr(this._tagData!, this._tagDataIndex, this._scale);\n    }\n\n    public setScale3v(scale: Vec3) {\n        this._scale.copy(scale);\n        this._handler && this._handler.setScaleArr(this._tagData!, this._tagDataIndex, scale);\n    }\n\n    public getScale(): Vec3 {\n        return this._scale;\n    }\n\n    public setTranslate3v(translate: Vec3) {\n        this._translate.copy(translate);\n        this._handler && this._handler.setTranslateArr(this._tagData!, this._tagDataIndex, translate);\n    }\n\n    public getTranslate(): Vec3 {\n        return this._translate;\n    }\n\n    /**\n     * Removes geo object from handler.\n     * @public\n     */\n    public remove() {\n        this._entity = null;\n        this._handler && this._handler.remove(this);\n    }\n\n    /**\n     * Sets billboard picking color.\n     * @public\n     * @param {Vec3} color - Picking color.\n     */\n    public setPickingColor3v(color: Vec3) {\n        this._handler && this._handler.setPickingColorArr(this._tagData!, this._tagDataIndex, color);\n    }\n\n    public updateRotation() {\n\n        if (this._handler && this._handler._planet) {\n            this._qNorthFrame = this._handler._planet.getNorthFrameRotation(this._position);\n\n            let qp = Quat.xRotation(-this._pitchRad);\n            let qy = Quat.yRotation(this._yawRad);\n            let qr = Quat.zRotation(-this._rollRad);\n\n            this._qRot = qr.mul(qp).mul(qy).mul(this._qNorthFrame).conjugate();\n\n            this._direction = this._qRot.mulVec3(new Vec3(0.0, 0.0, -1.0)).normalize();\n\n            this._handler.setQRotArr(this._tagData!, this._tagDataIndex, this._qRot);\n        }\n    }\n\n    public getDirection(): Vec3 {\n        return this._direction.clone();\n    }\n}\n\nexport {GeoObject};\n","import * as utils from \"../utils/shared\";\nimport {BaseBillboard, IBaseBillboardParams} from \"./BaseBillboard\";\nimport {LOCK_FREE, LOCK_UPDATE} from \"./LabelWorker\";\nimport {NumberArray4, Vec4} from \"../math/Vec4\";\nimport {FontAtlas} from \"../utils/FontAtlas\";\nimport {LabelHandler} from \"./LabelHandler\";\n\nexport interface ILabelParams extends IBaseBillboardParams {\n    text?: string;\n    face?: string;\n    size?: number;\n    opacity?: number;\n    outline?: number;\n    outlineColor?: string | NumberArray4 | Vec4;\n    align?: string;\n    isRTL?: boolean;\n    letterSpacing?: number;\n}\n\nconst ALIGN: Record<string, number> = {\n    RIGHT: 0,\n    LEFT: 1,\n    CENTER: 2\n};\n\n/**\n * Text align options.\n * @readonly\n * @enum {number}\n */\nconst STR2ALIGN: Record<string, number> = {\n    left: ALIGN.LEFT,\n    right: ALIGN.RIGHT,\n    center: ALIGN.CENTER\n};\n\n/**\n * Billboard text label.\n * @class\n * @extends {BaseBillboard}\n * @param {Object} [options] - Label options:\n * @param {Vec3|Array.<number>} [options.position] - Billboard spatial position.\n * @param {number} [options.rotation] - Screen angle rotation.\n * @param {Vec4|string|Array.<number>} [options.color] - Billboard color.\n * @param {Vec3|Array.<number>} [options.alignedAxis] - Billboard aligned vector.\n * @param {Vec3|Array.<number>} [options.offset] - Billboard center screen offset.\n * @param {boolean} [options.visibility] - Visibility.\n * @param {string} [options.text] - Text string.\n * @param {string} [options.face] - HTML5 font face.\n * @param {number} [options.size] - Font size in pixels.\n * @param {string} [options.style] - HTML5 font style. Example 'normal', 'italic'.\n * @param {string} [options.weight] - HTML5 font weight. Example 'normal', 'bold'.\n * @param {number} [options.outline] - Text outline size. 0 - no outline, 1 - maximum outline. Default 0.58.\n * @param {Vec4|string|Array.<number>} [options.outlineColor] - Outline color.\n * @param {string} [options.align] - Text horizontal align: \"left\", \"right\" and \"center\".\n */\nclass Label extends BaseBillboard {\n\n    public override _handler: LabelHandler | null;\n\n    /**\n     * Label text string.\n     * @protected\n     * @type {string}\n     */\n    protected _text: string;\n\n    /**\n     * HTML5 font face.\n     * @private\n     * @type {string}\n     */\n    protected _face: string;\n\n    /**\n     * Font size in pixels.\n     * @protected\n     * @type {number}\n     */\n    protected _size: number;\n\n    /**\n     * Label outline.\n     * @protected\n     * @type {number}\n     */\n    protected _outline: number;\n\n    /**\n     * Label outline color.\n     * @protected\n     * @type {Vec4}\n     */\n    protected _outlineColor: Vec4;\n\n    /**\n     * Text horizontal align: \"left\", \"right\" and \"center\".\n     * @private\n     * @type {Label.ALIGN}\n     */\n    protected _align: number;\n\n    /**\n     * Label font atlas index.\n     * @protected\n     * @type {number}\n     */\n    protected _fontIndex: number;\n\n    /**\n     * Font atlas pointer.\n     * @private\n     * @type {FontAtlas}\n     */\n    protected _fontAtlas: FontAtlas | null;\n\n    protected _isRTL: boolean;\n\n    protected _letterSpacing: number;\n\n    constructor(options: ILabelParams = {}) {\n        super(options);\n\n        this._handler = null;\n\n        this._text = options.text || \"\";\n\n        this._face = utils.defaultString(options.face, \"arial\");\n\n        this._size = options.size || 24;\n\n        this._outline = options.outline != undefined ? options.outline : 0.0;\n\n        this._outlineColor = utils.createColorRGBA(\n            options.outlineColor,\n            new Vec4(0.0, 0.0, 0.0, 1.0)\n        );\n\n        this._align = options.align ? STR2ALIGN[options.align.trim().toLowerCase()] as number || ALIGN.RIGHT : ALIGN.RIGHT;\n\n        this._fontIndex = 0;\n\n        this._fontAtlas = null;\n\n        this._isRTL = options.isRTL || false;\n\n        this._letterSpacing = options.letterSpacing || 0;\n    }\n\n    /**\n     * Set label text.\n     * @public\n     * @param {string} text - Text string.\n     * It can't be bigger than maximum labelHandler _maxLetters value.\n     */\n    public setText(text: string) {\n        this._text = text.toString();\n        if (this._isReady && this._handler) {\n            this._handler.setText(this._handlerIndex, text, this._fontIndex, this._align, this._letterSpacing, this._isRTL);\n        }\n    }\n\n    /**\n     * Set text letter spacing.\n     * @public\n     * @param {number} spacing - Letter spacing.\n     */\n    public setLetterSpacing(letterSpacing: number) {\n        this._letterSpacing = letterSpacing;\n        if (this._isReady && this._handler) {\n            this._handler.setText(this._handlerIndex, this._text, this._fontIndex, this._align, letterSpacing, this._isRTL);\n        }\n    }\n\n    /**\n     * Returns label text letter spacing.\n     * @public\n     * @param {number} spacing - Letter spacing.\n     */\n    public getLetterSpacing(): number {\n        return this._letterSpacing;\n    }\n\n    /**\n     * Change text direction.\n     * @public\n     * @param {boolean} isRTL - Text string.\n     */\n    public setRtl(isRTL: boolean) {\n        this._isRTL = isRTL;\n        if (this._isReady && this._handler) {\n            this._handler.setText(this._handlerIndex, this._text, this._fontIndex, this._align, this._letterSpacing, this._isRTL);\n        }\n    }\n\n    /**\n     * Gets current text string.\n     * @public\n     * @returns {string}\n     */\n    public getText(): string {\n        return this._text;\n    }\n\n    /**\n     * Sets label text align. Could be center, left or right. Left is default.\n     * @public\n     * @param {string} align - Text align.\n     */\n    public setAlign(align: string) {\n        this._align = STR2ALIGN[align.trim().toLowerCase()] as number;\n        if (this._isReady && this._handler) {\n            this._handler.setText(this._handlerIndex, this._text, this._fontIndex, this._align, this._letterSpacing, this._isRTL);\n        } else if (this._lockId !== LOCK_FREE) {\n            this._lockId = LOCK_UPDATE;\n        }\n    }\n\n    /**\n     * Gets label text current alignment.\n     * @public\n     * @returns {string}\n     */\n    public getAlign(): number {\n        return this._align;\n    }\n\n    /**\n     * Sets font face family.\n     * @public\n     * @param {string} face - Font face family.\n     */\n    public setFace(face: string) {\n        this._face = face.trim();\n        this.update();\n    }\n\n    /**\n     * Gets current font face.\n     * @public\n     * @returns {string}\n     */\n    public getFace(): string {\n        return this._face;\n    }\n\n    /**\n     * Sets label font size in pixels.\n     * @public\n     * @param {number} size - Label size in pixels.\n     */\n    public setSize(size: number) {\n        if (size !== this._size) {\n            this._size = size;\n            if (this._isReady && this._handler) {\n                this._handler.setSizeArr(this._handlerIndex, size);\n            } else if (this._lockId !== LOCK_FREE) {\n                this._lockId = LOCK_UPDATE;\n            }\n        }\n    }\n\n    /**\n     * Gets label size in pixels.\n     * @public\n     * @returns {number}\n     */\n    public getSize(): number {\n        return this._size;\n    }\n\n    /**\n     * Sets text outline border size. Where 0 - is no outline, and 1 - is the maximum outline size.\n     * @public\n     * @param {number} outline - Text outline size.\n     */\n    public setOutline(outline: number) {\n        this._outline = outline;\n        if (this._isReady && this._handler) {\n            this._handler.setOutlineArr(this._handlerIndex, outline);\n        } else if (this._lockId !== LOCK_FREE) {\n            this._lockId = LOCK_UPDATE;\n        }\n    }\n\n    /**\n     * Gets text current outline size.\n     * @public\n     * @returns {number}\n     */\n    public getOutline(): number {\n        return this._outline;\n    }\n\n    /**\n     * Sets label opacity.\n     * @public\n     * @param {number} a - Label opacity.\n     */\n    public override setOpacity(a: number) {\n        super.setOpacity(a);\n        this.setOutlineOpacity(a);\n    }\n\n    /**\n     * Sets text outline color.\n     * @public\n     * @param {number} r - Red.\n     * @param {number} g - Green.\n     * @param {number} b - Blue.\n     * @param {number} a - Alpha.\n     */\n    public setOutlineColor(r: number, g: number, b: number, a: number) {\n        if (a !== this._outlineColor.w || r !== this._outlineColor.x || g !== this._outlineColor.y || b !== this._outlineColor.z) {\n            this._outlineColor.x = r;\n            this._outlineColor.y = g;\n            this._outlineColor.z = b;\n            this._outlineColor.w = a;\n            if (this._isReady && this._handler) {\n                this._handler.setOutlineColorArr(this._handlerIndex, this._outlineColor);\n            } else if (this._lockId !== LOCK_FREE) {\n                this._lockId = LOCK_UPDATE;\n            }\n        }\n    }\n\n    /**\n     * Sets text outline color.\n     * @public\n     * @param {Vec4} rgba - Color vector.\n     */\n    public setOutlineColor4v(rgba: Vec4) {\n        this.setOutlineColor(rgba.x, rgba.y, rgba.z, rgba.w);\n    }\n\n    /**\n     * Sets text outline color HTML string.\n     * @public\n     * @param {string} color - HTML string color.\n     */\n    public setOutlineColorHTML(color: string) {\n        this.setOutlineColor4v(utils.htmlColorToRgba(color));\n    }\n\n    /**\n     * Gets outline color vector.\n     * @public\n     * @returns {Vec4}\n     */\n    public getOutlineColor(): Vec4 {\n        return this._outlineColor;\n    }\n\n    /**\n     * Sets outline opacity. Actually outline color alpha value.\n     * @public\n     * @param {number} opacity - Outline opacity.\n     */\n    public setOutlineOpacity(opacity: number) {\n        if (opacity !== this._outlineColor.w) {\n            this._outlineColor.w = opacity;\n            if (this._isReady && this._handler) {\n                this._handler.setOutlineColorArr(this._handlerIndex, this._outlineColor);\n            } else if (this._lockId !== LOCK_FREE) {\n                this._lockId = LOCK_UPDATE;\n            }\n        }\n    }\n\n    /**\n     * Gets outline opacity value.\n     * @public\n     * @returns {number}\n     */\n    public getOutlineOpacity(): number {\n        return this._outlineColor.w;\n    }\n\n    /**\n     * Updates label parameters.\n     * @public\n     */\n    public async update() {\n        if (this._fontAtlas) {\n            const fontIndex = await this._fontAtlas.getFontIndex(this._face);\n            this._applyFontIndex(fontIndex);\n        }\n    }\n\n    protected _applyFontIndex(fontIndex: number) {\n        this._fontIndex = fontIndex;\n        if (this._isReady && this._handler) {\n            this._handler.setFontIndexArr(this._handlerIndex, this._fontIndex);\n            this._handler.setText(this._handlerIndex, this._text, this._fontIndex, this._align, this._letterSpacing, this._isRTL);\n        } else if (this._lockId !== LOCK_FREE) {\n            this._lockId = LOCK_UPDATE;\n        }\n    }\n\n    /**\n     * Assigns font atlas and update.\n     * @public\n     * @param {FontAtlas} fontAtlas - Font atlas.\n     */\n    public assignFontAtlas(fontAtlas: FontAtlas) {\n        if (!this._fontAtlas) {\n            this._fontAtlas = fontAtlas;\n        }\n        this.update();\n    }\n\n    public override serializeWorkerData(workerId: number): Float32Array | null {\n        if (this._handler) {\n            return new Float32Array([\n                /*0*/workerId,\n                /*1*/this._handler!._maxLetters,\n                /*2*/this.getVisibility() ? 1 : 0,\n                /*3, 4, 5*/this._positionHigh.x, this._positionHigh.y, this._positionHigh.z,\n                /*6, 7, 8*/this._positionLow.x, this._positionLow.y, this._positionLow.z,\n                /*9*/this._size,\n                /*10, 11, 12*/this._offset.x, this._offset.y, this._offset.z,\n                /*13, 14, 15, 16*/this._color.x, this._color.y, this._color.z, this._color.w,\n                /*17*/this._rotation,\n                /*18, 19, 20*/this._alignedAxis.x, this._alignedAxis.y, this._alignedAxis.z,\n                /*21*/this._fontIndex,\n                /*22*/this._outline,\n                /*23, 24, 25, 26*/this._outlineColor.x, this._outlineColor.y, this._outlineColor.z, this._outlineColor.w,\n                /*27, 28, 29*/this._entity!._pickingColor.x, this._entity!._pickingColor.y, this._entity!._pickingColor.z\n            ]);\n        }\n\n        return null;\n    }\n}\n\nexport {Label, ALIGN};\n","import {Entity} from \"./Entity\";\nimport {PointCloudHandler} from \"./PointCloudHandler\";\nimport {RenderNode} from \"../scene/RenderNode\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Vec4} from \"../math/Vec4\";\nimport {WebGLBufferExt} from \"../webgl/Handler\";\nimport {EntityCollection} from \"./EntityCollection\";\n\nexport interface IPointCloudParams {\n    visibility?: boolean;\n    pointSize?: number;\n    pickingScale?: number;\n    points?: Poi[];\n}\n\ntype Poi = [number, number, number, number, number, number, number, any | undefined];\n\ninterface IPoint {\n    _entity: Entity | null;\n    _pickingColor: Vec3;\n    _entityCollection: EntityCollection | null;\n    index: number;\n    position: Vec3;\n    color: Vec4;\n    pointCloud: PointCloud;\n    properties: any\n}\n\nconst COORDINATES_BUFFER = 0;\nconst COLOR_BUFFER = 1;\nconst PICKING_COLOR_BUFFER = 2;\n\n/**\n * PointCloud object.\n * @class\n * @param {*} [options] - Point cloud options:\n * @param {Array.<Array.<number>>} [options.points] - Points cartesian coordinates array,\n * where first three is cartesian coordinates, next fourth is an RGBA color, and last is a point properties.\n * @param {number} [options.pointSize] - Point screen size in pixels.\n * @param {number} [options.pickingScale] - Point border picking size in screen pixels.\n * @param {boolean} [options.visibility] - Point cloud visibility.\n * @example <caption>Creates point cloud with two ten pixel size points</caption>\n * new og.Entity({\n *     pointCloud: {\n *         pointSize: 10,\n *         points: [\n *             [0, 0, 0, 255, 255, 255, 255, { 'name': 'White point' }],\n *             [100, 100, 0, 255, 0, 0, 255, { 'name': 'Red point' }]\n *         ]\n *     }\n * });\n */\nclass PointCloud {\n    static __counter__: number = 0;\n    protected __id: number;\n\n    /**\n     * Cloud visibility.\n     * @public\n     * @type {boolean}\n     */\n    public visibility: boolean;\n\n    /**\n     * Point screen size in pixels.\n     * @public\n     * @type {number}\n     */\n    public pointSize: number;\n\n    /**\n     * Point picking border size in pixels.\n     * @public\n     * @type {number}\n     */\n    public pickingScale: number;\n\n    /**\n     * Parent collection render node.\n     * @protected\n     * @type {RenderNode | null}\n     */\n    protected _renderNode: RenderNode | null;\n\n    /**\n     * Entity instance that holds this point cloud.\n     * @public\n     * @type {Entity | null}\n     */\n    public _entity: Entity | null;\n\n    /**\n     * Points properties.\n     * @protected\n     * @type {IPoint[]}\n     */\n    protected _points: IPoint[];\n\n    /**\n     * Coordinates array.\n     * @protected\n     * @type {number[]}\n     */\n    protected _coordinatesData: number[];\n\n    /**\n     * Color array.\n     * @protected\n     * @type {number[]}\n     */\n    protected _colorData: number[];\n\n    /**\n     * Picking color array.\n     * @protected\n     * @type {number[]}\n     */\n    protected _pickingColorData: number[];\n\n    protected _coordinatesBuffer: WebGLBufferExt | null;\n    protected _colorBuffer: WebGLBufferExt | null;\n    protected _pickingColorBuffer: WebGLBufferExt | null;\n\n    /**\n     * Handler that stores and renders this object.\n     * @public\n     * @type {PointCloudHandler}\n     */\n    public _handler: PointCloudHandler | null;\n    public _handlerIndex: number;\n\n    protected _buffersUpdateCallbacks: Function[];\n    protected _changedBuffers: boolean[];\n\n    constructor(options: IPointCloudParams = {}) {\n\n        this.__id = PointCloud.__counter__++;\n\n        /**\n         * Cloud visibility.\n         * @public\n         * @type {boolean}\n         */\n        this.visibility = options.visibility != undefined ? options.visibility : true;\n\n        /**\n         * Point screen size in pixels.\n         * @public\n         * @type {number}\n         */\n        this.pointSize = options.pointSize || 3;\n\n        /**\n         * Point picking border size in pixels.\n         * @public\n         * @type {number}\n         */\n        this.pickingScale = options.pickingScale || 0;\n\n        /**\n         * Parent collection render node.\n         * @private\n         * @type {RenderNode}\n         */\n        this._renderNode = null;\n\n        /**\n         * Entity instance that holds this point cloud.\n         * @private\n         * @type {Entity}\n         */\n        this._entity = null;\n\n        /**\n         * Points properties.\n         * @private\n         * @type {IPoint[]}\n         */\n        this._points = [];\n\n        /**\n         * Coordinates array.\n         * @private\n         * @type {Array.<number>}\n         */\n        this._coordinatesData = [];\n\n        /**\n         * Color array.\n         * @private\n         * @type {Array.<number>}\n         */\n        this._colorData = [];\n\n        /**\n         * Picking color array.\n         * @private\n         * @type {Array.<number>}\n         */\n        this._pickingColorData = [];\n\n        this._coordinatesBuffer = null;\n        this._colorBuffer = null;\n        this._pickingColorBuffer = null;\n\n        /**\n         * Handler that stores and renders this object.\n         * @private\n         * @type {PointCloudHandler}\n         */\n        this._handler = null;\n        this._handlerIndex = -1;\n\n        this._buffersUpdateCallbacks = [];\n        this._buffersUpdateCallbacks[COORDINATES_BUFFER] = this._createCoordinatesBuffer;\n        this._buffersUpdateCallbacks[COLOR_BUFFER] = this._createColorBuffer;\n        this._buffersUpdateCallbacks[PICKING_COLOR_BUFFER] = this._createPickingColorBuffer;\n\n        this._changedBuffers = new Array(this._buffersUpdateCallbacks.length);\n\n        if (options.points) {\n            this.setPoints(options.points);\n        }\n    }\n\n    /**\n     * Clears point cloud data\n     * @public\n     */\n    public clear() {\n        this._points.length = 0;\n        this._points = [];\n\n        this._coordinatesData.length = 0;\n        this._coordinatesData = [];\n\n        this._colorData.length = 0;\n        this._colorData = [];\n\n        this._pickingColorData.length = 0;\n        this._pickingColorData = [];\n\n        this._deleteBuffers();\n    }\n\n    /**\n     * Sets cloud visibility.\n     * @public\n     * @param {boolean} visibility - Visibility flag.\n     */\n    public setVisibility(visibility: boolean) {\n        this.visibility = visibility;\n    }\n\n    /**\n     * @return {boolean} Point cloud visibility.\n     */\n    public getVisibility(): boolean {\n        return this.visibility;\n    }\n\n    /**\n     * Assign rendering scene node.\n     * @public\n     * @param {RenderNode}  renderNode - Assigned render node.\n     */\n    public setRenderNode(renderNode: RenderNode) {\n        this._renderNode = renderNode;\n        this._setPickingColors();\n    }\n\n    /**\n     * Removes from entity.\n     * @public\n     */\n    public remove() {\n        this._entity = null;\n        this._handler && this._handler.remove(this);\n    }\n\n    /**\n     * Adds points to render.\n     * @public\n     * @param { Poi[]} points - Point cloud array.\n     * @example\n     * var points = [[0, 0, 0, 255, 255, 255, 255, { 'name': 'White point' }], [100, 100, 0, 255, 0, 0, 255, { 'name': 'Red point' }]];\n     */\n    public setPoints(points: Poi[]) {\n        this.clear();\n        for (let i = 0; i < points.length; i++) {\n            let pi = points[i];\n\n            let pos = new Vec3(pi[0], pi[1], pi[2]),\n                col = new Vec4(pi[3], pi[4], pi[5], pi[6] == undefined ? 255.0 : pi[6]);\n\n            this._coordinatesData.push(pos.x, pos.y, pos.z);\n\n            this._colorData.push(col.x / 255.0, col.y / 255.0, col.z / 255.0, col.w / 255.0);\n\n            let p = {\n                _entity: this._entity,\n                _pickingColor: new Vec3(),\n                _entityCollection: this._entity ? this._entity._entityCollection : null,\n                index: i,\n                position: pos,\n                color: col,\n                pointCloud: this,\n                properties: pi[7] || {}\n            };\n\n            this._points.push(p);\n\n            if (this._renderNode && this._renderNode.renderer) {\n                this._renderNode.renderer.assignPickingColor<IPoint>(p);\n                this._pickingColorData.push(\n                    p._pickingColor.x / 255.0,\n                    p._pickingColor.y / 255.0,\n                    p._pickingColor.z / 255.0,\n                    1.0\n                );\n            }\n        }\n\n        this._changedBuffers[COORDINATES_BUFFER] = true;\n        this._changedBuffers[COLOR_BUFFER] = true;\n        this._changedBuffers[PICKING_COLOR_BUFFER] = true;\n    }\n\n    public setPointPosition(index: number, x: number, y: number, z: number) {\n        // TODO: ...\n        this._changedBuffers[COORDINATES_BUFFER] = true;\n    }\n\n    public setPointColor(index: number, r: number, g: number, b: number, a: number) {\n        // TODO: ...\n        this._changedBuffers[COLOR_BUFFER] = true;\n    }\n\n    public addPoints(points: Poi[]) {\n        // TODO: ...\n        this._changedBuffers[COORDINATES_BUFFER] = true;\n        this._changedBuffers[COLOR_BUFFER] = true;\n        this._changedBuffers[PICKING_COLOR_BUFFER] = true;\n    }\n\n    public addPoint(index: number, point: Poi) {\n        // TODO: ...\n        this._changedBuffers[COORDINATES_BUFFER] = true;\n        this._changedBuffers[COLOR_BUFFER] = true;\n        this._changedBuffers[PICKING_COLOR_BUFFER] = true;\n    }\n\n    /**\n     * Returns specific point by index.\n     * @public\n     * @param {number} index - Point index.\n     * @return {Poi} Specific point\n     */\n    public getPoint(index: number): IPoint {\n        return this._points[index];\n    }\n\n    public removePoint(index: number) {\n        // TODO: ...\n        this._changedBuffers[COORDINATES_BUFFER] = true;\n        this._changedBuffers[COLOR_BUFFER] = true;\n        this._changedBuffers[PICKING_COLOR_BUFFER] = true;\n    }\n\n    public insertPoint(index: number, point: Poi) {\n        // TODO: ...\n        this._changedBuffers[COORDINATES_BUFFER] = true;\n        this._changedBuffers[COLOR_BUFFER] = true;\n        this._changedBuffers[PICKING_COLOR_BUFFER] = true;\n    }\n\n    public draw() {\n        if (this.visibility && this._coordinatesData.length) {\n            this._update();\n\n            let rn = this._renderNode!;\n            let r = rn.renderer!;\n            let sh = r.handler.programs.pointCloud;\n            let p = sh._program;\n            let gl = r.handler.gl!,\n                sha = p.attributes,\n                shu = p.uniforms;\n\n            // gl.polygonOffset(\n            //     this._handler._entityCollection.polygonOffsetFactor,\n            //     this._handler._entityCollection.polygonOffsetUnits\n            // );\n\n            sh.activate();\n\n            gl.uniformMatrix4fv(shu.projectionViewMatrix, false, r.activeCamera!.getProjectionViewMatrix());\n\n            gl.uniform1f(shu.opacity, this._handler!._entityCollection._fadingOpacity);\n            gl.uniform1f(shu.pointSize, this.pointSize);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._coordinatesBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(sha.coordinates, this._coordinatesBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._colorBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(sha.colors, this._colorBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.drawArrays(gl.POINTS, 0, this._coordinatesBuffer!.numItems);\n        }\n    }\n\n    public drawPicking() {\n        if (this.visibility && this._coordinatesData.length) {\n            let rn = this._renderNode!;\n            let r = rn.renderer!;\n            let sh = r.handler.programs.pointCloud;\n            let p = sh._program;\n            let gl = r.handler.gl!,\n                sha = p.attributes,\n                shu = p.uniforms;\n\n            sh.activate();\n\n            // gl.polygonOffset(\n            //     this._handler._entityCollection.polygonOffsetFactor,\n            //     this._handler._entityCollection.polygonOffsetUnits\n            // );\n\n            gl.uniformMatrix4fv(shu.projectionViewMatrix, false, r.activeCamera!.getProjectionViewMatrix());\n\n            gl.uniform1f(shu.opacity, this._handler!._entityCollection._fadingOpacity);\n            gl.uniform1f(shu.pointSize, this.pointSize + this.pickingScale);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._coordinatesBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(sha.coordinates, this._coordinatesBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._pickingColorBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(sha.colors, this._pickingColorBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.drawArrays(gl.POINTS, 0, this._coordinatesBuffer!.numItems);\n        }\n    }\n\n    /**\n     * Update gl buffers.\n     * @protected\n     */\n    protected _update() {\n        if (this._renderNode) {\n            let i = this._changedBuffers.length;\n            while (i--) {\n                if (this._changedBuffers[i]) {\n                    this._buffersUpdateCallbacks[i].call(this);\n                    this._changedBuffers[i] = false;\n                }\n            }\n        }\n    }\n\n    /**\n     * Delete buffers\n     * @public\n     */\n    public _deleteBuffers() {\n        if (this._renderNode) {\n            let r = this._renderNode.renderer!,\n                gl = r.handler.gl!;\n\n            gl.deleteBuffer(this._coordinatesBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._colorBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._pickingColorBuffer as WebGLBuffer);\n        }\n\n        this._coordinatesBuffer = null;\n        this._colorBuffer = null;\n        this._pickingColorBuffer = null;\n    }\n\n    protected _createCoordinatesBuffer() {\n        let h = this._renderNode!.renderer!.handler;\n        h.gl!.deleteBuffer(this._coordinatesBuffer as WebGLBuffer);\n        this._coordinatesBuffer = h.createArrayBuffer(\n            new Float32Array(this._coordinatesData),\n            3,\n            this._coordinatesData.length / 3\n        );\n    }\n\n    protected _createColorBuffer() {\n        let h = this._renderNode!.renderer!.handler;\n        h.gl!.deleteBuffer(this._colorBuffer as WebGLBuffer);\n        this._colorBuffer = h.createArrayBuffer(\n            new Float32Array(this._colorData),\n            4,\n            this._colorData.length / 4\n        );\n    }\n\n    protected _createPickingColorBuffer() {\n        let h = this._renderNode!.renderer!.handler;\n        h.gl!.deleteBuffer(this._pickingColorBuffer as WebGLBuffer);\n        this._pickingColorBuffer = h.createArrayBuffer(\n            new Float32Array(this._pickingColorData),\n            4,\n            this._pickingColorData.length / 4\n        );\n    }\n\n    protected _setPickingColors() {\n        if (this._renderNode && this._renderNode.renderer) {\n            for (let i = 0; i < this._points.length; i++) {\n                let p = this._points[i];\n                p._entity = this._entity;\n                p._entityCollection = this._entity!._entityCollection;\n                this._renderNode.renderer.assignPickingColor<IPoint>(p);\n                this._pickingColorData.push(\n                    p._pickingColor.x / 255.0,\n                    p._pickingColor.y / 255.0,\n                    p._pickingColor.z / 255.0,\n                    1.0\n                );\n            }\n            this._changedBuffers[PICKING_COLOR_BUFFER] = true;\n        }\n    }\n}\n\nexport {PointCloud};\n","import {Entity} from \"./Entity\";\nimport {Extent} from \"../Extent\";\nimport {LonLat} from \"../LonLat\";\nimport {NumberArray3, Vec3} from \"../math/Vec3\";\nimport {NumberArray2} from \"../math/Vec2\";\nimport {NumberArray4} from \"../math/Vec4\";\nimport {Planet} from \"../scene/Planet\";\nimport {PolylineHandler} from \"./PolylineHandler\";\nimport {RenderNode} from \"../scene/RenderNode\";\nimport {WebGLBufferExt} from \"../webgl/Handler\";\nimport {\n    cloneArray,\n    htmlColorToFloat32Array,\n    htmlColorToRgba,\n    makeArray,\n    makeArrayTyped,\n    TypedArray\n} from \"../utils/shared\";\nimport {Ellipsoid} from \"../ellipsoid/Ellipsoid\";\n\nconst VERTICES_BUFFER = 0;\nconst INDEX_BUFFER = 1;\nconst COLORS_BUFFER = 2;\n\nconst DEFAULT_COLOR = \"#0000FF\";\n\nconst R = 0;\nconst G = 1;\nconst B = 2;\nconst A = 3;\n\nexport type Geodetic = LonLat | NumberArray2 | NumberArray3\nexport type Cartesian = Vec3 | NumberArray3;\n\nexport type SegmentPath3vExt = Cartesian[];\nexport type SegmentPathLonLatExt = Geodetic[];\n\nexport type SegmentPathColor = NumberArray4[];\n\nexport type SegmentPath3v = Vec3[];\nexport type SegmentPathLonLat = LonLat[];\n\n\nexport interface IPolylineParams {\n    altitude?: number;\n    thickness?: number;\n    opacity?: number;\n    color?: string;\n    visibility?: boolean;\n    isClosed?: boolean;\n    pathColors?: SegmentPathColor[];\n    path3v?: SegmentPath3vExt[];\n    pathLonLat?: SegmentPathLonLatExt[];\n}\n\n/**\n * Polyline object.\n * @class\n * @param {Object} [options] - Polyline options:\n * @param {number} [options.thickness] - Thickness in screen pixels 1.5 is default.\n * @param {Number} [options.altitude] - Relative to ground layers altitude value.\n * @param {Vec4} [options.color] - RGBA color.\n * @param {Boolean} [options.opacity] - Line opacity.\n * @param {Boolean} [options.visibility] - Polyline visibility. True default.\n * @param {Boolean} [options.isClosed] - Closed geometry type identification.\n * @param {SegmentPathLonLatExt[]} [options.pathLonLat] - Polyline geodetic coordinates array. [[[0,0,0], [1,1,1],...]]\n * @param {SegmentPath3vExt[]} [options.path3v] - LinesString cartesian coordinates array. [[[0,0,0], [1,1,1],...]]\n * @param {SegmentPathColor[]} [options.pathColors] - Coordinates color. [[[1,0,0,1], [0,1,0,1],...]] for right and green colors.\n */\nclass Polyline {\n    static __counter__: number = 0;\n\n    /**\n     * Object uniq identifier.\n     * @protected\n     * @type {number}\n     */\n    protected __id: number;\n\n    public altitude: number;\n\n    /**\n     * Polyline thickness in screen pixels.\n     * @public\n     * @type {number}\n     */\n    public thickness: number;\n\n    protected _opacity: number;\n\n    /**\n     * Polyline RGBA color.\n     * @protected\n     * @type {Float32Array} - (exactly 4 entries)\n     */\n    protected _defaultColor: Float32Array | NumberArray4;\n\n    /**\n     * Polyline visibility.\n     * @public\n     * @type {boolean}\n     */\n    public visibility: boolean;\n\n    /**\n     * Polyline geometry ring type identification.\n     * @protected\n     * @type {Boolean}\n     */\n    protected _closedLine: boolean;\n\n    /**\n     * Polyline cartesian coordinates.\n     * @public\n     * @type {Array.<Vec3>}\n     */\n    public _path3v: SegmentPath3vExt[];\n\n    protected _pathLengths: number[];\n\n    /**\n     * Polyline geodetic degrees coordinates.\n     * @private\n     * @type {Array.<LonLat>}\n     */\n    protected _pathLonLat: SegmentPathLonLatExt[];\n\n    /**\n     * Polyline geodetic mercator coordinates.\n     * @public\n     * @type {Array.<LonLat>}\n     */\n    public _pathLonLatMerc: LonLat[][];\n\n    protected _pathColors: SegmentPathColor[];\n\n    /**\n     * Polyline geodetic extent.\n     * @protected\n     * @type {Extent}\n     */\n    public _extent: Extent;\n    protected _verticesHigh: TypedArray | number[];\n    protected _verticesLow: TypedArray | number[];\n    protected _orders: TypedArray | number[];\n    protected _indexes: TypedArray | number[];\n    protected _colors: TypedArray | number[];\n\n    protected _verticesHighBuffer: WebGLBufferExt | null;\n    protected _verticesLowBuffer: WebGLBufferExt | null;\n    protected _ordersBuffer: WebGLBufferExt | null;\n    protected _indexesBuffer: WebGLBufferExt | null;\n    protected _colorsBuffer: WebGLBufferExt | null;\n\n    protected _pickingColor: NumberArray3;\n\n    protected _renderNode: RenderNode | null;\n\n    /**\n     * Entity instance that holds this Polyline.\n     * @public\n     * @type {Entity}\n     */\n    public _entity: Entity | null;\n\n    /**\n     * Handler that stores and renders this Polyline object.\n     * @public\n     * @type {PolylineHandler | null}\n     */\n    public _handler: PolylineHandler | null;\n    public _handlerIndex: number;\n    protected _buffersUpdateCallbacks: Function[];\n    protected _changedBuffers: boolean[];\n\n    constructor(options: IPolylineParams = {}) {\n\n        this.__id = Polyline.__counter__++;\n\n        this.altitude = options.altitude || 0.0;\n\n        this.thickness = options.thickness || 1.5;\n\n        this._opacity = options.opacity != undefined ? options.opacity : 1.0;\n\n        this._defaultColor = htmlColorToFloat32Array(\n            options.color || DEFAULT_COLOR,\n            options.opacity\n        );\n\n        this.visibility = options.visibility != undefined ? options.visibility : true;\n\n        this._closedLine = options.isClosed || false;\n\n        this._path3v = [];\n\n        this._pathLengths = [];\n\n        this._pathLonLat = [];\n\n        this._pathLonLatMerc = [];\n\n        this._pathColors = options.pathColors ? cloneArray(options.pathColors) : [];\n\n        this._extent = new Extent();\n\n        this._verticesHigh = [];\n        this._verticesLow = [];\n        this._orders = [];\n        this._indexes = [];\n        this._colors = [];\n\n        this._verticesHighBuffer = null;\n        this._verticesLowBuffer = null;\n        this._ordersBuffer = null;\n        this._indexesBuffer = null;\n        this._colorsBuffer = null;\n\n        this._pickingColor = [0, 0, 0];\n\n        this._renderNode = null;\n\n        this._entity = null;\n\n\n        this._handler = null;\n        this._handlerIndex = -1;\n\n        this._buffersUpdateCallbacks = [];\n        this._buffersUpdateCallbacks[VERTICES_BUFFER] = this._createVerticesBuffer;\n        this._buffersUpdateCallbacks[INDEX_BUFFER] = this._createIndexBuffer;\n        this._buffersUpdateCallbacks[COLORS_BUFFER] = this._createColorsBuffer;\n\n        this._changedBuffers = new Array(this._buffersUpdateCallbacks.length);\n\n        // create path\n        if (options.pathLonLat) {\n            this.setPathLonLat(options.pathLonLat);\n        } else if (options.path3v) {\n            this.setPath3v(options.path3v);\n        }\n\n        this._refresh();\n    }\n\n    /**\n     * Appends to the line array new cartesian coordinates line data.\n     * @static\n     */\n    static appendLineData3v(\n        path3v: SegmentPath3vExt[],\n        pathColors: SegmentPathColor[],\n        defaultColor: NumberArray4,\n        isClosed: boolean,\n        outVerticesHigh: number[],\n        outVerticesLow: number[],\n        outOrders: number[],\n        outIndexes: number[],\n        ellipsoid: Ellipsoid,\n        outTransformedPathLonLat: SegmentPathLonLatExt[],\n        outPath3v: SegmentPath3vExt[],\n        outTransformedPathMerc: LonLat[][],\n        outExtent: Extent,\n        outColors: number[]\n    ) {\n        var index = 0;\n\n        var v_high = new Vec3(),\n            v_low = new Vec3();\n\n        if (outExtent) {\n            outExtent.southWest.set(180.0, 90.0);\n            outExtent.northEast.set(-180.0, -90.0);\n        }\n\n        if (outIndexes.length > 0) {\n            index = outIndexes[outIndexes.length - 5] + 9;\n            outIndexes.push(index, index);\n        } else {\n            outIndexes.push(0, 0);\n        }\n\n        for (let j = 0, len = path3v.length; j < len; j++) {\n            var path = path3v[j],\n                pathColors_j = pathColors[j];\n\n            outTransformedPathLonLat[j] = [];\n            outTransformedPathMerc[j] = [];\n            outPath3v[j] = [];\n\n            if (path.length === 0) {\n                continue;\n            }\n\n            var startIndex = index;\n\n            var last;\n\n            if (isClosed) {\n                last = path[path.length - 1];\n                if (last instanceof Array) {\n                    last = new Vec3(last[0], last[1], last[2]);\n                }\n            } else {\n                var p0 = path[0],\n                    p1 = path[1] || p0;\n                if (p0 instanceof Array) {\n                    p0 = new Vec3(p0[0], p0[1], p0[2]);\n                }\n                if (p1 instanceof Array) {\n                    p1 = new Vec3(p1[0], p1[1], p1[2]);\n                }\n\n                p0 = p0 as Vec3;\n                p1 = p1 as Vec3;\n\n                last = new Vec3(p0.x + p0.x - p1.x, p0.y + p0.y - p1.y, p0.z + p0.z - p1.z);\n            }\n\n            let color = defaultColor;\n\n            if (pathColors_j && pathColors_j[0]) {\n                color = pathColors_j[0];\n            }\n\n            Vec3.doubleToTwoFloats(last as Vec3, v_high, v_low);\n            outVerticesHigh.push(\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z\n            );\n            outVerticesLow.push(\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z\n            );\n\n            let r = color[R],\n                g = color[G],\n                b = color[B],\n                a = color[A] != undefined ? color[A] : 1.0;\n\n            if (j > 0) {\n                outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n            }\n\n            outOrders.push(1, -1, 2, -2);\n\n            for (let i = 0, len = path.length; i < len; i++) {\n                var cur = path[i];\n\n                if (cur instanceof Array) {\n                    cur = new Vec3(cur[0], cur[1], cur[2]);\n                }\n\n                outPath3v[j].push(cur as Vec3);\n\n                if (ellipsoid) {\n                    var lonLat = ellipsoid.cartesianToLonLat(cur as Vec3);\n                    outTransformedPathLonLat[j].push(lonLat);\n                    outTransformedPathMerc[j].push(lonLat.forwardMercator());\n\n                    if (lonLat.lon < outExtent.southWest.lon) {\n                        outExtent.southWest.lon = lonLat.lon;\n                    }\n                    if (lonLat.lat < outExtent.southWest.lat) {\n                        outExtent.southWest.lat = lonLat.lat;\n                    }\n                    if (lonLat.lon > outExtent.northEast.lon) {\n                        outExtent.northEast.lon = lonLat.lon;\n                    }\n                    if (lonLat.lat > outExtent.northEast.lat) {\n                        outExtent.northEast.lat = lonLat.lat;\n                    }\n                }\n\n                if (pathColors_j && pathColors_j[i]) {\n                    color = pathColors_j[i];\n                }\n\n                r = color[R];\n                g = color[G];\n                b = color[B];\n                a = color[A] != undefined ? color[A] : 1.0;\n\n                Vec3.doubleToTwoFloats(cur as Vec3, v_high, v_low);\n                outVerticesHigh.push(\n                    v_high.x, v_high.y, v_high.z,\n                    v_high.x, v_high.y, v_high.z,\n                    v_high.x, v_high.y, v_high.z,\n                    v_high.x, v_high.y, v_high.z\n                );\n                outVerticesLow.push(\n                    v_low.x, v_low.y, v_low.z,\n                    v_low.x, v_low.y, v_low.z,\n                    v_low.x, v_low.y, v_low.z,\n                    v_low.x, v_low.y, v_low.z\n                );\n\n                outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n\n                outOrders.push(1, -1, 2, -2);\n                outIndexes.push(index++, index++, index++, index++);\n            }\n\n            var first;\n            if (isClosed) {\n                first = path[0];\n                if (first instanceof Array) {\n                    first = new Vec3(first[0], first[1], first[2]);\n                }\n                outIndexes.push(startIndex, startIndex + 1, startIndex + 1, startIndex + 1);\n            } else {\n                let p0 = path[path.length - 1],\n                    p1 = path[path.length - 2] || p0;\n\n                if (p0 instanceof Array) {\n                    p0 = new Vec3(p0[0], p0[1], p0[2]);\n                } else {\n                    p0 = p0 as Vec3;\n                }\n\n                if (p1 instanceof Array) {\n                    p1 = new Vec3(p1[0], p1[1], p1[2]);\n                } else {\n                    p1 = p1 as Vec3;\n                }\n\n                first = new Vec3(p0.x + p0.x - p1.x, p0.y + p0.y - p1.y, p0.z + p0.z - p1.z);\n                outIndexes.push(index - 1, index - 1, index - 1, index - 1);\n            }\n\n            if (pathColors_j && pathColors_j[path.length - 1]) {\n                color = pathColors_j[path.length - 1];\n            }\n\n            r = color[R];\n            g = color[G];\n            b = color[B];\n            a = color[A] != undefined ? color[A] : 1.0;\n\n            Vec3.doubleToTwoFloats(first as Vec3, v_high, v_low);\n            outVerticesHigh.push(\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z\n            );\n            outVerticesLow.push(\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z\n            );\n\n            outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n\n            outOrders.push(1, -1, 2, -2);\n\n            if (j < path3v.length - 1 && path3v[j + 1].length !== 0) {\n                index += 8;\n                outIndexes.push(index, index);\n            }\n        }\n    }\n\n    /**\n     * Appends to the line new cartesian coordinates point data.\n     * @static\n     */\n    static appendPoint3v(\n        path3v: SegmentPath3vExt[],\n        point3v: Vec3,\n        pathColors: SegmentPathColor[],\n        color: NumberArray4,\n        isClosed: boolean,\n        outVerticesHigh: number[],\n        outVerticesLow: number[],\n        outColors: number[],\n        outOrders: number[],\n        outIndexes: number[],\n        ellipsoid: Ellipsoid | null,\n        outTransformedPathLonLat: SegmentPathLonLatExt[],\n        outTransformedPathMerc: LonLat[][],\n        outExtent: Extent\n    ) {\n        var v_high = new Vec3(),\n            v_low = new Vec3();\n\n        var ii = outIndexes.length - 4,\n            index = outIndexes[ii - 1] + 1;\n\n        if (path3v.length === 0) {\n            path3v.push([]);\n            if (!pathColors[0]) {\n                pathColors[0] = [];\n            }\n        } else if (!pathColors[path3v.length - 1]) {\n            pathColors[path3v.length - 1] = [];\n        }\n\n        var path = path3v[path3v.length - 1],\n            len = path.length;\n\n        path.push(point3v);\n\n        let r = color[R],\n            g = color[G],\n            b = color[B],\n            a = color[A] != undefined ? color[A] : 1.0,\n            pathColors_last = pathColors[path3v.length - 1];\n\n        if (pathColors_last[len]) {\n            pathColors_last[len][R] = r;\n            pathColors_last[len][G] = g;\n            pathColors_last[len][B] = b;\n            pathColors_last[len][A] = a;\n        } else {\n            pathColors_last.push(color);\n        }\n\n        if (len === 1) {\n            var last;\n            if (isClosed) {\n                last = path[len - 1];\n                if (last instanceof Array) {\n                    last = new Vec3(last[0], last[1], last[2]);\n                }\n            } else {\n                let p0 = path[0],\n                    p1 = path[1] || p0;\n\n                if (p0 instanceof Array) {\n                    p0 = new Vec3(p0[0], p0[1], p0[2]);\n                } else {\n                    p0 = p0 as Vec3;\n                }\n\n                if (p1 instanceof Array) {\n                    p1 = new Vec3(p1[0], p1[1], p1[2]);\n                } else {\n                    p1 = p1 as Vec3;\n                }\n\n                last = new Vec3(p0.x + p0.x - p1.x, p0.y + p0.y - p1.y, p0.z + p0.z - p1.z);\n            }\n\n            Vec3.doubleToTwoFloats(last as Vec3, v_high, v_low);\n\n            let vi = outVerticesHigh.length - 3 * 12;\n\n            outVerticesHigh[vi] = v_high.x;\n            outVerticesHigh[vi + 1] = v_high.y;\n            outVerticesHigh[vi + 2] = v_high.z;\n            outVerticesHigh[vi + 3] = v_high.x;\n            outVerticesHigh[vi + 4] = v_high.y;\n            outVerticesHigh[vi + 5] = v_high.z;\n            outVerticesHigh[vi + 6] = v_high.x;\n            outVerticesHigh[vi + 7] = v_high.y;\n            outVerticesHigh[vi + 8] = v_high.z;\n            outVerticesHigh[vi + 9] = v_high.x;\n            outVerticesHigh[vi + 10] = v_high.y;\n            outVerticesHigh[vi + 11] = v_high.z;\n\n            outVerticesLow[vi] = v_low.x;\n            outVerticesLow[vi + 1] = v_low.y;\n            outVerticesLow[vi + 2] = v_low.z;\n            outVerticesLow[vi + 3] = v_low.x;\n            outVerticesLow[vi + 4] = v_low.y;\n            outVerticesLow[vi + 5] = v_low.z;\n            outVerticesLow[vi + 6] = v_low.x;\n            outVerticesLow[vi + 7] = v_low.y;\n            outVerticesLow[vi + 8] = v_low.z;\n            outVerticesLow[vi + 9] = v_low.x;\n            outVerticesLow[vi + 10] = v_low.y;\n            outVerticesLow[vi + 11] = v_low.z;\n        }\n\n        var startIndex = index;\n\n        if (ellipsoid) {\n            if (outTransformedPathLonLat.length === 0) {\n                outTransformedPathLonLat.push([]);\n            }\n\n            if (outTransformedPathMerc.length === 0) {\n                outTransformedPathMerc.push([]);\n            }\n\n            var transformedPathLonLat = outTransformedPathLonLat[outTransformedPathLonLat.length - 1],\n                transformedPathMerc = outTransformedPathMerc[outTransformedPathMerc.length - 1];\n\n            let lonLat = ellipsoid.cartesianToLonLat(point3v);\n            transformedPathLonLat.push(lonLat);\n            transformedPathMerc.push(lonLat.forwardMercator());\n\n            if (lonLat.lon < outExtent.southWest.lon) {\n                outExtent.southWest.lon = lonLat.lon;\n            }\n            if (lonLat.lat < outExtent.southWest.lat) {\n                outExtent.southWest.lat = lonLat.lat;\n            }\n            if (lonLat.lon > outExtent.northEast.lon) {\n                outExtent.northEast.lon = lonLat.lon;\n            }\n            if (lonLat.lat > outExtent.northEast.lat) {\n                outExtent.northEast.lat = lonLat.lat;\n            }\n        }\n\n        Vec3.doubleToTwoFloats(point3v, v_high, v_low);\n\n        let vi = outVerticesHigh.length - 12;\n\n        outVerticesHigh[vi] = v_high.x;\n        outVerticesHigh[vi + 1] = v_high.y;\n        outVerticesHigh[vi + 2] = v_high.z;\n        outVerticesHigh[vi + 3] = v_high.x;\n        outVerticesHigh[vi + 4] = v_high.y;\n        outVerticesHigh[vi + 5] = v_high.z;\n        outVerticesHigh[vi + 6] = v_high.x;\n        outVerticesHigh[vi + 7] = v_high.y;\n        outVerticesHigh[vi + 8] = v_high.z;\n        outVerticesHigh[vi + 9] = v_high.x;\n        outVerticesHigh[vi + 10] = v_high.y;\n        outVerticesHigh[vi + 11] = v_high.z;\n\n        outVerticesLow[vi] = v_low.x;\n        outVerticesLow[vi + 1] = v_low.y;\n        outVerticesLow[vi + 2] = v_low.z;\n        outVerticesLow[vi + 3] = v_low.x;\n        outVerticesLow[vi + 4] = v_low.y;\n        outVerticesLow[vi + 5] = v_low.z;\n        outVerticesLow[vi + 6] = v_low.x;\n        outVerticesLow[vi + 7] = v_low.y;\n        outVerticesLow[vi + 8] = v_low.z;\n        outVerticesLow[vi + 9] = v_low.x;\n        outVerticesLow[vi + 10] = v_low.y;\n        outVerticesLow[vi + 11] = v_low.z;\n\n        let ci = outColors.length - 16;\n\n        outColors[ci] = r;\n        outColors[ci + 1] = g;\n        outColors[ci + 2] = b;\n        outColors[ci + 3] = a;\n        outColors[ci + 4] = r;\n        outColors[ci + 5] = g;\n        outColors[ci + 6] = b;\n        outColors[ci + 7] = a;\n        outColors[ci + 8] = r;\n        outColors[ci + 9] = g;\n        outColors[ci + 10] = b;\n        outColors[ci + 11] = a;\n        outColors[ci + 12] = r;\n        outColors[ci + 13] = g;\n        outColors[ci + 14] = b;\n        outColors[ci + 15] = a;\n\n        outIndexes[ii] = index++;\n        outIndexes[ii + 1] = index++;\n        outIndexes[ii + 2] = index++;\n        outIndexes[ii + 3] = index++;\n\n        //\n        // Close path\n        //\n        var first;\n        if (isClosed) {\n            first = path[0] as Vec3;\n            outIndexes.push(startIndex, startIndex + 1, startIndex + 1, startIndex + 1);\n        } else {\n            let p0 = path[path.length - 1] as Vec3,\n                p1 = path[path.length - 2] as Vec3 || p0;\n\n            first = new Vec3(p0.x + p0.x - p1.x, p0.y + p0.y - p1.y, p0.z + p0.z - p1.z);\n            outIndexes.push(index - 1, index - 1, index - 1, index - 1);\n        }\n\n        Vec3.doubleToTwoFloats(first, v_high, v_low);\n        outVerticesHigh.push(\n            v_high.x, v_high.y, v_high.z,\n            v_high.x, v_high.y, v_high.z,\n            v_high.x, v_high.y, v_high.z,\n            v_high.x, v_high.y, v_high.z\n        );\n        outVerticesLow.push(\n            v_low.x, v_low.y, v_low.z,\n            v_low.x, v_low.y, v_low.z,\n            v_low.x, v_low.y, v_low.z,\n            v_low.x, v_low.y, v_low.z\n        );\n\n        outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n\n        outOrders.push(1, -1, 2, -2);\n    }\n\n    static setPathColors(\n        pathLonLat: SegmentPathLonLatExt[],\n        pathColors: SegmentPathColor[],\n        defaultColor: NumberArray4,\n        outColors: number[]\n    ) {\n        for (let j = 0, len = pathLonLat.length; j < len; j++) {\n            var path = pathLonLat[j],\n                pathColors_j = pathColors[j];\n\n            if (path.length === 0) {\n                continue;\n            }\n\n            let color = defaultColor;\n            if (pathColors_j && pathColors_j[0]) {\n                color = pathColors_j[0];\n            }\n\n            let r = color[R],\n                g = color[G],\n                b = color[B],\n                a = color[A] != undefined ? color[A] : 1.0;\n\n            if (j > 0) {\n                outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n            }\n\n            for (let i = 0, len = path.length; i < len; i++) {\n                var cur = path[i];\n\n                if (cur instanceof Array) {\n                    cur = new LonLat(cur[0], cur[1], cur[2]);\n                }\n\n                if (pathColors_j && pathColors_j[i]) {\n                    color = pathColors_j[i];\n                }\n\n                r = color[R];\n                g = color[G];\n                b = color[B];\n                a = color[A] != undefined ? color[A] : 1.0;\n\n                outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n\n            }\n\n            if (pathColors_j && pathColors_j[path.length - 1]) {\n                color = pathColors_j[path.length - 1];\n            }\n\n            r = color[R];\n            g = color[G];\n            b = color[B];\n            a = color[A] != undefined ? color[A] : 1.0;\n\n            outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n        }\n    }\n\n    /**\n     * Appends to the line array new geodetic coordinates line data.\n     * @static\n     */\n    static appendLineDataLonLat(\n        pathLonLat: SegmentPathLonLatExt[],\n        pathColors: SegmentPathColor[],\n        defaultColor: NumberArray4,\n        isClosed: boolean,\n        outVerticesHigh: number[],\n        outVerticesLow: number[],\n        outOrders: number[],\n        outIndexes: number[],\n        ellipsoid: Ellipsoid,\n        outTransformedPathCartesian: SegmentPath3vExt[],\n        outPathLonLat: SegmentPathLonLatExt[],\n        outTransformedPathMerc: LonLat[][],\n        outExtent: Extent,\n        outColors: number[]\n    ) {\n        var index = 0;\n\n        var v_high = new Vec3(),\n            v_low = new Vec3();\n\n        if (outExtent) {\n            outExtent.southWest.set(180.0, 90.0);\n            outExtent.northEast.set(-180.0, -90.0);\n        }\n\n        if (outIndexes.length > 0) {\n            index = outIndexes[outIndexes.length - 5] + 9;\n            outIndexes.push(index);\n        } else {\n            outIndexes.push(0);\n        }\n\n        for (let j = 0, len = pathLonLat.length; j < len; j++) {\n            var path = pathLonLat[j],\n                pathColors_j = pathColors[j];\n\n            outTransformedPathCartesian[j] = [];\n            outTransformedPathMerc[j] = [];\n            outPathLonLat[j] = [];\n\n            if (path.length === 0) {\n                continue;\n            }\n\n            var startIndex = index;\n\n            var last;\n\n            if (isClosed) {\n                let pp = path[path.length - 1];\n                if (pp instanceof Array) {\n                    last = ellipsoid.lonLatToCartesian(new LonLat(pp[0], pp[1], pp[2]));\n                } else {\n                    last = ellipsoid.lonLatToCartesian(pp as LonLat);\n                }\n            } else {\n                let p0, p1;\n                let pp = path[0];\n                if (pp instanceof Array) {\n                    p0 = ellipsoid.lonLatToCartesian(new LonLat(pp[0], pp[1], pp[2]));\n                } else {\n                    p0 = ellipsoid.lonLatToCartesian(pp as LonLat);\n                }\n\n                pp = path[1];\n\n                if (!pp) {\n                    pp = path[0];\n                }\n\n                if (pp instanceof Array) {\n                    p1 = ellipsoid.lonLatToCartesian(new LonLat(pp[0], pp[1], pp[2]));\n                } else {\n                    p1 = ellipsoid.lonLatToCartesian(pp as LonLat);\n                }\n\n                last = new Vec3(p0.x + p0.x - p1.x, p0.y + p0.y - p1.y, p0.z + p0.z - p1.z);\n            }\n\n            let color = defaultColor;\n\n            if (pathColors_j && pathColors_j[0]) {\n                color = pathColors_j[0];\n            }\n\n            Vec3.doubleToTwoFloats(last, v_high, v_low);\n            outVerticesHigh.push(\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z\n            );\n            outVerticesLow.push(\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z\n            );\n\n            let r = color[R],\n                g = color[G],\n                b = color[B],\n                a = color[A] != undefined ? color[A] : 1.0;\n\n            if (j > 0) {\n                outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n            }\n\n            outOrders.push(1, -1, 2, -2);\n\n            for (let i = 0, len = path.length; i < len; i++) {\n                var cur = path[i];\n\n                if (cur instanceof Array) {\n                    cur = new LonLat(cur[0], cur[1], cur[2]);\n                }\n\n                if (pathColors_j && pathColors_j[i]) {\n                    color = pathColors_j[i];\n                }\n\n                r = color[R];\n                g = color[G];\n                b = color[B];\n                a = color[A] != undefined ? color[A] : 1.0;\n\n                var cartesian = ellipsoid.lonLatToCartesian(cur as LonLat);\n                outTransformedPathCartesian[j].push(cartesian);\n                outPathLonLat[j].push(cur as LonLat);\n                outTransformedPathMerc[j].push((cur as LonLat).forwardMercator());\n\n                Vec3.doubleToTwoFloats(cartesian, v_high, v_low);\n                outVerticesHigh.push(\n                    v_high.x, v_high.y, v_high.z,\n                    v_high.x, v_high.y, v_high.z,\n                    v_high.x, v_high.y, v_high.z,\n                    v_high.x, v_high.y, v_high.z\n                );\n                outVerticesLow.push(\n                    v_low.x, v_low.y, v_low.z,\n                    v_low.x, v_low.y, v_low.z,\n                    v_low.x, v_low.y, v_low.z,\n                    v_low.x, v_low.y, v_low.z\n                );\n\n                outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n\n                outOrders.push(1, -1, 2, -2);\n                outIndexes.push(index++, index++, index++, index++);\n\n                if ((cur as LonLat).lon < outExtent.southWest.lon) {\n                    outExtent.southWest.lon = (cur as LonLat).lon;\n                }\n                if ((cur as LonLat).lat < outExtent.southWest.lat) {\n                    outExtent.southWest.lat = (cur as LonLat).lat;\n                }\n                if ((cur as LonLat).lon > outExtent.northEast.lon) {\n                    outExtent.northEast.lon = (cur as LonLat).lon;\n                }\n                if ((cur as LonLat).lat > outExtent.northEast.lat) {\n                    outExtent.northEast.lat = (cur as LonLat).lat;\n                }\n            }\n\n            var first;\n            if (isClosed) {\n                let pp = path[0];\n                if (pp instanceof Array) {\n                    first = ellipsoid.lonLatToCartesian(new LonLat(pp[0], pp[1], pp[2]));\n                } else {\n                    first = ellipsoid.lonLatToCartesian(pp as LonLat);\n                }\n                outIndexes.push(startIndex, startIndex + 1, startIndex + 1, startIndex + 1);\n            } else {\n                let p0, p1;\n                let pp = path[path.length - 1];\n                if (pp instanceof Array) {\n                    p0 = ellipsoid.lonLatToCartesian(new LonLat(pp[0], pp[1], pp[2]));\n                } else {\n                    p0 = ellipsoid.lonLatToCartesian(pp as LonLat);\n                }\n\n                pp = path[path.length - 2];\n\n                if (!pp) {\n                    pp = path[0];\n                }\n\n                if (pp instanceof Array) {\n                    p1 = ellipsoid.lonLatToCartesian(new LonLat(pp[0], pp[1], pp[2]));\n                } else {\n                    p1 = ellipsoid.lonLatToCartesian(pp as LonLat);\n                }\n                first = new Vec3(p0.x + p0.x - p1.x, p0.y + p0.y - p1.y, p0.z + p0.z - p1.z);\n                outIndexes.push(index - 1, index - 1, index - 1, index - 1);\n            }\n\n            if (pathColors_j && pathColors_j[path.length - 1]) {\n                color = pathColors_j[path.length - 1];\n            }\n\n            r = color[R];\n            g = color[G];\n            b = color[B];\n            a = color[A] != undefined ? color[A] : 1.0;\n\n            Vec3.doubleToTwoFloats(first, v_high, v_low);\n            outVerticesHigh.push(\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z,\n                v_high.x, v_high.y, v_high.z\n            );\n            outVerticesLow.push(\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z,\n                v_low.x, v_low.y, v_low.z\n            );\n\n            outColors.push(r, g, b, a, r, g, b, a, r, g, b, a, r, g, b, a);\n\n            outOrders.push(1, -1, 2, -2);\n\n            if (j < pathLonLat.length - 1 && pathLonLat[j + 1].length !== 0) {\n                index += 8;\n                outIndexes.push(index, index);\n            }\n        }\n    }\n\n    /**\n     * Sets polyline path with cartesian coordinates.\n     * @protected\n     * @param {SegmentPath3vExt[]} path3v - Cartesian coordinates.\n     */\n    protected _setEqualPath3v(path3v: SegmentPath3vExt[]) {\n        var extent = this._extent;\n        extent.southWest.set(180, 90);\n        extent.northEast.set(-180, -90);\n\n        var v_high = new Vec3(),\n            v_low = new Vec3();\n\n        var vh = this._verticesHigh,\n            vl = this._verticesLow,\n            l = this._pathLonLat,\n            m = this._pathLonLatMerc,\n            k = 0;\n\n        var ellipsoid = (this._renderNode as Planet).ellipsoid;\n\n        for (let j = 0; j < path3v.length; j++) {\n            var path = path3v[j] as Vec3[];\n\n            var last;\n            if (this._closedLine) {\n                last = path[path.length - 1];\n            } else {\n                last = new Vec3(\n                    path[0].x + path[0].x - path[1].x,\n                    path[0].y + path[0].y - path[1].y,\n                    path[0].z + path[0].z - path[1].z\n                );\n            }\n\n            Vec3.doubleToTwoFloats(last, v_high, v_low);\n\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n\n            for (let i = 0; i < path.length; i++) {\n                var cur = path[i] as Vec3,\n                    pji = this._path3v[j][i] as Vec3;\n\n                pji.x = cur.x;\n                pji.y = cur.y;\n                pji.z = cur.z;\n\n                if (ellipsoid) {\n                    var lonLat = ellipsoid.cartesianToLonLat(cur);\n\n                    this._pathLonLat[j][i] = lonLat;\n\n                    l[j][i] = lonLat;\n                    m[j][i] = lonLat.forwardMercator();\n\n                    if (lonLat.lon < extent.southWest.lon) {\n                        extent.southWest.lon = lonLat.lon;\n                    }\n                    if (lonLat.lat < extent.southWest.lat) {\n                        extent.southWest.lat = lonLat.lat;\n                    }\n                    if (lonLat.lon > extent.northEast.lon) {\n                        extent.northEast.lon = lonLat.lon;\n                    }\n                    if (lonLat.lat > extent.northEast.lat) {\n                        extent.northEast.lat = lonLat.lat;\n                    }\n                }\n\n                Vec3.doubleToTwoFloats(cur, v_high, v_low);\n\n                vh[k] = v_high.x;\n                vl[k++] = v_low.x;\n                vh[k] = v_high.y;\n                vl[k++] = v_low.y;\n                vh[k] = v_high.z;\n                vl[k++] = v_low.z;\n                vh[k] = v_high.x;\n                vl[k++] = v_low.x;\n                vh[k] = v_high.y;\n                vl[k++] = v_low.y;\n                vh[k] = v_high.z;\n                vl[k++] = v_low.z;\n                vh[k] = v_high.x;\n                vl[k++] = v_low.x;\n                vh[k] = v_high.y;\n                vl[k++] = v_low.y;\n                vh[k] = v_high.z;\n                vl[k++] = v_low.z;\n                vh[k] = v_high.x;\n                vl[k++] = v_low.x;\n                vh[k] = v_high.y;\n                vl[k++] = v_low.y;\n                vh[k] = v_high.z;\n                vl[k++] = v_low.z;\n            }\n\n            var first;\n            if (this._closedLine) {\n                first = path[0];\n            } else {\n                var l1 = path.length - 1;\n                first = new Vec3(\n                    path[l1].x + path[l1].x - path[l1 - 1].x,\n                    path[l1].y + path[l1].y - path[l1 - 1].y,\n                    path[l1].z + path[l1].z - path[l1 - 1].z\n                );\n            }\n\n            Vec3.doubleToTwoFloats(first as Vec3, v_high, v_low);\n\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n        }\n    }\n\n    /**\n     * Sets polyline with geodetic coordinates.\n     * @protected\n     * @param {SegmentPathLonLat[]} pathLonLat - Geodetic polyline path coordinates.\n     */\n    protected _setEqualPathLonLat(pathLonLat: SegmentPathLonLat[]) {\n        var extent = this._extent;\n        extent.southWest.set(180.0, 90.0);\n        extent.northEast.set(-180.0, -90.0);\n\n        var v_high = new Vec3(),\n            v_low = new Vec3();\n\n        var vh = this._verticesHigh,\n            vl = this._verticesLow,\n            l = this._pathLonLat,\n            m = this._pathLonLatMerc,\n            c = this._path3v,\n            k = 0;\n\n        var ellipsoid = (this._renderNode as Planet).ellipsoid;\n\n        for (let j = 0; j < pathLonLat.length; j++) {\n            var path = pathLonLat[j] as LonLat[];\n\n            var last;\n            if (this._closedLine) {\n                last = ellipsoid.lonLatToCartesian(path[path.length - 1]);\n            } else {\n                let p0 = ellipsoid.lonLatToCartesian(path[0]),\n                    p1 = ellipsoid.lonLatToCartesian(path[1]);\n                last = new Vec3(p0.x + p0.x - p1.x, p0.y + p0.y - p1.y, p0.z + p0.z - p1.z);\n            }\n\n            Vec3.doubleToTwoFloats(last, v_high, v_low);\n\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n\n            for (let i = 0; i < path.length; i++) {\n                var cur = path[i] as LonLat;\n                var cartesian = ellipsoid.lonLatToCartesian(cur);\n                c[j][i] = cartesian;\n                m[j][i] = cur.forwardMercator();\n                l[j][i] = cur;\n\n                Vec3.doubleToTwoFloats(cartesian, v_high, v_low);\n\n                vh[k] = v_high.x;\n                vl[k++] = v_low.x;\n                vh[k] = v_high.y;\n                vl[k++] = v_low.y;\n                vh[k] = v_high.z;\n                vl[k++] = v_low.z;\n                vh[k] = v_high.x;\n                vl[k++] = v_low.x;\n                vh[k] = v_high.y;\n                vl[k++] = v_low.y;\n                vh[k] = v_high.z;\n                vl[k++] = v_low.z;\n                vh[k] = v_high.x;\n                vl[k++] = v_low.x;\n                vh[k] = v_high.y;\n                vl[k++] = v_low.y;\n                vh[k] = v_high.z;\n                vl[k++] = v_low.z;\n                vh[k] = v_high.x;\n                vl[k++] = v_low.x;\n                vh[k] = v_high.y;\n                vl[k++] = v_low.y;\n                vh[k] = v_high.z;\n                vl[k++] = v_low.z;\n\n                if (cur.lon < extent.southWest.lon) {\n                    extent.southWest.lon = cur.lon;\n                }\n                if (cur.lat < extent.southWest.lat) {\n                    extent.southWest.lat = cur.lat;\n                }\n                if (cur.lon > extent.northEast.lon) {\n                    extent.northEast.lon = cur.lon;\n                }\n                if (cur.lat > extent.northEast.lat) {\n                    extent.northEast.lat = cur.lat;\n                }\n            }\n\n            var first;\n            if (this._closedLine) {\n                first = ellipsoid.lonLatToCartesian(path[0]);\n            } else {\n                let p0 = ellipsoid.lonLatToCartesian(path[path.length - 1]),\n                    p1 = ellipsoid.lonLatToCartesian(path[path.length - 2]);\n                first = new Vec3(p0.x + p0.x - p1.x, p0.y + p0.y - p1.y, p0.z + p0.z - p1.z);\n            }\n\n            Vec3.doubleToTwoFloats(first, v_high, v_low);\n\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n            vh[k] = v_high.x;\n            vl[k++] = v_low.x;\n            vh[k] = v_high.y;\n            vl[k++] = v_low.y;\n            vh[k] = v_high.z;\n            vl[k++] = v_low.z;\n        }\n    }\n\n    public setPointLonLat(lonlat: LonLat, index: number, segmentIndex: number) {\n        if (this._renderNode && (this._renderNode as Planet).ellipsoid) {\n            let l = this._pathLonLat,\n                m = this._pathLonLatMerc;\n\n            l[segmentIndex][index] = lonlat;\n            m[segmentIndex][index] = lonlat.forwardMercator();\n\n            //\n            // Apply new extent(TODO: think about optimization)\n            //\n            var extent = this._extent;\n            extent.southWest.set(180.0, 90.0);\n            extent.northEast.set(-180.0, -90.0);\n            for (let i = 0; i < l.length; i++) {\n                var pi = l[i] as LonLat[];\n                for (let j = 0; j < pi.length; j++) {\n                    var lon = pi[j].lon,\n                        lat = pi[j].lat;\n                    if (lon > extent.northEast.lon) {\n                        extent.northEast.lon = lon;\n                    }\n                    if (lat > extent.northEast.lat) {\n                        extent.northEast.lat = lat;\n                    }\n                    if (lon < extent.southWest.lon) {\n                        extent.southWest.lon = lon;\n                    }\n                    if (lat < extent.southWest.lat) {\n                        extent.southWest.lat = lat;\n                    }\n                }\n            }\n\n            this.setPoint3v(\n                (this._renderNode as Planet).ellipsoid.lonLatToCartesian(lonlat),\n                index,\n                segmentIndex,\n                true\n            );\n        } else {\n            let path = this._pathLonLat[segmentIndex] as LonLat[];\n            path[index].lon = lonlat.lon;\n            path[index].lat = lonlat.lat;\n            path[index].height = lonlat.height;\n        }\n    }\n\n    /**\n     * Changes cartesian point coordinates of the path\n     * @param {Vec3} coordinates - New coordinates\n     * @param {number} [index=0] - Path segment index\n     * @param {number} [segmentIndex=0] - Index of the point in the path segment\n     * @param {boolean} [skipLonLat=false] - Do not update geodetic coordinates\n     */\n    public setPoint3v(coordinates: Vec3, index: number = 0, segmentIndex: number = 0, skipLonLat: boolean = false) {\n\n        if (this._renderNode) {\n            var v_high = new Vec3(),\n                v_low = new Vec3();\n\n            var vh = this._verticesHigh,\n                vl = this._verticesLow,\n                l = this._pathLonLat,\n                m = this._pathLonLatMerc,\n                k = 0,\n                kk = 0;\n\n            //for (let i = 0; i < segmentIndex; i++) {\n            //    kk += this._path3v[i].length * 12 + 24;\n            //}\n            kk = this._pathLengths[segmentIndex] * 12 + 24 * segmentIndex;\n\n            let path = this._path3v[segmentIndex] as Vec3[];\n\n            path[index].x = coordinates.x;\n            path[index].y = coordinates.y;\n            path[index].z = coordinates.z;\n\n            let _closedLine = this._closedLine || path.length === 1;\n\n            if (index === 0 || index === 1) {\n                var last;\n                if (_closedLine) {\n                    last = path[path.length - 1];\n                } else {\n                    last = new Vec3(\n                        path[0].x + path[0].x - path[1].x,\n                        path[0].y + path[0].y - path[1].y,\n                        path[0].z + path[0].z - path[1].z\n                    );\n                }\n\n                k = kk;\n\n                Vec3.doubleToTwoFloats(last, v_high, v_low);\n\n                vh[k] = v_high.x;\n                vh[k + 1] = v_high.y;\n                vh[k + 2] = v_high.z;\n                vh[k + 3] = v_high.x;\n                vh[k + 4] = v_high.y;\n                vh[k + 5] = v_high.z;\n                vh[k + 6] = v_high.x;\n                vh[k + 7] = v_high.y;\n                vh[k + 8] = v_high.z;\n                vh[k + 9] = v_high.x;\n                vh[k + 10] = v_high.y;\n                vh[k + 11] = v_high.z;\n\n                vl[k] = v_low.x;\n                vl[k + 1] = v_low.y;\n                vl[k + 2] = v_low.z;\n                vl[k + 3] = v_low.x;\n                vl[k + 4] = v_low.y;\n                vl[k + 5] = v_low.z;\n                vl[k + 6] = v_low.x;\n                vl[k + 7] = v_low.y;\n                vl[k + 8] = v_low.z;\n                vl[k + 9] = v_low.x;\n                vl[k + 10] = v_low.y;\n                vl[k + 11] = v_low.z;\n            }\n\n            if (!skipLonLat && (this._renderNode as Planet).ellipsoid) {\n                var lonLat = (this._renderNode as Planet).ellipsoid.cartesianToLonLat(coordinates);\n                l[segmentIndex][index] = lonLat;\n                m[segmentIndex][index] = lonLat.forwardMercator();\n\n                //\n                // Apply new extent(TODO: think about optimization)\n                //\n                var extent = this._extent;\n                extent.southWest.set(180.0, 90.0);\n                extent.northEast.set(-180.0, -90.0);\n                for (let i = 0; i < l.length; i++) {\n                    var pi = l[i] as LonLat[];\n                    for (let j = 0; j < pi.length; j++) {\n                        var lon = pi[j].lon,\n                            lat = pi[j].lat;\n                        if (lon > extent.northEast.lon) {\n                            extent.northEast.lon = lon;\n                        }\n                        if (lat > extent.northEast.lat) {\n                            extent.northEast.lat = lat;\n                        }\n                        if (lon < extent.southWest.lon) {\n                            extent.southWest.lon = lon;\n                        }\n                        if (lat < extent.southWest.lat) {\n                            extent.southWest.lat = lat;\n                        }\n                    }\n                }\n            }\n\n            k = kk + index * 12 + 12;\n\n            Vec3.doubleToTwoFloats(coordinates, v_high, v_low);\n\n            vh[k] = v_high.x;\n            vh[k + 1] = v_high.y;\n            vh[k + 2] = v_high.z;\n            vh[k + 3] = v_high.x;\n            vh[k + 4] = v_high.y;\n            vh[k + 5] = v_high.z;\n            vh[k + 6] = v_high.x;\n            vh[k + 7] = v_high.y;\n            vh[k + 8] = v_high.z;\n            vh[k + 9] = v_high.x;\n            vh[k + 10] = v_high.y;\n            vh[k + 11] = v_high.z;\n\n            vl[k] = v_low.x;\n            vl[k + 1] = v_low.y;\n            vl[k + 2] = v_low.z;\n            vl[k + 3] = v_low.x;\n            vl[k + 4] = v_low.y;\n            vl[k + 5] = v_low.z;\n            vl[k + 6] = v_low.x;\n            vl[k + 7] = v_low.y;\n            vl[k + 8] = v_low.z;\n            vl[k + 9] = v_low.x;\n            vl[k + 10] = v_low.y;\n            vl[k + 11] = v_low.z;\n\n            if (index === path.length - 1 || index === path.length - 2) {\n                var first;\n                if (_closedLine) {\n                    first = path[0];\n                } else {\n                    var l1 = path.length - 1;\n                    first = new Vec3(\n                        path[l1].x + path[l1].x - path[l1 - 1].x,\n                        path[l1].y + path[l1].y - path[l1 - 1].y,\n                        path[l1].z + path[l1].z - path[l1 - 1].z\n                    );\n                }\n\n                k = kk + path.length * 12 + 12;\n\n                Vec3.doubleToTwoFloats(first, v_high, v_low);\n\n                vh[k] = v_high.x;\n                vh[k + 1] = v_high.y;\n                vh[k + 2] = v_high.z;\n                vh[k + 3] = v_high.x;\n                vh[k + 4] = v_high.y;\n                vh[k + 5] = v_high.z;\n                vh[k + 6] = v_high.x;\n                vh[k + 7] = v_high.y;\n                vh[k + 8] = v_high.z;\n                vh[k + 9] = v_high.x;\n                vh[k + 10] = v_high.y;\n                vh[k + 11] = v_high.z;\n\n                vl[k] = v_low.x;\n                vl[k + 1] = v_low.y;\n                vl[k + 2] = v_low.z;\n                vl[k + 3] = v_low.x;\n                vl[k + 4] = v_low.y;\n                vl[k + 5] = v_low.z;\n                vl[k + 6] = v_low.x;\n                vl[k + 7] = v_low.y;\n                vl[k + 8] = v_low.z;\n                vl[k + 9] = v_low.x;\n                vl[k + 10] = v_low.y;\n                vl[k + 11] = v_low.z;\n            }\n\n            this._changedBuffers[VERTICES_BUFFER] = true;\n        } else {\n            let path = this._path3v[segmentIndex] as Vec3[];\n            path[index].x = coordinates.x;\n            path[index].y = coordinates.y;\n            path[index].z = coordinates.z;\n        }\n    }\n\n    protected _resizePathLengths(index: number = 0) {\n        this._pathLengths[0] = 0;\n        for (let i = index + 1, len = this._path3v.length; i <= len; i++) {\n            this._pathLengths[i] = this._pathLengths[i - 1] + this._path3v[i - 1].length;\n        }\n    }\n\n    /**\n     * Remove path segment\n     * @param {number} index - Path segment index\n     */\n    public removeSegment(index: number) {\n        this._path3v.splice(index, 1);\n        this.setPath3v(([] as SegmentPath3vExt[]).concat(this._path3v));\n    }\n\n    /**\n     * Remove point from the path\n     * @param {number} index - Point index in a path segment\n     * @param {number} [multiLineIndex=0] - Segment path index\n     */\n    public removePoint(index: number, multiLineIndex: number = 0) {\n        this._path3v[multiLineIndex].splice(index, 1);\n        if (this._path3v[multiLineIndex].length === 0) {\n            this._path3v.splice(multiLineIndex, 1);\n        }\n        this.setPath3v(([] as SegmentPath3vExt[]).concat(this._path3v));\n    }\n\n    /**\n     * Insert point coordinates in a path segment\n     * @param {Vec3} point3v - Point coordinates\n     * @param {number} [index=0] - Index in the path\n     * @param {NumberArray4} [color] - Point color\n     * @param {number} [multilineIndex=0] - Path segment index\n     */\n    public insertPoint3v(point3v: Vec3, index: number = 0, color?: NumberArray4, multilineIndex: number = 0) {\n        let p = ([] as SegmentPath3vExt[]).concat(this._path3v),\n            pp = p[multilineIndex];\n        if (pp) {\n            let c = ([] as SegmentPathColor[]).concat(this._pathColors);\n\n            pp.splice(index, 0, point3v);\n\n            if (color) {\n                let cc = c[multilineIndex];\n                if (!cc) {\n                    cc = new Array(pp.length);\n                }\n                cc.splice(index, 0, color);\n            }\n\n            this.setPath3v(p, c);\n        } else {\n            this.addPoint3v(point3v, multilineIndex);\n        }\n    }\n\n    /**\n     * Adds a new cartesian point in the end of the path in a last line segment.\n     * @public\n     * @param {Vec3} point3v - New coordinates.\n     * @param {NumberArray4} [color] -\n     * @param {boolean} [skipEllipsoid] -\n     */\n    public appendPoint3v(point3v: Vec3, color?: NumberArray4, skipEllipsoid?: boolean) {\n        if (this._path3v.length === 0 || !this._renderNode) {\n            this._pathColors.push([color || this._defaultColor as NumberArray4]);\n            this.addPoint3v(point3v);\n        } else {\n            //\n            // Making typedArrays suitable for appendPoint function\n            //\n            this._verticesHigh = makeArray(this._verticesHigh);\n            this._verticesLow = makeArray(this._verticesLow);\n            this._colors = makeArray(this._colors);\n            this._orders = makeArray(this._orders);\n            this._indexes = makeArray(this._indexes);\n\n            Polyline.appendPoint3v(\n                this._path3v,\n                point3v,\n                this._pathColors,\n                color || this._defaultColor as NumberArray4,\n                this._closedLine,\n                this._verticesHigh,\n                this._verticesLow,\n                this._colors,\n                this._orders,\n                this._indexes,\n                !skipEllipsoid ? (this._renderNode as Planet).ellipsoid : null,\n                this._pathLonLat,\n                this._pathLonLatMerc,\n                this._extent\n            );\n\n            this._pathLengths[this._path3v.length] += 1;\n\n            this._changedBuffers[VERTICES_BUFFER] = true;\n            this._changedBuffers[COLORS_BUFFER] = true;\n            this._changedBuffers[INDEX_BUFFER] = true;\n        }\n    }\n\n    /**\n     * Append new point in the end of the path.\n     * @public\n     * @param {Vec3} point3v - New point coordinates.\n     * @param {number} [multiLineIndex=0] - Path segment index, first by default.\n     */\n    public addPoint3v(point3v: Vec3, multiLineIndex: number = 0) {\n        //\n        // TODO: could be optimized\n        //\n        if (multiLineIndex >= this._path3v.length) {\n            this._path3v.push([]);\n        }\n        this._path3v[multiLineIndex].push(point3v);\n        this.setPath3v(([] as SegmentPath3vExt[]).concat(this._path3v));\n    }\n\n    /**\n     * Append new geodetic point in the end of the path.\n     * @public\n     * @param {LonLat} lonLat - New coordinate.\n     * @param {number} [multiLineIndex=0] - Path segment index, first by default.\n     */\n    public addPointLonLat(lonLat: LonLat, multiLineIndex: number = 0) {\n        //\n        // TODO: could be optimized\n        //\n        if (multiLineIndex >= this._pathLonLat.length) {\n            this._pathLonLat.push([]);\n        }\n        this._pathLonLat[multiLineIndex].push(lonLat);\n        this.setPathLonLat(([] as SegmentPathLonLatExt[]).concat(this._pathLonLat));\n    }\n\n    /**\n     * Clear polyline data.\n     * @public\n     */\n    public clear() {\n        this._clearData();\n    }\n\n    /**\n     * Change path point color\n     * @param {NumberArray4} color - New color\n     * @param {number} [index=0] - Point index\n     * @param {number} [segmentIndex=0] - Path segment index\n     */\n    public setPointColor(color: NumberArray4, index: number = 0, segmentIndex: number = 0) {\n        if (this._renderNode && index < this._path3v[segmentIndex].length) {\n            let colors = this._pathColors[segmentIndex];\n\n            if (!colors) {\n                if (this._path3v[segmentIndex] && index < this._path3v[segmentIndex].length) {\n                    this._pathColors[segmentIndex] = new Array(this._path3v[segmentIndex].length);\n                } else {\n                    return;\n                }\n            }\n\n            if (!colors[index]) {\n                colors[index] = [color[R], color[G], color[B], color[A] || 1.0];\n            } else {\n                colors[index][R] = color[R];\n                colors[index][G] = color[G];\n                colors[index][B] = color[B];\n                colors[index][A] = color[A] || 1.0;\n            }\n\n            let c = this._colors;\n\n            //optimized with this._pathLengths\n            //for (let i = 0; i < segmentIndex; i++) {\n            //    kk += this._path3v[i].length * 16 + 32;\n            //}\n\n            let k = index * 16 + this._pathLengths[segmentIndex] * 16 + 32 * segmentIndex;\n\n            c[k] = c[k + 4] = c[k + 8] = c[k + 12] = color[R];\n            c[k + 1] = c[k + 5] = c[k + 9] = c[k + 13] = color[G];\n            c[k + 2] = c[k + 6] = c[k + 10] = c[k + 14] = color[B];\n            c[k + 3] = c[k + 7] = c[k + 11] = c[k + 15] = color[A] || 1.0;\n\n            this._changedBuffers[COLORS_BUFFER] = true;\n        } else {\n            let pathColors = this._pathColors[segmentIndex];\n            pathColors[index] = color;\n        }\n    }\n\n    /**\n     * Sets polyline opacity.\n     * @public\n     * @param {number} opacity - Opacity.\n     */\n    public setOpacity(opacity: number) {\n        this._opacity = opacity;\n    }\n\n    /**\n     * Sets Polyline thickness in screen pixels.\n     * @public\n     * @param {number} thickness - Thickness.\n     */\n    public setAltitude(altitude: number) {\n        this.altitude = altitude;\n    }\n\n    /**\n     * Sets Polyline thickness in screen pixels.\n     * @public\n     * @param {number} thickness - Thickness.\n     */\n    public setThickness(thickness: number) {\n        this.thickness = thickness;\n    }\n\n    /**\n     * Returns thickness.\n     * @public\n     * @return {number} Thickness in screen pixels.\n     */\n    public getThickness(): number {\n        return this.thickness;\n    }\n\n    /**\n     * Sets visibility.\n     * @public\n     * @param {boolean} visibility - Polyline visibility.\n     */\n    public setVisibility(visibility: boolean) {\n        this.visibility = visibility;\n    }\n\n    /**\n     * Gets Polyline visibility.\n     * @public\n     * @return {boolean} Polyline visibility.\n     */\n    public getVisibility(): boolean {\n        return this.visibility;\n    }\n\n    /**\n     * Assign with render node.\n     * @public\n     * @param {RenderNode} renderNode -\n     */\n    public setRenderNode(renderNode: RenderNode) {\n        if (renderNode) {\n            this._renderNode = renderNode;\n            if (this._pathLonLat.length) {\n                this._createDataLonLat(([] as SegmentPathLonLatExt[]).concat(this._pathLonLat));\n            } else {\n                this._createData3v(([] as SegmentPath3vExt[]).concat(this._path3v));\n            }\n            this._refresh();\n            if (renderNode.renderer && renderNode.renderer.isInitialized()) {\n                this._update();\n            }\n        }\n    }\n\n    protected _clearData() {\n        //@ts-ignore\n        this._verticesHigh = null;\n        //@ts-ignore\n        this._verticesLow = null;\n        //@ts-ignore\n        this._orders = null;\n        //@ts-ignore\n        this._indexes = null;\n        //@ts-ignore\n        this._colors = null;\n\n        this._verticesHigh = [];\n        this._verticesLow = [];\n        this._orders = [];\n        this._indexes = [];\n        this._colors = [];\n\n        this._path3v.length = 0;\n        this._pathLonLat.length = 0;\n        this._pathLonLatMerc.length = 0;\n\n        this._path3v = [];\n        this._pathLonLat = [];\n        this._pathLonLatMerc = [];\n    }\n\n    protected _createData3v(path3v: SegmentPath3vExt[]) {\n        this._clearData();\n        Polyline.appendLineData3v(\n            path3v,\n            this._pathColors,\n            this._defaultColor as NumberArray4,\n            this._closedLine,\n            this._verticesHigh as number[],\n            this._verticesLow as number[],\n            this._orders as number[],\n            this._indexes as number[],\n            (this._renderNode as Planet).ellipsoid,\n            this._pathLonLat,\n            this._path3v,\n            this._pathLonLatMerc,\n            this._extent,\n            this._colors as number[]\n        );\n        this._resizePathLengths(0);\n    }\n\n    protected _createDataLonLat(pathLonlat: SegmentPathLonLatExt[]) {\n        this._clearData();\n        Polyline.appendLineDataLonLat(\n            pathLonlat,\n            this._pathColors,\n            this._defaultColor as NumberArray4,\n            this._closedLine,\n            this._verticesHigh as number[],\n            this._verticesLow as number[],\n            this._orders as number[],\n            this._indexes as number[],\n            (this._renderNode as Planet).ellipsoid,\n            this._path3v,\n            this._pathLonLat,\n            this._pathLonLatMerc,\n            this._extent,\n            this._colors as number[]\n        );\n        this._resizePathLengths(0);\n    }\n\n    /**\n     * Removes from an entity.\n     * @public\n     */\n    public remove() {\n        this._entity = null;\n\n        this._pathColors.length = 0;\n        this._pathColors = [];\n\n        //@ts-ignore\n        this._verticesHigh = null;\n        //@ts-ignore\n        this._verticesLow = null;\n        //@ts-ignore\n        this._orders = null;\n        //@ts-ignore\n        this._indexes = null;\n        //@ts-ignore\n        this._colors = null;\n\n        this._verticesHigh = [];\n        this._verticesLow = [];\n        this._orders = [];\n        this._indexes = [];\n        this._colors = [];\n\n        this._deleteBuffers();\n\n        this._handler && this._handler.remove(this);\n    }\n\n    public setPickingColor3v(color: Vec3) {\n        this._pickingColor[0] = color.x / 255.0;\n        this._pickingColor[1] = color.y / 255.0;\n        this._pickingColor[2] = color.z / 255.0;\n    }\n\n    /**\n     * Returns polyline geodetic extent.\n     * @public\n     * @returns {Extent} - Geodetic extent\n     */\n    public getExtent(): Extent {\n        return this._extent.clone();\n    }\n\n    /**\n     * Returns path cartesian coordinates.\n     * @return {SegmentPath3vExt[]} Polyline path.\n     */\n    public getPath3v(): SegmentPath3vExt[] {\n        return this._path3v;\n    }\n\n    /**\n     * Returns geodetic path coordinates.\n     * @return {SegmentPathLonLatExt[]} Polyline path.\n     */\n    public getPathLonLat(): SegmentPathLonLatExt[] {\n        return this._pathLonLat;\n    }\n\n    public getPathColors(): NumberArray4[][] {\n        return this._pathColors;\n    }\n\n    /**\n     * @todo\n     * @param {NumberArray4[][]} pathColors\n     */\n    setPathColors(pathColors: SegmentPathColor[]) {\n        if (pathColors) {\n            this._colors = [];\n            this._pathColors = ([] as SegmentPathColor[]).concat(pathColors);\n            Polyline.setPathColors(\n                this._pathLonLat,\n                pathColors,\n                this._defaultColor as NumberArray4,\n                this._colors\n            );\n            // Mark the colors buffer as changed\n            this._changedBuffers[COLORS_BUFFER] = true;\n        }\n    }\n\n    /**\n     * Sets polyline color\n     * @param {string} htmlColor- HTML color\n     */\n    public setColorHTML(htmlColor: string) {\n        this._defaultColor = htmlColorToFloat32Array(htmlColor);\n\n        let color = htmlColorToRgba(htmlColor),\n            p = this._pathColors;\n\n        for (let i = 0, len = p.length; i < len; i++) {\n            let s = p[i];\n            for (let j = 0, slen = s.length; j < slen; j++) {\n                s[j][0] = color.x;\n                s[j][1] = color.y;\n                s[j][2] = color.z;\n                s[j][3] = color.w;\n            }\n        }\n\n        let c = this._colors;\n        for (let i = 0, len = c.length; i < len; i += 4) {\n            c[i] = color.x;\n            c[i + 1] = color.y;\n            c[i + 2] = color.z;\n            c[i + 3] = color.w;\n        }\n\n        this._changedBuffers[COLORS_BUFFER] = true;\n    }\n\n    /**\n     * Sets polyline geodetic coordinates.\n     * @public\n     * @param {SegmentPathLonLat[]} pathLonLat - Polyline path cartesian coordinates.\n     * @param {Boolean} [forceEqual=false] - OPTIMIZATION FLAG: Makes assigning faster for size equal coordinates array.\n     */\n    public setPathLonLat(pathLonLat: SegmentPathLonLatExt[], forceEqual: boolean = false) {\n        if (this._renderNode && (this._renderNode as Planet).ellipsoid) {\n            if (forceEqual) {\n                this._setEqualPathLonLat(pathLonLat as SegmentPathLonLat[]);\n                this._changedBuffers[VERTICES_BUFFER] = true;\n                this._changedBuffers[COLORS_BUFFER] = true;\n            } else {\n                this._createDataLonLat(pathLonLat);\n                this._changedBuffers[VERTICES_BUFFER] = true;\n                this._changedBuffers[INDEX_BUFFER] = true;\n                this._changedBuffers[COLORS_BUFFER] = true;\n            }\n        } else {\n            this._pathLonLat = ([] as SegmentPathLonLatExt[]).concat(pathLonLat);\n        }\n    }\n\n    /**\n     * Sets Polyline cartesian coordinates.\n     * @public\n     * @param {SegmentPath3vExt[]} path3v - Polyline path cartesian coordinates. (exactly 3 entries)\n     * @param {SegmentPathColor[]} [pathColors] - Polyline path cartesian coordinates. (exactly 3 entries)\n     * @param {Boolean} [forceEqual=false] - Makes assigning faster for size equal coordinates array.\n     */\n    public setPath3v(path3v: SegmentPath3vExt[], pathColors?: SegmentPathColor[], forceEqual: boolean = false) {\n        if (pathColors) {\n            this._pathColors = ([] as SegmentPathColor[]).concat(pathColors);\n        }\n\n        if (this._renderNode) {\n            if (forceEqual) {\n                this._setEqualPath3v(path3v);\n                this._changedBuffers[VERTICES_BUFFER] = true;\n                this._changedBuffers[COLORS_BUFFER] = true;\n            } else {\n                this._createData3v(path3v);\n                this._changedBuffers[VERTICES_BUFFER] = true;\n                this._changedBuffers[INDEX_BUFFER] = true;\n                this._changedBuffers[COLORS_BUFFER] = true;\n            }\n        } else {\n            this._path3v = ([] as SegmentPath3vExt[]).concat(path3v);\n        }\n    }\n\n    public draw() {\n        if (this.visibility && this._path3v.length) {\n            this._update();\n\n            let rn = this._renderNode!;\n            let r = rn.renderer!;\n            let sh = r.handler.programs.polyline_screen;\n            let p = sh._program;\n            let gl = r.handler.gl!,\n                sha = p.attributes,\n                shu = p.uniforms;\n\n            let ec = this._handler!._entityCollection;\n\n            sh.activate();\n\n            gl.disable(gl.CULL_FACE);\n\n            gl.uniform1f(shu.depthOffset, ec.polygonOffsetUnits);\n\n            gl.uniformMatrix4fv(shu.proj, false, r.activeCamera!.getProjectionMatrix());\n            gl.uniformMatrix4fv(shu.view, false, r.activeCamera!.getViewMatrix());\n\n            // gl.uniform4fv(shu.color, [this.color.x, this.color.y, this.color.z, this.color.w * this._handler._entityCollection._fadingOpacity]);\n\n            gl.uniform3fv(shu.eyePositionHigh, r.activeCamera!.eyeHigh);\n            gl.uniform3fv(shu.eyePositionLow, r.activeCamera!.eyeLow);\n\n            //gl.uniform2fv(shu.uFloatParams, [(rn as Planet)._planetRadius2 || 0.0, r.activeCamera!._tanViewAngle_hradOneByHeight]);\n            gl.uniform2fv(shu.viewport, [r.handler.canvas!.width, r.handler.canvas!.height]);\n            gl.uniform1f(shu.thickness, this.thickness * 0.5);\n            gl.uniform1f(shu.opacity, this._opacity * ec._fadingOpacity);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._colorsBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(sha.color, this._colorsBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            let v = this._verticesHighBuffer!;\n            gl.bindBuffer(gl.ARRAY_BUFFER, v);\n            gl.vertexAttribPointer(sha.prevHigh, v.itemSize, gl.FLOAT, false, 12, 0);\n            gl.vertexAttribPointer(sha.currentHigh, v.itemSize, gl.FLOAT, false, 12, 48);\n            gl.vertexAttribPointer(sha.nextHigh, v.itemSize, gl.FLOAT, false, 12, 96);\n\n            v = this._verticesLowBuffer!;\n            gl.bindBuffer(gl.ARRAY_BUFFER, v);\n            gl.vertexAttribPointer(sha.prevLow, v.itemSize, gl.FLOAT, false, 12, 0);\n            gl.vertexAttribPointer(sha.currentLow, v.itemSize, gl.FLOAT, false, 12, 48);\n            gl.vertexAttribPointer(sha.nextLow, v.itemSize, gl.FLOAT, false, 12, 96);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._ordersBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(sha.order, this._ordersBuffer!.itemSize, gl.FLOAT, false, 4, 0);\n\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexesBuffer as WebGLBuffer);\n            gl.drawElements(gl.TRIANGLE_STRIP, this._indexesBuffer!.numItems, gl.UNSIGNED_INT, 0);\n\n            gl.enable(gl.CULL_FACE);\n        }\n    }\n\n    public drawPicking() {\n        if (this.visibility && this._path3v.length) {\n            let rn = this._renderNode!;\n            let r = rn.renderer!;\n            let sh = r.handler.programs.polyline_picking;\n            let p = sh._program;\n            let gl = r.handler.gl!,\n                sha = p.attributes,\n                shu = p.uniforms;\n\n            sh.activate();\n\n            gl.disable(gl.CULL_FACE);\n\n            gl.uniform1f(shu.depthOffset, this._handler!._entityCollection.polygonOffsetUnits);\n\n            gl.uniformMatrix4fv(shu.proj, false, r.activeCamera!.getProjectionMatrix());\n            gl.uniformMatrix4fv(shu.view, false, r.activeCamera!.getViewMatrix());\n\n            gl.uniform4fv(shu.color, [\n                this._pickingColor[0],\n                this._pickingColor[1],\n                this._pickingColor[2],\n                1.0\n            ]);\n\n            gl.uniform3fv(shu.eyePositionHigh, r.activeCamera!.eyeHigh);\n            gl.uniform3fv(shu.eyePositionLow, r.activeCamera!.eyeLow);\n\n            gl.uniform2fv(shu.uFloatParams, [(rn as Planet)._planetRadius2 || 0.0, r.activeCamera!._tanViewAngle_hradOneByHeight]);\n            //@todo: replace to the handler property\n            gl.uniform2fv(shu.viewport, [r.handler.canvas!.width, r.handler.canvas!.height]);\n            gl.uniform1f(shu.thickness, this.thickness * 0.5);\n\n            let v = this._verticesHighBuffer!;\n            gl.bindBuffer(gl.ARRAY_BUFFER, v);\n            gl.vertexAttribPointer(sha.prevHigh, v.itemSize, gl.FLOAT, false, 12, 0);\n            gl.vertexAttribPointer(sha.currentHigh, v.itemSize, gl.FLOAT, false, 12, 48);\n            gl.vertexAttribPointer(sha.nextHigh, v.itemSize, gl.FLOAT, false, 12, 96);\n\n            v = this._verticesLowBuffer!;\n            gl.bindBuffer(gl.ARRAY_BUFFER, v);\n            gl.vertexAttribPointer(sha.prevLow, v.itemSize, gl.FLOAT, false, 12, 0);\n            gl.vertexAttribPointer(sha.currentLow, v.itemSize, gl.FLOAT, false, 12, 48);\n            gl.vertexAttribPointer(sha.nextLow, v.itemSize, gl.FLOAT, false, 12, 96);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._ordersBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(sha.order, this._ordersBuffer!.itemSize, gl.FLOAT, false, 4, 0);\n\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexesBuffer as WebGLBuffer);\n            gl.drawElements(gl.TRIANGLE_STRIP, this._indexesBuffer!.numItems, gl.UNSIGNED_INT, 0);\n\n            gl.enable(gl.CULL_FACE);\n        }\n    }\n\n    /**\n     * Refresh buffers.\n     * @protected\n     */\n    protected _refresh() {\n        let i = this._changedBuffers.length;\n        while (i--) {\n            this._changedBuffers[i] = true;\n        }\n    }\n\n    /**\n     * Updates render buffers.\n     * @protected\n     */\n    protected _update() {\n        if (this._renderNode) {\n            let i = this._changedBuffers.length;\n            while (i--) {\n                if (this._changedBuffers[i]) {\n                    this._buffersUpdateCallbacks[i].call(this);\n                    this._changedBuffers[i] = false;\n                }\n            }\n        }\n    }\n\n    /**\n     * Clear GL buffers.\n     * @public\n     */\n    public _deleteBuffers() {\n        if (this._renderNode) {\n            let r = this._renderNode.renderer!,\n                gl = r.handler.gl!;\n\n            gl.deleteBuffer(this._verticesHighBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._verticesLowBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._ordersBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._indexesBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._colorsBuffer as WebGLBuffer);\n\n            this._verticesHighBuffer = null;\n            this._verticesLowBuffer = null;\n            this._ordersBuffer = null;\n            this._indexesBuffer = null;\n            this._colorsBuffer = null;\n        }\n    }\n\n    /**\n     * Creates vertices buffers.\n     * @protected\n     */\n    protected _createVerticesBuffer() {\n        let h = this._renderNode!.renderer!.handler;\n\n        let numItems = this._verticesHigh.length / 3;\n\n        if (!this._verticesHighBuffer || this._verticesHighBuffer.numItems !== numItems) {\n            h.gl!.deleteBuffer(this._verticesHighBuffer as WebGLBuffer);\n            h.gl!.deleteBuffer(this._verticesLowBuffer as WebGLBuffer);\n            this._verticesHighBuffer = h.createStreamArrayBuffer(3, numItems);\n            this._verticesLowBuffer = h.createStreamArrayBuffer(3, numItems);\n        }\n\n        this._verticesHigh = makeArrayTyped(this._verticesHigh);\n        this._verticesLow = makeArrayTyped(this._verticesLow);\n\n        h.setStreamArrayBuffer(this._verticesHighBuffer!, this._verticesHigh as Float32Array);\n        h.setStreamArrayBuffer(this._verticesLowBuffer!, this._verticesLow as Float32Array);\n    }\n\n    /**\n     * Creates gl index and order buffer.\n     * @protected\n     */\n    protected _createIndexBuffer() {\n        let h = this._renderNode!.renderer!.handler;\n        h.gl!.deleteBuffer(this._ordersBuffer as WebGLBuffer);\n        h.gl!.deleteBuffer(this._indexesBuffer as WebGLBuffer);\n\n        this._orders = makeArrayTyped(this._orders);\n        this._ordersBuffer = h.createArrayBuffer(this._orders as Uint8Array, 1, this._orders.length / 2);\n\n        this._indexes = makeArrayTyped(this._indexes, Uint32Array);\n        this._indexesBuffer = h.createElementArrayBuffer(this._indexes as Uint32Array, 1, this._indexes.length);\n    }\n\n    protected _createColorsBuffer() {\n        let h = this._renderNode!.renderer!.handler;\n        h.gl!.deleteBuffer(this._colorsBuffer as WebGLBuffer);\n\n        this._colors = makeArrayTyped(this._colors);\n        this._colorsBuffer = h.createArrayBuffer(new Float32Array(this._colors), 4, this._colors.length / 4);\n    }\n}\n\nexport {Polyline};\n","import * as utils from \"../utils/shared\";\nimport {NumberArray3, Vec3} from \"../math/Vec3\";\nimport {NumberArray4, Vec4} from \"../math/Vec4\";\nimport {Entity} from \"./Entity\";\nimport {RayHandler} from \"./RayHandler\";\n\nexport interface IRayParams {\n    thickness?: number;\n    startPosition?: Vec3 | NumberArray3;\n    endPosition?: Vec3 | NumberArray3;\n    startColor?: string | NumberArray4;\n    endColor?: string | NumberArray4;\n    visibility?: boolean;\n\n}\n\n/**\n * Ray class.\n * @class\n * @param {Object} [options] - Options:\n * @param {Vec3|Array.<number>} [options.startPosition] - Ray start point position.\n * @param {Vec3|Array.<number>} [options.endPosition] - Ray end point position.\n * @param {Vec3|Array.<number>} [options.startColor] - Ray start point color.\n * @param {Vec3|Array.<number>} [options.endColor] - Ray end point color.\n * @param {boolean} [options.visibility] - Visibility.\n */\nclass Ray {\n\n    static __counter__: number = 0;\n    /**\n     * Object uniq identifier.\n     * @protected\n     * @type {number}\n     */\n    protected __id: number;\n\n    public _thickness: number;\n\n    protected _startPosition: Vec3;\n    public _startPositionHigh: Vec3;\n    public _startPositionLow: Vec3;\n\n    // RTE end position\n    protected _endPosition: Vec3;\n    public _endPositionHigh: Vec3;\n    public _endPositionLow: Vec3;\n\n    // start end point colors\n    public _startColor: Vec4;\n    public _endColor: Vec4;\n\n    /**\n     * Ray visibility.\n     * @protected\n     * @type {boolean}\n     */\n    protected _visibility: boolean;\n\n    /**\n     * Entity instance that holds this billboard.\n     * @public\n     * @type {Entity}\n     */\n    public _entity: Entity | null;\n\n    /**\n     * Handler that stores and renders this billboard object.\n     * @public\n     * @type {BillboardHandler}\n     */\n    public _handler: RayHandler | null;\n\n    /**\n     * Billboard handler array index.\n     * @public\n     * @type {number}\n     */\n    public _handlerIndex: number;\n    constructor(options: IRayParams = {}) {\n\n        this.__id = Ray.__counter__++;\n\n        this._thickness = options.thickness || 2.0;\n\n        this._startPosition = utils.createVector3(options.startPosition);\n        this._startPositionHigh = new Vec3();\n        this._startPositionLow = new Vec3();\n        Vec3.doubleToTwoFloats(\n            this._startPosition,\n            this._startPositionHigh,\n            this._startPositionLow\n        );\n\n        this._endPosition = utils.createVector3(options.endPosition);\n        this._endPositionHigh = new Vec3();\n        this._endPositionLow = new Vec3();\n        Vec3.doubleToTwoFloats(this._endPosition, this._endPositionHigh, this._endPositionLow);\n\n        this._startColor = utils.createColorRGBA(options.startColor);\n        this._endColor = utils.createColorRGBA(options.endColor);\n\n        this._visibility = options.visibility != undefined ? options.visibility : true;\n\n        this._entity = null;\n\n        this._handler = null;\n\n        this._handlerIndex = -1;\n    }\n\n    /**\n     * Sets ray start position.\n     * @public\n     * @param {number} x - X coordinate.\n     * @param {number} y - Y coordinate.\n     * @param {number} z - Z coordinate.\n     */\n    public setStartPosition(x: number, y: number, z: number) {\n        this._startPosition.x = x;\n        this._startPosition.y = y;\n        this._startPosition.z = z;\n        Vec3.doubleToTwoFloats(\n            this._startPosition,\n            this._startPositionHigh,\n            this._startPositionLow\n        );\n        this._handler &&\n        this._handler.setStartPositionArr(\n            this._handlerIndex,\n            this._startPositionHigh,\n            this._startPositionLow\n        );\n    }\n\n    public getLength(): number {\n        return this._startPosition.distance(this._endPosition);\n    }\n\n    /**\n     * Sets ray start position.\n     * @public\n     * @param {Vec3} position - Cartesian coordinates.\n     */\n    public setStartPosition3v(position: Vec3) {\n        this._startPosition.x = position.x;\n        this._startPosition.y = position.y;\n        this._startPosition.z = position.z;\n        Vec3.doubleToTwoFloats(\n            this._startPosition,\n            this._startPositionHigh,\n            this._startPositionLow\n        );\n        this._handler &&\n        this._handler.setStartPositionArr(\n            this._handlerIndex,\n            this._startPositionHigh,\n            this._startPositionLow\n        );\n    }\n\n    /**\n     * Sets ray end position.\n     * @public\n     * @param {number} x - X coordinate.\n     * @param {number} y - Y coordinate.\n     * @param {number} z - Z coordinate.\n     */\n    public setEndPosition(x: number, y: number, z: number) {\n        this._endPosition.x = x;\n        this._endPosition.y = y;\n        this._endPosition.z = z;\n        Vec3.doubleToTwoFloats(this._endPosition, this._endPositionHigh, this._endPositionLow);\n        this._handler &&\n        this._handler.setEndPositionArr(\n            this._handlerIndex,\n            this._endPositionHigh,\n            this._endPositionLow\n        );\n    }\n\n    /**\n     * Sets ray end position.\n     * @public\n     * @param {Vec3} position - Cartesian coordinates.\n     */\n    public setEndPosition3v(position: Vec3) {\n        this._endPosition.x = position.x;\n        this._endPosition.y = position.y;\n        this._endPosition.z = position.z;\n        Vec3.doubleToTwoFloats(this._endPosition, this._endPositionHigh, this._endPositionLow);\n        this._handler &&\n        this._handler.setEndPositionArr(\n            this._handlerIndex,\n            this._endPositionHigh,\n            this._endPositionLow\n        );\n    }\n\n    public setThickness(thickness: number) {\n        this._thickness = thickness;\n        this._handler && this._handler.setThicknessArr(this._handlerIndex, thickness);\n    }\n\n    public setColors4v(startColor?: Vec4, endColor?: Vec4) {\n        if (startColor) {\n            this._startColor.x = startColor.x;\n            this._startColor.y = startColor.y;\n            this._startColor.z = startColor.z;\n            this._startColor.w = startColor.w;\n        }\n\n        if (endColor) {\n            this._endColor.x = endColor.x;\n            this._endColor.y = endColor.y;\n            this._endColor.z = endColor.z;\n            this._endColor.w = endColor.w;\n        }\n\n        this._handler &&\n        this._handler.setRgbaArr(this._handlerIndex, this._startColor, this._endColor);\n    }\n\n    public setColorsHTML(startColor?: string, endColor?: string) {\n        if (startColor) {\n            this._startColor = utils.htmlColorToRgba(startColor);\n        }\n\n        if (endColor) {\n            this._endColor = utils.htmlColorToRgba(endColor);\n        }\n\n        this._handler && this._handler.setRgbaArr(this._handlerIndex, this._startColor, this._endColor);\n    }\n\n    /**\n     * Returns ray start position.\n     * @public\n     * @returns {Vec3}\n     */\n    public getStartPosition(): Vec3 {\n        return this._startPosition;\n    }\n\n    /**\n     * Returns ray end position.\n     * @public\n     * @returns {Vec3}\n     */\n    public getEndPosition(): Vec3 {\n        return this._endPosition;\n    }\n\n    /**\n     * Sets visibility.\n     * @public\n     * @param {boolean} visibility - Visibility flag.\n     */\n    public setVisibility(visibility: boolean) {\n        this._visibility = visibility;\n        this._handler && this._handler.setVisibility(this._handlerIndex, visibility);\n    }\n\n    /**\n     * Returns visibility.\n     * @public\n     * @returns {boolean}\n     */\n    public getVisibility(): boolean {\n        return this._visibility;\n    }\n\n    /**\n     * Remove from handler.\n     * @public\n     */\n    public remove() {\n        this._entity = null;\n        this._handler && this._handler.remove(this);\n    }\n\n    /**\n     * Set picking color.\n     * @public\n     * @param {Vec3} color - Picking color.\n     */\n    public setPickingColor3v(color: Vec3) {\n        this._handler && this._handler.setPickingColorArr(this._handlerIndex, color);\n    }\n}\n\nexport {Ray};\n","import * as utils from \"../utils/shared\";\nimport {Entity} from \"./Entity\";\nimport {Line3} from \"../math/Line3\";\nimport {RenderNode} from \"../scene/RenderNode\";\nimport {NumberArray3, Vec3} from \"../math/Vec3\";\nimport {NumberArray4, Vec4} from \"../math/Vec4\";\nimport {StripHandler} from \"./StripHandler\";\nimport {WebGLBufferExt} from \"../webgl/Handler\";\n\ntype TPoiExt = Vec3 | NumberArray3;\ntype TStripExt = [TPoiExt, TPoiExt];\n\ntype TPoi = Vec3;\ntype TStrip = [TPoi, TPoi];\n\n//type TStrip = TEdge[];\nexport interface IStripParams {\n    visibility?: boolean;\n    color?: string | NumberArray4 | Vec4;\n    opacity?: number;\n    path?: TStrip[];\n}\n\nlet _tempHigh = new Vec3(),\n    _tempLow = new Vec3();\n\n/**\n * Strip object.\n * @class\n * @param {*} [options] - Strip options:\n * @param {boolean} [options.visibility] - Strip visibility.\n * @example <caption>Stripe example</caption>\n * new og.Entity({\n *     strip: {\n *         gridSize: 10,\n *         path: [\n *             [[],[]],\n *             [[],[]]\n *         ]\n *     }\n * });\n */\nclass Strip {\n\n    static __counter__: number = 0;\n\n    protected __id: number;\n\n    /**\n     * Strip visibility.\n     * @public\n     * @type {boolean}\n     */\n    public visibility: boolean;\n\n    public color: Float32Array;\n\n    /**\n     * Parent collection render node.\n     * @protected\n     * @type {RenderNode}\n     */\n    protected _renderNode: RenderNode | null;\n\n    /**\n     * Entity instance that holds this strip.\n     * @public\n     * @type {Entity}\n     */\n    public _entity: Entity | null;\n    protected _verticesHighBuffer: WebGLBufferExt | null;\n    protected _verticesLowBuffer: WebGLBufferExt | null;\n    protected _indexBuffer: WebGLBufferExt | null;\n    protected _verticesHigh: number[];\n    protected _verticesLow: number[];\n    protected _indexes: number[];\n    protected _path: TStrip[];\n\n    protected _pickingColor: Float32Array;\n\n    protected _gridSize: number;\n\n    /**\n     * Handler that stores and renders this object.\n     * @public\n     * @type {StripHandler | null}\n     */\n    public _handler: StripHandler | null;\n    public _handlerIndex: number;\n\n    constructor(options: IStripParams = {}) {\n\n        this.__id = Strip.__counter__++;\n\n        this.visibility = options.visibility != undefined ? options.visibility : true;\n\n        this.color = new Float32Array([1.0, 1.0, 1.0, 0.5]);\n\n        if (options.color) {\n            let color = utils.createColorRGBA(options.color);\n            this.setColor(color.x, color.y, color.z, color.w);\n        }\n\n        if (options.opacity) {\n            this.setOpacity(options.opacity);\n        }\n\n        /**\n         * Parent collection render node.\n         * @protected\n         * @type {RenderNode}\n         */\n        this._renderNode = null;\n\n        /**\n         * Entity instance that holds this strip.\n         * @protected\n         * @type {Entity}\n         */\n        this._entity = null;\n\n        this._verticesHighBuffer = null;\n        this._verticesLowBuffer = null;\n\n        this._indexBuffer = null;\n\n        this._verticesHigh = [];\n        this._verticesLow = [];\n\n        this._indexes = [];\n\n        this._path = [];\n\n        this._pickingColor = new Float32Array(4);\n\n        this._gridSize = 1;\n\n        /**\n         * Handler that stores and renders this object.\n         * @protected\n         * @type {StripHandler}\n         */\n        this._handler = null;\n        this._handlerIndex = -1;\n\n        if (options.path) {\n            this.setPath(options.path);\n        }\n    }\n\n    /**\n     * Assign picking color.\n     * @public\n     * @param {Vec3} color - Picking RGB color.\n     */\n    public setPickingColor3v(color: Vec3) {\n        this._pickingColor[0] = color.x / 255.0;\n        this._pickingColor[1] = color.y / 255.0;\n        this._pickingColor[2] = color.z / 255.0;\n        this._pickingColor[3] = 1.0;\n    }\n\n    /**\n     * Clears object\n     * @public\n     */\n    public clear() {\n        this._path.length = 0;\n        this._path = [];\n\n        this._verticesHigh.length = 0;\n        this._verticesHigh = [];\n\n        this._verticesLow.length = 0;\n        this._verticesLow = [];\n\n        this._indexes.length = 0;\n        this._indexes = [];\n\n        this._deleteBuffers();\n    }\n\n    /**\n     * Sets RGBA color. Each channel from 0.0 to 1.0.\n     * @public\n     * @param {Vec4} color - RGBA vector.\n     */\n    public setColor4v(color: Vec4) {\n        this.setColor(color.x, color.y, color.z, color.w);\n    }\n\n    /**\n     * Sets strip color.\n     * @public\n     * @param {string} color - HTML style color.\n     */\n    public setColorHTML(color: string) {\n        this.setColor4v(utils.htmlColorToRgba(color));\n    }\n\n    public setColor(r: number, g: number, b: number, a?: number) {\n        a = a || this.color[3];\n        this.color[0] = r;\n        this.color[1] = g;\n        this.color[2] = b;\n        this.color[3] = a;\n    }\n\n    /**\n     * Set strip opacity.\n     * @public\n     * @param {number} opacity - opacity.\n     */\n    public setOpacity(opacity: number) {\n        this.color[3] = opacity || 0;\n    }\n\n    /**\n     * Sets cloud visibility.\n     * @public\n     * @param {boolean} visibility - Visibility flag.\n     */\n    public setVisibility(visibility: boolean) {\n        this.visibility = visibility;\n    }\n\n    /**\n     * @return {boolean} Strip visibility.\n     */\n    public getVisibility(): boolean {\n        return this.visibility;\n    }\n\n    /**\n     * Assign rendering scene node.\n     * @public\n     * @param {RenderNode}  renderNode - Assigned render node.\n     */\n    public setRenderNode(renderNode: RenderNode) {\n        this._renderNode = renderNode;\n        this._createBuffers();\n    }\n\n    /**\n     * Removes from entity.\n     * @public\n     */\n    public remove() {\n        this._entity = null;\n        this._handler && this._handler.remove(this);\n    }\n\n    public draw() {\n        if (this.visibility && this._verticesHigh.length) {\n            let r = this._renderNode!.renderer!;\n\n            let gl = r.handler.gl!;\n\n            let sh = r.handler.programs.strip,\n                p = sh._program,\n                sha = p.attributes,\n                shu = p.uniforms;\n\n            sh.activate();\n\n            gl.disable(gl.CULL_FACE);\n\n            gl.uniformMatrix4fv(shu.viewMatrix, false, r.activeCamera!.getViewMatrix());\n            gl.uniformMatrix4fv(shu.projectionMatrix, false, r.activeCamera!.getProjectionMatrix());\n\n            gl.uniform3fv(shu.eyePositionHigh, r.activeCamera!.eyeHigh);\n            gl.uniform3fv(shu.eyePositionLow, r.activeCamera!.eyeLow);\n\n            gl.uniform4fv(shu.uColor, this.color);\n\n            gl.uniform1f(shu.uOpacity, this._entity!._entityCollection!._fadingOpacity);\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._verticesHighBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(\n                sha.aVertexPositionHigh,\n                this._verticesHighBuffer!.itemSize,\n                gl.FLOAT,\n                false,\n                0,\n                0\n            );\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._verticesLowBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(\n                sha.aVertexPositionLow,\n                this._verticesLowBuffer!.itemSize,\n                gl.FLOAT,\n                false,\n                0,\n                0\n            );\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer as WebGLBuffer);\n            gl.drawElements(\n                r.handler.gl!.TRIANGLE_STRIP,\n                this._indexBuffer!.numItems,\n                gl.UNSIGNED_INT,\n                0\n            );\n\n            gl.enable(gl.CULL_FACE);\n        }\n    }\n\n    drawPicking() {\n        if (this.visibility && this._verticesHigh.length) {\n            let r = this._renderNode!.renderer!;\n\n            let gl = r.handler.gl!;\n\n            let sh = r.handler.programs.strip,\n                p = sh._program,\n                sha = p.attributes,\n                shu = p.uniforms;\n\n            sh.activate();\n\n            gl.disable(gl.CULL_FACE);\n\n            gl.uniformMatrix4fv(shu.viewMatrix, false, r.activeCamera!.getViewMatrix());\n            gl.uniformMatrix4fv(shu.projectionMatrix, false, r.activeCamera!.getProjectionMatrix());\n\n            gl.uniform3fv(shu.eyePositionHigh, r.activeCamera!.eyeHigh);\n            gl.uniform3fv(shu.eyePositionLow, r.activeCamera!.eyeLow);\n\n            gl.uniform1f(shu.uOpacity, this._entity!._entityCollection!._fadingOpacity != 0 ? 1 : 0);\n\n            gl.uniform4fv(shu.uColor, this._pickingColor);\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._verticesHighBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(\n                sha.aVertexPositionHigh,\n                this._verticesHighBuffer!.itemSize,\n                gl.FLOAT,\n                false,\n                0,\n                0\n            );\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._verticesLowBuffer as WebGLBuffer);\n            gl.vertexAttribPointer(\n                sha.aVertexPositionLow,\n                this._verticesLowBuffer!.itemSize,\n                gl.FLOAT,\n                false,\n                0,\n                0\n            );\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer as WebGLBuffer);\n            gl.drawElements(\n                r.handler.gl!.TRIANGLE_STRIP,\n                this._indexBuffer!.numItems,\n                gl.UNSIGNED_INT,\n                0\n            );\n\n            gl.enable(gl.CULL_FACE);\n        }\n    }\n\n    /**\n     * Delete buffers\n     * @public\n     */\n    public _deleteBuffers() {\n        if (this._renderNode && this._renderNode.renderer) {\n            let r = this._renderNode.renderer,\n                gl = r.handler.gl!;\n\n            gl.deleteBuffer(this._indexBuffer!);\n            gl.deleteBuffer(this._verticesHighBuffer!);\n            gl.deleteBuffer(this._verticesLowBuffer!);\n        }\n        this._verticesHighBuffer = null;\n        this._verticesLowBuffer = null;\n        this._indexBuffer = null;\n    }\n\n    protected _createBuffers() {\n        if (this._renderNode && this._renderNode.renderer && this._renderNode.renderer.isInitialized()) {\n            let gl = this._renderNode.renderer.handler.gl!;\n\n            gl.deleteBuffer(this._indexBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._verticesHighBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._verticesLowBuffer as WebGLBuffer);\n\n            this._verticesHighBuffer = this._renderNode.renderer.handler.createArrayBuffer(\n                new Float32Array(this._verticesHigh),\n                3,\n                this._verticesHigh.length / 3\n            );\n            this._verticesLowBuffer = this._renderNode.renderer.handler.createArrayBuffer(\n                new Float32Array(this._verticesLow),\n                3,\n                this._verticesLow.length / 3\n            );\n            this._indexBuffer = this._renderNode.renderer.handler.createElementArrayBuffer(\n                new Uint32Array(this._indexes),\n                1,\n                this._indexes.length\n            );\n        }\n    }\n\n    public addEdge3v(p2: Vec3, p3: Vec3) {\n        let length = this._path.length;\n\n        if (length === 0) {\n            this._path.push([p2.clone(), p3.clone()]);\n        } else {\n            let p0 = this._path[length - 1][0],\n                p1 = this._path[length - 1][1];\n\n            this._path.push([p2.clone(), p3.clone()]);\n\n            let vHigh = this._verticesHigh,\n                vLow = this._verticesLow;\n\n            let gs = this._gridSize,\n                gs1 = gs + 1;\n\n            let p = new Vec3();\n\n            let last = this._verticesHigh.length / 3,\n                ind = last;\n\n            let d = Math.abs(p0.sub(p1).normal().dot(p2.sub(p0).normal()));\n\n            for (let i = 0; i < gs1; i++) {\n                let di = i / gs;\n                let p02 = p0.lerp(p2, di),\n                    p13 = p1.lerp(p3, di);\n\n                for (let j = 0; j < gs1; j++) {\n                    let dj = j / gs;\n                    let p01 = p0.lerp(p1, dj),\n                        p23 = p2.lerp(p3, dj);\n\n                    if (d !== 1.0) {\n                        new Line3(p02, p13).intersects(new Line3(p01, p23), p);\n                    } else {\n                        p = p23;\n                    }\n\n                    ind = last + i * gs1 + j;\n\n                    Vec3.doubleToTwoFloats(p, _tempHigh, _tempLow);\n\n                    let ind3 = ind * 3;\n\n                    vHigh[ind3] = _tempHigh.x;\n                    vHigh[ind3 + 1] = _tempHigh.y;\n                    vHigh[ind3 + 2] = _tempHigh.z;\n\n                    vLow[ind3] = _tempLow.x;\n                    vLow[ind3 + 1] = _tempLow.y;\n                    vLow[ind3 + 2] = _tempLow.z;\n\n                    if (i < gs) {\n                        this._indexes.push(ind, ind + gs1);\n                    }\n                }\n\n                if (i < gs) {\n                    this._indexes.push(ind + gs1, ind + 1);\n                }\n            }\n\n            this._createBuffers();\n        }\n    }\n\n    public setEdge3v(p2: Vec3, p3: Vec3, index: number) {\n        if (index === this._path.length) {\n            this.addEdge3v(p2, p3);\n            return;\n        }\n        if (this._path[index]) {\n            this._path[index][0] = p2;\n            this._path[index][1] = p3;\n\n            if (this._path.length > 1) {\n                let gs = this._gridSize,\n                    gs1 = gs + 1;\n\n                let vSize = gs1 * gs1;\n\n                let p = new Vec3();\n\n                let vHigh = this._verticesHigh,\n                    vLow = this._verticesLow;\n\n                if (index === this._path.length - 1) {\n                    let p0 = this._path[index - 1][0],\n                        p1 = this._path[index - 1][1];\n\n                    let prev = this._verticesHigh.length / 3 - vSize,\n                        ind = prev;\n\n                    let d = Math.abs(p0.sub(p1).normal().dot(p2.sub(p0).normal()));\n\n                    for (let i = 0; i < gs1; i++) {\n                        let di = i / gs;\n                        let p02 = p0.lerp(p2, di),\n                            p13 = p1.lerp(p3, di);\n\n                        for (let j = 0; j < gs1; j++) {\n                            let dj = j / gs;\n                            let p01 = p0.lerp(p1, dj),\n                                p23 = p2.lerp(p3, dj);\n\n                            if (d !== 1.0) {\n                                new Line3(p02, p13).intersects(new Line3(p01, p23), p);\n                            } else {\n                                p = p23;\n                            }\n\n                            ind = prev + i * gs1 + j;\n\n                            Vec3.doubleToTwoFloats(p, _tempHigh, _tempLow);\n\n                            let ind3 = ind * 3;\n\n                            vHigh[ind3] = _tempHigh.x;\n                            vHigh[ind3 + 1] = _tempHigh.y;\n                            vHigh[ind3 + 2] = _tempHigh.z;\n\n                            vLow[ind3] = _tempLow.x;\n                            vLow[ind3 + 1] = _tempLow.y;\n                            vLow[ind3 + 2] = _tempLow.z;\n                        }\n                    }\n                } else if (index === 0) {\n                    let ind = 0;\n\n                    let p0 = p2,\n                        p1 = p3;\n\n                    p2 = this._path[1][0];\n                    p3 = this._path[1][1];\n\n                    for (let i = 0; i < gs1; i++) {\n                        let di = i / gs;\n                        let p02 = p0.lerp(p2, di),\n                            p13 = p1.lerp(p3, di);\n\n                        for (let j = 0; j < gs1; j++) {\n                            let dj = j / gs;\n                            let p01 = p0.lerp(p1, dj),\n                                p23 = p2.lerp(p3, dj);\n\n                            new Line3(p02, p13).intersects(new Line3(p01, p23), p);\n\n                            ind = i * gs1 + j;\n\n                            Vec3.doubleToTwoFloats(p, _tempHigh, _tempLow);\n\n                            let ind3 = ind * 3;\n\n                            vHigh[ind3] = _tempHigh.x;\n                            vHigh[ind3 + 1] = _tempHigh.y;\n                            vHigh[ind3 + 2] = _tempHigh.z;\n\n                            vLow[ind3] = _tempLow.x;\n                            vLow[ind3 + 1] = _tempLow.y;\n                            vLow[ind3 + 2] = _tempLow.z;\n                        }\n                    }\n                } else if (index > 0 && index < this._path.length) {\n                    let p0 = this._path[index - 1][0],\n                        p1 = this._path[index - 1][1];\n\n                    let p4 = this._path[index + 1][0],\n                        p5 = this._path[index + 1][1];\n\n                    let next = index * vSize,\n                        prev = (index - 1) * vSize,\n                        ind = prev;\n\n                    for (let i = 0; i < gs1; i++) {\n                        let di = i / gs;\n                        let p02 = p0.lerp(p2, di),\n                            p35 = p3.lerp(p5, di),\n                            p24 = p2.lerp(p4, di),\n                            p13 = p1.lerp(p3, di);\n\n                        for (let j = 0; j < gs1; j++) {\n                            let dj = j / gs;\n                            let p01 = p0.lerp(p1, dj),\n                                p23 = p2.lerp(p3, dj);\n\n                            // prev\n                            new Line3(p02, p13).intersects(new Line3(p01, p23), p);\n\n                            let ij = i * gs1 + j;\n\n                            ind = prev + ij;\n\n                            Vec3.doubleToTwoFloats(p, _tempHigh, _tempLow);\n\n                            let ind3 = ind * 3;\n\n                            vHigh[ind3] = _tempHigh.x;\n                            vHigh[ind3 + 1] = _tempHigh.y;\n                            vHigh[ind3 + 2] = _tempHigh.z;\n\n                            vLow[ind3] = _tempLow.x;\n                            vLow[ind3 + 1] = _tempLow.y;\n                            vLow[ind3 + 2] = _tempLow.z;\n\n                            // next\n                            let p45 = p4.lerp(p5, dj);\n\n                            p23 = p2.lerp(p3, dj);\n\n                            new Line3(p24, p35).intersects(new Line3(p23, p45), p);\n\n                            ind = next + ij;\n\n                            Vec3.doubleToTwoFloats(p, _tempHigh, _tempLow);\n\n                            ind3 = ind * 3;\n\n                            vHigh[ind3] = _tempHigh.x;\n                            vHigh[ind3 + 1] = _tempHigh.y;\n                            vHigh[ind3 + 2] = _tempHigh.z;\n\n                            vLow[ind3] = _tempLow.x;\n                            vLow[ind3 + 1] = _tempLow.y;\n                            vLow[ind3 + 2] = _tempLow.z;\n                        }\n                    }\n                }\n\n                this._createBuffers();\n            }\n        } else {\n            console.warn(`strip index ${index} is out of range`);\n        }\n    }\n\n    public removeEdge(index: number) {\n        this._path.splice(index, 1);\n        this.setPath(([] as TStrip[]).concat(this._path));\n    }\n\n    public setGridSize(gridSize: number) {\n        this._gridSize = gridSize;\n        this.setPath(([] as TStrip[]).concat(this._path));\n    }\n\n    public getPath(): TStrip[] {\n        return this._path;\n    }\n\n    public setPath(path: TStripExt[] | TStrip[]) {\n        this._verticesHigh = [];\n        this._verticesLow = [];\n        this._indexes = [];\n        this._path = [];\n\n        for (let i = 0; i < path.length; i++) {\n            let p0 = path[i][0],\n                p1 = path[i][1];\n\n            if (p0 instanceof Array) {\n                p0 = new Vec3(p0[0], p0[1], p0[2]);\n            }\n\n            if (p1 instanceof Array) {\n                p1 = new Vec3(p1[0], p1[1], p1[2]);\n            }\n\n            this.addEdge3v(p0 as Vec3, p1 as Vec3);\n        }\n    }\n\n    public insertEdge3v(p0: Vec3, p1: Vec3, index: number) {\n        if (index < this._path.length) {\n            let p: TStrip[] = ([] as TStrip[]).concat(this._path);\n            p.splice(index, 0, [p0, p1]);\n            this.setPath(p);\n        } else if (index === this._path.length) {\n            this.addEdge3v(p0, p1);\n        }\n    }\n}\n\nexport {Strip};\n","import * as mercator from \"../mercator\";\nimport * as utils from \"../utils/shared\";\nimport {Billboard, IBillboardParams} from \"./Billboard\";\nimport {EntityCollection, EntityCollectionEvents} from \"./EntityCollection\";\nimport {Extent} from \"../Extent\";\nimport {Geometry, IGeometryParams} from \"./Geometry\";\nimport {GeoObject, IGeoObjectParams} from \"./GeoObject\";\nimport {LonLat} from \"../LonLat\";\nimport {Label, ILabelParams} from \"./Label\";\nimport {NumberArray3, Vec3} from \"../math/Vec3\";\nimport {NumberArray2} from \"../math/Vec2\";\nimport {Planet} from \"../scene/Planet\";\nimport {IPointCloudParams, PointCloud} from \"./PointCloud\";\nimport {IPolylineParams, Polyline} from \"./Polyline\";\nimport {IRayParams, Ray} from \"./Ray\";\nimport {Strip, IStripParams} from \"./Strip\";\nimport {Vector, VectorEventsType} from \"../layer/Vector\";\nimport {EntityCollectionNode} from \"../quadTree/EntityCollectionNode\";\n\nexport interface IEntityParams {\n    name?: string;\n    properties?: any;\n    cartesian?: Vec3 | NumberArray3;\n    lonlat?: LonLat | NumberArray3 | NumberArray2;\n    altitude?: number;\n    visibility?: boolean;\n    billboard?: Billboard | IBillboardParams;\n    label?: Label | ILabelParams;\n    polyline?: Polyline | IPolylineParams;\n    ray?: Ray | IRayParams;\n    pointCloud?: PointCloud | IPointCloudParams;\n    geometry?: Geometry | IGeometryParams;\n    geoObject?: GeoObject | IGeoObjectParams;\n    strip?: Strip | IStripParams;\n    independentPicking?: boolean;\n}\n\n/**\n * Entity instances aggregate multiple forms of visualization into a single high-level object.\n * They can be created manually and added to entity collection.\n *\n * @class\n * @param {Object} [options] - Entity options:\n * @param {string} [options.name] - A human-readable name to display to users. It does not have to be unique.\n * @param {Vec3|Array.<number>} [options.cartesian] - Spatial entities like billboard, label etc. cartesian position.\n * @param {LonLat} [options.lonlat] - Geodetic coordinates for an entities like billboard, label etc.\n * @param {boolean} [options.aground] - True for entities that have to be placed on the relief.\n * @param {boolean} [options.visibility] - Entity visibility.\n * @param {*} [options.billboard] - Billboard options(see {@link Billboard}).\n * @param {*} [options.label] - Label options(see {@link Label}).\n * @param {*} [options.polyline] - Polyline options(see {@link Polyline}).\n * @param {*} [options.ray] - Ray options(see {@link Ray}).\n * @param {*} [options.pointCloud] - Point cloud options(see {@link PointCloud}).\n * @param {*} [options.geometry] - Geometry options (see {@link Geometry}), available for vector layer only.\n * @param {*} [options.properties] - Entity custom properties.\n */\nclass Entity {\n\n    static __counter__: number = 0;\n\n    /**\n     * Uniq identifier.\n     * @public\n     * @readonly\n     */\n    protected __id: number;\n\n    /**\n     * Entity user defined properties.\n     * @public\n     * @type {Object}\n     */\n    public properties: any;\n\n\n    /**\n     * Children entities.\n     * @public\n     * @type {Array.<Entity>}\n     */\n    public childrenNodes: Entity[];\n\n    /**\n     * Parent entity.\n     * @public\n     * @type {Entity}\n     */\n    public parent: Entity | null;\n\n    /**\n     * Entity cartesian position.\n     * @protected\n     * @type {Vec3}\n     */\n    public _cartesian: Vec3;\n\n    /**\n     * Geodetic entity coordinates.\n     * @public\n     * @type {LonLat}\n     */\n    public _lonLat: LonLat;\n\n    /**\n     * World Mercator entity coordinates.\n     * @public\n     * @type {LonLat}\n     */\n    public _lonLatMerc: LonLat;\n\n    /**\n     * Entity visible terrain altitude.\n     * @public\n     * @type {number}\n     */\n    public _altitude: number;\n\n    /**\n     * Visibility flag.\n     * @protected\n     * @type {boolean}\n     */\n    protected _visibility: boolean;\n\n    /**\n     * Entity collection that this entity belongs to.\n     * @public\n     * @type {EntityCollection}\n     */\n    public _entityCollection: EntityCollection | null;\n\n    /**\n     * Entity collection array store index.\n     * @public\n     * @type {number}\n     */\n    public _entityCollectionIndex: number;\n\n    /**\n     * Assigned vector layer pointer.\n     * @public\n     * @type {Vector}\n     */\n    public _layer: Vector | null;\n\n    /**\n     * Assigned vector layer entity array index.\n     * @public\n     * @type {number}\n     */\n    public _layerIndex: number;\n\n    /**\n     * Picking color.\n     * @public\n     * @type {Vec3}\n     */\n    public _pickingColor: Vec3;\n\n    public _independentPicking: boolean;\n\n    protected _featureConstructorArray: Record<string, [any, Function]>;\n\n    /**\n     * Billboard entity.\n     * @public\n     * @type {Billboard | null}\n     */\n    public billboard: Billboard | null;\n\n    /**\n     * Text label entity.\n     * @public\n     * @type {Label | null}\n     */\n    public label: Label | null;\n\n    /**\n     * Polyline entity.\n     * @public\n     * @type {Polyline | null}\n     */\n    public polyline: Polyline | null;\n\n    /**\n     * Ray entity.\n     * @public\n     * @type {Ray | null}\n     */\n    public ray: Ray | null;\n\n    /**\n     * PointCloud entity.\n     * @public\n     * @type {PointCloud | null}\n     */\n    public pointCloud: PointCloud | null;\n\n    /**\n     * Geometry entity(available for vector layer only).\n     * @public\n     * @type {Geometry | null}\n     */\n    public geometry: Geometry | null;\n\n    /**\n     * Geo object entity\n     * @public\n     * @type {Geometry | null}\n     */\n    public geoObject: GeoObject | null;\n\n    /**\n     * Strip entity.\n     * @public\n     * @type {Strip | null}\n     */\n    public strip: Strip | null;\n\n    public _nodePtr?: EntityCollectionNode;\n\n    constructor(options: IEntityParams = {}) {\n\n        options.properties = options.properties || {};\n\n        this.__id = Entity.__counter__++;\n\n        this.properties = options.properties || {};\n\n        this.properties.name = this.properties.name != undefined ? this.properties.name : \"\";\n\n        this.childrenNodes = [];\n\n        this.parent = null;\n\n        this._cartesian = utils.createVector3(options.cartesian);\n\n        this._lonLat = utils.createLonLat(options.lonlat);\n\n        this._lonLatMerc = new LonLat();\n\n        this._altitude = options.altitude || 0.0;\n\n        this._visibility = options.visibility != undefined ? options.visibility : true;\n\n        this._entityCollection = null;\n\n        this._entityCollectionIndex = -1;\n\n        this._layer = null;\n\n        this._layerIndex = -1;\n\n        this._pickingColor = new Vec3(0, 0, 0);\n\n        this._independentPicking = options.independentPicking || false;\n\n        this._featureConstructorArray = {\n            billboard: [Billboard, this.setBillboard],\n            label: [Label, this.setLabel],\n            polyline: [Polyline, this.setPolyline],\n            pointCloud: [PointCloud, this.setPointCloud],\n            geometry: [Geometry, this.setGeometry],\n            geoObject: [GeoObject, this.setGeoObject],\n            strip: [Strip, this.setStrip],\n            ray: [Ray, this.setRay]\n        };\n\n        this.billboard = this._createOptionFeature<Billboard, IBillboardParams>(\"billboard\", options.billboard);\n\n        this.label = this._createOptionFeature<Label, ILabelParams>(\"label\", options.label);\n\n        this.polyline = this._createOptionFeature<Polyline, IPolylineParams>(\"polyline\", options.polyline);\n\n        this.ray = this._createOptionFeature<Ray, IRayParams>(\"ray\", options.ray);\n\n        this.pointCloud = this._createOptionFeature<PointCloud, IPolylineParams>(\"pointCloud\", options.pointCloud);\n\n        this.geometry = this._createOptionFeature<Geometry, IGeometryParams>(\"geometry\", options.geometry);\n\n        this.geoObject = this._createOptionFeature<GeoObject, IGeoObjectParams>(\"geoObject\", options.geoObject);\n\n        this.strip = this._createOptionFeature<Strip, IStripParams>(\"strip\", options.strip);\n    }\n\n    public get id(): number {\n        return this.__id;\n    }\n\n    public isEqual(entity: Entity): boolean {\n        return this.__id === entity.__id;\n    }\n\n    public get layerIndex(): number {\n        return this._layerIndex;\n    }\n\n    public get instanceName(): string {\n        return \"Entity\";\n    }\n\n    protected _createOptionFeature<T, K>(\n        featureName: string,\n        options?: T | K\n    ): T | null {\n        if (options) {\n            let c = this._featureConstructorArray[featureName];\n            return c[1].call(this, new c[0](options)) as T;\n        }\n        return null;\n    }\n\n    public getCollectionIndex(): number {\n        return this._entityCollectionIndex;\n    }\n\n    /**\n     * Adds current entity into the specified entity collection.\n     * @public\n     * @param {EntityCollection | Vector} collection - Specified entity collection or vector layer.\n     * @param {Boolean} [rightNow=false] - Entity insertion option for vector layer.\n     * @returns {Entity} - This object.\n     */\n    public addTo(collection: EntityCollection | Vector, rightNow: boolean = false) {\n        collection.add(this, rightNow);\n        return this;\n    }\n\n    /**\n     * Removes current entity from collection and layer.\n     * @public\n     */\n    public remove() {\n        this._layer && this._layer.removeEntity(this);\n        this._entityCollection && this._entityCollection.removeEntity(this);\n    }\n\n    /**\n     * Sets the entity visibility.\n     * @public\n     * @param {boolean} visibility - Entity visibility.\n     */\n    public setVisibility(visibility: boolean) {\n        this._visibility = visibility;\n\n        // billboards\n        this.billboard && this.billboard.setVisibility(visibility);\n\n        // geoObject\n        this.geoObject && this.geoObject.setVisibility(visibility);\n\n        // labels\n        this.label && this.label.setVisibility(visibility);\n\n        // polyline\n        this.polyline && this.polyline.setVisibility(visibility);\n\n        // ray\n        this.ray && this.ray.setVisibility(visibility);\n\n        // geometry\n        this.geometry && this.geometry.setVisibility(visibility);\n\n        for (let i = 0; i < this.childrenNodes.length; i++) {\n            this.childrenNodes[i].setVisibility(visibility);\n        }\n    }\n\n    /**\n     * Returns entity visibility.\n     * @public\n     * @returns {boolean} -\n     */\n    public getVisibility() {\n        return this._visibility;\n    }\n\n    /**\n     * Sets entity cartesian position.\n     * @public\n     * @param {Vec3} cartesian - Cartesian position in 3d space.\n     */\n    public setCartesian3v(cartesian: Vec3) {\n        this.setCartesian(cartesian.x, cartesian.y, cartesian.z);\n    }\n\n    /**\n     * Sets entity cartesian position.\n     * @public\n     * @param {number} x - 3d space X - position.\n     * @param {number} y - 3d space Y - position.\n     * @param {number} z - 3d space Z - position.\n     */\n    public setCartesian(x?: number, y?: number, z?: number) {\n        let p = this._cartesian;\n\n        p.x = x || 0.0;\n        p.y = y || 0.0;\n        p.z = z || 0.0;\n\n        // billboards\n        this.billboard && this.billboard.setPosition3v(p);\n\n        // geoObject\n        this.geoObject && this.geoObject.setPosition3v(p);\n\n        // labels\n        this.label && this.label.setPosition3v(p);\n\n        for (let i = 0; i < this.childrenNodes.length; i++) {\n            this.childrenNodes[i].setCartesian(x, y, z);\n        }\n\n        let ec = this._entityCollection;\n\n        if (ec && ec.renderNode && (ec.renderNode as Planet).ellipsoid) {\n            this._lonLat = (ec.renderNode as Planet).ellipsoid.cartesianToLonLat(p);\n\n            if (Math.abs(this._lonLat.lat) < mercator.MAX_LAT) {\n                this._lonLatMerc = this._lonLat.forwardMercator();\n            } else {\n                this._lonLatMerc.lon = this._lonLatMerc.lat = this._lonLatMerc.height = 0;\n            }\n        }\n\n        //ec && ec.events.dispatch(ec.events.entitymove, this);\n    }\n\n    /**\n     * Sets entity cartesian position without event dispatching.\n     * @public\n     * @param {Vec3} cartesian - Cartesian position in 3d space.\n     * @param {boolean} skipLonLat - skip geodetic calculation.\n     */\n    public _setCartesian3vSilent(cartesian: Vec3, skipLonLat: boolean = false) {\n        let p = this._cartesian;\n\n        p.x = cartesian.x || 0.0;\n        p.y = cartesian.y || 0.0;\n        p.z = cartesian.z || 0.0;\n\n        // billboards\n        this.billboard && this.billboard.setPosition3v(p);\n\n        // geoObject\n        this.geoObject && this.geoObject.setPosition3v(p);\n\n        // labels\n        this.label && this.label.setPosition3v(p);\n\n        for (let i = 0; i < this.childrenNodes.length; i++) {\n            this.childrenNodes[i].setCartesian(p.x, p.y, p.z);\n        }\n\n        let ec = this._entityCollection;\n\n        if (!skipLonLat && ec && ec.renderNode && (ec.renderNode as Planet).ellipsoid) {\n            this._lonLat = (ec.renderNode as Planet).ellipsoid.cartesianToLonLat(p);\n\n            if (Math.abs(this._lonLat.lat) < mercator.MAX_LAT) {\n                this._lonLatMerc = this._lonLat.forwardMercator();\n            } else {\n                //this._lonLatMerc = null;\n            }\n        }\n    }\n\n    /**\n     * Gets entity geodetic coordinates.\n     * @public\n     * @returns {LonLat} -\n     */\n    public getLonLat(): LonLat {\n        return this._lonLat.clone();\n    }\n\n    /**\n     * Sets geodetic coordinates of the entity point object.\n     * @public\n     * @param {LonLat} lonlat - WGS84 coordinates.\n     */\n    public setLonLat(lonlat: LonLat) {\n        let l = this._lonLat;\n\n        l.lon = lonlat.lon;\n        l.lat = lonlat.lat;\n        l.height = lonlat.height;\n\n        let ec = this._entityCollection;\n        if (ec && ec.renderNode && (ec.renderNode as Planet).ellipsoid) {\n            if (Math.abs(l.lat) < mercator.MAX_LAT) {\n                this._lonLatMerc = l.forwardMercator();\n            } else {\n                //this._lonLatMerc = null;\n            }\n\n            (ec.renderNode as Planet).ellipsoid.lonLatToCartesianRes(l, this._cartesian);\n            this.setCartesian3v(this._cartesian);\n        }\n    }\n\n    /**\n     * Sets geodetic coordinates of the entity point object.\n     * @public\n     * @param {number} lon - Longitude.\n     * @param {number} lat - Latitude\n     * @param {number} [height] - Height\n     */\n    public setLonLat2(lon: number, lat: number, height?: number) {\n        let l = this._lonLat;\n\n        l.lon = lon;\n        l.lat = lat;\n        l.height = height != undefined ? height : l.height;\n\n        let ec = this._entityCollection;\n        if (ec && ec.renderNode && (ec.renderNode as Planet).ellipsoid) {\n            if (Math.abs(l.lat) < mercator.MAX_LAT) {\n                this._lonLatMerc = l.forwardMercator();\n            } else {\n                this._lonLatMerc.lon = this._lonLatMerc.lat = this._lonLatMerc.height = 0;\n            }\n\n            (ec.renderNode as Planet).ellipsoid.lonLatToCartesianRes(l, this._cartesian);\n            this.setCartesian3v(this._cartesian);\n        }\n    }\n\n    /**\n     * Sets entity altitude over the planet.\n     * @public\n     * @param {number} altitude - Altitude.\n     */\n    public setAltitude(altitude: number) {\n        this._altitude = altitude;\n    }\n\n    /**\n     * Sets entity altitude over the planet.\n     * @public\n     * @return {number} Altitude.\n     */\n    public getAltitude(): number {\n        return this._altitude;\n    }\n\n    /**\n     * Returns cartesian position.\n     * @public\n     * @returns {Vec3} -\n     */\n    public getCartesian(): Vec3 {\n        return this._cartesian.clone();\n    }\n\n    /**\n     * Sets entity billboard.\n     * @public\n     * @param {Billboard} billboard - Billboard object.\n     * @returns {Billboard} -\n     */\n    public setBillboard(billboard: Billboard): Billboard {\n        if (this.billboard) {\n            this.billboard.remove();\n        }\n        this.billboard = billboard;\n        this.billboard._entity = this;\n        this.billboard.setPosition3v(this._cartesian);\n        this.billboard.setVisibility(this._visibility);\n        this._entityCollection && this._entityCollection.billboardHandler.add(billboard);\n        return billboard;\n    }\n\n    /**\n     * Sets entity label.\n     * @public\n     * @param {Label} label - Text label.\n     * @returns {Label} -\n     */\n    public setLabel(label: Label): Label {\n        if (this.label) {\n            this.label.remove();\n        }\n        this.label = label;\n        this.label._entity = this;\n        this.label.setPosition3v(this._cartesian);\n        this.label.setVisibility(this._visibility);\n        this._entityCollection && this._entityCollection.labelHandler.add(label);\n        return label;\n    }\n\n    /**\n     * Sets entity ray.\n     * @public\n     * @param {Ray} ray - Ray object.\n     * @returns {Ray} -\n     */\n    public setRay(ray: Ray): Ray {\n        if (this.ray) {\n            this.ray.remove();\n        }\n        this.ray = ray;\n        this.ray._entity = this;\n        this.ray.setVisibility(this._visibility);\n        this._entityCollection && this._entityCollection.rayHandler.add(ray);\n        return ray;\n    }\n\n    /**\n     * Sets entity polyline.\n     * @public\n     * @param {Polyline} polyline - Polyline object.\n     * @returns {Polyline} -\n     */\n    public setPolyline(polyline: Polyline): Polyline {\n        if (this.polyline) {\n            this.polyline.remove();\n        }\n        this.polyline = polyline;\n        this.polyline._entity = this;\n        this.polyline.setVisibility(this._visibility);\n        this._entityCollection && this._entityCollection.polylineHandler.add(polyline);\n        return polyline;\n    }\n\n    /**\n     * Sets entity pointCloud.\n     * @public\n     * @param {PointCloud} pointCloud - PointCloud object.\n     * @returns {PointCloud} -\n     */\n    public setPointCloud(pointCloud: PointCloud): PointCloud {\n        if (this.pointCloud) {\n            this.pointCloud.remove();\n        }\n        this.pointCloud = pointCloud;\n        this.pointCloud._entity = this;\n        this.pointCloud.setVisibility(this._visibility);\n        this._entityCollection && this._entityCollection.pointCloudHandler.add(pointCloud);\n        return pointCloud;\n    }\n\n    /**\n     * Sets entity geometry.\n     * @public\n     * @param {Geometry} geometry - Geometry object.\n     * @returns {Geometry} -\n     */\n    public setGeometry(geometry: Geometry): Geometry {\n        if (this.geometry) {\n            this.geometry.remove();\n        }\n        this.geometry = geometry;\n        this.geometry._entity = this;\n        this.geometry.setVisibility(this._visibility);\n        let layer = this._layer;\n        if (this._layer) {\n            this._layer.removeEntity(this);\n        }\n        layer && layer.add(this);\n        return geometry;\n    }\n\n    /**\n     * Sets entity geoObject.\n     * @public\n     * @param {GeoObject} geoObject - GeoObject.\n     * @returns {GeoObject} -\n     */\n    public setGeoObject(geoObject: GeoObject): GeoObject {\n        if (this.geoObject) {\n            this.geoObject.remove();\n        }\n        this.geoObject = geoObject;\n        this.geoObject._entity = this;\n        this.geoObject.setPosition3v(this._cartesian);\n        this.geoObject.setVisibility(this._visibility);\n        this._entityCollection && this._entityCollection.geoObjectHandler.add(geoObject);\n        return geoObject;\n    }\n\n    /**\n     * Sets entity strip.\n     * @public\n     * @param {Strip} strip - Strip object.\n     * @returns {Strip} -\n     */\n    public setStrip(strip: Strip): Strip {\n        if (this.strip) {\n            this.strip.remove();\n        }\n        this.strip = strip;\n        this.strip._entity = this;\n        this.strip.setVisibility(this._visibility);\n        this._entityCollection && this._entityCollection.stripHandler.add(strip);\n        return strip;\n    }\n\n    public get layer(): Vector | null {\n        return this._layer;\n    }\n\n    public get rendererEvents(): VectorEventsType | EntityCollectionEvents | null {\n        if (this._layer) {\n            return this._layer.events;\n        } else if (this._entityCollection) {\n            return this._entityCollection.events;\n        }\n        return null;\n    }\n\n    /**\n     * Append child entity.\n     * @public\n     * @param {Entity} entity - Child entity.\n     */\n    public appendChild(entity: Entity) {\n        entity._entityCollection = this._entityCollection;\n        if (!entity._independentPicking) {\n            entity._pickingColor = this._pickingColor;\n        }\n        entity.parent = this;\n        this.childrenNodes.push(entity);\n        this._entityCollection && this._entityCollection.appendChildEntity(entity);\n    }\n\n    /**\n     * Appends entity items(billboard, label etc.) picking color.\n     * @public\n     */\n    public setPickingColor() {\n        let c = this._pickingColor;\n\n        this.billboard && this.billboard.setPickingColor3v(c);\n\n        this.label && this.label.setPickingColor3v(c);\n\n        this.polyline && this.polyline.setPickingColor3v(c);\n\n        this.ray && this.ray.setPickingColor3v(c);\n\n        this.strip && this.strip.setPickingColor3v(c);\n\n        this.geoObject && this.geoObject.setPickingColor3v(c);\n\n        for (let i = 0; i < this.childrenNodes.length; i++) {\n            this.childrenNodes[i].setPickingColor();\n        }\n    }\n\n    /**\n     * Return geodetic extent.\n     * @public\n     * @returns {Extent} -\n     */\n    public getExtent(): Extent {\n\n        let res;\n        let c = this._lonLat;\n\n        if (this.billboard || this.label) {\n            res = new Extent(new LonLat(c.lon, c.lat), new LonLat(c.lon, c.lat));\n        } else {\n            res = new Extent(new LonLat(180.0, 90.0), new LonLat(-180.0, -90.0));\n        }\n\n        let sw = res.southWest,\n            ne = res.northEast;\n\n        if (this.polyline) {\n            let e = this.polyline.getExtent();\n            if (e.southWest.lon < sw.lon) sw.lon = e.southWest.lon;\n            if (e.southWest.lat < sw.lat) sw.lat = e.southWest.lat;\n            if (e.northEast.lon > ne.lon) ne.lon = e.northEast.lon;\n            if (e.northEast.lat > ne.lat) ne.lat = e.northEast.lat;\n        }\n\n        if (this.geometry) {\n            let e = this.geometry.getExtent();\n            if (e.southWest.lon < sw.lon) sw.lon = e.southWest.lon;\n            if (e.southWest.lat < sw.lat) sw.lat = e.southWest.lat;\n            if (e.northEast.lon > ne.lon) ne.lon = e.northEast.lon;\n            if (e.northEast.lat > ne.lat) ne.lat = e.northEast.lat;\n        }\n\n        for (let i = 0; i < this.childrenNodes.length; i++) {\n            let e = this.childrenNodes[i].getExtent();\n            if (e.southWest.lon < sw.lon) sw.lon = e.southWest.lon;\n            if (e.southWest.lat < sw.lat) sw.lat = e.southWest.lat;\n            if (e.northEast.lon > ne.lon) ne.lon = e.northEast.lon;\n            if (e.northEast.lat > ne.lat) ne.lat = e.northEast.lat;\n        }\n\n        return res;\n    }\n}\n\nexport {Entity};\n","/**\n * Scene node base class.\n * @class\n * @param {string} name - Node name.\n */\nclass BaseNode {\n\n    static __counter__: number = 0;\n\n    protected __id: number;\n\n    /**\n     * Node name.\n     * @public\n     * @type {string}\n     */\n    protected _name: string;\n\n    /**\n     * Top scene tree node pointer.\n     * @public\n     * @type {BaseNode}\n     */\n    public topNode: BaseNode;\n\n    protected _dictionary: Record<string, BaseNode>;\n\n    /**\n     * Children nodes.\n     * @public\n     * @type {Array.<BaseNode>}\n     */\n    public childNodes: BaseNode[];\n\n    /**\n     * Parent node pointer.\n     * @public\n     * @type {BaseNode}\n     */\n    public parentNode: BaseNode | null;\n\n    constructor(name?: string) {\n\n        this.__id = BaseNode.__counter__++;\n\n        this._name = name || `nonameNode:${this.__id}`;\n\n        this.topNode = this;\n\n        this._dictionary = {};\n        this._dictionary[this._name] = this;\n\n        this.childNodes = [];\n\n        this.parentNode = null;\n    }\n\n    public get name(): string {\n        return this._name;\n    }\n\n    /**\n     * Adds node to the current hierarchy.\n     * @public\n     * @type {BaseNode}\n     */\n    public addNode(node: BaseNode) {\n        if (this.parentNode == null) {\n            node.topNode = this;\n        } else {\n            node.topNode = this.topNode;\n        }\n        node.parentNode = this;\n        node._dictionary = this.topNode._dictionary;\n        this.childNodes.push(node);\n        this.topNode._dictionary[node.name] = node;\n    }\n\n    /**\n     * Destroy node.\n     * @public\n     */\n    public destroy() {\n        for (let i = 0; i < this.childNodes.length; i++) {\n            this.childNodes[i].destroy();\n        }\n        this._clear();\n    }\n\n    /**\n     * Gets node by name in the current.\n     * @public\n     * @param {string} name - Node name.\n     * @return {RenderNode} Node object in the current node.\n     */\n    public getNodeByName(name: string): BaseNode {\n        return this._dictionary[name];\n    }\n\n    /**\n     * Clear current node.\n     * @protected\n     */\n    protected _clear() {\n        this.parentNode = null;\n        this.topNode = this;\n        this.childNodes.length = 0;\n    }\n\n    public isEqual(node: BaseNode): boolean {\n        return node.__id === this.__id;\n    }\n}\n\nexport {BaseNode};\n","import {BaseNode} from \"./BaseNode\";\nimport {Renderer} from \"../renderer/Renderer\";\nimport {LightSource} from \"../light/LightSource\";\nimport {EntityCollection} from \"../entity/EntityCollection\";\n\n/**\n * Render node is a logical part of a render mechanism. Represents scene rendering.\n * For example one scene node for rendering the Earth, another one for rendering the Moon, another node for rendering stars etc.\n * Each render node has own model view space defined with matrices(scale, rotation, translation, transformation).\n * There are collections of light sources, entities and so on in the node.\n * Access to the node is renderer.renderNodes[\"Earth\"]\n * @class\n * @extends {BaseNode}\n * @param {string} name - Node name.\n */\n\nclass RenderNode extends BaseNode {\n\n    /**\n     * Renderer that calls frame() callback.\n     * @public\n     * @type {Renderer}\n     */\n    public renderer: Renderer | null;\n\n    public drawMode: number;\n\n    /** Show rendering.\n     * @public\n     */\n    public show: boolean;\n\n    protected _isActive: boolean;\n\n    public override childNodes: RenderNode[];\n\n    /**\n     * Lighting calculations.\n     * @public\n     * @type {boolean}\n     */\n    public lightEnabled: boolean;\n\n    /**\n     * Point light array.\n     * @public\n     * @type {Array.<LightSource>}\n     */\n    public _lights: LightSource[];\n    public _lightsNames: string[];\n    public _lightsPositions: number[];\n    public _lightsParamsv: number[];\n    public _lightsParamsf: number[];\n\n    /**\n     * Entity collection array.\n     * @public\n     * @type {Array.<EntityCollection>}\n     */\n    public entityCollections: EntityCollection[];\n\n    protected _pickingId: number;\n\n    constructor(name?: string) {\n        super(name);\n\n        this.childNodes = [];\n\n        this.renderer = null;\n\n        this.drawMode = 0;\n\n        this.show = true;\n\n        this._isActive = true;\n\n        this.lightEnabled = false;\n\n        this._lights = [];\n        this._lightsNames = [];\n        this._lightsPositions = [];\n        this._lightsParamsv = [];\n        this._lightsParamsf = [];\n\n        this.entityCollections = [];\n\n        this._pickingId = -1;\n    }\n\n    /**\n     * Adds node to the current hierarchy.\n     * @public\n     * @type {RenderNode}\n     */\n    public override addNode(node: RenderNode) {\n        super.addNode(node);\n        this.renderer && node.assign(this.renderer);\n    }\n\n    /**\n     * Assign render node with renderer.\n     * @public\n     * @param {Renderer} renderer - Render node's renderer.\n     */\n    public assign(renderer: Renderer) {\n        this.renderer = renderer;\n        this._pickingId = renderer.addPickingCallback(this, this._entityCollectionPickingCallback);\n        this.initialize();\n    }\n\n    public initialize() {\n        if (this.renderer && this.renderer.isInitialized()) {\n            for (let i = 0; i < this.entityCollections.length; i++) {\n                this.entityCollections[i].bindRenderNode(this);\n            }\n            this.init();\n        }\n    }\n\n    public init() {\n        //virtual\n    }\n\n    public onremove() {\n        //virtual\n    }\n\n    public remove() {\n        let r = this.renderer,\n            n = this.name;\n\n        if (r) {\n            // TODO: replace to renderer\n            if (r.renderNodes[n] && r.renderNodes[n].isEqual(this)) {\n                // @ts-ignore\n                r.renderNodes[n] = null;\n                delete r.renderNodes[n];\n            }\n\n            for (let i = 0; i < r._renderNodesArr.length; i++) {\n                if (r._renderNodesArr[i].isEqual(this)) {\n                    r._renderNodesArr.splice(i, 1);\n                    break;\n                }\n            }\n            r.removePickingCallback(this._pickingId);\n            this._pickingId = -1;\n            this.onremove && this.onremove();\n        }\n    }\n\n    /**\n     * Adds entity collection.\n     * @public\n     * @param {EntityCollection} entityCollection - Entity collection.\n     * @param {boolean} [isHidden] - If it's true that this collection has specific rendering.\n     * @returns {RenderNode} -\n     */\n    public addEntityCollection(entityCollection: EntityCollection, isHidden?: boolean): RenderNode {\n        entityCollection.addTo(this, isHidden);\n        return this;\n    }\n\n    /**\n     * Removes entity collection.\n     * @public\n     * @param {EntityCollection} entityCollection - Entity collection for remove.\n     */\n    public removeEntityCollection(entityCollection: EntityCollection) {\n        entityCollection.remove();\n    }\n\n    /**\n     * Adds point light source.\n     * @public\n     * @param {LightSource} light - Light source.\n     * @returns {RenderNode}\n     */\n    public addLight(light: LightSource): RenderNode {\n        light.addTo(this);\n        return this;\n    }\n\n    /**\n     * Gets light object by its name.\n     * @public\n     * @param {string} name - Point light name.\n     * @returns {LightSource}\n     */\n    public getLightByName(name: string): LightSource | undefined {\n        let li = this._lightsNames.indexOf(name);\n        return this._lights[li];\n    }\n\n    /**\n     * Removes light source.\n     * @public\n     * @param {LightSource} light - Light source object.\n     */\n    public removeLight(light: LightSource) {\n        light.remove();\n    }\n\n    /**\n     * Calls render frame node's callback. Used in renderer.\n     * @public\n     */\n    public preDrawNode() {\n        this._isActive && this._preDrawNodes();\n    }\n\n\n    /**\n     * Calls render frame node's callback. Used in renderer.\n     * @public\n     */\n    public drawNode() {\n        this._isActive && this._drawNodes();\n    }\n\n    /**\n     * Gets render node activity.\n     * @public\n     * @returns {Boolean} -\n     */\n    public isActive(): boolean {\n        return this._isActive;\n    }\n\n    /**\n     * Rendering activation.\n     * @public\n     * @param {boolean} isActive - Activation flag.\n     */\n    public setActive(isActive: boolean) {\n        this._isActive = isActive;\n\n        if (this.renderer) {\n            if (this._isActive && this._pickingId === -1) {\n                // This picking callback MUST be the first picking callback\n                // in the rendering queue in the renderer. It affects on blending.\n                this._pickingId = this.renderer.addPickingCallback(\n                    this,\n                    this._entityCollectionPickingCallback\n                );\n            } else if (!this._isActive && this._pickingId !== -1) {\n                this.renderer.removePickingCallback(this._pickingId);\n                this._pickingId = -1;\n            }\n        }\n\n        for (let i = 0; i < this.childNodes.length; i++) {\n            this.childNodes[i].setActive(isActive);\n        }\n    }\n\n    /**\n     * Sets draw mode\n     * @public\n     * @param {Number} mode - Draw mode, such as gl.TRIANGLES, gl.TRIANGLE_STRIP, gl.LINES etc.\n     */\n    public setDrawMode(mode: number) {\n        this.drawMode = mode;\n        for (let i = 0; i < this.childNodes.length; i++) {\n            this.childNodes[i].setDrawMode(mode);\n        }\n    }\n\n    /**\n     * IMPORTANT: This function have to be called manually in each render node frame callback, before drawing scene geometry.\n     * @public\n     */\n    public transformLights() {\n        for (let i = 0; i < this._lights.length; i++) {\n            let ii = i * 3;\n            let tp;\n            tp = this._lights[i]._position;\n            this._lightsPositions[ii] = tp.x;\n            this._lightsPositions[ii + 1] = tp.y;\n            this._lightsPositions[ii + 2] = tp.z;\n        }\n\n        // for (let i = 0; i < this._lights.length; i++) {\n        //     var ii = i * 4;\n        //     var tp;\n        //     if (this._lights[i].directional) {\n        //         tp = r.activeCamera._normalMatrix.mulVec(this._lights[i]._position);\n        //         this._lightsTransformedPositions[ii + 3] = 0;\n        //     } else {\n        //         tp = r.activeCamera._viewMatrix.mulVec3(this._lights[i]._position);\n        //         this._lightsTransformedPositions[ii + 3] = 1;\n        //     }\n        //     this._lightsTransformedPositions[ii] = tp.x;\n        //     this._lightsTransformedPositions[ii + 1] = tp.y;\n        //     this._lightsTransformedPositions[ii + 2] = tp.z;\n        // }\n    }\n\n    public updateBillboardsTexCoords() {\n        for (let i = 0; i < this.entityCollections.length; i++) {\n            this.entityCollections[i].billboardHandler.refreshTexCoordsArr();\n        }\n    }\n\n    // public updateGeoObjectsTexCoords() {\n    //     for (let i = 0; i < this.entityCollections.length; i++) {\n    //         this.entityCollections[i].geoObjectHandler.refreshTexCoordsArr();\n    //     }\n    // }\n\n    public frame() {\n        // virtual\n    }\n\n    public preFrame() {\n        // virtual\n    }\n\n    protected _preDrawNodes() {\n        for (let i = 0; i < this.childNodes.length; i++) {\n            if (this.childNodes[i]._isActive) {\n                this.childNodes[i]._preDrawNodes();\n            }\n        }\n\n        if (this.show) {\n            //this.lightEnabled && this.transformLights();\n            this.preFrame();\n            this.drawEntityCollections(this.entityCollections);\n        }\n    }\n\n    protected _drawNodes() {\n        for (let i = 0; i < this.childNodes.length; i++) {\n            if (this.childNodes[i]._isActive) {\n                this.childNodes[i]._drawNodes();\n            }\n        }\n\n        if (this.show) {\n            this.frame();\n        }\n    }\n\n    public drawEntityCollections(ec: EntityCollection[]) {\n        this.renderer!.enqueueEntityCollectionsToDraw(ec);\n    }\n\n    /**\n     * Draw entity collections picking frame.\n     * @public\n     * @param {Array<EntityCollection>} ec - Entity collection array.\n     */\n    public drawPickingEntityCollections(ec: EntityCollection[]) {\n        if (ec.length) {\n\n            // billboard pass\n            let i = ec.length;\n            while (i--) {\n                ec[i]._fadingOpacity && ec[i].billboardHandler.drawPicking();\n            }\n\n            // geoObject pass\n            i = ec.length;\n            while (i--) {\n                ec[i]._fadingOpacity && ec[i].geoObjectHandler.drawPicking();\n            }\n\n            // label pass\n            i = ec.length;\n            while (i--) {\n                ec[i]._fadingOpacity && ec[i].labelHandler.drawPicking();\n            }\n\n            // ray pass\n            i = ec.length;\n            while (i--) {\n                ec[i]._fadingOpacity && ec[i].rayHandler.drawPicking();\n            }\n\n            // polyline pass\n            i = ec.length;\n            while (i--) {\n                ec[i]._visibility && ec[i].polylineHandler.drawPicking();\n            }\n\n            //Strip pass\n            i = ec.length;\n            while (i--) {\n                ec[i]._visibility && ec[i].stripHandler.drawPicking();\n            }\n\n            // //pointClouds pass\n            // i = ec.length;\n            // while (i--) {\n            //    ec[i]._visibility && ec[i].pointCloudHandler.drawPicking();\n            // }\n        }\n    }\n\n    protected _entityCollectionPickingCallback() {\n        this.drawPickingEntityCollections(this.entityCollections);\n    }\n}\n\nexport {RenderNode};\n","/**\n * Console logging singleton object.\n * @class\n */\nexport class Cons {\n\n    protected _container: HTMLElement;\n    protected _visibility: boolean;\n\n    constructor() {\n        this._container = document.createElement(\"div\");\n        this._container.classList.add(\"ogConsole\");\n        this._container.style.display = \"none\";\n        if (document.body) {\n            document.body.appendChild(this._container);\n        }\n\n        this._visibility = false;\n    }\n\n    public getVisibility(): boolean {\n        return this._visibility;\n    }\n\n    public setVisibility(visibility: boolean) {\n        if (this._visibility != visibility) {\n            this._visibility = visibility;\n            if (this._visibility) {\n                this.show();\n            } else {\n                this.hide();\n            }\n        }\n    }\n\n    /**\n     * Show console panel.\n     * @public\n     */\n    public show() {\n        if (!this._container.parentNode) {\n            if (document.body) {\n                document.body.appendChild(this._container);\n            }\n        }\n        this._container.style.display = \"block\";\n        this._visibility = true;\n    }\n\n    /**\n     * Hide console panel.\n     * @public\n     */\n    public hide() {\n        this._container.style.display = \"none\";\n        this._visibility = false;\n    }\n\n    /**\n     * Adds error text in the console.\n     * @public\n     * @param {string} str - Error text.\n     */\n    public logErr(str: string) {\n        let d = document.createElement(\"div\");\n        d.classList.add(\"ogConsole-text\");\n        d.classList.add(\"ogConsole-error\");\n        d.innerHTML = \"error: \" + str;\n        console.trace(d.innerHTML);\n        this._container.appendChild(d);\n        this.show();\n    }\n\n    /**\n     * Adds warning text in the console.\n     * @public\n     * @param {string} str - Warning text.\n     */\n    public logWrn(str: string) {\n        let d = document.createElement(\"div\");\n        d.classList.add(\"ogConsole-text\");\n        d.classList.add(\"ogConsole-warning\");\n        d.innerHTML = \"warning: \" + str;\n        console.trace(d.innerHTML);\n        this._container.appendChild(d);\n        this.show();\n    }\n\n    /**\n     * Adds log text in the console.\n     * @public\n     * @param {string} str - Log text.\n     */\n    public log(str: string) {\n        let d = document.createElement(\"div\");\n        d.classList.add(\"ogConsole-text\");\n        d.innerHTML = str;\n        console.trace(str);\n        this._container.appendChild(d);\n        this.show();\n    }\n}\n\nexport const cons = new Cons();","/**\n * @module og/webgl/types\n */\n\nlet _declarations: string[] = [\n    \"FLOAT\", \"DOUBLE\", \"BOOL\", \"INT\", \"UINT\",\n    \"VEC2\", \"VEC3\", \"VEC4\", \"DVEC2\",\n    \"DVEC3\", \"DVEC4\",\n    \"BVEC2\", \"BVEC3\", \"BVEC4\",\n    \"IVEC2\", \"IVEC3\", \"IVEC4\",\n    \"UVEC2\", \"UVEC3\", \"UVEC4\",\n    \"MAT2\", \"DMAT2\", \"MAT3\", \"DMAT3\", \"MAT4\", \"DMAT4\",\n    \"MAT2X3\", \"MAT2X4\", \"MAT3X2\", \"MAT3X4\", \"MAT4X2\",\n    \"MAT4X3\", \"DMAT2X3\", \"DMAT2X4\", \"DMAT3X2\", \"DMAT3X4\",\n    \"DMAT4X2\", \"DMAT4X3\",\n    \"SAMPLER1D\", \"SAMPLER2D\", \"SAMPLER3D\", \"SAMPLERCUBE\", \"SAMPLER2DSHADOW\",\n    \"SAMPLER2DARRAY\",\n    \"INTXX\", \"FLOATXX\"];\n\nexport const types: { [id: string]: number } = {};\n\nfor (let i = 0; i < _declarations.length; i++) {\n    types[_declarations[i]] = i;\n}\n\nexport const typeStr: { [id: string]: number } = {};\nfor (let i = 0; i < _declarations.length; i++) {\n    typeStr[_declarations[i].toLowerCase()] = types[_declarations[i]];\n}\n","/**\n * @module og/webgl/variableHandlers\n */\n\nimport {types} from \"./types\";\nimport {Program} from \"./Program\";\nimport {WebGLBufferExt} from \"./Handler\";\n\nexport type VariableHandler = {\n    u: { [id: number]: Function },\n    a: { [id: number]: Function }\n};\n\nexport type ProgramVariable = {\n    type: string | number,\n    func: Function,\n    _pName: WebGLUniformLocation | number,\n    value: number | Float32Array | Int32Array | WebGLBufferExt,\n    itemType: string | number,\n    normalized: boolean,\n    divisor: number\n};\n\n/*=========================\n   Uniforms callbacks\n =========================*/\nexport const variableHandlers: VariableHandler = {\n    u: [],\n    a: []\n};\n\nvariableHandlers.u[types.MAT4] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.uniformMatrix4fv(variable._pName, false, variable.value as Float32Array);\n};\n\nvariableHandlers.u[types.MAT3] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.uniformMatrix3fv(variable._pName, false, variable.value as Float32Array);\n};\n\nvariableHandlers.u[types.FLOAT] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.uniform1f(variable._pName, variable.value as number);\n};\n\nvariableHandlers.u[types.INT] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.uniform1i(variable._pName, variable.value as number);\n};\n\nvariableHandlers.u[types.VEC2] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.uniform2fv(variable._pName, variable.value as Float32Array);\n};\n\nvariableHandlers.u[types.VEC3] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.uniform3fv(variable._pName, variable.value as Float32Array);\n};\n\nvariableHandlers.u[types.VEC4] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.uniform4fv(variable._pName, variable.value as Float32Array);\n};\n\nvariableHandlers.u[types.SAMPLER2D] = function (program: Program, variable: ProgramVariable) {\n    let pgl = program.gl!;\n    pgl.activeTexture(pgl.TEXTURE0 + program._textureID);\n    pgl.bindTexture(pgl.TEXTURE_2D, variable.value);\n    pgl.uniform1i(variable._pName, program._textureID);\n    program._textureID++;\n};\n\nvariableHandlers.u[types.SAMPLERCUBE] = function (program: Program, variable: ProgramVariable) {\n    let pgl = program.gl!;\n    pgl.activeTexture(pgl.TEXTURE0 + program._textureID);\n    pgl.bindTexture(pgl.TEXTURE_CUBE_MAP, variable.value);\n    pgl.uniform1i(variable._pName, program._textureID);\n    program._textureID++;\n};\n\nvariableHandlers.u[types.SAMPLER2DARRAY] = function (program: Program, variable: ProgramVariable) {\n    let value = variable.value as Int32Array;\n    let pgl = program.gl!,\n        size = value.length;\n    let samplerArr = new Int32Array(size);\n    for (let i = 0; i < size; i++) {\n        pgl.activeTexture(pgl.TEXTURE0 + program._textureID + i);\n        pgl.bindTexture(pgl.TEXTURE_2D, value[i]);\n        samplerArr[i] = i;\n    }\n    pgl.uniform1iv(variable._pName, samplerArr);\n};\n\nvariableHandlers.u[types.INTXX] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.uniform1iv(variable._pName, variable.value as Int32Array);\n};\n\nvariableHandlers.u[types.FLOATXX] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.uniform1fv(variable._pName, variable.value as Float32Array);\n};\n\n/*========================\n   Attributes callbacks\n ========================*/\nvariableHandlers.a[types.FLOAT] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.vertexAttrib1f(variable._pName as number, variable.value as number);\n};\n\nvariableHandlers.a[types.VEC2] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.vertexAttrib2fv(variable._pName as number, variable.value as Float32Array);\n};\n\nvariableHandlers.a[types.VEC3] = function (program: Program, variable: ProgramVariable) {\n    program.gl!.vertexAttrib3fv(variable._pName as number, variable.value as Float32Array);\n};\n\n//VariableHandlers.a[types.VEC4] = function (program, variable) {\n//    program.gl.vertexAttrib4fv(variable._pName, variable.value);\n//};\n","import {cons} from \"../cons\";\nimport {ProgramVariable, variableHandlers} from \"./variableHandlers\";\nimport {types, typeStr} from \"./types\";\nimport {WebGLBufferExt} from \"./Handler\";\n\nconst itemTypes: string[] = [\"BYTE\", \"SHORT\", \"UNSIGNED_BYTE\", \"UNSIGNED_SHORT\", \"FLOAT\", \"HALF_FLOAT\"];\n\ntype WebGLProgramExt = WebGLProgram & { [id: string]: WebGLUniformLocation };\n\ntype ProgramMaterial = {\n    attributes: Record<string, any>;\n    uniforms: Record<string, any>,\n    vertexShader: string;\n    fragmentShader: string\n};\n\n/**\n * Represents more comfortable using WebGL shader program.\n * @class\n * @param {string} name - Program name.\n * @param {ProgramMaterial} material - Object stores uniforms, attributes and program codes:\n * @param {Record<string, any>} material.uniforms - Uniforms definition section.\n * @param {Record<string, any>} material.attributes - Attributes definition section.\n * @param {string} material.vertexShader - Vertex glsl code.\n * @param {string} material.fragmentShader - Fragment glsl code.\n */\nclass Program {\n    /**\n     * Shader program name.\n     * @public\n     * @type {string}\n     */\n    public name: string;\n\n    public attributes: { [id: string]: number };\n\n    public uniforms: { [id: string]: WebGLUniformLocation };\n\n    public _attributes: Record<string, ProgramVariable>;\n\n    public _uniforms: Record<string, ProgramVariable>;\n\n    public vertexShader: string;\n\n    public fragmentShader: string;\n\n    public drawElementsInstanced: Function | null;\n    public vertexAttribDivisor: Function | null;\n\n    /**\n     * Webgl context.\n     * @public\n     * @type {WebGL2RenderingContext | null}\n     */\n    public gl: WebGL2RenderingContext | null;\n\n    /**\n     * All program variables.\n     * @private\n     * @type {Record<string, ProgramVariable>}\n     */\n    protected _variables: Record<string, ProgramVariable>;\n\n    /**\n     * Program pointer.\n     * @private\n     * @type {WebGLProgramExt | null}\n     */\n    public _p: WebGLProgramExt | null;\n\n    /**\n     * Texture counter.\n     * @protected\n     * @type {number}\n     */\n    public _textureID: number;\n\n    /**\n     * Program attributes array.\n     * @private\n     * @type {number[]}\n     */\n    protected _attribArrays: number[];\n\n    /**\n     * Program attributes divisors.\n     * @protected\n     * @type {number[]}\n     */\n    protected _attribDivisor: number[];\n\n    constructor(name: string, material: ProgramMaterial) {\n\n        this.name = name;\n\n        this._attributes = {};\n        for (let t in material.attributes) {\n            if (\n                typeof material.attributes[t] === \"string\" ||\n                typeof material.attributes[t] === \"number\"\n            ) {\n                this._attributes[t] = {type: material.attributes[t]} as ProgramVariable;\n            } else {\n                this._attributes[t] = material.attributes[t];\n            }\n        }\n\n        this._uniforms = {};\n        for (let t in material.uniforms) {\n            if (\n                typeof material.uniforms[t] === \"string\" ||\n                typeof material.uniforms[t] === \"number\"\n            ) {\n                this._uniforms[t] = {type: material.uniforms[t]} as ProgramVariable;\n            } else {\n                this._uniforms[t] = material.uniforms[t];\n            }\n        }\n\n        this.vertexShader = material.vertexShader;\n\n        this.fragmentShader = material.fragmentShader;\n\n        this.gl = null;\n\n        this._variables = {};\n\n        this._p = null;\n\n        this._textureID = 0;\n\n        this._attribArrays = [];\n\n        this._attribDivisor = [];\n\n        this.attributes = {};\n\n        this.uniforms = {};\n\n        this.vertexAttribDivisor = null;\n        this.drawElementsInstanced = null;\n    }\n\n    /**\n     * Bind program buffer.\n     * @function\n     * @param {Program} program - Used program.\n     * @param {Object} variable - Variable represents buffer data.\n     */\n    static bindBuffer(program: Program, variable: ProgramVariable) {\n        let gl = program.gl;\n        if (gl) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, variable.value);\n            gl.vertexAttribPointer(\n                variable._pName as number,\n                (variable.value as WebGLBufferExt).itemSize,\n                variable.itemType as number,\n                variable.normalized,\n                0,\n                0\n            );\n        }\n    }\n\n    /**\n     * Sets the current program frame.\n     * @public\n     */\n    public use() {\n        this.gl && this.gl.useProgram(this._p!);\n    }\n\n    /**\n     * Sets program variables.\n     * @public\n     * @param {Object} material - Variables and values object.\n     */\n    public set(material: Record<string, any>) {\n        this._textureID = 0;\n        for (let i in material) {\n            this._variables[i].value = material[i];\n            this._variables[i].func(this, this._variables[i]);\n        }\n    }\n\n    /**\n     * Apply current variables.\n     * @public\n     */\n    public apply() {\n        this._textureID = 0;\n        let v = this._variables;\n        for (let i in v) {\n            v[i].func(this, v[i]);\n        }\n    }\n\n    /**\n     * Calls drawElements index buffer function.\n     * @public\n     * @param {number} mode - Draw mode(GL_TRIANGLES, GL_LINESTRING etc.).\n     * @param {Object} buffer - Index buffer.\n     */\n    public drawIndexBuffer(mode: number, buffer: WebGLBufferExt) {\n        let gl = this.gl!;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n        gl.drawElements(mode, buffer.numItems, gl.UNSIGNED_SHORT, 0);\n    }\n\n    /**\n     * Calls drawArrays function.\n     * @public\n     * @param {number} mode - Draw mode GL_TRIANGLES, GL_LINESTRING, etc.\n     * @param {number} numItems - Items to draw\n     */\n    public drawArrays(mode: number, numItems: number) {\n        this.gl!.drawArrays(mode, 0, numItems);\n    }\n\n    /**\n     * Check and log for a shader compile errors and warnings. Returns True - if no errors otherwise returns False.\n     * @private\n     * @param {WebGLShader} shader - WebGl shader program.\n     * @param {string} src - Shader program source.\n     * @returns {boolean} -\n     */\n    protected _getShaderCompileStatus(shader: WebGLShader, src: string): boolean {\n\n        if (!this.gl) return false;\n\n        this.gl.shaderSource(shader, src);\n        this.gl.compileShader(shader);\n        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n            cons.logErr(\n                `Shader program \"${this.name}\":${this.gl.getShaderInfoLog(shader)}.`\n            );\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Returns compiled vertex shader program pointer.\n     * @private\n     * @param {string} src - Vertex shader source code.\n     * @returns {Object} -\n     */\n    protected _createVertexShader(src: string): WebGLShader | undefined {\n        if (!this.gl) return;\n        let shader = this.gl.createShader(this.gl.VERTEX_SHADER);\n        if (shader && this._getShaderCompileStatus(shader, src)) {\n            return shader;\n        }\n    }\n\n    /**\n     * Returns compiled fragment shader program pointer.\n     * @private\n     * @param {string} src - Vertex shader source code.\n     * @returns {Object} -\n     */\n    protected _createFragmentShader(src: string): WebGLShader | undefined {\n        if (!this.gl) return;\n        let shader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n        if (shader && this._getShaderCompileStatus(shader, src)) {\n            return shader;\n        }\n    }\n\n    /**\n     * Disable current program vertexAttribArrays.\n     * @public\n     */\n    public disableAttribArrays() {\n        let gl = this.gl!;\n        let a = this._attribArrays;\n        for (let i = 0, len = a.length; i < len; i++) {\n            gl.disableVertexAttribArray(a[i]);\n            this.vertexAttribDivisor!(a[i], 0);\n        }\n    }\n\n    /**\n     * Enable current program vertexAttribArrays.\n     * @public\n     */\n    public enableAttribArrays() {\n        let gl = this.gl!;\n        let a = this._attribArrays;\n        let d = this._attribDivisor;\n        for (let i = 0, len = a.length; i < len; i++) {\n            gl.enableVertexAttribArray(a[i]);\n            this.vertexAttribDivisor!(a[i], d[i]);\n        }\n    }\n\n    // public vertexAttribDivisor(index: number, divisor: number) {\n    //     const gl = this.gl!;\n    //     gl.vertexAttribDivisor ?\n    //         gl.vertexAttribDivisor(index, divisor) :\n    //         gl.getExtension('ANGLE_instanced_arrays').vertexAttribDivisorANGLE(index, divisor);\n    // }\n\n    /**\n     * Delete program.\n     * @public\n     */\n    public delete() {\n        this.gl && this.gl.deleteProgram(this._p!);\n    }\n\n    /**\n     * Creates program.\n     * @public\n     * @param {Object} gl - WebGl context.\n     */\n    public createProgram(gl: WebGL2RenderingContext) {\n        this.gl = gl;\n\n        this._p = this.gl.createProgram() as WebGLProgramExt;\n\n        if (!this._p) return;\n\n        let fs = this._createFragmentShader(this.fragmentShader);\n        let vs = this._createVertexShader(this.vertexShader);\n\n        if (!fs || !vs) return;\n\n        gl.attachShader(this._p, fs);\n        gl.attachShader(this._p, vs);\n\n        gl.linkProgram(this._p);\n\n\n        if (!this.drawElementsInstanced) {\n            if (gl.drawElementsInstanced) {\n                this.drawElementsInstanced = gl.drawElementsInstanced.bind(gl);\n            } else {\n                let ext = gl.getExtension('ANGLE_instanced_arrays');\n                if (ext) {\n                    this.drawElementsInstanced = ext.drawElementsInstancedANGLE.bind(ext);\n                }\n            }\n            // this.drawElementsInstanced =\n            //     gl.drawElementsInstanced ?\n            //         gl.drawElementsInstanced.bind(gl) :\n            //         gl.getExtension('ANGLE_instanced_arrays').drawElementsInstancedANGLE.bind(gl.getExtension('ANGLE_instanced_arrays'));\n        }\n\n        if (!this.vertexAttribDivisor) {\n            if (gl.vertexAttribDivisor) {\n                this.vertexAttribDivisor = gl.vertexAttribDivisor.bind(gl);\n            } else {\n                let ext = gl.getExtension('ANGLE_instanced_arrays');\n                if (ext) {\n                    this.vertexAttribDivisor = ext.vertexAttribDivisorANGLE.bind(ext);\n                }\n            }\n            // this.vertexAttribDivisor =\n            //     gl.vertexAttribDivisor ?\n            //         gl.vertexAttribDivisor.bind(gl) :\n            //         gl.getExtension('ANGLE_instanced_arrays').vertexAttribDivisorANGLE.bind(gl.getExtension('ANGLE_instanced_arrays'));\n        }\n\n\n        if (!gl.getProgramParameter(this._p, gl.LINK_STATUS)) {\n            cons.logErr(`Shader program \"${this.name}\": initialization failed. ${gl.getProgramInfoLog(this._p)}.`);\n            gl.deleteProgram(this._p);\n            return;\n        }\n\n        this.use();\n\n        for (let a in this._attributes) {\n            //this.attributes[a]._name = a;\n            this._variables[a] = this._attributes[a];\n            this._attributes[a].func = Program.bindBuffer;\n\n            let t = this._attributes[a].itemType as string;\n            let itemTypeStr: string = t ? t.trim().toUpperCase() : \"FLOAT\";\n\n            if (itemTypes.indexOf(itemTypeStr) == -1) {\n                cons.logErr(`Shader program \"${this.name}\": attribute '${a}', item type '${this._attributes[a].itemType}' not exists.`);\n                this._attributes[a].itemType = gl.FLOAT;\n            } else {\n                this._attributes[a].itemType = (gl as any)[itemTypeStr];\n            }\n\n            this._attributes[a].normalized = this._attributes[a].normalized || false;\n            this._attributes[a].divisor = this._attributes[a].divisor || 0;\n\n            this._p[a] = gl.getAttribLocation(this._p, a);\n\n            if (this._p[a] == undefined) {\n                cons.logErr(`Shader program \"${this.name}\":  attribute '${a}' not exists.`);\n                gl.deleteProgram(this._p);\n                return;\n            }\n\n            let type: string | number = this._attributes[a].type;\n            if (typeof type === \"string\") {\n                type = typeStr[type.trim().toLowerCase()];\n            }\n\n            let d = this._attributes[a].divisor;\n            if (type === types.MAT4) {\n                let loc = this._p[a] as number;\n                this._attribArrays.push(loc, loc + 1, loc + 2, loc + 3);\n                this._attribDivisor.push(d, d, d, d);\n            } else {\n                this._attribArrays.push(this._p[a] as number);\n                this._attribDivisor.push(d);\n            }\n\n            gl.enableVertexAttribArray(this._p[a] as number);\n\n            this._attributes[a]._pName = this._p[a];\n            this.attributes[a] = this._p[a] as number;\n        }\n\n        for (let u in this._uniforms) {\n\n            if (typeof this._uniforms[u].type === \"string\") {\n                let t: string = this._uniforms[u].type as string;\n                this._uniforms[u].func = variableHandlers.u[typeStr[t.trim().toLowerCase()]];\n            } else {\n                this._uniforms[u].func = variableHandlers.u[this._uniforms[u].type as number];\n            }\n\n            this._variables[u] = this._uniforms[u];\n            this._p[u] = gl.getUniformLocation(this._p, u)!;\n\n            if (this._p[u] == undefined) {\n                cons.logErr(`Shader program \"${this.name}\": uniform '${u}' not exists.`);\n                gl.deleteProgram(this._p);\n                return;\n            }\n\n            this._uniforms[u]._pName = this._p[u];\n            this.uniforms[u] = this._p[u];\n        }\n\n        gl.detachShader(this._p as WebGLProgram, fs);\n        gl.detachShader(this._p as WebGLProgram, vs);\n\n        gl.deleteShader(fs);\n        gl.deleteShader(vs);\n    }\n}\n\nexport {Program};\n","import {Program} from '../webgl/Program';\n\nconst PROJECT = `vec2 project(vec4 p) {\n                    return (0.5 * p.xyz / p.w + 0.5).xy * viewport;\n                }`;\n\nconst ROTATE2D =\n    `mat2 rotate2d(float angle) {\n        return mat2(cos(angle), -sin(angle),\n           sin(angle), cos(angle));\n     }`;\n\nexport function billboardPicking(): Program {\n    return new Program(\"billboardPicking\", {\n        uniforms: {\n            viewport: \"vec2\",\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            planetRadius: \"float\",\n            uScaleByDistance: \"vec3\",\n            opacity: \"float\",\n            depthOffset: \"float\"\n        },\n        attributes: {\n            a_vertices: \"vec2\",\n            a_positionsHigh: \"vec3\",\n            a_positionsLow: \"vec3\",\n            a_offset: \"vec3\",\n            a_size: \"vec2\",\n            a_rotation: \"float\",\n            a_rgba: \"vec4\"\n        },\n        vertexShader:\n            `precision highp float;\n            attribute vec2 a_vertices;\n            attribute vec3 a_positionsHigh;\n            attribute vec3 a_positionsLow;\n            attribute vec3 a_offset;\n            attribute vec2 a_size;\n            attribute float a_rotation;\n            attribute vec4 a_rgba;\n\n            varying vec3 v_rgb;\n\n            uniform mat4 viewMatrix;\n            uniform mat4 projectionMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform vec3 uScaleByDistance;\n            uniform float opacity;\n            uniform float planetRadius;\n            uniform vec2 viewport;\n            uniform float depthOffset;\n\n            const vec3 ZERO3 = vec3(0.0);\n\n            ${PROJECT}\n\n            ${ROTATE2D}\n\n            void main() {\n\n                vec3 a_positions = a_positionsHigh + a_positionsLow;\n                vec3 cameraPos = eyePositionHigh + eyePositionLow;\n\n                vec3 look = a_positions - cameraPos;\n                float lookDist = length(look);\n                v_rgb = a_rgba.rgb;\n\n                if(opacity * step(lookDist, sqrt(dot(cameraPos,cameraPos) - planetRadius) + sqrt(dot(a_positions,a_positions) - planetRadius)) == 0.0){\n                    return;\n                }\n\n                //vec3 up = vec3( viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1] );\n                //vec3 right = vec3( viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0] );\n\n                float scd = (1.0 - smoothstep(uScaleByDistance[0], uScaleByDistance[1], lookDist)) * (1.0 - step(uScaleByDistance[2], lookDist));\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                vec3 highDiff = a_positionsHigh - eyePositionHigh;\n                vec3 lowDiff = a_positionsLow - eyePositionLow;\n                vec4 posRTE = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n                vec4 projPos = projectionMatrix * posRTE;\n                                \n                float camSlope = dot(vec3(viewMatrix[0][2], viewMatrix[1][2], viewMatrix[2][2]), normalize(cameraPos));                \n                if(camSlope > 0.5) {\n                    float dist = dot(look, normalize(cameraPos));\n                    projPos.z += dist * 0.02;\n                }else{\n                    projPos.z += -(abs(projPos.z)) * 0.002;                 \n                }\n                \n                projPos.z += depthOffset + a_offset.z;\n                                \n                vec2 screenPos = project(projPos);\n\n                vec2 v =  screenPos + rotate2d(a_rotation) * (a_vertices * a_size * scd + a_offset.xy);\n\n                gl_Position = vec4((2.0 * v / viewport - 1.0) * projPos.w, projPos.z, projPos.w);\n            }`,\n        fragmentShader:\n            `precision highp float;\n            varying vec3 v_rgb;\n            void main () {\n                gl_FragColor = vec4(v_rgb, 1.0);\n            }`\n    });\n}\n\nexport function billboard_screen(): Program {\n    return new Program(\"billboard\", {\n        uniforms: {\n            viewport: \"vec2\",\n            u_texture: \"sampler2d\",\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            planetRadius: \"float\",\n            uScaleByDistance: \"vec3\",\n            opacity: \"float\",\n            depthOffset: \"float\"\n        },\n        attributes: {\n            a_vertices: \"vec2\",\n            a_texCoord: \"vec2\",\n            a_positionsHigh: \"vec3\",\n            a_positionsLow: \"vec3\",\n            a_offset: \"vec3\",\n            a_size: \"vec2\",\n            a_rotation: \"float\",\n            a_rgba: \"vec4\",\n        },\n        vertexShader:\n            `precision highp float;\n            attribute vec2 a_vertices;\n            attribute vec2 a_texCoord;\n            attribute vec3 a_positionsHigh;\n            attribute vec3 a_positionsLow;\n            attribute vec3 a_offset;\n            attribute vec2 a_size;\n            attribute float a_rotation;\n            attribute vec4 a_rgba;\n\n            varying vec2 v_texCoords;\n            varying vec4 v_rgba;\n\n            uniform mat4 viewMatrix;\n            uniform mat4 projectionMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform vec3 uScaleByDistance;\n            uniform float opacity;\n            uniform float planetRadius;\n            uniform vec2 viewport;\n            uniform float depthOffset;\n\n            const vec3 ZERO3 = vec3(0.0);\n\n            ${PROJECT}\n\n            ${ROTATE2D}\n\n            void main() {\n                \n                vec3 a_positions = a_positionsHigh + a_positionsLow;\n                vec3 cameraPos = eyePositionHigh + eyePositionLow;\n\n                v_texCoords = a_texCoord;\n                vec3 look = a_positions - cameraPos;\n                float lookDist = length(look);\n                v_rgba = a_rgba;\n\n                if(opacity * step(lookDist, sqrt(dot(cameraPos,cameraPos) - planetRadius) + sqrt(dot(a_positions,a_positions) - planetRadius)) == 0.0){\n                    return;\n                }\n\n                //vec3 up = vec3( viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1] );\n                //vec3 right = vec3( viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0] );\n\n                float scd = (1.0 - smoothstep(uScaleByDistance[0], uScaleByDistance[1], lookDist)) * (1.0 - step(uScaleByDistance[2], lookDist));\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                vec3 highDiff = a_positionsHigh - eyePositionHigh;\n                vec3 lowDiff = a_positionsLow - eyePositionLow;\n                vec4 posRTE = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n                vec4 projPos = projectionMatrix * posRTE;\n                                                \n                float camSlope = dot(vec3(viewMatrix[0][2], viewMatrix[1][2], viewMatrix[2][2]), normalize(cameraPos));                \n                if(camSlope > 0.5) {\n                    float dist = dot(look, normalize(cameraPos));\n                    projPos.z += dist * 0.02;\n                }else{\n                    projPos.z += -(abs(projPos.z)) * 0.002;                 \n                }\n                \n                projPos.z += depthOffset + a_offset.z;\n                \n                vec2 screenPos = project(projPos);\n\n                vec2 v = screenPos + rotate2d(a_rotation) * (a_vertices * a_size * scd + a_offset.xy);\n\n                gl_Position = vec4((2.0 * v / viewport - 1.0) * projPos.w, projPos.z, projPos.w);\n            }`,\n        fragmentShader:\n            `precision highp float;\n            uniform sampler2D u_texture;\n            varying vec2 v_texCoords;\n            varying vec4 v_rgba;\n            void main () {\n                vec4 color = texture2D(u_texture, v_texCoords);\n                if(color.a < 0.1)\n                    discard;\n                gl_FragColor = color * v_rgba;\n            }`\n    });\n}","import * as shaders from \"../shaders/billboard\";\nimport {spliceTypedArray, TypedArray} from \"../utils/shared\";\nimport {EntityCollection} from \"./EntityCollection\";\nimport {Planet} from \"../scene/Planet\";\nimport {Renderer} from \"../renderer/Renderer\";\nimport {LOCK_FREE} from \"./LabelWorker\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Vec4} from \"../math/Vec4\";\nimport {WebGLBufferExt} from \"../webgl/Handler\";\nimport {BaseBillboard} from \"./BaseBillboard\";\n\nconst PICKINGCOLOR_BUFFER = 0;\nconst POSITION_BUFFER = 1;\nconst SIZE_BUFFER = 2;\nconst OFFSET_BUFFER = 3;\nconst RGBA_BUFFER = 4;\nconst ROTATION_BUFFER = 5;\nconst TEXCOORD_BUFFER = 6;\nconst VERTEX_BUFFER = 7;\n\n/**\n * @class BaseBillboardHandler\n */\nclass BaseBillboardHandler {\n\n    static __counter__: number = 0;\n\n    public __id: number;\n\n    /**\n     * Picking rendering option.\n     * @public\n     * @type {boolean}\n     */\n    public pickingEnabled: boolean;\n\n    public _entityCollection: EntityCollection;\n\n    protected _renderer: Renderer | null;\n\n    protected _billboards: BaseBillboard[];\n\n    protected _positionHighBuffer: WebGLBufferExt | null;\n    protected _positionLowBuffer: WebGLBufferExt | null;\n    protected _sizeBuffer: WebGLBufferExt | null;\n    protected _offsetBuffer: WebGLBufferExt | null;\n    protected _rgbaBuffer: WebGLBufferExt | null;\n    protected _rotationBuffer: WebGLBufferExt | null;\n    protected _texCoordBuffer: WebGLBufferExt | null;\n    protected _vertexBuffer: WebGLBufferExt | null;\n\n    protected _texCoordArr: Float32Array;\n    protected _vertexArr: Float32Array;\n    protected _positionHighArr: Float32Array;\n    protected _positionLowArr: Float32Array;\n    protected _sizeArr: Float32Array;\n    protected _offsetArr: Float32Array;\n    protected _rgbaArr: Float32Array;\n    protected _rotationArr: Float32Array;\n\n    protected _pickingColorBuffer: WebGLBufferExt | null;\n    protected _pickingColorArr: Float32Array;\n\n    protected _buffersUpdateCallbacks: Function[];\n\n    protected _changedBuffers: boolean[];\n\n    constructor(entityCollection: EntityCollection) {\n\n        this.__id = BaseBillboardHandler.__counter__++;\n\n        this.pickingEnabled = true;\n\n        this._entityCollection = entityCollection;\n\n        this._renderer = null;\n\n        this._billboards = [];\n\n        this._positionHighBuffer = null;\n        this._positionLowBuffer = null;\n        this._sizeBuffer = null;\n        this._offsetBuffer = null;\n        this._rgbaBuffer = null;\n        this._rotationBuffer = null;\n        this._texCoordBuffer = null;\n        this._vertexBuffer = null;\n        this._pickingColorBuffer = null;\n\n        this._texCoordArr = new Float32Array([]);\n        this._vertexArr = new Float32Array([]);\n        this._positionHighArr = new Float32Array([]);\n        this._positionLowArr = new Float32Array([]);\n        this._sizeArr = new Float32Array([]);\n        this._offsetArr = new Float32Array([]);\n        this._rgbaArr = new Float32Array([]);\n        this._rotationArr = new Float32Array([]);\n        this._pickingColorArr = new Float32Array([]);\n\n        this._buffersUpdateCallbacks = [];\n        this._buffersUpdateCallbacks[PICKINGCOLOR_BUFFER] = this.createPickingColorBuffer;\n        this._buffersUpdateCallbacks[POSITION_BUFFER] = this.createPositionBuffer;\n        this._buffersUpdateCallbacks[SIZE_BUFFER] = this.createSizeBuffer;\n        this._buffersUpdateCallbacks[OFFSET_BUFFER] = this.createOffsetBuffer;\n        this._buffersUpdateCallbacks[RGBA_BUFFER] = this.createRgbaBuffer;\n        this._buffersUpdateCallbacks[ROTATION_BUFFER] = this.createRotationBuffer;\n        this._buffersUpdateCallbacks[TEXCOORD_BUFFER] = this.createTexCoordBuffer;\n        this._buffersUpdateCallbacks[VERTEX_BUFFER] = this.createVertexBuffer;\n\n        this._changedBuffers = new Array(this._buffersUpdateCallbacks.length);\n    }\n\n    public isEqual(handler: BaseBillboardHandler) {\n        return handler && (handler.__id === this.__id);\n    }\n\n    static concArr(dest: number[], curr: number[]) {\n        for (let i = 0; i < curr.length; i++) {\n            dest.push(curr[i]);\n        }\n    }\n\n    public initProgram() {\n        if (this._renderer && this._renderer.handler) {\n            if (!this._renderer.handler.programs.billboard) {\n                this._renderer.handler.addProgram(shaders.billboard_screen());\n            }\n\n            if (!this._renderer.handler.programs.billboardPicking) {\n                this._renderer.handler.addProgram(shaders.billboardPicking());\n            }\n        }\n    }\n\n    public setRenderer(renderer: Renderer) {\n        this._renderer = renderer;\n        this.initProgram();\n    }\n\n    public refresh() {\n        let i = this._changedBuffers.length;\n        while (i--) {\n            this._changedBuffers[i] = true;\n        }\n    }\n\n    protected _removeBillboards() {\n        let i = this._billboards.length;\n        while (i--) {\n            let bi = this._billboards[i];\n            bi._handlerIndex = -1;\n            bi._handler = null;\n            bi._isReady = false;\n            bi._lockId = LOCK_FREE;\n        }\n        this._billboards.length = 0;\n        this._billboards = [];\n    }\n\n    public clear() {\n        // @ts-ignore\n        this._texCoordArr = null;\n        // @ts-ignore\n        this._vertexArr = null;\n        // @ts-ignore\n        this._positionHighArr = null;\n        // @ts-ignore\n        this._positionLowArr = null;\n        // @ts-ignore\n        this._sizeArr = null;\n        // @ts-ignore\n        this._offsetArr = null;\n        // @ts-ignore\n        this._rgbaArr = null;\n        // @ts-ignore\n        this._rotationArr = null;\n        // @ts-ignore\n        this._pickingColorArr = null;\n\n        this._texCoordArr = new Float32Array([]);\n        this._vertexArr = new Float32Array([]);\n        this._positionHighArr = new Float32Array([]);\n        this._positionLowArr = new Float32Array([]);\n        this._sizeArr = new Float32Array([]);\n        this._offsetArr = new Float32Array([]);\n        this._rgbaArr = new Float32Array([]);\n        this._rotationArr = new Float32Array([]);\n        this._pickingColorArr = new Float32Array([]);\n\n        this._removeBillboards();\n        this._deleteBuffers();\n        this.refresh();\n    }\n\n    protected _deleteBuffers() {\n        if (this._renderer) {\n            let gl = this._renderer.handler.gl!;\n            gl.deleteBuffer(this._positionHighBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._positionLowBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._sizeBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._offsetBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._rgbaBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._rotationBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._vertexBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._texCoordBuffer as WebGLBuffer);\n            gl.deleteBuffer(this._pickingColorBuffer as WebGLBuffer);\n        }\n\n        this._positionHighBuffer = null;\n        this._positionLowBuffer = null;\n        this._sizeBuffer = null;\n        this._offsetBuffer = null;\n        this._rgbaBuffer = null;\n        this._rotationBuffer = null;\n        this._vertexBuffer = null;\n        this._texCoordBuffer = null;\n        this._pickingColorBuffer = null;\n    }\n\n    public update() {\n        if (this._renderer) {\n            let i = this._changedBuffers.length;\n            while (i--) {\n                if (this._changedBuffers[i]) {\n                    this._buffersUpdateCallbacks[i].call(this);\n                    this._changedBuffers[i] = false;\n                }\n            }\n        }\n    }\n\n    public add(billboard: BaseBillboard) {\n        if (billboard._handlerIndex == -1) {\n            billboard._isReady = true;\n            billboard._handler = this;\n            billboard._handlerIndex = this._billboards.length;\n            this._billboards.push(billboard);\n        }\n    }\n\n    protected _displayPASS() {\n        let r = this._renderer!;\n        let h = r.handler;\n        h.programs.billboard.activate();\n        let sh = h.programs.billboard._program;\n        let sha = sh.attributes,\n            shu = sh.uniforms;\n\n        let gl = h.gl!,\n            ec = this._entityCollection;\n\n        gl.disable(gl.CULL_FACE);\n\n        gl.uniform1f(shu.depthOffset, ec.polygonOffsetUnits);\n\n        gl.uniform1i(shu.u_texture, 0);\n\n        gl.uniformMatrix4fv(shu.viewMatrix, false, r.activeCamera!.getViewMatrix());\n        gl.uniformMatrix4fv(shu.projectionMatrix, false, r.activeCamera!.getProjectionMatrix());\n\n        gl.uniform3fv(shu.eyePositionHigh, r.activeCamera!.eyeHigh);\n        gl.uniform3fv(shu.eyePositionLow, r.activeCamera!.eyeLow);\n\n        gl.uniform3fv(shu.uScaleByDistance, ec.scaleByDistance);\n\n        gl.uniform1f(shu.opacity, ec._fadingOpacity);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._texCoordBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_texCoord, this._texCoordBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_vertices, this._vertexBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._positionHighBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_positionsHigh, this._positionHighBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._positionLowBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_positionsLow, this._positionLowBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._rgbaBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_rgba, this._rgbaBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._sizeBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_size, this._sizeBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._offsetBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_offset, this._offsetBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.uniform1f(shu.planetRadius, (ec.renderNode as Planet)._planetRadius2 || 0);\n\n        gl.uniform2fv(shu.viewport, [h.canvas!.clientWidth, h.canvas!.clientHeight]);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._rotationBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_rotation, this._rotationBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.drawArrays(gl.TRIANGLES, 0, this._vertexBuffer!.numItems);\n\n        gl.enable(gl.CULL_FACE);\n    }\n\n    protected _pickingPASS() {\n        let r = this._renderer!;\n        let h = r.handler;\n        h.programs.billboardPicking.activate();\n        let sh = h.programs.billboardPicking._program;\n        let sha = sh.attributes,\n            shu = sh.uniforms;\n\n        let gl = h.gl!,\n            ec = this._entityCollection;\n\n        gl.disable(gl.CULL_FACE);\n\n        gl.uniform1f(shu.depthOffset, ec.polygonOffsetUnits);\n\n        gl.uniformMatrix4fv(shu.viewMatrix, false, r.activeCamera!.getViewMatrix());\n        gl.uniformMatrix4fv(shu.projectionMatrix, false, r.activeCamera!.getProjectionMatrix());\n\n        gl.uniform3fv(shu.eyePositionHigh, r.activeCamera!.eyeHigh);\n        gl.uniform3fv(shu.eyePositionLow, r.activeCamera!.eyeLow);\n\n        gl.uniform3fv(shu.uScaleByDistance, ec.scaleByDistance);\n\n        gl.uniform1f(shu.opacity, ec._fadingOpacity);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_vertices, this._vertexBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._positionHighBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_positionsHigh, this._positionHighBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._positionLowBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_positionsLow, this._positionLowBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._pickingColorBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_rgba, this._pickingColorBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._sizeBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_size, this._sizeBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._offsetBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_offset, this._offsetBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.uniform1f(shu.planetRadius, (ec.renderNode as Planet)._planetRadius2 || 0);\n\n        gl.uniform2fv(shu.viewport, [h.canvas!.clientWidth, h.canvas!.clientHeight]);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._rotationBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(sha.a_rotation, this._rotationBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.drawArrays(gl.TRIANGLES, 0, this._vertexBuffer!.numItems);\n\n        gl.enable(gl.CULL_FACE);\n    }\n\n    public draw() {\n        if (this._billboards.length) {\n            this.update();\n            this._displayPASS();\n        }\n    }\n\n    public drawPicking() {\n        if (this._billboards.length && this.pickingEnabled) {\n            this._pickingPASS();\n        }\n    }\n\n    public reindexBillboardsArray(startIndex: number) {\n        let b = this._billboards;\n        for (let i = startIndex; i < b.length; i++) {\n            b[i]._handlerIndex = i;\n        }\n    }\n\n    protected _removeBillboard(billboard: BaseBillboard) {\n\n        let bi = billboard._handlerIndex;\n\n        this._billboards.splice(bi, 1);\n\n        let i = bi * 24;\n        this._rgbaArr = spliceTypedArray(this._rgbaArr, i, 24) as Float32Array;\n\n        i = bi * 18;\n        this._positionHighArr = spliceTypedArray(this._positionHighArr, i, 18) as Float32Array;\n        this._positionLowArr = spliceTypedArray(this._positionLowArr, i, 18) as Float32Array;\n        this._offsetArr = spliceTypedArray(this._offsetArr, i, 18) as Float32Array;\n        //this._alignedAxisArr = spliceTypedArray(this._alignedAxisArr, i, 18) as Float32Array;\n        this._pickingColorArr = spliceTypedArray(this._pickingColorArr, i, 18) as Float32Array;\n\n        i = bi * 12;\n        this._vertexArr = spliceTypedArray(this._vertexArr, i, 12) as Float32Array;\n        this._sizeArr = spliceTypedArray(this._sizeArr, i, 12) as Float32Array;\n        this._texCoordArr = spliceTypedArray(this._texCoordArr, i, 12) as Float32Array;\n\n        i = bi * 6;\n        this._rotationArr = spliceTypedArray(this._rotationArr, i, 6) as Float32Array;\n\n        this.reindexBillboardsArray(bi);\n        this.refresh();\n\n        billboard._handlerIndex = -1;\n        billboard._handler = null;\n        billboard._isReady = false;\n        billboard._lockId = LOCK_FREE;\n    }\n\n    public setAlignedAxisArr(index: number, alignedAxis: Vec3) {\n        //...\n    }\n\n    public remove(billboard: BaseBillboard) {\n        if (billboard._handler) {\n            if (billboard._isReady && this.__id === billboard._handler.__id) {\n                this._removeBillboard(billboard);\n            } else {\n                billboard._handler = null;\n            }\n        }\n    }\n\n    public setPositionArr(index: number, positionHigh: Vec3, positionLow: Vec3) {\n        let i = index * 18;\n\n        // High\n        let a = this._positionHighArr,\n            x = positionHigh.x,\n            y = positionHigh.y,\n            z = positionHigh.z;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n\n        a[i + 3] = x;\n        a[i + 4] = y;\n        a[i + 5] = z;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n        a[i + 8] = z;\n\n        a[i + 9] = x;\n        a[i + 10] = y;\n        a[i + 11] = z;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n\n        a[i + 15] = x;\n        a[i + 16] = y;\n        a[i + 17] = z;\n\n        // Low\n        a = this._positionLowArr;\n        x = positionLow.x;\n        y = positionLow.y;\n        z = positionLow.z;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n\n        a[i + 3] = x;\n        a[i + 4] = y;\n        a[i + 5] = z;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n        a[i + 8] = z;\n\n        a[i + 9] = x;\n        a[i + 10] = y;\n        a[i + 11] = z;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n\n        a[i + 15] = x;\n        a[i + 16] = y;\n        a[i + 17] = z;\n\n        this._changedBuffers[POSITION_BUFFER] = true;\n    }\n\n    public setPickingColorArr(index: number, color: Vec3) {\n        let i = index * 18;\n        let a = this._pickingColorArr,\n            x = color.x / 255,\n            y = color.y / 255,\n            z = color.z / 255;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n\n        a[i + 3] = x;\n        a[i + 4] = y;\n        a[i + 5] = z;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n        a[i + 8] = z;\n\n        a[i + 9] = x;\n        a[i + 10] = y;\n        a[i + 11] = z;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n\n        a[i + 15] = x;\n        a[i + 16] = y;\n        a[i + 17] = z;\n\n        this._changedBuffers[PICKINGCOLOR_BUFFER] = true;\n    }\n\n    public setSizeArr(index: number, width: number, height: number) {\n        let i = index * 12;\n        let a = this._sizeArr,\n            x = width,\n            y = height;\n\n        a[i] = x;\n        a[i + 1] = y;\n\n        a[i + 2] = x;\n        a[i + 3] = y;\n\n        a[i + 4] = x;\n        a[i + 5] = y;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n\n        a[i + 8] = x;\n        a[i + 9] = y;\n\n        a[i + 10] = x;\n        a[i + 11] = y;\n\n        this._changedBuffers[SIZE_BUFFER] = true;\n    }\n\n    public setOffsetArr(index: number, offset: Vec3) {\n        let i = index * 18;\n        let a = this._offsetArr,\n            x = offset.x,\n            y = offset.y,\n            z = offset.z;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n\n        a[i + 3] = x;\n        a[i + 4] = y;\n        a[i + 5] = z;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n        a[i + 8] = z;\n\n        a[i + 9] = x;\n        a[i + 10] = y;\n        a[i + 11] = z;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n\n        a[i + 15] = x;\n        a[i + 16] = y;\n        a[i + 17] = z;\n\n        this._changedBuffers[OFFSET_BUFFER] = true;\n    }\n\n    public setRgbaArr(index: number, rgba: Vec4) {\n        let i = index * 24;\n        let a = this._rgbaArr,\n            x = rgba.x,\n            y = rgba.y,\n            z = rgba.z,\n            w = rgba.w;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n        a[i + 3] = w;\n\n        a[i + 4] = x;\n        a[i + 5] = y;\n        a[i + 6] = z;\n        a[i + 7] = w;\n\n        a[i + 8] = x;\n        a[i + 9] = y;\n        a[i + 10] = z;\n        a[i + 11] = w;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n        a[i + 15] = w;\n\n        a[i + 16] = x;\n        a[i + 17] = y;\n        a[i + 18] = z;\n        a[i + 19] = w;\n\n        a[i + 20] = x;\n        a[i + 21] = y;\n        a[i + 22] = z;\n        a[i + 23] = w;\n\n        this._changedBuffers[RGBA_BUFFER] = true;\n    }\n\n    public setRotationArr(index: number, rotation: number) {\n        let i = index * 6;\n        let a = this._rotationArr;\n\n        a[i] = rotation;\n        a[i + 1] = rotation;\n        a[i + 2] = rotation;\n        a[i + 3] = rotation;\n        a[i + 4] = rotation;\n        a[i + 5] = rotation;\n\n        this._changedBuffers[ROTATION_BUFFER] = true;\n    }\n\n    public setTexCoordArr(index: number, tcoordArr: number[] | TypedArray) {\n        let i = index * 12;\n        let a = this._texCoordArr;\n\n        a[i] = tcoordArr[0];\n        a[i + 1] = tcoordArr[1];\n\n        a[i + 2] = tcoordArr[2];\n        a[i + 3] = tcoordArr[3];\n\n        a[i + 4] = tcoordArr[4];\n        a[i + 5] = tcoordArr[5];\n\n        a[i + 6] = tcoordArr[6];\n        a[i + 7] = tcoordArr[7];\n\n        a[i + 8] = tcoordArr[8];\n        a[i + 9] = tcoordArr[9];\n\n        a[i + 10] = tcoordArr[10];\n        a[i + 11] = tcoordArr[11];\n\n        this._changedBuffers[TEXCOORD_BUFFER] = true;\n    }\n\n    public setVisibility(index: number, visibility: boolean) {\n        let vArr: number[];\n        if (visibility) {\n            vArr = [-0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, 0.5];\n        } else {\n            vArr = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        }\n        this.setVertexArr(index, vArr);\n    }\n\n    public setVertexArr(index: number, vertexArr: number[] | Float32Array) {\n        let i = index * 12;\n        let a = this._vertexArr;\n\n        a[i] = vertexArr[0];\n        a[i + 1] = vertexArr[1];\n        a[i + 2] = vertexArr[2];\n\n        a[i + 3] = vertexArr[3];\n        a[i + 4] = vertexArr[4];\n        a[i + 5] = vertexArr[5];\n\n        a[i + 6] = vertexArr[6];\n        a[i + 7] = vertexArr[7];\n        a[i + 8] = vertexArr[8];\n\n        a[i + 9] = vertexArr[9];\n        a[i + 10] = vertexArr[10];\n        a[i + 11] = vertexArr[11];\n\n        this._changedBuffers[VERTEX_BUFFER] = true;\n    }\n\n    public createPositionBuffer() {\n        let h = this._renderer!.handler,\n            numItems = this._positionHighArr.length / 3;\n\n        if (!this._positionHighBuffer || this._positionHighBuffer.numItems !== numItems) {\n            h.gl!.deleteBuffer(this._positionHighBuffer as WebGLBuffer);\n            h.gl!.deleteBuffer(this._positionLowBuffer as WebGLBuffer);\n            this._positionHighBuffer = h.createStreamArrayBuffer(3, numItems);\n            this._positionLowBuffer = h.createStreamArrayBuffer(3, numItems);\n        }\n\n        h.setStreamArrayBuffer(this._positionHighBuffer!, this._positionHighArr);\n        h.setStreamArrayBuffer(this._positionLowBuffer!, this._positionLowArr);\n    }\n\n    public createSizeBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._sizeBuffer as WebGLBuffer);\n        this._sizeBuffer = h.createArrayBuffer(this._sizeArr, 2, this._sizeArr.length / 2);\n    }\n\n    public createOffsetBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._offsetBuffer as WebGLBuffer);\n        this._offsetBuffer = h.createArrayBuffer(this._offsetArr, 3, this._offsetArr.length / 3);\n    }\n\n    createRgbaBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._rgbaBuffer as WebGLBuffer);\n        this._rgbaBuffer = h.createArrayBuffer(this._rgbaArr, 4, this._rgbaArr.length / 4);\n    }\n\n    public createRotationBuffer() {\n        let h = this._renderer!.handler;\n\n        if (!this._rotationBuffer || this._rotationBuffer.numItems !== this._rotationArr.length) {\n            h.gl!.deleteBuffer(this._rotationBuffer as WebGLBuffer);\n            this._rotationBuffer = h.createStreamArrayBuffer(1, this._rotationArr.length);\n        }\n\n        h.setStreamArrayBuffer(this._rotationBuffer, this._rotationArr);\n    }\n\n    public createVertexBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._vertexBuffer as WebGLBuffer);\n        this._vertexBuffer = h.createArrayBuffer(this._vertexArr, 2, this._vertexArr.length / 2);\n    }\n\n    public createTexCoordBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._texCoordBuffer as WebGLBuffer);\n        this._texCoordBuffer = h.createArrayBuffer(this._texCoordArr, 2, this._texCoordArr.length / 2);\n    }\n\n    //createAlignedAxisBuffer() {\n    //    var h = this._renderer.handler;\n    //    h.gl.deleteBuffer(this._alignedAxisBuffer);\n    //    this._alignedAxisBuffer = h.createArrayBuffer(\n    //        this._alignedAxisArr,\n    //        3,\n    //        this._alignedAxisArr.length / 3\n    //    );\n    //}\n\n    public createPickingColorBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._pickingColorBuffer as WebGLBuffer);\n        this._pickingColorBuffer = h.createArrayBuffer(this._pickingColorArr, 3, this._pickingColorArr.length / 3);\n    }\n\n    public refreshTexCoordsArr() {\n    }\n}\n\nexport {BaseBillboardHandler};","import {BaseBillboardHandler} from \"./BaseBillboardHandler\";\nimport {Billboard} from \"./Billboard\";\nimport {concatTypedArrays} from \"../utils/shared\";\nimport {EntityCollection} from \"./EntityCollection\";\n\n/**\n * @class BillboardHandler\n */\nclass BillboardHandler extends BaseBillboardHandler {\n\n    protected override _billboards: Billboard[];\n\n    constructor(props: EntityCollection) {\n        super(props);\n\n        this._billboards = [];\n    }\n\n    public override add(billboard: Billboard) {\n        if (billboard._handlerIndex == -1) {\n            super.add(billboard);\n\n            this._addBillboardToArrays(billboard);\n            this.refresh();\n            let src = billboard.getSrc() || (billboard.getImage() && billboard.getImage()!.src);\n            if (src) {\n                billboard.setSrc(src);\n            }\n        }\n    }\n\n    protected _addBillboardToArrays(billboard: Billboard) {\n        if (billboard.getVisibility()) {\n            this._vertexArr = concatTypedArrays(\n                this._vertexArr,\n                [-0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, 0.5]\n            ) as Float32Array;\n        } else {\n            this._vertexArr = concatTypedArrays(\n                this._vertexArr,\n                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n            ) as Float32Array;\n        }\n\n        this._texCoordArr = concatTypedArrays(\n            this._texCoordArr,\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n        ) as Float32Array;\n\n        let x = billboard._positionHigh.x,\n            y = billboard._positionHigh.y,\n            z = billboard._positionHigh.z,\n            w;\n        this._positionHighArr = concatTypedArrays(this._positionHighArr, [\n            x, y, z,\n            x, y, z,\n            x, y, z,\n            x, y, z,\n            x, y, z,\n            x, y, z\n        ]) as Float32Array;\n\n        x = billboard._positionLow.x;\n        y = billboard._positionLow.y;\n        z = billboard._positionLow.z;\n        this._positionLowArr = concatTypedArrays(this._positionLowArr, [\n            x, y, z,\n            x, y, z,\n            x, y, z,\n            x, y, z,\n            x, y, z,\n            x, y, z\n        ]) as Float32Array;\n\n        x = billboard._width;\n        y = billboard._height;\n        this._sizeArr = concatTypedArrays(this._sizeArr, [x, y, x, y, x, y, x, y, x, y, x, y]) as Float32Array;\n\n        x = billboard._offset.x;\n        y = billboard._offset.y;\n        z = billboard._offset.z;\n        this._offsetArr = concatTypedArrays(this._offsetArr, [\n            x, y, z,\n            x, y, z,\n            x, y, z,\n            x, y, z,\n            x, y, z,\n            x, y, z\n        ]) as Float32Array;\n\n        x = billboard._color.x;\n        y = billboard._color.y;\n        z = billboard._color.z;\n        w = billboard._color.w;\n        this._rgbaArr = concatTypedArrays(this._rgbaArr, [\n            x, y, z, w,\n            x, y, z, w,\n            x, y, z, w,\n            x, y, z, w,\n            x, y, z, w,\n            x, y, z, w\n        ]) as Float32Array;\n\n        x = billboard._rotation;\n        this._rotationArr = concatTypedArrays(this._rotationArr, [x, x, x, x, x, x]) as Float32Array;\n\n        x = billboard._entity!._pickingColor.x / 255;\n        y = billboard._entity!._pickingColor.y / 255;\n        z = billboard._entity!._pickingColor.z / 255;\n        this._pickingColorArr = concatTypedArrays(this._pickingColorArr, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]) as Float32Array;\n    }\n\n    public get billboards(): Billboard[] {\n        return this._billboards\n    }\n\n    public override refreshTexCoordsArr() {\n        let bc = this._entityCollection;\n        if (bc && this._renderer) {\n            let ta = this._renderer.billboardsTextureAtlas;\n            for (let i = 0; i < this._billboards.length; i++) {\n                let bi = this._billboards[i];\n                let img = bi.getImage();\n                if (img) {\n                    let imageNode = ta.get(img.__nodeIndex!);\n                    if (imageNode) {\n                        this.setTexCoordArr(bi._handlerIndex, imageNode.texCoords);\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport {BillboardHandler};\n","import {Program} from \"../webgl/Program\";\n\nconst QROT = `vec3 qRotate(vec4 q, vec3 v){\n    return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n}`;\n\nexport const geo_object = (): Program =>\n    new Program(\"geo_object\", {\n        uniforms: {\n            viewMatrix: \"mat4\",\n            projectionMatrix: \"mat4\",\n\n            uScaleByDistance: \"vec3\",\n\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n\n            lightsPositions: \"vec3\",\n            lightsParamsv: \"vec3\",\n            lightsParamsf: \"float\",\n\n            uTexture: \"sampler2d\",\n            uUseTexture: \"float\",\n            useLighting: \"float\"\n        },\n        attributes: {\n            aVertexPosition: \"vec3\",\n            aVertexNormal: \"vec3\",\n            aTexCoord: \"vec2\",\n\n            aPositionHigh: {type: \"vec3\", divisor: 1},\n            aPositionLow: {type: \"vec3\", divisor: 1},\n            aColor: {type: \"vec4\", divisor: 1},\n            aScale: {type: \"vec3\", divisor: 1},\n            aTranslate: {type: \"vec3\", divisor: 1},\n            aDispose: {type: \"float\", divisor: 1},\n            qRot: {type: \"vec4\", divisor: 1}\n        },\n        vertexShader:\n            `precision highp float;\n            \n            attribute vec3 aVertexPosition;\n            attribute vec3 aVertexNormal; \n            attribute vec3 aPositionHigh;\n            attribute vec3 aPositionLow;    \n            attribute vec4 aColor;\n            attribute vec3 aScale;\n            attribute vec3 aTranslate;\n            attribute float aDispose;\n            attribute float aUseTexture;\n            attribute vec2 aTexCoord;\n            attribute vec4 qRot;\n            \n            uniform vec3 uScaleByDistance;\n            uniform mat4 projectionMatrix;\n            uniform mat4 viewMatrix;\n            \n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n\n            varying vec3 cameraPosition;\n            varying vec3 vNormal;\n            varying vec3 v_vertex;           \n            varying vec4 vColor;\n            varying float vDispose;\n            varying vec2 vTexCoords;\n            \n            ${QROT}\n           \n            void main(void) {\n                        \n                if (aDispose == 0.0) {\n                   return;\n                }\n                \n                vec3 position = aPositionHigh + aPositionLow;\n                cameraPosition = eyePositionHigh + eyePositionLow;\n                \n                vec3 look = cameraPosition - position;\n                float lookLength = length(look);\n\n                vColor = aColor;\n                vTexCoords = aTexCoord;\n              \n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                vec3 highDiff = aPositionHigh - eyePositionHigh;\n                vec3 lowDiff = aPositionLow - eyePositionLow;\n             \n                vNormal = qRotate(qRot, aVertexNormal);\n                               \n                // if(lookLength > uScaleByDistance[1])\n                // {\n                //     scd = uScaleByDistance[1] / uScaleByDistance[0];\n                // }\n                // else if(lookLength > uScaleByDistance[0])\n                // {\n                //     scd = lookLength / uScaleByDistance[0];\n                // }\n                // ... is the same math\n                // use scaleByDistance: [1.0, 1.0, 1.0] for real sized objects \n                float scd = uScaleByDistance[2] * clamp(lookLength, uScaleByDistance[0], uScaleByDistance[1]) / uScaleByDistance[0];\n                \n                vec3 vert = qRotate(qRot, scd * (aVertexPosition * aScale + aTranslate));\n                \n                vert += lowDiff;\n                               \n                gl_Position = projectionMatrix * viewMatrixRTE  * vec4(highDiff * step(1.0, length(highDiff)) + vert, 1.0);\n                \n                v_vertex = position + vert;\n            }`,\n\n        fragmentShader: `precision highp float;\n\n                #define MAX_POINT_LIGHTS 1\n                \n                uniform vec3 lightsPositions[MAX_POINT_LIGHTS];\n                uniform vec3 lightsParamsv[MAX_POINT_LIGHTS * 3];\n                uniform float lightsParamsf[MAX_POINT_LIGHTS];\n                uniform sampler2D uTexture;\n                uniform float uUseTexture;\n                uniform float useLighting;                \n                            \n                varying vec3 cameraPosition;\n                varying vec3 v_vertex;                \n                varying vec4 vColor;\n                varying vec3 vNormal;\n                varying vec2 vTexCoords;\n                \n                void main(void) {        \n                                        \n                    vec3 lightWeighting = vec3(1.0);\n                \n                    if(useLighting != 0.0){\n                        vec3 normal = normalize(vNormal);\n                        vec3 lightDir = normalize(lightsPositions[0]);\n                        vec3 viewDir = normalize(cameraPosition - v_vertex);                \n                        vec3 reflectionDirection = reflect(-lightDir, normal);\n                        float reflection = max( dot(reflectionDirection, viewDir), 0.0);\n                        float specularLightWeighting = pow( reflection, lightsParamsf[0]);                                        \n                        float diffuseLightWeighting = max(dot(normal, lightDir), 0.0);\n                        lightWeighting = lightsParamsv[0] + lightsParamsv[1] * diffuseLightWeighting + lightsParamsv[2] * specularLightWeighting;\n                    }\n                                       \n                    if(uUseTexture > 0.0) {\n                        vec4 tColor = texture2D(uTexture, vTexCoords);\n                        gl_FragColor = vec4(tColor.rgb * lightWeighting, tColor.a);\n                    } else {\n                        gl_FragColor = vec4(vColor.rgb * lightWeighting, vColor.a);\n                    }\n                }`\n    });\n\nexport const geo_object_picking = (): Program =>\n    new Program(\"geo_object_picking\", {\n        uniforms: {\n            viewMatrix: \"mat4\",\n            projectionMatrix: \"mat4\",\n            uScaleByDistance: \"vec3\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            pickingScale: \"vec3\"\n        },\n        attributes: {\n            aVertexPosition: \"vec3\",\n            aPositionHigh: {type: \"vec3\", divisor: 1},\n            aPositionLow: {type: \"vec3\", divisor: 1},\n            aPickingColor: {type: \"vec3\", divisor: 1},\n            aScale: {type: \"vec3\", divisor: 1},\n            aTranslate: {type: \"vec3\", divisor: 1},\n            aDispose: {type: \"float\", divisor: 1},\n            qRot: {type: \"vec4\", divisor: 1}\n        },\n        vertexShader: `precision highp float;\n\n            attribute vec3 aVertexPosition;\n            attribute vec3 aPositionHigh;\n            attribute vec3 aPositionLow;\n            attribute vec3 aPickingColor;    \n            attribute vec3 aScale;\n            attribute vec3 aTranslate;\n            attribute float aDispose;\n            attribute vec4 qRot;\n            \n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform vec3 uScaleByDistance;\n            uniform mat4 projectionMatrix;\n            uniform mat4 viewMatrix;\n            uniform vec3 pickingScale;\n\n            varying vec3 vColor;\n            \n            ${QROT}\n\n            void main(void) {\n\n                if (aDispose == 0.0) {\n                    return;\n                 }\n            \n                 vColor = aPickingColor;\n                \n                 vec3 position = aPositionHigh + aPositionLow;\n                 vec3 cameraPosition = eyePositionHigh + eyePositionLow;\n \n                 mat4 viewMatrixRTE = viewMatrix;\n                 viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n \n                 vec3 highDiff = aPositionHigh - eyePositionHigh;\n                 vec3 lowDiff = aPositionLow - eyePositionLow;\n              \n                 vec3 look = cameraPosition - position;\n                 float lookLength = length(look);\n                                \n                 // if(lookLength > uScaleByDistance[1])\n                 // {\n                 //     scd = uScaleByDistance[1] / uScaleByDistance[0];\n                 // }\n                 // else if(lookLength > uScaleByDistance[0])\n                 // {\n                 //     scd = lookLength / uScaleByDistance[0];\n                 // }\n                 // ... is the same math above\n                 // @hack\n                 // pickingScale replace to this line, because when it s\n                 // tays in the vert above it affects on Mac Safari jitter\n                 float scd = uScaleByDistance[2] * clamp(lookLength, uScaleByDistance[0], uScaleByDistance[1]) / uScaleByDistance[0];\n\n                 //vec3 vert = qRotate(qRot, (aVertexPosition * aScale + aTranslate) * pickingScale) * scd;\n                 vec3 vert = qRotate(qRot, scd * pickingScale * (aVertexPosition * aScale + aTranslate));\n                 \n                 vert += lowDiff;\n                                \n                 gl_Position = projectionMatrix * viewMatrixRTE  * vec4(highDiff * step(1.0, length(highDiff)) + vert, 1.0);\n            }`,\n        fragmentShader:\n            `precision highp float;\n            varying vec3 vColor;\n            void main () {\n                gl_FragColor = vec4(vColor, 1.0);\n            }`\n    });","import * as shaders from \"../shaders/geoObject\";\nimport {concatArrays, loadImage, makeArrayTyped, spliceArray, TypedArray} from \"../utils/shared\";\nimport {EntityCollection} from \"./EntityCollection\";\nimport {GeoObject} from \"./GeoObject\";\nimport {Planet} from \"../scene/Planet\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Vec4} from \"../math/Vec4\";\nimport {Quat} from \"../math/Quat\";\nimport {WebGLBufferExt, WebGLTextureExt} from \"../webgl/Handler\";\nimport {Object3d} from \"../Object3d\";\n\nconst VERTEX_BUFFER = 0;\nconst POSITION_BUFFER = 1;\nconst RGBA_BUFFER = 2;\nconst NORMALS_BUFFER = 3;\nconst INDEX_BUFFER = 4;\nconst QROT_BUFFER = 5;\nconst SIZE_BUFFER = 6;\nconst PICKINGCOLOR_BUFFER = 7;\nconst VISIBLE_BUFFER = 8;\nconst TEXCOORD_BUFFER = 9;\nconst TRANSLATE_BUFFER = 10;\n\nfunction setParametersToArray(arr: number[] | TypedArray, index: number = 0, length: number = 0, itemSize: number = 1, ...params: number[]): number[] | TypedArray {\n    const currIndex = index * length;\n    for (let i = currIndex, len = currIndex + length; i < len; i++) {\n        arr[i] = params[i % itemSize];\n    }\n    return arr;\n}\n\n// function setParametersToArrayArr(arr: number[] | TypedArray, index: number = 0, length: number = 0, itemSize: number = 1, paramsArr: number[]): number[] | TypedArray {\n//     const currIndex = index * length;\n//     for (let i = currIndex, len = currIndex + length; i < len; i++) {\n//         arr[i] = paramsArr[i % itemSize];\n//     }\n//     return arr;\n// }\n\nclass InstanceData {\n\n    public isFree: boolean;\n\n    public _geoObjectHandler: GeoObjectHandler;\n\n    public geoObjects: GeoObject[];\n\n    public numInstances: number;\n\n    public _texture: WebGLTextureExt | null;\n    public _textureSrc: string | null;\n    public _objectSrc?: string;\n\n    public _sizeArr: number[] | TypedArray;\n    public _translateArr: number[] | TypedArray;\n    public _vertexArr: number[] | TypedArray;\n    public _positionHighArr: number[] | TypedArray;\n    public _positionLowArr: number[] | TypedArray;\n    public _qRotArr: number[] | TypedArray;\n    public _rgbaArr: number[] | TypedArray;\n    public _normalsArr: number[] | TypedArray;\n    public _indicesArr: number[] | TypedArray;\n    public _pickingColorArr: number[] | TypedArray;\n    public _visibleArr: number[] | TypedArray;\n    public _texCoordArr: number[] | TypedArray;\n\n    public _sizeBuffer: WebGLBufferExt | null;\n    public _translateBuffer: WebGLBufferExt | null;\n    public _vertexBuffer: WebGLBufferExt | null;\n    public _positionHighBuffer: WebGLBufferExt | null;\n    public _positionLowBuffer: WebGLBufferExt | null;\n    public _qRotBuffer: WebGLBufferExt | null;\n    public _rgbaBuffer: WebGLBufferExt | null;\n    public _normalsBuffer: WebGLBufferExt | null;\n    public _indicesBuffer: WebGLBufferExt | null;\n    public _pickingColorBuffer: WebGLBufferExt | null;\n    public _visibleBuffer: WebGLBufferExt | null;\n    public _texCoordBuffer: WebGLBufferExt | null;\n\n    public _buffersUpdateCallbacks: Function[];\n\n    public _changedBuffers: boolean[];\n\n    constructor(geoObjectHandler: GeoObjectHandler) {\n\n        this.isFree = true;\n\n        this._geoObjectHandler = geoObjectHandler;\n\n        this.geoObjects = [];\n\n        this.numInstances = 0;\n\n        this._texture = null;\n        this._textureSrc = null;\n\n        this._sizeArr = [];\n        this._translateArr = [];\n        this._vertexArr = [];\n        this._positionHighArr = [];\n        this._positionLowArr = [];\n        this._qRotArr = [];\n        this._rgbaArr = [];\n        this._normalsArr = [];\n        this._indicesArr = [];\n        this._pickingColorArr = [];\n        this._visibleArr = [];\n        this._texCoordArr = [];\n\n        this._sizeBuffer = null;\n        this._translateBuffer = null;\n        this._vertexBuffer = null;\n        this._positionHighBuffer = null;\n        this._positionLowBuffer = null;\n        this._qRotBuffer = null;\n        this._rgbaBuffer = null;\n        this._normalsBuffer = null;\n        this._indicesBuffer = null;\n        this._pickingColorBuffer = null;\n        this._visibleBuffer = null;\n        this._texCoordBuffer = null;\n\n        this._buffersUpdateCallbacks = [];\n        this._buffersUpdateCallbacks[PICKINGCOLOR_BUFFER] = this.createPickingColorBuffer;\n        this._buffersUpdateCallbacks[POSITION_BUFFER] = this.createPositionBuffer;\n        this._buffersUpdateCallbacks[NORMALS_BUFFER] = this.createNormalsBuffer;\n        this._buffersUpdateCallbacks[RGBA_BUFFER] = this.createRgbaBuffer;\n        this._buffersUpdateCallbacks[INDEX_BUFFER] = this.createIndicesBuffer;\n        this._buffersUpdateCallbacks[VERTEX_BUFFER] = this.createVertexBuffer;\n        this._buffersUpdateCallbacks[SIZE_BUFFER] = this.createSizeBuffer;\n        this._buffersUpdateCallbacks[VISIBLE_BUFFER] = this.createVisibleBuffer;\n        this._buffersUpdateCallbacks[TEXCOORD_BUFFER] = this.createTexCoordBuffer;\n        this._buffersUpdateCallbacks[QROT_BUFFER] = this.createQRotBuffer;\n        this._buffersUpdateCallbacks[TRANSLATE_BUFFER] = this.createTranslateBuffer;\n\n        this._changedBuffers = new Array(this._buffersUpdateCallbacks.length);\n    }\n\n    public createTexture(image: HTMLCanvasElement | ImageBitmap | ImageData | HTMLImageElement) {\n        if (this._geoObjectHandler && this._geoObjectHandler._planet) {\n            this._texture = this._geoObjectHandler._planet.renderer!.handler.createTextureDefault(image);\n        }\n    }\n\n    public clear() {\n\n        this.numInstances = 0;\n\n        this.geoObjects = [];\n\n        this._sizeArr = [];\n        this._translateArr = [];\n        this._vertexArr = [];\n        this._positionHighArr = [];\n        this._positionLowArr = [];\n        this._qRotArr = [];\n        this._rgbaArr = [];\n        this._normalsArr = [];\n        this._indicesArr = [];\n        this._pickingColorArr = [];\n        this._visibleArr = [];\n        this._texCoordArr = [];\n\n        this._deleteBuffers();\n\n        this.isFree = false;\n\n        //this._geoObjectHandler = null;\n    }\n\n    public _deleteBuffers() {\n\n        if (this._geoObjectHandler && this._geoObjectHandler._planet && this._geoObjectHandler._planet.renderer) {\n\n            let h = this._geoObjectHandler._planet.renderer.handler,\n                gl = h.gl!;\n\n            h.deleteTexture(this._texture);\n            this._texture = null;\n\n            gl.deleteBuffer(this._sizeBuffer!);\n            gl.deleteBuffer(this._translateBuffer!);\n            gl.deleteBuffer(this._vertexBuffer!);\n            gl.deleteBuffer(this._positionHighBuffer!);\n            gl.deleteBuffer(this._positionLowBuffer!);\n            gl.deleteBuffer(this._qRotBuffer!);\n            gl.deleteBuffer(this._rgbaBuffer!);\n            gl.deleteBuffer(this._normalsBuffer!);\n            gl.deleteBuffer(this._indicesBuffer!);\n            gl.deleteBuffer(this._pickingColorBuffer!);\n            gl.deleteBuffer(this._visibleBuffer!);\n            gl.deleteBuffer(this._texCoordBuffer!);\n        }\n\n        this._sizeBuffer = null;\n        this._translateBuffer = null;\n        this._vertexBuffer = null;\n        this._positionHighBuffer = null;\n        this._positionLowBuffer = null;\n        this._qRotBuffer = null;\n        this._rgbaBuffer = null;\n        this._normalsBuffer = null;\n        this._indicesBuffer = null;\n        this._pickingColorBuffer = null;\n        this._visibleBuffer = null;\n        this._texCoordBuffer = null;\n    }\n\n    public createVertexBuffer() {\n        const h = this._geoObjectHandler._planet!.renderer!.handler;\n        h.gl!.deleteBuffer(this._vertexBuffer!);\n        this._vertexArr = makeArrayTyped(this._vertexArr);\n        this._vertexBuffer = h.createArrayBuffer(this._vertexArr as Float32Array, 3, this._vertexArr.length / 3);\n    }\n\n    public createVisibleBuffer() {\n\n        const h = this._geoObjectHandler._planet!.renderer!.handler,\n            numItems = this._visibleArr.length;\n\n        if (!this._visibleBuffer || this._visibleBuffer.numItems !== numItems) {\n            h.gl!.deleteBuffer(this._visibleBuffer!);\n            this._visibleBuffer = h.createStreamArrayBuffer(1, numItems);\n        }\n\n        this._visibleArr = makeArrayTyped(this._visibleArr);\n\n        h.setStreamArrayBuffer(this._visibleBuffer, this._visibleArr as Uint8Array);\n    }\n\n    public createSizeBuffer() {\n        let h = this._geoObjectHandler._planet!.renderer!.handler,\n            numItems = this._sizeArr.length / 3;\n\n        if (!this._sizeBuffer || this._sizeBuffer.numItems !== numItems) {\n            h.gl!.deleteBuffer(this._sizeBuffer!);\n            this._sizeBuffer = h.createStreamArrayBuffer(3, numItems);\n        }\n\n        this._sizeArr = makeArrayTyped(this._sizeArr);\n\n        h.setStreamArrayBuffer(this._sizeBuffer, this._sizeArr as Float32Array);\n    }\n\n    public createTranslateBuffer() {\n        let h = this._geoObjectHandler._planet!.renderer!.handler,\n            numItems = this._translateArr.length / 3;\n\n        if (!this._translateBuffer || this._translateBuffer.numItems !== numItems) {\n            h.gl!.deleteBuffer(this._translateBuffer!);\n            this._translateBuffer = h.createStreamArrayBuffer(3, numItems);\n        }\n\n        this._translateArr = makeArrayTyped(this._translateArr);\n\n        h.setStreamArrayBuffer(this._translateBuffer, this._translateArr as Float32Array);\n    }\n\n    public createTexCoordBuffer() {\n        const h = this._geoObjectHandler._planet!.renderer!.handler;\n        h.gl!.deleteBuffer(this._texCoordBuffer!);\n        this._texCoordArr = makeArrayTyped(this._texCoordArr);\n        this._texCoordBuffer = h.createArrayBuffer(this._texCoordArr as Uint8Array, 2, this._texCoordArr.length / 2);\n    }\n\n    public createPositionBuffer() {\n        let h = this._geoObjectHandler._planet!.renderer!.handler,\n            numItems = this._positionHighArr.length / 3;\n\n        if (!this._positionHighBuffer || this._positionHighBuffer.numItems !== numItems) {\n            h.gl!.deleteBuffer(this._positionHighBuffer!);\n            h.gl!.deleteBuffer(this._positionLowBuffer!);\n            this._positionHighBuffer = h.createStreamArrayBuffer(3, numItems);\n            this._positionLowBuffer = h.createStreamArrayBuffer(3, numItems);\n        }\n\n        this._positionHighArr = makeArrayTyped(this._positionHighArr);\n        this._positionLowArr = makeArrayTyped(this._positionLowArr);\n\n        h.setStreamArrayBuffer(this._positionHighBuffer!, this._positionHighArr as Float32Array);\n        h.setStreamArrayBuffer(this._positionLowBuffer!, this._positionLowArr as Float32Array);\n    }\n\n    public createRgbaBuffer() {\n        let h = this._geoObjectHandler._planet!.renderer!.handler,\n            numItems = this._rgbaArr.length / 4;\n\n        if (!this._rgbaBuffer || this._rgbaBuffer.numItems !== numItems) {\n            h.gl!.deleteBuffer(this._rgbaBuffer!);\n            this._rgbaBuffer = h.createStreamArrayBuffer(4, numItems);\n        }\n\n        this._rgbaArr = makeArrayTyped(this._rgbaArr);\n\n        h.setStreamArrayBuffer(this._rgbaBuffer, this._rgbaArr as Uint8Array);\n    }\n\n    public createQRotBuffer() {\n        let h = this._geoObjectHandler._planet!.renderer!.handler,\n            numItems = this._qRotArr.length / 4;\n\n        if (!this._qRotBuffer || this._qRotBuffer.numItems !== numItems) {\n            h.gl!.deleteBuffer(this._qRotBuffer!);\n            this._qRotBuffer = h.createStreamArrayBuffer(4, numItems);\n        }\n\n        this._qRotArr = makeArrayTyped(this._qRotArr);\n\n        h.setStreamArrayBuffer(this._qRotBuffer, this._qRotArr as Float32Array);\n    }\n\n    public createNormalsBuffer() {\n        const h = this._geoObjectHandler._planet!.renderer!.handler;\n        h.gl!.deleteBuffer(this._normalsBuffer!);\n        this._normalsArr = makeArrayTyped(this._normalsArr);\n        this._normalsBuffer = h.createArrayBuffer(this._normalsArr as Uint8Array, 3, this._normalsArr.length / 3);\n    }\n\n    public createIndicesBuffer() {\n        const h = this._geoObjectHandler._planet!.renderer!.handler;\n        h.gl!.deleteBuffer(this._indicesBuffer!);\n        this._indicesArr = makeArrayTyped(this._indicesArr, Uint32Array);\n        this._indicesBuffer = h.createElementArrayBuffer(this._indicesArr as Uint32Array, 1, this._indicesArr.length);\n    }\n\n    public createPickingColorBuffer() {\n        const h = this._geoObjectHandler._planet!.renderer!.handler;\n        h.gl!.deleteBuffer(this._pickingColorBuffer!);\n        this._pickingColorArr = makeArrayTyped(this._pickingColorArr);\n        this._pickingColorBuffer = h.createArrayBuffer(this._pickingColorArr as Uint8Array, 3, this._pickingColorArr.length / 3);\n    }\n\n    public refresh() {\n        let i = this._changedBuffers.length;\n        while (i--) {\n            this._changedBuffers[i] = true;\n        }\n    }\n\n    public update() {\n        if (this._geoObjectHandler._planet) {\n            let i = this._changedBuffers.length;\n            while (i--) {\n                if (this._changedBuffers[i]) {\n                    this._buffersUpdateCallbacks[i].call(this);\n                    this._changedBuffers[i] = false;\n                }\n            }\n            this.isFree = true;\n        }\n    }\n}\n\nclass GeoObjectHandler {\n    static __counter__ = 0;\n\n    protected __id: number;\n\n    /**\n     * Picking rendering option.\n     * @public\n     * @type {boolean}\n     */\n    public pickingEnabled: boolean;\n\n    protected _entityCollection: EntityCollection;\n\n    public _planet: Planet | null;\n\n    protected _geoObjects: GeoObject[];\n\n    protected _instanceDataMap: Map<string, InstanceData>;\n    protected _instanceDataMapValues: InstanceData[];\n    protected _dataTagUpdateQueue: InstanceData[];\n\n    constructor(entityCollection: EntityCollection) {\n\n        this.__id = GeoObjectHandler.__counter__++;\n\n        this.pickingEnabled = true;\n\n        this._entityCollection = entityCollection;\n\n        this._planet = null;\n\n        this._geoObjects = [];\n\n        this._instanceDataMap = new Map<string, InstanceData>();\n        this._instanceDataMapValues = [];\n\n        this._dataTagUpdateQueue = [];\n    }\n\n    public initProgram() {\n        if (this._planet && this._planet.renderer) {\n            if (!this._planet.renderer.handler.programs.geo_object) {\n                this._planet.renderer.handler.addProgram(shaders.geo_object());\n            }\n            if (!this._planet.renderer.handler.programs.geo_object_picking) {\n                this._planet.renderer.handler.addProgram(shaders.geo_object_picking());\n            }\n        }\n    }\n\n    public setRenderNode(renderNode: Planet) {\n\n        this._planet = renderNode;\n\n        this.initProgram();\n\n        //\n        // in case of lazy initialization loading data here\n        for (let i = 0; i < this._instanceDataMapValues.length; i++) {\n            this._loadDataTagTexture(this._instanceDataMapValues[i]);\n        }\n\n        for (let i = 0; i < this._geoObjects.length; i++) {\n            this._geoObjects[i].updateRotation();\n        }\n\n        this.update();\n    }\n\n    public setTextureTag(src: string, tag: string) {\n        const tagData = this._instanceDataMap.get(tag);\n        if (tagData) {\n            tagData._textureSrc = src;\n\n            this._instanceDataMap.set(tag, tagData);\n            this._loadDataTagTexture(tagData);\n        }\n    }\n\n    public setObjectSrc(src: string, tag: string) {\n        const tagData = this._instanceDataMap.get(tag);\n        if (src) {\n            if (tagData && tagData._objectSrc !== src) {\n                tagData._objectSrc = src;\n\n                Object3d.loadObj(src).then((object3d) => {\n                    this._updateInstanceData(object3d[0], tag);\n                })\n            }\n        }\n    }\n\n    public _updateInstanceData(object: Object3d, tag: string) {\n        const tagData = this._instanceDataMap.get(tag);\n        if (tagData) {\n            if (object.vertices.length !== tagData._vertexArr.length) {\n                tagData._vertexArr = object.vertices;\n                tagData._changedBuffers[VERTEX_BUFFER] = true;\n            }\n            if (object.normals.length !== tagData._normalsArr.length) {\n                tagData._normalsArr = object.normals;\n                tagData._changedBuffers[NORMALS_BUFFER] = true;\n            }\n            if (object.indices.length !== tagData._indicesArr.length) {\n                tagData._indicesArr = object.indices;\n                tagData._changedBuffers[INDEX_BUFFER] = true;\n            }\n            if (object.texCoords.length !== tagData._texCoordArr.length) {\n                tagData._texCoordArr = object.texCoords;\n                tagData._changedBuffers[TEXCOORD_BUFFER] = true;\n            }\n\n            tagData._textureSrc = object.src;\n\n            this._loadDataTagTexture(tagData);\n\n            this._updateTag(tagData);\n            this._instanceDataMapValues = Array.from(this._instanceDataMap.values());\n        }\n    }\n\n    protected _addGeoObjectToArray(geoObject: GeoObject) {\n        const tag = geoObject.tag;\n\n        let tagData = this._instanceDataMap.get(tag);\n\n        if (!tagData) {\n            tagData = new InstanceData(this);\n            this._instanceDataMap.set(tag, tagData);\n            this._instanceDataMapValues = Array.from(this._instanceDataMap.values());\n\n            //\n            // Setting instanced data\n            tagData._vertexArr = geoObject.vertices\n            tagData._normalsArr = geoObject.normals;\n            tagData._indicesArr = geoObject.indices;\n            tagData._texCoordArr = geoObject.texCoords;\n            tagData._textureSrc = geoObject.object3d.src;\n\n            this._loadDataTagTexture(tagData);\n        }\n\n        geoObject._tagDataIndex = tagData.numInstances++;\n        geoObject._tagData = tagData;\n        tagData.geoObjects.push(geoObject);\n\n        let itemSize = 3;\n\n        tagData._visibleArr = concatArrays(tagData._visibleArr, setParametersToArray([], 0, 1, 1, geoObject.getVisibility() ? 1 : 0));\n\n        let x = geoObject._positionHigh.x,\n            y = geoObject._positionHigh.y,\n            z = geoObject._positionHigh.z,\n            w;\n\n        tagData._positionHighArr = concatArrays(tagData._positionHighArr, setParametersToArray([], 0, itemSize, itemSize, x, y, z));\n\n        x = geoObject._positionLow.x;\n        y = geoObject._positionLow.y;\n        z = geoObject._positionLow.z;\n        tagData._positionLowArr = concatArrays(tagData._positionLowArr, setParametersToArray([], 0, itemSize, itemSize, x, y, z));\n\n        x = geoObject._entity!._pickingColor.x / 255;\n        y = geoObject._entity!._pickingColor.y / 255;\n        z = geoObject._entity!._pickingColor.z / 255;\n        tagData._pickingColorArr = concatArrays(tagData._pickingColorArr, setParametersToArray([], 0, itemSize, itemSize, x, y, z));\n\n        itemSize = 4;\n\n        x = geoObject._qRot.x;\n        y = geoObject._qRot.y;\n        z = geoObject._qRot.z;\n        w = geoObject._qRot.w;\n        tagData._qRotArr = concatArrays(tagData._qRotArr, setParametersToArray([], 0, itemSize, itemSize, x, y, z, w));\n\n        x = geoObject._color.x;\n        y = geoObject._color.y;\n        z = geoObject._color.z;\n        w = geoObject._color.w;\n        tagData._rgbaArr = concatArrays(tagData._rgbaArr, setParametersToArray([], 0, itemSize, itemSize, x, y, z, w));\n\n        itemSize = 3;\n        let scale = geoObject.getScale();\n        x = scale.x;\n        y = scale.y;\n        z = scale.z;\n        tagData._sizeArr = concatArrays(tagData._sizeArr, setParametersToArray([], 0, itemSize, itemSize, x, y, z));\n\n        let translate = geoObject.getTranslate();\n        x = translate.x;\n        y = translate.y;\n        z = translate.z;\n        tagData._translateArr = concatArrays(tagData._translateArr, setParametersToArray([], 0, itemSize, itemSize, x, y, z));\n    }\n\n    public _displayPASS() {\n        let r = this._planet!.renderer!,\n            sh = r.handler.programs.geo_object,\n            p = sh._program,\n            u = p.uniforms,\n            a = p.attributes,\n            gl = r.handler.gl!,\n            ec = this._entityCollection;\n\n        sh.activate();\n\n        //gl.disable(gl.CULL_FACE);\n\n        //\n        // Could be in VAO\n        //\n        gl.uniform3fv(u.uScaleByDistance, ec.scaleByDistance);\n        gl.uniform1f(u.useLighting, ec._useLighting);\n\n        gl.uniform3fv(u.eyePositionHigh, r.activeCamera!.eyeHigh);\n        gl.uniform3fv(u.eyePositionLow, r.activeCamera!.eyeLow);\n\n        gl.uniformMatrix4fv(u.projectionMatrix, false, r.activeCamera!.getProjectionMatrix());\n        gl.uniformMatrix4fv(u.viewMatrix, false, r.activeCamera!.getViewMatrix());\n\n        gl.uniform3fv(u.lightsPositions, this._planet!._lightsPositions);\n        gl.uniform3fv(u.lightsParamsv, this._planet!._lightsParamsv);\n        gl.uniform1fv(u.lightsParamsf, this._planet!._lightsParamsf);\n\n\n        for (let i = 0; i < this._instanceDataMapValues.length; i++) {\n            let tagData = this._instanceDataMapValues[i];\n\n            //\n            //  Instance individual data\n            //\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._qRotBuffer!);\n            gl.vertexAttribPointer(a.qRot, tagData._qRotBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._sizeBuffer!);\n            gl.vertexAttribPointer(a.aScale, tagData._sizeBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._translateBuffer!);\n            gl.vertexAttribPointer(a.aTranslate, tagData._translateBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._rgbaBuffer!);\n            gl.vertexAttribPointer(a.aColor, tagData._rgbaBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._visibleBuffer!);\n            gl.vertexAttribPointer(a.aDispose, tagData._visibleBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.uniform1f(u.uUseTexture, tagData._texture ? 1 : 0);\n\n            //\n            // Instance common data(could be in VAO)\n            //\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._positionHighBuffer!);\n            gl.vertexAttribPointer(a.aPositionHigh, tagData._positionHighBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._positionLowBuffer!);\n            gl.vertexAttribPointer(a.aPositionLow, tagData._positionLowBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._normalsBuffer!);\n            gl.vertexAttribPointer(a.aVertexNormal, tagData._normalsBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._vertexBuffer!);\n            gl.vertexAttribPointer(a.aVertexPosition, tagData._vertexBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, (tagData._texture || r.handler.defaultTexture)!);\n            gl.uniform1i(u.uTexture, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._texCoordBuffer!);\n            gl.vertexAttribPointer(a.aTexCoord, tagData._texCoordBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, tagData._indicesBuffer!);\n            p.drawElementsInstanced!(gl.TRIANGLES, tagData._indicesBuffer!.numItems, gl.UNSIGNED_INT, 0, tagData.numInstances);\n        }\n    }\n\n    public drawPicking() {\n        if (this._geoObjects.length && this.pickingEnabled) {\n            this.update();\n            this._pickingPASS();\n        }\n    }\n\n    protected _pickingPASS() {\n        let r = this._planet!.renderer!,\n            sh = r.handler.programs.geo_object_picking,\n            p = sh._program,\n            u = p.uniforms,\n            a = p.attributes,\n            gl = r.handler.gl!,\n            ec = this._entityCollection;\n\n        sh.activate();\n\n        gl.uniform3fv(u.uScaleByDistance, ec.scaleByDistance);\n\n        gl.uniform3fv(u.pickingScale, ec.pickingScale);\n\n        gl.uniform3fv(u.eyePositionHigh, r.activeCamera!.eyeHigh);\n        gl.uniform3fv(u.eyePositionLow, r.activeCamera!.eyeLow);\n\n        gl.uniformMatrix4fv(u.projectionMatrix, false, r.activeCamera!.getProjectionMatrix());\n        gl.uniformMatrix4fv(u.viewMatrix, false, r.activeCamera!.getViewMatrix());\n\n        for (let i = 0; i < this._instanceDataMapValues.length; i++) {\n            let tagData = this._instanceDataMapValues[i];\n\n            //\n            // Instance individual data\n            //\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._qRotBuffer!);\n            gl.vertexAttribPointer(a.qRot, tagData._qRotBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._sizeBuffer!);\n            gl.vertexAttribPointer(a.aScale, tagData._sizeBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._translateBuffer!);\n            gl.vertexAttribPointer(a.aTranslate, tagData._translateBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._pickingColorBuffer!);\n            gl.vertexAttribPointer(a.aPickingColor, tagData._pickingColorBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._positionHighBuffer!);\n            gl.vertexAttribPointer(a.aPositionHigh, tagData._positionHighBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._positionLowBuffer!);\n            gl.vertexAttribPointer(a.aPositionLow, tagData._positionLowBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._visibleBuffer!);\n            gl.vertexAttribPointer(a.aDispose, tagData._visibleBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            //\n            // Instance common data(could be in VAO)\n            //\n            gl.bindBuffer(gl.ARRAY_BUFFER, tagData._vertexBuffer!);\n            gl.vertexAttribPointer(a.aVertexPosition, tagData._vertexBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, tagData._indicesBuffer!);\n            p.drawElementsInstanced!(gl.TRIANGLES, tagData._indicesBuffer!.numItems, gl.UNSIGNED_INT, 0, tagData.numInstances);\n        }\n    }\n\n    async _loadDataTagTexture(tagData: InstanceData) {\n        if (this._planet && tagData._textureSrc) {\n            const image = await loadImage(tagData._textureSrc);\n            tagData.createTexture(image);\n        }\n    }\n\n    public setQRotArr(tagData: InstanceData, tagDataIndex: number, qRot: Quat) {\n        setParametersToArray(tagData._qRotArr, tagDataIndex, 4, 4, qRot.x, qRot.y, qRot.z, qRot.w);\n        tagData._changedBuffers[QROT_BUFFER] = true;\n        this._updateTag(tagData);\n    }\n\n    public setVisibility(tagData: InstanceData, tagDataIndex: number, visibility: boolean) {\n        setParametersToArray(tagData._visibleArr, tagDataIndex, 1, 1, visibility ? 1 : 0);\n        tagData._changedBuffers[VISIBLE_BUFFER] = true;\n        this._updateTag(tagData);\n    }\n\n    public setPositionArr(tagData: InstanceData, tagDataIndex: number, positionHigh: Vec3, positionLow: Vec3) {\n        setParametersToArray(tagData._positionHighArr, tagDataIndex, 3, 3, positionHigh.x, positionHigh.y, positionHigh.z);\n        setParametersToArray(tagData._positionLowArr, tagDataIndex, 3, 3, positionLow.x, positionLow.y, positionLow.z);\n        tagData._changedBuffers[POSITION_BUFFER] = true;\n        this._updateTag(tagData);\n    }\n\n    public setRgbaArr(tagData: InstanceData, tagDataIndex: number, rgba: Vec4) {\n        setParametersToArray(tagData._rgbaArr, tagDataIndex, 4, 4, rgba.x, rgba.y, rgba.z, rgba.w);\n        tagData._changedBuffers[RGBA_BUFFER] = true;\n        this._updateTag(tagData);\n    }\n\n    public setPickingColorArr(tagData: InstanceData, tagDataIndex: number, color: Vec3) {\n        setParametersToArray(tagData._pickingColorArr, tagDataIndex, 3, 3, color.x / 255, color.y / 255, color.z / 255);\n        tagData._changedBuffers[PICKINGCOLOR_BUFFER] = true;\n        this._updateTag(tagData);\n    }\n\n    // setTexCoordArr(tagData, tagDataIndex, tcoordArr) {\n    //     setParametersToArray(tagData._texCoordArr, tagDataIndex, 2, 2, ...tcoordArr);\n    //     tagData._changedBuffers[TEXCOORD_BUFFER] = true;\n    //     this._updateTag(tagData);\n    // }\n\n    public setScaleArr(tagData: InstanceData, tagDataIndex: number, scale: Vec3) {\n        setParametersToArray(tagData._sizeArr, tagDataIndex, 3, 3, scale.x, scale.y, scale.z);\n        tagData._changedBuffers[SIZE_BUFFER] = true;\n        this._updateTag(tagData);\n    }\n\n    public setTranslateArr(tagData: InstanceData, tagDataIndex: number, translate: Vec3) {\n        setParametersToArray(tagData._translateArr, tagDataIndex, 3, 3, translate.x, translate.y, translate.z);\n        tagData._changedBuffers[TRANSLATE_BUFFER] = true;\n        this._updateTag(tagData);\n    }\n\n    protected _updateTag(dataTag: InstanceData) {\n        if (dataTag.isFree) {\n            dataTag.isFree = false;\n            this._dataTagUpdateQueue.push(dataTag);\n        }\n    }\n\n    public update() {\n\n        for (let i = 0, len = this._dataTagUpdateQueue.length; i < len; i++) {\n            this._dataTagUpdateQueue[i].update();\n        }\n        this._dataTagUpdateQueue = [];\n    }\n\n    public _removeAll() {\n        let i = this._geoObjects.length;\n        while (i--) {\n            const gi = this._geoObjects[i];\n\n            gi._tagDataIndex = -1;\n            gi._tagData = null;\n\n            gi._handlerIndex = -1;\n            gi._handler = null;\n        }\n        this._geoObjects.length = 0;\n        this._geoObjects = [];\n\n        for (let i = 0; i < this._instanceDataMapValues.length; i++) {\n            this._instanceDataMapValues[i].clear();\n        }\n\n        this._instanceDataMap.clear();\n        this._instanceDataMapValues = [];\n    }\n\n    public clear() {\n        this._removeAll();\n    }\n\n    public draw() {\n        if (this._geoObjects.length) {\n            this.update();\n            this._displayPASS();\n        }\n    }\n\n    public add(geoObject: GeoObject) {\n\n        if (geoObject._handlerIndex === -1) {\n\n            geoObject._handler = this;\n            geoObject._handlerIndex = this._geoObjects.length;\n\n            this._geoObjects.push(geoObject);\n            this._addGeoObjectToArray(geoObject);\n\n            geoObject.updateRotation();\n\n            geoObject._tagData!.refresh();\n\n            this._updateTag(geoObject._tagData!);\n            geoObject.setObjectSrc(geoObject._objectSrc!);\n        }\n    }\n\n    public remove(geoObject: GeoObject) {\n        if (geoObject._handler && this.__id == geoObject._handler.__id) {\n            this._removeGeoObject(geoObject);\n        }\n    }\n\n    public _clearDataTagQueue() {\n        this._dataTagUpdateQueue = [];\n    }\n\n\n    public _removeGeoObject(geoObject: GeoObject) {\n\n        let tagData = geoObject._tagData!;\n        let tag = geoObject.tag;\n\n        tagData.numInstances--;\n\n        let isEmpty = false;\n        // dataTag becomes empty, remove it from the rendering\n        if (tagData.numInstances === 0) {\n            tagData.clear();\n            this._instanceDataMap.delete(tag);\n            this._instanceDataMapValues = [];\n            this._clearDataTagQueue();\n            isEmpty = true;\n        }\n\n        this._geoObjects.splice(geoObject._handlerIndex, 1);\n        for (let i = geoObject._handlerIndex, len = this._geoObjects.length; i < len; i++) {\n            let gi = this._geoObjects[i];\n            gi._handlerIndex = gi._handlerIndex - 1;\n        }\n\n        let tdi = geoObject._tagDataIndex;\n        tagData.geoObjects.splice(tdi, 1);\n\n        for (let i = geoObject._tagDataIndex, len = tagData.geoObjects.length; i < len; i++) {\n            let gi = tagData.geoObjects[i];\n            gi._tagDataIndex = gi._tagDataIndex - 1;\n        }\n\n        tagData._rgbaArr = spliceArray(tagData._rgbaArr, tdi * 4, 4);\n        tagData._positionHighArr = spliceArray(tagData._positionHighArr, tdi * 3, 3);\n        tagData._positionLowArr = spliceArray(tagData._positionLowArr, tdi * 3, 3);\n        tagData._qRotArr = spliceArray(tagData._qRotArr, tdi * 4, 4);\n        tagData._pickingColorArr = spliceArray(tagData._pickingColorArr, tdi * 3, 3);\n        tagData._sizeArr = spliceArray(tagData._sizeArr, tdi * 3, 3);\n        tagData._translateArr = spliceArray(tagData._translateArr, tdi * 3, 3);\n        tagData._visibleArr = spliceArray(tagData._visibleArr, tdi, 1);\n\n        geoObject._handlerIndex = -1;\n        geoObject._handler = null;\n\n        geoObject._tagDataIndex = -1;\n        geoObject._tagData = null;\n\n        if (!isEmpty) {\n            tagData.refresh();\n            this._updateTag(tagData);\n        }\n    }\n}\n\nexport {GeoObjectHandler, InstanceData};\n","import {Program} from '../webgl/Program';\n\nconst DEFINE = `\n#define EMPTY -1.0\n#define RTL 1.0`;\n\nconst PROJECT = `vec2 project(vec4 p) {\n                    return (0.5 * p.xyz / p.w + 0.5).xy * viewport;\n                }`;\n\nconst ROTATE2D =\n    `mat2 rotate2d(float angle) {\n        return mat2(cos(angle), -sin(angle),\n           sin(angle), cos(angle));\n     }`;\n\nexport function label_webgl2(): Program {\n    return new Program(\"label\", {\n        uniforms: {\n            viewport: \"vec2\",\n            fontTextureArr: \"sampler2darray\",\n            sdfParamsArr: \"vec4\",\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            planetRadius: \"float\",\n            scaleByDistance: \"vec3\",\n            opacity: \"float\",\n            isOutlinePass: \"int\",\n            depthOffset: \"float\"\n        },\n        attributes: {\n            a_outline: \"float\",\n            a_gliphParam: \"vec4\",\n            a_vertices: \"vec2\",\n            a_texCoord: \"vec4\",\n            a_positionsHigh: \"vec3\",\n            a_positionsLow: \"vec3\",\n            a_size: \"float\",\n            a_rotation: \"float\",\n            a_rgba: \"vec4\",\n            a_offset: \"vec3\",\n            a_fontIndex: \"float\"\n        },\n        vertexShader:\n            `#version 300 es\n            \n            ${DEFINE}\n            \n            in float a_outline;\n            in vec4 a_gliphParam;\n            in vec2 a_vertices;\n            in vec4 a_texCoord;\n            in vec3 a_positionsHigh;\n            in vec3 a_positionsLow;\n            in vec3 a_offset;\n            in float a_size;\n            in float a_rotation;\n            in vec4 a_rgba;\n            in float a_fontIndex;\n\n            out vec2 v_uv;\n            out vec4 v_rgba;\n            flat out int v_fontIndex;            \n            out vec4 v_outlineColor;\n            flat out float v_outline;\n\n            uniform vec2 viewport;\n            uniform mat4 viewMatrix;\n            uniform mat4 projectionMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float planetRadius;\n            uniform vec3 scaleByDistance;\n            uniform float opacity;\n            uniform float depthOffset;\n\n            const vec3 ZERO3 = vec3(0.0);\n           \n            ${PROJECT}\n\n            ${ROTATE2D}\n\n            void main() {\n\n                if(a_texCoord.w == EMPTY) {\n                    gl_Position = vec4(0.0);\n                    v_fontIndex = -1;\n                    return;\n                }\n               \n                vec3 a_positions = a_positionsHigh + a_positionsLow;\n                vec3 cameraPos = eyePositionHigh + eyePositionLow;\n\n                v_outline = a_outline;\n\n                v_fontIndex = int(a_fontIndex);\n                v_uv = a_texCoord.xy;\n                vec3 look = a_positions - cameraPos;\n                float lookDist = length(look);\n                v_rgba = a_rgba;\n                \n                if(opacity * step(lookDist, sqrt(dot(cameraPos,cameraPos) - planetRadius) + sqrt(dot(a_positions,a_positions) - planetRadius)) == 0.0){\n                    return;\n                }\n\n                float scd = (1.0 - smoothstep(scaleByDistance[0], scaleByDistance[1], lookDist)) * (1.0 - step(scaleByDistance[2], lookDist));\n\n                v_rgba.a *= opacity;\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                vec3 highDiff = a_positionsHigh - eyePositionHigh;\n                vec3 lowDiff = a_positionsLow - eyePositionLow;\n                vec4 posRTE = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n                vec4 projPos = projectionMatrix * posRTE;\n                                \n                float camSlope = dot(vec3(viewMatrix[0][2], viewMatrix[1][2], viewMatrix[2][2]), normalize(cameraPos));                \n                if(camSlope > 0.5) {\n                    float dist = dot(look, normalize(cameraPos));\n                    projPos.z += dist * 0.02;                  \n                }else{\n                    projPos.z += -(abs(projPos.z)) * 0.002;                 \n                }\n                        \n                projPos.z += depthOffset + a_offset.z;\n                               \n                vec2 screenPos = project(projPos);\n                \n                vec2 vert = a_vertices;                \n                vec4 gp = a_gliphParam;                                \n                if(a_texCoord.w == RTL){\n                    vert.x = step(vert.x * 0.5 + 1.0, 1.0);\n                    gp.x = -a_gliphParam.x;\n                    gp.z = -(a_gliphParam.z + a_texCoord.z);\n                }else{\n                    gp.z = a_gliphParam.z + a_texCoord.z;\n                }\n                                \n                vec2 v = screenPos + rotate2d(a_rotation) * ((vert * gp.xy + gp.zw) * a_size * scd + a_offset.xy);\n\n                gl_Position = vec4((2.0 * v / viewport - 1.0) * projPos.w, projPos.z, projPos.w);\n            }`,\n        fragmentShader:\n            `#version 300 es\n\n            uniform int isOutlinePass;\n            \n            precision highp float;\n\n            const int MAX_SIZE = 11;\n\n            // x - ATLAS_WIDTH = 512.0;\n            // y - ATLAS_HEIGHT = 512.0;\n            // z - ATLAS_GLYPH_SIZE = 32.0;\n            // w - ATLAS_FIELD_RANGE = 8.0;\n\n            uniform sampler2D fontTextureArr[MAX_SIZE];\n            uniform vec4 sdfParamsArr[MAX_SIZE];\n\n            flat in int v_fontIndex;\n            in vec2 v_uv;\n            in vec4 v_rgba;           \n\n            flat in float v_outline;\n\n            in vec3 v_pickingColor;\n\n            layout(location = 0) out vec4 outScreen;\n\n            float median(float r, float g, float b) {\n                return max(min(r, g), min(max(r, g), b));\n            }\n\n            float getDistance() {\n                vec3 msdf;\n                if(v_fontIndex == 0) {\n                    msdf = texture(fontTextureArr[0], v_uv).rgb;\n                } else if(v_fontIndex == 1){\n                    msdf = texture(fontTextureArr[1], v_uv).rgb;\n                } else if(v_fontIndex == 2){\n                    msdf = texture(fontTextureArr[2], v_uv).rgb;\n                } else if(v_fontIndex == 3){\n                    msdf = texture(fontTextureArr[3], v_uv).rgb;\n                } else if(v_fontIndex == 4){\n                    msdf = texture(fontTextureArr[4], v_uv).rgb;\n                } else if(v_fontIndex == 5){\n                    msdf = texture(fontTextureArr[5], v_uv).rgb;\n                } else if(v_fontIndex == 6){\n                    msdf = texture(fontTextureArr[6], v_uv).rgb;\n                } else if(v_fontIndex == 7){\n                    msdf = texture(fontTextureArr[7], v_uv).rgb;\n                } else if(v_fontIndex == 8){\n                    msdf = texture(fontTextureArr[8], v_uv).rgb;\n                } else if(v_fontIndex == 9){\n                    msdf = texture(fontTextureArr[9], v_uv).rgb;\n                } else if(v_fontIndex == 10){\n                    msdf = texture(fontTextureArr[10], v_uv).rgb;\n                }\n                return median(msdf.r, msdf.g, msdf.b);\n            }\n                        \n            void main () {\n            \n                if(v_fontIndex == -1) {\n                    return;\n                }\n                \n                vec4 sdfParams = sdfParamsArr[v_fontIndex];\n                float sd = getDistance();             \n                vec2 dxdy = fwidth(v_uv) * sdfParams.xy;\n\n                if(isOutlinePass == 0){                             \n                    float dist = sd + min(0.001, 0.5 - 1.0 / sdfParams.w) - 0.5;\n                    float opacity = clamp(dist * sdfParams.w / length(dxdy) + 0.5, 0.0, 1.0);\n                    if(opacity <= 0.1){\n                        discard;\n                    }\n                    outScreen = vec4(v_rgba.rgb, opacity * v_rgba.a);\n                } else {             \n                    float dist = sd + min(v_outline, 0.5 - 1.0 / sdfParams.w) - 0.5;\n                    float opacity = clamp(dist * sdfParams.w / length(dxdy) + 0.5, 0.0, 1.0);                       \n                    if(opacity <= 0.1){\n                        discard;\n                    }\n                    outScreen = vec4(v_rgba.rgb, opacity * v_rgba.a);\n                    //outScreen = v_rgba * strokeAlpha * (0.5 - opacity) * 2.0;\n                }         \n            }`\n    });\n}\n\nexport function label_screen(): Program {\n    return new Program(\"label\", {\n        uniforms: {\n            viewport: \"vec2\",\n            fontTextureArr: \"sampler2darray\",\n            sdfParamsArr: \"vec4\",\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            planetRadius: \"float\",\n            scaleByDistance: \"vec3\",\n            opacity: \"float\",\n            isOutlinePass: \"int\",\n            depthOffset: \"float\"\n        },\n        attributes: {\n            a_outline: \"float\",\n            a_gliphParam: \"vec4\",\n            a_vertices: \"vec2\",\n            a_texCoord: \"vec4\",\n            a_positionsHigh: \"vec3\",\n            a_positionsLow: \"vec3\",\n            a_size: \"float\",\n            a_rotation: \"float\",\n            a_rgba: \"vec4\",\n            a_offset: \"vec3\",\n            a_fontIndex: \"float\"\n        },\n        vertexShader:\n            `            \n            ${DEFINE}\n                        \n            attribute float a_outline;\n            attribute vec4 a_gliphParam;\n            attribute vec2 a_vertices;\n            attribute vec4 a_texCoord;\n            attribute vec3 a_positionsHigh;\n            attribute vec3 a_positionsLow;\n            attribute vec3 a_offset;\n            attribute float a_size;\n            attribute float a_rotation;\n            attribute vec4 a_rgba;\n            attribute float a_fontIndex;\n\n            varying float v_outline;\n            varying vec2 v_uv;\n            varying vec4 v_rgba;\n            varying float v_fontIndex;            \n\n            uniform vec2 viewport;\n            uniform mat4 viewMatrix;\n            uniform mat4 projectionMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float planetRadius;\n            uniform vec3 scaleByDistance;\n            uniform float opacity;\n            uniform float depthOffset;\n\n            const vec3 ZERO3 = vec3(0.0);\n\n            ${PROJECT}\n\n            ${ROTATE2D}\n\n            void main() {\n\n                if(a_texCoord.w == EMPTY) {\n                    gl_Position = vec4(0.0);\n                    v_fontIndex = -1.0;\n                    return;\n                }\n               \n                vec3 a_positions = a_positionsHigh + a_positionsLow;\n                vec3 cameraPos = eyePositionHigh + eyePositionLow;\n\n                v_outline = a_outline;\n                v_uv = vec2(a_texCoord.xy);\n                v_rgba = a_rgba;\n                v_fontIndex = a_fontIndex;\n                \n                vec3 look = a_positions - cameraPos;\n                float lookDist = length(look);\n                \n                if(opacity * step(lookDist, sqrt(dot(cameraPos,cameraPos) - planetRadius) + sqrt(dot(a_positions,a_positions) - planetRadius)) == 0.0){\n                    return;\n                }\n\n                float scd = (1.0 - smoothstep(scaleByDistance[0], scaleByDistance[1], lookDist)) * (1.0 - step(scaleByDistance[2], lookDist));\n\n                v_rgba.a *= opacity;\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                vec3 highDiff = a_positionsHigh - eyePositionHigh;\n                vec3 lowDiff = a_positionsLow - eyePositionLow;\n                vec4 posRTE = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n                vec4 projPos = projectionMatrix * posRTE;\n                                \n                float camSlope = dot(vec3(viewMatrix[0][2], viewMatrix[1][2], viewMatrix[2][2]), normalize(cameraPos));                \n                if(camSlope > 0.5) {\n                    float dist = dot(look, normalize(cameraPos));\n                    projPos.z += dist * 0.02;                  \n                }else{\n                    projPos.z += -(abs(projPos.z)) * 0.002;                 \n                }\n                        \n                projPos.z += depthOffset + a_offset.z;\n                               \n                vec2 screenPos = project(projPos);\n                \n                vec2 vert = a_vertices;                \n                vec4 gp = a_gliphParam;                                \n                if(a_texCoord.w == RTL){\n                    vert.x = step(vert.x * 0.5 + 1.0, 1.0);\n                    gp.x = -a_gliphParam.x;\n                    gp.z = -(a_gliphParam.z + a_texCoord.z);\n                }else{\n                    gp.z = a_gliphParam.z + a_texCoord.z;\n                }\n                                \n                vec2 v = screenPos + rotate2d(a_rotation) * ((vert * gp.xy + gp.zw) * a_size * scd + a_offset.xy);\n                \n                gl_Position = vec4((2.0 * v / viewport - 1.0) * projPos.w, projPos.z, projPos.w);\n            }`,\n        fragmentShader:\n            `#extension GL_OES_standard_derivatives : enable\n\n            precision highp float;\n            precision highp int;\n\n            const int MAX_SIZE = 11;\n\n            // x - ATLAS_WIDTH = 512.0;\n            // y - ATLAS_HEIGHT = 512.0;\n            // z - ATLAS_GLYPH_SIZE = 32.0;\n            // w - ATLAS_FIELD_RANGE = 8.0;\n\n            uniform sampler2D fontTextureArr[MAX_SIZE];\n            uniform vec4 sdfParamsArr[MAX_SIZE];\n            uniform int isOutlinePass;\n            \n            varying float v_outline;\n            varying vec2 v_uv;\n            varying vec4 v_rgba;           \n            varying float v_fontIndex;\n            \n            float fontIndex;\n\n            float median(float r, float g, float b) {\n                return max(min(r, g), min(max(r, g), b));\n            }\n\n            float getDistance() {\n                vec3 msdf;\n                if(fontIndex >= 0.0 && fontIndex < 1.0) {\n                    msdf = texture2D(fontTextureArr[0], v_uv).rgb;\n                } else if(fontIndex >= 1.0 && fontIndex < 2.0){\n                    msdf = texture2D(fontTextureArr[1], v_uv).rgb;\n                } else if(fontIndex >= 2.0 && fontIndex < 3.0){\n                    msdf = texture2D(fontTextureArr[2], v_uv).rgb;\n                } else if(fontIndex >= 3.0 && fontIndex < 4.0){\n                    msdf = texture2D(fontTextureArr[3], v_uv).rgb;\n                } else if(fontIndex >= 4.0 && fontIndex < 5.0){\n                    msdf = texture2D(fontTextureArr[4], v_uv).rgb;\n                } else if(fontIndex >= 5.0 && fontIndex < 6.0){\n                    msdf = texture2D(fontTextureArr[5], v_uv).rgb;\n                } else if(fontIndex >= 6.0 && fontIndex < 7.0){\n                    msdf = texture2D(fontTextureArr[6], v_uv).rgb;\n                } else if(fontIndex >= 7.0 && fontIndex < 8.0){\n                    msdf = texture2D(fontTextureArr[7], v_uv).rgb;\n                } else if(fontIndex >= 8.0 && fontIndex < 9.0){\n                    msdf = texture2D(fontTextureArr[8], v_uv).rgb;\n                } else if(fontIndex >= 9.0 && fontIndex < 10.0){\n                    msdf = texture2D(fontTextureArr[9], v_uv).rgb;\n                } else if(fontIndex >= 10.0 && fontIndex < 11.0){\n                    msdf = texture2D(fontTextureArr[10], v_uv).rgb;\n                }\n                return median(msdf.r, msdf.g, msdf.b);\n            }\n\n\n            vec4 getSDFParams() {\n                if(fontIndex >= 0.0 && fontIndex < 1.0) {\n                    return sdfParamsArr[0];\n                } else if(fontIndex >= 1.0 && fontIndex < 2.0){\n                    return sdfParamsArr[1];\n                } else if(fontIndex >= 2.0 && fontIndex < 3.0){\n                    return sdfParamsArr[2];\n                } else if(fontIndex >= 3.0 && fontIndex < 4.0){\n                    return sdfParamsArr[3];\n                } else if(fontIndex >= 4.0 && fontIndex < 5.0){\n                    return sdfParamsArr[4];\n                } else if(fontIndex >= 5.0 && fontIndex < 6.0){\n                    return sdfParamsArr[5];\n                } else if(fontIndex >= 6.0 && fontIndex < 7.0){\n                    return sdfParamsArr[6];\n                } else if(fontIndex >= 7.0 && fontIndex < 8.0){\n                    return sdfParamsArr[7];\n                } else if(fontIndex >= 8.0 && fontIndex < 9.0){\n                    return sdfParamsArr[8];\n                } else if(fontIndex >= 9.0 && fontIndex < 10.0){\n                    return sdfParamsArr[9];\n                } else if(fontIndex >= 10.0 && fontIndex < 11.0){\n                    return sdfParamsArr[10];\n                }\n            }\n                    \n            void main () {\n\n                fontIndex = v_fontIndex + 0.1;\n                \n                if(v_fontIndex < 0.0){\n                    return;\n                }\n                \n                vec4 sdfParams = getSDFParams();\n                float sd = getDistance();             \n                vec2 dxdy = fwidth(v_uv) * sdfParams.xy;\n                float dist = sd + min(0.001, 0.5 - 1.0 / sdfParams.w) - 0.5;\n                float opacity = clamp(dist * sdfParams.w / length(dxdy) + 0.5, 0.0, 1.0);\n\n                if(isOutlinePass == 0){                             \n                    //gl_FragColor = vec4(v_rgba.rgb, opacity * v_rgba.a);\n                } else {                \n                    float strokeDist = sd + min(v_outline, 0.5 - 1.0 / sdfParams.w) - 0.5;\n                    float strokeAlpha = v_rgba.a * clamp(strokeDist * sdfParams.w / length(dxdy) + 0.5, 0.0, 1.0);                    \n                    if(strokeAlpha < 0.1){\n                        discard;\n                    }\n                    //gl_FragColor = v_rgba * strokeAlpha * (0.5 - opacity) * 2.0;\n                }\n            }`\n    });\n}\n\nexport function labelPicking(): Program {\n    return new Program(\"labelPicking\", {\n        uniforms: {\n            viewport: \"vec2\",\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            planetRadius: \"float\",\n            scaleByDistance: \"vec3\",\n            opacity: \"float\",\n            depthOffset: \"float\"\n        },\n        attributes: {\n            a_gliphParam: \"vec4\",\n            a_vertices: \"vec2\",\n            a_texCoord: \"vec4\",\n            a_positionsHigh: \"vec3\",\n            a_positionsLow: \"vec3\",\n            a_offset: \"vec3\",\n            a_size: \"float\",\n            a_rotation: \"float\",\n            a_rgba: \"vec4\"\n        },\n        vertexShader:\n            `\n            \n            ${DEFINE}\n            \n            attribute vec4 a_gliphParam;\n            attribute vec2 a_vertices;\n            attribute vec4 a_texCoord;\n            attribute vec3 a_positionsHigh;\n            attribute vec3 a_positionsLow;\n            attribute vec3 a_offset;\n            attribute float a_size;\n            attribute float a_rotation;\n            attribute vec4 a_rgba;\n\n            varying vec4 v_rgba;\n\n            uniform vec2 viewport;\n            uniform mat4 viewMatrix;\n            uniform mat4 projectionMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float planetRadius;\n            uniform vec3 scaleByDistance;\n            uniform float opacity;\n            uniform float depthOffset;\n\n            const vec3 ZERO3 = vec3(0.0);\n\n            ${PROJECT}\n\n            ${ROTATE2D}\n\n            void main() {\n                vec3 a_positions = a_positionsHigh + a_positionsLow;\n                vec3 cameraPos = eyePositionHigh + eyePositionLow;\n                v_rgba = a_rgba;\n                \n                if(a_texCoord.w == EMPTY) {\n                    v_rgba.a = 0.0;\n                    gl_Position = vec4(0.0);\n                    return;\n                }\n\n                vec3 look = a_positions - cameraPos;\n                float lookDist = length(look);\n                if(opacity * step(lookDist, sqrt(dot(cameraPos,cameraPos) - planetRadius) + sqrt(dot(a_positions,a_positions) - planetRadius)) == 0.0){\n                    return;\n                }\n\n                float scd = (1.0 - smoothstep(scaleByDistance[0], scaleByDistance[1], lookDist)) * (1.0 - step(scaleByDistance[2], lookDist));\n\n                v_rgba.a *= opacity;\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                vec3 highDiff = a_positionsHigh - eyePositionHigh;\n                vec3 lowDiff = a_positionsLow - eyePositionLow;\n                vec4 posRTE = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n                vec4 projPos = projectionMatrix * posRTE;\n                \n                float camSlope = dot(vec3(viewMatrix[0][2], viewMatrix[1][2], viewMatrix[2][2]), normalize(cameraPos));                \n                if(camSlope > 0.5) {\n                    float dist = dot(look, normalize(cameraPos));\n                    projPos.z += dist * 0.02;                  \n                }else{\n                    projPos.z += -(abs(projPos.z)) * 0.002;                 \n                }\n                        \n                projPos.z += depthOffset + a_offset.z;\n                \n                vec2 screenPos = project(projPos);\n                \n                vec2 vert = a_vertices;                \n                vec4 gp = a_gliphParam;                                \n                if(a_texCoord.w == RTL){\n                    vert.x = step(vert.x * 0.5 + 1.0, 1.0);\n                    gp.x = -a_gliphParam.x;\n                    gp.z = -(a_gliphParam.z + a_texCoord.z);\n                }else{\n                    gp.z = a_gliphParam.z + a_texCoord.z;\n                }\n                                \n                vec2 v = screenPos + rotate2d(a_rotation) * ((vert * gp.xy + gp.zw) * a_size * scd + a_offset.xy);\n                                \n                gl_Position = vec4((2.0 * v / viewport - 1.0) * projPos.w, projPos.z, projPos.w);\n            }`,\n        fragmentShader:\n            `precision highp float;\n\n            varying vec4 v_rgba;\n\n            varying vec3 v_pickingColor;\n\n            void main () {\n\n                vec4 color = v_rgba;\n                if (color.a < 0.05) {\n                    return;\n                }\n\n                gl_FragColor = vec4(v_rgba.rgb, v_rgba.a);\n            }`\n    });\n}","import * as shaders from \"../shaders/label\";\nimport {ALIGN, Label} from \"./Label\";\nimport {BaseBillboardHandler} from \"./BaseBillboardHandler\";\nimport {concatTypedArrays, spliceTypedArray} from \"../utils/shared\";\nimport {EntityCollection} from \"./EntityCollection\";\nimport {LOCK_FREE} from \"./LabelWorker\";\nimport {Planet} from \"../scene/Planet\";\nimport {WebGLBufferExt} from \"../webgl/Handler\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Vec4} from \"../math/Vec4\";\n\ntype LabelWorkerCallbackData = {\n    vertexArr: Float32Array,\n    texCoordArr: Float32Array,\n    gliphParamArr: Float32Array,\n    positionHighArr: Float32Array,\n    positionLowArr: Float32Array,\n    sizeArr: Float32Array,\n    offsetArr: Float32Array,\n    rgbaArr: Float32Array,\n    rotationArr: Float32Array,\n    fontIndexArr: Float32Array,\n    outlineArr: Float32Array,\n    outlineColorArr: Float32Array,\n    pickingColorArr: Float32Array\n}\n\nconst PICKINGCOLOR_BUFFER = 0;\nconst POSITION_BUFFER = 1;\nconst SIZE_BUFFER = 2;\nconst OFFSET_BUFFER = 3;\nconst RGBA_BUFFER = 4;\nconst ROTATION_BUFFER = 5;\nconst TEXCOORD_BUFFER = 6;\nconst VERTEX_BUFFER = 7;\nconst FONTINDEX_BUFFER = 8;\nconst OUTLINE_BUFFER = 9;\nconst OUTLINECOLOR_BUFFER = 10;\n\nconst EMPTY = -1.0;\nconst RTL = 1.0;\n\nclass LabelHandler extends BaseBillboardHandler {\n\n    protected override _billboards: Label[];\n\n    protected _gliphParamBuffer: WebGLBufferExt | null;\n    protected _fontIndexBuffer: WebGLBufferExt | null;\n    protected _outlineBuffer: WebGLBufferExt | null;\n    protected _outlineColorBuffer: WebGLBufferExt | null;\n\n    protected _gliphParamArr: Float32Array;\n    protected _fontIndexArr: Float32Array;\n    protected _outlineArr: Float32Array;\n    protected _outlineColorArr: Float32Array;\n\n    public _maxLetters: number;\n\n    constructor(entityCollection: EntityCollection, maxLetters: number = 21) {\n        super(entityCollection);\n\n        this._billboards = [];\n\n        this._gliphParamBuffer = null;\n        this._fontIndexBuffer = null;\n        this._outlineBuffer = null;\n        this._outlineColorBuffer = null;\n\n        this._gliphParamArr = new Float32Array([]);\n        this._fontIndexArr = new Float32Array([]);\n        this._outlineArr = new Float32Array([]);\n        this._outlineColorArr = new Float32Array([]);\n\n        this._buffersUpdateCallbacks[FONTINDEX_BUFFER] = this.createFontIndexBuffer;\n        this._buffersUpdateCallbacks[OUTLINE_BUFFER] = this.createOutlineBuffer;\n        this._buffersUpdateCallbacks[OUTLINECOLOR_BUFFER] = this.createOutlineColorBuffer;\n\n        this._changedBuffers = new Array(this._buffersUpdateCallbacks.length);\n\n        this._maxLetters = maxLetters;\n    }\n\n    public override initProgram() {\n        if (this._renderer && this._renderer.handler && this._renderer.handler.gl) {\n            if (!this._renderer.handler.programs.label) {\n                if (this._renderer.handler.gl.type === \"webgl2\") {\n                    this._renderer.handler.addProgram(shaders.label_webgl2());\n                } else {\n                    this._renderer.handler.addProgram(shaders.label_screen());\n                }\n            }\n\n            if (!this._renderer.handler.programs.labelPicking) {\n                this._renderer.handler.addProgram(shaders.labelPicking());\n            }\n        }\n    }\n\n    public get labels(): Label[] {\n        return this._billboards;\n    }\n\n    public override add(label: Label) {\n        if (!label._handler) {\n            label._handler = this;\n            this.assignFontAtlas(label);\n            this.refresh();\n        }\n    }\n\n    public updateFonts() {\n        let l = [...this._billboards];\n        this._billboards = [];\n        for (let i = 0; i < l.length; i++) {\n            this.assignFontAtlas(l[i]);\n        }\n    }\n\n    protected _addLabelToArrays(label: Label) {\n        this._renderer && this._renderer.labelWorker.make({handler: this, label: label});\n    }\n\n    public assignFontAtlas(label: Label) {\n        if (this._entityCollection && this._renderer) {\n            label.assignFontAtlas(this._renderer.fontAtlas);\n            this._addLabelToArrays(label);\n        } else {\n            this._billboards.push(label);\n        }\n    }\n\n    public workerCallback(data: LabelWorkerCallbackData, label: Label) {\n        if (label._lockId !== LOCK_FREE && label._handler && this.isEqual(label._handler)) {\n            label._isReady = true;\n            label._lockId = LOCK_FREE;\n            label._handlerIndex = this._billboards.length;\n\n            this._billboards.push(label);\n\n            this._vertexArr = concatTypedArrays(this._vertexArr, data.vertexArr) as Float32Array;\n            this._texCoordArr = concatTypedArrays(this._texCoordArr, data.texCoordArr) as Float32Array;\n            this._gliphParamArr = concatTypedArrays(this._gliphParamArr, data.gliphParamArr) as Float32Array;\n            this._positionHighArr = concatTypedArrays(this._positionHighArr, data.positionHighArr) as Float32Array;\n            this._positionLowArr = concatTypedArrays(this._positionLowArr, data.positionLowArr) as Float32Array;\n            this._sizeArr = concatTypedArrays(this._sizeArr, data.sizeArr) as Float32Array;\n            this._offsetArr = concatTypedArrays(this._offsetArr, data.offsetArr) as Float32Array;\n            this._rgbaArr = concatTypedArrays(this._rgbaArr, data.rgbaArr) as Float32Array;\n            this._rotationArr = concatTypedArrays(this._rotationArr, data.rotationArr) as Float32Array;\n            this._fontIndexArr = concatTypedArrays(this._fontIndexArr, data.fontIndexArr) as Float32Array;\n            this._outlineArr = concatTypedArrays(this._outlineArr, data.outlineArr) as Float32Array;\n            this._outlineColorArr = concatTypedArrays(this._outlineColorArr, data.outlineColorArr) as Float32Array;\n            this._pickingColorArr = concatTypedArrays(this._pickingColorArr, data.pickingColorArr) as Float32Array;\n\n            label.update();\n\n            this.refresh();\n        }\n    }\n\n    public override clear() {\n        // @ts-ignore\n        this._texCoordArr = null;\n        // @ts-ignore\n        this._gliphParamArr = null;\n        // @ts-ignore\n        this._vertexArr = null;\n        // @ts-ignore\n        this._positionHighArr = null;\n        // @ts-ignore\n        this._positionLowArr = null;\n        // @ts-ignore\n        this._sizeArr = null;\n        // @ts-ignore\n        this._offsetArr = null;\n        // @ts-ignore\n        this._rgbaArr = null;\n        // @ts-ignore\n        this._rotationArr = null;\n        // @ts-ignore\n        this._fontIndexArr = null;\n        // @ts-ignore\n        this._outlineArr = null;\n        // @ts-ignore\n        this._outlineColorArr = null;\n\n        this._texCoordArr = new Float32Array([]);\n        this._gliphParamArr = new Float32Array([]);\n        this._vertexArr = new Float32Array([]);\n        this._positionHighArr = new Float32Array([]);\n        this._positionLowArr = new Float32Array([]);\n        this._sizeArr = new Float32Array([]);\n        this._offsetArr = new Float32Array([]);\n        this._rgbaArr = new Float32Array([]);\n        this._rotationArr = new Float32Array([]);\n        this._fontIndexArr = new Float32Array([]);\n        this._outlineArr = new Float32Array([]);\n        this._outlineColorArr = new Float32Array([]);\n\n        this._removeBillboards();\n        this._deleteBuffers();\n        this.refresh();\n    }\n\n    protected override _deleteBuffers() {\n        if (this._renderer) {\n            let gl = this._renderer.handler.gl!;\n            gl.deleteBuffer(this._gliphParamBuffer!);\n            gl.deleteBuffer(this._sizeBuffer!);\n            gl.deleteBuffer(this._fontIndexBuffer!);\n            gl.deleteBuffer(this._texCoordBuffer!);\n            gl.deleteBuffer(this._outlineBuffer!);\n            gl.deleteBuffer(this._outlineColorBuffer!);\n            gl.deleteBuffer(this._positionHighBuffer!);\n            gl.deleteBuffer(this._positionLowBuffer!);\n            gl.deleteBuffer(this._sizeBuffer!);\n            gl.deleteBuffer(this._offsetBuffer!);\n            gl.deleteBuffer(this._rgbaBuffer!);\n            gl.deleteBuffer(this._rotationBuffer!);\n            gl.deleteBuffer(this._vertexBuffer!);\n            gl.deleteBuffer(this._texCoordBuffer!);\n            gl.deleteBuffer(this._pickingColorBuffer!);\n\n            this._gliphParamBuffer = null;\n            this._sizeBuffer = null;\n            this._fontIndexBuffer = null;\n            this._texCoordBuffer = null;\n            this._outlineBuffer = null;\n            this._outlineColorBuffer = null;\n            this._positionHighBuffer = null;\n            this._positionLowBuffer = null;\n            this._sizeBuffer = null;\n            this._offsetBuffer = null;\n            this._rgbaBuffer = null;\n            this._rotationBuffer = null;\n            this._vertexBuffer = null;\n            this._texCoordBuffer = null;\n            this._pickingColorBuffer = null;\n        }\n    }\n\n    public override _displayPASS() {\n        let r = this._renderer!;\n        let h = r.handler;\n        h.programs.label.activate();\n        let sh = h.programs.label._program;\n        let sha = sh.attributes,\n            shu = sh.uniforms;\n\n        let gl = h.gl!,\n            ec = this._entityCollection;\n\n        gl.disable(gl.CULL_FACE);\n\n        gl.uniform1iv(shu.fontTextureArr, r.fontAtlas.samplerArr);\n        gl.uniform4fv(shu.sdfParamsArr, r.fontAtlas.sdfParamsArr);\n        gl.uniformMatrix4fv(shu.viewMatrix, false, r.activeCamera!.getViewMatrix());\n        gl.uniformMatrix4fv(shu.projectionMatrix, false, r.activeCamera!.getProjectionMatrix());\n        gl.uniform3fv(shu.eyePositionHigh, r.activeCamera!.eyeHigh);\n        gl.uniform3fv(shu.eyePositionLow, r.activeCamera!.eyeLow);\n        gl.uniform3fv(shu.scaleByDistance, ec.scaleByDistance);\n        gl.uniform1f(shu.opacity, ec._fadingOpacity);\n        gl.uniform1f(shu.planetRadius, (ec.renderNode as Planet)._planetRadius2 || 0);\n        gl.uniform2fv(shu.viewport, [h.canvas!.clientWidth, h.canvas!.clientHeight]);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._texCoordBuffer!);\n        gl.vertexAttribPointer(sha.a_texCoord, this._texCoordBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._gliphParamBuffer!);\n        gl.vertexAttribPointer(sha.a_gliphParam, this._gliphParamBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer!);\n        gl.vertexAttribPointer(sha.a_vertices, this._vertexBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._positionHighBuffer!);\n        gl.vertexAttribPointer(sha.a_positionsHigh, this._positionHighBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._positionLowBuffer!);\n        gl.vertexAttribPointer(sha.a_positionsLow, this._positionLowBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._sizeBuffer!);\n        gl.vertexAttribPointer(sha.a_size, this._sizeBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._rotationBuffer!);\n        gl.vertexAttribPointer(sha.a_rotation, this._rotationBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._offsetBuffer!);\n        gl.vertexAttribPointer(sha.a_offset, this._offsetBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._fontIndexBuffer!);\n        gl.vertexAttribPointer(sha.a_fontIndex, this._fontIndexBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        //\n        // outline PASS\n        gl.uniform1i(shu.isOutlinePass, 1);\n        gl.uniform1f(shu.depthOffset, ec.polygonOffsetUnits);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._outlineColorBuffer!);\n        gl.vertexAttribPointer(sha.a_rgba, this._outlineColorBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._outlineBuffer!);\n        gl.vertexAttribPointer(sha.a_outline, this._outlineBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.drawArrays(gl.TRIANGLES, 0, this._vertexBuffer!.numItems);\n\n        //\n        // no outline PASS\n        gl.depthFunc(gl.EQUAL);\n        gl.uniform1i(shu.isOutlinePass, 0);\n        gl.uniform1f(shu.depthOffset, ec.polygonOffsetUnits);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._rgbaBuffer!);\n        gl.vertexAttribPointer(sha.a_rgba, this._rgbaBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.drawArrays(gl.TRIANGLES, 0, this._vertexBuffer!.numItems);\n\n        gl.depthFunc(gl.LESS);\n\n        gl.enable(gl.CULL_FACE);\n    }\n\n    protected override _pickingPASS() {\n        let r = this._renderer!;\n        let h = r.handler;\n        h.programs.labelPicking.activate();\n        let sh = h.programs.labelPicking._program;\n        let sha = sh.attributes,\n            shu = sh.uniforms;\n\n        let gl = h.gl!,\n            ec = this._entityCollection;\n\n        let rn = ec.renderNode;\n\n        gl.disable(gl.CULL_FACE);\n\n        gl.uniformMatrix4fv(shu.viewMatrix, false, r.activeCamera!.getViewMatrix());\n        gl.uniformMatrix4fv(shu.projectionMatrix, false, r.activeCamera!.getProjectionMatrix());\n        gl.uniform3fv(shu.eyePositionHigh, r.activeCamera!.eyeHigh);\n        gl.uniform3fv(shu.eyePositionLow, r.activeCamera!.eyeLow);\n        gl.uniform3fv(shu.scaleByDistance, ec.scaleByDistance);\n        gl.uniform1f(shu.opacity, ec._fadingOpacity);\n        gl.uniform1f(shu.planetRadius, (rn as Planet)._planetRadius2 || 0);\n        gl.uniform2fv(shu.viewport, [h.canvas!.clientWidth, h.canvas!.clientHeight]);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._texCoordBuffer!);\n        gl.vertexAttribPointer(sha.a_texCoord, this._texCoordBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._gliphParamBuffer!);\n        gl.vertexAttribPointer(sha.a_gliphParam, this._gliphParamBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer!);\n        gl.vertexAttribPointer(sha.a_vertices, this._vertexBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._positionHighBuffer!);\n        gl.vertexAttribPointer(sha.a_positionsHigh, this._positionHighBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._positionLowBuffer!);\n        gl.vertexAttribPointer(sha.a_positionsLow, this._positionLowBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._sizeBuffer!);\n        gl.vertexAttribPointer(sha.a_size, this._sizeBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._rotationBuffer!);\n        gl.vertexAttribPointer(sha.a_rotation, this._rotationBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._offsetBuffer!);\n        gl.vertexAttribPointer(sha.a_offset, this._offsetBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._pickingColorBuffer!);\n        gl.vertexAttribPointer(sha.a_rgba, this._pickingColorBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.uniform1f(shu.depthOffset, ec.polygonOffsetUnits);\n\n        gl.drawArrays(gl.TRIANGLES, 0, this._vertexBuffer!.numItems);\n\n        gl.enable(gl.CULL_FACE);\n    }\n\n    protected override _removeBillboard(label: Label) {\n\n        let li = label._handlerIndex;\n\n        this._billboards.splice(li, 1);\n\n        let ml = 24 * this._maxLetters;\n        let i = li * ml;\n        this._rgbaArr = spliceTypedArray<Float32Array>(this._rgbaArr, i, ml);\n        this._outlineColorArr = spliceTypedArray<Float32Array>(this._outlineColorArr, i, ml);\n        this._texCoordArr = spliceTypedArray<Float32Array>(this._texCoordArr, i, ml);\n        this._gliphParamArr = spliceTypedArray<Float32Array>(this._gliphParamArr, i, ml);\n\n        ml = 18 * this._maxLetters;\n        i = li * ml;\n        this._positionHighArr = spliceTypedArray<Float32Array>(this._positionHighArr, i, ml);\n        this._positionLowArr = spliceTypedArray<Float32Array>(this._positionLowArr, i, ml);\n        this._offsetArr = spliceTypedArray<Float32Array>(this._offsetArr, i, ml);\n        this._pickingColorArr = spliceTypedArray<Float32Array>(this._pickingColorArr, i, ml);\n\n        ml = 12 * this._maxLetters;\n        i = li * ml;\n        this._vertexArr = spliceTypedArray<Float32Array>(this._vertexArr, i, ml);\n\n        ml = 6 * this._maxLetters;\n        i = li * ml;\n        this._sizeArr = spliceTypedArray<Float32Array>(this._sizeArr, i, ml);\n        this._rotationArr = spliceTypedArray<Float32Array>(this._rotationArr, i, ml);\n        this._fontIndexArr = spliceTypedArray<Float32Array>(this._fontIndexArr, i, ml);\n        this._outlineArr = spliceTypedArray<Float32Array>(this._outlineArr, i, ml);\n\n        this.reindexBillboardsArray(li);\n        this.refresh();\n\n        label._handlerIndex = -1;\n        label._handler = null;\n        label._isReady = false;\n    }\n\n    public setText(index: number, text: string, fontIndex: number, align: number, letterSpacing: number = 0, isRTL: boolean = false) {\n\n        text = text.normalize('NFKC');\n\n        let fa = this._renderer!.fontAtlas.atlasesArr[fontIndex];\n\n        if (!fa) return;\n\n        let i = index * 24 * this._maxLetters;\n        let a = this._texCoordArr,\n            g = this._gliphParamArr;\n\n        let c = 0;\n\n        let len = Math.min(this._maxLetters, text.length);\n        let _rtl_ = 0.0;\n        if (isRTL) {\n            _rtl_ = RTL;\n        }\n\n        let offset = 0.0;\n        let kern = fa.kernings;\n\n        for (c = 0; c < len; c++) {\n            let j = i + c * 24;\n            let char = text[c];\n            let n = fa.get(char.charCodeAt(0)) || fa.get(\" \".charCodeAt(0))!;\n            if (!n) continue;\n            let tc = n.texCoords;\n\n            let m = n.metrics;\n\n            a[j] = tc[0];\n            a[j + 1] = tc[1];\n            a[j + 2] = offset;\n            a[j + 3] = _rtl_;\n\n            a[j + 4] = tc[2];\n            a[j + 5] = tc[3];\n            a[j + 6] = offset;\n            a[j + 7] = _rtl_;\n\n            a[j + 8] = tc[4];\n            a[j + 9] = tc[5];\n            a[j + 10] = offset;\n            a[j + 11] = _rtl_;\n\n            a[j + 12] = tc[6];\n            a[j + 13] = tc[7];\n            a[j + 14] = offset;\n            a[j + 15] = _rtl_;\n\n            a[j + 16] = tc[8];\n            a[j + 17] = tc[9];\n            a[j + 18] = offset;\n            a[j + 19] = _rtl_;\n\n            a[j + 20] = tc[10];\n            a[j + 21] = tc[11];\n            a[j + 22] = offset;\n            a[j + 23] = _rtl_;\n\n            //\n            // Gliph\n            //\n            g[j] = m.nWidth;\n            g[j + 1] = m.nHeight;\n            g[j + 2] = m.nXOffset;\n            g[j + 3] = m.nYOffset;\n\n            g[j + 4] = m.nWidth;\n            g[j + 5] = m.nHeight;\n            g[j + 6] = m.nXOffset;\n            g[j + 7] = m.nYOffset;\n\n            g[j + 8] = m.nWidth;\n            g[j + 9] = m.nHeight;\n            g[j + 10] = m.nXOffset;\n            g[j + 11] = m.nYOffset;\n\n            g[j + 12] = m.nWidth;\n            g[j + 13] = m.nHeight;\n            g[j + 14] = m.nXOffset;\n            g[j + 15] = m.nYOffset;\n\n            g[j + 16] = m.nWidth;\n            g[j + 17] = m.nHeight;\n            g[j + 18] = m.nXOffset;\n            g[j + 19] = m.nYOffset;\n\n            g[j + 20] = m.nWidth;\n            g[j + 21] = m.nHeight;\n            g[j + 22] = m.nXOffset;\n            g[j + 23] = m.nYOffset;\n\n            let k = kern[char.charCodeAt(0)];\n            if (k && text[c + 1]) {\n                let kk = k[text[c + 1].charCodeAt(0)];\n                if (kk) {\n                    offset += m.nAdvance + kk + letterSpacing;\n                } else {\n                    offset += m.nAdvance + letterSpacing;\n                }\n            } else {\n                offset += m.nAdvance + letterSpacing;\n            }\n        }\n\n        // 49/512 - font atlas left border letter offset\n        if (align === ALIGN.CENTER) {\n            offset *= -0.5;\n            for (c = 0; c < len; c++) {\n                let j = i + c * 24;\n                a[j + 2] += offset;\n                a[j + 6] += offset;\n                a[j + 10] += offset;\n                a[j + 14] += offset;\n                a[j + 18] += offset;\n                a[j + 22] += offset;\n            }\n        }\n\n        for (; c < this._maxLetters; c++) {\n            let j = i + c * 24;\n            a[j + 3] = EMPTY;\n            a[j + 7] = EMPTY;\n            a[j + 11] = EMPTY;\n            a[j + 15] = EMPTY;\n            a[j + 19] = EMPTY;\n            a[j + 23] = EMPTY;\n        }\n\n        this._changedBuffers[TEXCOORD_BUFFER] = true;\n    }\n\n    public override setPositionArr(index: number, positionHigh: Vec3, positionLow: Vec3) {\n        let i = index * 18 * this._maxLetters;\n        let a = this._positionHighArr,\n            x = positionHigh.x,\n            y = positionHigh.y,\n            z = positionHigh.z,\n            b = this._positionLowArr,\n            xl = positionLow.x,\n            yl = positionLow.y,\n            zl = positionLow.z;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 18;\n            a[j] = x;\n            a[j + 1] = y;\n            a[j + 2] = z;\n\n            a[j + 3] = x;\n            a[j + 4] = y;\n            a[j + 5] = z;\n\n            a[j + 6] = x;\n            a[j + 7] = y;\n            a[j + 8] = z;\n\n            a[j + 9] = x;\n            a[j + 10] = y;\n            a[j + 11] = z;\n\n            a[j + 12] = x;\n            a[j + 13] = y;\n            a[j + 14] = z;\n\n            a[j + 15] = x;\n            a[j + 16] = y;\n            a[j + 17] = z;\n\n            // low\n            b[j] = xl;\n            b[j + 1] = yl;\n            b[j + 2] = zl;\n\n            b[j + 3] = xl;\n            b[j + 4] = yl;\n            b[j + 5] = zl;\n\n            b[j + 6] = xl;\n            b[j + 7] = yl;\n            b[j + 8] = zl;\n\n            b[j + 9] = xl;\n            b[j + 10] = yl;\n            b[j + 11] = zl;\n\n            b[j + 12] = xl;\n            b[j + 13] = yl;\n            b[j + 14] = zl;\n\n            b[j + 15] = xl;\n            b[j + 16] = yl;\n            b[j + 17] = zl;\n        }\n\n        this._changedBuffers[POSITION_BUFFER] = true;\n    }\n\n    public override setPickingColorArr(index: number, color: Vec3) {\n        let i = index * 18 * this._maxLetters;\n        let a = this._pickingColorArr,\n            x = color.x / 255,\n            y = color.y / 255,\n            z = color.z / 255;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 18;\n            a[j] = x;\n            a[j + 1] = y;\n            a[j + 2] = z;\n\n            a[j + 3] = x;\n            a[j + 4] = y;\n            a[j + 5] = z;\n\n            a[j + 6] = x;\n            a[j + 7] = y;\n            a[j + 8] = z;\n\n            a[j + 9] = x;\n            a[j + 10] = y;\n            a[j + 11] = z;\n\n            a[j + 12] = x;\n            a[j + 13] = y;\n            a[j + 14] = z;\n\n            a[j + 15] = x;\n            a[j + 16] = y;\n            a[j + 17] = z;\n        }\n\n        this._changedBuffers[PICKINGCOLOR_BUFFER] = true;\n    }\n\n    public override setSizeArr(index: number, size: number) {\n        let i = index * 6 * this._maxLetters;\n        let a = this._sizeArr;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 6;\n            a[j] = size;\n            a[j + 1] = size;\n            a[j + 2] = size;\n            a[j + 3] = size;\n            a[j + 4] = size;\n            a[j + 5] = size;\n        }\n\n        this._changedBuffers[SIZE_BUFFER] = true;\n    }\n\n    public override setOffsetArr(index: number, offset: Vec3) {\n        let i = index * 18 * this._maxLetters;\n        let a = this._offsetArr,\n            x = offset.x,\n            y = offset.y,\n            z = offset.z;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 18;\n            a[j] = x;\n            a[j + 1] = y;\n            a[j + 2] = z;\n\n            a[j + 3] = x;\n            a[j + 4] = y;\n            a[j + 5] = z;\n\n            a[j + 6] = x;\n            a[j + 7] = y;\n            a[j + 8] = z;\n\n            a[j + 9] = x;\n            a[j + 10] = y;\n            a[j + 11] = z;\n\n            a[j + 12] = x;\n            a[j + 13] = y;\n            a[j + 14] = z;\n\n            a[j + 15] = x;\n            a[j + 16] = y;\n            a[j + 17] = z;\n        }\n\n        this._changedBuffers[OFFSET_BUFFER] = true;\n    }\n\n    public override setRgbaArr(index: number, rgba: Vec4) {\n        let i = index * 24 * this._maxLetters;\n        let a = this._rgbaArr,\n            x = rgba.x,\n            y = rgba.y,\n            z = rgba.z,\n            w = rgba.w;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 24;\n\n            a[j] = x;\n            a[j + 1] = y;\n            a[j + 2] = z;\n            a[j + 3] = w;\n\n            a[j + 4] = x;\n            a[j + 5] = y;\n            a[j + 6] = z;\n            a[j + 7] = w;\n\n            a[j + 8] = x;\n            a[j + 9] = y;\n            a[j + 10] = z;\n            a[j + 11] = w;\n\n            a[j + 12] = x;\n            a[j + 13] = y;\n            a[j + 14] = z;\n            a[j + 15] = w;\n\n            a[j + 16] = x;\n            a[j + 17] = y;\n            a[j + 18] = z;\n            a[j + 19] = w;\n\n            a[j + 20] = x;\n            a[j + 21] = y;\n            a[j + 22] = z;\n            a[j + 23] = w;\n        }\n\n        this._changedBuffers[RGBA_BUFFER] = true;\n    }\n\n    public setOutlineColorArr(index: number, rgba: Vec4) {\n        let i = index * 24 * this._maxLetters;\n        let a = this._outlineColorArr,\n            x = rgba.x,\n            y = rgba.y,\n            z = rgba.z,\n            w = rgba.w;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 24;\n\n            a[j] = x;\n            a[j + 1] = y;\n            a[j + 2] = z;\n            a[j + 3] = w;\n\n            a[j + 4] = x;\n            a[j + 5] = y;\n            a[j + 6] = z;\n            a[j + 7] = w;\n\n            a[j + 8] = x;\n            a[j + 9] = y;\n            a[j + 10] = z;\n            a[j + 11] = w;\n\n            a[j + 12] = x;\n            a[j + 13] = y;\n            a[j + 14] = z;\n            a[j + 15] = w;\n\n            a[j + 16] = x;\n            a[j + 17] = y;\n            a[j + 18] = z;\n            a[j + 19] = w;\n\n            a[j + 20] = x;\n            a[j + 21] = y;\n            a[j + 22] = z;\n            a[j + 23] = w;\n        }\n\n        this._changedBuffers[OUTLINECOLOR_BUFFER] = true;\n    }\n\n    public setOutlineArr(index: number, outline: number) {\n        let i = index * 6 * this._maxLetters;\n        let a = this._outlineArr;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 6;\n            a[j] = outline;\n            a[j + 1] = outline;\n            a[j + 2] = outline;\n            a[j + 3] = outline;\n            a[j + 4] = outline;\n            a[j + 5] = outline;\n        }\n\n        this._changedBuffers[OUTLINE_BUFFER] = true;\n    }\n\n    public override setRotationArr(index: number, rotation: number) {\n        let i = index * 6 * this._maxLetters;\n        let a = this._rotationArr;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 6;\n            a[j] = rotation;\n            a[j + 1] = rotation;\n            a[j + 2] = rotation;\n            a[j + 3] = rotation;\n            a[j + 4] = rotation;\n            a[j + 5] = rotation;\n        }\n\n        this._changedBuffers[ROTATION_BUFFER] = true;\n    }\n\n    public override setVisibility(index: number, visibility: boolean) {\n        let vArr;\n        if (visibility) {\n            vArr = [0, 0, 0, -1, 1, -1, 1, -1, 1, 0, 0, 0];\n        } else {\n            vArr = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        }\n        this.setVertexArr(index, vArr);\n    }\n\n    public override setVertexArr(index: number, vertexArr: number[] | Float32Array) {\n        let i = index * 12 * this._maxLetters;\n        let a = this._vertexArr;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 12;\n\n            a[j] = vertexArr[0];\n            a[j + 1] = vertexArr[1];\n\n            a[j + 2] = vertexArr[2];\n            a[j + 3] = vertexArr[3];\n\n            a[j + 4] = vertexArr[4];\n            a[j + 5] = vertexArr[5];\n\n            a[j + 6] = vertexArr[6];\n            a[j + 7] = vertexArr[7];\n\n            a[j + 8] = vertexArr[8];\n            a[j + 9] = vertexArr[9];\n\n            a[j + 10] = vertexArr[10];\n            a[j + 11] = vertexArr[11];\n        }\n\n        this._changedBuffers[VERTEX_BUFFER] = true;\n    }\n\n    public setFontIndexArr(index: number, fontIndex: number) {\n        let i = index * 6 * this._maxLetters;\n        let a = this._fontIndexArr;\n\n        for (let q = 0; q < this._maxLetters; q++) {\n            let j = i + q * 6;\n            a[j] = fontIndex;\n            a[j + 1] = fontIndex;\n            a[j + 2] = fontIndex;\n            a[j + 3] = fontIndex;\n            a[j + 4] = fontIndex;\n            a[j + 5] = fontIndex;\n        }\n\n        this._changedBuffers[FONTINDEX_BUFFER] = true;\n    }\n\n    public override createSizeBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._sizeBuffer as WebGLBuffer);\n        this._sizeBuffer = h.createArrayBuffer(this._sizeArr, 1, this._sizeArr.length);\n    }\n\n    public createFontIndexBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._fontIndexBuffer as WebGLBuffer);\n        this._fontIndexBuffer = h.createArrayBuffer(this._fontIndexArr, 1, this._fontIndexArr.length);\n    }\n\n    public override createTexCoordBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._texCoordBuffer as WebGLBuffer);\n        this._texCoordBuffer = h.createArrayBuffer(this._texCoordArr, 4, this._texCoordArr.length / 4);\n\n        h.gl!.deleteBuffer(this._gliphParamBuffer as WebGLBuffer);\n        this._gliphParamBuffer = h.createArrayBuffer(this._gliphParamArr, 4, this._gliphParamArr.length / 4);\n    }\n\n    public createOutlineBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._outlineBuffer as WebGLBuffer);\n        this._outlineBuffer = h.createArrayBuffer(this._outlineArr, 1, this._outlineArr.length);\n    }\n\n    public createOutlineColorBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._outlineColorBuffer as WebGLBuffer);\n        this._outlineColorBuffer = h.createArrayBuffer(this._outlineColorArr, 4, this._outlineColorArr.length / 4);\n    }\n\n    public setMaxLetters(c: number) {\n        this._maxLetters = c;\n        // TODO: ...\n    }\n}\n\nexport {LabelHandler};\n","import { Program } from '../webgl/Program';\n\n//Picking is the same\nexport function pointCloud(): Program {\n    return new Program(\"pointCloud\", {\n        uniforms: {\n            projectionViewMatrix: \"mat4\",\n            opacity: \"float\",\n            pointSize: \"float\"\n        },\n        attributes: {\n            coordinates: \"vec3\",\n            colors: \"vec3\"\n        },\n        vertexShader:\n            `attribute vec3 coordinates;\n            attribute vec4 colors;\n            uniform mat4 projectionViewMatrix;\n            uniform float opacity;\n            uniform float pointSize;\n            varying vec4 color;\n            void main() {\n                color = colors;\n                color.a *= opacity;\n                gl_Position = projectionViewMatrix * vec4(coordinates, 1.0);\n                gl_PointSize = pointSize;\n            }`,\n        fragmentShader:\n            `precision highp float;\n            varying vec4 color;\n            void main(void) {\n                gl_FragColor = color;\n            }`\n    });\n}","import * as shaders from \"../shaders/pointCloud\";\nimport {EntityCollection} from \"./EntityCollection\";\nimport {PointCloud} from \"./PointCloud\";\nimport {Renderer} from \"../renderer/Renderer\";\nimport {RenderNode} from \"../scene/RenderNode\";\n\nclass PointCloudHandler {\n    static __counter__: number = 0;\n    protected __id: number;\n\n    /**\n     * Picking rendering option.\n     * @public\n     * @type {boolean}\n     */\n    public pickingEnabled = true;\n\n    /**\n     * Parent collection\n     * @public\n     * @type {EntityCollection}\n     */\n    public _entityCollection: EntityCollection;\n\n    /**\n     * Renderer\n     * @protected\n     * @type {Renderer|null}\n     */\n    protected _renderer: Renderer | null;\n\n    /**\n     * Point cloud array\n     * @protected\n     * @type {Array.<PointCloud>}\n     */\n    protected _pointClouds: PointCloud[];\n\n    constructor(entityCollection: EntityCollection) {\n\n        this.__id = PointCloudHandler.__counter__++;\n\n        this.pickingEnabled = true;\n        this._entityCollection = entityCollection;\n        this._renderer = null;\n        this._pointClouds = [];\n    }\n\n    protected _initProgram() {\n        if (this._renderer && this._renderer.handler) {\n            if (!this._renderer.handler.programs.pointCloud) {\n                this._renderer.handler.addProgram(shaders.pointCloud());\n            }\n        }\n    }\n\n    public setRenderNode(renderNode: RenderNode) {\n        this._renderer = renderNode.renderer;\n        this._initProgram();\n        for (let i = 0; i < this._pointClouds.length; i++) {\n            this._pointClouds[i].setRenderNode(renderNode);\n        }\n    }\n\n    public add(pointCloud: PointCloud) {\n        if (pointCloud._handlerIndex === -1) {\n            pointCloud._handler = this;\n            pointCloud._handlerIndex = this._pointClouds.length;\n            this._pointClouds.push(pointCloud);\n            this._entityCollection &&\n            this._entityCollection.renderNode &&\n            pointCloud.setRenderNode(this._entityCollection.renderNode);\n        }\n    }\n\n    public remove(pointCloud: PointCloud) {\n\n        let index = pointCloud._handlerIndex;\n        if (index !== -1) {\n\n            pointCloud._deleteBuffers();\n\n            pointCloud._handlerIndex = -1;\n            pointCloud._handler = null;\n            this._pointClouds.splice(index, 1);\n            this._reindexPointCloudArray(index);\n        }\n    }\n\n    protected _reindexPointCloudArray(startIndex: number) {\n        let pc = this._pointClouds;\n        for (let i = startIndex; i < pc.length; i++) {\n            pc[i]._handlerIndex = i;\n        }\n    }\n\n    public draw() {\n        let i = this._pointClouds.length;\n        while (i--) {\n            this._pointClouds[i].draw();\n        }\n    }\n\n    public drawPicking() {\n        if (this.pickingEnabled) {\n            let i = this._pointClouds.length;\n            while (i--) {\n                this._pointClouds[i].drawPicking();\n            }\n        }\n    }\n\n    public clear() {\n        let i = this._pointClouds.length;\n        while (i--) {\n            this._pointClouds[i]._deleteBuffers();\n            this._pointClouds[i]._handler = null;\n            this._pointClouds[i]._handlerIndex = -1;\n        }\n        this._pointClouds.length = 0;\n        this._pointClouds = [];\n    }\n}\n\nexport {PointCloudHandler};\n","import { Program } from '../webgl/Program';\n\nexport function polyline_screen(): Program {\n    return new Program(\"polyline_screen\", {\n        uniforms: {\n            viewport: \"vec2\",\n            proj: \"mat4\",\n            view: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            //uFloatParams: \"vec2\",\n            thickness: \"float\",\n            opacity: \"float\",\n            depthOffset: \"float\"\n        },\n        attributes: {\n            prevHigh: \"vec3\",\n            currentHigh: \"vec3\",\n            nextHigh: \"vec3\",\n\n            prevLow: \"vec3\",\n            currentLow: \"vec3\",\n            nextLow: \"vec3\",\n\n            order: \"float\",\n\n            color: \"vec4\"\n        },\n\n        vertexShader:\n            `precision highp float;\n\n                attribute vec3 prevHigh;\n                attribute vec3 currentHigh;\n                attribute vec3 nextHigh;\n\n                attribute vec3 prevLow;\n                attribute vec3 currentLow;\n                attribute vec3 nextLow;\n\n                attribute float order;\n\n                attribute vec4 color;\n\n                uniform float thickness;\n                uniform mat4 proj;\n                uniform mat4 view;\n                uniform vec2 viewport;\n                uniform vec3 eyePositionHigh;\n                uniform vec3 eyePositionLow;\n                uniform float opacity;\n                uniform float depthOffset;\n\n                varying vec4 vColor;\n                varying vec3 vPos;\n                varying vec3 uCamPos;\n\n                const float NEAR = -1.0;\n\n                vec2 getIntersection(vec2 start1, vec2 end1, vec2 start2, vec2 end2){\n                    vec2 dir = end2 - start2;\n                    vec2 perp = vec2(-dir.y, dir.x);\n                    float d2 = dot(perp, start2);\n                    float seg = dot(perp, start1) - d2;\n                    float prl = seg - dot(perp, end1) + d2;\n                    if(prl > -1.0 && prl < 1.0){\n                        return start1;\n                    }\n                    float u = seg / prl;\n                    return start1 + u * (end1 - start1);\n                }\n\n                vec2 project(vec4 p){\n                    return (0.5 * p.xyz / p.w + 0.5).xy * viewport;\n                }\n\n                void main(){\n\n                    uCamPos = eyePositionHigh + eyePositionLow;\n\n                    vColor = vec4(color.rgb, color.a * opacity);\n\n                    vec3 current = currentHigh + currentLow;\n\n                    vPos = current;\n\n                    mat4 viewMatrixRTE = view;\n                    viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                    vec3 highDiff, lowDiff;\n\n                    highDiff = currentHigh - eyePositionHigh;\n                    lowDiff = currentLow - eyePositionLow;\n                    vec4 vCurrent = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n\n                    highDiff = prevHigh - eyePositionHigh;\n                    lowDiff = prevLow - eyePositionLow;\n                    vec4 vPrev = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n\n                    highDiff = nextHigh - eyePositionHigh;\n                    lowDiff = nextLow - eyePositionLow;\n                    vec4 vNext = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n\n                    /*Clip near plane, the point behind view plane*/\n                    if(vCurrent.z > NEAR) {\n                        if(vPrev.z < NEAR && abs(order) == 1.0){\n                            vCurrent = vPrev + (vCurrent - vPrev) * (NEAR - vPrev.z) / (vCurrent.z - vPrev.z);\n                        } else if(vNext.z < NEAR && abs(order) == 2.0){\n                            vCurrent = vNext + (vCurrent - vNext) * (NEAR - vNext.z) / (vCurrent.z - vNext.z);\n                        }\n                    }\n\n                    vec4 dCurrent = proj * vCurrent;\n                    vec2 _next = project(proj * vNext);\n                    vec2 _prev = project(proj * vPrev);\n                    vec2 _current = project(dCurrent);\n\n                    if(_prev == _current){\n                        if(_next == _current){\n                            _next = _current + vec2(1.0, 0.0);\n                            _prev = _current - _next;\n                        }else{\n                            _prev = _current + normalize(_current - _next);\n                        }\n                    }\n\n                    if(_next == _current){\n                        _next = _current + normalize(_current - _prev);\n                    }\n\n                    vec2 sNext = _next,\n                         sCurrent = _current,\n                         sPrev = _prev;\n\n                    vec2 dirNext = normalize(sNext - sCurrent);\n                    vec2 dirPrev = normalize(sPrev - sCurrent);\n                    float dotNP = dot(dirNext, dirPrev);\n\n                    vec2 normalNext = normalize(vec2(-dirNext.y, dirNext.x));\n                    vec2 normalPrev = normalize(vec2(dirPrev.y, -dirPrev.x));\n\n                    float d = thickness * sign(order);\n\n                    vec2 m;\n                    if(dotNP >= 0.99991){\n                        m = sCurrent - normalPrev * d;\n                    }else{\n                        m = getIntersection( sCurrent + normalPrev * d, sPrev + normalPrev * d,\n                                sCurrent + normalNext * d, sNext + normalNext * d );\n\n                        if( dotNP > 0.5 && dot(dirNext + dirPrev, m - sCurrent) < 0.0 ){\n                            float occw = order * sign(dirNext.x * dirPrev.y - dirNext.y * dirPrev.x);\n                            if(occw == -1.0){\n                                m = sCurrent + normalPrev * d;\n                            }else if(occw == 1.0){\n                                m = sCurrent + normalNext * d;\n                            }else if(occw == -2.0){\n                                m = sCurrent + normalNext * d;\n                            }else if(occw == 2.0){\n                                m = sCurrent + normalPrev * d;\n                            }\n                        }else if(distance(sCurrent, m) > min(distance(sCurrent, sNext), distance(sCurrent, sPrev))){\n                            m = sCurrent + normalNext * d;\n                        }\n                    }\n\n                    gl_Position = vec4((2.0 * m / viewport - 1.0) * dCurrent.w, dCurrent.z + depthOffset, dCurrent.w);\n                }`,\n\n        fragmentShader:\n            `precision highp float;\n                //uniform vec2 uFloatParams;\n                varying vec3 uCamPos;\n                varying vec4 vColor;\n                varying vec3 vPos;\n                void main() {\n                    vec3 look = vPos - uCamPos;\n                    float lookLength = length(look);\n                    //float a = vColor.a * step(lookLength, sqrt(dot(uCamPos,uCamPos) - uFloatParams[0]) + sqrt(dot(vPos,vPos) - uFloatParams[0]));\n                    float a = vColor.a;\n                    gl_FragColor = vec4(vColor.rgb, a);\n                }`\n    });\n}\n\nexport function polyline_picking(): Program {\n    return new Program(\"polyline_picking\", {\n        uniforms: {\n            viewport: \"vec2\",\n            proj: \"mat4\",\n            view: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            //uFloatParams: \"vec2\",\n            color: \"vec4\",\n            thickness: \"float\",\n            depthOffset: \"float\"\n        },\n        attributes: {\n            prevHigh: \"vec3\",\n            currentHigh: \"vec3\",\n            nextHigh: \"vec3\",\n\n            prevLow: \"vec3\",\n            currentLow: \"vec3\",\n            nextLow: \"vec3\",\n\n            order: \"float\"\n        },\n\n        vertexShader:\n            `precision highp float;\n                \n                attribute vec3 prevHigh;\n                attribute vec3 currentHigh;\n                attribute vec3 nextHigh;\n                \n                attribute vec3 prevLow;\n                attribute vec3 currentLow;\n                attribute vec3 nextLow;\n\n                attribute float order;\n\n                uniform float thickness;\n                uniform vec4 color;\n                uniform mat4 proj;\n                uniform mat4 view;\n                uniform vec2 viewport;\n                uniform vec3 eyePositionHigh;\n                uniform vec3 eyePositionLow;\n                uniform float depthOffset;\n\n                varying vec4 vColor;\n                varying vec3 vPos;\n                varying vec3 uCamPos;\n               \n                \n                const float NEAR = -1.0;\n                \n                vec2 getIntersection(vec2 start1, vec2 end1, vec2 start2, vec2 end2){\n                    vec2 dir = end2 - start2;\n                    vec2 perp = vec2(-dir.y, dir.x);\n                    float d2 = dot(perp, start2);\n                    float seg = dot(perp, start1) - d2;\n                    float prl = seg - dot(perp, end1) + d2;\n                    if(prl > -1.0 && prl < 1.0){\n                        return start1;\n                    }\n                    float u = seg / prl;\n                    return start1 + u * (end1 - start1);\n                }\n                \n                vec2 project(vec4 p){\n                    return (0.5 * p.xyz / p.w + 0.5).xy * viewport;\n                }\n                \n                void main(){\n\n                    uCamPos = eyePositionHigh + eyePositionLow;\n\n                    vColor = color;\n\n                    vec3 current = currentHigh + currentLow;\n\n                    vPos = current;                    \n\n                    vec3 highDiff, lowDiff;\n\n                    mat4 viewMatrixRTE = view;\n                    viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                    highDiff = currentHigh - eyePositionHigh;\n                    lowDiff = currentLow - eyePositionLow;\n                    vec4 vCurrent = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n\n                    highDiff = prevHigh - eyePositionHigh;\n                    lowDiff = prevLow - eyePositionLow;    \n                    vec4 vPrev = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n\n                    highDiff = nextHigh - eyePositionHigh;\n                    lowDiff = nextLow - eyePositionLow;    \n                    vec4 vNext = viewMatrixRTE * vec4(highDiff + lowDiff, 1.0);\n\n                    /*Clip near plane*/\n                    if(vCurrent.z > NEAR) {\n                        if(vPrev.z < NEAR && abs(order) == 1.0){\n                            vCurrent = vPrev + (vCurrent - vPrev) * (NEAR - vPrev.z) / (vCurrent.z - vPrev.z);\n                        } else if(vNext.z < NEAR && abs(order) == 2.0){\n                            vCurrent = vNext + (vCurrent - vNext) * (NEAR - vNext.z) / (vCurrent.z - vNext.z);\n                        }\n                    }\n                    \n                    vec4 dCurrent = proj * vCurrent;\n                    vec2 _next = project(proj * vNext);\n                    vec2 _prev = project(proj * vPrev);\n                    vec2 _current = project(dCurrent);\n                    if(_prev == _current){\n                        if(_next == _current){\n                            _next = _current + vec2(1.0, 0.0);\n                            _prev = _current - _next;\n                        }else{\n                            _prev = _current + normalize(_current - _next);\n                        }\n                    }\n                    if(_next == _current){\n                        _next = _current + normalize(_current - _prev);\n                    }\n                    \n                    vec2 sNext = _next,\n                         sCurrent = _current,\n                         sPrev = _prev;\n\n                    vec2 dirNext = normalize(sNext - sCurrent);\n                    vec2 dirPrev = normalize(sPrev - sCurrent);\n                    float dotNP = dot(dirNext, dirPrev);\n                    \n                    vec2 normalNext = normalize(vec2(-dirNext.y, dirNext.x));\n                    vec2 normalPrev = normalize(vec2(dirPrev.y, -dirPrev.x));\n                    \n                    float d = thickness * sign(order);\n                    \n                    vec2 m;\n                    if(dotNP >= 0.99991){\n                        m = sCurrent - normalPrev * d;\n                    }else{\n                        m = getIntersection( sCurrent + normalPrev * d, sPrev + normalPrev * d,\n                                sCurrent + normalNext * d, sNext + normalNext * d );\n                        \n                        if( dotNP > 0.5 && dot(dirNext + dirPrev, m - sCurrent) < 0.0 ){\n                            float occw = order * sign(dirNext.x * dirPrev.y - dirNext.y * dirPrev.x);\n                            if(occw == -1.0){\n                                m = sCurrent + normalPrev * d;\n                            }else if(occw == 1.0){\n                                m = sCurrent + normalNext * d;\n                            }else if(occw == -2.0){\n                                m = sCurrent + normalNext * d;\n                            }else if(occw == 2.0){\n                                m = sCurrent + normalPrev * d;\n                            }\n                        }\n                        else if(distance(sCurrent, m) > min(distance(sCurrent, sNext), distance(sCurrent, sPrev))){\n                            m = sCurrent + normalNext * d;\n                        }\n                    }\n                    gl_Position = vec4((2.0 * m / viewport - 1.0) * dCurrent.w, dCurrent.z + depthOffset, dCurrent.w);\n                }`,\n\n        fragmentShader:\n            `precision highp float;\n                //uniform vec2 uFloatParams;\n                varying vec3 uCamPos;\n                varying vec4 vColor;\n                varying vec3 vPos;\n                void main() {\n                    vec3 look = vPos - uCamPos;\n                    float lookLength = length(look);\n                    //float a = vColor.a * step(lookLength, sqrt(dot(uCamPos,uCamPos) - uFloatParams[0]) + sqrt(dot(vPos,vPos) - uFloatParams[0]));\n                    float a = vColor.a;                    \n                    gl_FragColor = vec4(vColor.rgb, a);\n                }`\n    });\n}","import * as shaders from '../shaders/polyline';\nimport {EntityCollection} from \"./EntityCollection\";\nimport {Polyline} from \"./Polyline\";\nimport {Renderer} from \"../renderer/Renderer\";\nimport {RenderNode} from \"../scene/RenderNode\";\n\nclass PolylineHandler {\n    static __counter__: number = 0;\n    protected __id: number;\n    public _entityCollection: EntityCollection;\n    public pickingEnabled: boolean;\n    protected _renderer: Renderer | null;\n    protected _polylines: Polyline[];\n\n    constructor(entityCollection: EntityCollection) {\n\n        this.__id = PolylineHandler.__counter__++;\n\n        this._entityCollection = entityCollection;\n\n        this._renderer = null;\n\n        this._polylines = [];\n\n        this.pickingEnabled = true;\n    }\n\n    protected _initProgram() {\n        if (this._renderer && this._renderer.handler) {\n            if (!this._renderer.handler.programs.polyline_screen) {\n                this._renderer.handler.addProgram(shaders.polyline_screen());\n            }\n            if (!this._renderer.handler.programs.polyline_picking) {\n                this._renderer.handler.addProgram(shaders.polyline_picking());\n            }\n        }\n    }\n\n    public setRenderNode(renderNode: RenderNode) {\n        this._renderer = renderNode.renderer;\n        this._initProgram();\n        for (let i = 0; i < this._polylines.length; i++) {\n            this._polylines[i].setRenderNode(renderNode);\n        }\n    }\n\n    public add(polyline: Polyline) {\n        if (polyline._handlerIndex === -1) {\n            polyline._handler = this;\n            polyline._handlerIndex = this._polylines.length;\n            this._polylines.push(polyline);\n            this._entityCollection && this._entityCollection.renderNode &&\n            polyline.setRenderNode(this._entityCollection.renderNode);\n        }\n    }\n\n    public remove(polyline: Polyline) {\n        let index = polyline._handlerIndex;\n        if (index !== -1) {\n            polyline._deleteBuffers();\n            polyline._handlerIndex = -1;\n            polyline._handler = null;\n            this._polylines.splice(index, 1);\n            this.reindexPolylineArray(index);\n        }\n    }\n\n    public reindexPolylineArray(startIndex: number) {\n        let ls = this._polylines;\n        for (let i = startIndex; i < ls.length; i++) {\n            ls[i]._handlerIndex = i;\n        }\n    }\n\n    public draw() {\n        let i = this._polylines.length;\n        while (i--) {\n            this._polylines[i].draw();\n        }\n    }\n\n    public drawPicking() {\n        if (this.pickingEnabled) {\n            let i = this._polylines.length;\n            while (i--) {\n                this._polylines[i].drawPicking();\n            }\n        }\n    }\n\n    public clear() {\n        let i = this._polylines.length;\n        while (i--) {\n            this._polylines[i]._deleteBuffers();\n            this._polylines[i]._handler = null;\n            this._polylines[i]._handlerIndex = -1;\n        }\n        this._polylines.length = 0;\n        this._polylines = [];\n    }\n}\n\nexport {PolylineHandler};","import {Program} from '../webgl/Program';\n\nexport function rayScreen(): Program {\n    return new Program(\"rayScreen\", {\n        uniforms: {\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            resolution: \"float\",\n            uOpacity: \"float\"\n        },\n        attributes: {\n            a_vertices: \"vec2\",\n            a_startPosHigh: \"vec3\",\n            a_startPosLow: \"vec3\",\n            a_endPosHigh: \"vec3\",\n            a_endPosLow: \"vec3\",\n            a_thickness: \"float\",\n            a_rgba: \"vec4\"\n        },\n        vertexShader:\n            `precision highp float;\n\n            attribute vec4 a_rgba;\n            attribute vec3 a_startPosHigh;\n            attribute vec3 a_startPosLow;\n            attribute vec3 a_endPosHigh;\n            attribute vec3 a_endPosLow;\n            attribute vec2 a_vertices;\n            attribute float a_thickness;\n\n            varying vec4 v_rgba;\n\n            uniform mat4 viewMatrix;\n            uniform mat4 projectionMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float resolution;\n            uniform float uOpacity;\n\n            void main() {\n\n                v_rgba = vec4(a_rgba.rgb, a_rgba.a * uOpacity);\n\n                vec3 v = (a_endPosHigh - a_startPosHigh) + (a_endPosLow - a_startPosLow);\n\n                vec3 look = (a_startPosHigh - eyePositionHigh) + (a_startPosLow - eyePositionLow) + v * a_vertices.y;\n                vec3 up = normalize(normalize(v));\n                vec3 right = normalize(cross(look,up));\n \n                float dist = dot(look, vec3(viewMatrix[0][2], viewMatrix[1][2], viewMatrix[2][2]));\n                float focalSize = 2.0 * dist * resolution;\n                vec3 vert = right * a_thickness * focalSize * a_vertices.x;\n\n                vec3 highDiff;\n                if(a_vertices.y == 0.0){\n                    highDiff = a_startPosHigh - eyePositionHigh;\n                    vert += a_startPosLow - eyePositionLow;\n                }else{\n                    highDiff = a_endPosHigh - eyePositionHigh;\n                    vert += a_endPosLow - eyePositionLow;\n                }\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n                \n                // Hack for iMac M1, looks like it doesnt \n                // work correctly with zeroes in highDiff\n                // if(length(highDiff) < 1.0){\n                //     highDiff = vec3(0.0);\n                // }\n                \n                gl_Position = projectionMatrix * viewMatrixRTE * vec4(highDiff * step(1.0, length(highDiff)) + vert, 1.0);\n            }`,\n        fragmentShader:\n            `precision highp float;\n            varying vec4 v_rgba;\n            void main () {\n                gl_FragColor = v_rgba;\n            }`\n    });\n}\n","import * as shaders from \"../shaders/ray\";\nimport {concatArrays, makeArrayTyped, spliceArray, TypedArray} from \"../utils/shared\";\nimport {EntityCollection} from \"./EntityCollection\";\nimport {Ray} from \"./Ray\";\nimport {Renderer} from \"../renderer/Renderer\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Vec4} from \"../math/Vec4\";\nimport {WebGLBufferExt} from \"../webgl/Handler\";\n\nconst PICKINGCOLOR_BUFFER = 0;\nconst START_POSITION_BUFFER = 1;\nconst END_POSITION_BUFFER = 2;\nconst RGBA_BUFFER = 3;\nconst THICKNESS_BUFFER = 4;\nconst VERTEX_BUFFER = 5;\n\n/*\n * og.RayHandler\n *\n *\n */\nclass RayHandler {\n\n    static __counter__: number = 0;\n\n    protected __id: number;\n\n    /**\n     * Picking rendering option.\n     * @public\n     * @type {boolean}\n     */\n    public pickingEnabled: boolean;\n\n    protected _entityCollection: EntityCollection;\n\n    protected _renderer: Renderer | null;\n\n    protected _rays: Ray[];\n\n    protected _vertexBuffer: WebGLBufferExt | null;\n    protected _startPositionHighBuffer: WebGLBufferExt | null;\n    protected _startPositionLowBuffer: WebGLBufferExt | null;\n    protected _endPositionHighBuffer: WebGLBufferExt | null;\n    protected _endPositionLowBuffer: WebGLBufferExt | null;\n    protected _thicknessBuffer: WebGLBufferExt | null;\n    protected _rgbaBuffer: WebGLBufferExt | null;\n    protected _pickingColorBuffer: WebGLBufferExt | null;\n\n    protected _vertexArr: TypedArray | number[];\n    protected _startPositionHighArr: TypedArray | number[];\n    protected _startPositionLowArr: TypedArray | number[];\n    protected _endPositionHighArr: TypedArray | number[];\n    protected _endPositionLowArr: TypedArray | number[];\n    protected _thicknessArr: TypedArray | number[];\n    protected _rgbaArr: TypedArray | number[];\n    protected _pickingColorArr: TypedArray | number[];\n\n    protected _buffersUpdateCallbacks: Function[];\n    protected _changedBuffers: boolean[];\n\n    constructor(entityCollection: EntityCollection) {\n\n        this.__id = RayHandler.__counter__++;\n\n        /**\n         * Picking rendering option.\n         * @public\n         * @type {boolean}\n         */\n        this.pickingEnabled = true;\n\n        this._entityCollection = entityCollection;\n\n        this._renderer = null;\n\n        this._rays = [];\n\n        this._vertexBuffer = null;\n        this._startPositionHighBuffer = null;\n        this._startPositionLowBuffer = null;\n        this._endPositionHighBuffer = null;\n        this._endPositionLowBuffer = null;\n        this._thicknessBuffer = null;\n        this._rgbaBuffer = null;\n        this._pickingColorBuffer = null;\n\n        this._vertexArr = [];\n        this._startPositionHighArr = [];\n        this._startPositionLowArr = [];\n        this._endPositionHighArr = [];\n        this._endPositionLowArr = [];\n        this._thicknessArr = [];\n        this._rgbaArr = [];\n        this._pickingColorArr = [];\n\n        this._buffersUpdateCallbacks = [];\n        this._buffersUpdateCallbacks[VERTEX_BUFFER] = this.createVertexBuffer;\n        this._buffersUpdateCallbacks[START_POSITION_BUFFER] = this.createStartPositionBuffer;\n        this._buffersUpdateCallbacks[END_POSITION_BUFFER] = this.createEndPositionBuffer;\n        this._buffersUpdateCallbacks[THICKNESS_BUFFER] = this.createThicknessBuffer;\n        this._buffersUpdateCallbacks[RGBA_BUFFER] = this.createRgbaBuffer;\n        this._buffersUpdateCallbacks[PICKINGCOLOR_BUFFER] = this.createPickingColorBuffer;\n\n        this._changedBuffers = new Array(this._buffersUpdateCallbacks.length);\n    }\n\n    static concArr(dest: number[], curr: number[]) {\n        for (let i = 0; i < curr.length; i++) {\n            dest.push(curr[i]);\n        }\n    }\n\n    public initProgram() {\n        if (this._renderer && this._renderer.handler) {\n            if (!this._renderer.handler.programs.rayScreen) {\n                this._renderer.handler.addProgram(shaders.rayScreen());\n            }\n\n            // @todo: ray picking\n            // if (!this._renderer.handler.programs.billboardPicking) {\n            //     this._renderer.handler.addProgram(shaders.billboardPicking());\n            // }\n        }\n    }\n\n    public setRenderer(renderer: Renderer) {\n        this._renderer = renderer;\n        this.initProgram();\n    }\n\n    public refresh() {\n        let i = this._changedBuffers.length;\n        while (i--) {\n            this._changedBuffers[i] = true;\n        }\n    }\n\n    protected _removeRays() {\n        let i = this._rays.length;\n        while (i--) {\n            let ri = this._rays[i];\n            ri._handlerIndex = -1;\n            ri._handler = null;\n        }\n        this._rays.length = 0;\n        this._rays = [];\n    }\n\n    public clear() {\n        //@ts-ignore\n        this._vertexArr = null;\n        //@ts-ignore\n        this._startPositionHighArr = null;\n        //@ts-ignore\n        this._startPositionLowArr = null;\n        //@ts-ignore\n        this._endPositionHighArr = null;\n        //@ts-ignore\n        this._endPositionLowArr = null;\n        //@ts-ignore\n        this._thicknessArr = null;\n        //@ts-ignore\n        this._rgbaArr = null;\n\n        this._vertexArr = new Float32Array([]);\n        this._startPositionHighArr = new Float32Array([]);\n        this._startPositionLowArr = new Float32Array([]);\n        this._endPositionHighArr = new Float32Array([]);\n        this._endPositionLowArr = new Float32Array([]);\n        this._thicknessArr = new Float32Array([]);\n        this._rgbaArr = new Float32Array([]);\n\n        this._removeRays();\n        this._deleteBuffers();\n        this.refresh();\n    }\n\n    protected _deleteBuffers() {\n        if (this._renderer) {\n            let gl = this._renderer.handler.gl;\n\n            if (gl) {\n                gl.deleteBuffer(this._startPositionHighBuffer as WebGLBuffer);\n                gl.deleteBuffer(this._startPositionLowBuffer as WebGLBuffer);\n                gl.deleteBuffer(this._endPositionHighBuffer as WebGLBuffer);\n                gl.deleteBuffer(this._endPositionLowBuffer as WebGLBuffer);\n                gl.deleteBuffer(this._thicknessBuffer as WebGLBuffer);\n                gl.deleteBuffer(this._rgbaBuffer as WebGLBuffer);\n                gl.deleteBuffer(this._vertexBuffer as WebGLBuffer);\n            }\n\n            this._startPositionHighBuffer = null;\n            this._startPositionLowBuffer = null;\n            this._endPositionHighBuffer = null;\n            this._endPositionLowBuffer = null;\n            this._thicknessBuffer = null;\n            this._rgbaBuffer = null;\n            this._vertexBuffer = null;\n        }\n    }\n\n    public update() {\n        if (this._renderer) {\n            let i = this._changedBuffers.length;\n            while (i--) {\n                if (this._changedBuffers[i]) {\n                    this._buffersUpdateCallbacks[i].call(this);\n                    this._changedBuffers[i] = false;\n                }\n            }\n        }\n    }\n\n    public add(ray: Ray) {\n        if (ray._handlerIndex == -1) {\n            ray._handler = this;\n            ray._handlerIndex = this._rays.length;\n            this._rays.push(ray);\n            this._addRayToArrays(ray);\n            this.refresh();\n        }\n    }\n\n    protected _addRayToArrays(ray: Ray) {\n        if (ray.getVisibility()) {\n            this._vertexArr = concatArrays(\n                this._vertexArr,\n                [-0.5, 1.0, -0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 1.0, -0.5, 1.0]\n            );\n        } else {\n            this._vertexArr = concatArrays(\n                this._vertexArr,\n                [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\n            );\n        }\n\n        let x = ray._startPositionHigh.x,\n            y = ray._startPositionHigh.y,\n            z = ray._startPositionHigh.z;\n        this._startPositionHighArr = concatArrays(this._startPositionHighArr, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n\n        x = ray._startPositionLow.x;\n        y = ray._startPositionLow.y;\n        z = ray._startPositionLow.z;\n        this._startPositionLowArr = concatArrays(this._startPositionLowArr, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n\n        x = ray._endPositionHigh.x;\n        y = ray._endPositionHigh.y;\n        z = ray._endPositionHigh.z;\n        this._endPositionHighArr = concatArrays(this._endPositionHighArr, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n\n        x = ray._endPositionLow.x;\n        y = ray._endPositionLow.y;\n        z = ray._endPositionLow.z;\n        this._endPositionLowArr = concatArrays(this._endPositionLowArr, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n\n        x = ray._thickness;\n        this._thicknessArr = concatArrays(this._thicknessArr, [x, x, x, x, x, x]);\n\n        let r0 = ray._startColor.x,\n            g0 = ray._startColor.y,\n            b0 = ray._startColor.z,\n            a0 = ray._startColor.w,\n            r1 = ray._endColor.x,\n            g1 = ray._endColor.y,\n            b1 = ray._endColor.z,\n            a1 = ray._endColor.w;\n        this._rgbaArr = concatArrays(this._rgbaArr, [\n            r1, g1, b1, a1,\n            r0, g0, b0, a0,\n            r0, g0, b0, a0,\n            r0, g0, b0, a0,\n            r1, g1, b1, a1,\n            r1, g1, b1, a1\n        ]);\n\n        x = ray._entity!._pickingColor.x / 255;\n        y = ray._entity!._pickingColor.y / 255;\n        z = ray._entity!._pickingColor.z / 255;\n        this._pickingColorArr = concatArrays(this._pickingColorArr, [x, y, z, x, y, z, x, y, z, x, y, z, x, y, z, x, y, z]);\n    }\n\n    protected _displayPASS() {\n        let r = this._renderer!;\n        let h = r.handler;\n        h.programs.rayScreen.activate();\n        let sh = h.programs.rayScreen._program;\n        let sha = sh.attributes,\n            shu = sh.uniforms;\n\n        let gl = h.gl!,\n            ec = this._entityCollection;\n\n        //gl.polygonOffset(ec.polygonOffsetFactor, ec.polygonOffsetUnits);\n\n        gl.disable(gl.CULL_FACE);\n\n        gl.uniform1f(shu.uOpacity, ec._fadingOpacity);\n\n        gl.uniformMatrix4fv(shu.viewMatrix, false, r.activeCamera!.getViewMatrix());\n        gl.uniformMatrix4fv(shu.projectionMatrix, false, r.activeCamera!.getProjectionMatrix());\n\n        gl.uniform3fv(shu.eyePositionHigh, r.activeCamera!.eyeHigh);\n        gl.uniform3fv(shu.eyePositionLow, r.activeCamera!.eyeLow);\n\n        gl.uniform1f(shu.resolution, r.activeCamera!._tanViewAngle_hradOneByHeight);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._startPositionHighBuffer!);\n        gl.vertexAttribPointer(sha.a_startPosHigh, this._startPositionHighBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._startPositionLowBuffer!);\n        gl.vertexAttribPointer(sha.a_startPosLow, this._startPositionLowBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._endPositionHighBuffer!);\n        gl.vertexAttribPointer(sha.a_endPosHigh, this._endPositionHighBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._endPositionLowBuffer!);\n        gl.vertexAttribPointer(sha.a_endPosLow, this._endPositionLowBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._rgbaBuffer!);\n        gl.vertexAttribPointer(sha.a_rgba, this._rgbaBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._thicknessBuffer!);\n        gl.vertexAttribPointer(sha.a_thickness, this._thicknessBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer!);\n        gl.vertexAttribPointer(sha.a_vertices, this._vertexBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.drawArrays(gl.TRIANGLES, 0, this._vertexBuffer!.numItems);\n\n        gl.enable(gl.CULL_FACE);\n    }\n\n    protected _pickingPASS() {\n        // ...\n    }\n\n    public draw() {\n        if (this._rays.length) {\n            this.update();\n            this._displayPASS();\n        }\n    }\n\n    public drawPicking() {\n        if (this._rays.length && this.pickingEnabled) {\n            this._pickingPASS();\n        }\n    }\n\n    public reindexRaysArray(startIndex: number) {\n        let r = this._rays;\n        for (let i = startIndex; i < r.length; i++) {\n            r[i]._handlerIndex = i;\n        }\n    }\n\n    protected _removeRay(ray: Ray) {\n\n        let ri = ray._handlerIndex;\n\n        this._rays.splice(ri, 1);\n\n        let i = ri * 24;\n        this._rgbaArr = spliceArray(this._rgbaArr, i, 24);\n\n        i = ri * 18;\n        this._startPositionHighArr = spliceArray(this._startPositionHighArr, i, 18);\n        this._startPositionLowArr = spliceArray(this._startPositionLowArr, i, 18);\n        this._endPositionHighArr = spliceArray(this._endPositionHighArr, i, 18);\n        this._endPositionLowArr = spliceArray(this._endPositionLowArr, i, 18);\n        this._pickingColorArr = spliceArray(this._pickingColorArr, i, 18);\n\n        i = ri * 12;\n        this._vertexArr = spliceArray(this._vertexArr, i, 12);\n\n        i = ri * 6;\n        this._thicknessArr = spliceArray(this._thicknessArr, i, 6);\n\n        this.reindexRaysArray(ri);\n        this.refresh();\n\n        ray._handlerIndex = -1;\n        ray._handler = null;\n    }\n\n    public remove(ray: Ray) {\n        if (ray._handler && this.__id === ray._handler.__id) {\n            this._removeRay(ray);\n        }\n    }\n\n    public setStartPositionArr(index: number, positionHigh: Vec3, positionLow: Vec3) {\n        let i = index * 18;\n\n        // High\n        let a = this._startPositionHighArr,\n            x = positionHigh.x,\n            y = positionHigh.y,\n            z = positionHigh.z;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n\n        a[i + 3] = x;\n        a[i + 4] = y;\n        a[i + 5] = z;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n        a[i + 8] = z;\n\n        a[i + 9] = x;\n        a[i + 10] = y;\n        a[i + 11] = z;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n\n        a[i + 15] = x;\n        a[i + 16] = y;\n        a[i + 17] = z;\n\n        // Low\n        a = this._startPositionLowArr;\n        x = positionLow.x;\n        y = positionLow.y;\n        z = positionLow.z;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n\n        a[i + 3] = x;\n        a[i + 4] = y;\n        a[i + 5] = z;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n        a[i + 8] = z;\n\n        a[i + 9] = x;\n        a[i + 10] = y;\n        a[i + 11] = z;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n\n        a[i + 15] = x;\n        a[i + 16] = y;\n        a[i + 17] = z;\n\n        this._changedBuffers[START_POSITION_BUFFER] = true;\n    }\n\n    public setEndPositionArr(index: number, positionHigh: Vec3, positionLow: Vec3) {\n        let i = index * 18;\n\n        // High\n        let a = this._endPositionHighArr,\n            x = positionHigh.x,\n            y = positionHigh.y,\n            z = positionHigh.z;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n\n        a[i + 3] = x;\n        a[i + 4] = y;\n        a[i + 5] = z;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n        a[i + 8] = z;\n\n        a[i + 9] = x;\n        a[i + 10] = y;\n        a[i + 11] = z;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n\n        a[i + 15] = x;\n        a[i + 16] = y;\n        a[i + 17] = z;\n\n        // Low\n        a = this._endPositionLowArr;\n        x = positionLow.x;\n        y = positionLow.y;\n        z = positionLow.z;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n\n        a[i + 3] = x;\n        a[i + 4] = y;\n        a[i + 5] = z;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n        a[i + 8] = z;\n\n        a[i + 9] = x;\n        a[i + 10] = y;\n        a[i + 11] = z;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n\n        a[i + 15] = x;\n        a[i + 16] = y;\n        a[i + 17] = z;\n\n        this._changedBuffers[END_POSITION_BUFFER] = true;\n    }\n\n    public setPickingColorArr(index: number, color: Vec3) {\n        let i = index * 18;\n        let a = this._pickingColorArr,\n            x = color.x / 255,\n            y = color.y / 255,\n            z = color.z / 255;\n\n        a[i] = x;\n        a[i + 1] = y;\n        a[i + 2] = z;\n\n        a[i + 3] = x;\n        a[i + 4] = y;\n        a[i + 5] = z;\n\n        a[i + 6] = x;\n        a[i + 7] = y;\n        a[i + 8] = z;\n\n        a[i + 9] = x;\n        a[i + 10] = y;\n        a[i + 11] = z;\n\n        a[i + 12] = x;\n        a[i + 13] = y;\n        a[i + 14] = z;\n\n        a[i + 15] = x;\n        a[i + 16] = y;\n        a[i + 17] = z;\n\n        this._changedBuffers[PICKINGCOLOR_BUFFER] = true;\n    }\n\n    public setRgbaArr(index: number, startColor: Vec4, endColor: Vec4) {\n        let i = index * 24;\n        let a = this._rgbaArr,\n            r0 = startColor.x,\n            g0 = startColor.y,\n            b0 = startColor.z,\n            a0 = startColor.w,\n            r1 = endColor.x,\n            g1 = endColor.y,\n            b1 = endColor.z,\n            a1 = endColor.w;\n\n        a[i] = r1;\n        a[i + 1] = g1;\n        a[i + 2] = b1;\n        a[i + 3] = a1;\n\n        a[i + 4] = r0;\n        a[i + 5] = g0;\n        a[i + 6] = b0;\n        a[i + 7] = a0;\n\n        a[i + 8] = r0;\n        a[i + 9] = g0;\n        a[i + 10] = b0;\n        a[i + 11] = a0;\n\n        a[i + 12] = r0;\n        a[i + 13] = g0;\n        a[i + 14] = b0;\n        a[i + 15] = a0;\n\n        a[i + 16] = r1;\n        a[i + 17] = g1;\n        a[i + 18] = b1;\n        a[i + 19] = a1;\n\n        a[i + 20] = r1;\n        a[i + 21] = g1;\n        a[i + 22] = b1;\n        a[i + 23] = a1;\n\n        this._changedBuffers[RGBA_BUFFER] = true;\n    }\n\n    public setThicknessArr(index: number, thickness: number) {\n        let i = index * 6;\n        let a = this._thicknessArr;\n\n        a[i] = thickness;\n        a[i + 1] = thickness;\n        a[i + 2] = thickness;\n        a[i + 3] = thickness;\n        a[i + 4] = thickness;\n        a[i + 5] = thickness;\n\n        this._changedBuffers[THICKNESS_BUFFER] = true;\n    }\n\n    public setVisibility(index: number, visibility: boolean) {\n        let vArr: number[];\n        if (visibility) {\n            vArr = [-0.5, 1.0, -0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 1.0, -0.5, 1.0];\n        } else {\n            vArr = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0];\n        }\n        this.setVertexArr(index, vArr);\n    }\n\n    public setVertexArr(index: number, vertexArr: number[]) {\n        let i = index * 12;\n        let a = this._vertexArr;\n\n        a[i] = vertexArr[0];\n        a[i + 1] = vertexArr[1];\n        a[i + 2] = vertexArr[2];\n\n        a[i + 3] = vertexArr[3];\n        a[i + 4] = vertexArr[4];\n        a[i + 5] = vertexArr[5];\n\n        a[i + 6] = vertexArr[6];\n        a[i + 7] = vertexArr[7];\n        a[i + 8] = vertexArr[8];\n\n        a[i + 9] = vertexArr[9];\n        a[i + 10] = vertexArr[10];\n        a[i + 11] = vertexArr[11];\n\n        this._changedBuffers[VERTEX_BUFFER] = true;\n    }\n\n    public createStartPositionBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._startPositionHighBuffer as WebGLBuffer);\n        this._startPositionHighArr = makeArrayTyped(this._startPositionHighArr);\n        this._startPositionHighBuffer = h.createArrayBuffer(\n            this._startPositionHighArr as Float32Array,\n            3,\n            this._startPositionHighArr.length / 3,\n            h.gl!.DYNAMIC_DRAW\n        );\n        h.gl!.deleteBuffer(this._startPositionLowBuffer as WebGLBuffer);\n        this._startPositionLowArr = makeArrayTyped(this._startPositionLowArr);\n\n        this._startPositionLowBuffer = h.createArrayBuffer(\n            this._startPositionLowArr as Float32Array,\n            3,\n            this._startPositionLowArr.length / 3,\n            h.gl!.DYNAMIC_DRAW\n        );\n    }\n\n    public createEndPositionBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._endPositionHighBuffer as WebGLBuffer);\n        this._endPositionHighArr = makeArrayTyped(this._endPositionHighArr);\n        this._endPositionHighBuffer = h.createArrayBuffer(\n            this._endPositionHighArr as Float32Array,\n            3,\n            this._endPositionHighArr.length / 3,\n            h.gl!.DYNAMIC_DRAW\n        );\n        h.gl!.deleteBuffer(this._endPositionLowBuffer as WebGLBuffer);\n        this._endPositionLowArr = makeArrayTyped(this._endPositionLowArr);\n        this._endPositionLowBuffer = h.createArrayBuffer(\n            this._endPositionLowArr as Float32Array,\n            3,\n            this._endPositionLowArr.length / 3,\n            h.gl!.DYNAMIC_DRAW\n        );\n    }\n\n    public createRgbaBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._rgbaBuffer as WebGLBuffer);\n        this._rgbaArr = makeArrayTyped(this._rgbaArr);\n        this._rgbaBuffer = h.createArrayBuffer(this._rgbaArr as Float32Array, 4, this._rgbaArr.length / 4);\n    }\n\n    public createThicknessBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._thicknessBuffer as WebGLBuffer);\n        this._thicknessArr = makeArrayTyped(this._thicknessArr);\n        this._thicknessBuffer = h.createArrayBuffer(\n            this._thicknessArr as Float32Array,\n            1,\n            this._thicknessArr.length,\n            h.gl!.DYNAMIC_DRAW\n        );\n    }\n\n    public createVertexBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._vertexBuffer as WebGLBuffer);\n        this._vertexArr = makeArrayTyped(this._vertexArr);\n        this._vertexBuffer = h.createArrayBuffer(\n            this._vertexArr as Float32Array,\n            2,\n            this._vertexArr.length / 2,\n            h.gl!.DYNAMIC_DRAW\n        );\n    }\n\n    public createPickingColorBuffer() {\n        let h = this._renderer!.handler;\n        h.gl!.deleteBuffer(this._pickingColorBuffer as WebGLBuffer);\n        this._pickingColorArr = makeArrayTyped(this._pickingColorArr);\n        this._pickingColorBuffer = h.createArrayBuffer(\n            this._pickingColorArr as Float32Array,\n            3,\n            this._pickingColorArr.length / 3\n        );\n    }\n}\n\nexport {RayHandler};\n","import {EntityCollection} from \"./EntityCollection\";\nimport {Program} from \"../webgl/Program\";\nimport {Renderer} from \"../renderer/Renderer\";\nimport {RenderNode} from \"../scene/RenderNode\";\nimport {Strip} from \"./Strip\";\n\nclass StripHandler {\n\n    static __counter__: number = 0;\n    protected __id: number;\n\n    /**\n     * Picking rendering option.\n     * @public\n     * @type {boolean}\n     */\n    public pickingEnabled: boolean;\n\n    /**\n     * Parent collection\n     * @protected\n     * @type {EntityCollection}\n     */\n    protected _entityCollection: EntityCollection;\n\n    /**\n     * Renderer\n     * @protected\n     * @type {Renderer | null}\n     */\n    protected _renderer: Renderer | null;\n\n    /**\n     * Strip objects array\n     * @protected\n     * @type {Array.<Strip>}\n     */\n    protected _strips: Strip[];\n\n    constructor(entityCollection: EntityCollection) {\n\n        this.__id = StripHandler.__counter__++;\n\n        this.pickingEnabled = true;\n\n        this._entityCollection = entityCollection;\n\n        this._renderer = null;\n\n        this._strips = [];\n    }\n\n    protected _initProgram() {\n        if (this._renderer && this._renderer.handler) {\n            !this._renderer.handler.programs.strip &&\n            this._renderer.handler.addProgram(\n                new Program(\"strip\", {\n                    uniforms: {\n                        projectionMatrix: {type: \"mat4\"},\n                        viewMatrix: {type: \"mat4\"},\n                        eyePositionHigh: \"vec3\",\n                        eyePositionLow: \"vec3\",\n                        uColor: {type: \"vec4\"},\n                        uOpacity: {type: \"float\"}\n                    },\n                    attributes: {\n                        aVertexPositionHigh: {type: \"vec3\"},\n                        aVertexPositionLow: {type: \"vec3\"}\n                    },\n                    vertexShader: `attribute vec3 aVertexPositionHigh;\n                        attribute vec3 aVertexPositionLow;\n                        uniform mat4 projectionMatrix;\n                        uniform mat4 viewMatrix;\n                        uniform vec3 eyePositionHigh;\n                        uniform vec3 eyePositionLow;\n                        void main(void) {\n\n                            vec3 highDiff = aVertexPositionHigh - eyePositionHigh;\n                            vec3 lowDiff = aVertexPositionLow - eyePositionLow;\n\n                            mat4 viewMatrixRTE = viewMatrix;\n                            viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                            gl_Position = projectionMatrix * viewMatrixRTE * vec4(highDiff * step(1.0, length(highDiff)) + lowDiff, 1.0);\n                        }`,\n                    fragmentShader: `precision highp float;\n                        uniform vec4 uColor;\n                        uniform float uOpacity;\n                        void main(void) {\n                            gl_FragColor = vec4(uColor.rgb, uColor.a * uOpacity);\n                        }`\n                })\n            );\n        }\n    }\n\n    public setRenderNode(renderNode: RenderNode) {\n        this._renderer = renderNode.renderer;\n        this._initProgram();\n        for (let i = 0; i < this._strips.length; i++) {\n            this._strips[i].setRenderNode(renderNode);\n        }\n    }\n\n    public add(strip: Strip) {\n        if (strip._handlerIndex === -1) {\n            strip._handler = this;\n            strip._handlerIndex = this._strips.length;\n            this._strips.push(strip);\n            this._entityCollection &&\n            this._entityCollection.renderNode &&\n            strip.setRenderNode(this._entityCollection.renderNode);\n        }\n    }\n\n    public remove(strip: Strip) {\n        let index = strip._handlerIndex;\n        if (index !== -1) {\n            strip._deleteBuffers();\n            strip._handlerIndex = -1;\n            strip._handler = null;\n            this._strips.splice(index, 1);\n            this.reindexStripArray(index);\n        }\n    }\n\n    public reindexStripArray(startIndex: number) {\n        let pc = this._strips;\n        for (let i = startIndex; i < pc.length; i++) {\n            pc[i]._handlerIndex = i;\n        }\n    }\n\n    public draw() {\n        let i = this._strips.length;\n        while (i--) {\n            this._strips[i].draw();\n        }\n    }\n\n    public drawPicking() {\n        if (this.pickingEnabled) {\n            let i = this._strips.length;\n            while (i--) {\n                this._strips[i].drawPicking();\n            }\n        }\n    }\n\n    public clear() {\n        let i = this._strips.length;\n        while (i--) {\n            this._strips[i]._deleteBuffers();\n            this._strips[i]._handler = null;\n            this._strips[i]._handlerIndex = -1;\n        }\n        this._strips.length = 0;\n        this._strips = [];\n    }\n}\n\nexport {StripHandler};\n","import * as math from \"../math\";\nimport {BillboardHandler} from \"./BillboardHandler\";\nimport {createEvents, EventsHandler} from \"../Events\";\nimport {Entity} from \"./Entity\";\nimport {Ellipsoid} from \"../ellipsoid/Ellipsoid\";\nimport {EntityCollectionNode} from \"../quadTree/EntityCollectionNode\";\nimport {GeoObjectHandler} from \"./GeoObjectHandler\";\nimport {Label} from \"./Label\";\nimport {LabelHandler} from \"./LabelHandler\";\nimport {NumberArray3} from \"../math/Vec3\";\nimport {Planet} from \"../scene/Planet\";\nimport {PointCloudHandler} from \"./PointCloudHandler\";\nimport {PolylineHandler} from \"./PolylineHandler\";\nimport {RayHandler} from \"./RayHandler\";\nimport {RenderNode} from \"../scene/RenderNode\";\nimport {StripHandler} from \"./StripHandler\";\nimport {Vector} from \"../layer/Vector\";\n\nexport type EntityCollectionEvents = EventsHandler<EntityCollectionEventList>;\n\ninterface IEntityCollectionParams {\n    polygonOffsetUnits?: number;\n    visibility?: boolean;\n    labelMaxLetters?: number;\n    pickingEnabled?: boolean;\n    scaleByDistance?: NumberArray3;\n    pickingScale?: number | NumberArray3;\n    opacity?: number;\n    useLighting?: boolean;\n    entities?: Entity[];\n}\n\n/**\n * An observable collection of og.Entity instances where each entity has a unique id.\n * Entity collection provide handlers for each type of entity like billboard, label or 3ds object.\n * @constructor\n * @param {Object} [options] - Entity options:\n * @param {Array.<Entity>} [options.entities] - Entities array.\n * @param {boolean} [options.visibility=true] - Entity visibility.\n * @param {Array.<number>} [options.scaleByDistance] - Entity scale by distance parameters. (exactly 3 entries)\n * First index - near distance to the entity, after entity becomes full scale.\n * Second index - far distance to the entity, when entity becomes zero scale.\n * Third index - far distance to the entity, when entity becomes invisible.\n * @param {number} [options.opacity] - Entity global opacity.\n * @param {boolean} [options.pickingEnabled=true] - Entity picking enable.\n * @param {Number} [options.polygonOffsetUnits=0.0] - The multiplier by which an implementation-specific value is multiplied with to create a constant depth offset. The default value is 0.\n * //@fires EntityCollection#entitymove\n * @fires EntityCollection#draw\n * @fires EntityCollection#drawend\n * @fires EntityCollection#add\n * @fires EntityCollection#remove\n * @fires EntityCollection#entityadd\n * @fires EntityCollection#entityremove\n * @fires EntityCollection#visibilitychange\n * @fires EntityCollection#mousemove\n * @fires EntityCollection#mouseenter\n * @fires EntityCollection#mouseleave\n * @fires EntityCollection#lclick\n * @fires EntityCollection#rclick\n * @fires EntityCollection#mclick\n * @fires EntityCollection#ldblclick\n * @fires EntityCollection#rdblclick\n * @fires EntityCollection#mdblclick\n * @fires EntityCollection#lup\n * @fires EntityCollection#rup\n * @fires EntityCollection#mup\n * @fires EntityCollection#ldown\n * @fires EntityCollection#rdown\n * @fires EntityCollection#mdown\n * @fires EntityCollection#lhold\n * @fires EntityCollection#rhold\n * @fires EntityCollection#mhold\n * @fires EntityCollection#mousewheel\n * @fires EntityCollection#touchmove\n * @fires EntityCollection#touchstart\n * @fires EntityCollection#touchend\n * @fires EntityCollection#doubletouch\n * @fires EntityCollection#touchleave\n * @fires EntityCollection#touchenter\n */\nclass EntityCollection {\n\n    static __counter__: number = 0;\n\n    /**\n     * Uniq identifier.\n     * @public\n     * @readonly\n     */\n    protected __id: number;\n\n    /**\n     * Render node collections array index.\n     * @protected\n     * @type {number}\n     */\n    protected _renderNodeIndex: number;\n\n    /**\n     * Render node context.\n     * @public\n     * @type {RenderNode}\n     */\n    public renderNode: RenderNode | null;\n\n    /**\n     * Visibility option.\n     * @public\n     * @type {boolean}\n     */\n    public _visibility: boolean;\n\n    /**\n     * Specifies the scale Units for gl.polygonOffset function to calculate depth values, 0.0 is default.\n     * @public\n     * @type {Number}\n     */\n    public polygonOffsetUnits: number;\n\n    /**\n     * Billboards handler\n     * @public\n     * @type {BillboardHandler}\n     */\n    public billboardHandler: BillboardHandler;\n\n    /**\n     * Labels handler\n     * @public\n     * @type {LabelHandler}\n     */\n    public labelHandler: LabelHandler;\n\n    /**\n     * Polyline handler\n     * @public\n     * @type {PolylineHandler}\n     */\n    public polylineHandler: PolylineHandler;\n\n    /**\n     * Ray handler\n     * @public\n     * @type {RayHandler}\n     */\n    public rayHandler: RayHandler;\n\n    /**\n     * PointCloud handler\n     * @public\n     * @type {PointCloudHandler}\n     */\n    public pointCloudHandler: PointCloudHandler;\n\n    /**\n     * Strip handler\n     * @public\n     * @type {StripHandler}\n     */\n    public stripHandler: StripHandler;\n\n    /**\n     * Geo object handler\n     * @public\n     * @type {GeoObjectHandler}\n     */\n    public geoObjectHandler: GeoObjectHandler;\n\n    /**\n     * Entities array.\n     * @public\n     * @type {Array.<Entity>}\n     */\n    public _entities: Entity[];\n\n    /**\n     * First index - near distance to the entity, after entity becomes full scale.\n     * Second index - far distance to the entity, when entity becomes zero scale.\n     * Third index - far distance to the entity, when entity becomes invisible.\n     * @public\n     * @type {Array.<number>} - (exactly 3 entries)\n     */\n    public scaleByDistance: NumberArray3;\n\n    public pickingScale: Float32Array;\n\n    /**\n     * Global opacity.\n     * @protected\n     * @type {number}\n     */\n    protected _opacity: number;\n\n    /**\n     * Opacity state during the animated opacity.\n     * @public\n     * @type {number}\n     */\n    public _fadingOpacity: number;\n\n    /**\n     * Entity collection events handler.\n     * @public\n     * @type {EntityCollectionEvents}\n     */\n    public events: EntityCollectionEvents;\n\n    public rendererEvents: EntityCollectionEvents;\n\n    /**\n     * Used in EntityCollectionNode, also could be merged with _quadNode\n     */\n    public _layer?: Vector;\n    public _quadNode?: EntityCollectionNode;\n\n    public _useLighting: number;\n\n    constructor(options: IEntityCollectionParams = {}) {\n\n        this.__id = EntityCollection.__counter__++;\n\n        this._renderNodeIndex = -1;\n\n        this.renderNode = null;\n\n        this._visibility = options.visibility == undefined ? true : options.visibility;\n\n        this.polygonOffsetUnits =\n            options.polygonOffsetUnits != undefined ? options.polygonOffsetUnits : 0.0;\n\n        this.billboardHandler = new BillboardHandler(this);\n\n        this.labelHandler = new LabelHandler(this, options.labelMaxLetters);\n\n        this.polylineHandler = new PolylineHandler(this);\n\n        this.rayHandler = new RayHandler(this);\n\n        this.pointCloudHandler = new PointCloudHandler(this);\n\n        this.stripHandler = new StripHandler(this);\n\n        this.geoObjectHandler = new GeoObjectHandler(this);\n\n        if (options.pickingEnabled != undefined) {\n            this.setPickingEnabled(options.pickingEnabled);\n        }\n\n        this._entities = [];\n\n        this.scaleByDistance = options.scaleByDistance || [math.MAX32, math.MAX32, math.MAX32];\n\n        let pickingScale: Float32Array = new Float32Array([1.0, 1.0, 1.0]);\n        if (options.pickingScale !== undefined) {\n            if (options.pickingScale instanceof Array) {\n                pickingScale[0] = options.pickingScale[0] || pickingScale[0];\n                pickingScale[1] = options.pickingScale[1] || pickingScale[1];\n                pickingScale[2] = options.pickingScale[2] || pickingScale[2];\n            } else if (typeof options.pickingScale === 'number') {\n                pickingScale[0] = options.pickingScale;\n                pickingScale[1] = options.pickingScale;\n                pickingScale[2] = options.pickingScale;\n            }\n        }\n\n        this.pickingScale = pickingScale;\n\n        this._opacity = options.opacity == undefined ? 1.0 : options.opacity;\n\n        this._fadingOpacity = this._opacity;\n\n        this.events = this.rendererEvents = createEvents<EntityCollectionEventList>(ENTITYCOLLECTION_EVENTS, this);\n\n        this._useLighting = options.useLighting != undefined ? (options.useLighting ? 1.0 : 0.0) : 1.0;\n\n        // initialize current entities\n        if (options.entities) {\n            this.addEntities(options.entities);\n        }\n    }\n\n    public isEmpty(): boolean {\n        return this._entities.length == 0;\n    }\n\n    get id(): number {\n        return this.__id;\n    }\n\n    public get useLighting(): boolean {\n        return Boolean(this._useLighting)\n    }\n\n    public set useLighting(f: boolean) {\n        this._useLighting = Number(f);\n    }\n\n    public isEqual(ec: EntityCollection): boolean {\n        return this.__id === ec.__id;\n    }\n\n    /**\n     * Sets collection visibility.\n     * @public\n     * @param {boolean} visibility - Visibility flag.\n     */\n    public setVisibility(visibility: boolean) {\n        this._visibility = visibility;\n        this._fadingOpacity = this._opacity * (visibility ? 1 : 0);\n        this.events.dispatch(this.events.visibilitychange, this);\n    }\n\n    /**\n     * Returns collection visibility.\n     * @public\n     * @returns {boolean} -\n     */\n    public getVisibility(): boolean {\n        return this._visibility;\n    }\n\n    /**\n     * Sets collection opacity.\n     * @public\n     * @param {number} opacity - Opacity.\n     */\n    public setOpacity(opacity: number) {\n        this._opacity = opacity;\n    }\n\n    /**\n     * Sets collection picking ability.\n     * @public\n     * @param {boolean} enable - Picking enable flag.\n     */\n    public setPickingEnabled(enable: boolean) {\n        this.billboardHandler.pickingEnabled = enable;\n        this.labelHandler.pickingEnabled = enable;\n        this.polylineHandler.pickingEnabled = enable;\n        this.rayHandler.pickingEnabled = enable;\n        this.pointCloudHandler.pickingEnabled = enable;\n        this.stripHandler.pickingEnabled = enable;\n        this.geoObjectHandler.pickingEnabled = enable;\n    }\n\n    /**\n     * Gets collection opacity.\n     * @public\n     * @returns {number} -\n     */\n    public getOpacity(): number {\n        return this._opacity;\n    }\n\n    /**\n     * Sets scale by distance parameters.\n     * @public\n     * @param {number} near - Full scale entity distance.\n     * @param {number} far - Zero scale entity distance.\n     * @param {number} [farInvisible] - Entity visibility distance.\n     */\n    public setScaleByDistance(near: number, far: number, farInvisible?: number) {\n        this.scaleByDistance[0] = near;\n        this.scaleByDistance[1] = far;\n        this.scaleByDistance[2] = farInvisible || math.MAX32;\n    }\n\n    public appendChildEntity(entity: Entity) {\n        this._addRecursively(entity);\n    }\n\n    protected _addRecursively(entity: Entity) {\n        // billboard\n        entity.billboard && this.billboardHandler.add(entity.billboard);\n\n        // label\n        entity.label && this.labelHandler.add(entity.label);\n\n        // polyline\n        entity.polyline && this.polylineHandler.add(entity.polyline);\n\n        // ray\n        entity.ray && this.rayHandler.add(entity.ray);\n\n        // pointCloud\n        entity.pointCloud && this.pointCloudHandler.add(entity.pointCloud);\n\n        // strip\n        entity.strip && this.stripHandler.add(entity.strip);\n\n        //geoObject\n        entity.geoObject && this.geoObjectHandler.add(entity.geoObject);\n\n        this.events.dispatch(this.events.entityadd, entity);\n\n        let rn: RenderNode | null = this.renderNode;\n        for (let i = 0; i < entity.childrenNodes.length; i++) {\n            entity.childrenNodes[i]._entityCollection = this;\n            entity.childrenNodes[i]._entityCollectionIndex = entity._entityCollectionIndex;\n            if (entity.childrenNodes[i]._independentPicking) {\n                if (rn) {\n                    rn.renderer && rn.renderer.assignPickingColor<Entity>(entity.childrenNodes[i]);\n                }\n            } else {\n                entity.childrenNodes[i]._pickingColor = entity._pickingColor;\n            }\n            this._addRecursively(entity.childrenNodes[i]);\n        }\n    }\n\n    /**\n     * Adds entity to the collection and returns collection.\n     * @public\n     * @param {Entity} entity - Entity.\n     * @returns {EntityCollection} -\n     */\n    public add(entity: Entity): EntityCollection {\n        if (!entity._entityCollection) {\n            entity._entityCollection = this;\n            entity._entityCollectionIndex = this._entities.length;\n            this._entities.push(entity);\n            let rn: RenderNode | null = this.renderNode;\n            if (rn) {\n                rn.renderer && rn.renderer.assignPickingColor<Entity>(entity);\n                if ((rn as Planet).ellipsoid && entity._cartesian.isZero()) {\n                    entity.setCartesian3v((rn as Planet).ellipsoid.lonLatToCartesian(entity._lonLat));\n                }\n            }\n            this._addRecursively(entity);\n            entity.setPickingColor();\n        }\n        return this;\n    }\n\n    /**\n     * Adds entities array to the collection and returns collection.\n     * @public\n     * @param {Array.<Entity>} entities - Entities array.\n     * @returns {EntityCollection} -\n     */\n    public addEntities(entities: Entity[]): EntityCollection {\n        for (let i = 0, len = entities.length; i < len; i++) {\n            this.add(entities[i]);\n        }\n        return this;\n    }\n\n    /**\n     * Returns true if the entity belongs this collection, otherwise returns false.\n     * @public\n     * @param {Entity} entity - Entity.\n     * @returns {boolean} -\n     */\n    public belongs(entity: Entity) {\n        return entity._entityCollection && this._renderNodeIndex === entity._entityCollection._renderNodeIndex;\n    }\n\n    protected _removeRecursively(entity: Entity) {\n        entity._entityCollection = null;\n        entity._entityCollectionIndex = -1;\n\n        // billboard\n        entity.billboard && this.billboardHandler.remove(entity.billboard);\n\n        // label\n        entity.label && this.labelHandler.remove(entity.label);\n\n        // polyline\n        entity.polyline && this.polylineHandler.remove(entity.polyline);\n\n        // ray\n        entity.ray && this.rayHandler.remove(entity.ray);\n\n        // pointCloud\n        entity.pointCloud && this.pointCloudHandler.remove(entity.pointCloud);\n\n        // strip\n        entity.strip && this.stripHandler.remove(entity.strip);\n\n        // geoObject\n        entity.geoObject && this.geoObjectHandler.remove(entity.geoObject);\n\n        for (let i = 0; i < entity.childrenNodes.length; i++) {\n            this._removeRecursively(entity.childrenNodes[i]);\n        }\n    }\n\n    /**\n     * Removes entity from this collection.\n     * @public\n     * @param {Entity} entity - Entity to remove.\n     */\n    public removeEntity(entity: Entity) {\n        this._entities.splice(entity._entityCollectionIndex, 1);\n        this.reindexEntitiesArray(entity._entityCollectionIndex);\n\n        // clear picking color\n        if (this.renderNode && this.renderNode.renderer) {\n            this.renderNode.renderer.clearPickingColor(entity);\n            entity._pickingColor.clear();\n        }\n\n        if (this.belongs(entity)) {\n            this._removeRecursively(entity);\n        }\n\n        this.events.dispatch(this.events.entityremove, entity);\n    }\n\n    public _removeEntitySilent(entity: Entity) {\n        this._entities.splice(entity._entityCollectionIndex, 1);\n        this.reindexEntitiesArray(entity._entityCollectionIndex);\n\n        // clear picking color\n        if (this.renderNode && this.renderNode.renderer) {\n            this.renderNode.renderer.clearPickingColor(entity);\n            entity._pickingColor.clear();\n        }\n\n        if (this.belongs(entity)) {\n            this._removeRecursively(entity);\n        }\n    }\n\n    /**\n     * Creates or refresh collected entities picking color.\n     * @public\n     */\n    public createPickingColors() {\n        if (!(this.renderNode && this.renderNode.renderer)) return;\n        let e = this._entities;\n        for (let i = 0; i < e.length; i++) {\n            if (!e[i].parent) {\n                this.renderNode.renderer.assignPickingColor<Entity>(e[i]);\n                e[i].setPickingColor();\n            }\n        }\n    }\n\n    /**\n     * Refresh collected entities indexes from startIndex entities collection array position.\n     * @public\n     * @param {number} startIndex - Entities collection array index.\n     */\n    public reindexEntitiesArray(startIndex: number) {\n        let e = this._entities;\n        for (let i = startIndex; i < e.length; i++) {\n            e[i]._entityCollectionIndex = i;\n        }\n    }\n\n    /**\n     * Adds this collection to render node.\n     * @public\n     * @param {RenderNode} renderNode - Render node.\n     * @param {boolean} [isHidden] - Uses in vector layers that render in planet render specific function.\n     * @returns {EntityCollection} -\n     */\n    public addTo(renderNode: RenderNode, isHidden: boolean = false) {\n        if (!this.renderNode) {\n            this.renderNode = renderNode;\n\n            if (!isHidden) {\n                this._renderNodeIndex = renderNode.entityCollections.length;\n                renderNode.entityCollections.push(this);\n            }\n\n            (renderNode as Planet).ellipsoid && this._updateGeodeticCoordinates((renderNode as Planet).ellipsoid);\n\n            this.bindRenderNode(renderNode);\n\n            this.events.dispatch(this.events.add, this);\n        }\n        return this;\n    }\n\n    /**\n     * This function is called in the RenderNode assign function.\n     * @public\n     * @param {RenderNode} renderNode\n     */\n    public bindRenderNode(renderNode: RenderNode) {\n        if (renderNode.renderer && renderNode.renderer.isInitialized()) {\n\n            this.billboardHandler.setRenderer(renderNode.renderer);\n            this.labelHandler.setRenderer(renderNode.renderer);\n            this.rayHandler.setRenderer(renderNode.renderer);\n\n            this.geoObjectHandler.setRenderNode(renderNode as Planet);\n            this.polylineHandler.setRenderNode(renderNode);\n            this.pointCloudHandler.setRenderNode(renderNode);\n            this.stripHandler.setRenderNode(renderNode);\n\n            this.updateBillboardsTextureAtlas();\n            this.updateLabelsFontAtlas();\n            this.createPickingColors();\n        }\n    }\n\n    /**\n     * Updates coordinates all lonLat entities in collection after collection attached to the planet node.\n     * @protected\n     * @param {Ellipsoid} ellipsoid - Globe ellipsoid.\n     */\n    protected _updateGeodeticCoordinates(ellipsoid: Ellipsoid) {\n        let e = this._entities;\n        let i = e.length;\n        while (i--) {\n            let ei = e[i];\n            ei._lonLat && ei.setCartesian3v(ellipsoid.lonLatToCartesian(ei._lonLat));\n        }\n    }\n\n    /**\n     * Updates billboard texture atlas.\n     * @public\n     */\n    public updateBillboardsTextureAtlas() {\n        let b = this.billboardHandler.billboards;\n        for (let i = 0; i < b.length; i++) {\n            b[i].setSrc(b[i].getSrc());\n        }\n    }\n\n    /**\n     * Updates labels font atlas.\n     * @public\n     */\n    public updateLabelsFontAtlas() {\n        if (this.renderNode) {\n            // let l = ([] as Label[]).concat(this.labelHandler.labels);\n            // this.labelHandler._billboards = [];\n            // for (let i = 0; i < l.length; i++) {\n            //     this.labelHandler.assignFontAtlas(l[i]);\n            // }\n            this.labelHandler.updateFonts();\n        }\n    }\n\n    /**\n     * Removes collection from render node.\n     * @public\n     */\n    public remove() {\n        if (this.renderNode) {\n            if (this._renderNodeIndex !== -1) {\n                this.renderNode.entityCollections.splice(this._renderNodeIndex, 1);\n                // reindex in the renderNode\n                for (let i = this._renderNodeIndex; i < this.renderNode.entityCollections.length; i++) {\n                    this.renderNode.entityCollections[i]._renderNodeIndex = i;\n                }\n            }\n            this.renderNode = null;\n            this._renderNodeIndex = -1;\n            this.events.dispatch(this.events.remove, this);\n        }\n    }\n\n    /**\n     * Gets entity array.\n     * @public\n     * @returns {Array.<Entity>} -\n     */\n    public getEntities(): Entity[] {\n        return ([] as Entity[]).concat(this._entities);\n    }\n\n    /**\n     * Safety entities loop.\n     * @public\n     * @param {function} callback - Entity callback.\n     */\n    public each(callback: Function) {\n        let i = this._entities.length;\n        while (i--) {\n            let ei = this._entities[i];\n            ei && callback(ei);\n        }\n    }\n\n    /**\n     * Removes all entities from collection and clear handlers.\n     * @public\n     */\n    public clear() {\n        // TODO: Optimize by replace delete\n        // code to the clearEntity function.\n        this.billboardHandler.clear();\n        this.labelHandler.clear();\n        this.polylineHandler.clear();\n        this.rayHandler.clear();\n        this.pointCloudHandler.clear();\n        this.stripHandler.clear();\n        this.geoObjectHandler.clear();\n\n        let i = this._entities.length;\n        while (i--) {\n            let ei = this._entities[i];\n            if (this.renderNode && this.renderNode.renderer) {\n                this.renderNode.renderer.clearPickingColor(ei);\n                ei._pickingColor.clear();\n            }\n            this._clearEntity(ei);\n        }\n        this._entities.length = 0;\n        this._entities = [];\n    }\n\n    /**\n     * Clears entity recursively.\n     * @private\n     * @param {Entity} entity - Entity to clear.\n     */\n    protected _clearEntity(entity: Entity) {\n        entity._entityCollection = null;\n        entity._entityCollectionIndex = -1;\n        for (let i = 0; i < entity.childrenNodes.length; i++) {\n            this._clearEntity(entity.childrenNodes[i]);\n        }\n    }\n}\n\ntype EntityCollectionEventList = [\n    //\"entitymove\",\n    \"draw\",\n    \"drawend\",\n    \"add\",\n    \"remove\",\n    \"entityadd\",\n    \"entityremove\",\n    \"visibilitychange\",\n    \"mousemove\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"lclick\",\n    \"rclick\",\n    \"mclick\",\n    \"ldblclick\",\n    \"rdblclick\",\n    \"mdblclick\",\n    \"lup\",\n    \"rup\",\n    \"mup\",\n    \"ldown\",\n    \"rdown\",\n    \"mdown\",\n    \"lhold\",\n    \"rhold\",\n    \"mhold\",\n    \"mousewheel\",\n    \"touchmove\",\n    \"touchstart\",\n    \"touchend\",\n    \"doubletouch\",\n    \"touchleave\",\n    \"touchenter\"\n]\n\nconst ENTITYCOLLECTION_EVENTS: EntityCollectionEventList = [\n    // /**\n    //  * Triggered when entity has moved.\n    //  * @event EntityCollection#entitymove\n    //  */\n    // \"entitymove\",\n\n    /**\n     * Triggered when collection entities begin draw.\n     * @event EntityCollection#draw\n     */\n    \"draw\",\n\n    /**\n     * Triggered after collection has drawn.\n     * @event EntityCollection#drawend\n     */\n    \"drawend\",\n\n    /**\n     * Triggered when added to the render node.\n     * @event EntityCollection#add\n     */\n    \"add\",\n\n    /**\n     * Triggered when removed from the render node.\n     * @event EntityCollection#remove\n     */\n    \"remove\",\n\n    /**\n     * Triggered when new entity added to the collection.\n     * @event EntityCollection#entityadd\n     */\n    \"entityadd\",\n\n    /**\n     * Triggered when entity removes from the collection.\n     * @event EntityCollection#entityremove\n     */\n    \"entityremove\",\n\n    /**\n     * Triggered when visibility changes.\n     * @event EntityCollection#visibilitychange\n     */\n    \"visibilitychange\",\n\n    /**\n     * Triggered when mouse moves over the entity.\n     * @event EntityCollection#mousemove\n     */\n    \"mousemove\",\n\n    /**\n     * Triggered when mouse has entered over the entity.\n     * @event EntityCollection#mouseenter\n     */\n    \"mouseenter\",\n\n    /**\n     * Triggered when mouse leaves the entity.\n     * @event EntityCollection#mouseleave\n     */\n    \"mouseleave\",\n\n    /**\n     * Mouse left button clicked.\n     * @event EntityCollection#lclick\n     */\n    \"lclick\",\n\n    /**\n     * Mouse right button clicked.\n     * @event EntityCollection#rclick\n     */\n    \"rclick\",\n\n    /**\n     * Mouse right button clicked.\n     * @event EntityCollection#mclick\n     */\n    \"mclick\",\n\n    /**\n     * Mouse left button double click.\n     * @event EntityCollection#ldblclick\n     */\n    \"ldblclick\",\n\n    /**\n     * Mouse right button double click.\n     * @event EntityCollection#rdblclick\n     */\n    \"rdblclick\",\n\n    /**\n     * Mouse middle button double click.\n     * @event EntityCollection#mdblclick\n     */\n    \"mdblclick\",\n\n    /**\n     * Mouse left button up(stop pressing).\n     * @event EntityCollection#lup\n     */\n    \"lup\",\n\n    /**\n     * Mouse right button up(stop pressing).\n     * @event EntityCollection#rup\n     */\n    \"rup\",\n\n    /**\n     * Mouse middle button up(stop pressing).\n     * @event EntityCollection#mup\n     */\n    \"mup\",\n\n    /**\n     * Mouse left button is just pressed down(start pressing).\n     * @event EntityCollection#ldown\n     */\n    \"ldown\",\n\n    /**\n     * Mouse right button is just pressed down(start pressing).\n     * @event EntityCollection#rdown\n     */\n    \"rdown\",\n\n    /**\n     * Mouse middle button is just pressed down(start pressing).\n     * @event EntityCollection#mdown\n     */\n    \"mdown\",\n\n    /**\n     * Mouse left button is pressing.\n     * @event EntityCollection#lhold\n     */\n    \"lhold\",\n\n    /**\n     * Mouse right button is pressing.\n     * @event EntityCollection#rhold\n     */\n    \"rhold\",\n\n    /**\n     * Mouse middle button is pressing.\n     * @event EntityCollection#mhold\n     */\n    \"mhold\",\n\n    /**\n     * Mouse wheel is rotated.\n     * @event EntityCollection#mousewheel\n     */\n    \"mousewheel\",\n\n    /**\n     * Triggered when touch moves over the entity.\n     * @event EntityCollection#touchmove\n     */\n    \"touchmove\",\n\n    /**\n     * Triggered when entity begins to touch.\n     * @event EntityCollection#touchstart\n     */\n    \"touchstart\",\n\n    /**\n     * Triggered when entity ends touching.\n     * @event EntityCollection#touchend\n     */\n    \"touchend\",\n\n    /**\n     * Triggered entity double touch.\n     * @event EntityCollection#doubletouch\n     */\n    \"doubletouch\",\n\n    /**\n     * Triggered when touching leaves entity.\n     * @event EntityCollection#touchleave\n     */\n    \"touchleave\",\n\n    /**\n     * Triggered when touch enters over the entity.\n     * @event EntityCollection#touchenter\n     */\n    \"touchenter\"\n];\n\nexport {EntityCollection};\n","/**\n * @module og/math/coder\n */\n\nimport * as math from \"../math\";\nimport {NumberArray4, Vec4} from \"./Vec4\";\nimport {NumberArray3} from \"./Vec3\";\nimport {NumberArray2, Vec2} from \"./Vec2\";\n\n/**\n * Encode 32 bit float value to the RGBA vector.\n * @function\n * @param {number} v - 32 bit float value.\n * @returns {Vec4} - RGBA vector value.\n */\nexport function encodeFloatToRGBA(v: number): Vec4 {\n    let enc = new Vec4((1.0 * v) % 1, (255.0 * v) % 1, (65025.0 * v) % 1, (160581375.0 * v) % 1);\n    let yzww = new Vec4(enc.y / 255, enc.z / 255, enc.w / 255, 0);\n    return enc.subA(yzww);\n}\n\n/**\n * Decode RGBA vector to 32 bit float value.\n * @function\n * @param {Vec4} rgba - RGBA encoded 32 bit float value.\n * @returns {number} - Float value.\n */\nexport function decodeFloatFromRGBA(rgba: Vec4): number {\n    let s = 1.0 - math.step(128.0, rgba.x) * 2.0;\n    let e = 2.0 * math.mod(rgba.x, 128.0) + math.step(128.0, rgba.y) - 127.0;\n    let m = math.mod(rgba.y, 128.0) * 65536.0 + rgba.z * 256.0 + rgba.w + 8388608.0;\n    return s * math.exp2(e) * (m * 1.1920928955078125e-7);\n}\n\n/**\n * Decode RGBA vector to 32 bit float value.\n * @function\n * @param {NumberArray4 | NumberArray3} arr - RGBA encoded 32 bit float value.\n * @param {boolean} [use32=false] Use 32 bit result\n * @returns {number} - Float value.\n */\nexport function decodeFloatFromRGBAArr(arr: NumberArray4 | NumberArray3 | Uint8Array, use32: boolean = false): number {\n    let s = 1.0 - math.step(128.0, arr[0]) * 2.0;\n    let e = 2.0 * math.mod(arr[0], 128.0) + math.step(128.0, arr[1]) - 127.0;\n    let m = math.mod(arr[1], 128.0) * 65536.0 + arr[2] * 256.0 + (use32 ? arr[3] || 0.0 : 0.0) + 8388608.0;\n    return s * math.exp2(e) * (m * 1.1920928955078125e-7);\n}\n\n/**\n * Separate 64 bit value to two 32-bit float values.\n * @function\n * @param {number} value - Double type value.\n * @returns {Float32Array} Encoded array. (exactly 2 entries)\n */\nexport function doubleToTwoFloats(value: number): Float32Array {\n    let high: number, low: number;\n    if (value >= 0.0) {\n        let doubleHigh = Math.floor(value / 65536.0) * 65536.0;\n        high = Math.fround(doubleHigh);\n        low = Math.fround(value - doubleHigh);\n    } else {\n        let doubleHigh = Math.floor(-value / 65536.0) * 65536.0;\n        high = Math.fround(-doubleHigh);\n        low = Math.fround(value + doubleHigh);\n    }\n    return new Float32Array([high, low]);\n}\n\n/**\n * Separate 64 bit value to two 32-bit float values.\n * @function\n * @param {number} value - Double type value.\n * @param {NumberArray2 | Float32Array} - Reference out array.\n * @returns {NumberArray2 | Float32Array} Encoded array. (exactly 2 entries)\n */\nexport function doubleToTwoFloats2(value: number, highLowArr: NumberArray2 | Float32Array): NumberArray2 | Float32Array {\n    if (value >= 0.0) {\n        let doubleHigh = Math.floor(value / 65536.0) * 65536.0;\n        highLowArr[0] = Math.fround(doubleHigh);\n        highLowArr[1] = Math.fround(value - doubleHigh);\n    } else {\n        let doubleHigh = Math.floor(-value / 65536.0) * 65536.0;\n        highLowArr[0] = Math.fround(-doubleHigh);\n        highLowArr[1] = Math.fround(value + doubleHigh);\n    }\n    return highLowArr;\n}\n\n/**\n * Separate 64 bit value to two 32-bit float values.\n * @function\n * @param {number} value - Double type value.\n * @param {Vec2} highLowVec - Reference out vector object.\n * @returns {Vec2} Encoded array. (exactly 2 entries)\n */\nexport function doubleToTwoFloatsV2(value: number, highLowVec: Vec2): Vec2 {\n    if (value >= 0.0) {\n        let doubleHigh = Math.floor(value / 65536.0) * 65536.0;\n        highLowVec.x = Math.fround(doubleHigh);\n        highLowVec.y = Math.fround(value - doubleHigh);\n    } else {\n        let doubleHigh = Math.floor(-value / 65536.0) * 65536.0;\n        highLowVec.x = Math.fround(-doubleHigh);\n        highLowVec.y = Math.fround(value + doubleHigh);\n    }\n    return highLowVec;\n}\n","// @ts-nocheck\n\n/* eslint-disable no-unused-vars */\n/* eslint-disable curly */\n/* eslint-disable operator-linebreak */\n/* eslint-disable no-mixed-operators */\n\n/**\n * @module og/utils/earcut\n */\n\n'use strict';\n\n// ISC License\n//\n// Copyright (c) 2016, Mapbox\n//\n// Permission to use, copy, modify, and/or distribute this software for any purpose\n// with or without fee is hereby granted, provided that the above copyright notice\n// and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n// REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n// INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\n// OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER\n// TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF\n// THIS SOFTWARE.\n//\n//https://github.com/mapbox/earcut\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, size;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (let i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and size are later used to transform coords into integers for z-order calculation\n        size = Math.max(maxX - minX, maxY - minY);\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, size);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) return null;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, size, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && size) indexCurve(ear, minX, minY, size);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (size ? isEarHashed(ear, minX, minY, size) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertice leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, size, 1);\n\n                // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(ear, triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, size, 2);\n\n                // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, size);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, size) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, size),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, size);\n\n    // first look for points inside the triangle in increasing z-order\n    var p = ear.nextZ;\n\n    while (p && p.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.nextZ;\n    }\n\n    // then look for points in decreasing z-order\n    p = ear.prevZ;\n\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return p;\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, size) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, size);\n                earcutLinked(c, triangles, dim, minX, minY, size);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m.next;\n\n    while (p !== stop) {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n            pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    }\n\n    return m;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, size) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, size);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and size of the data bounding box\nfunction zOrder(x, y, minX, minY, size) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) / size;\n    y = 32767 * (y - minY) / size;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n        (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n        (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&\n        locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    if ((equals(p1, q1) && equals(p2, q2)) ||\n        (equals(p1, q2) && equals(p2, q1))) return true;\n    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&\n        area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n            intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n            (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertice index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertice nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nfunction deviation(data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (let i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (let i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n}\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (let i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nfunction flatten(data) {\n    var dim = data[0][0].length,\n        result = { vertices: [], holes: [], dimensions: dim },\n        holeIndex = 0;\n\n    for (let i = 0; i < data.length; i++) {\n        for (let j = 0; j < data[i].length; j++) {\n            for (let d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n}\n\nexport { earcut, flatten };\n","import * as mercator from \"../mercator\";\nimport * as quadTree from \"../quadTree/quadTree\";\nimport {Extent} from \"../Extent\";\nimport {Handler, WebGLBufferExt} from \"../webgl/Handler\";\nimport {doubleToTwoFloatsV2} from \"../math/coder\";\nimport {Vector} from \"../layer/Vector\";\nimport {NumberArray2, Vec2} from \"../math/Vec2\";\nimport {Node} from \"../quadTree/Node\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Vec4} from \"../math/Vec4\";\nimport {\n    CoordinatesType,\n    Geometry,\n    GeometryTypeEnum,\n    ILineStringCoordinates,\n    IMultiLineStringCoordinates,\n    IMultiPolygonCoordinates,\n    IPolygonCoordinates\n} from \"./Geometry\";\n\nimport {earcut, flatten} from \"../utils/earcut\";\n\nconst POLYVERTICES_BUFFER = 0;\nconst POLYINDEXES_BUFFER = 1;\nconst POLYCOLORS_BUFFER = 2;\nconst LINEVERTICES_BUFFER = 3;\nconst LINEINDEXES_BUFFER = 4;\nconst LINEORDERS_BUFFER = 5;\nconst LINECOLORS_BUFFER = 6;\nconst LINETHICKNESS_BUFFER = 7;\nconst LINESTROKES_BUFFER = 8;\nconst LINESTROKECOLORS_BUFFER = 9;\nconst POLYPICKINGCOLORS_BUFFER = 10;\nconst LINEPICKINGCOLORS_BUFFER = 11;\n\nfunction doubleToTwoFloats(v: NumberArray2, high: Vec2, low: Vec2) {\n    let x = v[0],\n        y = v[1];\n\n    if (x >= 0.0) {\n        let doubleHigh = Math.floor(x / 65536.0) * 65536.0;\n        high.x = Math.fround(doubleHigh);\n        low.x = Math.fround(x - doubleHigh);\n    } else {\n        let doubleHigh = Math.floor(-x / 65536.0) * 65536.0;\n        high.x = Math.fround(-doubleHigh);\n        low.x = Math.fround(x + doubleHigh);\n    }\n\n    if (y >= 0.0) {\n        let doubleHigh = Math.floor(y / 65536.0) * 65536.0;\n        high.y = Math.fround(doubleHigh);\n        low.y = Math.fround(y - doubleHigh);\n    } else {\n        let doubleHigh = Math.floor(-y / 65536.0) * 65536.0;\n        high.y = Math.fround(-doubleHigh);\n        low.y = Math.fround(y + doubleHigh);\n    }\n}\n\nlet tempHigh = new Vec2(),\n    tempLow = new Vec2(),\n    tempHighLow = new Vec2();\n\nclass GeometryHandler {\n\n    static __counter__: number = 0;\n\n    protected __id: number;\n\n    protected _layer: Vector;\n\n    protected _handler: Handler | null;\n\n    protected _geometries: Geometry[];\n\n    protected _updatedGeometryArr: Geometry[];\n    protected _updatedGeometry: Record<number, boolean>;\n\n    protected _removeGeometryExtentArr: Extent[];\n    protected _removeGeometryExtents: Record<number, boolean>;\n\n    // Polygon arrays\n    protected _polyVerticesHighMerc: number[];\n    protected _polyVerticesLowMerc: number[];\n    protected _polyColors: number[];\n    protected _polyPickingColors: number[];\n    protected _polyIndexes: number[];\n\n    // Line arrays\n    protected _lineVerticesHighMerc: number[];\n    protected _lineVerticesLowMerc: number[];\n    protected _lineOrders: number[];\n    protected _lineIndexes: number[];\n    protected _lineColors: number[];\n    protected _linePickingColors: number[];\n    protected _lineThickness: number[];\n    protected _lineStrokes: number[];\n    protected _lineStrokeColors: number[];\n\n    // Buffers\n    public _polyVerticesHighBufferMerc: WebGLBufferExt | null;\n    public _polyVerticesLowBufferMerc: WebGLBufferExt | null;\n    public _polyColorsBuffer: WebGLBufferExt | null;\n    public _polyPickingColorsBuffer: WebGLBufferExt | null;\n    public _polyIndexesBuffer: WebGLBufferExt | null;\n\n    public _lineVerticesHighBufferMerc: WebGLBufferExt | null;\n    public _lineVerticesLowBufferMerc: WebGLBufferExt | null;\n    public _lineColorsBuffer: WebGLBufferExt | null;\n    public _linePickingColorsBuffer: WebGLBufferExt | null;\n    public _lineThicknessBuffer: WebGLBufferExt | null;\n    public _lineStrokesBuffer: WebGLBufferExt | null;\n    public _lineStrokeColorsBuffer: WebGLBufferExt | null;\n    public _lineOrdersBuffer: WebGLBufferExt | null;\n    public _lineIndexesBuffer: WebGLBufferExt | null;\n\n    protected _buffersUpdateCallbacks: Function[];\n\n    protected _changedBuffers: boolean[];\n\n    constructor(layer: Vector) {\n        this.__id = GeometryHandler.__counter__++;\n\n        this._layer = layer;\n\n        this._handler = null;\n\n        this._geometries = [];\n\n        this._updatedGeometryArr = [];\n        this._updatedGeometry = {};\n\n        this._removeGeometryExtentArr = [];\n        this._removeGeometryExtents = {};\n\n        // Polygon arrays\n        this._polyVerticesHighMerc = [];\n        this._polyVerticesLowMerc = [];\n        this._polyColors = [];\n        this._polyPickingColors = [];\n        this._polyIndexes = [];\n\n        // Line arrays\n        this._lineVerticesHighMerc = [];\n        this._lineVerticesLowMerc = [];\n        this._lineOrders = [];\n        this._lineIndexes = [];\n        this._lineColors = [];\n        this._linePickingColors = [];\n        this._lineThickness = [];\n        this._lineStrokes = [];\n        this._lineStrokeColors = [];\n\n        // Buffers\n        this._polyVerticesHighBufferMerc = null;\n        this._polyVerticesLowBufferMerc = null;\n        this._polyColorsBuffer = null;\n        this._polyPickingColorsBuffer = null;\n        this._polyIndexesBuffer = null;\n\n        this._lineVerticesHighBufferMerc = null;\n        this._lineVerticesLowBufferMerc = null;\n        this._lineColorsBuffer = null;\n        this._linePickingColorsBuffer = null;\n        this._lineThicknessBuffer = null;\n        this._lineStrokesBuffer = null;\n        this._lineStrokeColorsBuffer = null;\n        this._lineOrdersBuffer = null;\n        this._lineIndexesBuffer = null;\n\n        this._buffersUpdateCallbacks = [];\n        this._buffersUpdateCallbacks[POLYVERTICES_BUFFER] = this.createPolyVerticesBuffer;\n        this._buffersUpdateCallbacks[POLYINDEXES_BUFFER] = this.createPolyIndexesBuffer;\n        this._buffersUpdateCallbacks[POLYCOLORS_BUFFER] = this.createPolyColorsBuffer;\n        this._buffersUpdateCallbacks[LINEVERTICES_BUFFER] = this.createLineVerticesBuffer;\n        this._buffersUpdateCallbacks[LINEINDEXES_BUFFER] = this.createLineIndexesBuffer;\n        this._buffersUpdateCallbacks[LINEORDERS_BUFFER] = this.createLineOrdersBuffer;\n        this._buffersUpdateCallbacks[LINECOLORS_BUFFER] = this.createLineColorsBuffer;\n        this._buffersUpdateCallbacks[LINETHICKNESS_BUFFER] = this.createLineThicknessBuffer;\n        this._buffersUpdateCallbacks[LINESTROKES_BUFFER] = this.createLineStrokesBuffer;\n        this._buffersUpdateCallbacks[LINESTROKECOLORS_BUFFER] = this.createLineStrokeColorsBuffer;\n        this._buffersUpdateCallbacks[POLYPICKINGCOLORS_BUFFER] = this.createPolyPickingColorsBuffer;\n        this._buffersUpdateCallbacks[LINEPICKINGCOLORS_BUFFER] = this.createLinePickingColorsBuffer;\n\n        this._changedBuffers = new Array(this._buffersUpdateCallbacks.length);\n    }\n\n    static appendLineData(\n        pathArr: CoordinatesType[][],\n        isClosed: boolean,\n        color: Vec4,\n        pickingColor: Vec3,\n        thickness: number,\n        strokeColor: Vec4,\n        strokeSize: number,\n        outVerticesHigh: number[],\n        outVerticesLow: number[],\n        outOrders: number[],\n        outIndexes: number[],\n        outColors: number[],\n        outPickingColors: number[],\n        outThickness: number[],\n        outStrokeColors: number[],\n        outStrokes: number[],\n        outVerticesHigh2: number[],\n        outVerticesLow2: number[]\n    ) {\n        var index = 0;\n\n        if (outIndexes.length > 0) {\n            index = outIndexes[outIndexes.length - 5] + 9;\n            outIndexes.push(index, index);\n        } else {\n            outIndexes.push(0, 0);\n        }\n\n        var t = thickness,\n            c = [color.x, color.y, color.z, color.w],\n            s = strokeSize,\n            sc = [strokeColor.x, strokeColor.y, strokeColor.z, strokeColor.w],\n            p = [pickingColor.x, pickingColor.y, pickingColor.z, 1.0];\n\n        for (let j = 0; j < pathArr.length; j++) {\n            var path = pathArr[j];\n\n            if (path.length === 0) {\n                continue;\n            }\n\n            let startIndex = index;\n            let last: CoordinatesType;\n            if (isClosed) {\n                last = path[path.length - 1];\n            } else {\n                let p0 = path[0],\n                    p1 = path[1];\n\n                if (!p1) {\n                    p1 = p0;\n                }\n\n                last = [p0[0] + p0[0] - p1[0], p0[1] + p0[1] - p1[1]];\n            }\n\n            doubleToTwoFloats(last as NumberArray2, tempHigh, tempLow);\n\n            outVerticesHigh.push(\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y\n            );\n            outVerticesLow.push(\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y\n            );\n\n            outVerticesHigh2.push(\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y\n            );\n            outVerticesLow2.push(\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y\n            );\n\n            outOrders.push(1, -1, 2, -2);\n\n            outThickness.push(t, t, t, t);\n            outStrokes.push(s, s, s, s);\n            outColors.push(\n                c[0], c[1], c[2], c[3],\n                c[0], c[1], c[2], c[3],\n                c[0], c[1], c[2], c[3],\n                c[0], c[1], c[2], c[3]\n            );\n            outStrokeColors.push(\n                sc[0], sc[1], sc[2], sc[3],\n                sc[0], sc[1], sc[2], sc[3],\n                sc[0], sc[1], sc[2], sc[3],\n                sc[0], sc[1], sc[2], sc[3]\n            );\n            outPickingColors.push(\n                p[0], p[1], p[2], p[3],\n                p[0], p[1], p[2], p[3],\n                p[0], p[1], p[2], p[3],\n                p[0], p[1], p[2], p[3]\n            );\n\n            for (let i = 0; i < path.length; i++) {\n                let cur = path[i];\n\n                doubleToTwoFloats(cur as NumberArray2, tempHigh, tempLow);\n\n                outVerticesHigh.push(\n                    tempHigh.x, tempHigh.y,\n                    tempHigh.x, tempHigh.y,\n                    tempHigh.x, tempHigh.y,\n                    tempHigh.x, tempHigh.y\n                );\n                outVerticesLow.push(\n                    tempLow.x, tempLow.y,\n                    tempLow.x, tempLow.y,\n                    tempLow.x, tempLow.y,\n                    tempLow.x, tempLow.y\n                );\n\n                outVerticesHigh2.push(\n                    tempHigh.x, tempHigh.y,\n                    tempHigh.x, tempHigh.y,\n                    tempHigh.x, tempHigh.y,\n                    tempHigh.x, tempHigh.y\n                );\n                outVerticesLow2.push(\n                    tempLow.x, tempLow.y,\n                    tempLow.x, tempLow.y,\n                    tempLow.x, tempLow.y,\n                    tempLow.x, tempLow.y\n                );\n\n                outOrders.push(1, -1, 2, -2);\n                outThickness.push(t, t, t, t);\n                outStrokes.push(s, s, s, s);\n                outColors.push(\n                    c[0], c[1], c[2], c[3],\n                    c[0], c[1], c[2], c[3],\n                    c[0], c[1], c[2], c[3],\n                    c[0], c[1], c[2], c[3]\n                );\n                outStrokeColors.push(\n                    sc[0], sc[1], sc[2], sc[3],\n                    sc[0], sc[1], sc[2], sc[3],\n                    sc[0], sc[1], sc[2], sc[3],\n                    sc[0], sc[1], sc[2], sc[3]\n                );\n                outPickingColors.push(\n                    p[0], p[1], p[2], p[3],\n                    p[0], p[1], p[2], p[3],\n                    p[0], p[1], p[2], p[3],\n                    p[0], p[1], p[2], p[3]\n                );\n                outIndexes.push(index++, index++, index++, index++);\n            }\n\n            let first: CoordinatesType;\n            if (isClosed) {\n                first = path[0];\n                outIndexes.push(startIndex, startIndex + 1, startIndex + 1, startIndex + 1);\n            } else {\n                let p0 = path[path.length - 1],\n                    p1 = path[path.length - 2];\n\n                if (!p1) {\n                    p1 = p0;\n                }\n\n                first = [p0[0] + p0[0] - p1[0], p0[1] + p0[1] - p1[1]];\n                outIndexes.push(index - 1, index - 1, index - 1, index - 1);\n            }\n\n            doubleToTwoFloats(first as NumberArray2, tempHigh, tempLow);\n\n            outVerticesHigh.push(\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y\n            );\n            outVerticesLow.push(\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y\n            );\n\n            outVerticesHigh2.push(\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y,\n                tempHigh.x, tempHigh.y\n            );\n            outVerticesLow2.push(\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y,\n                tempLow.x, tempLow.y\n            );\n\n            outOrders.push(1, -1, 2, -2);\n            outThickness.push(t, t, t, t);\n            outStrokes.push(s, s, s, s);\n            outColors.push(\n                c[0], c[1], c[2], c[3],\n                c[0], c[1], c[2], c[3],\n                c[0], c[1], c[2], c[3],\n                c[0], c[1], c[2], c[3]\n            );\n            outStrokeColors.push(\n                sc[0], sc[1], sc[2], sc[3],\n                sc[0], sc[1], sc[2], sc[3],\n                sc[0], sc[1], sc[2], sc[3],\n                sc[0], sc[1], sc[2], sc[3]\n            );\n            outPickingColors.push(\n                p[0], p[1], p[2], p[3],\n                p[0], p[1], p[2], p[3],\n                p[0], p[1], p[2], p[3],\n                p[0], p[1], p[2], p[3]\n            );\n\n            if (j < pathArr.length - 1) {\n                index += 8;\n                outIndexes.push(index, index);\n            }\n        }\n    }\n\n    public assignHandler(handler: Handler) {\n        this._handler = handler;\n        this.refresh();\n        if (handler.isInitialized()) {\n            this.update();\n        }\n    }\n\n    /**\n     * @public\n     * @param {Geometry} geometry - Geometry object.\n     */\n    public add(geometry: Geometry) {\n        //\n        // Triangulates polygon and sets geometry data.\n        if (geometry._handlerIndex === -1) {\n            geometry._handler = this;\n            geometry._handlerIndex = this._geometries.length;\n\n            this._geometries.push(geometry);\n\n            let pickingColor = geometry._entity!._pickingColor.scaleTo(1 / 255);\n\n            geometry._polyVerticesHighMerc = [];\n            geometry._polyVerticesLowMerc = [];\n            geometry._lineVerticesHighMerc = [];\n            geometry._lineVerticesLowMerc = [];\n\n            if ((geometry._coordinates as IPolygonCoordinates)[0].length) {\n                if (geometry.type === GeometryTypeEnum.POLYGON) {\n                    let coordinates = geometry._coordinates as IPolygonCoordinates;\n                    let ci: IPolygonCoordinates = [];\n                    for (let j = 0; j < coordinates.length; j++) {\n                        ci[j] = [];\n                        for (let k = 0; k < coordinates[j].length; k++) {\n                            ci[j][k] = [mercator.forward_lon(coordinates[j][k][0]), mercator.forward_lat(coordinates[j][k][1])];\n                        }\n                    }\n\n                    let data = flatten(ci);\n                    let indexes: number[] = earcut(data.vertices, data.holes, 2);\n\n                    geometry._polyVerticesHandlerIndex = this._polyVerticesHighMerc.length;\n                    geometry._polyIndexesHandlerIndex = this._polyIndexes.length;\n\n                    for (let i = 0; i < indexes.length; i++) {\n                        this._polyIndexes.push(indexes[i] + geometry._polyVerticesHandlerIndex * 0.5);\n                    }\n\n                    let color = geometry._style.fillColor;\n\n                    let verticesHigh = [],\n                        verticesLow = [];\n\n                    for (let i = 0; i < data.vertices.length * 0.5; i++) {\n                        this._polyColors.push(color.x, color.y, color.z, color.w);\n                        this._polyPickingColors.push(pickingColor.x, pickingColor.y, pickingColor.z, 1.0);\n                    }\n\n                    for (let i = 0; i < data.vertices.length; i++) {\n                        doubleToTwoFloatsV2(data.vertices[i], tempHighLow);\n                        verticesHigh[i] = tempHighLow.x;\n                        verticesLow[i] = tempHighLow.y;\n                    }\n\n                    geometry._polyVerticesHighMerc = verticesHigh;\n                    geometry._polyVerticesLowMerc = verticesLow;\n\n                    this._polyVerticesHighMerc.push.apply(this._polyVerticesHighMerc, verticesHigh);\n                    this._polyVerticesLowMerc.push.apply(this._polyVerticesLowMerc, verticesLow);\n\n                    geometry._polyVerticesLength = data.vertices.length;\n                    geometry._polyIndexesLength = indexes.length;\n\n                    // Creates polygon stroke data\n                    geometry._lineVerticesHandlerIndex = this._lineVerticesHighMerc.length;\n                    geometry._lineOrdersHandlerIndex = this._lineOrders.length;\n                    geometry._lineIndexesHandlerIndex = this._lineIndexes.length;\n                    geometry._lineColorsHandlerIndex = this._lineColors.length;\n                    geometry._lineThicknessHandlerIndex = this._lineThickness.length;\n\n                    GeometryHandler.appendLineData(\n                        ci,\n                        true,\n                        geometry._style.lineColor,\n                        pickingColor,\n                        geometry._style.lineWidth,\n                        geometry._style.strokeColor,\n                        geometry._style.strokeWidth,\n                        this._lineVerticesHighMerc,\n                        this._lineVerticesLowMerc,\n                        this._lineOrders,\n                        this._lineIndexes,\n                        this._lineColors,\n                        this._linePickingColors,\n                        this._lineThickness,\n                        this._lineStrokeColors,\n                        this._lineStrokes,\n                        geometry._lineVerticesHighMerc,\n                        geometry._lineVerticesLowMerc\n                    );\n\n                    geometry._lineVerticesLength = this._lineVerticesHighMerc.length - geometry._lineVerticesHandlerIndex;\n                    geometry._lineOrdersLength = this._lineOrders.length - geometry._lineOrdersHandlerIndex;\n                    geometry._lineIndexesLength = this._lineIndexes.length - geometry._lineIndexesHandlerIndex;\n                    geometry._lineColorsLength = this._lineColors.length - geometry._lineColorsHandlerIndex;\n                    geometry._lineThicknessLength = this._lineThickness.length - geometry._lineThicknessHandlerIndex;\n\n                } else if (geometry.type === GeometryTypeEnum.MULTIPOLYGON) {\n\n                    let coordinates = geometry._coordinates as IMultiPolygonCoordinates;\n                    let vertices: number[] = [],\n                        indexes: number[] = [];\n\n                    // Creates polygon stroke data\n                    geometry._lineVerticesHandlerIndex = this._lineVerticesHighMerc.length;\n                    geometry._lineOrdersHandlerIndex = this._lineOrders.length;\n                    geometry._lineIndexesHandlerIndex = this._lineIndexes.length;\n                    geometry._lineColorsHandlerIndex = this._lineColors.length;\n                    geometry._lineThicknessHandlerIndex = this._lineThickness.length;\n\n                    for (let i = 0; i < coordinates.length; i++) {\n                        let cci: CoordinatesType[][] = coordinates[i];\n                        let ci: CoordinatesType[][] = [];\n                        for (let j = 0; j < cci.length; j++) {\n                            ci[j] = [];\n                            for (let k = 0; k < coordinates[i][j].length; k++) {\n                                ci[j][k] = [mercator.forward_lon(cci[j][k][0]), mercator.forward_lat(cci[j][k][1])];\n                            }\n                        }\n                        let data = flatten(ci);\n                        let dataIndexes: number[] = earcut(data.vertices, data.holes, 2);\n\n                        for (let j = 0; j < dataIndexes.length; j++) {\n                            indexes.push(dataIndexes[j] + vertices.length * 0.5);\n                        }\n\n                        vertices.push.apply(vertices, data.vertices);\n\n                        GeometryHandler.appendLineData(\n                            ci,\n                            true,\n                            geometry._style.lineColor,\n                            pickingColor,\n                            geometry._style.lineWidth,\n                            geometry._style.strokeColor,\n                            geometry._style.strokeWidth,\n                            this._lineVerticesHighMerc,\n                            this._lineVerticesLowMerc,\n                            this._lineOrders,\n                            this._lineIndexes,\n                            this._lineColors,\n                            this._linePickingColors,\n                            this._lineThickness,\n                            this._lineStrokeColors,\n                            this._lineStrokes,\n                            geometry._lineVerticesHighMerc,\n                            geometry._lineVerticesLowMerc\n                        );\n                    }\n\n                    geometry._polyVerticesHandlerIndex = this._polyVerticesHighMerc.length;\n                    geometry._polyIndexesHandlerIndex = this._polyIndexes.length;\n\n                    for (let i = 0; i < indexes.length; i++) {\n                        this._polyIndexes.push(indexes[i] + geometry._polyVerticesHandlerIndex * 0.5);\n                    }\n\n                    let color = geometry._style.fillColor;\n\n                    let verticesHigh = [],\n                        verticesLow = [];\n\n                    for (let i = 0; i < vertices.length * 0.5; i++) {\n                        this._polyColors.push(color.x, color.y, color.z, color.w);\n                        this._polyPickingColors.push(\n                            pickingColor.x,\n                            pickingColor.y,\n                            pickingColor.z,\n                            1.0\n                        );\n                    }\n\n                    for (let i = 0; i < vertices.length; i++) {\n                        doubleToTwoFloatsV2(vertices[i], tempHighLow);\n                        verticesHigh[i] = tempHighLow.x;\n                        verticesLow[i] = tempHighLow.y;\n                    }\n\n                    geometry._polyVerticesHighMerc = verticesHigh;\n                    geometry._polyVerticesLowMerc = verticesLow;\n\n                    this._polyVerticesHighMerc.push.apply(this._polyVerticesHighMerc, verticesHigh);\n                    this._polyVerticesLowMerc.push.apply(this._polyVerticesLowMerc, verticesLow);\n\n                    geometry._polyVerticesLength = vertices.length;\n                    geometry._polyIndexesLength = indexes.length;\n\n                    geometry._lineVerticesLength = this._lineVerticesHighMerc.length - geometry._lineVerticesHandlerIndex;\n                    geometry._lineOrdersLength = this._lineOrders.length - geometry._lineOrdersHandlerIndex;\n                    geometry._lineIndexesLength = this._lineIndexes.length - geometry._lineIndexesHandlerIndex;\n                    geometry._lineColorsLength = this._lineColors.length - geometry._lineColorsHandlerIndex;\n                    geometry._lineThicknessLength = this._lineThickness.length - geometry._lineThicknessHandlerIndex;\n\n                } else if (geometry.type === GeometryTypeEnum.LINESTRING) {\n\n                    let coordinates: ILineStringCoordinates = geometry._coordinates as ILineStringCoordinates;\n                    let ci = new Array(coordinates.length);\n                    for (let j = 0; j < coordinates.length; j++) {\n                        ci[j] = [mercator.forward_lon(coordinates[j][0]), mercator.forward_lat(coordinates[j][1])];\n                    }\n\n                    // Creates polygon stroke data\n                    geometry._lineVerticesHandlerIndex = this._lineVerticesHighMerc.length;\n                    geometry._lineOrdersHandlerIndex = this._lineOrders.length;\n                    geometry._lineIndexesHandlerIndex = this._lineIndexes.length;\n                    geometry._lineColorsHandlerIndex = this._lineColors.length;\n                    geometry._lineThicknessHandlerIndex = this._lineThickness.length;\n\n                    GeometryHandler.appendLineData(\n                        [ci],\n                        false,\n                        geometry._style.lineColor,\n                        pickingColor,\n                        geometry._style.lineWidth,\n                        geometry._style.strokeColor,\n                        geometry._style.strokeWidth,\n                        this._lineVerticesHighMerc,\n                        this._lineVerticesLowMerc,\n                        this._lineOrders,\n                        this._lineIndexes,\n                        this._lineColors,\n                        this._linePickingColors,\n                        this._lineThickness,\n                        this._lineStrokeColors,\n                        this._lineStrokes,\n                        geometry._lineVerticesHighMerc,\n                        geometry._lineVerticesLowMerc\n                    );\n\n                    geometry._lineVerticesLength = this._lineVerticesHighMerc.length - geometry._lineVerticesHandlerIndex;\n                    geometry._lineOrdersLength = this._lineOrders.length - geometry._lineOrdersHandlerIndex;\n                    geometry._lineIndexesLength = this._lineIndexes.length - geometry._lineIndexesHandlerIndex;\n                    geometry._lineColorsLength = this._lineColors.length - geometry._lineColorsHandlerIndex;\n                    geometry._lineThicknessLength = this._lineThickness.length - geometry._lineThicknessHandlerIndex;\n\n                } else if (geometry.type === GeometryTypeEnum.MULTILINESTRING) {\n\n                    let coordinates = geometry._coordinates as IMultiLineStringCoordinates;\n                    let ci: IMultiLineStringCoordinates = [];\n                    for (let j = 0; j < coordinates.length; j++) {\n                        ci[j] = [];\n                        for (let k = 0; k < coordinates[j].length; k++) {\n                            ci[j][k] = [mercator.forward_lon(coordinates[j][k][0]), mercator.forward_lat(coordinates[j][k][1])];\n                        }\n                    }\n\n                    // Creates polygon stroke data\n                    geometry._lineVerticesHandlerIndex = this._lineVerticesHighMerc.length;\n                    geometry._lineOrdersHandlerIndex = this._lineOrders.length;\n                    geometry._lineIndexesHandlerIndex = this._lineIndexes.length;\n                    geometry._lineColorsHandlerIndex = this._lineColors.length;\n                    geometry._lineThicknessHandlerIndex = this._lineThickness.length;\n\n                    GeometryHandler.appendLineData(\n                        ci,\n                        false,\n                        geometry._style.lineColor,\n                        pickingColor,\n                        geometry._style.lineWidth,\n                        geometry._style.strokeColor,\n                        geometry._style.strokeWidth,\n                        this._lineVerticesHighMerc,\n                        this._lineVerticesLowMerc,\n                        this._lineOrders,\n                        this._lineIndexes,\n                        this._lineColors,\n                        this._linePickingColors,\n                        this._lineThickness,\n                        this._lineStrokeColors,\n                        this._lineStrokes,\n                        geometry._lineVerticesHighMerc,\n                        geometry._lineVerticesLowMerc\n                    );\n\n                    geometry._lineVerticesLength = this._lineVerticesHighMerc.length - geometry._lineVerticesHandlerIndex;\n                    geometry._lineOrdersLength = this._lineOrders.length - geometry._lineOrdersHandlerIndex;\n                    geometry._lineIndexesLength = this._lineIndexes.length - geometry._lineIndexesHandlerIndex;\n                    geometry._lineColorsLength = this._lineColors.length - geometry._lineColorsHandlerIndex;\n                    geometry._lineThicknessLength = this._lineThickness.length - geometry._lineThicknessHandlerIndex;\n                }\n            }\n\n            // Refresh visibility\n            this.setGeometryVisibility(geometry);\n\n            !this._updatedGeometry[geometry.__id] && this._updatedGeometryArr.push(geometry);\n            this._updatedGeometry[geometry.__id] = true;\n            this.refresh();\n        }\n    }\n\n    public remove(geometry: Geometry) {\n\n        const index = geometry._handlerIndex;\n        if (index !== -1) {\n            this._geometries.splice(index, 1);\n\n            // polygon\n            // this._polyVerticesLonLat.splice(geometry._polyVerticesHandlerIndex, geometry._polyVerticesLength);\n\n            this._polyVerticesHighMerc.splice(geometry._polyVerticesHandlerIndex, geometry._polyVerticesLength);\n            this._polyVerticesLowMerc.splice(geometry._polyVerticesHandlerIndex, geometry._polyVerticesLength);\n\n            this._polyColors.splice(geometry._polyVerticesHandlerIndex * 2, geometry._polyVerticesLength * 2);\n            this._polyPickingColors.splice(geometry._polyVerticesHandlerIndex * 2, geometry._polyVerticesLength * 2);\n            this._polyIndexes.splice(geometry._polyIndexesHandlerIndex, geometry._polyIndexesLength);\n\n            let di = geometry._polyVerticesLength * 0.5;\n            for (let i = geometry._polyIndexesHandlerIndex; i < this._polyIndexes.length; i++) {\n                this._polyIndexes[i] -= di;\n            }\n\n            // line\n            // this._lineVerticesLonLat.splice(geometry._lineVerticesHandlerIndex, geometry._lineVerticesLength);\n\n            this._lineVerticesHighMerc.splice(geometry._lineVerticesHandlerIndex, geometry._lineVerticesLength);\n            this._lineVerticesLowMerc.splice(geometry._lineVerticesHandlerIndex, geometry._lineVerticesLength);\n\n            this._lineOrders.splice(geometry._lineOrdersHandlerIndex, geometry._lineOrdersLength);\n            this._lineColors.splice(geometry._lineColorsHandlerIndex, geometry._lineColorsLength);\n            this._linePickingColors.splice(geometry._lineColorsHandlerIndex, geometry._lineColorsLength);\n            this._lineStrokeColors.splice(geometry._lineColorsHandlerIndex, geometry._lineColorsLength);\n            this._lineThickness.splice(geometry._lineThicknessHandlerIndex, geometry._lineThicknessLength);\n            this._lineStrokes.splice(geometry._lineThicknessHandlerIndex, geometry._lineThicknessLength);\n            this._lineIndexes.splice(geometry._lineIndexesHandlerIndex, geometry._lineIndexesLength);\n\n            di = geometry._lineVerticesLength * 0.5;\n            for (let i = geometry._lineIndexesHandlerIndex; i < this._lineIndexes.length; i++) {\n                this._lineIndexes[i] -= di;\n            }\n\n            // reindex\n            let g = this._geometries;\n            for (let i = index; i < g.length; i++) {\n                let gi = g[i];\n\n                gi._handlerIndex = i;\n                gi._polyVerticesHandlerIndex -= geometry._polyVerticesLength;\n                gi._polyIndexesHandlerIndex -= geometry._polyIndexesLength;\n\n                gi._lineVerticesHandlerIndex -= geometry._lineVerticesLength;\n                gi._lineOrdersHandlerIndex -= geometry._lineOrdersLength;\n                gi._lineColorsHandlerIndex -= geometry._lineColorsLength;\n                gi._lineThicknessHandlerIndex -= geometry._lineThicknessLength;\n                gi._lineIndexesHandlerIndex -= geometry._lineIndexesLength;\n            }\n\n\n            geometry._pickingReady = false;\n\n            geometry._handler = null;\n            geometry._handlerIndex = -1;\n\n            geometry._polyVerticesHighMerc = [];\n            geometry._polyVerticesLowMerc = [];\n            geometry._polyVerticesLength = -1;\n            geometry._polyIndexesLength = -1;\n            geometry._polyVerticesHandlerIndex = -1;\n            geometry._polyIndexesHandlerIndex = -1;\n\n            geometry._lineVerticesHighMerc = [];\n            geometry._lineVerticesLowMerc = [];\n            geometry._lineVerticesLength = -1;\n            geometry._lineOrdersLength = -1;\n            geometry._lineIndexesLength = -1;\n            geometry._lineColorsLength = -1;\n            geometry._lineThicknessLength = -1;\n            geometry._lineVerticesHandlerIndex = -1;\n            geometry._lineOrdersHandlerIndex = -1;\n            geometry._lineIndexesHandlerIndex = -1;\n            geometry._lineThicknessHandlerIndex = -1;\n            geometry._lineColorsHandlerIndex = -1;\n\n            !this._removeGeometryExtents[geometry.__id] && this._removeGeometryExtentArr.push(geometry.getExtent());\n            this._removeGeometryExtents[geometry.__id] = true;\n\n            this.refresh();\n        }\n    }\n\n    protected _refreshRecursevely(geometry: Geometry, treeNode: Node) {\n        if (treeNode.ready) {\n            let lid = this._layer._id;\n            for (let i = 0; i < treeNode.nodes.length; i++) {\n                let ni = treeNode.nodes[i];\n                if (geometry.overlaps(ni.segment.getExtentLonLat())) {\n                    this._refreshRecursevely(geometry, ni);\n                    let m = ni.segment.materials[lid];\n                    if (m && m.isReady) {\n                        if (m.segment.node.getState() !== quadTree.RENDERING) {\n                            m.layer.clearMaterial(m);\n                        } else {\n                            m.pickingReady = m.pickingReady && geometry._pickingReady;\n                            m.isReady = false;\n                            m._updateTexture = m.texture;\n                            m._updatePickingMask = m.pickingMask;\n                        }\n\n                        geometry._pickingReady = true;\n                    }\n                }\n            }\n        }\n    }\n\n    protected _refreshRecursevelyExt(extent: Extent, treeNode: Node) {\n        if (treeNode.ready) {\n            let lid = this._layer.__id;\n            for (let i = 0; i < treeNode.nodes.length; i++) {\n                let ni = treeNode.nodes[i];\n                if (extent.overlaps(ni.segment.getExtentLonLat())) {\n                    this._refreshRecursevelyExt(extent, ni);\n                    let m = ni.segment.materials[lid];\n                    if (m && m.isReady) {\n                        m.layer.clearMaterial(m);\n                        // m.pickingReady = false;\n                        // m.isReady = false;\n                        // m._updateTexture = m.texture;\n                        // m._updatePickingMask = m.pickingMask;\n                    }\n                }\n            }\n        }\n    }\n\n    protected _refreshPlanetNode(treeNode: Node) {\n        let i;\n\n        let e = this._removeGeometryExtentArr;\n        for (i = 0; i < e.length; i++) {\n            this._refreshRecursevelyExt(e[i], treeNode);\n        }\n\n        let g = this._updatedGeometryArr;\n        for (i = 0; i < g.length; i++) {\n            this._refreshRecursevely(g[i], treeNode);\n        }\n    }\n\n    protected _updatePlanet() {\n        let p = this._layer._planet;\n        if (p) {\n            let ql = p.quadTreeStrategy.quadTreeList;\n            for (let i = 0; i < ql.length; i++) {\n                this._refreshPlanetNode(ql[i]);\n            }\n            // p.quadTreeStrategy.quadTreeList.forEach((quadTree: Node) => {\n            //     this._refreshPlanetNode(quadTree);\n            // });\n        }\n        this._updatedGeometryArr.length = 0;\n        this._updatedGeometryArr = [];\n        this._updatedGeometry = {};\n\n        this._removeGeometryExtentArr.length = 0;\n        this._removeGeometryExtentArr = [];\n        this._removeGeometryExtents = {};\n    }\n\n    protected refresh() {\n        let i = this._changedBuffers.length;\n        while (i--) {\n            this._changedBuffers[i] = true;\n        }\n    }\n\n    public update() {\n        if (this._handler) {\n            let needUpdate = false;\n            let i = this._changedBuffers.length;\n            while (i--) {\n                if (this._changedBuffers[i]) {\n                    needUpdate = true;\n                    this._buffersUpdateCallbacks[i].call(this);\n                    this._changedBuffers[i] = false;\n                }\n            }\n            needUpdate && this._updatePlanet();\n        }\n    }\n\n    public setGeometryVisibility(geometry: Geometry) {\n        let v = geometry.getVisibility() ? 1.0 : 0.0;\n\n        let a = this._polyVerticesHighMerc,\n            b = this._polyVerticesLowMerc;\n\n        let l = geometry._polyVerticesLength;\n        let ind = geometry._polyVerticesHandlerIndex;\n        for (let i = 0; i < l; i++) {\n            a[ind + i] = geometry._polyVerticesHighMerc[i] * v;\n            b[ind + i] = geometry._polyVerticesLowMerc[i] * v;\n        }\n\n        a = this._lineVerticesHighMerc;\n        b = this._lineVerticesLowMerc;\n\n        l = geometry._lineVerticesLength;\n        ind = geometry._lineVerticesHandlerIndex;\n        for (let i = 0; i < l; i++) {\n            a[ind + i] = geometry._lineVerticesHighMerc[i] * v;\n            b[ind + i] = geometry._lineVerticesLowMerc[i] * v;\n        }\n\n        this._changedBuffers[POLYVERTICES_BUFFER] = true;\n        this._changedBuffers[LINEVERTICES_BUFFER] = true;\n\n        !this._updatedGeometry[geometry.__id] && this._updatedGeometryArr.push(geometry);\n        this._updatedGeometry[geometry.__id] = true;\n    }\n\n    public setPolyColorArr(geometry: Geometry, color: Vec4) {\n        let index = geometry._polyVerticesHandlerIndex * 2, // ... / 2 * 4\n            size = index + geometry._polyVerticesLength * 2; // ... / 2 * 4\n        let a = this._polyColors;\n        for (let i = index; i < size; i += 4) {\n            a[i] = color.x;\n            a[i + 1] = color.y;\n            a[i + 2] = color.z;\n            a[i + 3] = color.w;\n        }\n        this._changedBuffers[POLYCOLORS_BUFFER] = true;\n        !this._updatedGeometry[geometry.__id] && this._updatedGeometryArr.push(geometry);\n        this._updatedGeometry[geometry.__id] = true;\n    }\n\n    public setLineStrokeColorArr(geometry: Geometry, color: Vec4) {\n        let index = geometry._lineColorsHandlerIndex,\n            size = index + geometry._lineColorsLength;\n        let a = this._lineStrokeColors;\n        for (let i = index; i < size; i += 4) {\n            a[i] = color.x;\n            a[i + 1] = color.y;\n            a[i + 2] = color.z;\n            a[i + 3] = color.w;\n        }\n        this._changedBuffers[LINESTROKECOLORS_BUFFER] = true;\n        !this._updatedGeometry[geometry.__id] && this._updatedGeometryArr.push(geometry);\n        this._updatedGeometry[geometry.__id] = true;\n    }\n\n    public setLineColorArr(geometry: Geometry, color: Vec4) {\n        let index = geometry._lineColorsHandlerIndex,\n            size = index + geometry._lineColorsLength;\n        let a = this._lineColors;\n        for (let i = index; i < size; i += 4) {\n            a[i] = color.x;\n            a[i + 1] = color.y;\n            a[i + 2] = color.z;\n            a[i + 3] = color.w;\n        }\n        this._changedBuffers[LINECOLORS_BUFFER] = true;\n        !this._updatedGeometry[geometry.__id] && this._updatedGeometryArr.push(geometry);\n        this._updatedGeometry[geometry.__id] = true;\n    }\n\n    public setLineStrokeArr(geometry: Geometry, width: number) {\n        // let index = geometry._lineStrokesHandlerIndex,\n        //     size = index + geometry._lineStrokesLength;\n        // let a = this._lineStrokes;\n        // for (let i = index; i < size; i++) {\n        //     a[i] = width;\n        // }\n        // this._changedBuffers[LINESTROKES_BUFFER] = true;\n        // !this._updatedGeometry[geometry.__id] && this._updatedGeometryArr.push(geometry);\n        // this._updatedGeometry[geometry.__id] = true;\n    }\n\n    public setLineThicknessArr(geometry: Geometry, width: number) {\n        let index = geometry._lineThicknessHandlerIndex,\n            size = index + geometry._lineThicknessLength;\n        let a = this._lineThickness;\n        for (let i = index; i < size; i++) {\n            a[i] = width;\n        }\n        this._changedBuffers[LINETHICKNESS_BUFFER] = true;\n        !this._updatedGeometry[geometry.__id] && this._updatedGeometryArr.push(geometry);\n        this._updatedGeometry[geometry.__id] = true;\n    }\n\n    public bringToFront(geometry: Geometry) {\n        let polyIndexes = this._polyIndexes.splice(geometry._polyIndexesHandlerIndex, geometry._polyIndexesLength);\n        let lineIndexes = this._lineIndexes.splice(geometry._lineIndexesHandlerIndex, geometry._lineIndexesLength);\n\n        this._geometries.splice(geometry._handlerIndex, 1);\n\n        let g = this._geometries;\n        for (let i = geometry._handlerIndex; i < g.length; i++) {\n            let gi = g[i];\n            gi._handlerIndex = i;\n            gi._polyIndexesHandlerIndex -= geometry._polyIndexesLength;\n            gi._lineIndexesHandlerIndex -= geometry._lineIndexesLength;\n        }\n\n        geometry._polyIndexesHandlerIndex = this._polyIndexes.length;\n        geometry._lineIndexesHandlerIndex = this._lineIndexes.length;\n\n        geometry._handlerIndex = this._geometries.length;\n        this._geometries.push(geometry);\n\n        this._polyIndexes.push.apply(this._polyIndexes, polyIndexes);\n        this._lineIndexes.push.apply(this._lineIndexes, lineIndexes);\n\n        this._changedBuffers[POLYINDEXES_BUFFER] = true;\n        this._changedBuffers[LINEINDEXES_BUFFER] = true;\n\n        !this._updatedGeometry[geometry.__id] && this._updatedGeometryArr.push(geometry);\n        this._updatedGeometry[geometry.__id] = true;\n    }\n\n    public createPolyVerticesBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._polyVerticesHighBufferMerc!);\n        this._polyVerticesHighBufferMerc = h.createArrayBuffer(\n            new Float32Array(this._polyVerticesHighMerc),\n            2,\n            this._polyVerticesHighMerc.length / 2\n        );\n\n        h.gl!.deleteBuffer(this._polyVerticesLowBufferMerc!);\n        this._polyVerticesLowBufferMerc = h.createArrayBuffer(\n            new Float32Array(this._polyVerticesLowMerc),\n            2,\n            this._polyVerticesLowMerc.length / 2\n        );\n    }\n\n    public createPolyIndexesBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._polyIndexesBuffer!);\n        this._polyIndexesBuffer = h.createElementArrayBuffer(\n            new Uint32Array(this._polyIndexes),\n            1,\n            this._polyIndexes.length\n        );\n    }\n\n    public createPolyColorsBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._polyColorsBuffer!);\n        this._polyColorsBuffer = h.createArrayBuffer(\n            new Float32Array(this._polyColors),\n            4,\n            this._polyColors.length / 4\n        );\n    }\n\n    public createPolyPickingColorsBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._polyPickingColorsBuffer!);\n        this._polyPickingColorsBuffer = h.createArrayBuffer(\n            new Float32Array(this._polyPickingColors),\n            4,\n            this._polyPickingColors.length / 4\n        );\n    }\n\n    public createLineVerticesBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._lineVerticesHighBufferMerc!);\n        this._lineVerticesHighBufferMerc = h.createArrayBuffer(\n            new Float32Array(this._lineVerticesHighMerc),\n            2,\n            this._lineVerticesHighMerc.length / 2\n        );\n\n        h.gl!.deleteBuffer(this._lineVerticesLowBufferMerc!);\n        this._lineVerticesLowBufferMerc = h.createArrayBuffer(\n            new Float32Array(this._lineVerticesLowMerc),\n            2,\n            this._lineVerticesLowMerc.length / 2\n        );\n    }\n\n    public createLineIndexesBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._lineIndexesBuffer!);\n        this._lineIndexesBuffer = h.createElementArrayBuffer(\n            new Uint32Array(this._lineIndexes),\n            1,\n            this._lineIndexes.length\n        );\n    }\n\n    public createLineOrdersBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._lineOrdersBuffer!);\n        this._lineOrdersBuffer = h.createArrayBuffer(\n            new Float32Array(this._lineOrders),\n            1,\n            this._lineOrders.length / 2\n        );\n    }\n\n    public createLineColorsBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._lineColorsBuffer!);\n        this._lineColorsBuffer = h.createArrayBuffer(\n            new Float32Array(this._lineColors),\n            4,\n            this._lineColors.length / 4\n        );\n    }\n\n    public createLinePickingColorsBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._linePickingColorsBuffer!);\n        this._linePickingColorsBuffer = h.createArrayBuffer(\n            new Float32Array(this._linePickingColors),\n            4,\n            this._linePickingColors.length / 4\n        );\n    }\n\n    public createLineThicknessBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._lineThicknessBuffer!);\n        this._lineThicknessBuffer = h.createArrayBuffer(\n            new Float32Array(this._lineThickness),\n            1,\n            this._lineThickness.length\n        );\n    }\n\n    public createLineStrokesBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._lineStrokesBuffer!);\n        this._lineStrokesBuffer = h.createArrayBuffer(\n            new Float32Array(this._lineStrokes),\n            1,\n            this._lineStrokes.length\n        );\n    }\n\n    public createLineStrokeColorsBuffer() {\n        let h = this._handler!;\n        h.gl!.deleteBuffer(this._lineStrokeColorsBuffer!);\n        this._lineStrokeColorsBuffer = h.createArrayBuffer(\n            new Float32Array(this._lineStrokeColors),\n            4,\n            this._lineStrokeColors.length / 4\n        );\n    }\n\n    public clear() {\n        this._geometries = [];\n        this._polyVerticesHighMerc = [];\n        this._polyVerticesLowMerc = [];\n        this._polyIndexes = [];\n        this._polyColors = [];\n        this._polyPickingColors = [];\n\n        this._lineVerticesHighMerc = [];\n        this._lineVerticesLowMerc = [];\n        this._lineOrders = [];\n        this._lineIndexes = [];\n        this._lineColors = [];\n        this._linePickingColors = [];\n        this._lineThickness = [];\n        this._lineStrokeColors = [];\n        this._lineStrokes = [];\n\n        this._deleteBuffers();\n\n        this._polyVerticesHighBufferMerc = null;\n        this._polyVerticesLowBufferMerc = null;\n        this._polyIndexesBuffer = null;\n        this._polyColorsBuffer = null;\n        this._polyPickingColorsBuffer = null;\n\n        this._lineVerticesHighBufferMerc = null;\n        this._lineVerticesLowBufferMerc = null;\n        this._lineIndexesBuffer = null;\n        this._lineOrdersBuffer = null;\n        this._lineColorsBuffer = null;\n        this._linePickingColorsBuffer = null;\n        this._lineThicknessBuffer = null;\n        this._lineStrokeColorsBuffer = null;\n        this._lineStrokesBuffer = null;\n\n        this._updatedGeometryArr = [];\n        this._updatedGeometry = {};\n\n        this._removeGeometryExtentArr = [];\n        this._removeGeometryExtents = {};\n\n        this.refresh();\n    }\n\n    public _deleteBuffers() {\n        if (this._layer._planet && this._layer._planet.renderer) {\n\n            let h = this._layer._planet.renderer.handler,\n                gl = h.gl!;\n\n            if (gl) {\n                gl.deleteBuffer(this._polyVerticesHighBufferMerc!);\n                gl.deleteBuffer(this._polyVerticesLowBufferMerc!);\n                gl.deleteBuffer(this._polyIndexesBuffer!);\n                gl.deleteBuffer(this._polyColorsBuffer!);\n                gl.deleteBuffer(this._polyPickingColorsBuffer!);\n\n                gl.deleteBuffer(this._lineVerticesHighBufferMerc);\n                gl.deleteBuffer(this._lineVerticesLowBufferMerc);\n                gl.deleteBuffer(this._lineIndexesBuffer);\n                gl.deleteBuffer(this._lineOrdersBuffer);\n                gl.deleteBuffer(this._lineColorsBuffer);\n                gl.deleteBuffer(this._linePickingColorsBuffer);\n                gl.deleteBuffer(this._lineThicknessBuffer);\n                gl.deleteBuffer(this._lineStrokeColorsBuffer);\n                gl.deleteBuffer(this._lineStrokesBuffer);\n            }\n        }\n    }\n}\n\nexport {GeometryHandler};\n","import * as math from \"../math\";\nimport {Entity, IEntityParams} from \"../entity/Entity\";\nimport {EntityCollection} from \"../entity/EntityCollection\";\nimport {EntityCollectionsTreeStrategy} from \"../quadTree/EntityCollectionsTreeStrategy\";\nimport {EventsHandler} from \"../Events\";\nimport {GeometryHandler} from \"../entity/GeometryHandler\";\nimport {IMouseState, ITouchState} from \"../renderer/RendererEvents\";\nimport {ILayerParams, Layer, LayerEventsList} from \"./Layer\";\nimport {NumberArray3, Vec3} from \"../math/Vec3\";\nimport {Planet} from \"../scene/Planet\";\nimport {Material} from \"./Material\";\nimport {NumberArray4} from \"../math/Vec4\";\nimport * as mercator from \"../mercator\";\n\nexport interface IVectorParams extends ILayerParams {\n    entities?: Entity[] | IEntityParams[];\n    polygonOffsetUnits?: number;\n    nodeCapacity?: number;\n    relativeToGround?: boolean;\n    clampToGround?: boolean;\n    async?: boolean;\n    pickingScale?: number | NumberArray3;\n    scaleByDistance?: NumberArray3;\n    labelMaxLetters?: number;\n    useLighting?: boolean;\n}\n\ntype VectorEventsList = [\n    //\"entitymove\",\n    \"draw\",\n    \"entityadd\",\n    \"entityremove\"\n]\n\nexport type VectorEventsType = EventsHandler<VectorEventsList> & EventsHandler<LayerEventsList>;\n\n/**\n * Creates entity instance array.\n * @param {Entity[] | IEntityParams[]} entities - Entity array.\n * @returns {Entity[]} - Entity array.\n */\nfunction _entitiesConstructor(entities: Entity[] | IEntityParams[]): Entity[] {\n    let res: Entity[] = [];\n    for (let i = 0; i < entities.length; i++) {\n        let ei = entities[i];\n        if ((ei as Entity).instanceName === \"Entity\") {\n            res.push(ei as Entity);\n        } else {\n            res.push(new Entity(ei as IEntityParams));\n        }\n    }\n    return res;\n}\n\n/**\n * Vector layer represents alternative entities store. Used for geospatial data rendering like\n * points, lines, polygons, geometry objects etc.\n * @class\n * @extends {Layer}\n * @param {string} [name=\"noname\"] - Layer name.\n * @param {IVectorParams} [options] - Layer options:\n * @param {number} [options.minZoom=0] - Minimal visible zoom. 0 is default\n * @param {number} [options.maxZoom=50] - Maximal visible zoom. 50 is default.\n * @param {string} [options.attribution] - Layer attribution.\n * @param {string} [options.zIndex=0] - Layer Z-order index. 0 is default.\n * @param {boolean} [options.visibility=true] - Layer visibility. True is default.\n * @param {boolean} [options.isBaseLayer=false] - Layer base layer. False is default.\n * @param {Array.<Entity>} [options.entities] - Entities array.\n * @param {Array.<number>} [options.scaleByDistance] - Scale by distance parameters. (exactly 3 entries)\n *      First index - near distance to the entity, after entity becomes full scale.\n *      Second index - far distance to the entity, when entity becomes zero scale.\n *      Third index - far distance to the entity, when entity becomes invisible.\n *      Use [1.0, 1.0, 1.0] for real sized objects\n * @param {number} [options.nodeCapacity=30] - Maximum entities quantity in the tree node. Rendering optimization parameter. 30 is default.\n * @param {boolean} [options.async=true] - Asynchronous vector data handling before rendering. True for optimization huge data.\n * @param {boolean} [options.clampToGround = false] - Clamp vector data to the ground.\n * @param {boolean} [options.relativeToGround = false] - Place vector data relative to the ground relief.\n * @param {Number} [options.polygonOffsetUnits=0.0] - The multiplier by which an implementation-specific value is multiplied with to create a constant depth offset.\n *\n * //@fires EventsHandler<VectorEventsList>#entitymove\n * @fires EventsHandler<VectorEventsList>#draw\n * @fires EventsHandler<VectorEventsList>#add\n * @fires EventsHandler<VectorEventsList>#remove\n * @fires EventsHandler<VectorEventsList>#entityadd\n * @fires EventsHandler<VectorEventsList>#entityremove\n * @fires EventsHandler<VectorEventsList>#visibilitychange\n */\nclass Vector extends Layer {\n\n    public override events: VectorEventsType;\n\n    /**\n     * Entities collection.\n     * @protected\n     */\n    protected _entities: Entity[];\n\n    /**\n     * First index - near distance to the entity, after that entity becomes full scale.\n     * Second index - far distance to the entity, when entity becomes zero scale.\n     * Third index - far distance to the entity, when entity becomes invisible.\n     * @public\n     * @type {NumberArray3} - (exactly 3 entries)\n     */\n    public scaleByDistance: NumberArray3;\n\n    public pickingScale: Float32Array;\n\n    /**\n     * Asynchronous data handling before rendering.\n     * @public\n     * @type {boolean}\n     */\n    public async: boolean;\n\n    /**\n     * Maximum entities quantity in the tree node.\n     * @public\n     */\n    public _nodeCapacity: number;\n\n    /**\n     * Clamp vector data to the ground.\n     * @public\n     * @type {boolean}\n     */\n    public clampToGround: boolean;\n\n    /**\n     * Sets vector data relative to the ground relief.\n     * @public\n     * @type {boolean}\n     */\n    public relativeToGround: boolean;\n\n    /** todo: combine into one */\n    protected _stripEntityCollection: EntityCollection;\n    protected _polylineEntityCollection: EntityCollection;\n    protected _geoObjectEntityCollection: EntityCollection;\n\n    public _geometryHandler: GeometryHandler;\n\n    protected _entityCollectionsTreeStrategy: EntityCollectionsTreeStrategy | null;\n\n    //protected _pendingsQueue: Entity[];\n\n    /**\n     * Specifies the scale Units for gl.polygonOffset function to calculate depth values, 0.0 is default.\n     * @public\n     * @type {Number}\n     */\n    public polygonOffsetUnits: number;\n\n    protected _labelMaxLetters: number;\n\n    protected _useLighting: boolean;\n\n    constructor(name?: string | null, options: IVectorParams = {}) {\n        super(name, options);\n\n        // @ts-ignore\n        this.events = this.events.registerNames(VECTOR_EVENTS);\n\n        this.isVector = true;\n\n        this._hasImageryTiles = false;\n\n        this.scaleByDistance = options.scaleByDistance || [math.MAX32, math.MAX32, math.MAX32];\n\n        this._useLighting = options.useLighting !== undefined ? options.useLighting : true;\n\n\n        let pickingScale: Float32Array = new Float32Array([1.0, 1.0, 1.0]);\n        if (options.pickingScale !== undefined) {\n            if (options.pickingScale instanceof Array) {\n                pickingScale[0] = options.pickingScale[0] || pickingScale[0];\n                pickingScale[1] = options.pickingScale[1] || pickingScale[1];\n                pickingScale[2] = options.pickingScale[2] || pickingScale[2];\n            } else if (typeof options.pickingScale === 'number') {\n                pickingScale[0] = options.pickingScale;\n                pickingScale[1] = options.pickingScale;\n                pickingScale[2] = options.pickingScale;\n            }\n        }\n\n        this.pickingScale = pickingScale;\n\n        this.async = options.async !== undefined ? options.async : true;\n\n        this.clampToGround = options.clampToGround || false;\n\n        this.relativeToGround = options.relativeToGround || false;\n\n        this._entities = _entitiesConstructor(options.entities || []);\n\n        this._labelMaxLetters = options.labelMaxLetters || 24;\n\n        this._stripEntityCollection = new EntityCollection({\n            pickingEnabled: this.pickingEnabled\n        });\n        this._bindEventsDefault(this._stripEntityCollection);\n\n        this._polylineEntityCollection = new EntityCollection({\n            pickingEnabled: this.pickingEnabled\n        });\n        this._bindEventsDefault(this._polylineEntityCollection);\n\n        this._geoObjectEntityCollection = new EntityCollection({\n            pickingEnabled: this.pickingEnabled,\n            useLighting: this._useLighting\n        });\n        this._bindEventsDefault(this._geoObjectEntityCollection);\n\n        this._geometryHandler = new GeometryHandler(this);\n\n        this._nodeCapacity = options.nodeCapacity || 60;\n\n        this._entityCollectionsTreeStrategy = null;\n\n        this.setEntities(this._entities);\n\n        this.polygonOffsetUnits = options.polygonOffsetUnits != undefined ? options.polygonOffsetUnits : 0.0;\n\n        this.pickingEnabled = this._pickingEnabled;\n    }\n\n    public get useLighting(): boolean {\n        return this._useLighting;\n    }\n\n    public set useLighting(f: boolean) {\n        if (f !== this._useLighting) {\n            this._geoObjectEntityCollection.useLighting = f;\n            this._useLighting = f;\n        }\n    }\n\n    public get labelMaxLetters(): number {\n        return this._labelMaxLetters;\n    }\n\n    public override get instanceName() {\n        return \"Vector\";\n    }\n\n    protected override _bindPicking() {\n        this._pickingColor.clear();\n    }\n\n    /**\n     * Adds layer to the planet.\n     * @public\n     * @param {Planet} planet - Planet scene object.\n     * @returns {Vector} -\n     */\n    public override addTo(planet: Planet) {\n        if (!this._planet) {\n            this._assignPlanet(planet);\n            this._geometryHandler.assignHandler(planet.renderer!.handler);\n            this._polylineEntityCollection.addTo(planet, true);\n            this._stripEntityCollection.addTo(planet, true);\n            this._geoObjectEntityCollection.addTo(planet, true);\n            this.setEntities(this._entities);\n        }\n    }\n\n    public override remove(): this {\n        super.remove();\n        this._polylineEntityCollection.remove();\n        this._stripEntityCollection.remove();\n        this._geoObjectEntityCollection.remove();\n        return this;\n    }\n\n    /**\n     * Returns stored entities.\n     * @public\n     * @returns {Array.<Entity>} -\n     */\n    public getEntities(): Entity[] {\n        return ([] as Entity[]).concat(this._entities);\n    }\n\n    /**\n     * Adds entity to the layer.\n     * @public\n     * @param {Entity} entity - Entity.\n     * @param {boolean} [rightNow=false] - Entity insertion option. False is default.\n     * @returns {Vector} - Returns this layer.\n     */\n    public add(entity: Entity, rightNow: boolean = false): this {\n        if (!(entity._layer || entity._entityCollection)) {\n            entity._layer = this;\n            entity._layerIndex = this._entities.length;\n            //this._fitExtent(entity);\n            this._entities.push(entity);\n            this._proceedEntity(entity, rightNow);\n        }\n        return this;\n    }\n\n    /**\n     * Adds entity to the layer in the index position.\n     * @public\n     * @param {Entity} entity - Entity.\n     * @param {Number} index - Index position.\n     * @param {boolean} [rightNow] - Entity insertion option. False is default.\n     * @returns {Vector} - Returns this layer.\n     */\n    public insert(entity: Entity, index: number, rightNow: boolean = false): this {\n        if (!(entity._layer || entity._entityCollection)) {\n            entity._layer = this;\n            entity._layerIndex = index;\n            //this._fitExtent(entity);\n            this._entities.splice(index, 0, entity);\n            for (let i = index + 1, len = this._entities.length; i < len; i++) {\n                this._entities[i]._layerIndex = i;\n            }\n\n            this._proceedEntity(entity, rightNow);\n        }\n\n        return this;\n    }\n\n    protected _proceedEntity(entity: Entity, rightNow: boolean = false) {\n        let temp = this._hasImageryTiles;\n\n        let isEmpty = !(entity.strip || entity.polyline || entity.ray || entity.geoObject || entity.geometry);\n\n        if (entity.strip) {\n            this._stripEntityCollection.add(entity);\n        }\n\n        if (entity.polyline || entity.ray) {\n            this._polylineEntityCollection.add(entity);\n        }\n\n        if (entity.geoObject || isEmpty) {\n            this._geoObjectEntityCollection.add(entity);\n        }\n\n        if (entity.geometry) {\n            this._hasImageryTiles = true;\n            if (this._planet) {\n                this._planet.renderer!.assignPickingColor<Entity>(entity);\n                this._geometryHandler.add(entity.geometry);\n            }\n        }\n\n        if (this._planet) {\n            if (entity.billboard || entity.label || entity.geoObject || isEmpty) {\n                if (entity._cartesian.isZero() && !entity._lonLat.isZero()) {\n                    entity._setCartesian3vSilent(\n                        this._planet.ellipsoid.lonLatToCartesian(entity._lonLat)\n                    );\n                } else {\n                    entity._lonLat = this._planet.ellipsoid.cartesianToLonLat(entity._cartesian);\n\n                    // IT's important event for degrees proj strategies\n                    if (Math.abs(entity._lonLat.lat) < mercator.MAX_LAT) {\n                        entity._lonLatMerc = entity._lonLat.forwardMercator();\n                    } else {\n                        entity._lonLatMerc.lon = entity._lonLatMerc.lat = entity._lonLatMerc.height = 0;\n                    }\n                }\n            }\n\n            if (entity.billboard || entity.label) {\n                this._entityCollectionsTreeStrategy?.insertEntity(entity);\n            }\n        }\n\n        if (this._planet && this._hasImageryTiles !== temp) {\n            this._planet.updateVisibleLayers();\n        }\n\n        this.events.dispatch(this.events.entityadd, entity);\n    }\n\n    /**\n     * Adds entity array to the layer.\n     * @public\n     * @param {Array.<Entity>} entities - Entities array.\n     * @param {boolean} [rightNow=false] - Entity insertion option. False is default.\n     * @returns {Vector} - Returns this layer.\n     */\n    public addEntities(entities: Entity[], rightNow: boolean = false) {\n        let i = entities.length;\n        while (i--) {\n            this.add(entities[i], rightNow);\n        }\n        return this;\n    }\n\n    /**\n     * Remove entity from layer.\n     * TODO: memory leaks.\n     * @public\n     * @param {Entity} entity - Entity to remove.\n     * @returns {Vector} - Returns this layer.\n     */\n    public removeEntity(entity: Entity): this {\n\n        if (entity._layer && this.isEqual(entity._layer)) {\n\n            this._entities.splice(entity._layerIndex, 1);\n\n            this._reindexEntitiesArray(entity._layerIndex);\n\n            entity._layer = null;\n\n            entity._layerIndex = -1;\n\n            if (entity._entityCollection) {\n\n                entity._entityCollection._removeEntitySilent(entity);\n\n                let node = entity._nodePtr;\n\n                while (node) {\n                    node.count--;\n                    node = node.parentNode!;\n                }\n\n                if (\n                    entity._nodePtr &&\n                    entity._nodePtr.count === 0 &&\n                    entity._nodePtr.deferredEntities.length === 0\n                ) {\n                    entity._nodePtr.entityCollection = null;\n                    //\n                    // ...\n                    //\n                }\n            } else if (entity._nodePtr && entity._nodePtr.deferredEntities.length) {\n                let defEntities = entity._nodePtr.deferredEntities;\n                let j = defEntities.length;\n                while (j--) {\n                    if (defEntities[j].id === entity.id) {\n                        defEntities.splice(j, 1);\n                        let node = entity._nodePtr;\n                        while (node) {\n                            node.count--;\n                            node = node.parentNode!;\n                        }\n                        break;\n                    }\n                }\n            }\n\n            if (this._planet && entity.geometry) {\n                this._geometryHandler.remove(entity.geometry);\n                this._planet.renderer!.clearPickingColor(entity);\n            }\n\n            entity._nodePtr = undefined;\n\n            this.events.dispatch(this.events.entityremove, entity);\n        }\n\n        return this;\n    }\n\n    /**\n     * Set layer picking events active.\n     * @public\n     * @param {boolean} picking - Picking enable flag.\n     */\n    public override set pickingEnabled(picking: boolean) {\n        this._pickingEnabled = picking;\n        this._stripEntityCollection.setPickingEnabled(picking);\n        this._polylineEntityCollection.setPickingEnabled(picking);\n        this._geoObjectEntityCollection.setPickingEnabled(picking);\n        this._entityCollectionsTreeStrategy?.setPickingEnabled(picking);\n    }\n\n    /**\n     * Refresh collected entities indexes from startIndex entities collection array position.\n     * @protected\n     * @param {number} startIndex - Entity array index.\n     */\n    protected _reindexEntitiesArray(startIndex: number) {\n        const e = this._entities;\n        for (let i = startIndex; i < e.length; i++) {\n            e[i]._layerIndex = i;\n        }\n    }\n\n    /**\n     * Removes entities from layer.\n     * @public\n     * @param {Array.<Entity>} entities - Entity array.\n     * @returns {Vector} - Returns this layer.\n     */\n    public removeEntities(entities: Entity[]): this {\n        let i = entities.length;\n        while (i--) {\n            this.removeEntity(entities[i]);\n        }\n        return this;\n    }\n\n    /**\n     * Clear the layer.\n     * @public\n     */\n    public override clear() {\n        super.clear();\n        let temp: Entity[] = new Array(this._entities.length);\n\n        for (let i = 0; i < temp.length; i++) {\n            temp[i] = this._entities[i];\n        }\n\n        let i = this._entities.length;\n        while (i--) {\n            this._entities[i].remove();\n        }\n\n        this._entities.length = 0;\n        this._entities = [];\n        for (let i = 0; i < temp.length; i++) {\n            this._entities[i] = temp[i];\n        }\n\n        this._entityCollectionsTreeStrategy?.dispose();\n        this._entityCollectionsTreeStrategy = null;\n        this._geometryHandler.clear()\n    }\n\n    /**\n     * Safety entities loop.\n     * @public\n     * @param {(entity: Entity, index?: number) => void} callback - Entity callback.\n     */\n    public each(callback: (entity: Entity, index?: number) => void) {\n        let e = this._entities;\n        let i = e.length;\n        while (i--) {\n            callback(e[i], i);\n        }\n    }\n\n    /**\n     * Removes current entities from layer and adds new entities.\n     * @public\n     * @param {Array.<Entity>} entities - New entity array.\n     * @returns {Vector} - Returns layer instance.\n     */\n    public setEntities(entities: Entity[]): this {\n\n        let temp: Entity[] = new Array(entities.length);\n\n        for (let i = 0, len = entities.length; i < len; i++) {\n            temp[i] = entities[i];\n        }\n\n        this.clear();\n\n        this._entities = new Array(temp.length);\n\n        let entitiesForTree = [];\n\n        for (let i = 0; i < temp.length; i++) {\n            let ei = temp[i];\n\n            ei._layer = this;\n            ei._layerIndex = i;\n\n            let isEmpty = !(ei.strip || ei.polyline || ei.ray || ei.geoObject || ei.billboard || ei.label);\n\n            if (ei.strip) {\n                this._stripEntityCollection.add(ei);\n            } else if (ei.polyline || ei.ray) {\n                this._polylineEntityCollection.add(ei);\n            } else if (ei.geoObject || isEmpty) {\n                this._geoObjectEntityCollection.add(ei);\n            } else if (ei.billboard || ei.label) {\n                entitiesForTree.push(ei);\n            }\n\n            if (ei.geometry) {\n                this._hasImageryTiles = true;\n                if (this._planet) {\n                    this._planet.renderer!.assignPickingColor<Entity>(ei);\n                    this._geometryHandler.add(ei.geometry);\n                }\n            }\n\n            this._entities[i] = ei;\n        }\n\n        this._createEntityCollectionsTree(entitiesForTree);\n\n        return this;\n    }\n\n    protected _createEntityCollectionsTree(entitiesForTree: Entity[]) {\n        if (this._planet) {\n            this._entityCollectionsTreeStrategy = this._planet.quadTreeStrategy.createEntitiCollectionsTreeStrategy(this, this._nodeCapacity);\n            this._entityCollectionsTreeStrategy.insertEntities(entitiesForTree);\n        }\n    }\n\n    /**\n     * @todo (refactoring) could be used in something like bindEntityCollectionQuad(...)\n     * @param entityCollection\n     */\n    public _bindEventsDefault(entityCollection: EntityCollection) {\n\n        let ve = this.events;\n\n        //\n        // @todo: replace with arrow functions and '...e'\n        //\n        // entityCollection.events.on(\"entitymove\", (e: any) => {\n        //     ve.dispatch(ve.entitymove, e);\n        // });\n        entityCollection.events.on(\"mousemove\", (e: IMouseState) => {\n            ve.dispatch(ve.mousemove, e);\n        });\n        entityCollection.events.on(\"mouseenter\", (e: IMouseState) => {\n            ve.dispatch(ve.mouseenter, e);\n        });\n        entityCollection.events.on(\"mouseleave\", (e: IMouseState) => {\n            ve.dispatch(ve.mouseleave, e);\n        });\n        entityCollection.events.on(\"lclick\", (e: IMouseState) => {\n            ve.dispatch(ve.lclick, e);\n        });\n        entityCollection.events.on(\"rclick\", (e: IMouseState) => {\n            ve.dispatch(ve.rclick, e);\n        });\n        entityCollection.events.on(\"mclick\", (e: IMouseState) => {\n            ve.dispatch(ve.mclick, e);\n        });\n        entityCollection.events.on(\"ldblclick\", (e: IMouseState) => {\n            ve.dispatch(ve.ldblclick, e);\n        });\n        entityCollection.events.on(\"rdblclick\", (e: IMouseState) => {\n            ve.dispatch(ve.rdblclick, e);\n        });\n        entityCollection.events.on(\"mdblclick\", (e: IMouseState) => {\n            ve.dispatch(ve.mdblclick, e);\n        });\n        entityCollection.events.on(\"lup\", (e: IMouseState) => {\n            ve.dispatch(ve.lup, e);\n        });\n        entityCollection.events.on(\"rup\", (e: IMouseState) => {\n            ve.dispatch(ve.rup, e);\n        });\n        entityCollection.events.on(\"mup\", (e: IMouseState) => {\n            ve.dispatch(ve.mup, e);\n        });\n        entityCollection.events.on(\"ldown\", (e: IMouseState) => {\n            ve.dispatch(ve.ldown, e);\n        });\n        entityCollection.events.on(\"rdown\", (e: IMouseState) => {\n            ve.dispatch(ve.rdown, e);\n        });\n        entityCollection.events.on(\"mdown\", (e: IMouseState) => {\n            ve.dispatch(ve.mdown, e);\n        });\n        entityCollection.events.on(\"lhold\", (e: IMouseState) => {\n            ve.dispatch(ve.lhold, e);\n        });\n        entityCollection.events.on(\"rhold\", (e: IMouseState) => {\n            ve.dispatch(ve.rhold, e);\n        });\n        entityCollection.events.on(\"mhold\", (e: IMouseState) => {\n            ve.dispatch(ve.mhold, e);\n        });\n        entityCollection.events.on(\"mousewheel\", (e: IMouseState) => {\n            ve.dispatch(ve.mousewheel, e);\n        });\n        entityCollection.events.on(\"touchmove\", (e: ITouchState) => {\n            ve.dispatch(ve.touchmove, e);\n        });\n        entityCollection.events.on(\"touchstart\", (e: ITouchState) => {\n            ve.dispatch(ve.touchstart, e);\n        });\n        entityCollection.events.on(\"touchend\", (e: ITouchState) => {\n            ve.dispatch(ve.touchend, e);\n        });\n        entityCollection.events.on(\"doubletouch\", (e: ITouchState) => {\n            ve.dispatch(ve.doubletouch, e);\n        });\n        entityCollection.events.on(\"touchleave\", (e: ITouchState) => {\n            ve.dispatch(ve.touchleave, e);\n        });\n        entityCollection.events.on(\"touchenter\", (e: ITouchState) => {\n            ve.dispatch(ve.touchenter, e);\n        });\n    }\n\n    protected _collectStripCollectionPASS(outArr: EntityCollection[]) {\n        let ec = this._stripEntityCollection;\n\n        ec._fadingOpacity = this._fadingOpacity;\n        ec.scaleByDistance = this.scaleByDistance;\n        ec.pickingScale = this.pickingScale;\n        ec.polygonOffsetUnits = this.polygonOffsetUnits;\n\n        outArr.push(ec);\n    }\n\n    protected _collectPolylineCollectionPASS(outArr: EntityCollection[]) {\n        let ec = this._polylineEntityCollection;\n\n        ec._fadingOpacity = this._fadingOpacity;\n        ec.scaleByDistance = this.scaleByDistance;\n        ec.pickingScale = this.pickingScale;\n        ec.polygonOffsetUnits = this.polygonOffsetUnits;\n\n        outArr.push(ec);\n\n        if (this.clampToGround || this.relativeToGround) {\n            let rtg = Number(this.relativeToGround);\n\n            const nodes = this._planet!._renderedNodes;\n            const visibleExtent = this._planet!.getViewExtent();\n            let e = ec._entities;\n            let e_i = e.length;\n            let res = new Vec3();\n\n            while (e_i--) {\n                let p = e[e_i].polyline!;\n                if (p && visibleExtent.overlaps(p._extent)) {\n                    // TODO:this works only for mercator area.\n                    // needs to be working on poles.\n                    let coords = p._pathLonLatMerc,\n                        c_j = coords.length;\n                    while (c_j--) {\n                        let c_j_h = coords[c_j].length;\n                        while (c_j_h--) {\n                            let ll = coords[c_j][c_j_h],\n                                n_k = nodes.length;\n                            while (n_k--) {\n                                let seg = nodes[n_k].segment;\n                                if (seg._extent.isInside(ll)) {\n                                    let cart = p._path3v[c_j][c_j_h] as Vec3;\n                                    seg.getTerrainPoint(cart, ll, res);\n                                    let alt = (rtg && p.altitude) || 0.0;\n                                    if (alt) {\n                                        let n = this._planet!.ellipsoid.getSurfaceNormal3v(res);\n                                        p.setPoint3v(res.addA(n.scale(alt)), c_j_h, c_j, true);\n                                    } else {\n                                        p.setPoint3v(res, c_j_h, c_j, true);\n                                    }\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    protected _collectGeoObjectCollectionPASS(outArr: EntityCollection[]) {\n        let ec = this._geoObjectEntityCollection;\n\n        ec._fadingOpacity = this._fadingOpacity;\n        ec.scaleByDistance = this.scaleByDistance;\n        ec.pickingScale = this.pickingScale;\n        ec.polygonOffsetUnits = this.polygonOffsetUnits;\n\n        outArr.push(ec);\n\n        // if (this.clampToGround || this.relativeToGround) {\n        //     let rtg = Number(this.relativeToGround);\n        //\n        //     var nodes = this._planet._renderedNodes;\n        //     var visibleExtent = this._planet.getViewExtent();\n        //     var e = ec._entities;\n        //     var e_i = e.length;\n        //     let res = new Vec3();\n        //\n        //     while (e_i--) {\n        //         var p = e[e_i].polyline;\n        //         if (visibleExtent.overlaps(p._extent)) {\n        //             // TODO:this works only for mercator area.\n        //             // needs to be working on poles.\n        //             let coords = p._pathLonLatMerc,\n        //                 c_j = coords.length;\n        //             while (c_j--) {\n        //                 var c_j_h = coords[c_j].length;\n        //                 while (c_j_h--) {\n        //                     let ll = coords[c_j][c_j_h],\n        //                         n_k = nodes.length;\n        //                     while (n_k--) {\n        //                         var seg = nodes[n_k].segment;\n        //                         if (seg._extent.isInside(ll)) {\n        //                             let cart = p._path3v[c_j][c_j_h];\n        //                             seg.getTerrainPoint(cart, ll, res);\n        //                             p.setPoint3v(\n        //                                 res.addA(res.normal().scale((rtg && p.altitude) || 0.0)),\n        //                                 c_j_h,\n        //                                 c_j,\n        //                                 true\n        //                             );\n        //                             break;\n        //                         }\n        //                     }\n        //                 }\n        //             }\n        //         }\n        //     }\n        // }\n    }\n\n    public collectVisibleCollections(outArr: EntityCollection[]) {\n        let p = this._planet!;\n\n        if (\n            (this._fading && this._fadingOpacity > 0.0) ||\n            (this.minZoom <= p.maxCurrZoom && this.maxZoom >= p.maxCurrZoom)\n        ) {\n            // Common collections first\n            this._collectStripCollectionPASS(outArr);\n            this._collectPolylineCollectionPASS(outArr);\n            this._collectGeoObjectCollectionPASS(outArr);\n\n            if (this._entityCollectionsTreeStrategy) {\n                this._entityCollectionsTreeStrategy.collectVisibleEntityCollections(outArr);\n            }\n        }\n    }\n\n    /**\n     * Start to load tile material.\n     * @public\n     * @virtual\n     * @param {Material} material - Current material.\n     */\n    public override loadMaterial(material: Material) {\n        const seg = material.segment;\n\n        if (this._isBaseLayer) {\n            material.texture = seg._isNorth ? seg.planet.solidTextureOne : seg.planet.solidTextureTwo;\n        } else {\n            material.texture = seg.planet.transparentTexture;\n        }\n\n        if (this._planet!.layerLock.isFree()) {\n            material.isReady = false;\n            material.isLoading = true;\n            this._planet!._vectorTileCreator.add(material);\n        }\n    }\n\n    /**\n     * Abort exact material loading.\n     * @public\n     * @override\n     * @param {Material} material - Segment material.\n     */\n    public override abortMaterialLoading(material: Material) {\n        material.isLoading = false;\n        material.isReady = false;\n    }\n\n    public override applyMaterial(material: Material, isForced: boolean = false): NumberArray4 {\n        if (material.isReady) {\n            return [0, 0, 1, 1];\n        } else {\n            !material.isLoading && this.loadMaterial(material);\n\n            const segment = material.segment;\n            let pn = segment.node,\n                notEmpty = false;\n\n            let mId = this.__id;\n            let psegm = material;\n\n            while (pn.parentNode) {\n                if (psegm && psegm.isReady) {\n                    notEmpty = true;\n                    break;\n                }\n                pn = pn.parentNode;\n                psegm = pn.segment.materials[mId];\n            }\n\n            if (notEmpty) {\n                material.appliedNodeId = pn.nodeId;\n                material.texture = psegm.texture;\n                material.pickingMask = psegm.pickingMask;\n                const dZ2 = 1.0 / (2 << (segment.tileZoom - pn.segment.tileZoom - 1));\n                return [\n                    segment.tileX * dZ2 - pn.segment.tileX,\n                    segment.tileY * dZ2 - pn.segment.tileY,\n                    dZ2,\n                    dZ2\n                ];\n            } else {\n                if (material.textureExists && material._updateTexture) {\n                    material.texture = material._updateTexture;\n                    material.pickingMask = material._updatePickingMask;\n                } else {\n                    material.texture = segment.planet.transparentTexture;\n                    material.pickingMask = segment.planet.transparentTexture;\n                }\n                material.pickingReady = true;\n                return [0, 0, 1, 1];\n            }\n        }\n    }\n\n    public override clearMaterial(material: Material) {\n        if (material.isReady) {\n            const gl = material.segment.handler.gl!;\n\n            material.isReady = false;\n            material.pickingReady = false;\n\n            let t = material.texture;\n            material.texture = null;\n            t && !t.default && gl.deleteTexture(t);\n\n            t = material.pickingMask;\n            material.pickingMask = null;\n            t && !t.default && gl.deleteTexture(t);\n\n            t = material._updateTexture;\n            material._updateTexture = null;\n            t && !t.default && gl.deleteTexture(t);\n\n            t = material._updatePickingMask;\n            material._updatePickingMask = null;\n            t && !t.default && gl.deleteTexture(t);\n        }\n\n        this.abortMaterialLoading(material);\n\n        material.isLoading = false;\n        material.textureExists = false;\n    }\n\n    public update() {\n        this._geometryHandler.update();\n        this.events.dispatch(this.events.draw, this);\n    }\n}\n\nconst VECTOR_EVENTS: VectorEventsList = [\n    // /**\n    //  * Triggered when entity has moved.\n    //  * @event EventsHandler<VectorEventsList>#draw\n    //  */\n    // \"entitymove\",\n\n    /**\n     * Triggered when layer begin draw.\n     * @event EventsHandler<VectorEventsList>#draw\n     */\n    \"draw\",\n\n    /**\n     * Triggered when new entity added to the layer.\n     * @event EventsHandler<VectorEventsList>#entityadd\n     */\n    \"entityadd\",\n\n    /**\n     * Triggered when entity removes from the collection.\n     * @event EventsHandler<VectorEventsList>#entityremove\n     */\n    \"entityremove\"\n];\n\nexport {Vector};\n","import * as math from \"../../math\";\nimport {createEvents, EventsHandler} from '../../Events';\nimport {CoordinatesType} from \"../../entity/Geometry\";\nimport {Entity} from '../../entity/Entity';\nimport {IMouseState} from \"../../renderer/RendererEvents\";\nimport {MouseNavigation} from \"../MouseNavigation\";\nimport {LonLat} from '../../LonLat';\nimport {Line3} from '../../math/Line3';\nimport {Object3d} from '../../Object3d';\nimport {Planet} from '../../scene/Planet';\nimport {RenderNode} from '../../scene/RenderNode';\nimport {Vec2} from '../../math/Vec2';\nimport {Vec3} from '../../math/Vec3';\nimport {Vector} from '../../layer/Vector';\n\ntype PolygonDrawingSceneEventsList = [\"change\", \"startpoint\"];\n\nconst POLYGONDRAWINGSCENE_EVENTS: PolygonDrawingSceneEventsList = [\"change\", \"startpoint\"];\n\nexport interface IPolygonDrawingSceneParams {\n    coordinates?: CoordinatesType[];\n    name: string;\n}\n\nconst POINTER_OBJ3D = Object3d.createCylinder(1, 1, 2.0, 20, 1, true, false, 0, -0.5, 0);\n\nexport const NUM_SEGMENTS = 200;\nexport const OUTLINE_ALT = 0.3;\nexport const COORDINATES_COLOR = \"rgb(350, 350, 0)\";\nexport const CENTER_COLOR = \"rgb(0, 350, 50)\";\nexport const OUTLINE_COLOR = \"rgb(0, 350, 50)\";\nexport const OUTLINE_THICKNESS = 3.5;\n\nexport const CORNER_OPTIONS = {\n    scale: 0.5,\n    instanced: true,\n    tag: \"corners\",\n    color: COORDINATES_COLOR,\n    object3d: POINTER_OBJ3D\n};\n\nexport const CENTER_OPTIONS = {\n    scale: 0.4,\n    instanced: true,\n    tag: \"centers\",\n    color: CENTER_COLOR,\n    object3d: POINTER_OBJ3D\n};\n\nexport const OUTLINE_OPTIONS = {\n    thickness: OUTLINE_THICKNESS,\n    color: OUTLINE_COLOR\n}\n\nclass PolygonDrawingScene extends RenderNode {\n    public events: EventsHandler<PolygonDrawingSceneEventsList>;\n    public _planet: Planet | null;\n    protected _initCoordinates: CoordinatesType[];\n    protected _pickedCorner: Entity | null;\n    protected _pickedCenter: Entity | null;\n    protected _startPos: Vec2 | null;\n    protected _startClick: Vec2;\n    protected _geometryLayer: Vector;\n    protected _cornerLayer: Vector;\n    protected _centerLayer: Vector;\n    protected _outlineLayer: Vector;\n    protected _ghostCorner: Entity;\n    protected _ghostOutlineLayer: Vector;\n    protected _showGhostPointer: boolean;\n    protected _isStartPoint: boolean;\n    protected _insertCornerIndex: number;\n    protected _cornerDblClick = false;\n\n    constructor(options: IPolygonDrawingSceneParams) {\n        super(options.name);\n\n        this.events = createEvents(POLYGONDRAWINGSCENE_EVENTS);\n\n        this._planet = null;\n\n        this._initCoordinates = options.coordinates || [];\n\n        this._pickedCorner = null;\n        this._pickedCenter = null;\n\n        this._startPos = null;\n        this._startClick = new Vec2();\n\n        this._geometryLayer = new Vector();\n\n        //\n        // outline vectors\n        //\n        this._cornerLayer = new Vector(\"corners\", {\n            pickingScale: 3,\n            pickingEnabled: true,\n            polygonOffsetUnits: -5,\n            relativeToGround: true,\n            scaleByDistance: [100, 4000000, 1.0]\n        });\n\n        this._centerLayer = new Vector(\"centers\", {\n            pickingScale: 3,\n            pickingEnabled: true,\n            polygonOffsetUnits: -5,\n            relativeToGround: true,\n            scaleByDistance: [100, 4000000, 1.0]\n        });\n\n        this._outlineLayer = new Vector(\"outline\", {\n            entities: [new Entity({\n                polyline: {\n                    path3v: [],\n                    isClosed: false,\n                    ...OUTLINE_OPTIONS\n                }\n            })],\n            pickingEnabled: false,\n            polygonOffsetUnits: -5,\n            relativeToGround: true\n        });\n\n        this._outlineLayer.getEntities()[0].polyline!.altitude = OUTLINE_ALT;\n\n        //\n        // Ghost cursor pointer\n        //\n        this._ghostCorner = new Entity({\n            geoObject: CORNER_OPTIONS\n        });\n\n        this._ghostOutlineLayer = new Vector(\"ghost-pointer\", {\n            pickingEnabled: false,\n            polygonOffsetUnits: -5,\n            relativeToGround: true,\n            scaleByDistance: [100, 4000000, 1.0],\n            opacity: 0.5\n        });\n\n        this._showGhostPointer = false;\n\n        this._isStartPoint = false;\n\n        this._insertCornerIndex = -1;\n    }\n\n    public get geometryType(): string {\n        return \"POLYGON\";\n    }\n\n    public getCoordinates(): CoordinatesType[] {\n        let corners = this._cornerLayer.getEntities();\n        if (corners.length > 0) {\n            return corners.map((c: Entity) => {\n                let ll = c.getLonLat();\n                return [ll.lon, ll.lat, ll.height];\n            });\n        } else {\n            return this._initCoordinates;\n        }\n    }\n\n    public bindPlanet(planet: Planet) {\n        this._planet = planet;\n    }\n\n    public override init() {\n\n        this._initEvents();\n\n        this._initGhostLayerPointer();\n\n        if (this._initCoordinates.length) {\n            this.setCoordinates(this._initCoordinates);\n        }\n\n        this._planet!.addLayer(this._outlineLayer);\n        this._planet!.addLayer(this._cornerLayer);\n        this._planet!.addLayer(this._centerLayer);\n\n        this.showGhostPointer();\n        this.startNewPoint();\n\n        (this._planet!.renderer!.controls.mouseNavigation as MouseNavigation).deactivateDoubleClickZoom();\n\n        this._geometryLayer.addTo(this._planet!);\n\n        this.events.on(\"change\", this._onChange, this);\n    }\n\n    protected _onChange = (e: PolygonDrawingScene) => {\n        if (e.geometryType === \"POLYGON\") {\n            let coords = this.getCoordinates();\n            let entity = new Entity({\n                'geometry': {\n                    'type': e.geometryType,\n                    'coordinates': [coords],\n                    'style': {\n                        'fillColor': \"rgba(0,146,247,0.2)\"\n                    }\n                }\n            });\n            this._geometryLayer.clear();\n            this._geometryLayer.add(entity);\n        }\n    }\n\n    override onremove() {\n        this._clearEvents();\n        this.hideGhostPointer();\n        this.stopNewPoint();\n        this.clear();\n        this._geometryLayer.remove();\n    }\n\n    public clear() {\n\n        this._geometryLayer.clear();\n\n        let corners = this._cornerLayer.getEntities();\n\n        let i = corners.length;\n        while (i--) {\n            corners[i].remove();\n        }\n\n        let centers = this._centerLayer.getEntities();\n        i = centers.length;\n        while (i--) {\n            centers[i].remove();\n        }\n\n        let entities = this._outlineLayer.getEntities();\n        i = entities.length;\n        while (i--) {\n            entities[i].polyline!.clear();\n            if (i > 0) {\n                entities[i].remove();\n            }\n        }\n\n        this._clearGhostPointer();\n    }\n\n    public setCoordinates(coords: CoordinatesType[]) {\n        this.clear();\n        for (let i = 0; i < coords.length; i++) {\n            let ci = coords[i];\n            let cart = this._planet!.ellipsoid.lonLatToCartesian(new LonLat(ci[0], ci[1], ci[2]));\n            this._appendCart(cart);\n        }\n        this.events.dispatch(this.events.change, this);\n    }\n\n    public stopNewPoint() {\n        if (this.renderer) {\n            this.renderer.events.off(\"ldblclick\", this._onMouseDblClick);\n        }\n    }\n\n    public startNewPoint() {\n        this.renderer!.events.on(\"ldblclick\", this._onMouseDblClick, this);\n    }\n\n    public showGhostPointer() {\n        this._showGhostPointer = true;\n        this._planet!.addLayer(this._ghostOutlineLayer);\n        this._insertCornerIndex = this._cornerLayer.getEntities().length;\n    }\n\n    public hideGhostPointer() {\n        this._showGhostPointer = false;\n        this._ghostOutlineLayer.remove();\n        this._insertCornerIndex = -1;\n    }\n\n    public setGhostPointerPosition(groundPos: Vec3) {\n        if (groundPos) {\n            this._ghostCorner.setCartesian3v(groundPos);\n            this._updateGhostOutlinePointer(groundPos);\n        }\n    }\n\n    protected _onCornerMouseEnter = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"pointer\";\n        this.hideGhostPointer();\n    }\n\n    _onCornerMouseLeave = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"default\";\n        this.showGhostPointer();\n    }\n\n    _onCenterMouseEnter = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"pointer\";\n        this.hideGhostPointer();\n    }\n\n    _onCenterMouseLeave = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"default\";\n        if (!(this._pickedCenter || this._pickedCorner)) {\n            this.showGhostPointer();\n        }\n    }\n\n    protected _onLup = (e: IMouseState) => {\n        (this._planet!.renderer!.controls.mouseNavigation as MouseNavigation).activate();\n        if (this._pickedCorner || this._pickedCenter) {\n            this.events.dispatch(this.events.change, this);\n            this.setGhostPointerPosition(this._planet!.getCartesianFromPixelTerrain(e)!);\n            this.showGhostPointer();\n            this._pickedCorner = null;\n            this._pickedCenter = null;\n        }\n    }\n\n    protected _getLdown(e: IMouseState): Entity | null {\n        (this._planet!.renderer!.controls.mouseNavigation as MouseNavigation).deactivate();\n        this._startClick.set(e.x, e.y);\n        let coords = e.pickingObject.getCartesian();\n        this._startPos = this._planet!.getPixelFromCartesian(coords);\n        return e.pickingObject;\n    }\n\n    protected _onCornerLdown = (e: IMouseState) => {\n        this._pickedCorner = this._getLdown(e);\n    }\n\n    protected _onCenterLdown = (e: IMouseState) => {\n        this._pickedCenter = this._getLdown(e);\n    }\n\n    protected _onMouseMove = (e: IMouseState) => {\n        if (this._pickedCenter) {\n            this._moveCenterPoint();\n        } else if (this._pickedCorner) {\n            this._moveCornerPoint(e.pos!);\n        } else {\n            this.setGhostPointerPosition(this._planet!.getCartesianFromPixelTerrain(e.pos)!);\n        }\n    }\n\n    protected _onCornerLdblclick = (e: IMouseState) => {\n        this._cornerDblClick = true;\n        let coords = this.getCoordinates();\n        coords.splice(e.pickingObject.layerIndex, 1);\n        this.setCoordinates(coords);\n    }\n\n    protected _onMouseDblClick = (e: IMouseState) => {\n\n        if (this._cornerDblClick) {\n            this._cornerDblClick = false;\n            return;\n        }\n\n        if (!this._showGhostPointer) {\n            return;\n        }\n\n        let cart = this._planet!.getCartesianFromPixelTerrain(e);\n        if (cart) {\n            this._addNew(cart);\n            if (!this._isStartPoint && this._cornerLayer.getEntities().length > 2) {\n                this._isStartPoint = true;\n                this.events.dispatch(this.events.startpoint, this);\n            }\n            this.events.dispatch(this.events.change, this);\n        }\n    }\n\n    protected _initEvents() {\n\n        this._cornerLayer.events.on(\"ldblclick\", this._onCornerLdblclick, this);\n        this._cornerLayer.events.on(\"ldown\", this._onCornerLdown, this);\n        this._centerLayer.events.on(\"ldown\", this._onCenterLdown, this);\n\n        this.renderer!.events.on(\"lup\", this._onLup, this);\n        this.renderer!.events.on(\"mousemove\", this._onMouseMove, this);\n\n        this._cornerLayer.events.on(\"mouseenter\", this._onCornerMouseEnter, this);\n        this._cornerLayer.events.on(\"mouseleave\", this._onCornerMouseLeave, this);\n        this._centerLayer.events.on(\"mouseenter\", this._onCenterMouseEnter, this);\n        this._centerLayer.events.on(\"mouseleave\", this._onCenterMouseLeave, this);\n    }\n\n    protected _clearEvents() {\n        this._cornerLayer.events.off(\"ldblclick\", this._onCornerLdblclick);\n        this._cornerLayer.events.off(\"ldown\", this._onCornerLdown);\n        this._centerLayer.events.off(\"ldown\", this._onCenterLdown);\n\n        this.renderer!.events.off(\"lup\", this._onLup);\n        this.renderer!.events.off(\"mousemove\", this._onMouseMove);\n\n        this._cornerLayer.events.off(\"mouseenter\", this._onCornerMouseEnter);\n        this._cornerLayer.events.off(\"mouseleave\", this._onCornerMouseLeave);\n        this._centerLayer.events.off(\"mouseenter\", this._onCenterMouseEnter);\n        this._centerLayer.events.off(\"mouseleave\", this._onCenterMouseLeave);\n    }\n\n    protected _drawCorners() {\n        let corners = this._cornerLayer.getEntities();\n        for (let i = 0; i < corners.length; i++) {\n            let ai = corners[i];\n            this._checkTerrainCollision(ai);\n        }\n    }\n\n    protected _drawCenters() {\n        let centers = this._centerLayer.getEntities();\n        for (let i = 0; i < centers.length; i++) {\n            let ai = centers[i];\n            this._checkTerrainCollision(ai);\n        }\n    }\n\n    protected _drawGhostCorner() {\n        if (this._showGhostPointer) {\n            this._checkTerrainCollision(this._ghostCorner);\n        }\n    }\n\n    public override frame() {\n        this._drawCorners();\n        this._drawCenters();\n        this._drawGhostCorner();\n    }\n\n    protected _checkTerrainCollision(entity: Entity) {\n        let _tempTerrPoint = new Vec3();\n        let nodes = this._planet!._renderedNodes;\n        for (let j = 0; j < nodes.length; j++) {\n            let seg = nodes[j].segment;\n            if (seg && seg._extentLonLat.isInside(entity.getLonLat())) {\n                seg.getEntityTerrainPoint(entity, _tempTerrPoint);\n                entity.setCartesian3v(_tempTerrPoint);\n                break;\n            }\n        }\n    }\n\n    protected _moveCenterPoint() {\n        let coords = this.getCoordinates(),\n            index = this._pickedCenter!.layerIndex + 1,\n            ll = this._pickedCenter!.getLonLat();\n        let newCorner: CoordinatesType = [ll.lon, ll.lat, ll.height];\n\n        coords.splice(index, 0, newCorner);\n\n        this.setCoordinates(coords);\n\n        this._pickedCenter = null;\n\n        this._pickedCorner = this._cornerLayer.getEntities()[index];\n    }\n\n    protected _addNew(cart: Vec3) {\n        if (this._insertCornerIndex === -1 || this._cornerLayer.getEntities().length < 2) {\n            this._appendCart(cart);\n        } else {\n            let area = this.getCoordinates(),\n                index = this._insertCornerIndex;\n            let ll = this._planet!.ellipsoid.cartesianToLonLat(cart);\n            let newCorner: CoordinatesType = [ll.lon, ll.lat, ll.height];\n            area.splice(index, 0, newCorner);\n            this.clear();\n            this.setCoordinates(area);\n        }\n    }\n\n    protected _appendCart(cart: Vec3) {\n        let corners = this._cornerLayer.getEntities();\n\n        let segNum = corners.length - 1;\n        let prevCorn = corners[segNum];\n\n        let corner = new Entity({\n            geoObject: CORNER_OPTIONS,\n        });\n\n        corner.setCartesian3v(cart);\n        corner.addTo(this._cornerLayer);\n        this._checkTerrainCollision(corner);\n\n        if (prevCorn) {\n\n            let firstCart = corners[0].getCartesian(),\n                prevCart = prevCorn.getCartesian();\n\n            let vecPrev = corner.getCartesian().sub(prevCart),\n                vecFirst = corner.getCartesian().sub(firstCart);\n\n            let distPrev = vecPrev.length(),\n                distFirst = vecFirst.length();\n\n            vecPrev.normalize();\n            vecFirst.normalize();\n\n            let prevPath = [],\n                firstPath = [];\n\n            for (let i = 0; i <= NUM_SEGMENTS; i++) {\n                let p = vecPrev.scaleTo(i * distPrev / NUM_SEGMENTS).addA(prevCart);\n                prevPath.push(p);\n\n                let f = vecFirst.scaleTo(i * distFirst / NUM_SEGMENTS).addA(firstCart);\n                firstPath.push(f);\n            }\n\n            this._outlineLayer.getEntities()[0].polyline!.setPath3v([firstPath]);\n\n            let entity = new Entity({\n                polyline: {\n                    path3v: [prevPath],\n                    isClosed: false,\n                    ...OUTLINE_OPTIONS\n                }\n            });\n            entity.polyline!.altitude = OUTLINE_ALT;\n            this._outlineLayer.add(entity);\n\n            let centers = this._centerLayer.getEntities();\n            let firstCenter = centers[centers.length - 1];\n\n            let prevCenterCart = vecPrev.scaleTo(distPrev * 0.5).addA(prevCart),\n                firstCenterCart = vecFirst.scaleTo(distFirst * 0.5).addA(firstCart);\n\n            let center = new Entity({\n                geoObject: CENTER_OPTIONS,\n            });\n            center.setCartesian3v(prevCenterCart);\n            center.addTo(this._centerLayer);\n            this._checkTerrainCollision(center);\n\n            //moveToEnd\n            firstCenter.remove();\n            firstCenter.addTo(this._centerLayer);\n\n            firstCenter.setCartesian3v(firstCenterCart);\n\n        } else {\n            let center = new Entity({\n                geoObject: CENTER_OPTIONS,\n            });\n            center.addTo(this._centerLayer);\n        }\n    }\n\n    protected _clearGhostPointer() {\n        const g = this._ghostOutlineLayer;\n        g.getEntities()[0].polyline!.clear();\n        g.getEntities()[1].polyline!.clear();\n    }\n\n    protected _moveCornerPoint(e: Vec2) {\n        let d = new Vec2(e.x, e.y).sub(this._startClick),\n            p = this._startPos!.add(d);\n\n        let groundCoords = this._planet!.getCartesianFromPixelTerrain(p);\n\n        if (groundCoords) {\n\n            this._pickedCorner!.setCartesian3v(groundCoords);\n\n            let corners = this._cornerLayer.getEntities();\n\n            if (corners.length) {\n                let ind = this._pickedCorner!.layerIndex;\n                let size = corners.length;\n\n                let cartPrev = corners[ind === 0 ? (size - 1) : (ind - 1)].getCartesian(),\n                    cartNext = corners[(ind + 1) % size].getCartesian();\n\n                let vecPrev = this._pickedCorner!.getCartesian().sub(cartPrev),\n                    vecNext = this._pickedCorner!.getCartesian().sub(cartNext);\n\n                let distPrev = vecPrev.length(),\n                    distNext = vecNext.length();\n\n                vecPrev.normalize();\n                vecNext.normalize();\n\n                let pathPrev = [],\n                    pathNext = [];\n\n                for (let i = 0; i <= NUM_SEGMENTS; i++) {\n                    let p = vecPrev.scaleTo(i * distPrev / NUM_SEGMENTS).addA(cartPrev);\n                    pathPrev.push(p);\n\n                    let f = vecNext.scaleTo(i * distNext / NUM_SEGMENTS).addA(cartNext);\n                    pathNext.push(f);\n                }\n\n                let entities = this._outlineLayer.getEntities();\n\n                let prevPolyline = entities[ind].polyline,\n                    nextPolyline = entities[(ind + 1) % size].polyline;\n\n                prevPolyline?.setPath3v([pathPrev]);\n                nextPolyline?.setPath3v([pathNext]);\n\n                //\n                // Move center points\n                let centers = this._centerLayer.getEntities();\n                let prevCenter = centers[ind === 0 ? (size - 1) : (ind - 1)],\n                    nextCenter = centers[ind];\n\n                let prevCenterCart = vecPrev.scaleTo(distPrev * 0.5).addA(cartPrev),\n                    nextCenterCart = vecNext.scaleTo(distNext * 0.5).addA(cartNext);\n\n                prevCenter.setCartesian3v(prevCenterCart);\n                this._checkTerrainCollision(prevCenter);\n\n                nextCenter.setCartesian3v(nextCenterCart);\n                this._checkTerrainCollision(nextCenter);\n            }\n        }\n    }\n\n    protected _updateGhostOutlinePointer(groundPos: Vec3) {\n\n        let corners = this._cornerLayer.getEntities();\n        let size = corners.length;\n\n        if (size > 0) {\n\n            let ind = 0;\n\n            let minDist = math.MAX;\n\n            for (let i = 0; i < size; i++) {\n                let ci = corners[i];\n                let dist = ci.getCartesian().distance(groundPos);\n                if (dist < minDist) {\n                    minDist = dist;\n                    ind = i;\n                }\n            }\n\n            let cCurr = corners[ind].getCartesian(),\n                cNext = corners[(ind + 1) % size].getCartesian(),\n                cPrev = corners[ind === 0 ? (size - 1) : (ind - 1)].getCartesian();\n\n            let nPrev = cPrev.sub(cCurr).normalize(),\n                nNext = cNext.sub(cCurr).normalize(),\n                nGround = groundPos.sub(cCurr).normalize();\n\n            let midVec = nPrev.add(nNext).normalize();\n\n            let toMid = nGround.cross(midVec),\n                up = nPrev.cross(nNext);\n\n            if (toMid.dot(up) > 0) {\n                ind--;\n                if (ind < 0) {\n                    ind = size - 1;\n                }\n            }\n\n            let temp = new Vec3();\n\n            for (let i = 0; i < size; i++) {\n                let side = new Line3(corners[i].getCartesian(), corners[(i + 1) % size].getCartesian());\n                let u = side.getNearestDistancePoint(groundPos, temp);\n                if (u) {\n                    let dist = temp.distance(groundPos);\n                    if (dist < minDist) {\n                        minDist = dist;\n                        ind = i;\n                    }\n                }\n            }\n\n            this._insertCornerIndex = (ind + 1) % size;\n\n            let cartPrev = corners[ind % size].getCartesian(),\n                cartNext = corners[(ind + 1) % size].getCartesian();\n\n            let vecPrev = this._ghostCorner.getCartesian().sub(cartPrev),\n                vecNext = this._ghostCorner.getCartesian().sub(cartNext);\n\n            let distPrev = vecPrev.length(),\n                distNext = vecNext.length();\n\n            vecPrev.normalize();\n            vecNext.normalize();\n\n            let pathPrev = [],\n                pathNext = [];\n\n            for (let i = 0; i <= NUM_SEGMENTS; i++) {\n                let p = vecPrev.scaleTo(i * distPrev / NUM_SEGMENTS).addA(cartPrev);\n                pathPrev.push(p);\n\n                let f = vecNext.scaleTo(i * distNext / NUM_SEGMENTS).addA(cartNext);\n                pathNext.push(f);\n            }\n\n            let entities = this._ghostOutlineLayer.getEntities();\n\n            let prevPolyline = entities[0].polyline,\n                nextPolyline = entities[1].polyline;\n\n            prevPolyline?.setPath3v([pathPrev]);\n            nextPolyline?.setPath3v([pathNext]);\n        }\n    }\n\n    protected _initGhostLayerPointer() {\n        this._ghostOutlineLayer.setEntities([\n            new Entity({\n                polyline: {\n                    path3v: [],\n                    isClosed: false,\n                    ...OUTLINE_OPTIONS\n                }\n            }), new Entity({\n                polyline: {\n                    path3v: [],\n                    isClosed: false,\n                    ...OUTLINE_OPTIONS\n                }\n            }),\n            this._ghostCorner\n        ]);\n\n        const g = this._ghostOutlineLayer;\n        g.getEntities()[0].polyline!.altitude = g.getEntities()[1].polyline!.altitude = OUTLINE_ALT;\n    }\n}\n\nexport {PolygonDrawingScene};\n","import {Entity} from \"../../entity/Entity\";\nimport {Vec2} from \"../../math/Vec2\";\nimport {Vec3} from \"../../math/Vec3\";\nimport {\n    CENTER_OPTIONS,\n    CORNER_OPTIONS,\n    NUM_SEGMENTS,\n    OUTLINE_ALT,\n    OUTLINE_OPTIONS,\n    PolygonDrawingScene,\n    IPolygonDrawingSceneParams\n} from \"./PolygonDrawingScene\";\n\nclass LineStringDrawingScene extends PolygonDrawingScene {\n    constructor(props: IPolygonDrawingSceneParams) {\n        super(props);\n    }\n\n    public override get geometryType(): string {\n        return \"LineString\";\n    }\n\n    protected override _addNew(cart: Vec3) {\n        this._appendCart(cart);\n    }\n\n    protected override _appendCart(cart: Vec3) {\n        let corners = this._cornerLayer.getEntities();\n\n        let segNum = corners.length - 1;\n        let prevCorn = corners[segNum];\n\n        let corner = new Entity({\n            geoObject: CORNER_OPTIONS,\n        });\n\n        corner.setCartesian3v(cart);\n        corner.addTo(this._cornerLayer);\n        this._checkTerrainCollision(corner);\n\n        if (prevCorn) {\n\n            let prevCart = prevCorn.getCartesian();\n\n            let vecPrev = corner.getCartesian().sub(prevCart);\n\n            let distPrev = vecPrev.length();\n\n            vecPrev.normalize();\n\n            let prevPath = [];\n\n            for (let i = 0; i <= NUM_SEGMENTS; i++) {\n                let p = vecPrev.scaleTo(i * distPrev / NUM_SEGMENTS).addA(prevCart);\n                prevPath.push(p);\n            }\n\n            let entity = new Entity({\n                polyline: {\n                    path3v: [prevPath],\n                    isClosed: false,\n                    ...OUTLINE_OPTIONS\n                }\n            });\n            entity.polyline!.altitude = OUTLINE_ALT;\n            this._outlineLayer.add(entity);\n\n            let prevCenterCart = vecPrev.scaleTo(distPrev * 0.5).addA(prevCart);\n\n            let center = new Entity({\n                geoObject: CENTER_OPTIONS,\n            });\n            center.setCartesian3v(prevCenterCart);\n            center.addTo(this._centerLayer);\n            this._checkTerrainCollision(center);\n\n        }\n    }\n\n    protected override _clearGhostPointer() {\n        this._ghostOutlineLayer.getEntities()[0].polyline!.clear();\n    }\n\n    protected _moveCorner(indexCurrent: number, indexPrev: number, indexCenter: number) {\n        let corners = this._cornerLayer.getEntities();\n        if (corners.length == 0) return;\n        if (corners.length == 1) {\n            indexCurrent = indexPrev = indexCenter = 0;\n        }\n        let cartCurr = corners[indexCurrent].getCartesian();\n        let vecCurr = this._pickedCorner!.getCartesian().sub(cartCurr);\n        let distCurr = vecCurr.length();\n        vecCurr.normalize();\n\n        let path = [];\n        for (let i = 0; i <= NUM_SEGMENTS; i++) {\n            let p = vecCurr.scaleTo(i * distCurr / NUM_SEGMENTS).addA(cartCurr);\n            path.push(p);\n        }\n\n        let entities = this._outlineLayer.getEntities();\n\n        let prevPolyline = entities[indexPrev].polyline;\n\n        prevPolyline?.setPath3v([path]);\n\n        //\n        // Move center points\n        let centers = this._centerLayer.getEntities();\n        let center = centers[indexCenter];\n\n        if (center) {\n            let centerCart = vecCurr.scaleTo(distCurr * 0.5).addA(cartCurr);\n            center.setCartesian3v(centerCart);\n            this._checkTerrainCollision(center);\n        }\n    }\n\n    protected override _moveCornerPoint(e: Vec2) {\n        let d = new Vec2(e.x, e.y).sub(this._startClick),\n            p = this._startPos!.add(d);\n\n        let groundCoords = this._planet!.getCartesianFromPixelTerrain(p);\n\n        if (groundCoords) {\n\n            this._pickedCorner!.setCartesian3v(groundCoords);\n\n            let corners = this._cornerLayer.getEntities();\n\n            if (corners.length) {\n                let ind = this._pickedCorner!.layerIndex;\n\n                if (ind === 0) {\n                    this._moveCorner(ind + 1, ind + 1, ind);\n                } else if (ind === corners.length - 1) {\n                    this._moveCorner(ind - 1, ind, ind - 1);\n                } else {\n                    this._moveCorner(ind + 1, ind + 1, ind);\n                    this._moveCorner(ind - 1, ind, ind - 1);\n                }\n            }\n        }\n    }\n\n    public override _updateGhostOutlinePointer(groundPos: Vec3) {\n\n        let corners = this._cornerLayer.getEntities();\n        let size = corners.length;\n\n        if (size > 0) {\n\n            let ind = size - 1;\n\n            this._insertCornerIndex = ind;\n\n            let cartPrev = corners[ind].getCartesian();\n\n            let vecPrev = this._ghostCorner.getCartesian().sub(cartPrev);\n\n            let distPrev = vecPrev.length();\n\n            vecPrev.normalize();\n\n            let pathPrev = [];\n\n            for (let i = 0; i <= NUM_SEGMENTS; i++) {\n                let p = vecPrev.scaleTo(i * distPrev / NUM_SEGMENTS).addA(cartPrev);\n                pathPrev.push(p);\n            }\n\n            let entities = this._ghostOutlineLayer.getEntities();\n\n            let prevPolyline = entities[0].polyline!;\n\n            prevPolyline.setPath3v([pathPrev]);\n        }\n    }\n\n    protected override _initGhostLayerPointer() {\n        this._ghostOutlineLayer.setEntities([\n            new Entity({\n                polyline: {\n                    path3v: [],\n                    isClosed: false,\n                    ...OUTLINE_OPTIONS\n                }\n            }),\n            this._ghostCorner\n        ]);\n\n        this._ghostOutlineLayer.getEntities()[0].polyline!.altitude = OUTLINE_ALT;\n    }\n}\n\nexport {LineStringDrawingScene};\n","import {Control, IControlParams} from \"../Control\";\nimport {LineStringDrawingScene} from \"./LineStringDrawingScene\";\nimport {PolygonDrawingScene} from \"./PolygonDrawingScene\";\n\nclass DrawingControl extends Control {\n    protected _drawingScene: PolygonDrawingScene;\n\n    constructor(options: IControlParams = {}) {\n        super(options);\n\n        this._drawingScene = new LineStringDrawingScene({\n            name: `drawingScene:${this.__id}`\n        });\n    }\n\n    public activatePolygonDrawing() {\n        this.deactivate();\n        this._drawingScene = new PolygonDrawingScene({\n            name: `polygonDrawingScene:${this.__id}`\n        });\n        this.activate();\n    }\n\n    public activateLineStringDrawing() {\n        this.deactivate();\n        this._drawingScene = new LineStringDrawingScene({\n            name: `linestringDrawingScene:${this.__id}`\n        });\n        this.activate();\n    }\n\n    public override oninit() {\n    }\n\n    public override onactivate() {\n        this.planet && this._drawingScene.bindPlanet(this.planet);\n        this.renderer && this.renderer.addNode(this._drawingScene);\n    }\n\n    public override ondeactivate() {\n        this.renderer && this.renderer.removeNode(this._drawingScene);\n    }\n}\n\nexport {DrawingControl};\n","import {ButtonGroup} from \"../ui/ButtonGroup\";\nimport {Control} from \"./Control\";\nimport {DrawingControl} from \"./drawing/DrawingControl\";\nimport {ToggleButton} from \"../ui/ToggleButton\";\n\nconst ICON_POLYGON_SVG = `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- Generator: Adobe Illustrator 24.1.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version=\"1.1\" id=\"Layer_2\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n\\t viewBox=\"0 0 1024 1024\" style=\"enable-background:new 0 0 1024 1024;\" xml:space=\"preserve\">\n<g>\n\\t<path d=\"M926.03,321.16c-16.02,0-31.11,3.94-44.48,10.79l-263.43-191.4c2.69-8.94,4.18-18.4,4.18-28.2\n\\t\\tc0-54.02-43.95-97.97-97.97-97.97c-54.03,0-97.98,43.95-97.98,97.97c0,9.81,1.49,19.27,4.18,28.21L155.75,340.18\n\\t\\tc-16.22-11.91-36.16-19.03-57.78-19.03C43.95,321.16,0,365.11,0,419.13c0,52.58,41.67,95.5,93.71,97.75l102.63,315.86\n\\t\\tc-24.28,17.85-40.13,46.52-40.13,78.9c0,54.02,43.95,97.98,97.98,97.98c37.54,0,70.18-21.25,86.62-52.34h367.26\n\\t\\tc16.44,31.08,49.08,52.34,86.63,52.34c54.03,0,97.98-43.95,97.98-97.98c0-32.46-15.94-61.21-40.33-79.05l104.11-320.4\n\\t\\tc39.15-12.84,67.54-49.68,67.54-93.07C1024,365.11,980.05,321.16,926.03,321.16z M828.05,911.65c0,8.5-3.3,16.19-8.55,22.09\n\\t\\tc-6.11,6.85-14.9,11.26-24.79,11.26c-13.65,0-25.37-8.26-30.52-20.02c-1.79-4.09-2.82-8.58-2.82-13.33\n\\t\\tc0-18.39,14.95-33.35,33.34-33.35c2.93,0,5.72,0.5,8.43,1.21c13.27,3.49,23.21,14.91,24.59,28.9\n\\t\\tC827.83,909.5,828.05,910.54,828.05,911.65z M790.48,813.89c-45.63,1.96-83.27,35.16-91.87,78.77H350.28\n\\t\\tc-8.62-43.69-46.38-76.93-92.11-78.79L155.59,498.19c24.41-17.84,40.36-46.59,40.36-79.06c0-8.9-1.3-17.49-3.53-25.7L468.57,192.8\n\\t\\tc15.84,11.01,35.05,17.52,55.76,17.52c20.71,0,39.92-6.5,55.76-17.52l256.56,186.4c-5.48,12.21-8.59,25.7-8.59,39.93\n\\t\\tc0,41.02,25.36,76.17,61.21,90.75L790.48,813.89z M254.19,945c-10.11,0-19.07-4.62-25.19-11.75c-5.01-5.84-8.15-13.32-8.15-21.6\n\\t\\tc0-0.91,0.2-1.76,0.27-2.66c1.14-14.18,11.08-25.8,24.43-29.41c2.78-0.75,5.64-1.28,8.65-1.28c18.38,0,33.33,14.96,33.33,33.35\n\\t\\tc0,4.74-1.03,9.24-2.82,13.33C279.55,936.74,267.83,945,254.19,945z M64.88,421.49c-0.06-0.79-0.24-1.55-0.24-2.35\n\\t\\tc0-16.41,11.93-30.01,27.55-32.76c1.89-0.33,3.8-0.58,5.78-0.58c11.94,0,22.35,6.36,28.24,15.81c3.18,5.11,5.11,11.09,5.11,17.53\n\\t\\tc0,15.47-10.63,28.39-24.94,32.14c-2.7,0.71-5.48,1.2-8.4,1.2C80.4,452.47,66.11,438.76,64.88,421.49z M549.41,90.62\n\\t\\tc5.07,5.85,8.25,13.39,8.25,21.72c0,7.32-2.44,14.03-6.45,19.54c-6.07,8.33-15.82,13.81-26.88,13.81\n\\t\\tc-11.07,0-20.83-5.48-26.89-13.81c-4.01-5.51-6.45-12.22-6.45-19.54c0-8.33,3.17-15.86,8.24-21.71\n\\t\\tc6.12-7.07,15.04-11.64,25.1-11.64C534.38,79,543.29,83.57,549.41,90.62z M959.36,419.13c0,11.94-6.36,22.35-15.82,28.24\n\\t\\tc-5.1,3.18-11.07,5.1-17.52,5.1c-6.08,0-11.71-1.76-16.62-4.61c-9.71-5.64-16.33-15.94-16.64-27.89c-0.01-0.29-0.09-0.56-0.09-0.85\n\\t\\tc0-11.75,6.14-22.05,15.36-28c5.2-3.35,11.35-5.35,17.99-5.35C944.41,385.78,959.36,400.75,959.36,419.13z\"/>\n</g>\n</svg>`;\n\nconst ICON_LINESTRING_SVG = `<?xml version=\"1.0\" encoding=\"utf-8\"?><!-- License: MIT. Made by Esri: https://github.com/Esri/calcite-ui-icons -->\n    <svg width=\"800px\" height=\"800px\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M21 6h.046l-5.25 9h-.944L10 9.455V7H7v2.926L1.862 18H0v3h3v-2.926L8.138 10h1.01L14 15.545V18h3v-3h-.046l5.25-9H24V3h-3zM8 8h1v1H8zM2 20H1v-1h1zm14-3h-1v-1h1zm7-13v1h-1V4z\"/></svg>`;\n\nconst ICON_DEFAULT_SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M4 0l16 12.279-6.951 1.17 4.325 8.817-3.596 1.734-4.35-8.879-5.428 4.702z\"/></svg>`;\n\n/**\n * Activate drawing control\n */\nexport class DrawingSwitcher extends Control {\n    public drawingControl: DrawingControl;\n\n    constructor(options = {}) {\n        super({\n            name: \"DrawingSwitcher\",\n            ...options\n        });\n\n        this.drawingControl = new DrawingControl();\n    }\n\n    public override oninit() {\n        this.planet!.addControl(this.drawingControl);\n        this._createMenu();\n    }\n\n    public override onactivate() {\n        this.drawingControl.activate();\n    }\n\n    public override ondeactivate() {\n        this.drawingControl.deactivate();\n    }\n\n    protected _createMenu() {\n\n        let defaultBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-drawing-default_button\"],\n            icon: ICON_DEFAULT_SVG,\n            name: \"default\",\n            isActive: true\n        });\n\n        let polyBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-drawing-polygon_button\"],\n            icon: ICON_POLYGON_SVG,\n            name: \"polygon\"\n        });\n\n        let lineBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-drawing-linestring_button\"],\n            icon: ICON_LINESTRING_SVG,\n            name: \"linestring\"\n        });\n\n        let buttons = new ButtonGroup({\n            buttons: [\n                defaultBtn, polyBtn, lineBtn\n            ]\n        });\n\n        buttons.events.on(\"change\", (btn: ToggleButton) => {\n            this.drawingControl.deactivate();\n            switch (btn.name) {\n                case \"polygon\":\n                    this.drawingControl.activatePolygonDrawing();\n                    break;\n                case \"linestring\":\n                    this.drawingControl.activateLineStringDrawing();\n                    break;\n            }\n        });\n\n        defaultBtn.appendTo(this.renderer!.div!)\n        polyBtn.appendTo(this.renderer!.div!);\n        lineBtn.appendTo(this.renderer!.div!);\n    }\n}\n","export const ELL = 0;\nexport const MSL = 1;\nexport const GND = 2;\n\nexport const heightMode: Record<string, number> = {\n    \"ell\": ELL,\n    \"msl\": MSL,\n    \"gnd\": GND\n};\n\nconst KM_to_M = 1000.0;\nconst M_to_KM = 1.0 / KM_to_M;\nconst FT_to_M = 0.3048;\nconst M_to_FT = 1.0 / FT_to_M;\nconst MS_to_KMH = 3.6;\nconst KMH_to_MS = 1.0 / MS_to_KMH;\nconst MS_to_FTS = 3.28084;\nconst FT_to_KM = FT_to_M * M_to_KM;\nconst KM_to_FT = 1.0 / FT_to_KM;\n\nexport const m = 0;\nexport const km = 1;\nexport const ft = 2;\nexport const s = 3;\nexport const h = 4;\nexport const ms = 5;\nexport const kmh = 6;\nexport const fts = 7;\n\nconst DEFAULT_NAN = \"--\";\n\nconst _abbr: string[] = [\"m\", \"km\", \"ft\", \"s\", \"h\", \"m/s\", \"km/h\", \"ft/s\"];\n\nexport const _tenth = [0, 2, 0, 0, 0, 0, 0, 0];\n\n\nlet _convFn: ((v: number) => number)[][] = [];\n\n_convFn[m] = [];\n_convFn[m][m] = (v: number): number => v;\n_convFn[m][km] = (v: number): number => v * M_to_KM;\n_convFn[m][ft] = (v: number): number => v * M_to_FT;\n\n_convFn[ft] = [];\n_convFn[ft][m] = (v: number): number => v * FT_to_M;\n_convFn[ft][km] = (v: number): number => v * FT_to_KM;\n_convFn[ft][ft] = (v: number): number => v;\n\n_convFn[km] = [];\n_convFn[km][m] = (v: number): number => v * KM_to_M;\n_convFn[km][km] = (v: number): number => v;\n_convFn[km][ft] = (v: number): number => v * KM_to_FT;\n\n_convFn[ms] = [];\n_convFn[ms][ms] = (v: number): number => v;\n_convFn[ms][kmh] = (v: number): number => v * MS_to_KMH;\n_convFn[ms][fts] = (v: number): number => v * MS_to_FTS;\n\n_convFn[kmh] = [];\n_convFn[kmh][ms] = (v: number): number => v * KMH_to_MS;\n_convFn[kmh][kmh] = (v: number): number => v;\n\n//_convFn[kmh][fts] = (v) => v * KMH_to_FTS;\n\nexport function convert(from: number, to: number, val: number): number {\n    return _convFn[from][to](val);\n}\n\nexport function convertExt(isNotNaN: boolean, unitFrom: number, unitTo: number, val: number, fixed?: number): string {\n    if (isNotNaN) {\n        return convert(unitFrom, unitTo, val).toFixed(fixed || _tenth[unitTo]);\n    }\n    return DEFAULT_NAN;\n}\n\nexport function toString(u: number) {\n    return _abbr[u];\n}","import * as units from '../utils/units';\nimport {Control, IControlParams} from './Control';\nimport {heightMode} from '../utils/units';\nimport {LonLat} from '../LonLat';\nimport {throttle} from '../utils/shared';\nimport {IMouseState} from \"../renderer/RendererEvents\";\n\ninterface IEarthCoordinatesParams extends IControlParams {\n    heightMode?: string;\n    centerMode?: boolean;\n    altitudeUnit?: string;\n    type?: number\n}\n\nconst DECIMAL_TEMPLATE =\n    `<div class=\"og-lat-side\"></div><div class=\"og-lat-val\"></div>\n    <div class=\"og-lon-side\"></div><div class=\"og-lon-val\"></div>\n    <div class=\"og-height\"></div>\n    <div class=\"og-units-height\"></div>`;\n\nconst DEGREE_TEMPLATE =\n    `<div class=\"og-lat-side\"></div><div class=\"og-lat-val\"></div>\n    <div class=\"og-lon-side\"></div><div class=\"og-lon-val\"></div>\n    <div class=\"og-height\"></div>\n    <div class=\"og-units-height\"></div>`;\n\nconst CENTER_SVG = '<svg width=\"12\" height=\"12\"><g><path stroke-width=\"1\" stroke-opacity=\"1\" d=\"M6 0L6 12M0 6L12 6\" stroke=\"#337ab7\"></path></g></svg>';\n\nconst TYPE_HTML = [DECIMAL_TEMPLATE, DEGREE_TEMPLATE];\n\n/**\n * Control displays mouse or screen center Earth coordinates.\n * @param {Boolean} [options.center] - Earth coordinates by screen center otherwise mouse pointer. False is default.\n * @param {Boolean} [options.type] - Coordinates shown: 0 - is decimal degrees, 1 - degrees, 2 - mercator geodetic coordinates.\n */\nexport class EarthCoordinates extends Control {\n    protected _type: number;\n    protected _TYPE_FUNC: ((ll?: LonLat | null) => void)[];\n    protected _showFn: ((ll?: LonLat | null) => void) | null;\n    protected _lonLat: LonLat | null;\n    protected _latSideEl: HTMLElement | null;\n    protected _lonSideEl: HTMLElement | null;\n    protected _latValEl: HTMLElement | null;\n    protected _lonValEl: HTMLElement | null;\n    protected _heightEl: HTMLElement | null;\n    protected _altUnitVal: string;\n    protected _heightModeVal: string;\n    protected _altUnit: number;\n    protected _heightMode: number;\n    protected _centerMode: boolean;\n    protected _el: HTMLElement | null;\n\n    constructor(options: IEarthCoordinatesParams = {}) {\n        super(options);\n\n        this._type = options.type || 0;\n\n        this._TYPE_FUNC = [this._SHOW_DECIMAL, this._SHOW_DEGREE];\n\n        this._showFn = null;\n\n        this._el = null;\n        this._latSideEl = null;\n        this._lonSideEl = null;\n        this._latValEl = null;\n        this._lonValEl = null;\n        this._heightEl = null;\n\n        this._altUnitVal = options.altitudeUnit || \"m\";\n        this._heightModeVal = options.heightMode || \"ell\";\n\n        this._altUnit = (units as any)[this._altUnitVal];\n        this._heightMode = heightMode[this._heightModeVal];\n\n        this._lonLat = null;\n\n        this._centerMode = options.centerMode != undefined ? options.centerMode : true;\n    }\n\n    protected _SHOW_DECIMAL(ll?: LonLat | null) {\n        if (ll) {\n            let lat = ll.lat,\n                lon = ll.lon;\n\n            if (lat >= 0) {\n                this._latSideEl!.innerHTML = 'N';\n            } else {\n                this._latSideEl!.innerHTML = 'S';\n            }\n\n            if (lon >= 0) {\n                this._lonSideEl!.innerHTML = 'E';\n            } else {\n                this._lonSideEl!.innerHTML = 'W';\n            }\n\n            this._latValEl!.innerHTML = Math.abs(lat).toFixed(7) + '¬∞';\n            this._lonValEl!.innerHTML = Math.abs(lon).toFixed(7) + '¬∞';\n        }\n    }\n\n    protected _SHOW_DEGREE(ll?: LonLat | null) {\n        if (ll) {\n            let lat = ll.lat,\n                lon = ll.lon;\n\n            if (lat >= 0) {\n                this._latSideEl!.innerHTML = 'N';\n            } else {\n                this._latSideEl!.innerHTML = 'S';\n            }\n\n            if (lon >= 0) {\n                this._lonSideEl!.innerHTML = 'E';\n            } else {\n                this._lonSideEl!.innerHTML = 'W';\n            }\n\n            let t = 0;\n\n            let deg = lat < 0 ? Math.ceil(lat) : Math.floor(lat);\n            let min = Math.floor(t = Math.abs((lat - deg)) * 60);\n            let sec = Math.floor((t - min) * 6000) / 100.0;\n            this._latValEl!.innerHTML = Math.abs(deg) + '¬∞' + min + \"'\" + sec.toFixed(0) + '\"';\n\n            deg = lon < 0 ? Math.ceil(lon) : Math.floor(lon);\n            min = Math.floor(t = Math.abs((lon - deg)) * 60);\n            sec = Math.floor((t - min) * 6000) / 100.0;\n            this._lonValEl!.innerHTML = Math.abs(deg) + '¬∞' + min + \"'\" + sec.toFixed(0) + '\"';\n        }\n    }\n\n    protected _createCenterEl(): HTMLElement {\n        let el = document.createElement('div');\n        el.className = 'og-center-icon';\n        el.innerHTML = CENTER_SVG;\n        return el;\n    }\n\n    protected _updateUnits() {\n        this._heightMode = heightMode[this._heightModeVal];\n        this._altUnit = (units as any)[this._altUnitVal];\n        this._el!.querySelector(\".og-units-height\")!.innerHTML = units.toString(this._altUnit);\n        this._showHeight();\n    }\n\n    protected _refreshCoordinates() {\n\n        if (this._type >= this._TYPE_FUNC.length) {\n            this._type = 0;\n        }\n\n        let el = this._el!;\n\n        el.innerHTML = TYPE_HTML[this._type];\n\n        this._latSideEl = el.querySelector(\".og-lat-side\");\n        this._lonSideEl = el.querySelector(\".og-lon-side\");\n        this._latValEl = el.querySelector(\".og-lat-val\");\n        this._lonValEl = el.querySelector(\".og-lon-val\");\n        this._heightEl = el.querySelector(\".og-height\");\n\n        this._showFn = this._TYPE_FUNC[this._type];\n        this._showFn(this._lonLat);\n    }\n\n    public override oninit() {\n        this._el = document.createElement('div');\n        this._el.classList.add(\"og-coordinates\");\n\n        this.renderer!.div!.appendChild(this._el);\n\n        this._el.addEventListener(\"click\", () => {\n            this._type++;\n            this._refreshCoordinates();\n            this._updateUnits();\n            this._showHeight();\n        });\n\n        if (this._centerMode) {\n            this.renderer!.div!.appendChild(this._createCenterEl());\n            this.planet!.camera.events.on(\"moveend\", this._grabCoordinates, this);\n            this.planet!.camera.events.on(\"moveend\", throttle(() => this._showHeight(), 400, true), this);\n        } else {\n            this.renderer!.events.on(\"mousemove\", this._grabCoordinates, this);\n            this.renderer!.events.on(\"mousestop\", throttle(() => this._showHeight(), 400, true), this);\n        }\n\n        this._refreshCoordinates();\n\n        this._updateUnits();\n    }\n\n    protected _grabCoordinates(e: IMouseState) {\n        let px = e.pos;\n        let scrPx;\n        let r = this.renderer;\n        if (this._centerMode) {\n            scrPx = r!.handler.getCenter();\n        } else {\n            scrPx = px;\n        }\n        this._lonLat = this.planet!.getLonLatFromPixelTerrain(scrPx) || null;\n        this._showFn!(this._lonLat);\n    }\n\n    protected async _showHeight() {\n        if (this._lonLat && this.planet) {\n            let alt = 0;\n            this._heightEl!.style.opacity = \"0.7\";\n            if (this._heightMode === heightMode.ell) {\n                alt = await this.planet.getHeightAboveELL(this._lonLat);\n                alt = Number(units.convertExt(true, units.m, this._altUnit, alt));\n            } else if (this._heightMode === heightMode.msl) {\n                alt = await this.planet.getHeightDefault(this._lonLat);\n                alt = Number(units.convertExt(true, units.m, this._altUnit, alt));\n            }\n            this._heightEl!.style.opacity = \"1.0\";\n            this._heightEl!.innerHTML = alt.toString();\n        }\n    }\n}\n","import {Control, IControlParams} from \"./Control\";\nimport {LonLat} from \"../LonLat\";\nimport {ITouchState} from \"../renderer/RendererEvents\";\nimport {IMouseState} from \"../renderer/RendererEvents\";\nimport {Quat} from \"../math/Quat\";\nimport {Ray} from \"../math/Ray\";\nimport {Sphere} from \"../bv/Sphere\";\nimport {Vec2} from \"../math/Vec2\";\nimport {Vec3} from \"../math/Vec3\";\n\ninterface IEarthNavigationParams extends IControlParams {\n\n}\n\nclass TouchExt {\n    public x: number;\n    public y: number;\n    public prev_x: number;\n    public prev_y: number;\n    public grabbedPoint: Vec3 | null;\n    public grabbedSpheroid: Sphere;\n\n    constructor() {\n        this.x = 0;\n        this.y = 0;\n        this.prev_x = 0;\n        this.prev_y = 0;\n        this.grabbedPoint = new Vec3();\n        this.grabbedSpheroid = new Sphere();\n    }\n\n    public dX(): number {\n        return this.x - this.prev_x;\n    }\n\n    public dY(): number {\n        return this.y - this.prev_y;\n    }\n}\n\nexport class EarthNavigation extends Control {\n    protected grabbedPoint: Vec3 | null;\n    protected grabbedDir: Vec3;\n    public inertia: number;\n    protected grabbedSpheroid: Sphere;\n    protected _vRot: Quat;\n    protected _hRot: Quat;\n    protected _a: number;\n    protected scaleRot: number;\n    protected currState: number;\n    protected positionState: { h: number; max: number; min: number; }[];\n    protected touches: TouchExt[];\n\n    constructor(options: IEarthNavigationParams = {}) {\n        super(options);\n\n        this.grabbedPoint = new Vec3();\n        this.grabbedDir = new Vec3();\n        this.inertia = 0.007;\n        this.grabbedSpheroid = new Sphere();\n        this.planet = null;\n        this._vRot = new Quat();\n        this._hRot = new Quat();\n        this._a = 0.0;\n        this.scaleRot = 0;\n        this.currState = 0;\n\n        this.positionState = [\n            {h: 17119745.303455353, max: 0.98, min: -0.98},\n            {h: 6866011, max: 0.98, min: -0.98},\n            {h: 3000000, max: 0.98, min: -0.98},\n            {h: 1000000, max: 0.98, min: -0.98},\n            {h: 500000, max: 0.98, min: -0.98}\n        ];\n\n        this.touches = [new TouchExt(), new TouchExt()];\n    }\n\n    public switchZoomState(wheelDelta: number) {\n        this.stopRotation();\n\n        if (wheelDelta > 0) {\n            this.currState++;\n        } else {\n            this.currState--;\n        }\n\n        if (this.currState <= 0) this.currState = 0;\n\n        if (this.currState >= this.positionState.length) {\n            this.currState = this.positionState.length - 1;\n        }\n\n        this.planet!.stopFlying();\n\n        const ll = this.planet!.camera._lonLat;\n\n        this.planet!.flyLonLat(new LonLat(ll.lon, ll.lat, this.positionState[this.currState].h));\n    }\n\n    protected onMouseWheel(event: IMouseState) {\n        this.switchZoomState(event.wheelDelta);\n    }\n\n    public override oninit() {\n        this.activate();\n    }\n\n    public override onactivate() {\n\n        let r = this.renderer!;\n\n        r.events.on(\"mousewheel\", this.onMouseWheel, this);\n        r.events.on(\"lhold\", this.onMouseLeftButtonDown, this);\n        r.events.on(\"ldown\", this.onMouseLeftButtonClick, this);\n        r.events.on(\"lup\", this.onMouseLeftButtonUp, this);\n\n        r.events.on(\"touchstart\", this.onTouchStart, this);\n        r.events.on(\"touchend\", this.onTouchEnd, this);\n        r.events.on(\"touchmove\", this.onTouchMove, this);\n\n        r.events.on(\"draw\", this.onDraw, this);\n    }\n\n    protected onTouchStart(e: ITouchState) {\n        if (e.sys!.touches.length == 1) {\n            const t = this.touches[0];\n\n            t.x = e.sys!.touches.item(0)!.pageX - e.sys!.offsetLeft;\n            t.y = e.sys!.touches.item(0)!.pageY - e.sys!.offsetTop;\n            t.prev_x = e.sys!.touches.item(0)!.pageX - e.sys!.offsetLeft;\n            t.prev_y = e.sys!.touches.item(0)!.pageY - e.sys!.offsetTop;\n\n            // t.grabbedPoint = this.planet!.getCartesianFromPixelTerrain(t, true);\n            t.grabbedPoint = this.planet!.getCartesianFromPixelTerrain(new Vec2(t.x, t.y)) || null;\n\n            if (t.grabbedPoint) {\n                t.grabbedSpheroid.radius = t.grabbedPoint.length();\n                this.stopRotation();\n            }\n        }\n    }\n\n    protected onTouchEnd(e: ITouchState) {\n        if (e.sys!.touches.length == 0) {\n            this.scaleRot = 1;\n\n            if (\n                Math.abs(this.touches[0].x - this.touches[0].prev_x) < 3 &&\n                Math.abs(this.touches[0].y - this.touches[0].prev_y) < 3\n            )\n                this.stopRotation();\n        }\n    }\n\n    protected onTouchMove(e: ITouchState) {\n        if (e.sys!.touches.length == 1) {\n            let cam = this.planet!.camera;\n\n            let t = this.touches[0];\n\n            t.prev_x = t.x;\n            t.prev_y = t.y;\n\n            t.x = e.sys!.touches.item(0)!.pageX - e.sys!.offsetLeft;\n            t.y = e.sys!.touches.item(0)!.pageY - e.sys!.offsetTop;\n\n            if (!t.grabbedPoint) return;\n\n            let direction = cam.unproject(t.x, t.y);\n            let targetPoint = new Ray(cam.eye, direction).hitSphere(t.grabbedSpheroid);\n\n            if (targetPoint) {\n                this._a =\n                    Math.acos(t.grabbedPoint.y / t.grabbedSpheroid.radius) -\n                    Math.acos(targetPoint.y / t.grabbedSpheroid.radius);\n                this._vRot = Quat.axisAngleToQuat(cam._u, this._a);\n                this._hRot = Quat.getRotationBetweenVectors(\n                    new Vec3(targetPoint.x, 0.0, targetPoint.z).normal(),\n                    new Vec3(t.grabbedPoint.x, 0.0, t.grabbedPoint.z).normal()\n                );\n\n                let rot = this._hRot.mul(this._vRot);\n\n                let state = this.positionState[this.currState];\n\n                let lim = rot.mulVec3(cam.eye).normal().dot(Vec3.NORTH);\n\n                if (lim > state.max || lim < state.min) {\n                    rot = Quat.yRotation(rot.getYaw());\n                }\n\n                cam.set(rot.mulVec3(cam.eye), Vec3.ZERO, Vec3.NORTH);\n                cam.update();\n            }\n        }\n    }\n\n    protected onMouseLeftButtonClick(e: IMouseState) {\n        this.renderer!.handler.canvas!.classList.add(\"ogGrabbingPoiner\");\n        this.grabbedPoint = this.planet!.getCartesianFromMouseTerrain() || null;\n        this.grabbedDir.copy(e.direction);\n        if (this.grabbedPoint) {\n            this.grabbedSpheroid.radius = this.grabbedPoint.length();\n            this.stopRotation();\n        }\n    }\n\n    public stopRotation() {\n        this.scaleRot = 0.0;\n        this._a = 0.0;\n        this._vRot.clear();\n        this._hRot.clear();\n    }\n\n    protected onMouseLeftButtonUp(e: IMouseState) {\n        this.scaleRot = 1;\n        this.renderer!.handler.canvas!.classList.remove(\"ogGrabbingPoiner\");\n        if (Math.abs(e.x - e.prev_x) < 3 && Math.abs(e.y - e.prev_y) < 3) this.stopRotation();\n    }\n\n    protected onMouseLeftButtonDown(e: IMouseState) {\n        let cam = this.planet!.camera;\n\n        if (!this.grabbedPoint || cam.isFlying()) return;\n\n        if (this.renderer!.events.mouseState.moving) {\n            let targetPoint = new Ray(cam.eye, e.direction).hitSphere(this.grabbedSpheroid);\n\n            if (targetPoint) {\n\n                this._a = Math.acos(this.grabbedPoint.y / this.grabbedSpheroid.radius) -\n                    Math.acos(targetPoint.y / this.grabbedSpheroid.radius);\n\n                let rot = this._vRot = Quat.axisAngleToQuat(cam._u, this._a);\n\n                cam.set(rot.mulVec3(cam.eye), Vec3.ZERO, rot.mulVec3(cam.getUp()));\n\n                this._hRot = Quat.getRotationBetweenVectors(\n                    new Vec3(targetPoint.x, 0.0, targetPoint.z).normal(),\n                    new Vec3(this.grabbedPoint.x, 0.0, this.grabbedPoint.z).normal()\n                );\n\n                rot = this._hRot;\n\n                cam.set(rot.mulVec3(cam.eye), Vec3.ZERO, rot.mulVec3(cam.getUp()));\n                cam.update();\n            }\n        } else {\n            this.scaleRot = 0;\n        }\n    }\n\n    protected onDraw() {\n        let r = this.renderer!;\n        let cam = this.planet!.camera;\n\n        if (r.events.mouseState.leftButtonDown || !this.scaleRot || cam.isFlying()) return;\n\n        this.scaleRot -= this.inertia;\n        if (this.scaleRot <= 0) {\n            this.scaleRot = 0;\n        } else {\n            this._vRot = Quat.axisAngleToQuat(cam._u, this._a);\n\n            let rot = this._vRot.mul(this._hRot);\n\n            let lim = rot.mulVec3(cam.eye).normal().dot(Vec3.NORTH);\n\n            let state = this.positionState[this.currState];\n\n            if (lim > state.max || lim < state.min) {\n                rot = Quat.yRotation(rot.getYaw());\n            }\n\n            r.controlsBag.scaleRot = this.scaleRot;\n            rot = rot\n                .slerp(Quat.IDENTITY, 1 - this.scaleRot * this.scaleRot * this.scaleRot)\n                .normalize();\n            if (!(rot.x || rot.y || rot.z)) {\n                this.scaleRot = 0;\n            }\n\n            cam.set(rot.mulVec3(cam.eye), Vec3.ZERO, Vec3.NORTH);\n            cam.update();\n        }\n    }\n}\n","import * as mercator from \"../mercator\";\nimport {doubleToTwoFloats2} from \"../math/coder\";\nimport {Extent} from \"../Extent\";\nimport {EventCallback, EventsHandler} from \"../Events\";\nimport {Layer, LayerEventsList, ILayerParams} from \"./Layer\";\nimport {LonLat} from \"../LonLat\";\nimport {Material} from \"./Material\";\nimport {NumberArray2} from \"../math/Vec2\";\nimport {NumberArray4} from \"../math/Vec4\";\nimport {Planet} from \"../scene/Planet\";\nimport {WebGLBufferExt, WebGLTextureExt} from \"../webgl/Handler\";\n\nexport interface IBaseGeoImageParams extends ILayerParams {\n    fullExtent?: boolean;\n    corners?: NumberArray2[];\n}\n\ntype BaseGeoImageEventsList = [\n    \"loadend\"\n];\n\nconst BASEGEOIMAGE_EVENTS: BaseGeoImageEventsList = [\n    /**\n     * Triggered when image data is loaded\n     * @event EventsHandler<BaseGeoImageEventsList>#loadend\n     */\n    \"loadend\"\n];\n\nexport type BaseGeoImageEventsType = EventsHandler<BaseGeoImageEventsList> & EventsHandler<LayerEventsList>;\n\n/**\n * BaseGeoImage layer represents square imagery layer that\n * could be a static image, or animated video or webgl buffer\n * object displayed on the globe.\n * @class\n * @extends {Layer}\n */\nclass BaseGeoImage extends Layer {\n\n    public override events: BaseGeoImageEventsType;\n\n    protected _projType: number;\n\n    protected _frameWidth: number;\n    protected _frameHeight: number;\n\n    protected _sourceReady: boolean;\n    protected _sourceTexture: WebGLTextureExt | null;\n    protected _materialTexture: WebGLTextureExt | null;\n\n    protected _gridBufferLow: WebGLBufferExt | null;\n    protected _gridBufferHigh: WebGLBufferExt | null;\n\n    protected _extentWgs84ParamsHigh: Float32Array;\n    protected _extentWgs84ParamsLow: Float32Array;\n\n    protected _extentMercParamsHigh: Float32Array;\n    protected _extentMercParamsLow: Float32Array;\n\n    protected _refreshFrame: boolean;\n    protected _frameCreated: boolean;\n    protected _sourceCreated: boolean;\n\n    public _animate: boolean;\n    protected _ready: boolean;\n    public _creationProceeding: boolean;\n    public _isRendering: boolean;\n\n    protected _extentWgs84: Extent;\n    protected _cornersWgs84: LonLat[];\n    protected _cornersMerc: LonLat[];\n\n    protected _isFullExtent: number;\n\n    /**\n     * rendering function pointer\n     * @type {Function}\n     */\n    public rendering: Function;\n\n    protected _onLoadend_: EventCallback | null;\n\n    constructor(name: string | null, options: IBaseGeoImageParams = {}) {\n        super(name, options);\n\n        // @ts-ignore\n        this.events = this.events.registerNames(BASEGEOIMAGE_EVENTS);\n\n        this._projType = 0;\n\n        this._frameWidth = 256;\n        this._frameHeight = 256;\n\n        this._sourceReady = false;\n        this._sourceTexture = null;\n        this._materialTexture = null;\n\n        this._gridBufferLow = null;\n        this._gridBufferHigh = null;\n\n        this._extentWgs84ParamsHigh = new Float32Array(4);\n        this._extentWgs84ParamsLow = new Float32Array(4);\n\n        this._extentMercParamsHigh = new Float32Array(4);\n        this._extentMercParamsLow = new Float32Array(4);\n\n        this._refreshFrame = true;\n        this._frameCreated = false;\n        this._sourceCreated = false;\n\n        this._animate = false;\n        this._ready = false;\n        this._creationProceeding = false;\n        this._isRendering = false;\n\n        this._extentWgs84 = new Extent();\n        this._cornersWgs84 = [];\n        this._cornersMerc = [];\n\n        this._isFullExtent = options.fullExtent ? 1 : 0;\n\n        /**\n         * rendering function pointer\n         */\n        this.rendering = this._renderingProjType0.bind(this);\n\n        this._onLoadend_ = null;\n\n        options.corners && this.setCorners(options.corners);\n    }\n\n    public override get isIdle(): boolean {\n        return super.isIdle && this._ready;\n    }\n\n    public override addTo(planet: Planet) {\n        this._onLoadend_ = this._onLoadend.bind(this);\n        this.events.on(\"loadend\", this._onLoadend_, this);\n        return super.addTo(planet);\n    }\n\n    protected _onLoadend() {\n        if (this._planet) {\n            this._planet.events.dispatch(this._planet.events.layerloadend, this);\n        }\n    }\n\n    public override remove() {\n        this.events.off(\"loadend\", this._onLoadend_);\n        this._onLoadend_ = null;\n        return super.remove();\n    }\n\n    public override get instanceName(): string {\n        return \"BaseGeoImage\";\n    }\n\n    /**\n     * Gets corners coordinates.\n     * @public\n     * @return {Array.<LonLat>} - (exactly 4 entries)\n     */\n    public getCornersLonLat(): LonLat[] {\n        let c = this._cornersWgs84;\n        return [\n            new LonLat(c[0].lon, c[0].lat),\n            new LonLat(c[1].lon, c[1].lat),\n            new LonLat(c[2].lon, c[2].lat),\n            new LonLat(c[3].lon, c[3].lat)\n        ];\n    }\n\n    /**\n     * Gets corners coordinates.\n     * @public\n     * @return {Array.<Array<number>>} - (exactly 3 entries)\n     */\n    public getCorners(): NumberArray2[] {\n        let c = this._cornersWgs84;\n        return [\n            [c[0].lon, c[0].lat],\n            [c[1].lon, c[1].lat],\n            [c[2].lon, c[2].lat],\n            [c[3].lon, c[3].lat]\n        ];\n    }\n\n    /**\n     * Sets geoImage geographical corners coordinates.\n     * @public\n     * @param {Array.<Array.<number>>} corners - GeoImage corners coordinates. Where first coordinate (exactly 3 entries)\n     * coincedents to the left top image corner, secont to the right top image corner, third to the right bottom\n     * and fourth - left bottom image corner.\n     */\n    public setCorners(corners: NumberArray2[]) {\n        this.setCornersLonLat(LonLat.join(corners));\n    }\n\n    /**\n     * Sets geoImage geographical corners coordinates.\n     * @public\n     * @param {Array.<LonLat>} corners - GeoImage corners coordinates. Where first coordinate\n     * coincedents to the left top image corner, secont to the right top image corner, third to the right bottom\n     * and fourth - left bottom image corner. (exactly 4 entries)\n     */\n    public setCornersLonLat(corners: LonLat[]) {\n        this._refreshFrame = true;\n        this._cornersWgs84 = [\n            corners[0].clone(),\n            corners[1].clone(),\n            corners[2].clone(),\n            corners[3].clone()\n        ];\n\n        for (let i = 0; i < this._cornersWgs84.length; i++) {\n            if (this._cornersWgs84[i].lat >= 89.9) {\n                this._cornersWgs84[i].lat = 89.9;\n            }\n            if (this._cornersWgs84[i].lat <= -89.9) {\n                this._cornersWgs84[i].lat = -89.9;\n            }\n        }\n        this._extent.setByCoordinates(this._cornersWgs84);\n\n        let me = this._extent;\n        if (me.southWest.lat > mercator.MAX_LAT || me.northEast.lat < mercator.MIN_LAT) {\n            this._projType = 0;\n            this.rendering = this._renderingProjType0;\n        } else {\n            this._projType = 1;\n            this.rendering = this._renderingProjType1;\n        }\n\n        if (this._ready && !this._creationProceeding) {\n            this._planet!._geoImageCreator.add(this);\n        }\n    }\n\n    /**\n     * Creates geoImage frame.\n     * @protected\n     */\n    protected _createFrame() {\n        this._extentWgs84 = this._extent.clone();\n\n        this._cornersMerc = [\n            this._cornersWgs84[0].forwardMercatorEPS01(),\n            this._cornersWgs84[1].forwardMercatorEPS01(),\n            this._cornersWgs84[2].forwardMercatorEPS01(),\n            this._cornersWgs84[3].forwardMercatorEPS01()\n        ];\n\n        this._extentMerc = new Extent(\n            this._extentWgs84.southWest.forwardMercatorEPS01(),\n            this._extentWgs84.northEast.forwardMercatorEPS01()\n        );\n\n        let tempArr = new Float32Array(2);\n\n        if (this._projType === 0) {\n\n            doubleToTwoFloats2(this._extentWgs84.southWest.lon, tempArr);\n            this._extentWgs84ParamsHigh[0] = tempArr[0];\n            this._extentWgs84ParamsLow[0] = tempArr[1];\n\n            doubleToTwoFloats2(this._extentWgs84.southWest.lat, tempArr);\n            this._extentWgs84ParamsHigh[1] = tempArr[0];\n            this._extentWgs84ParamsLow[1] = tempArr[1];\n\n            this._extentWgs84ParamsHigh[2] = 2.0 / this._extentWgs84.getWidth();\n            this._extentWgs84ParamsHigh[3] = 2.0 / this._extentWgs84.getHeight();\n\n        } else {\n\n            doubleToTwoFloats2(this._extentMerc.southWest.lon, tempArr);\n            this._extentMercParamsHigh[0] = tempArr[0];\n            this._extentMercParamsLow[0] = tempArr[1];\n\n            doubleToTwoFloats2(this._extentMerc.southWest.lat, tempArr);\n            this._extentMercParamsHigh[1] = tempArr[0];\n            this._extentMercParamsLow[1] = tempArr[1];\n\n            this._extentMercParamsHigh[2] = 2.0 / this._extentMerc.getWidth();\n            this._extentMercParamsHigh[3] = 2.0 / this._extentMerc.getHeight();\n        }\n\n        // creates material frame textures\n        if (this._planet) {\n            let p = this._planet,\n                h = p.renderer!.handler,\n                gl = h.gl!;\n\n            gl.deleteTexture(this._materialTexture as WebGLTexture);\n            this._materialTexture = h.createEmptyTexture_l(this._frameWidth, this._frameHeight);\n\n            let gridBufferArr = this._planet._geoImageCreator.createGridBuffer(this._cornersWgs84, this._projType === 1);\n\n            this._gridBufferHigh = gridBufferArr[0];\n            this._gridBufferLow = gridBufferArr[1];\n\n            this._refreshFrame = false;\n        }\n    }\n\n    /**\n     * @public\n     * @override\n     * @param {Material} material - GeoImage material.\n     */\n    public override abortMaterialLoading(material: Material) {\n        this._creationProceeding = false;\n        material.isLoading = false;\n        material.isReady = false;\n    }\n\n    /**\n     * Clear layer material.\n     * @public\n     * @override\n     */\n    public override clear() {\n        let p = this._planet;\n\n        if (p) {\n            let gl = p.renderer!.handler.gl;\n            this._creationProceeding && p._geoImageCreator.remove(this);\n            p._clearLayerMaterial(this);\n\n            if (gl) {\n                gl.deleteBuffer(this._gridBufferHigh as WebGLBuffer);\n                gl.deleteBuffer(this._gridBufferLow as WebGLBuffer);\n                gl.deleteTexture(this._sourceTexture as WebGLTexture);\n                this._materialTexture && !this._materialTexture.default && gl.deleteTexture(this._materialTexture);\n            }\n        }\n\n        this._sourceTexture = null;\n        this._materialTexture = null;\n\n        this._gridBufferHigh = null;\n        this._gridBufferLow = null;\n\n        this._refreshFrame = true;\n        this._sourceCreated = false;\n\n        this._ready = false;\n        this._creationProceeding = false;\n    }\n\n    /**\n     * Sets layer visibility.\n     * @public\n     * @override\n     * @param {boolean} visibility - GeoImage visibility.\n     */\n    public override setVisibility(visibility: boolean) {\n        if (visibility !== this._visibility) {\n            super.setVisibility(visibility);\n\n            // remove from creator\n            if (this._planet && this._sourceReady) {\n                if (visibility) {\n                    this._planet._geoImageCreator.add(this);\n                } else {\n                    this._planet._geoImageCreator.remove(this);\n                }\n            }\n        }\n    }\n\n    /**\n     * @public\n     * @param {Material} material - GeoImage material.\n     */\n    public override clearMaterial(material: Material) {\n        material.texture = null;\n        material.isLoading = false;\n        material.isReady = false;\n    }\n\n    /**\n     * @public\n     * @override\n     * @returns {Array<number>} -\n     */\n    public override applyMaterial(material: Material): NumberArray4 {\n        let segment = material.segment;\n\n        if (this._ready) {\n            material.applyTexture(this._materialTexture);\n        } else {\n            material.texture = this._planet!.transparentTexture;\n            !this._creationProceeding && this.loadMaterial(material);\n        }\n\n        let v0s, v0t;\n        if (this._projType === 0) {\n            v0s = this._extentWgs84;\n            v0t = segment._extent;\n        } else {\n            v0s = this._extentMerc;\n            v0t = segment.getExtentMerc();\n        }\n\n        let sSize_x = v0s.northEast.lon - v0s.southWest.lon;\n        let sSize_y = v0s.northEast.lat - v0s.southWest.lat;\n        let dV0s_x = (v0t.southWest.lon - v0s.southWest.lon) / sSize_x;\n        let dV0s_y = (v0s.northEast.lat - v0t.northEast.lat) / sSize_y;\n        let dSize_x = (v0t.northEast.lon - v0t.southWest.lon) / sSize_x;\n        let dSize_y = (v0t.northEast.lat - v0t.southWest.lat) / sSize_y;\n\n        return [dV0s_x, dV0s_y, dSize_x, dSize_y];\n    }\n\n    /**\n     * Gets frame width size in pixels.\n     * @public\n     * @returns {Number} Frame width.\n     */\n    public get getFrameWidth(): number {\n        return this._frameWidth;\n    }\n\n    /**\n     * Gets frame height size in pixels.\n     * @public\n     * @returns {Number} Frame height.\n     */\n    public get getFrameHeight(): number {\n        return this._frameHeight;\n    }\n\n    /**\n     * Method depends on GeoImage instance\n     * @protected\n     */\n    protected _createSourceTexture() {\n        //empty\n    }\n\n    public _renderingProjType1() {\n        let p = this._planet!,\n            h = p.renderer!.handler,\n            gl = h.gl!,\n            creator = p._geoImageCreator;\n\n        this._refreshFrame && this._createFrame();\n        this._createSourceTexture();\n\n        let f = creator._framebuffer!;\n        f.setSize(this._frameWidth, this._frameHeight);\n        f.activate();\n\n        h.programs.geoImageTransform.activate();\n        let sh = h.programs.geoImageTransform._program;\n        let sha = sh.attributes,\n            shu = sh.uniforms;\n\n        gl.disable(gl.CULL_FACE);\n\n        f.bindOutputTexture(this._materialTexture as WebGLTexture);\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n        gl.uniform1i(shu.isFullExtent, this._isFullExtent);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, creator._texCoordsBuffer as WebGLBuffer);\n\n        gl.vertexAttribPointer(sha.texCoords, 2, gl.UNSIGNED_SHORT, true, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._gridBufferHigh as WebGLBuffer);\n        gl.vertexAttribPointer(sha.cornersHigh, this._gridBufferHigh!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._gridBufferLow as WebGLBuffer);\n        gl.vertexAttribPointer(sha.cornersLow, this._gridBufferLow!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.uniform4fv(shu.extentParamsHigh, this._extentMercParamsHigh);\n        gl.uniform4fv(shu.extentParamsLow, this._extentMercParamsLow);\n\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this._sourceTexture as WebGLTexture);\n        gl.uniform1i(shu.sourceTexture, 0);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, creator._indexBuffer as WebGLBuffer);\n        gl.drawElements(gl.TRIANGLE_STRIP, creator._indexBuffer!.numItems, gl.UNSIGNED_INT, 0);\n        f.deactivate();\n\n        gl.enable(gl.CULL_FACE);\n\n        this._ready = true;\n\n        this._creationProceeding = false;\n    }\n\n    protected _renderingProjType0() {\n        let p = this._planet!,\n            h = p.renderer!.handler,\n            gl = h.gl!,\n            creator = p._geoImageCreator;\n\n        this._refreshFrame && this._createFrame();\n        this._createSourceTexture();\n\n        let f = creator._framebuffer!;\n        f.setSize(this._frameWidth, this._frameHeight);\n        f.activate();\n\n        h.programs.geoImageTransform.activate();\n        let sh = h.programs.geoImageTransform._program;\n        let sha = sh.attributes,\n            shu = sh.uniforms;\n\n        gl.disable(gl.CULL_FACE);\n\n        f.bindOutputTexture(this._materialTexture as WebGLTexture);\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.bindBuffer(gl.ARRAY_BUFFER, creator._texCoordsBuffer as WebGLBuffer);\n\n        gl.vertexAttribPointer(sha.texCoords, 2, gl.UNSIGNED_SHORT, true, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._gridBufferHigh as WebGLBuffer);\n        gl.vertexAttribPointer(sha.cornersHigh, this._gridBufferHigh!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._gridBufferLow as WebGLBuffer);\n        gl.vertexAttribPointer(sha.cornersLow, this._gridBufferLow!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.uniform4fv(shu.extentParamsHigh, this._extentWgs84ParamsHigh);\n        gl.uniform4fv(shu.extentParamsLow, this._extentWgs84ParamsLow);\n\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this._sourceTexture as WebGLTexture);\n        gl.uniform1i(shu.sourceTexture, 0);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, creator._indexBuffer as WebGLBuffer);\n        gl.drawElements(gl.TRIANGLE_STRIP, creator._indexBuffer!.numItems, gl.UNSIGNED_INT, 0);\n        f.deactivate();\n\n        gl.enable(gl.CULL_FACE);\n\n        this._ready = true;\n\n        this._creationProceeding = false;\n    }\n}\n\nexport {BaseGeoImage};\n","import {BaseGeoImage} from '../layer/BaseGeoImage';\nimport {Control, IControlParams} from './Control';\nimport {Layer} from \"../layer/Layer\";\nimport {ToggleButton} from \"../ui/ToggleButton\";\nimport {IMouseState} from \"../renderer/RendererEvents\";\n\nconst ICON_BUTTON_SVG = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?> <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path d=\"M16 13l6.964 4.062-2.973.85 2.125 3.681-1.732 1-2.125-3.68-2.223 2.15L16 13zm-2-7h2v2h5a1 1 0 0 1 1 1v4h-2v-3H10v10h4v2H9a1 1 0 0 1-1-1v-5H6v-2h2V9a1 1 0 0 1 1-1h5V6zM4 14v2H2v-2h2zm0-4v2H2v-2h2zm0-4v2H2V6h2zm0-4v2H2V2h2zm4 0v2H6V2h2zm4 0v2h-2V2h2zm4 0v2h-2V2h2z\" fill=\"#000\"/></svg>`;\n\ninterface IGeoImageDragControlParams extends IControlParams {\n\n}\n\nexport class GeoImageDragControl extends Control {\n    protected _cornerIndex: number;\n    protected _catchCorner: boolean;\n    protected _toggleBtn: ToggleButton;\n\n    constructor(options: IGeoImageDragControlParams = {}) {\n        super(options);\n\n        this._cornerIndex = -1;\n        this._catchCorner = false;\n\n        this._toggleBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-geoimagegrag_button\"],\n            icon: ICON_BUTTON_SVG\n        });\n    }\n\n    override oninit() {\n        this._toggleBtn.appendTo(this.renderer!.div!);\n\n        this.planet!.events.on('layeradd', (e: Layer) => {\n            if (this.isActive()) {\n                this._bindLayer(e);\n            }\n        }, this);\n\n        this._toggleBtn.events.on(\"change\", (isActive: boolean) => {\n            if (isActive) {\n                this.activate();\n            } else {\n                this.deactivate();\n            }\n        });\n    }\n\n    override onactivate() {\n        super.onactivate();\n\n        const p = this.planet!;\n        for (let i = 0; i < p.layers.length; i++) {\n            this._bindLayer(p.layers[i]);\n        }\n    }\n\n    override ondeactivate() {\n        super.ondeactivate();\n        const p = this.planet!;\n        for (let i = 0; i < p.layers.length; i++) {\n            this._unbindLayer(p.layers[i]);\n        }\n    }\n\n    _bindLayer(layer: Layer) {\n        if (layer instanceof BaseGeoImage) {\n            layer.events.on('mousemove', this._onMouseMove, this);\n            layer.events.on(\"mouseleave\", this._onMouseLeave, this);\n            layer.events.on('ldown', this._onLDown, this);\n            layer.events.on('lup', this._onLUp, this);\n        }\n    }\n\n    protected _unbindLayer(layer: Layer) {\n        if (layer instanceof BaseGeoImage) {\n            layer.events.off('mousemove', this._onMouseMove);\n            layer.events.off(\"mouseleave\", this._onMouseLeave);\n            layer.events.off('ldown', this._onLDown);\n            layer.events.off('lup', this._onLUp);\n        }\n    }\n\n    protected _onLUp(ms: IMouseState) {\n        this._catchCorner = false;\n        ms.renderer.controls.mouseNavigation.activate();\n    }\n\n    protected _onLDown(ms: IMouseState) {\n        if (this._cornerIndex !== -1) {\n            this._catchCorner = true;\n            ms.renderer.controls.mouseNavigation.deactivate();\n        }\n    }\n\n    protected _onMouseLeave() {\n        document.body.style.cursor = 'auto';\n    }\n\n    protected _onMouseMove(ms: IMouseState) {\n        let layer = ms.pickingObject;\n        const p = this.planet!;\n        if (this._catchCorner) {// mouse is catching a corner\n            let corners = layer.getCornersLonLat();\n            // corners[this._cornerIndex] = p.getLonLatFromPixelTerrain(ms, true);\n            corners[this._cornerIndex] = p.getLonLatFromPixelTerrain(ms);\n            layer.setCornersLonLat(corners);\n        } else { // mouse isn't catching\n            this._cornerIndex = -1;\n            for (let i = 0; i < layer._cornersWgs84.length; i++) {\n                // let ground = p.getLonLatFromPixelTerrain(ms, true);\n                let ground = p.getLonLatFromPixelTerrain(ms);\n                // mouse is near\n                //if (ground && p.ellipsoid.getGreatCircleDistance(layer._cornersWgs84[i], ground) / p.getDistanceFromPixel(ms, true) <= 0.05) {\n                if (ground && p.ellipsoid.getGreatCircleDistance(layer._cornersWgs84[i], ground) / p.getDistanceFromPixel(ms) <= 0.05) {\n                    this._cornerIndex = i;\n                    document.body.style.cursor = 'move';\n                    break;\n                    // mouse is far\n                } else {\n                    document.body.style.cursor = 'auto';\n                }\n            }\n        }\n    }\n}\n","export const input: { [id: string]: number } = {\n    MB_LEFT: 0,\n    MB_RIGHT: 2,\n    MB_MIDDLE: 1,\n    KEY_CTRL: 17,\n    KEY_ALT: 18,\n    KEY_SHIFT: 16,\n    KEY_SPACE: 32,\n    KEY_PGUP: 33,\n    KEY_PGDN: 34,\n    KEY_LEFT: 37,\n    KEY_UP: 38,\n    KEY_RIGHT: 39,\n    KEY_DOWN: 40,\n    KEY_PRINTSCREEN: 44,\n    KEY_EQUALS: 61,\n    KEY_A: 65,\n    KEY_C: 67,\n    KEY_D: 68,\n    KEY_E: 69,\n    KEY_F: 70,\n    KEY_H: 72,\n    KEY_I: 73,\n    KEY_K: 75,\n    KEY_L: 76,\n    KEY_N: 78,\n    KEY_O: 79,\n    KEY_P: 80,\n    KEY_Q: 81,\n    KEY_R: 82,\n    KEY_S: 83,\n    KEY_V: 86,\n    KEY_W: 87,\n    KEY_X: 88,\n    KEY_Z: 90,\n    KEY_PLUS: 107,\n    KEY_F1: 112,\n    KEY_MINUS: 173,\n    KEY_APOSTROPHE: 192,\n    KEY_BACK_SLASH: 220,\n    KEY_MORE: 190,\n    KEY_SLASH: 191,\n    KEY_LESS: 188,\n    KEY_LEFT_SQUARE_BRACKET: 219,\n    KEY_RIGHT_SQUARE_BRACKET: 221,\n    KEY_SINGLE_QUOTE: 222\n};\n","import * as math from \"../math\";\nimport {Control, IControlParams} from \"./Control\";\nimport {input} from \"../input/input\";\nimport {Vec3} from \"../math/Vec3\";\n\ninterface IKeyboardNavigationParams extends IControlParams {\n    step?: number;\n}\n\n/**\n * Planet camera keyboard navigation. Use W,S,A,D and left shift key for fly around a planet.\n */\n\nexport class KeyboardNavigation extends Control {\n    public step: number;\n\n    constructor(options: IKeyboardNavigationParams = {}) {\n        options = options || {};\n        super({name: \"KeyboardNavigation\", ...options});\n        this.step = options.step || 250;\n    }\n\n    public override onactivate() {\n        let r = this.renderer!;\n        r.events.on(\"keypress\", input.KEY_PGUP, this.onCameraMoveForward, this);\n        r.events.on(\"keypress\", input.KEY_PGDN, this.onCameraMoveBackward, this);\n        r.events.on(\"keypress\", input.KEY_PLUS, this.onCameraMoveForward, this);\n        r.events.on(\"keypress\", input.KEY_EQUALS, this.onCameraMoveForward, this);\n        r.events.on(\"keypress\", input.KEY_MINUS, this.onCameraMoveBackward, this);\n        r.events.on(\"keypress\", input.KEY_W, this.onCameraMoveForward, this);\n        r.events.on(\"keypress\", input.KEY_S, this.onCameraMoveBackward, this);\n        r.events.on(\"keypress\", input.KEY_A, this.onCameraStrifeLeft, this);\n        r.events.on(\"keypress\", input.KEY_D, this.onCameraStrifeRight, this);\n        r.events.on(\"keypress\", input.KEY_UP, this.onCameraLookUp, this);\n        r.events.on(\"keypress\", input.KEY_DOWN, this.onCameraLookDown, this);\n        r.events.on(\"keypress\", input.KEY_LEFT, this.onCameraLookLeft, this);\n        r.events.on(\"keypress\", input.KEY_RIGHT, this.onCameraLookRight, this);\n        r.events.on(\"keypress\", input.KEY_Q, this.onCameraRollLeft, this);\n        r.events.on(\"keypress\", input.KEY_E, this.onCameraRollRight, this);\n        r.events.on(\"keypress\", input.KEY_N, this.onCameraRollNorth, this);\n    }\n\n    public override ondeactivate() {\n        let r = this.renderer!;\n        r.events.off(\"keypress\", input.KEY_PGUP, this.onCameraMoveForward);\n        r.events.off(\"keypress\", input.KEY_PGDN, this.onCameraMoveBackward);\n        r.events.off(\"keypress\", input.KEY_PLUS, this.onCameraMoveForward);\n        r.events.off(\"keypress\", input.KEY_EQUALS, this.onCameraMoveForward);\n        r.events.off(\"keypress\", input.KEY_MINUS, this.onCameraMoveBackward);\n        r.events.off(\"keypress\", input.KEY_W, this.onCameraMoveForward);\n        r.events.off(\"keypress\", input.KEY_S, this.onCameraMoveBackward);\n        r.events.off(\"keypress\", input.KEY_A, this.onCameraStrifeLeft);\n        r.events.off(\"keypress\", input.KEY_D, this.onCameraStrifeRight);\n        r.events.off(\"keypress\", input.KEY_UP, this.onCameraLookUp);\n        r.events.off(\"keypress\", input.KEY_DOWN, this.onCameraLookDown);\n        r.events.off(\"keypress\", input.KEY_LEFT, this.onCameraLookLeft);\n        r.events.off(\"keypress\", input.KEY_RIGHT, this.onCameraLookRight);\n        r.events.off(\"keypress\", input.KEY_Q, this.onCameraRollLeft);\n        r.events.off(\"keypress\", input.KEY_E, this.onCameraRollRight);\n        r.events.off(\"keypress\", input.KEY_N, this.onCameraRollNorth);\n    }\n\n    public override oninit() {\n        this.activate();\n    }\n\n    protected onCameraMoveForward() {\n        let cam = this.planet!.camera;\n        cam.slide(0, 0, -cam.getAltitude() / this.step);\n    }\n\n    protected onCameraMoveBackward() {\n        let cam = this.planet!.camera!;\n        cam.slide(0, 0, cam.getAltitude() / this.step);\n    }\n\n    protected onCameraStrifeLeft() {\n        let cam = this.planet!.camera;\n        cam.slide(-cam.getAltitude() / this.step, 0, 0);\n    }\n\n    protected onCameraStrifeRight() {\n        let cam = this.planet!.camera;\n        cam.slide(cam.getAltitude() / this.step, 0, 0);\n    }\n\n    protected onCameraLookUp() {\n        let cam = this.planet!.camera;\n        if (this.renderer!.events.isKeyPressed(input.KEY_SHIFT)) {\n            cam.pitch(15 / this.renderer!.handler.deltaTime);\n        } else {\n            cam.rotateVertical((cam.getAltitude() / 3000000) * math.RADIANS, Vec3.ZERO);\n        }\n    }\n\n    protected onCameraLookDown() {\n        let cam = this.planet!.camera;\n        if (this.renderer!.events.isKeyPressed(input.KEY_SHIFT)) {\n            cam.pitch(-15 / this.renderer!.handler.deltaTime);\n        } else {\n            cam.rotateVertical((-cam.getAltitude() / 3000000) * math.RADIANS, Vec3.ZERO);\n        }\n    }\n\n    protected onCameraLookLeft() {\n        let cam = this.planet!.camera;\n        if (this.renderer!.events.isKeyPressed(input.KEY_SHIFT)) {\n            cam.roll(15 / this.renderer!.handler.deltaTime);\n        } else {\n            cam.rotateHorizontal((cam.getAltitude() / 3000000) * math.RADIANS);\n        }\n    }\n\n    protected onCameraLookRight() {\n        let cam = this.planet!.camera;\n        if (this.renderer!.events.isKeyPressed(input.KEY_SHIFT)) {\n            cam.roll(-15 / this.renderer!.handler.deltaTime);\n        } else {\n            cam.rotateHorizontal((-cam.getAltitude() / 3000000) * math.RADIANS);\n        }\n    }\n\n    protected onCameraTurnLeft() {\n        let cam = this.planet!.camera;\n        if (this.renderer!.events.isKeyPressed(input.KEY_SHIFT)) {\n            cam.yaw(15 / this.renderer!.handler.deltaTime);\n        } else {\n            cam.rotateHorizontal((cam.getAltitude() / 3000000) * math.RADIANS);\n        }\n    }\n\n    protected onCameraTurnRight() {\n        let cam = this.planet!.camera;\n        if (this.renderer!.events.isKeyPressed(input.KEY_SHIFT)) {\n            cam.yaw(-15 / this.renderer!.handler.deltaTime);\n        } else {\n            cam.rotateHorizontal((-cam.getAltitude() / 3000000) * math.RADIANS, false, Vec3.ZERO);\n        }\n    }\n\n    // from CompassButton._onClick()\n    protected onCameraRollNorth() {\n        let c = this.planet!.getCartesianFromPixelTerrain(this.renderer!.handler.getCenter());\n        if (c) {\n            this.planet!.flyCartesian(\n                c.normal().scaleTo(c.length() + c.distance(this.planet!.camera.eye)),\n                null,\n                null,\n                0,\n                null,\n                null,\n                () => {\n                    this.planet!.camera.look;\n                }\n            );\n        } else {\n            this.planet!.flyCartesian(this.planet!.camera.eye);\n        }\n    }\n\n    protected onCameraRollLeft() {\n        this.planet!.camera.roll(-15 / this.renderer!.handler.deltaTime);\n    }\n\n    protected onCameraRollRight() {\n        this.planet!.camera.roll(15 / this.renderer!.handler.deltaTime);\n    }\n}","import {EventsHandler, createEvents} from '../Events';\nimport {Layer} from '../layer/Layer';\nimport {Control, IControlParams} from \"./Control\";\n\ntype LayerAnimationEventsList = [\"change\", \"idle\", \"play\", \"pause\", \"stop\"];\n\nconst LAYERANIMATION_EVENTS: LayerAnimationEventsList = [\"change\", \"idle\", \"play\", \"pause\", \"stop\"];\n\ninterface ILayerAnimationParams extends IControlParams {\n    layers?: Layer,\n    playInterval?: number,\n    frameSize?: number,\n    repeat?: boolean;\n    skipTimeout?: number;\n}\n\nexport class LayerAnimation extends Control {\n    public events: EventsHandler<LayerAnimationEventsList>;\n    protected _layersArr: Layer[];\n    protected _currentIndex: number;\n    protected _playInterval: number;\n    protected _playIntervalHandler: any;\n    protected _playIndex: number;\n    protected _frameSize: number;\n    public repeat: boolean;\n    public skipTimeout: number;\n    protected _timeoutStart: number;\n    protected _currVisibleIndex: number = 0;\n\n    constructor(options: ILayerAnimationParams = {}) {\n        super(options);\n        this.events = createEvents(LAYERANIMATION_EVENTS);\n        this._name = options.name || `layerAnimation-${this.__id}`;\n        this._layersArr = options.layers ? ([] as Layer[]).concat(options.layers) : [];\n        this._currentIndex = -1;\n        this._playInterval = options.playInterval || 120;\n        this._playIntervalHandler = -1;\n        this._playIndex = 0;\n        this._frameSize = options.frameSize || 50;\n        this.repeat = options.repeat != undefined ? options.repeat : true;\n        this.skipTimeout = options.skipTimeout || 5000;\n        this._timeoutStart = 0;\n    }\n\n    protected _onViewchange = () => {\n        this._timeoutStart = performance.now();\n    }\n\n    protected _getFramesNum(): number {\n        return Math.ceil(this._layersArr.length / this._frameSize);\n    }\n\n    protected _setFrame(frameIndex: number) {\n        for (let i = 0, len = this._getFramesNum(); i < len; i++) {\n            if (i !== frameIndex) {\n                this._removeFrameFromPlanet(i);\n            } else {\n                this._appendFrameToPlanet(i);\n            }\n        }\n    }\n\n    protected _getFrameIndex(layerIndex: number): number {\n        return Math.floor(layerIndex / this._frameSize);\n    }\n\n    protected _appendFrameToPlanet(frameIndex: number) {\n        if (this.planet) {\n            let minIndex = frameIndex * this._frameSize;\n            let maxIndex = minIndex + this._frameSize;\n            for (let i = minIndex, len = maxIndex > this._layersArr.length ? this._layersArr.length : maxIndex; i < len; i++) {\n                this.planet.addLayer(this._layersArr[i]);\n            }\n        }\n    }\n\n    protected _removeFrameFromPlanet(frameIndex: number) {\n        if (this.planet) {\n            let minIndex = frameIndex * this._frameSize;\n            let maxIndex = minIndex + this._frameSize;\n            for (let i = minIndex, len = maxIndex > this._layersArr.length ? this._layersArr.length : maxIndex; i < len; i++) {\n                this._layersArr[i].abortLoading();\n                this._layersArr[i].remove();\n                this._layersArr[i].setVisibility(false);\n            }\n        }\n    }\n\n    public override oninit() {\n        super.oninit();\n        this.onactivate();\n        this._initLayers();\n        this.planet!.events.on(\"layerloadend\", this._onLayerLoadend);\n        this._setCurrentIndexAsync(0, false, true);\n    }\n\n    public override onactivate() {\n        super.onactivate();\n        this.planet!.camera.events.on(\"viewchange\", this._onViewchange);\n        this.planet!.renderer!.handler.events.on(\"visibilitychange\", this._onVisibilityChange);\n    }\n\n    public override ondeactivate() {\n        super.ondeactivate();\n        this.planet!.camera.events.off(\"viewchange\", this._onViewchange);\n\n        for (let i = 0; i < this._layersArr.length; i++) {\n            this._layersArr[i].setVisibility(false);\n        }\n\n        this.planet!.events.off(\"layerloadend\", this._onLayerLoadend);\n        this.planet!.renderer!.handler.events.off(\"visibilitychange\", this._onVisibilityChange);\n    }\n\n    protected _onVisibilityChange = (isVisible: boolean) => {\n        if (!isVisible) {\n            this.pause();\n        }\n    }\n\n    public clear() {\n        this.stop();\n        this._currentIndex = -1;\n        this._currVisibleIndex = -1;\n        let layersToRemove = this._layersArr;\n        this._layersArr = [];\n        for (let i = 0; i < layersToRemove.length; i++) {\n            layersToRemove[i].remove();\n        }\n    }\n\n    protected _initLayers() {\n        if (this.planet) {\n            for (let i = 0, len = this._layersArr.length; i < len; i++) {\n                let li = this._layersArr[i];\n                li.setVisibility(false);\n                li.setBaseLayer(false);\n                li.opacity = 0.0;\n            }\n            this._appendFrameToPlanet(0);\n        }\n    }\n\n    public setLayers(layers: Layer[]) {\n        this.clear();\n        this._layersArr = [].concat(layers as any);\n        this._initLayers();\n    }\n\n    public appendLayer(layer: Layer) {\n        this._layersArr.push(layer);\n        layer.setVisibility(false);\n        layer.setBaseLayer(false);\n        layer.opacity = 0.0;\n        //check current frame\n        this.planet?.addLayer(layer);\n    }\n\n    /**\n     * warning: Use XYZ.isIdle in requestAnimationFrame(after setVisibility)\n     * @returns Returns true if current layer is idle\n     */\n    public get isIdle(): boolean {\n        let currLayer = this._layersArr[this._currentIndex];\n        return currLayer && currLayer.isIdle || !currLayer;\n    }\n\n    public get playInterval() {\n        return this._playInterval;\n    }\n\n    public set playInterval(val: number) {\n        if (val !== this._playInterval) {\n            this._playInterval = val;\n            if (this.isPlaying) {\n                this.pause();\n                this.play();\n            }\n        }\n    }\n\n    public get isPlaying(): boolean {\n        return this._playIntervalHandler !== -1;\n    }\n\n    public get layers(): Layer[] {\n        return this._layersArr;\n    }\n\n    protected _checkEnd() {\n        if (this._playIndex > this._layersArr.length) {\n            if (this.repeat) {\n                this._playIndex = 0;\n            } else {\n                this.pause();\n            }\n        }\n    }\n\n    public play() {\n        if (!this.isPlaying) {\n\n            if (this._currentIndex >= this._layersArr.length - 1) {\n                this.stop();\n            }\n\n            this._timeoutStart = performance.now();\n\n            this._playIntervalHandler = setInterval(() => {\n                this._checkEnd();\n                this._setCurrentIndexAsync(this._playIndex, false, false);\n\n                requestAnimationFrame(() => {\n                    if (this.isIdle || (performance.now() - this._timeoutStart > this.skipTimeout)) {\n                        this._playIndex++;\n                        this._timeoutStart = performance.now();\n                    }\n                });\n\n            }, this._playInterval);\n\n            this.events.dispatch(this.events.play);\n        }\n    }\n\n    public stop() {\n        if (this._playIndex > 0) {\n            this._clearInterval();\n            this._playIndex = 0;\n            this.setCurrentIndex(0);\n            this.events.dispatch(this.events.stop);\n        }\n    }\n\n    public pause() {\n        if (this.isPlaying) {\n            this._clearInterval();\n            this.events.dispatch(this.events.pause);\n        }\n    }\n\n    protected _clearInterval() {\n        clearInterval(this._playIntervalHandler);\n        this._playIntervalHandler = -1;\n    }\n\n    /**\n     * Waiting for the current index layer loadend and make it non-transparent,\n     * and make prev layer transparent, also check previous frame index to clean up.\n     */\n    private _onLayerLoadend = (layer: Layer) => {\n\n        let currLayer = this._layersArr[this._currentIndex];\n\n        if (currLayer && currLayer.isEqual(layer)) {\n\n            // BRUTE\n            let currFrame = this._getFrameIndex(this._currentIndex);\n            let from = currFrame * this._frameSize,\n                to = this._currentIndex;\n            for (let i = from; i < to; i++) {\n                let li = this._layersArr[i];\n                li.opacity = 0;\n                li.setVisibility(false);\n            }\n\n            // * Make CURRENT Layer VISIBLE *\n            currLayer.opacity = 1.0;\n\n            let currVisibleLayer = this._layersArr[this._currVisibleIndex];\n            if (currVisibleLayer) {\n                currVisibleLayer.opacity = 0.0;\n                currVisibleLayer.setVisibility(false);\n\n                // If frame is changed - remove it from the planet\n                let prevFrame = this._getFrameIndex(this._currVisibleIndex);\n                if (this._getFrameIndex(this._currentIndex) !== prevFrame) {\n                    this._removeFrameFromPlanet(prevFrame);\n                }\n            }\n\n            this.events.dispatch(this.events.idle, currLayer);\n        }\n    }\n\n\n    /**\n     * Function sets layer index visible.\n     * @param {number} index\n     * @param {boolean} [stopPropagation=false]\n     */\n    setCurrentIndex(index: number, stopPropagation = false) {\n        this._setCurrentIndexAsync(index, true, stopPropagation);\n    }\n\n    /**\n     * Function sets layer index visible. If the layer is idle (all visible tiles loaded), sets opacity to one,\n     * otherwise to ZERO it means that when all visible tiles will be loaded the opacity becomes ONE. So, previous\n     * layer remains not transparent (opacity = 1) till current layer is loading.\n     */\n    protected _setCurrentIndexAsync(index: number, forceVisibility: boolean = false, stopPropagation: boolean = false) {\n\n        if (index != this._currentIndex && index >= 0 && index < this._layersArr.length) {\n\n            let prevCurrIndex = this._currentIndex;\n            this._currentIndex = index;\n            this._playIndex = index;\n\n            let prevCurrFrame = this._getFrameIndex(prevCurrIndex);\n            let currFrame = this._getFrameIndex(this._currentIndex);\n\n            let prevCurrLayer = this._layersArr[prevCurrIndex],\n                currLayer = this._layersArr[index];\n\n            let frameChanged = currFrame != prevCurrFrame;\n            if (frameChanged) {\n                this._appendFrameToPlanet(currFrame);\n            }\n\n            if (prevCurrLayer) {\n                if (prevCurrLayer.isIdle) {\n                    this._currVisibleIndex = prevCurrIndex;\n                } else {\n                    prevCurrLayer.opacity = 0;\n                    prevCurrLayer.setVisibility(false);\n                }\n            }\n\n            if (currLayer) {\n\n                currLayer.opacity = 0.0;\n                currLayer.setVisibility(true);\n\n                requestAnimationFrame(() => {\n                    if (currLayer.isIdle || forceVisibility) {\n\n                        currLayer.opacity = 1.0;\n\n                        // If frame is changed - remove it from the planet\n                        if (frameChanged) {\n                            this._removeFrameFromPlanet(prevCurrFrame);\n                        }\n\n                        if (prevCurrLayer) {\n                            prevCurrLayer.opacity = 0.0;\n                            prevCurrLayer.setVisibility(false);\n                        }\n\n                        let currVisibleLayer = this._layersArr[this._currVisibleIndex];\n                        if (currVisibleLayer) {\n                            currVisibleLayer.opacity = 0.0;\n                            currVisibleLayer.setVisibility(false);\n                        }\n                    }\n                });\n\n                if (!stopPropagation) {\n                    this.events.dispatch(this.events.change, this._currentIndex, prevCurrIndex);\n                }\n            }\n        }\n    }\n}\n","import {Control, IControlParams} from \"./Control\";\nimport {Dialog} from \"../ui/Dialog\";\nimport {Layer} from \"../layer/Layer\";\nimport {ToggleButton} from \"../ui/ToggleButton\";\nimport {IViewParams, View} from \"../ui/View\";\nimport {stringTemplate} from \"../utils/shared\";\n\ninterface ILayerSwitcherParams extends IControlParams {\n\n}\n\nconst ICON_BUTTON_SVG = `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- Svg Vector Icons : http://www.onlinewebfonts.com/icon -->\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 1000 1000\" enable-background=\"new 0 0 1000 1000\" xml:space=\"preserve\">\n<metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>\n<g><path d=\"M500,573.5c-3.2,0-6.5-0.6-9.5-1.9L25,375.6c-9.1-3.8-15-12.7-15-22.6s5.9-18.8,15-22.6l465.5-196c6.1-2.5,12.9-2.5,19,0l465.5,196c9.1,3.8,15,12.7,15,22.6s-5.9,18.8-15,22.6l-465.5,196C506.5,572.9,503.2,573.5,500,573.5L500,573.5z M97.6,353L500,522.4L902.4,353L500,183.6L97.6,353L97.6,353z\"/><path d=\"M500,720.5c-3.2,0-6.5-0.6-9.5-1.9L25,522.6c-12.4-5.2-18.3-19.6-13.1-32.1c5.2-12.5,19.6-18.3,32.1-13.1l456,192l456-192c12.4-5.2,26.9,0.6,32.1,13.1s-0.6,26.9-13.1,32.1l-465.5,196C506.5,719.9,503.2,720.5,500,720.5L500,720.5z\"/><path d=\"M500,867.5c-3.2,0-6.5-0.6-9.5-1.9L25,669.6c-12.4-5.2-18.3-19.6-13.1-32.1c5.2-12.5,19.6-18.3,32.1-13.1l456,192l456-192c12.4-5.2,26.9,0.6,32.1,13.1c5.2,12.5-0.6,26.8-13.1,32.1l-465.5,196C506.5,866.9,503.2,867.5,500,867.5L500,867.5z\"/></g>\n</svg>`;\n\n\nconst TEMPLATE =\n    `<div class=\"og-layerSwitcher\">\n      <div class=\"og-layerSwitcher__title\">Base Layers</div>\n      <div class=\"og-layerSwitcher__list og-layerSwitcher__baseLayers\"></div>        \n        \n      <div class=\"og-layerSwitcher__title\">Overlays</div>\n      <div class=\"og-layerSwitcher__list og-layerSwitcher__overlays\"></div>\n         \n    </div>`;\n\nconst LAYER_BUTTON_TEMPLATE =\n    `<button title={title} class=\"og-layerSwitcher__layerButton\">{icon}<div class=\"og-layerSwitcher__name\">{name}</div></button>`;\n\nclass LayerButtonView extends View<Layer> {\n    constructor(params: IViewParams) {\n        super({\n            template: stringTemplate(LAYER_BUTTON_TEMPLATE, {\n                title: params.model.name,\n                name: params.model.name,\n                icon: params.model.iconSrc ? `<img src=\"${params.model.iconSrc}\" />` : \"\"\n            }),\n            ...params\n        });\n    }\n\n    public override render(params?: any): this {\n        super.render(params);\n        this.model.events.on(\"visibilitychange\", this._onVisibilityChange);\n        this._onVisibilityChange(this.model);\n        this.el!.addEventListener(\"click\", this._onClick);\n        this.el!.addEventListener(\"dblclick\", this._onDblClick);\n        return this;\n    }\n\n    protected _onVisibilityChange = (layer: Layer) => {\n        if (this.el) {\n            if (this.model.getVisibility()) {\n                this.el.classList.add(\"og-layerSwitcher__visible\");\n            } else {\n                this.el.classList.remove(\"og-layerSwitcher__visible\");\n            }\n        }\n    }\n\n    protected _onClick = () => {\n        if (this.model.isBaseLayer()) {\n            this.model.setVisibility(true);\n        } else {\n            this.model.setVisibility(!this.model.getVisibility());\n        }\n    }\n\n    protected _onDblClick = () => {\n        this.model.flyExtent();\n    }\n\n    public override remove() {\n        super.remove();\n        this.model.events.off(\"visibilitychange\", this._onVisibilityChange);\n    }\n}\n\n/**\n * Advanced :) layer switcher, includes base layers, overlays, geo images etc. groups.\n * Double click for zoom, drag-and-drop to change zIndex\n */\nexport class LayerSwitcher extends Control {\n    protected _dialog: Dialog<null>;\n    protected _toggleBtn: ToggleButton;\n    protected _panel: View<null>;\n\n    public $baseLayers: HTMLElement | null;\n    public $overlays: HTMLElement | null;\n\n    public _layerViews: LayerButtonView[];\n\n    constructor(options: ILayerSwitcherParams = {}) {\n        super({\n            name: \"LayerSwitcher\",\n            ...options\n        });\n\n        this._dialog = new Dialog({\n            title: \"Layer Switcher\",\n            top: 15,\n            useHide: true,\n            visible: false,\n            width: 300,\n            maxHeight: 500\n        });\n\n        this._panel = new View({\n            template: TEMPLATE\n        });\n\n        this._toggleBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-layerSwitcher_button\"],\n            icon: ICON_BUTTON_SVG\n        });\n\n        this.$baseLayers = null;\n        this.$overlays = null;\n\n        this._layerViews = [];\n    }\n\n    override oninit() {\n\n        this._toggleBtn.appendTo(this.renderer!.div!);\n        this._dialog.appendTo(this.planet!.renderer!.div!);\n        this._panel.appendTo(this._dialog.container!);\n\n        this.$baseLayers = this._panel.el!.querySelector(\".og-layerSwitcher__baseLayers\");\n        this.$overlays = this._panel.el!.querySelector(\".og-layerSwitcher__overlays\");\n\n        this._dialog.setPosition((this.planet!.renderer!.div!.clientWidth as number) - this._dialog.width - 67)\n\n        this._dialog.events.on(\"visibility\", (v: boolean) => {\n            this._toggleBtn.setActive(v);\n        });\n\n        this._toggleBtn.events.on(\"change\", (isActive: boolean) => {\n            this._dialog.setVisibility(isActive);\n        });\n\n        this.planet!.events.on(\"layeradd\", this.addLayer, this);\n        this.planet!.events.on(\"layerremove\", this.removeLayer, this);\n\n        this._initLayers();\n    }\n\n    protected _initLayers() {\n        let layers = this.planet!.layers;\n        for (let i = 0; i < layers.length; i++) {\n            this.addLayer(layers[i]);\n        }\n    }\n\n    protected _createLayerButton(layer: Layer): LayerButtonView {\n        return new LayerButtonView({\n            model: layer\n        });\n    }\n\n    public addLayer = (layer: Layer) => {\n        if (!layer.hideInLayerSwitcher) {\n            let layerView = this._createLayerButton(layer);\n            this._layerViews.push(layerView);\n            if (layer.isBaseLayer()) {\n                layerView.appendTo(this.$baseLayers!);\n            } else {\n                layerView.appendTo(this.$overlays!);\n            }\n        }\n    }\n\n    public removeLayer = (layer: Layer) => {\n        for (let i = 0; i < this._layerViews.length; i++) {\n            let li = this._layerViews[i];\n            if (li.model.isEqual(layer)) {\n                li.remove();\n                this._layerViews.splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    override onactivate() {\n\n    }\n\n    override ondeactivate() {\n        this._dialog.hide();\n    }\n\n}\n","import {clamp} from '../math';\nimport {EventsHandler} from \"../Events\";\nimport {IViewParams, View, ViewEventsList} from './View';\nimport {stringTemplate} from '../utils/shared';\n\ninterface ISliderParams extends IViewParams {\n    label?: string;\n    value?: number;\n    min?: number;\n    max?: number;\n}\n\ntype SliderEventsList = [\"change\"];\n\nconst SLIDER_EVENTS: SliderEventsList = [\"change\"];\n\nconst TEMPLATE = `<div class=\"og-slider\">\n      <div class=\"og-slider-label\">{label}</div>\n      <div class=\"og-slider-panel\">\n        <div class=\"og-slider-progress\"></div>      \n        <div class=\"og-slider-pointer\"></div>\n      </div>\n      <input type=\"number\"/>\n    </div>`;\n\nclass Slider extends View<null> {\n\n    public override events: EventsHandler<SliderEventsList> & EventsHandler<ViewEventsList>;\n\n    protected _value: number;\n    protected _min: number;\n    protected _max: number;\n\n    protected _startPosX: number;\n\n    protected _resizeObserver: ResizeObserver;\n\n    protected $label: HTMLElement | null;\n    protected $pointer: HTMLElement | null;\n    protected $progress: HTMLElement | null;\n    protected $input: HTMLInputElement | null;\n    protected $panel: HTMLElement | null;\n\n    constructor(options: ISliderParams = {}) {\n        super({\n            template: stringTemplate(TEMPLATE, {\n                label: options.label || \"\"\n            })\n        });\n\n        //@ts-ignore\n        this.events = this.events.registerNames(SLIDER_EVENTS);\n\n        this._value = options.value || 0.0;\n        this._min = options.min || 0.0;\n        this._max = options.max || 1.0;\n        //this._step = options.step || ((this._max - this._min) / 10.0);\n\n        this._resizeObserver = new ResizeObserver(this._onResize);\n\n        this._startPosX = 0;\n\n        this.$label = null;\n        this.$pointer = null;\n        this.$progress = null;\n        this.$input = null;\n        this.$panel = null;\n    }\n\n    public override render(params: any): this {\n\n        super.render(params);\n\n        this.$label = this.select(\".og-slider-label\")!;\n        if (this.$label.innerHTML === \"\") {\n            this.$label.style.display = \"none\";\n        }\n        this.$pointer = this.select(\".og-slider-pointer\");\n        this.$progress = this.select(\".og-slider-progress\");\n        this.$panel = this.select(\".og-slider-panel\");\n        this.$input = this.select<HTMLInputElement>(\"input\");\n\n        this._resizeObserver.observe(this.el!);\n\n        this._initEvents();\n\n        return this;\n    }\n\n    protected _onResize = () => {\n        this._setOffset((this._value - this._min) * this.$panel!.clientWidth / (this._max - this._min));\n    }\n\n    public set value(val: number) {\n        if (val !== this._value) {\n            this._value = clamp(val, this._min, this._max);\n            this.$input!.value = this._value.toString();\n            this._setOffset((this._value - this._min) * this.$panel!.clientWidth / (this._max - this._min));\n            this.events.dispatch(this.events.change, this._value, this);\n        }\n    }\n\n    public get value(): number {\n        return this._value;\n    }\n\n    protected _initEvents() {\n        this.$panel!.addEventListener(\"mousedown\", this._onMouseDown);\n        //@ts-ignore\n        this.$panel!.addEventListener(\"mousewheel\", this._onMouseWheel);\n        this.$panel!.addEventListener(\"wheel\", this._onMouseWheelFF);\n        this.$input!.addEventListener(\"input\", this._onInput);\n    }\n\n    protected _clearEvents() {\n        this.$panel!.removeEventListener(\"mousedown\", this._onMouseDown);\n        //@ts-ignore\n        this.$panel!.removeEventListener(\"mousewheel\", this._onMouseWheel);\n        this.$panel!.removeEventListener(\"wheel\", this._onMouseWheelFF);\n        this.$input!.removeEventListener(\"input\", this._onInput);\n    }\n\n    protected _onMouseWheel = (e: WheelEvent) => {\n        //@ts-ignore\n        e = e || window.event;\n        e.preventDefault();\n        e.stopPropagation();\n        //@ts-ignore\n        this.value = this._value + Math.sign(e.wheelDelta) * (this._max - this._min) / 100.0;\n    }\n\n    protected _onMouseWheelFF = (e: WheelEvent) => {\n        this._onMouseWheel(e);\n    }\n\n    protected _onInput = (e: Event) => {\n        //@ts-ignore\n        e = e || window.event;\n        e.preventDefault();\n        e.stopPropagation();\n        //@ts-ignore\n        this.value = parseFloat(e.target.value);\n    }\n\n    protected _onMouseDown = (e: MouseEvent) => {\n        //@ts-ignore\n        e = e || window.event;\n        e.preventDefault();\n\n        this._startPosX = e.clientX;\n\n        this.value = this._min + (this._max - this._min) * (e.offsetX / this.$panel!.clientWidth);\n\n        document.addEventListener(\"mousemove\", this._onMouseMove);\n        document.addEventListener(\"mouseup\", this._onMouseUp);\n    }\n\n    protected _setOffset(x: number) {\n        if (x >= 0 && x <= this.$panel!.clientWidth) {\n            this.$pointer!.style.left = this.$progress!.style.width = `${x * 100 / this.$panel!.clientWidth}%`;\n        }\n    }\n\n    protected _onMouseMove = (e: MouseEvent) => {\n        //@ts-ignore\n        e = e || window.event;\n        e.preventDefault();\n        e.stopPropagation();\n\n        let rect = this.$panel!.getBoundingClientRect();\n        let clientX = clamp(e.clientX, rect.left, rect.right);\n        let dx = this._startPosX - clientX;\n        this._startPosX = clientX;\n        this.value = this._value - dx * (this._max - this._min) / this.$panel!.clientWidth;\n    }\n\n    protected _onMouseUp = () => {\n        document.removeEventListener(\"mouseup\", this._onMouseUp);\n        document.removeEventListener(\"mousemove\", this._onMouseMove);\n    }\n\n    public override remove() {\n        this._clearEvents();\n        super.remove();\n    }\n}\n\nexport {Slider}\n","import {clamp} from '../math';\nimport {EventsHandler} from \"../Events\";\nimport {IViewParams, View, ViewEventsList} from './View';\nimport {stringTemplate} from '../utils/shared';\n\ninterface IColorParams extends IViewParams {\n    label?: string;\n    value?: string;\n}\n\ntype ColorEventsList = [\"input\"];\n\nconst COLOR_EVENTS: ColorEventsList = [\"input\"];\n\nconst TEMPLATE =\n    `<div class=\"og-color\">\n      <label for=\"{id}\" class=\"og-color-label\">{label}</label>\n      <input type=\"color\" name=\"{id}\" value=\"{value}\"/>\n    </div>`;\n\nlet __labelCounter__ = 0;\n\nclass Color extends View<null> {\n\n    public override events: EventsHandler<ColorEventsList> & EventsHandler<ViewEventsList>;\n\n    protected _value: string;\n    protected $label: HTMLElement | null;\n    protected $input: HTMLInputElement | null;\n\n    constructor(options: IColorParams = {}) {\n        super({\n            template: stringTemplate(TEMPLATE, {\n                id: `color-${__labelCounter__++}`,\n                label: options.label || \"\"\n            })\n        });\n\n        //@ts-ignore\n        this.events = this.events.registerNames(COLOR_EVENTS);\n\n        this._value = options.value || \"blue\";\n\n        this.$label = null;\n        this.$input = null;\n    }\n\n    public override render(params: any): this {\n\n        super.render(params);\n\n        this.$label = this.select(\".og-color-label\")!;\n        if (this.$label.innerHTML === \"\") {\n            this.$label.style.display = \"none\";\n        }\n        this.$input = this.select<HTMLInputElement>(\"input\");\n\n        this._initEvents();\n\n        return this;\n    }\n\n    public set value(val: string) {\n        if (val !== this._value) {\n            this._value = val;\n            this.$input!.value = this._value;\n            this.events.dispatch(this.events.input, this._value, this);\n        }\n    }\n\n    public get value(): string {\n        return this._value;\n    }\n\n    protected _initEvents() {\n        this.$input!.addEventListener(\"input\", this._onInput);\n    }\n\n    protected _clearEvents() {\n        this.$input!.removeEventListener(\"input\", this._onInput);\n    }\n\n    protected _onInput = (e: Event) => {\n        //@ts-ignore\n        this.value = e.target.value;\n    }\n\n    public override remove() {\n        this._clearEvents();\n        super.remove();\n    }\n}\n\nexport {Color}\n","import {Control, IControlParams} from \"./Control\";\nimport {Dialog} from '../ui/Dialog';\nimport {Layer} from \"../layer/Layer\";\nimport {Slider} from \"../ui/Slider\";\nimport {Sun} from \"./Sun\";\nimport {ToggleButton} from \"../ui/ToggleButton\";\nimport {View} from '../ui/View';\nimport {Atmosphere} from \"./Atmosphere\";\nimport {Color} from \"../ui/Color\";\nimport {SimpleSkyBackground} from \"../control/SimpleSkyBackground\";\n\ninterface ILightingParams extends IControlParams {\n\n}\n\nconst SUN_STOP_SVG_ICON = `<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 122.88 70.41\" style=\"enable-background:new 0 0 122.88 70.41\" xml:space=\"preserve\"><g><path d=\"M60.91,19.12c6.95,0,13.24,2.95,17.8,7.72c4.55,4.77,7.37,11.37,7.37,18.64c0,1.94-0.2,3.83-0.58,5.65h31.61 c2.1,0,2.62,1.16,2.62,2.59c0,1.43-0.52,2.59-2.62,2.59H7.09c-2.1,0-2.62-1.16-2.62-2.59c0-1.43,0.52-2.59,2.62-2.59h29.23 c-0.38-1.82-0.58-3.71-0.58-5.65c0-7.28,2.82-13.87,7.37-18.64C47.67,22.08,53.96,19.12,60.91,19.12L60.91,19.12L60.91,19.12z M63.4,70.41c-2.1,0-2.62-1.16-2.62-2.59s0.52-2.59,2.62-2.59h56.86c2.1,0,2.62,1.16,2.62,2.59s-0.52,2.59-2.62,2.59H63.4 L63.4,70.41z M2.62,70.41c-2.1,0-2.62-1.16-2.62-2.59s0.52-2.59,2.62-2.59h29.51c2.1,0,2.62,1.16,2.62,2.59s-0.52,2.59-2.62,2.59 H2.62L2.62,70.41z M38.39,9.46c-0.78-1.35-0.32-3.07,1.03-3.85c1.35-0.78,3.07-0.32,3.85,1.03l3.62,6.27 c0.78,1.35,0.32,3.07-1.03,3.85c-1.35,0.78-3.07,0.32-3.85-1.03L38.39,9.46L38.39,9.46L38.39,9.46z M58.67,2.83 c0-1.56,1.27-2.83,2.83-2.83c1.56,0,2.83,1.27,2.83,2.83v7.24c0,1.56-1.27,2.83-2.83,2.83c-1.56,0-2.83-1.26-2.83-2.83V2.83 L58.67,2.83L58.67,2.83z M79.56,7.23c0.77-1.35,2.49-1.81,3.84-1.04c1.35,0.77,1.81,2.49,1.04,3.84l-3.62,6.27 c-0.77,1.35-2.49,1.81-3.84,1.04c-1.35-0.77-1.81-2.49-1.04-3.84L79.56,7.23L79.56,7.23L79.56,7.23z M95.45,21.48 c1.35-0.78,3.07-0.32,3.85,1.03c0.78,1.35,0.32,3.07-1.03,3.85L92,29.98c-1.35,0.78-3.07,0.32-3.85-1.03 c-0.78-1.35-0.32-3.07,1.03-3.85L95.45,21.48L95.45,21.48L95.45,21.48z M102.08,41.76c1.56,0,2.83,1.27,2.83,2.83 c0,1.56-1.27,2.83-2.83,2.83h-7.24c-1.56,0-2.83-1.26-2.83-2.83s1.26-2.83,2.83-2.83H102.08L102.08,41.76L102.08,41.76z M19.74,46.25c-1.56,0-2.83-1.27-2.83-2.83c0-1.56,1.27-2.83,2.83-2.83h7.24c1.56,0,2.83,1.26,2.83,2.83s-1.27,2.83-2.83,2.83 H19.74L19.74,46.25L19.74,46.25z M24.14,25.35c-1.35-0.77-1.81-2.49-1.04-3.84c0.77-1.35,2.49-1.81,3.84-1.04l6.27,3.62 c1.35,0.77,1.81,2.49,1.04,3.84c-0.77,1.35-2.49,1.81-3.84,1.04L24.14,25.35L24.14,25.35L24.14,25.35z\"/></g></svg>`;\nconst SUN_ACTIVE_SVG_ICON = `<?xml version=\"1.0\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n    <path style=\"text-indent:0;text-align:start;line-height:normal;text-transform:none;block-progression:tb;-inkscape-font-specification:Sans\" d=\"M 16 4 C 9.3844277 4 4 9.3844277 4 16 C 4 22.615572 9.3844277 28 16 28 C 22.615572 28 28 22.615572 28 16 C 28 9.3844277 22.615572 4 16 4 z M 16 6 C 16.389823 6 16.778223 6.0506339 17.15625 6.09375 C 18.631659 7.6568432 21 10.9245 21 16 C 21 21.0755 18.631659 24.343157 17.15625 25.90625 C 16.778223 25.949366 16.389823 26 16 26 C 10.465308 26 6 21.534692 6 16 C 6 10.465308 10.465308 6 16 6 z\" overflow=\"visible\" font-family=\"Sans\"/>\n</svg>\n`;\nconst LIGHTING_ENABLED_SVG_ICON = `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- Generated by IcoMoon.io -->\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\">\n<g>\n</g>\n\\t<path d=\"M257.894 156.948c-53.258 0-96.42 43.561-96.42 97.26 0 53.719 43.161 97.249 96.42 97.249 53.197 0 96.379-43.53 96.379-97.25 0-53.698-43.182-97.26-96.379-97.26zM257.894 309.873c-30.464 0-55.163-24.945-55.163-55.665s24.699-55.624 55.163-55.624c30.423 0 55.101 24.904 55.101 55.624s-24.688 55.665-55.101 55.665z\" fill=\"#000000\" />\n\\t<path d=\"M241.808 43.499h32.144v79.575h-32.144v-79.575z\" fill=\"#000000\" />\n\\t<path d=\"M417.209 115.897l-22.723-22.917-55.757 56.279 22.723 22.907z\" fill=\"#000000\" />\n\\t<path d=\"M389.468 238.407h78.899v32.389h-78.899v-32.389z\" fill=\"#000000\" />\n\\t<path d=\"M396.012 416.86l22.723-22.917-55.767-56.259-22.712 22.897z\" fill=\"#000000\" />\n\\t<path d=\"M242.473 388.915h32.144v79.575h-32.144v-79.575z\" fill=\"#000000\" />\n\\t<path d=\"M96.266 396.073l22.722 22.938 55.778-56.289-22.692-22.928z\" fill=\"#000000\" />\n\\t<path d=\"M43.633 240.537h78.879v32.43h-78.879v-32.43z\" fill=\"#000000\" />\n\\t<path d=\"M115.394 93.051l-22.681 22.907 55.757 56.258 22.702-22.917z\" fill=\"#000000\" />\n</svg>`;\nconst ATMOSPHERE_SVG_ICON = `<?xml version=\"1.0\" encoding=\"utf-8\"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\n<svg width=\"800px\" height=\"800px\" viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#000000\" d=\"M135.688 18.5c-6.798 74.842-23.842 85.39-107.907 59.656 84.85 52.022 73.57 64.954-6.843 96.938 87.743-10.27 103.29 4.89 70.75 87.594 17.805-27.56 32.5-44.498 46.282-54.47-11.813 28.26-18.345 59.274-18.345 91.813 0 84.184 43.71 157.96 109.656 200.376-41.624-43.834-67.686-102.7-67.686-167.875 0-134.923 109.45-244.405 244.375-244.405 30.92 0 60.76 5.762 88 16.25-38.584-26.87-85.517-42.625-136.064-42.625-55.257 0-106.14 18.802-146.562 50.375 4.627-18.783 17.39-38.073 41.03-60.906C190.18 90.942 153.53 95.634 135.69 18.5zm10.03 77.188c5.67.002 11.428 1.247 16.876 3.874 14.506 6.998 22.72 21.81 22 36.938-10.26 10.87-19.507 22.696-27.594 35.344-9.035 2.753-19.075 2.27-28.25-2.156-19.37-9.343-27.5-32.6-18.156-51.97 6.715-13.92 20.638-22.036 35.125-22.03z\"/></svg>`;\n\n\nconst TEMPLATE =\n    `<div class=\"og-lighing og-options-container\">\n\n         <div class=\"og-option\">\n           <div class=\"og-suncontrol\"></div>\n         </div>        \n         \n         <div class=\"og-option og-atmosphere-opacity\">\n         </div>\n         \n         <div class=\"og-option og-simpleskybackground\">\n         </div>\n         \n        <div class=\"og-lighting-emptyline\"></div>\n\n         <div class=\"og-option og-gamma\"></div>         \n         <div class=\"og-option og-exposure\"></div>\n       \n        <div class=\"og-lighting-emptyline\"></div>\n\n         <div class=\"og-option\">\n         <div class=\"og-layers\">\n           <div class=\"og-caption\">Select layer:</div>\n           <select id=\"layers\"></select>\n         </div>\n         </div>\n\n         <div class=\"og-option og-opacity\">\n         </div>\n         \n         <div class=\"og-option og-night\">\n         </div>\n         \n         <div class=\"og-lighting-emptyline\"></div>\n\n         <div class=\"og-option og-diffuse\">\n         </div>\n      \n         <div class=\"og-option og-ambient\">\n         </div>\n\n         <div class=\"og-option og-specular\">\n         </div>        \n\n    </div>`;\n\nconst ICON_BUTTON_SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"256\" height=\"256\" viewBox=\"0 0 256 256\" xml:space=\"preserve\">\n\n<defs>\n</defs>\n<g style=\"stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; opacity: 1;\" transform=\"translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)\" >\n\\t<path d=\"M 45 68 c -12.682 0 -23 -10.317 -23 -23 c 0 -12.682 10.318 -23 23 -23 c 12.683 0 23 10.318 23 23 C 68 57.683 57.683 68 45 68 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\" />\n\\t<path d=\"M 45 17.556 c -1.657 0 -3 -1.343 -3 -3 V 3 c 0 -1.657 1.343 -3 3 -3 c 1.657 0 3 1.343 3 3 v 11.556 C 48 16.212 46.657 17.556 45 17.556 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\" />\n\\t<path d=\"M 45 90 c -1.657 0 -3 -1.343 -3 -3 V 75.444 c 0 -1.657 1.343 -3 3 -3 c 1.657 0 3 1.343 3 3 V 87 C 48 88.657 46.657 90 45 90 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\" />\n\\t<path d=\"M 14.556 48 H 3 c -1.657 0 -3 -1.343 -3 -3 c 0 -1.657 1.343 -3 3 -3 h 11.556 c 1.657 0 3 1.343 3 3 C 17.556 46.657 16.212 48 14.556 48 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\" />\n\\t<path d=\"M 87 48 H 75.444 c -1.657 0 -3 -1.343 -3 -3 c 0 -1.657 1.343 -3 3 -3 H 87 c 1.657 0 3 1.343 3 3 C 90 46.657 88.657 48 87 48 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\" />\n\\t<path d=\"M 66.527 26.473 c -0.768 0 -1.535 -0.293 -2.121 -0.878 c -1.172 -1.172 -1.172 -3.071 0 -4.243 l 8.171 -8.171 c 1.172 -1.172 3.07 -1.171 4.242 0 c 1.172 1.172 1.172 3.071 0 4.243 l -8.171 8.171 C 68.063 26.18 67.295 26.473 66.527 26.473 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\" />\n\\t<path d=\"M 15.302 77.698 c -0.768 0 -1.536 -0.293 -2.121 -0.879 c -1.172 -1.171 -1.172 -3.071 0 -4.242 l 8.171 -8.171 c 1.171 -1.172 3.071 -1.172 4.242 0 c 1.172 1.171 1.172 3.071 0 4.242 l -8.171 8.171 C 16.837 77.405 16.069 77.698 15.302 77.698 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\" />\n\\t<path d=\"M 23.473 26.473 c -0.768 0 -1.536 -0.293 -2.121 -0.878 l -8.171 -8.171 c -1.172 -1.172 -1.172 -3.071 0 -4.243 c 1.172 -1.172 3.072 -1.171 4.243 0 l 8.171 8.171 c 1.172 1.172 1.172 3.071 0 4.243 C 25.008 26.18 24.24 26.473 23.473 26.473 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\" />\n\\t<path d=\"M 74.698 77.698 c -0.768 0 -1.535 -0.293 -2.121 -0.879 l -8.171 -8.171 c -1.172 -1.171 -1.172 -3.071 0 -4.242 c 1.172 -1.172 3.07 -1.172 4.242 0 l 8.171 8.171 c 1.172 1.171 1.172 3.071 0 4.242 C 76.233 77.405 75.466 77.698 74.698 77.698 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\" />\n</g>\n</svg>`;\n\nconst MAX_COLOR = 5;\n\n/**\n * Helps to set up lighting.\n */\nexport class Lighting extends Control {\n    protected _selectedLayer: Layer | null;\n    protected _toggleBtn: ToggleButton;\n    protected _dialog: Dialog<null>;\n    protected _panel: View<null>;\n\n    protected _atmosphereMaxOpacity: Slider;\n    protected _atmosphereMinOpacity: Slider;\n\n    protected _simpleSkyBackgroundColorOne: Color;\n    protected _simpleSkyBackgroundColorTwo: Color;\n\n    protected _gamma: Slider;\n    protected _exposure: Slider;\n    protected _night: Slider;\n    protected _opacity: Slider;\n    protected _diffuse_r: Slider;\n    protected _diffuse_g: Slider;\n    protected _diffuse_b: Slider;\n    protected _ambient_r: Slider;\n    protected _ambient_g: Slider;\n    protected _ambient_b: Slider;\n    protected _specular_r: Slider;\n    protected _specular_g: Slider;\n    protected _specular_b: Slider;\n    protected _shininess: Slider;\n\n    public $gamma: HTMLElement | null;\n    public $exposure: HTMLElement | null;\n    public $night: HTMLElement | null;\n    public $opacity: HTMLElement | null;\n    public $diffuse: HTMLElement | null;\n    public $ambient: HTMLElement | null;\n    public $specular: HTMLElement | null;\n    public $atmosphereOpacity: HTMLElement | null;\n    public $simpleSkyBackground: HTMLElement | null;\n\n\n    constructor(options: ILightingParams = {}) {\n        super(options);\n\n        this._selectedLayer = null;\n\n        this._toggleBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-lighting_button\"],\n            icon: ICON_BUTTON_SVG\n        });\n\n        this._dialog = new Dialog({\n            title: \"Lighting Parameters\",\n            visible: false,\n            useHide: true,\n            top: 60,\n            left: 60,\n            width: 600\n        });\n\n        this._dialog.events.on(\"visibility\", (v: boolean) => {\n            this._toggleBtn.setActive(v);\n        });\n\n        this._panel = new View({\n            template: TEMPLATE\n        });\n\n        this.$gamma = null;\n        this.$exposure = null;\n        this.$night = null;\n        this.$opacity = null;\n        this.$diffuse = null;\n        this.$ambient = null;\n        this.$specular = null;\n        this.$atmosphereOpacity = null;\n        this.$simpleSkyBackground = null;\n\n        this._atmosphereMaxOpacity = new Slider({\n            label: \"Max.opacity\",\n            max: 5\n        });\n\n        this._atmosphereMinOpacity = new Slider({\n            label: \"Min.opacity\",\n            max: 5\n        });\n\n        this._simpleSkyBackgroundColorOne = new Color({\n            label: \"Color One\"\n        });\n\n        this._simpleSkyBackgroundColorTwo = new Color({\n            label: \"Color Two\"\n        });\n\n        this._gamma = new Slider({\n            label: \"Gamma\",\n            max: 5\n        });\n\n        this._exposure = new Slider({\n            label: \"Exposure\",\n            max: 5\n        });\n\n        this._night = new Slider({\n            label: \"Nightlight\",\n            max: 5\n        });\n\n        this._opacity = new Slider({\n            label: \"Opacity\",\n            max: 1\n        });\n\n        //\n        // Diffuse sliders\n        //\n        this._diffuse_r = new Slider({\n            label: \"Diffuse R\",\n            max: MAX_COLOR\n        });\n\n        this._diffuse_g = new Slider({\n            label: \"Diffuse G\",\n            max: MAX_COLOR\n        });\n\n        this._diffuse_b = new Slider({\n            label: \"Diffuse B\",\n            max: MAX_COLOR\n        });\n\n        //\n        // Ambient sliders\n        //\n        this._ambient_r = new Slider({\n            label: \"Ambient R\",\n            max: MAX_COLOR\n        });\n\n        this._ambient_g = new Slider({\n            label: \"Ambient G\",\n            max: MAX_COLOR\n        });\n\n        this._ambient_b = new Slider({\n            label: \"Ambient B\",\n            max: MAX_COLOR\n        });\n\n        //\n        // Specular sliders\n        //\n        this._specular_r = new Slider({\n            label: \"Specular R\",\n            max: 0.2\n        });\n\n        this._specular_g = new Slider({\n            label: \"Specular G\",\n            max: 0.2\n        });\n\n        this._specular_b = new Slider({\n            label: \"Specular B\",\n            max: 0.2\n        });\n\n        this._shininess = new Slider({\n            label: \"Shininess\",\n            max: 100\n        });\n    }\n\n    public bindLayer(layer: Layer) {\n        this._selectedLayer = layer;\n        this._opacity.value = layer.opacity;\n        this._update();\n    }\n\n    public override oninit() {\n\n        this._toggleBtn.appendTo(this.renderer!.div!);\n        this._dialog.appendTo(this.renderer!.div!);\n        this._panel.appendTo(this._dialog.container!);\n\n        if (this._panel.el) {\n            this.$atmosphereOpacity = this._panel.el.querySelector(\".og-atmosphere-opacity\");\n            this.$simpleSkyBackground = this._panel.el.querySelector(\".og-simpleskybackground\");\n            this.$gamma = this._panel.el.querySelector(\".og-option.og-gamma\");\n            this.$exposure = this._panel.el.querySelector(\".og-option.og-exposure\");\n            this.$opacity = this._panel.el.querySelector(\".og-option.og-opacity\");\n            this.$diffuse = this._panel.el.querySelector(\".og-option.og-diffuse\");\n            this.$ambient = this._panel.el.querySelector(\".og-option.og-ambient\");\n            this.$specular = this._panel.el.querySelector(\".og-option.og-specular\");\n            this.$night = this._panel.el.querySelector(\".og-option.og-night\");\n        }\n\n        this._toggleBtn.events.on(\"change\", (isActive: boolean) => {\n            this._dialog.setVisibility(isActive);\n        });\n\n        let $suncontrol = this._dialog.select(\".og-suncontrol\")!;\n\n        let sunStopBtn = new ToggleButton({\n            classList: [\"og-suncontrol-button\"],\n            isActive: true,\n            icon: SUN_STOP_SVG_ICON,\n            title: \"Star/stop the Sun from following the camera\"\n        });\n        sunStopBtn.appendTo($suncontrol);\n\n        let sunActiveBtn = new ToggleButton({\n            classList: [\"og-suncontrol-button\"],\n            isActive: true,\n            icon: SUN_ACTIVE_SVG_ICON,\n            title: \"Activate/deactivate the Sun current time positioning\"\n        });\n        sunActiveBtn.appendTo($suncontrol);\n\n        sunStopBtn.events.on(\"change\", (isActive: boolean) => {\n            const sun = this.planet!.renderer!.controls.sun as Sun;\n            if (isActive) {\n                sun.start();\n            } else {\n                sun.stop();\n            }\n        });\n\n        sunActiveBtn.events.on(\"change\", (isActive: boolean) => {\n            const sun = this.planet!.renderer!.controls.sun;\n            if (isActive) {\n                sun.activate();\n            } else {\n                sun.deactivate();\n            }\n        });\n\n        let lightingEnabledBtn = new ToggleButton({\n            classList: [\"og-suncontrol-button\"],\n            isActive: this.planet!.lightEnabled,\n            icon: LIGHTING_ENABLED_SVG_ICON,\n            title: \"Enable/disable planet lighting\"\n        });\n        lightingEnabledBtn.appendTo($suncontrol);\n\n        lightingEnabledBtn.events.on(\"change\", (isActive: boolean) => {\n            this.planet!.lightEnabled = isActive;\n        });\n\n        let atmosphereEnabledBtn = new ToggleButton({\n            classList: [\"og-suncontrol-button\"],\n            isActive: this.planet!.atmosphereEnabled,\n            icon: ATMOSPHERE_SVG_ICON,\n            title: \"Enable/disable atmosphere scattering\"\n        });\n        atmosphereEnabledBtn.appendTo($suncontrol);\n\n        if (this.planet!.atmosphereEnabled) {\n            this.$atmosphereOpacity!.style.display = \"block\";\n            this.$simpleSkyBackground!.style.display = \"none\";\n        } else {\n            this.$atmosphereOpacity!.style.display = \"none\";\n            this.$simpleSkyBackground!.style.display = \"flex\";\n        }\n\n        atmosphereEnabledBtn.events.on(\"change\", (isActive: boolean) => {\n            this.planet!.atmosphereEnabled = isActive;\n            if (this.planet!.atmosphereEnabled) {\n                this.$atmosphereOpacity!.style.display = \"block\";\n                this.$simpleSkyBackground!.style.display = \"none\";\n            } else {\n                this.$atmosphereOpacity!.style.display = \"none\";\n                this.$simpleSkyBackground!.style.display = \"flex\";\n            }\n        });\n\n        this._atmosphereMaxOpacity.appendTo(this.$atmosphereOpacity!);\n        this._atmosphereMinOpacity.appendTo(this.$atmosphereOpacity!);\n\n        this._simpleSkyBackgroundColorOne.appendTo(this.$simpleSkyBackground!);\n        this._simpleSkyBackgroundColorTwo.appendTo(this.$simpleSkyBackground!);\n\n        this._gamma.appendTo(this.$gamma!);\n        this._exposure.appendTo(this.$exposure!);\n\n        this._night.appendTo(this.$night!);\n        this._opacity.appendTo(this.$opacity!);\n\n        this._diffuse_r.appendTo(this.$diffuse!);\n        this._diffuse_g.appendTo(this.$diffuse!);\n        this._diffuse_b.appendTo(this.$diffuse!);\n\n        this._ambient_r.appendTo(this.$ambient!);\n        this._ambient_g.appendTo(this.$ambient!);\n        this._ambient_b.appendTo(this.$ambient!);\n\n        this._specular_r.appendTo(this.$specular!);\n        this._specular_g.appendTo(this.$specular!);\n        this._specular_b.appendTo(this.$specular!);\n        this._shininess.appendTo(this.$specular!);\n\n        //\n        // Screen options\n        //\n        this._gamma.value = this.planet!.renderer!.gamma;\n        this._gamma.events.on(\"change\", (val: number) => {\n            this.planet!.renderer!.gamma = val;\n        });\n\n        this._exposure.value = this.planet!.renderer!.exposure;\n        this._exposure.events.on(\"change\", (val: number) => {\n            this.planet!.renderer!.exposure = val;\n        });\n\n        //\n        // Atmosphere parameters\n        //\n        this._atmosphereMinOpacity.value = this.planet!.atmosphereMinOpacity;\n        this._atmosphereMinOpacity.events.on(\"change\", (val: number) => {\n            this.planet!.atmosphereMinOpacity = val;\n        });\n\n        this._atmosphereMaxOpacity.value = this.planet!.atmosphereMaxOpacity;\n        this._atmosphereMaxOpacity.events.on(\"change\", (val: number) => {\n            this.planet!.atmosphereMaxOpacity = val;\n            let atmos = this.planet!.renderer!.controls.Atmosphere as Atmosphere;\n            atmos.opacity = val;\n        });\n\n        //\n        // Simple Sky Background parameters\n        //\n        let simpleSkyBackgroundControl = this.planet!.renderer!.controls.SimpleSkyBackground as SimpleSkyBackground;\n        if (simpleSkyBackgroundControl) {\n            this._simpleSkyBackgroundColorOne.value = simpleSkyBackgroundControl.colorOne;\n            this._simpleSkyBackgroundColorTwo.value = simpleSkyBackgroundControl.colorTwo;\n        }\n\n        this._simpleSkyBackgroundColorOne.events.on(\"input\", (val: string) => {\n            let simpleSkyBackgroundControl = this.planet!.renderer!.controls.SimpleSkyBackground as SimpleSkyBackground;\n            if (simpleSkyBackgroundControl) {\n                simpleSkyBackgroundControl.colorOne = val;\n            }\n        });\n\n        this._simpleSkyBackgroundColorTwo.events.on(\"input\", (val: string) => {\n            let simpleSkyBackgroundControl = this.planet!.renderer!.controls.SimpleSkyBackground as SimpleSkyBackground;\n            if (simpleSkyBackgroundControl) {\n                simpleSkyBackgroundControl.colorTwo = val;\n            }\n        });\n\n        //\n        // Planet options\n        //\n        this._panel.el!.querySelector<HTMLSelectElement>(\"#layers\")!.addEventListener(\"change\", (e: Event) => {\n            const l = this.planet!.getLayerByName((e.target as HTMLSelectElement).value);\n            if (l) {\n                this.bindLayer(l);\n            }\n        });\n\n        this._night.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer) {\n                this._selectedLayer.nightTextureCoefficient = val;\n            }\n        });\n\n        this._opacity.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer)\n                this._selectedLayer.opacity = val;\n        });\n\n        this._ambient_r.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._ambient)\n                this._selectedLayer._ambient[0] = val\n        });\n\n        this._ambient_g.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._ambient)\n                this._selectedLayer._ambient[1] = val\n        });\n\n        this._ambient_b.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._ambient)\n                this._selectedLayer._ambient[2] = val\n        });\n\n        this._diffuse_r.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._diffuse)\n                this._selectedLayer._diffuse[0] = val\n        });\n\n        this._diffuse_g.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._diffuse)\n                this._selectedLayer._diffuse[1] = val\n        });\n\n        this._diffuse_b.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._diffuse)\n                this._selectedLayer._diffuse[2] = val\n        });\n\n        this._specular_r.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._specular)\n                this._selectedLayer._specular[0] = val\n        });\n\n        this._specular_g.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._specular)\n                this._selectedLayer._specular[1] = val\n        });\n\n        this._specular_b.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._specular)\n                this._selectedLayer._specular[2] = val\n        });\n\n        this._shininess.events.on(\"change\", (val: number) => {\n            if (this._selectedLayer && this._selectedLayer._specular)\n                this._selectedLayer._specular[3] = val\n        });\n\n\n        if (this.planet) {\n            this.planet!.events.on(\"layeradd\", this._onLayerAdd, this);\n            this.planet!.events.on(\"layerremove\", this._onLayerRemove, this);\n        }\n\n        this._fetchLayers();\n    }\n\n    protected _update() {\n        let l = this._selectedLayer;\n\n        this._opacity.value = l && l.opacity ? l.opacity : 0.0;\n\n        this._night.value = l && l.nightTextureCoefficient ? l.nightTextureCoefficient : this.planet!.nightTextureCoefficient;\n\n        let a = l && l._ambient ? l._ambient : this.planet!._ambient;\n        this._ambient_r.value = a[0];\n        this._ambient_g.value = a[1];\n        this._ambient_b.value = a[2];\n\n        let d = l && l._diffuse ? l._diffuse : this.planet!._diffuse;\n        this._diffuse_r.value = d[0];\n        this._diffuse_g.value = d[1];\n        this._diffuse_b.value = d[2];\n\n        let s = l && l._specular ? l._specular : this.planet!._specular;\n        this._specular_r.value = s[0];\n        this._specular_g.value = s[1];\n        this._specular_b.value = s[2];\n        this._shininess.value = s[3];\n    }\n\n    protected _fetchLayers() {\n        if (this.planet) {\n            for (let i = 0; i < this.planet.layers.length; i++) {\n                this._onLayerAdd(this.planet.layers[i]);\n            }\n        }\n    }\n\n    protected _onLayerAdd(e: Layer) {\n        this.bindLayer(e);\n        let opt = document.createElement(\"option\");\n        opt.value = e.name;\n        opt.innerText = e.name;\n        this._panel.el!.querySelector(\"#layers\")!.appendChild(opt);\n        this._panel.el!.querySelector<HTMLSelectElement>(\"#layers\")!.value = e.name;\n    }\n\n    protected _onLayerRemove(e: Layer) {\n    }\n}\n","class Lock {\n\n    protected _lock: number;\n\n    constructor() {\n        this._lock = 0;\n    }\n\n    public lock(key: Key) {\n        this._lock |= (1 << key.id);\n    }\n\n    public free(key: Key) {\n        this._lock &= ~(1 << key.id);\n    }\n\n    public isFree(): boolean {\n        return this._lock === 0;\n    }\n\n    public isLocked(): boolean {\n        return this._lock !== 0;\n    }\n}\n\nclass Key {\n\n    static __counter__: number = 0;\n\n    protected __id: number;\n\n    constructor() {\n        this.__id = Key.__counter__++;\n    }\n\n    public get id(): number {\n        return this.__id;\n    }\n}\n\nexport {Lock, Key};\n","import * as math from \"../math\";\nimport {Control, IControlParams} from \"./Control\";\nimport {input} from \"../input/input\";\nimport {Key} from \"../Lock\";\nimport {LonLat} from \"../LonLat\";\nimport {Mat4} from \"../math/Mat4\";\nimport {Quat} from \"../math/Quat\";\nimport {Ray} from \"../math/Ray\";\nimport {Sphere} from \"../bv/Sphere\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Vec2} from \"../math/Vec2\";\nimport {Planet} from \"../scene/Planet\";\nimport {PlanetCamera} from \"../camera/PlanetCamera\";\nimport {IMouseState} from \"../renderer/RendererEvents\";\n\nexport interface IStepForward {\n    eye: Vec3;\n    v: Vec3;\n    u: Vec3;\n    n: Vec3;\n}\n\ninterface IMouseNavigationParams extends IControlParams {\n    minSlope?: number;\n}\n\n/**\n * Mouse planet camera dragging control.\n */\nexport class MouseNavigation extends Control {\n    protected grabbedPoint: Vec3;\n    protected _eye0: Vec3;\n    protected pointOnEarth: Vec3;\n    protected earthUp: Vec3;\n    public inertia: number;\n    protected grabbedSpheroid: Sphere;\n    protected qRot: Quat;\n    protected scaleRot: number;\n    protected distDiff: number;\n    protected stepsCount: number;\n    protected stepsForward: IStepForward[] | null;\n    protected stepIndex: number;\n    protected _lmbDoubleClickActive: boolean;\n    public minSlope: number;\n    protected _wheelDirection: number;\n    protected _keyLock: Key;\n    protected _deactivate = false;\n    protected _shiftBusy = false;\n\n    constructor(options: IMouseNavigationParams = {}) {\n        super(options);\n\n        this._name = \"mouseNavigation\";\n\n        this.grabbedPoint = new Vec3();\n        this._eye0 = new Vec3();\n        this.pointOnEarth = new Vec3();\n        this.earthUp = new Vec3();\n        this.inertia = 0.007;\n        this.grabbedSpheroid = new Sphere();\n        this.qRot = new Quat();\n        this.scaleRot = 0.0;\n\n        this.distDiff = 0.3;\n        this.stepsCount = 8;\n        this.stepsForward = null;\n        this.stepIndex = 0;\n\n        this._lmbDoubleClickActive = true;\n\n        this.minSlope = options.minSlope || 0.1;\n\n        this._wheelDirection = +1;\n\n        this._keyLock = new Key();\n    }\n\n    static getMovePointsFromPixelTerrain(cam: PlanetCamera, planet: Planet, stepsCount: number, delta: number, point: Vec2, forward: boolean, dir?: Vec3 | null): IStepForward[] | undefined {\n        const steps: IStepForward[] = [];\n\n        let eye = cam.eye.clone(),\n            n = cam._b.clone(),\n            u = cam._r.clone(),\n            v = cam._u.clone();\n\n        let a = planet.getCartesianFromPixelTerrain(point);\n\n        if (!a) {\n            a = planet.getCartesianFromPixelTerrain(planet.renderer!.handler.getCenter());\n        }\n\n        if (a) {\n            if (!dir) {\n                dir = Vec3.sub(a, cam.eye).normalize();\n            }\n\n            let d = (delta * cam.eye.distance(a)) / stepsCount;\n\n            if (forward) {\n                d = -1.25 * d;\n            } else {\n                d *= 2;\n            }\n\n            const scaled_n = n.scaleTo(d);\n\n            const slope = dir.dot(cam.eye.normal().negate());\n\n            if (slope >= 0.1) {\n                const grabbedSpheroid = new Sphere();\n                grabbedSpheroid.radius = a.length();\n\n                let rotArr = [],\n                    eyeArr = [];\n\n                let breaked = false;\n                for (let i = 0; i < stepsCount; i++) {\n                    eye.addA(scaled_n);\n                    const b = new Ray(eye, dir).hitSphere(grabbedSpheroid);\n                    eyeArr[i] = eye.clone();\n                    if (b) {\n                        rotArr[i] = new Mat4().rotateBetweenVectors(a.normal(), b.normal());\n                    } else {\n                        breaked = true;\n                        break;\n                    }\n                }\n\n                if (!breaked) {\n                    for (let i = 0; i < stepsCount; i++) {\n                        let rot = rotArr[i];\n                        steps[i] = {\n                            eye: rot.mulVec3(eyeArr[i]),\n                            v: rot.mulVec3(v),\n                            u: rot.mulVec3(u),\n                            n: rot.mulVec3(n)\n                        };\n                    }\n                } else {\n                    eye = cam.eye.clone();\n                    for (let i = 0; i < stepsCount; i++) {\n                        steps[i] = {\n                            eye: eye.addA(scaled_n).clone(),\n                            v: v,\n                            u: u,\n                            n: n,\n                        };\n                    }\n                }\n            } else {\n                for (let i = 0; i < stepsCount; i++) {\n                    steps[i] = {\n                        eye: eye.addA(dir.scaleTo(-d)).clone(),\n                        v: v,\n                        u: u,\n                        n: n,\n                    };\n                }\n            }\n\n            return steps;\n        }\n    }\n\n    public override onactivate() {\n        if (this.renderer) {\n            this.renderer.events.on(\"mousewheel\", this.onMouseWheel, this);\n            this.renderer.events.on(\"lhold\", this.onMouseLeftButtonDown, this);\n            this.renderer.events.on(\"rhold\", this.onMouseRightButtonDown, this);\n            this.renderer.events.on(\"ldown\", this.onMouseLeftButtonClick, this);\n            this.renderer.events.on(\"lup\", this.onMouseLeftButtonUp, this);\n            this.renderer.events.on(\"rdown\", this.onMouseRightButtonClick, this);\n            this.renderer.events.on(\"draw\", this.onDraw, this, -1000);\n            this.renderer.events.on(\"mousemove\", this.onMouseMove, this);\n            this.renderer.events.on(\"mouseleave\", this.onMouseLeave, this);\n            this.renderer.events.on(\"mouseenter\", this.onMouseEnter, this);\n\n            if (this._lmbDoubleClickActive) {\n                this.renderer.events.on(\"ldblclick\", this.onMouseLeftButtonDoubleClick, this);\n            }\n        }\n    }\n\n    public override ondeactivate() {\n        if (this.renderer) {\n            this.renderer.events.off(\"mousewheel\", this.onMouseWheel);\n            this.renderer.events.off(\"lhold\", this.onMouseLeftButtonDown);\n            this.renderer.events.off(\"rhold\", this.onMouseRightButtonDown);\n            this.renderer.events.off(\"ldown\", this.onMouseLeftButtonClick);\n            this.renderer.events.off(\"lup\", this.onMouseLeftButtonUp);\n            this.renderer.events.off(\"rdown\", this.onMouseRightButtonClick);\n            this.renderer.events.off(\"draw\", this.onDraw);\n            this.renderer.events.off(\"ldblclick\", this.onMouseLeftButtonDoubleClick);\n            this.renderer.events.off(\"mouseleave\", this.onMouseLeave);\n            this.renderer.events.off(\"mouseenter\", this.onMouseEnter);\n        }\n    }\n\n    public activateDoubleClickZoom() {\n        if (!this._lmbDoubleClickActive) {\n            this._lmbDoubleClickActive = true;\n            this.renderer && this.renderer.events.on(\"ldblclick\", this.onMouseLeftButtonDoubleClick, this);\n        }\n    }\n\n    public deactivateDoubleClickZoom() {\n        if (this._lmbDoubleClickActive) {\n            this._lmbDoubleClickActive = false;\n            this.renderer && this.renderer.events.off(\"ldblclick\", this.onMouseLeftButtonDoubleClick);\n        }\n    }\n\n    protected onMouseEnter(e: IMouseState) {\n        const renderEvents = this.renderer!.events;\n        if (renderEvents.isKeyPressed(input.KEY_ALT)) {\n            renderEvents.releaseKeys();\n        }\n\n        renderEvents.updateButtonsStates(e.sys!.buttons);\n        if (renderEvents.mouseState.leftButtonDown) {\n            this.renderer!.handler.canvas!.classList.add(\"ogGrabbingPoiner\");\n        } else {\n            this.renderer!.handler.canvas!.classList.remove(\"ogGrabbingPoiner\");\n        }\n    }\n\n    protected onMouseLeave() {\n        if (this.renderer!.events.mouseState.leftButtonDown) {\n            this.scaleRot = 0;\n        }\n        this.renderer!.handler.canvas!.classList.remove(\"ogGrabbingPoiner\");\n    }\n\n    protected onMouseWheel(e: IMouseState) {\n        if (this.stepIndex) {\n            return;\n        }\n\n        this.planet!.stopFlying();\n\n        this.stopRotation();\n\n        this._deactivate = true;\n\n        this.lockPlanet(true);\n\n        this.stepsForward = MouseNavigation.getMovePointsFromPixelTerrain(\n            this.planet!.camera,\n            this.planet!,\n            this.stepsCount,\n            this.distDiff,\n            e.pos,\n            e.wheelDelta > 0,\n            e.direction\n        ) || null;\n\n        this._wheelDirection = e.wheelDelta;\n\n        if (this.stepsForward) {\n            this.stepIndex = this.stepsCount;\n        }\n    }\n\n    public override oninit() {\n        this.activate();\n        if (this.renderer) {\n            this.renderer.events.on(\"keyfree\", input.KEY_ALT, this.onShiftFree, this);\n            this.renderer.events.on(\"keyfree\", input.KEY_PRINTSCREEN, this.onShiftFree, this);\n        }\n    }\n\n    protected onMouseLeftButtonDoubleClick(e: IMouseState) {\n        this.planet!.stopFlying();\n        this.stopRotation();\n        const p = this.planet!.getCartesianFromPixelTerrain(e.pos);\n        if (p) {\n            const cam = this.planet!.camera;\n            let maxAlt = cam.maxAltitude + this.planet!.ellipsoid.polarSize;\n            let minAlt = cam.minAltitude + this.planet!.ellipsoid.polarSize;\n            const camAlt = cam.eye.length();\n            const g = this.planet!.ellipsoid.cartesianToLonLat(p);\n            if (camAlt > maxAlt || camAlt < minAlt) {\n                this.planet!.flyLonLat(new LonLat(g.lon, g.lat))\n                return;\n            }\n\n            if (this.renderer!.events.isKeyPressed(input.KEY_ALT)) {\n                this.planet!.flyLonLat(\n                    new LonLat(g.lon, g.lat, cam.eye.distance(p) * 2.0)\n                );\n            } else {\n                this.planet!.flyLonLat(\n                    new LonLat(g.lon, g.lat, cam.eye.distance(p) * 0.57)\n                );\n            }\n        }\n    }\n\n    protected onMouseLeftButtonClick() {\n        if (this._active) {\n            this.renderer!.handler.canvas!.classList.add(\"ogGrabbingPoiner\");\n            this.grabbedPoint = this.planet!.getCartesianFromMouseTerrain()!;\n            if (this.grabbedPoint) {\n                this._eye0.copy(this.planet!.camera.eye);\n                this.grabbedSpheroid.radius = this.grabbedPoint.length();\n                this.stopRotation();\n            }\n        }\n    }\n\n    public stopRotation() {\n        this.qRot.clear();\n        this.freePlanet();\n    }\n\n    protected onMouseLeftButtonUp(e: IMouseState) {\n        this.renderer!.handler.canvas!.classList.remove(\"ogGrabbingPoiner\");\n        if (e.x === e.prev_x && e.y === e.prev_y) {\n            this.scaleRot = 0.0;\n        }\n    }\n\n    protected onMouseLeftButtonDown(e: IMouseState) {\n        if (this._active) {\n            if (!this.grabbedPoint) {\n                return;\n            }\n\n            this.planet!.stopFlying();\n\n            if (e.moving) {\n                let cam = this.planet!.camera;\n\n                if (cam.slope > 0.2) {\n                    const targetPoint = new Ray(cam.eye, e.direction).hitSphere(this.grabbedSpheroid);\n                    if (targetPoint) {\n                        this.scaleRot = 1.0;\n                        this.qRot = Quat.getRotationBetweenVectors(\n                            targetPoint.normal(),\n                            this.grabbedPoint.normal()\n                        );\n                        let rot = this.qRot;\n                        cam.eye = rot.mulVec3(cam.eye);\n                        cam._u = rot.mulVec3(cam._u);\n                        cam._r = rot.mulVec3(cam._r);\n                        cam._b = rot.mulVec3(cam._b);\n                    }\n                } else {\n                    let p0 = this.grabbedPoint,\n                        p1 = Vec3.add(p0, cam._r),\n                        p2 = Vec3.add(p0, p0.normal());\n\n                    let px = new Vec3();\n                    if (new Ray(cam.eye, e.direction).hitPlane(p0, p1, p2, px) === Ray.INSIDE) {\n                        cam.eye = this._eye0.addA(px.subA(p0).negate());\n                    }\n                }\n            }\n        }\n    }\n\n    protected onMouseRightButtonClick(e: IMouseState) {\n        this.stopRotation();\n        this.planet!.stopFlying();\n        this.pointOnEarth = this.planet!.getCartesianFromPixelTerrain(e.pos)!;\n        if (this.pointOnEarth) {\n            this.earthUp = this.pointOnEarth.normal();\n        }\n    }\n\n    protected onMouseRightButtonDown(e: IMouseState) {\n        const cam = this.planet!.camera;\n\n        if (this.pointOnEarth && e.moving) {\n            this.renderer!.controlsBag.scaleRot = 1.0;\n            let l = (0.5 / cam.eye.distance(this.pointOnEarth)) * cam._lonLat.height * math.RADIANS;\n            if (l > 0.007) {\n                l = 0.007;\n            } else if (l < 0.003) {\n                l = 0.003;\n            }\n            cam.rotateHorizontal(l * (e.x - e.prev_x), false, this.pointOnEarth, this.earthUp);\n            cam.rotateVertical(l * (e.y - e.prev_y), this.pointOnEarth, this.minSlope);\n        }\n    }\n\n    public onShiftFree() {\n        this._shiftBusy = false;\n    }\n\n    protected onMouseMove(e: IMouseState) {\n        if (this._active && this.renderer!.events.isKeyPressed(input.KEY_ALT)) {\n            if (!this._shiftBusy) {\n                this._shiftBusy = true;\n                this.onMouseRightButtonClick(e);\n            }\n\n            this.onMouseRightButtonDown(e);\n        }\n    }\n\n    protected onDraw() {\n        if (this._active) {\n            const r = this.renderer!;\n            const cam = this.planet!.camera;\n            let prevEye = cam.eye.clone();\n\n            if (this.stepIndex) {\n                r.controlsBag.scaleRot = 1.0;\n                const sf = this.stepsForward![this.stepsCount - this.stepIndex--];\n                cam.eye = sf.eye;\n                cam._u = sf.v;\n                cam._r = sf.u;\n                cam._b = sf.n;\n            } else {\n                if (this._deactivate) {\n                    this._deactivate = false;\n                    this.freePlanet();\n                }\n            }\n\n            if (r.events.mouseState.leftButtonDown || !this.scaleRot) {\n                return;\n            }\n\n            this.scaleRot -= this.inertia;\n            if (this.scaleRot <= 0.0) {\n                this.scaleRot = 0.0;\n            } else {\n                r.controlsBag.scaleRot = this.scaleRot;\n                let rot = this.qRot\n                    .slerp(Quat.IDENTITY, 1.0 - this.scaleRot * this.scaleRot * this.scaleRot)\n                    .normalize();\n                if (!(rot.x || rot.y || rot.z)) {\n                    this.scaleRot = 0.0;\n                }\n                cam.eye = rot.mulVec3(cam.eye);\n                cam._u = rot.mulVec3(cam._u);\n                cam._r = rot.mulVec3(cam._r);\n                cam._b = rot.mulVec3(cam._b);\n            }\n\n            if (cam.eye.distance(prevEye) / cam.getAltitude() > 0.01) {\n                this.lockPlanet();\n            } else {\n                this.freePlanet();\n            }\n        }\n    }\n\n    public lockPlanet(skipTerrain?: boolean) {\n        this.planet!.layerLock.lock(this._keyLock);\n        !skipTerrain && this.planet!.terrainLock.lock(this._keyLock);\n        this.planet!._normalMapCreator.lock(this._keyLock);\n    }\n\n    public freePlanet() {\n        this.planet!.layerLock.free(this._keyLock);\n        this.planet!.terrainLock.free(this._keyLock);\n        this.planet!._normalMapCreator.free(this._keyLock);\n    }\n}\n","import {Sphere} from \"../bv/Sphere\";\nimport {Key} from \"../Lock\";\nimport {Quat} from \"../math/Quat\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Control, IControlParams} from \"./Control\";\nimport {IStepForward, MouseNavigation} from \"./MouseNavigation\";\n\ninterface IMouseWheelZoomControl extends IControlParams {\n    minSlope?: number;\n}\n\nexport class MouseWheelZoomControl extends Control {\n    protected grabbedPoint: Vec3;\n    protected _eye0: Vec3;\n    protected pointOnEarth: Vec3;\n    protected earthUp: Vec3;\n    public inertia: number;\n    protected grabbedSpheroid: Sphere;\n    protected qRot: Quat;\n    protected scaleRot: number;\n    protected distDiff: number;\n    protected stepsCount: number;\n    protected stepsForward: IStepForward[] | null;\n    protected stepIndex: number;\n    protected _lmbDoubleClickActive: boolean;\n    protected minSlope: number;\n    protected _keyLock: Key;\n    protected _deactivate: boolean;\n    protected _move: number;\n\n    constructor(options: IMouseWheelZoomControl = {}) {\n        super(options);\n\n        this._name = \"MouseWheelZoomControl\";\n\n        this.grabbedPoint = new Vec3();\n        this._eye0 = new Vec3();\n        this.pointOnEarth = new Vec3();\n        this.earthUp = new Vec3();\n        this.inertia = 0.007;\n        this.grabbedSpheroid = new Sphere();\n        this.planet = null;\n        this.qRot = new Quat();\n        this.scaleRot = 0.0;\n\n        this.distDiff = 0.3;\n        this.stepsCount = 8;\n        this.stepsForward = null;\n        this.stepIndex = 0;\n\n        this._lmbDoubleClickActive = true;\n\n        this.minSlope = options.minSlope || 0.1;\n\n        this._keyLock = new Key();\n\n        this._deactivate = false;\n\n        this._move = 0;\n    }\n\n    public override oninit() {\n        let zoomDiv = document.createElement(\"div\"),\n            btnZoomIn = document.createElement(\"button\"),\n            btnZoomOut = document.createElement(\"button\");\n\n        zoomDiv.className = \"ogZoomControl\";\n        btnZoomIn.className = \"ogZoomButton ogZoomIn\";\n        btnZoomOut.className = \"ogZoomButton ogZoomOut\";\n\n        zoomDiv.appendChild(btnZoomIn);\n        zoomDiv.appendChild(btnZoomOut);\n\n        this.renderer!.div!.appendChild(zoomDiv);\n\n        btnZoomIn.addEventListener(\"mousedown\", () => this.zoomIn());\n        btnZoomIn.addEventListener(\"mouseup\", () => this.stopZoom());\n\n        btnZoomOut.addEventListener(\"mousedown\", () => this.zoomOut());\n        btnZoomOut.addEventListener(\"mouseup\", () => this.stopZoom());\n\n        btnZoomIn.addEventListener(\"touchstart\", (e: TouchEvent) => {\n            e.preventDefault();\n            this.zoomIn();\n        });\n        btnZoomIn.addEventListener(\"touchend\", (e: TouchEvent) => {\n            e.preventDefault();\n            this.stopZoom();\n        });\n        btnZoomIn.addEventListener(\"touchcancel\", (e: TouchEvent) => {\n            e.preventDefault();\n            this.stopZoom();\n        });\n\n        btnZoomOut.addEventListener(\"touchstart\", (e: TouchEvent) => {\n            e.preventDefault();\n            this.zoomOut();\n        });\n        btnZoomOut.addEventListener(\"touchend\", (e: TouchEvent) => {\n            e.preventDefault();\n            this.stopZoom();\n        });\n        btnZoomOut.addEventListener(\"touchcancel\", (e: TouchEvent) => {\n            e.preventDefault();\n            this.stopZoom();\n        });\n\n        this.renderer!.events.on(\"draw\", this._draw, this);\n    }\n\n    /**\n     * Planet zoom in.\n     * @public\n     */\n    public zoomIn() {\n        if (this.stepIndex) {\n            return;\n        }\n\n        this.planet!.stopFlying();\n\n        this.stopRotation();\n\n        this._deactivate = true;\n\n        this.planet!.layerLock.lock(this._keyLock);\n        this.planet!.terrainLock.lock(this._keyLock);\n        this.planet!._normalMapCreator.lock(this._keyLock);\n\n        this.stepsForward = MouseNavigation.getMovePointsFromPixelTerrain(\n            this.planet!.camera,\n            this.planet!,\n            this.stepsCount,\n            this.distDiff,\n            this.renderer!.handler.getCenter(),\n            true,\n            null\n        ) || null;\n\n        if (this.stepsForward) {\n            this.stepIndex = this.stepsCount;\n        }\n    }\n\n    /**\n     * Planet zoom out.\n     * @public\n     */\n    public zoomOut() {\n        if (this.stepIndex) {\n            return;\n        }\n\n        this.planet!.stopFlying();\n\n        this.stopRotation();\n\n        this._deactivate = true;\n\n        this.planet!.layerLock.lock(this._keyLock);\n        this.planet!.terrainLock.lock(this._keyLock);\n        this.planet!._normalMapCreator.lock(this._keyLock);\n\n        this.stepsForward = MouseNavigation.getMovePointsFromPixelTerrain(\n            this.planet!.camera,\n            this.planet!,\n            this.stepsCount,\n            this.distDiff,\n            this.renderer!.handler.getCenter(),\n            false,\n            null\n        ) || null;\n\n        if (this.stepsForward) {\n            this.stepIndex = this.stepsCount;\n        }\n    }\n\n    public stopRotation() {\n        this.qRot.clear();\n        this.planet!.layerLock.free(this._keyLock);\n        this.planet!.terrainLock.free(this._keyLock);\n        this.planet!._normalMapCreator.free(this._keyLock);\n    }\n\n    public stopZoom() {\n        this._move = 0;\n\n        this.planet!.layerLock.free(this._keyLock);\n        this.planet!.terrainLock.free(this._keyLock);\n        this.planet!._normalMapCreator.free(this._keyLock);\n    }\n\n    protected _draw() {\n        if (this._active) {\n            let r = this.renderer!;\n            let cam = this.planet!.camera;\n            let prevEye = cam.eye.clone();\n\n            if (this.stepIndex) {\n                r.controlsBag.scaleRot = 1.0;\n                let sf = this.stepsForward![this.stepsCount - this.stepIndex--];\n\n                let maxAlt = cam.maxAltitude + this.planet!.ellipsoid.equatorialSize;\n                let minAlt = cam.minAltitude + this.planet!.ellipsoid.equatorialSize;\n                const camAlt = sf.eye.length();\n                if (camAlt > maxAlt || camAlt < minAlt) {\n                    return;\n                }\n\n                cam.eye = sf.eye;\n                cam._u = sf.v;\n                cam._r = sf.u;\n                cam._b = sf.n;\n\n                cam.checkTerrainCollision();\n\n                cam.update();\n            } else {\n                if (this._deactivate) {\n                    this._deactivate = false;\n\n                    this.planet!.layerLock.free(this._keyLock);\n                    this.planet!.terrainLock.free(this._keyLock);\n                    this.planet!._normalMapCreator.free(this._keyLock);\n                }\n            }\n\n            if (r.events.mouseState.leftButtonDown || !this.scaleRot) {\n                return;\n            }\n\n            this.scaleRot -= this.inertia;\n            if (this.scaleRot <= 0.0) {\n                this.scaleRot = 0.0;\n            } else {\n\n                r.controlsBag.scaleRot = this.scaleRot;\n\n                let rot = this.qRot\n                    .slerp(Quat.IDENTITY, 1.0 - this.scaleRot * this.scaleRot * this.scaleRot)\n                    .normalize();\n\n                if (!(rot.x || rot.y || rot.z)) {\n                    this.scaleRot = 0.0;\n                }\n\n                cam.eye = rot.mulVec3(cam.eye);\n                cam._u = rot.mulVec3(cam._u);\n                cam._r = rot.mulVec3(cam._r);\n                cam._b = rot.mulVec3(cam._b);\n\n                cam.checkTerrainCollision();\n\n                cam.update();\n            }\n\n            if (cam.eye.distance(prevEye) / cam.getAltitude() > 0.01) {\n                this.planet!.layerLock.lock(this._keyLock);\n                this.planet!.terrainLock.lock(this._keyLock);\n                this.planet!._normalMapCreator.lock(this._keyLock);\n            } else {\n                this.planet!.layerLock.free(this._keyLock);\n                this.planet!.terrainLock.free(this._keyLock);\n                this.planet!._normalMapCreator.free(this._keyLock);\n            }\n        }\n    }\n}","import {Entity} from '../../entity/Entity';\nimport {createEvents, EventsHandler} from '../../Events';\nimport {LonLat} from \"../../LonLat\";\nimport {Object3d} from '../../Object3d';\nimport {Planet} from \"../../scene/Planet\";\nimport {RenderNode} from '../../scene/RenderNode';\nimport {Vector} from '../../layer/Vector';\nimport {Vec2} from '../../math/Vec2';\nimport {Vec3} from '../../math/Vec3';\nimport {IMouseState} from \"../../renderer/RendererEvents\";\nimport {Ellipsoid} from \"../../ellipsoid/Ellipsoid\";\nimport {ILabelParams} from \"../../entity/Label\";\n\nconst OUTLINE_COUNT = 120;\n\nexport interface IRulerSceneParams {\n    name?: string;\n    ignoreTerrain?: boolean;\n    planet?: Planet;\n}\n\nexport const distanceFormat = (v: number): string => {\n    if (v > 1000) {\n        return `${(v / 1000).toFixed(1)} km`;\n    } else if (v > 9) {\n        return `${Math.round(v)} m`;\n    } else {\n        return `${v.toFixed(1)} m`;\n    }\n}\n\nlet obj3d = Object3d.createCylinder(1.1, 0, 2.7, 20, 1, true, false, 0, 0, 0);\n\nconst LABEL_OPTIONS: ILabelParams = {\n    text: \"\",\n    size: 11,\n    color: \"rgba(455,455,455,1.0)\",\n    outlineColor: \"rgba(0,0,0,0.34)\",\n    outline: 0.23,\n    align: \"center\",\n    offset: [0, 20, 0]\n};\nconst RULER_CORNER_OPTIONS = {\n    scale: 1,\n    instanced: true,\n    tag: \"ruler\",\n    color: \"rgb(0,305,0)\",\n    object3d: obj3d\n};\n\ntype RulerSceneEventsList = [\n    \"add\",\n    \"remove\",\n    \"mousemove\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"lclick\",\n    \"rclick\",\n    \"mclick\",\n    \"ldblclick\",\n    \"rdblclick\",\n    \"mdblclick\",\n    \"lup\",\n    \"rup\",\n    \"mup\",\n    \"ldown\",\n    \"rdown\",\n    \"mdown\",\n    \"lhold\",\n    \"rhold\",\n    \"mhold\",\n    \"mousewheel\",\n    \"touchmove\",\n    \"touchstart\",\n    \"touchend\",\n    \"doubletouch\",\n    \"touchleave\",\n    \"touchenter\"\n];\n\nclass RulerScene extends RenderNode {\n    public events: EventsHandler<RulerSceneEventsList>;\n    protected _ignoreTerrain: boolean;\n    protected _planet: Planet | null;\n    protected _startLonLat: LonLat | null;\n    protected _preventClick: boolean;\n    protected _stopDrawing: boolean;\n    protected _pickedCorner: Entity | null;\n    protected _startPos: Vec2 | null;\n    protected _startClick: Vec2;\n    protected _heading: number;\n    protected _trackLayer: Vector;\n    protected _labelLayer: Vector;\n    protected _cornersLayer: Vector;\n    protected _cornerEntity: Entity[];\n    protected _propsLabel: Entity;\n    protected _trackEntity: Entity;\n    protected _anchorLonLat: LonLat | null;\n    protected _timeout: any;\n\n    constructor(options: IRulerSceneParams = {}) {\n        super(options.name);\n\n        this.events = createEvents(RULERSCENE_EVENTS);\n\n        this._ignoreTerrain = options.ignoreTerrain != undefined ? options.ignoreTerrain : true;\n\n        this._planet = options.planet || null;\n\n        this._startLonLat = null;\n        this._preventClick = false;\n        this._stopDrawing = false;\n\n        this._pickedCorner = null;\n        this._startPos = null;\n        this._startClick = new Vec2();\n\n        this._anchorLonLat = null;\n\n        this._heading = 0;\n\n        this._trackLayer = new Vector(\"track\", {\n            entities: [],\n            pickingEnabled: false,\n            polygonOffsetUnits: -1.0,\n            relativeToGround: true,\n            hideInLayerSwitcher: true\n        });\n\n        this._labelLayer = new Vector(\"ruler-label\", {\n            entities: [],\n            pickingEnabled: false,\n            polygonOffsetUnits: -100.0,\n            relativeToGround: true,\n            hideInLayerSwitcher: true\n        });\n\n        this._cornersLayer = new Vector(\"corners\", {\n            entities: [],\n            pickingEnabled: true,\n            hideInLayerSwitcher: true,\n            scaleByDistance: [100, 4000000, 1.0],\n            pickingScale: 2\n        });\n\n        this._propsLabel = new Entity({\n            name: 'propsLabel',\n            label: LABEL_OPTIONS\n        });\n\n        this._trackEntity = new Entity({\n            polyline: {\n                path3v: [],\n                thickness: 4.8,\n                color: \"rgb(255,131,0)\",\n                isClosed: false\n            }\n        });\n\n        this._trackEntity.polyline!.altitude = 0.01;\n\n        this._cornerEntity = [\n            new Entity({\n                geoObject: RULER_CORNER_OPTIONS,\n                properties: {\n                    name: \"start\"\n                }\n            }),\n            new Entity({\n                geoObject: RULER_CORNER_OPTIONS,\n                properties: {\n                    name: \"end\"\n                }\n            })\n        ];\n    }\n\n    public set ignoreTerrain(v: boolean) {\n        this._ignoreTerrain = v;\n        if (v) {\n            //...redraw line\n        }\n    }\n\n    public bindPlanet(planet: Planet) {\n        this._planet = planet;\n    }\n\n    protected _createCorners() {\n        this._cornersLayer.addEntities(this._cornerEntity)\n    }\n\n    public override init() {\n        this._createCorners();\n        this._trackLayer.addEntities([this._trackEntity]);\n        this._labelLayer.addEntities([this._propsLabel]);\n        this._planet!.addLayer(this._labelLayer);\n        this._planet!.addLayer(this._trackLayer);\n        this._planet!.addLayer(this._cornersLayer);\n        this._activate();\n    }\n\n    public override onremove() {\n        this._deactivate();\n    }\n\n    public _activate() {\n\n        this._propsLabel.label!.setVisibility(false);\n        this.setVisibility(false);\n\n        this.renderer!.events.on(\"lclick\", this._onLclick, this);\n        this.renderer!.events.on(\"mousemove\", this._onMouseMove, this);\n        this.renderer!.events.on(\"ldblclick\", this._onLdblclick, this);\n        this.renderer!.events.on(\"lup\", this._onLUp, this);\n\n        this._cornersLayer.events.on(\"mouseenter\", this._onCornerEnter, this);\n        this._cornersLayer.events.on(\"mouseleave\", this._onCornerLeave, this);\n        this._cornersLayer.events.on(\"ldown\", this._onCornerLdown, this);\n        this._cornersLayer.events.on(\"lup\", this._onCornerLup, this);\n\n    }\n\n    protected _deactivate() {\n        this._startLonLat = null;\n        this._preventClick = false;\n        this._stopDrawing = false;\n        this._pickedCorner = null;\n        // this._trackLayer.remove();\n        // this._cornersLayer.remove();\n\n        this.renderer!.events.off(\"lclick\", this._onLclick);\n        this.renderer!.events.off(\"mousemove\", this._onMouseMove);\n        this.renderer!.events.off(\"lup\", this._onLUp);\n\n        this._cornersLayer.events.off(\"mouseenter\", this._onCornerEnter);\n        this._cornersLayer.events.off(\"mouseleave\", this._onCornerLeave);\n        this._cornersLayer.events.off(\"ldown\", this._onCornerLdown);\n        this._cornersLayer.events.off(\"lup\", this._onCornerLup);\n\n        this.clear();\n    }\n\n    protected _onCornerLdown = (e: IMouseState) => {\n        if (!this._startLonLat) {\n            this.renderer?.controls.mouseNavigation?.deactivate();\n            this._startClick.set(e.x, e.y);\n            let coords = e.pickingObject.getCartesian();\n            this._startPos = this._planet!.getPixelFromCartesian(coords);\n            this._pickedCorner = e.pickingObject;\n            if (e.pickingObject.properties.name == \"start\") {\n                this._anchorLonLat = this._cornerEntity[1].getLonLat().clone();\n            } else {\n                this._anchorLonLat = this._cornerEntity[0].getLonLat().clone();\n            }\n        }\n    }\n\n    protected _onLUp = () => {\n        if (this._pickedCorner) {\n            this.renderer!.controls.mouseNavigation?.activate();\n            this._pickedCorner = null;\n            this._anchorLonLat = null;\n        }\n    }\n\n    protected _onCornerLup = () => {\n        this._onLUp();\n    }\n\n    protected _onCornerEnter = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"pointer\";\n    }\n\n    protected _onCornerLeave = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"default\";\n    }\n\n    protected _onLdblclick = () => {\n        this._preventClick = true;\n    }\n\n    public setVisibility(visibility: boolean) {\n        this._cornersLayer.setVisibility(visibility);\n        this._trackLayer.setVisibility(visibility);\n        this._labelLayer.setVisibility(visibility);\n    }\n\n    protected _onLclick = (e: IMouseState) => {\n        let startLonLat = this._planet!.getLonLatFromPixelTerrain(e.pos);\n        if (!startLonLat) return;\n        this._timeout = setTimeout(() => {\n            if (!this._preventClick) {\n                if (!this._startLonLat) {\n                    this.setVisibility(true);\n                    this._stopDrawing = false;\n                    this._startLonLat = startLonLat!;\n                } else {\n                    this._startLonLat = null;\n                }\n            }\n            this._preventClick = false;\n            this._stopDrawing = false;\n            clearTimeout(this._timeout);\n        }, 200);\n\n        if (this._startLonLat) {\n            this._stopDrawing = true;\n        }\n    }\n\n    protected _drawLine(startLonLat: LonLat, endLonLat: LonLat, startPos?: Vec3) {\n\n        if (!startPos) {\n            startPos = this._planet!.ellipsoid.lonLatToCartesian(startLonLat);\n        }\n\n        let endPos = this._planet!.ellipsoid.lonLatToCartesian(endLonLat);\n\n        let res = this._planet!.ellipsoid.inverse(startLonLat, endLonLat);\n        let length = res.distance;\n        this._heading = res.initialAzimuth;\n\n        let path = [];\n        let dir = endPos.sub(startPos);\n        let dist = dir.length();\n        dir.normalize();\n\n        for (let i = 0; i < OUTLINE_COUNT; i++) {\n            let f = dir.scaleTo(i * dist / OUTLINE_COUNT).addA(startPos);\n            path.push(f);\n        }\n        path.push(endPos);\n\n        this._trackEntity.polyline!.setPath3v([path]);\n\n        if (this._ignoreTerrain) {\n            this._propsLabel.setCartesian3v(path[Math.floor(path.length / 2)]);\n            this._propsLabel.label!.setText(`${distanceFormat(length)}, ${Math.round(this._heading)} deg`);\n        }\n    }\n\n    protected _onMouseMove = (e: IMouseState) => {\n        if (this._startLonLat && !this._stopDrawing) {\n            this._propsLabel.label!.setVisibility(true);\n            let endLonLat = this._planet!.getLonLatFromPixelTerrain(e.pos);\n            if (!endLonLat) return;\n            this._drawLine(this._startLonLat, endLonLat);\n        } else if (this._pickedCorner) {\n            let newLonLat = this._planet!.getLonLatFromPixelTerrain(e.pos);\n            if (newLonLat) {\n                if (this._pickedCorner.properties.name === \"start\") {\n                    this._drawLine(newLonLat, this._anchorLonLat!);\n                } else {\n                    this._drawLine(this._anchorLonLat!, newLonLat);\n                }\n            }\n        }\n    }\n\n    public clear() {\n        this._trackEntity.remove();\n        this._cornerEntity[0].remove();\n        this._cornerEntity[1].remove();\n        this._propsLabel.remove();\n        this._planet!.removeLayer(this._trackLayer);\n        this._planet!.removeLayer(this._cornersLayer);\n    }\n\n    public isCornersPositionChanged(): boolean {\n        let t = this._trackEntity.polyline!.getPath3v()[0] as Vec3[];\n        if (t) {\n            const startPos = t[0].clone(),\n                endPos = t[t.length - 1].clone();\n            return this._cornerEntity[0].getCartesian().equal(startPos) &&\n                this._cornerEntity[1].getCartesian().equal(endPos)\n        }\n        return false\n    }\n\n    public override frame() {\n        let t = this._trackEntity.polyline!.getPath3v()[0] as Vec3[];\n        if (t) {\n            const startPos = t[0].clone(),\n                endPos = t[t.length - 1].clone();\n\n            if (!this.isCornersPositionChanged()) {\n                this._cornerEntity[0].setCartesian3v(startPos);\n                this._cornerEntity[1].setCartesian3v(endPos);\n                if (!this._ignoreTerrain) {\n                    let res = 0;\n                    for (let i = 0, len = t.length - 1; i < len; i++) {\n                        res += t[i + 1].distance(t[i]);\n                    }\n                    this._propsLabel.setCartesian3v(t[Math.floor(t.length / 2)]);\n                    this._propsLabel.label!.setText(`${distanceFormat(res)}, ${Math.round(this._heading)} deg`);\n                }\n            }\n        }\n    }\n\n    public get ellipsoid(): Ellipsoid | null {\n        return this._planet ? this._planet.ellipsoid : null;\n    }\n}\n\nconst RULERSCENE_EVENTS: RulerSceneEventsList = [\n    \"add\",\n    \"remove\",\n    \"mousemove\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"lclick\",\n    \"rclick\",\n    \"mclick\",\n    \"ldblclick\",\n    \"rdblclick\",\n    \"mdblclick\",\n    \"lup\",\n    \"rup\",\n    \"mup\",\n    \"ldown\",\n    \"rdown\",\n    \"mdown\",\n    \"lhold\",\n    \"rhold\",\n    \"mhold\",\n    \"mousewheel\",\n    \"touchmove\",\n    \"touchstart\",\n    \"touchend\",\n    \"doubletouch\",\n    \"touchleave\",\n    \"touchenter\"\n];\n\nexport {RulerScene};\n","import {Control, IControlParams} from \"../Control\";\nimport {RulerScene} from \"./RulerScene\";\n\nexport interface IRulerParams extends IControlParams {\n    ignoreTerrain?: boolean\n}\n\nexport class Ruler extends Control {\n    protected _rulerScene: RulerScene;\n\n    constructor(options: IRulerParams = {}) {\n        super(options);\n\n        this._rulerScene = new RulerScene({\n            name: `rulerScene:${this.__id}`,\n            ignoreTerrain: options.ignoreTerrain\n        });\n    }\n\n    public set ignoreTerrain(v: boolean) {\n        this._rulerScene.ignoreTerrain = v;\n    }\n\n    public override oninit() {\n        this._rulerScene.bindPlanet(this.planet!);\n    }\n\n    public override onactivate() {\n        this.renderer && this.renderer.addNode(this._rulerScene);\n    }\n\n    public override ondeactivate() {\n        this.renderer && this.renderer.removeNode(this._rulerScene);\n    }\n}\n","import {Entity} from '../../entity/Entity';\nimport {LonLat} from \"../../LonLat\";\nimport {Object3d} from \"../../Object3d\";\nimport {RulerScene, IRulerSceneParams} from \"../ruler/RulerScene\";\nimport {Vector} from \"../../layer/Vector\";\nimport {Vec3} from \"../../math/Vec3\";\nimport {ILabelParams} from \"../../entity/Label\";\nimport {IRayParams} from \"../../entity/Ray\";\n\nlet obj3d = Object3d.createCylinder(1.1, 0, 2, 6, 1, true, true, 0, 0, 0);\n\nconst RAYS_OPTIONS: IRayParams = {\n    startColor: \"rgb(255,131,0)\",\n    endColor: \"rgb(255,131,0)\",\n    thickness: 5\n}\nconst LABEL_OPTIONS: ILabelParams = {\n    text: \"\",\n    size: 11,\n    color: \"rgba(455,455,455,1.0)\",\n    outlineColor: \"rgba(0,0,0,0.34)\",\n    outline: 0.23,\n    align: \"center\",\n    offset: [0, 18, 0]\n};\n\nconst RULER_CORNER_OPTIONS = {\n    scale: 1,\n    instanced: true,\n    tag: \"height-ruler\",\n    color: \"rgb(255,131,0)\",\n    object3d: obj3d\n};\n\ninterface IHeightRulerSceneParams extends IRulerSceneParams {\n\n}\n\nclass HeightRulerScene extends RulerScene {\n    protected _geoRulerLayer: Vector;\n    protected _heightLabels: Entity[];\n    protected _rayH: Entity;\n    protected _rayV: Entity;\n\n    constructor(options: IHeightRulerSceneParams = {}) {\n        super(options);\n\n        this._geoRulerLayer = new Vector(\"rayHeightRuler\", {\n            entities: [],\n            pickingEnabled: false,\n            polygonOffsetUnits: -2.0,\n            relativeToGround: false,\n            hideInLayerSwitcher: true\n        });\n\n        this._rayV = new Entity({\n            name: 'verticalRay',\n            ray: RAYS_OPTIONS\n        });\n\n        this._rayH = new Entity({\n            name: 'heightRay',\n            ray: RAYS_OPTIONS\n        });\n\n        this._heightLabels = [\n            new Entity({\n                name: 'startCornerLabel',\n                label: {\n                    ...LABEL_OPTIONS\n                }\n            }),\n            new Entity({\n                name: 'endCornerLabel',\n                label: {\n                    ...LABEL_OPTIONS\n                }\n            }),\n            new Entity({\n                name: 'deltaLabel',\n                label: {\n                    ...LABEL_OPTIONS\n                }\n            })\n        ];\n    }\n\n    public override setVisibility(visibility: boolean) {\n        super.setVisibility(visibility);\n        this._geoRulerLayer.setVisibility(visibility);\n    }\n\n    public get deltaLabel(): Entity {\n        return this._heightLabels[2];\n    }\n\n    public get startLabel(): Entity {\n        return this._heightLabels[0]\n    }\n\n    public get endLabel(): Entity {\n        return this._heightLabels[1]\n    }\n\n    public get corners(): Entity[] {\n        return this._cornerEntity;\n    }\n\n    public get startCorner(): Entity {\n        return this.corners[0];\n    }\n\n    public get endCorner(): Entity {\n        return this.corners[1];\n    }\n\n    public get startCornerLonLat(): LonLat {\n        return this.startCorner.getLonLat();\n    }\n\n    public get startCornerHeight(): number {\n        return this.startCornerLonLat.height;\n    }\n\n    public get endCornerLonLat(): LonLat {\n        return this.endCorner.getLonLat();\n    }\n\n    public get endCornerHeight(): number {\n        return this.endCornerLonLat.height;\n    }\n\n    public get maxHeightCornerLonLat(): LonLat {\n        if (this.startCornerHeight <= this.endCornerHeight) {\n            return this.endCornerLonLat;\n        } else {\n            return this.startCornerLonLat;\n        }\n    }\n\n    public get minHeightCornerLonLat(): LonLat {\n        if (this.startCornerHeight > this.endCornerHeight) {\n            return this.endCornerLonLat;\n        } else {\n            return this.startCornerLonLat;\n        }\n    }\n\n    public get deltaHeight(): number {\n        return Math.abs(this.startCornerHeight - this.endCornerHeight);\n    }\n\n    public override _drawLine(startLonLat: LonLat, endLonLat: LonLat, startPos?: Vec3) {\n        super._drawLine(startLonLat, endLonLat, startPos);\n        this._updateHeightRaysAndLabels();\n    }\n\n    protected async _updateHeightRaysAndLabels() {\n        const middleLonLat = this.minHeightCornerLonLat.clone();\n        middleLonLat.height = this.maxHeightCornerLonLat.height;\n\n        this._rayH.ray!.setStartPosition3v(this._planet!.ellipsoid.lonLatToCartesian(this.maxHeightCornerLonLat))\n        this._rayH.ray!.setEndPosition3v(this._planet!.ellipsoid.lonLatToCartesian(middleLonLat))\n        this._rayV.ray!.setStartPosition3v(this._planet!.ellipsoid.lonLatToCartesian(this.minHeightCornerLonLat));\n        this._rayV.ray!.setEndPosition3v(this._planet!.ellipsoid.lonLatToCartesian(middleLonLat));\n\n        middleLonLat.height = this.minHeightCornerLonLat.height + this.deltaHeight / 2;\n\n        this.deltaLabel.setLonLat(middleLonLat);\n        this.startLabel.setLonLat(this.startCornerLonLat);\n        this.endLabel.setLonLat(this.endCornerLonLat);\n\n        const startHeight = await this._planet!.getHeightDefault(this.startCornerLonLat),\n            endHeight = await this._planet!.getHeightDefault(this.endCornerLonLat)\n\n        this.deltaLabel.label!.setText(`\\u0394 ${Math.abs(startHeight - endHeight).toFixed(1)} m`);\n        this.startLabel.label!.setText(`P1 ${startHeight.toFixed(1)} m`)\n        this.endLabel.label!.setText(`P2 ${endHeight.toFixed(1)} m`)\n    }\n\n    public override clear() {\n        this._rayH.remove();\n        this._rayV.remove();\n        this.startCorner.remove();\n        this.endCorner.remove();\n        this.startLabel.remove();\n        this.endLabel.remove();\n        this.deltaLabel.remove();\n        super.clear();\n\n        // this._rayH = null;\n        // this._rayV = null;\n\n        this._planet!.removeLayer(this._geoRulerLayer);\n    }\n\n    public override _createCorners() {\n        this._cornerEntity = [\n            new Entity({\n                geoObject: RULER_CORNER_OPTIONS,\n                properties: {\n                    name: \"start\"\n                }\n            }),\n            new Entity({\n                geoObject: RULER_CORNER_OPTIONS,\n                properties: {\n                    name: \"end\"\n                }\n            })\n        ];\n\n        this._cornersLayer.setEntities(this._cornerEntity);\n    }\n\n    public override init() {\n        super.init();\n        this._createCorners();\n\n        this._labelLayer.addEntities(this._heightLabels);\n        this._geoRulerLayer.addEntities([this._rayH, this._rayV]);\n\n        this._planet!.addLayer(this._geoRulerLayer);\n    }\n\n    public override frame() {\n        super.frame()\n        this._updateHeightRaysAndLabels();\n    }\n}\n\n\nexport {HeightRulerScene};\n","import {Ruler, IRulerParams} from \"../ruler/Ruler\";\nimport {HeightRulerScene} from \"./HeightRulerScene\";\n\ninterface IHeightRulerParams extends IRulerParams {\n\n}\n\nexport class HeightRuler extends Ruler {\n    constructor(options: IHeightRulerParams = {}) {\n        super(options);\n        this._rulerScene = new HeightRulerScene({\n            name: `heightRulerScene:${this.__id}`,\n            ignoreTerrain: false\n        });\n    }\n}","import {Control, IControlParams} from \"./Control\";\nimport {ToggleButton} from \"../ui/ToggleButton\";\nimport {HeightRuler} from \"./heightRuler/HeightRuler\";\n\nconst ICON_BUTTON_SVG = `<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\n<svg fill=\"#000000\" height=\"800px\" width=\"800px\" version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n\\t viewBox=\"0 0 512 512\" xml:space=\"preserve\">\n<g>\n\\t<g>\n\\t\\t<path d=\"M369.151,0L0.001,369.15L142.85,512l369.149-369.15L369.151,0z M47.286,369.15l10.908-10.908l47.782,47.782l23.642-23.642\n\\t\\t\\tL81.837,334.6l10.909-10.909l23.711,23.711L140.1,323.76l-23.711-23.711l10.909-10.909l23.711,23.711l23.642-23.642\n\\t\\t\\tl-23.711-23.711l10.909-10.909l47.782,47.782l23.642-23.642l-47.782-47.782l10.908-10.908l23.71,23.71l23.642-23.642l-23.71-23.71\n\\t\\t\\tl10.908-10.908l23.711,23.711l23.642-23.642l-23.711-23.711l10.909-10.909l47.782,47.782l23.642-23.642l-47.782-47.782\n\\t\\t\\tl10.908-10.908l23.71,23.711l23.642-23.642l-23.711-23.71L334.6,81.837l23.711,23.71l23.642-23.642l-23.711-23.712l10.908-10.908\n\\t\\t\\tl95.564,95.564L142.85,464.714L47.286,369.15z\"/>\n\\t</g>\n</g>\n</svg>`;\n\ninterface IRulerSwitcherParams extends IControlParams {\n    ignoreTerrain?: boolean;\n}\n\n/**\n * Activate ruler\n */\nexport class RulerSwitcher extends Control {\n    ruler: HeightRuler;\n\n    constructor(options: IRulerSwitcherParams = {}) {\n        super({\n            name: \"RulerSwitcher\",\n            ...options\n        });\n\n        this.ruler = new HeightRuler({\n            ignoreTerrain: options.ignoreTerrain\n        });\n    }\n\n    public override oninit() {\n        this.planet!.addControl(this.ruler);\n        this._createMenuBtn();\n    }\n\n    public override onactivate() {\n        this.ruler.activate();\n    }\n\n    public override ondeactivate() {\n        this.ruler.deactivate();\n    }\n\n    protected _createMenuBtn() {\n\n        let btn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-ruler_button\"],\n            icon: ICON_BUTTON_SVG\n        });\n\n        btn.appendTo(this.renderer!.div!);\n\n        btn.events.on(\"change\", (isActive: boolean) => {\n            if (isActive) {\n                this.onactivate();\n            } else {\n                this.ondeactivate();\n            }\n        });\n    }\n}\n","import {binarySearch, parseHTML} from \"../utils/shared\";\nimport {Control, IControlParams} from \"./Control\";\nimport {RADIANS} from \"../math\";\nimport {Vec2} from \"../math/Vec2\";\nimport {Vec3} from \"../math/Vec3\";\nimport {GlobusTerrain} from \"../terrain/GlobusTerrain\";\nimport {IMouseState} from \"../renderer/RendererEvents\";\n\ninterface IScaleControlParams extends IControlParams {\n    isCenter?: boolean\n}\n\nconst scale: number[] = [\n    1, 2, 3, 5, 10, 20, 30, 50, 100, 200, 300, 500, 1e3, 2e3, 3e3, 5e3, 10e3, 20e3, 30e3, 50e3,\n    100e3, 200e3, 300e3, 500e3, 1000e3, 2000e3, 3000e3, 5000e3, 10000e3\n];\n\nconst TEMPLATE = `<div class=\"og-scale-container\">\n      <div class=\"og-scale-label\"></div>\n      <div class=\"og-scale-ruler\"></div>\n    </div>`;\n\n/**\n * Planet zoom buttons control.\n */\nexport class ScaleControl extends Control {\n\n    public el: HTMLElement | null;\n    protected _template: string;\n    protected _minWidth: number;\n    protected _maxWidth: number;\n    protected _isCenter: boolean;\n    protected _scaleLabelEl: HTMLElement | null;\n    protected _mPx: number;\n    protected currWidth: number;\n    protected _metersInMinSize: number;\n\n    constructor(options: IScaleControlParams = {}) {\n        if (!options.name || options.name === \"\") {\n            options.name = \"scaleControl\";\n        }\n        super(options);\n\n        this._template = TEMPLATE;\n\n        this._minWidth = 100;\n        this._maxWidth = 150;\n\n        this._isCenter = options.isCenter != undefined ? options.isCenter : true;\n\n        this._mPx = 0\n        this.currWidth = 0;\n        this._metersInMinSize = 0;\n\n        this.el = null;\n\n        this._scaleLabelEl = null;\n    }\n\n    protected _renderTemplate() {\n        return parseHTML(this._template)[0];\n    }\n\n    public override oninit() {\n        this.el = this._renderTemplate()!;\n\n        this._scaleLabelEl = this.el.querySelector<HTMLElement>(\".og-scale-label\")!;\n\n        this.renderer!.div!.appendChild(this.el);\n\n        if (this._isCenter) {\n            this.planet!.camera.events.on(\"moveend\", () => {\n                this._drawScreen(this.planet!.renderer!.handler.getCenter());\n            });\n\n            !this.planet!.terrain!.isEmpty && (this.planet!.terrain as GlobusTerrain).events.on(\"loadend\", () => {\n                this._drawScreen(this.planet!.renderer!.handler.getCenter());\n            });\n        } else {\n            this.renderer!.events.on(\"mousemove\", (e: IMouseState) => {\n                if (!e.leftButtonHold && !e.rightButtonHold) {\n                    this._drawScreen(e.pos);\n                }\n            });\n\n            this.planet!.camera.events.on(\"moveend\", () => {\n                let ms = this.renderer!.events.mouseState;\n                if (!ms.leftButtonHold && !ms.rightButtonHold) {\n                    this._drawScreen(ms.pos);\n                }\n            });\n        }\n    }\n\n    protected _drawScreen(px: Vec2) {\n        let cam = this.planet!.camera;\n        let s0 = px;\n        let dist = this.planet!.getDistanceFromPixel(s0) || 0;\n        if (dist === 0) {\n            s0 = cam.project(Vec3.ZERO);\n            dist = this.planet!.getDistanceFromPixel(s0) || 0;\n        }\n        let p0 = cam.getForward().scaleTo(dist).addA(cam.eye);\n        let tempSize = dist * Math.tan(cam.viewAngle * RADIANS);\n        let p1 = p0.add(cam.getRight().scaleTo(tempSize));\n        let s1 = cam.project(p1);\n        this._mPx = tempSize / s1.distance(s0);\n\n        let metersInMinSize = this._mPx * this._minWidth;\n\n        let index = binarySearch(scale, metersInMinSize, (a: number, b: number) => a - b);\n        if (index < 0) {\n            index = ~index;\n        }\n        let minMeters = scale[index],\n            maxMeters = scale[index + 1];\n\n        let t = (minMeters - metersInMinSize) / (maxMeters - minMeters);\n        this.currWidth = this._minWidth + t * (this._maxWidth - this._minWidth);\n\n        if (minMeters > 1000) {\n            this._scaleLabelEl!.innerText = `${minMeters / 1000} km`;\n        } else {\n            this._scaleLabelEl!.innerText = `${minMeters} m`;\n        }\n\n        this._metersInMinSize = metersInMinSize;\n\n        this.el!.style.width = this.currWidth + \"px\";\n    }\n}\n","import { print2d } from \"../utils/shared\";\nimport {Control, IControlParams} from \"./Control\";\n\n/**\n * Frame per second(FPS) display control.\n */\nexport class ShowFps extends Control {\n    constructor(options: IControlParams) {\n        super(options);\n    }\n\n    public override oninit() {\n        let d = document.createElement(\"div\");\n        d.className = \"defaultText \";\n        d.id = \"ogShowFpsControl\";\n        document.body.appendChild(d);\n        this.renderer!.events.on(\"draw\", this._draw, this);\n    }\n\n    protected _draw() {\n        print2d(\n            \"ogShowFpsControl\",\n            (1000.0 / this.renderer!.handler.deltaTime).toFixed(1),\n            this.renderer!.handler.canvas!.clientWidth - 60,\n            0\n        );\n    }\n}","import {Camera} from \"../camera/Camera\";\nimport {Control, IControlParams} from \"./Control\";\nimport {input} from \"../input/input\";\n\ninterface ISimpleNavigationParams extends IControlParams {\n    speed?: number;\n}\n\n/**\n * Simple keyboard camera navigation with W,S,A,D and shift keys to fly around the scene.\n */\nexport class SimpleNavigation extends Control {\n    public speed: number;\n\n    constructor(options: ISimpleNavigationParams = {}) {\n        super({\n            name: \"SimpleNavigation\",\n            autoActivate: true, ...options\n        });\n        this.speed = options.speed || 1.0;\n    }\n\n    override oninit() {\n\n    }\n\n    public override onactivate() {\n        super.onactivate();\n        let r = this.renderer!;\n        r.events.on(\"keypress\", input.KEY_W, this.onCameraMoveForward, this);\n        r.events.on(\"keypress\", input.KEY_S, this.onCameraMoveBackward, this);\n        r.events.on(\"keypress\", input.KEY_A, this.onCameraStrifeLeft, this);\n        r.events.on(\"keypress\", input.KEY_D, this.onCameraStrifeRight, this);\n        r.events.on(\"keypress\", input.KEY_UP, this.onCameraLookUp, this);\n        r.events.on(\"keypress\", input.KEY_DOWN, this.onCameraLookDown, this);\n        r.events.on(\"keypress\", input.KEY_LEFT, this.onCameraTurnLeft, this);\n        r.events.on(\"keypress\", input.KEY_RIGHT, this.onCameraTurnRight, this);\n        r.events.on(\"keypress\", input.KEY_Q, this.onCameraRollLeft, this);\n        r.events.on(\"keypress\", input.KEY_E, this.onCameraRollRight, this);\n    }\n\n    public override ondeactivate() {\n        super.ondeactivate();\n        let r = this.renderer!;\n        r.events.off(\"keypress\", input.KEY_W, this.onCameraMoveForward);\n        r.events.off(\"keypress\", input.KEY_S, this.onCameraMoveBackward);\n        r.events.off(\"keypress\", input.KEY_A, this.onCameraStrifeLeft);\n        r.events.off(\"keypress\", input.KEY_D, this.onCameraStrifeRight);\n        r.events.off(\"keypress\", input.KEY_UP, this.onCameraLookUp);\n        r.events.off(\"keypress\", input.KEY_DOWN, this.onCameraLookDown);\n        r.events.off(\"keypress\", input.KEY_LEFT, this.onCameraTurnLeft);\n        r.events.off(\"keypress\", input.KEY_RIGHT, this.onCameraTurnRight);\n        r.events.off(\"keypress\", input.KEY_Q, this.onCameraRollLeft);\n        r.events.off(\"keypress\", input.KEY_E, this.onCameraRollRight);\n    }\n\n    protected onCameraMoveForward() {\n        if (this._active) {\n            let cam = this.renderer!.activeCamera!;\n            cam.slide(0, 0, -this.speed);\n            cam.update();\n        }\n    }\n\n    protected onCameraMoveBackward() {\n        let cam = this.renderer!.activeCamera!;\n        cam.slide(0, 0, this.speed);\n        cam.update();\n    }\n\n    protected onCameraStrifeLeft() {\n        let cam = this.renderer!.activeCamera!;\n        cam.slide(-this.speed, 0, 0);\n        cam.update();\n    }\n\n    protected onCameraStrifeRight() {\n        let cam = this.renderer!.activeCamera!;\n        cam.slide(this.speed, 0, 0);\n        cam.update();\n    }\n\n    protected onCameraLookUp() {\n        let cam = this.renderer!.activeCamera!;\n        cam.pitch(0.5);\n        cam.update();\n    }\n\n    protected onCameraLookDown() {\n        let cam = this.renderer!.activeCamera!;\n        cam.pitch(-0.5);\n        cam.update();\n    }\n\n    protected onCameraTurnLeft() {\n        let cam = this.renderer!.activeCamera!;\n        cam.yaw(0.5);\n        cam.update();\n    }\n\n    protected onCameraTurnRight() {\n        let cam = this.renderer!.activeCamera!;\n        cam.yaw(-0.5);\n        cam.update();\n    }\n\n    protected onCameraRollLeft() {\n        let cam = this.renderer!.activeCamera!;\n        cam.roll(-0.5);\n        cam.update();\n    }\n\n    protected onCameraRollRight() {\n        let cam = this.renderer!.activeCamera!;\n        cam.roll(0.5);\n        cam.update();\n    }\n}","import {Control, IControlParams} from \"./Control\";\nimport {htmlColorToRgb, rgbToStringHTML} from \"../utils/shared\";\nimport {Program} from '../webgl/Program';\nimport {NumberArray3} from \"../math/Vec3\";\n\ninterface ISimpleSkyBackgroundParams extends IControlParams {\n\n}\n\nexport class SimpleSkyBackground extends Control {\n    protected _colorOne: Float32Array;\n    protected _colorTwo: Float32Array;\n\n    constructor(options: ISimpleSkyBackgroundParams = {}) {\n        super({\n            name: \"SimpleSkyBackground\",\n            ...options\n        });\n\n        this._colorOne = new Float32Array([128 / 255, 223 / 255, 255 / 255]);\n        this._colorTwo = new Float32Array([10 / 255, 15 / 255, 56 / 255]);\n    }\n\n    public get colorOne(): string {\n        let c = this._colorOne;\n        let arr: NumberArray3 = [Math.round(c[0] * 255), Math.round(c[1] * 255), Math.round(c[2] * 255)];\n        return rgbToStringHTML(arr);\n    }\n\n    public get colorTwo(): string {\n        let c = this._colorTwo;\n        let arr: NumberArray3 = [Math.round(c[0] * 255), Math.round(c[1] * 255), Math.round(c[2] * 255)];\n        return rgbToStringHTML(arr);\n    }\n\n    public set colorOne(htmlColor: string) {\n        let rgb = htmlColorToRgb(htmlColor);\n        this._colorOne[0] = rgb.x;\n        this._colorOne[1] = rgb.y;\n        this._colorOne[2] = rgb.z;\n    }\n\n    public set colorTwo(htmlColor: string) {\n        let rgb = htmlColorToRgb(htmlColor);\n        this._colorTwo[0] = rgb.x;\n        this._colorTwo[1] = rgb.y;\n        this._colorTwo[2] = rgb.z;\n    }\n\n    public override oninit() {\n        this.renderer!.handler.addProgram(simpleSkyBackgroundShader());\n        this.activate();\n    }\n\n    public override onactivate() {\n        super.onactivate();\n        this.planet!.events.on(\"draw\", this._drawBackground, this);\n    }\n\n    public override ondeactivate() {\n        super.ondeactivate();\n        this.planet!.events.off(\"draw\", this._drawBackground);\n    }\n\n    protected _drawBackground() {\n        let h = this.renderer!.handler;\n        let sh = h.programs.simpleSkyBackground,\n            p = sh._program,\n            shu = p.uniforms,\n            gl = h.gl!;\n        let cam = this.planet!.camera;\n\n        gl.disable(gl.DEPTH_TEST);\n\n        sh.activate();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.renderer!.screenFramePositionBuffer!);\n        gl.vertexAttribPointer(p.attributes.corners, 2, gl.FLOAT, false, 0, 0);\n\n        gl.uniform3fv(shu.camPos, [cam.eye.x, cam.eye.y, cam.eye.z]);\n        gl.uniform2fv(shu.iResolution, [h.getWidth(), h.getHeight()]);\n        gl.uniform1f(shu.fov, cam.getViewAngle());\n        gl.uniform1f(shu.earthRadius, this.planet!.ellipsoid.getPolarSize() + 1);\n        gl.uniform3fv(shu.colorOne, this._colorOne);\n        gl.uniform3fv(shu.colorTwo, this._colorTwo);\n\n        gl.uniformMatrix4fv(shu.viewMatrix, false, cam.getViewMatrix());\n\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n        gl.enable(gl.DEPTH_TEST);\n    }\n}\n\nfunction simpleSkyBackgroundShader(): Program {\n    return new Program(\"simpleSkyBackground\", {\n        uniforms: {\n            iResolution: \"vec2\", fov: \"float\",\n            camPos: \"vec3\",\n            earthRadius: \"float\",\n            viewMatrix: \"mat4\",\n            colorOne: \"vec3\",\n            colorTwo: \"vec3\"\n        }, attributes: {\n            corners: \"vec3\"\n        },\n        vertexShader:\n            `attribute vec2 corners;\n                        \n            varying vec2 tc;\n            \n            void main(void) {\n                gl_Position = vec4(corners, 0.0, 1.0);\n                tc = corners * 0.5 + 0.5;\n            }`,\n        fragmentShader:\n            `precision highp float;\n            \n            #define MAX 10e10\n            #define PI 3.14159265359\n            #define rad(x) x * PI / 180.\n            #define ZERO vec3(0.0)          \n           \n            #define RED vec4(1.0, 0.0, 0.0, 1.0)\n            #define GREEN vec4(0.0, 1.0, 0.0, 1.0)         \n            \n            uniform vec3 camPos;            \n            uniform vec2 iResolution;\n            uniform float fov;\n            uniform float earthRadius;\n            uniform mat4 viewMatrix;\n            \n            uniform vec3 colorOne;\n            uniform vec3 colorTwo;\n                         \n            varying vec2 tc;\n                        \n            // compute the view ray in the camera coordinate\n            vec3 computeView(vec2 uv){\n                float w_h_ratio = iResolution.x / iResolution.y;   \n                float h = tan(rad(fov/2.));\n                return normalize(vec3(-w_h_ratio * h, -h, -1.) + vec3(uv.x * 2. * h * w_h_ratio, uv.y*2.*h, 0.));\n            }\n\n            // sphere of size ra centered at point ce\n            vec2 sphIntersect( in vec3 ro, in vec3 rd, in vec3 ce, float ra )\n            {\n                vec3 oc = ro - ce;\n                float b = dot( oc, rd );\n                float c = dot( oc, oc ) - ra * ra;\n                float h = b * b - c;\n                if( h < 0.0 ) return vec2(MAX); // no intersection\n                h = sqrt( h );\n                return vec2( -b-h, -b+h );\n            }\n            \n            mat3 transpose(mat3 matrix) {\n                vec3 row0 = matrix[0];\n                vec3 row1 = matrix[1];\n                vec3 row2 = matrix[2];\n                mat3 result = mat3(\n                    vec3(row0.x, row1.x, row2.x),\n                    vec3(row0.y, row1.y, row2.y),\n                    vec3(row0.z, row1.z, row2.z)\n                );\n                return result;\n            }\n            \n            float det(mat2 matrix) {\n                return matrix[0].x * matrix[1].y - matrix[0].y * matrix[1].x;\n            }\n            \n            mat3 inverse(mat3 matrix) {\n                vec3 row0 = matrix[0];\n                vec3 row1 = matrix[1];\n                vec3 row2 = matrix[2];\n            \n                vec3 minors0 = vec3(\n                    det(mat2(row1.y, row1.z, row2.y, row2.z)),\n                    det(mat2(row1.z, row1.x, row2.z, row2.x)),\n                    det(mat2(row1.x, row1.y, row2.x, row2.y))\n                );\n                vec3 minors1 = vec3(\n                    det(mat2(row2.y, row2.z, row0.y, row0.z)),\n                    det(mat2(row2.z, row2.x, row0.z, row0.x)),\n                    det(mat2(row2.x, row2.y, row0.x, row0.y))\n                );\n                vec3 minors2 = vec3(\n                    det(mat2(row0.y, row0.z, row1.y, row1.z)),\n                    det(mat2(row0.z, row0.x, row1.z, row1.x)),\n                    det(mat2(row0.x, row0.y, row1.x, row1.y))\n                );\n            \n                mat3 adj = transpose(mat3(minors0, minors1, minors2));\n            \n                return (1.0 / dot(row0, minors0)) * adj;\n            }\n            \n            void main(void) {\n            \n                vec3 dir = computeView(tc);\n                dir = inverse(mat3(viewMatrix)) * dir;\n                \n                vec2 ER = sphIntersect(camPos, dir, vec3(0.0), earthRadius);\n                \n                float bigRadius = earthRadius * 2.5;\n                vec3 bigCenter = normalize(camPos) * bigRadius * 1.3;                \n                               \n                vec2 BIG = sphIntersect(camPos, dir, bigCenter, bigRadius);\n                \n                float Ix = distance(camPos + dir * BIG.y, ZERO);               \n                \n                float maxI = sqrt(bigRadius * bigRadius + bigRadius * bigRadius);\n                                   \n                gl_FragColor = vec4(mix(colorOne, colorTwo, Ix / maxI), 1.0);\n            }`\n    });\n}\n","import {JulianDate, ONE_BY_SECONDS_PER_DAY, J2000} from \"./jd\";\n\n/**\n * Angle between J2000 mean equator and the ecliptic plane.\n * 23 deg 26' 21\".448 (Seidelmann, _Explanatory Supplement to the\n * Astronomical Almanac_ (1992), eqn 3.222-1.\n * @const\n * @type{number}\n */\nexport const J2000_OBLIQUITY = 23.4392911;\n\n/**\n * IAU 1976 value\n * @const\n * @type{number}\n */\nexport const AU_TO_METERS = 1.4959787e11;\n\n/**\n * Terrestrial and atomic time difference.\n * @const\n * @type{number}\n */\nexport const TDT_TAI = 32.184;\n\n/**\n * Earth gravitational parameter product of gravitational constant G and the mass M of the Earth.\n * @const\n * @type{number}\n */\nexport const EARTH_GRAVITATIONAL_PARAMETER = 3.98600435e14;\n\n/**\n * Sun gravitational parameter product of gravitational constant G and the mass M of the Sun.\n * @const\n * @type{number}\n */\nexport const SUN_GRAVITATIONAL_PARAMETER = 1.32712440018e20;\n\n/**\n * Converts atomic time to barycentric dynamical time.\n * @param {JulianDate} tai - Atomic time.\n * @returns {JulianDate} - returns barycentric dynamical time.\n */\nexport function TAItoTDB(tai: JulianDate): JulianDate {\n    tai += TDT_TAI * ONE_BY_SECONDS_PER_DAY;\n    const g = 6.239996 + 0.0172019696544 * (tai - J2000);\n    return tai + 0.001658 * Math.sin(g + 1.671e-2 * Math.sin(g)) * ONE_BY_SECONDS_PER_DAY;\n}\n","import * as math from \"../math\";\nimport { Quat } from \"../math/Quat\";\nimport { Vec3 } from \"../math/Vec3\";\nimport * as astro from \"./astro\";\nimport * as jd from \"./jd\";\nimport {JulianDate} from \"./jd\";\n\n/**\n * Returns Sun position in the geocentric coordinate system by the time.\n * @param {JulianDate} jDate - Julian date time.\n * @returns {Vec3} - Sun geocentric coordinates.\n */\nexport function getSunPosition(jDate: JulianDate): Vec3 {\n    // http://stjarnhimlen.se/comp/tutorial.html\n    // a  Mean distance, or semi-major axis\n    // e  Eccentricity\n    // T  Time at perihelion\n\n    // q  Perihelion distance  = a * (1 - e)\n    // Q  Aphelion distance    = a * (1 + e)\n\n    // i  Inclination, i.e. the \"tilt\" of the orbit relative to the\n    //    ecliptic.  The inclination varies from 0 to 180 degrees. If\n    //    the inclination is larger than 90 degrees, the planet is in\n    //    a retrogade orbit, i.e. it moves \"backwards\".  The most\n    //    well-known celestial body with retrogade motion is Comet Halley.\n\n    // N  (usually written as \"Capital Omega\") Longitude of Ascending\n    //    Node. This is the angle, along the ecliptic, from the Vernal\n    //    Point to the Ascending Node, which is the intersection between\n    //    the orbit and the ecliptic, where the planet moves from south\n    //    of to north of the ecliptic, i.e. from negative to positive\n    //    latitudes.\n\n    // w  (usually written as \"small Omega\") The angle from the Ascending\n    //    node to the Perihelion, along the orbit.\n\n    // P  Orbital period       = 365.256898326 * a**1.5/sqrt(1+m) days,\n    //    where m = the mass of the planet in solar masses (0 for\n    //    comets and asteroids). sqrt() is the square root function.\n\n    // n  Daily motion         = 360_deg / P    degrees/day\n\n    // t  Some epoch as a day count, e.g. Julian Day Number. The Time\n    //    at Perihelion, T, should then be expressed as the same day count.\n\n    // t - T   Time since Perihelion, usually in days\n\n    // M  Mean Anomaly         = n * (t - T)  =  (t - T) * 360_deg / P\n    //    Mean Anomaly is 0 at perihelion and 180 degrees at aphelion\n\n    // L  Mean Longitude       = M + w + N\n\n    // E  Eccentric anomaly, defined by Kepler's equation:   M = E - e * sin(E)\n    //    An auxiliary angle to compute the position in an elliptic orbit\n\n    // v  True anomaly: the angle from perihelion to the planet, as seen\n    //    from the Sun\n\n    // r  Heliocentric distance: the planet's distance from the Sun.\n\n    // x,y,z  Rectangular coordinates. Used e.g. when a heliocentric\n    //        position (seen from the Sun) should be converted to a\n    //        corresponding geocentric position (seen from the Earth).\n\n    var d = jDate - jd.J2000;\n\n    var w = 282.9404 + 4.70935e-5 * d; // longitude of perihelion\n    // var a = 1.000000; // mean distance, a.u.\n    var e = 0.016709 - 1.151e-9 * d; // eccentricity\n    var M = math.rev(356.047 + 0.9856002585 * d); // mean anomaly\n\n    var oblecl = astro.J2000_OBLIQUITY - 3.563e-7 * d; // obliquity of the ecliptic\n\n    // var L = math.rev(w + M); // Sun's mean longitude\n\n    var E =\n        M + math.DEGREES * e * Math.sin(M * math.RADIANS) * (1 + e * Math.cos(M * math.RADIANS)); // eccentric anomaly\n\n    // Sun rectangular coordinates, where the X axis points towards the perihelion\n    var x = Math.cos(E * math.RADIANS) - e;\n    var y = Math.sin(E * math.RADIANS) * Math.sqrt(1 - e * e);\n\n    var r = Math.sqrt(x * x + y * y); // distance\n    var v = Math.atan2(y, x) * math.DEGREES; // true anomaly\n\n    var lon = math.rev(v + w); // longitude of the Sun\n\n    // the Sun's ecliptic rectangular coordinates\n    x = r * Math.cos(lon * math.RADIANS);\n    y = r * Math.sin(lon * math.RADIANS);\n\n    // We use oblecl, and rotate these coordinates\n    var xequat = x;\n    var yequat = y * Math.cos(oblecl * math.RADIANS);\n    var zequat = y * Math.sin(oblecl * math.RADIANS);\n\n    var theta = math.TWO_PI * ((d * 24.0) / 23.9344694 - 259.853 / 360.0); // Siderial spin time\n\n    return Quat.zRotation(-theta).mulVec3(\n        new Vec3(\n            -xequat * astro.AU_TO_METERS,\n            -yequat * astro.AU_TO_METERS,\n            zequat * astro.AU_TO_METERS\n        )\n    );\n\n    // Convert to RA and Decl\n    // var RA = Math.atan2(yequat, xequat) * math.DEGREES;\n    // var Decl = Math.atan2(zequat, Math.sqrt(xequat * xequat + yequat * yequat)) * math.DEGREES;\n}\n","import {Vec3} from \"../math/Vec3\";\nimport {RenderNode} from \"../scene/RenderNode\";\n\nexport interface ILightSourceParams {\n    position?: Vec3;\n    directional?: boolean;\n    ambient?: Vec3;\n    diffuse?: Vec3;\n    specular?: Vec3;\n    shininess?: number;\n}\n\n/**\n * Represents basic light source.\n * @class\n * @param {string} [name] - Light source name.\n * @param {ILightSourceParams} [params] - Light parameters:\n * @param {Vec3} [params.position] - Light source position if it is a point light, otherwise it is a light direction vector.\n * @param {Vec3} [params.ambient]  - Ambient RGB color.\n * @param {Vec3} [params.diffuse]  - Diffuse RGB color.\n * @param {Vec3} [params.specular]  - Specular RGB color.\n * @param {number} [params.shininess]  - Specular shininess.\n */\nclass LightSource {\n\n    static __counter__: number = 0;\n\n    /**\n     * Light name.\n     * @protected\n     * @type {string}\n     */\n    protected _name: string;\n\n    /**\n     * Render node where light is shines.\n     * @protected\n     * @type {RenderNode}\n     */\n    protected _renderNode: RenderNode | null;\n\n    /**\n     * Light position.\n     * @public\n     * @type {Vec3}\n     */\n    public _position: Vec3;\n\n    /**\n     * True if the light is directional.\n     * @public\n     * @type {boolean}\n     */\n    public directional: boolean;\n\n    /**\n     * Ambient color.\n     * @protected\n     * @type {Vec3}\n     */\n    protected _ambient: Vec3;\n\n    /**\n     * Diffuse color.\n     * @protected\n     * @type {Vec3}\n     */\n    protected _diffuse: Vec3;\n\n    /**\n     * Specular color.\n     * @protected\n     * @type {Vec3}\n     */\n    protected _specular: Vec3;\n\n    /**\n     * Shininess.\n     * @protected\n     * @type {number}\n     */\n    protected _shininess: number;\n\n    /**\n     * Light activity.\n     * @protected\n     * @type {boolean}\n     */\n    protected _active: boolean;\n\n    protected _tempAmbient: Vec3;\n    protected _tempDiffuse: Vec3;\n    protected _tempSpecular: Vec3;\n    protected _tempShininess: number;\n\n    constructor(name: string, params: ILightSourceParams) {\n\n        /**\n         * Light name.\n         * @protected\n         * @type {string}\n         */\n        this._name = name || \"light_\" + LightSource.__counter__++;\n\n        /**\n         * Render node where light is shines.\n         * @protected\n         * @type {RenderNode}\n         */\n        this._renderNode = null;\n\n        /**\n         * Light position.\n         * @public\n         * @type {Vec3}\n         */\n        this._position = params.position || new Vec3();\n\n        /**\n         * True if the light is directional.\n         * @public\n         * @type {boolean}\n         */\n        this.directional = params.directional != undefined ? params.directional : true;\n\n        /**\n         * Ambient color.\n         * @protected\n         * @type {Vec3}\n         */\n        this._ambient = params.ambient || new Vec3();\n\n        /**\n         * Diffuse color.\n         * @protected\n         * @type {Vec3}\n         */\n        this._diffuse = params.diffuse || new Vec3(0.8, 0.8, 0.8);\n\n        /**\n         * Specular color.\n         * @protected\n         * @type {Vec3}\n         */\n        this._specular = params.specular || new Vec3(0.18, 0.18, 0.18);\n\n        /**\n         * Shininess.\n         * @protected\n         * @type {number}\n         */\n        this._shininess = params.shininess != undefined ? params.shininess : 3.3;\n\n        /**\n         * Light activity.\n         * @protected\n         * @type {boolean}\n         */\n        this._active = true;\n\n        this._tempAmbient = this._ambient.clone();\n        this._tempDiffuse = this._diffuse.clone();\n        this._tempSpecular = this._specular.clone();\n        this._tempShininess = this._shininess;\n    }\n\n    /**\n     * Creates clone of the current light object.\n     * @todo: TODO\n     * @public\n     * @returns {LightSource}\n     */\n    public clone() {\n        // TODO\n    }\n\n    /**\n     * Set light activity. If activity is false the light doesn't shine.\n     * @public\n     * @param {boolean} active - Light activity.\n     */\n    public setActive(active: boolean) {\n        if (active && !this._active) {\n            const rn = this._renderNode;\n            if (rn) {\n                let index = rn._lightsNames.indexOf(this._name);\n                this._shininess = rn._lightsParamsf[index] = this._tempShininess;\n                if (index != -1) {\n                    index *= 9;\n                    this._ambient.x = rn._lightsParamsv[index] = this._tempAmbient.x;\n                    this._ambient.y = rn._lightsParamsv[index + 1] = this._tempAmbient.y;\n                    this._ambient.z = rn._lightsParamsv[index + 2] = this._tempAmbient.z;\n\n                    this._diffuse.x = rn._lightsParamsv[index + 3] = this._tempDiffuse.x;\n                    this._diffuse.y = rn._lightsParamsv[index + 4] = this._tempDiffuse.y;\n                    this._diffuse.z = rn._lightsParamsv[index + 5] = this._tempDiffuse.z;\n\n                    this._specular.x = rn._lightsParamsv[index + 6] = this._tempSpecular.x;\n                    this._specular.y = rn._lightsParamsv[index + 7] = this._tempSpecular.y;\n                    this._specular.z = rn._lightsParamsv[index + 8] = this._tempSpecular.z;\n                }\n            }\n            this._active = true;\n        } else if (!active && this._active) {\n            this._tempAmbient = this._ambient.clone();\n            this._tempDiffuse = this._diffuse.clone();\n            this._tempSpecular = this._specular.clone();\n            this._tempShininess = this._shininess;\n            this.setBlack();\n            this._active = false;\n        }\n    }\n\n    /**\n     * Gets light activity.\n     * @public\n     * @returns {boolean}\n     */\n    public isActive(): boolean {\n        return this._active;\n    }\n\n    /**\n     * Set light source position, or if it is a directional type sets light direction vector.\n     * @public\n     * @param {Vec3} position - Light position or direction vector.\n     */\n    public setPosition3v(position: Vec3) {\n        this._position.x = position.x;\n        this._position.y = position.y;\n        this._position.z = position.z;\n    }\n\n    /**\n     * Set light source position, or if it is a directional type sets light direction vector.\n     * @public\n     */\n    public setPosition(x: number, y: number, z: number) {\n        this._position.x = x;\n        this._position.y = y;\n        this._position.z = z;\n    }\n\n    /**\n     * Returns light source position, or if it is a directional type sets light direction vector.\n     * @public\n     * @returns {Vec3} - Light source position/direction.\n     */\n    public getPosition(): Vec3 {\n        return this._position.clone();\n    }\n\n    /**\n     * Set ambient color.\n     * @public\n     * @param {Vec3} rgb - Ambient color.\n     */\n    public setAmbient3v(rgb: Vec3) {\n        this.setAmbient(rgb.x, rgb.y, rgb.z);\n    }\n\n    /**\n     * Set diffuse color.\n     * @public\n     * @param {Vec3} rgb - Diffuse color.\n     */\n    public setDiffuse3v(rgb: Vec3) {\n        this.setDiffuse(rgb.x, rgb.y, rgb.z);\n    }\n\n    /**\n     * Set specular color.\n     * @public\n     * @param {Vec3} rgb - Specular color.\n     */\n    public setSpecular3v(rgb: Vec3) {\n        this.setSpecular(rgb.x, rgb.y, rgb.z);\n    }\n\n    /**\n     * Set ambient color.\n     * @public\n     */\n    public setAmbient(r: number, g: number, b: number) {\n        this._ambient.set(r, g, b);\n        const rn = this._renderNode;\n        if (rn) {\n            let index = 9 * rn._lightsNames.indexOf(this._name);\n            if (index != -1) {\n                rn._lightsParamsv[index] = r;\n                rn._lightsParamsv[index + 1] = g;\n                rn._lightsParamsv[index + 2] = b;\n            }\n        }\n    }\n\n    /**\n     * Set diffuse color.\n     * @public\n     */\n    public setDiffuse(r: number, g: number, b: number) {\n        this._diffuse.set(r, g, b);\n        const rn = this._renderNode;\n        if (rn) {\n            let index = 9 * rn._lightsNames.indexOf(this._name);\n            if (index != -1) {\n                rn._lightsParamsv[index + 3] = r;\n                rn._lightsParamsv[index + 4] = g;\n                rn._lightsParamsv[index + 5] = b;\n            }\n        }\n    }\n\n    /**\n     * Set specular color.\n     * @public\n     */\n    public setSpecular(r: number, g: number, b: number) {\n        this._specular.set(r, g, b);\n        const rn = this._renderNode;\n        if (rn) {\n            let index = 9 * rn._lightsNames.indexOf(this._name);\n            if (index != -1) {\n                rn._lightsParamsv[index + 6] = r;\n                rn._lightsParamsv[index + 7] = g;\n                rn._lightsParamsv[index + 8] = b;\n            }\n        }\n    }\n\n    /**\n     * Set material shininess.\n     * @public\n     */\n    public setShininess(shininess: number) {\n        this._shininess = shininess;\n        const rn = this._renderNode;\n        if (rn) {\n            let index = rn._lightsNames.indexOf(this._name);\n            if (index != -1) {\n                rn._lightsParamsf[index] = shininess;\n            }\n        }\n    }\n\n    /**\n     * Sets light to black.\n     * @public\n     */\n    public setBlack() {\n        this._ambient.clear();\n        this._diffuse.clear();\n        this._specular.clear();\n        this._shininess = 0;\n        const rn = this._renderNode;\n        if (rn) {\n            let index = 9 * rn._lightsNames.indexOf(this._name);\n            if (index !== -1) {\n                rn._lightsParamsv[index] = rn._lightsParamsv[index + 1] = rn._lightsParamsv[index + 2] =\n                    rn._lightsParamsv[index + 3] = rn._lightsParamsv[index + 4] = rn._lightsParamsv[index + 5] =\n                        rn._lightsParamsv[index + 6] = rn._lightsParamsv[index + 7] = rn._lightsParamsv[index + 8] = 0;\n            }\n        }\n    }\n\n    /**\n     * Adds current light to the render node scene.\n     * @public\n     * @param {RenderNode} renderNode - Render node scene.\n     */\n    public addTo(renderNode: RenderNode) {\n        this._renderNode = renderNode;\n        renderNode._lights.push(this);\n        renderNode._lightsNames.push(this._name);\n        renderNode._lightsParamsf.push(this._shininess);\n        renderNode._lightsParamsv.push.apply(renderNode._lightsParamsv, this._ambient.toArray());\n        renderNode._lightsParamsv.push.apply(renderNode._lightsParamsv, this._diffuse.toArray());\n        renderNode._lightsParamsv.push.apply(renderNode._lightsParamsv, this._specular.toArray());\n        renderNode.transformLights();\n    }\n\n    /**\n     * Removes from render node scene.\n     * @public\n     */\n    public remove() {\n        const rn = this._renderNode;\n        if (rn) {\n            // let li = rn.getLightById(this._name);\n            // if (li != -1) {\n            //     rn._lights.splice(li, 1);\n            //     rn._lightsNames.splice(li, 1);\n            //     rn._lightsParamsf.splice(li, 1);\n            //     rn._lightsParamsv.splice(li, 9);\n            // }\n        }\n        this._renderNode = null;\n    }\n}\n\nexport {LightSource};\n","import {Control, IControlParams} from \"./Control\";\nimport {Clock} from \"../Clock\";\nimport {getSunPosition} from \"../astro/earth\";\nimport {LightSource} from \"../light/LightSource\";\nimport {Quat} from \"../math/Quat\";\nimport {Vec3} from \"../math/Vec3\";\n\ninterface ISunParams extends IControlParams {\n    activationHeight?: number;\n    offsetVertical?: number;\n    offsetHorizontal?: number;\n    stopped?: boolean;\n}\n\n/**\n * Real Sun geocentric position control that place the Sun on the right place by the Earth.\n */\nexport class Sun extends Control {\n    public activationHeight: number;\n    public offsetVertical: number;\n    public offsetHorizontal: number;\n    public sunlight: LightSource;\n\n    protected _currDate: number;\n    protected _prevDate: number;\n    protected _clockPtr: Clock | null;\n    protected _lightOn: boolean;\n    protected _stopped: boolean;\n    protected _f: number;\n    protected _k: number;\n\n    constructor(options: ISunParams = {}) {\n        super({autoActivate: true, ...options});\n\n        this._name = \"sun\";\n\n        this.activationHeight = options.activationHeight || 12079000.0;\n\n        this.offsetVertical = options.offsetVertical || -5000000;\n\n        this.offsetHorizontal = options.offsetHorizontal || 5000000;\n\n        this.sunlight = new LightSource(\"Sun\", {\n            ambient: new Vec3(0.15, 0.15, 0.25),\n            diffuse: new Vec3(0.9, 0.9, 0.8),\n            specular: new Vec3(0.1, 0.1, 0.06),\n            shininess: 110\n        });\n\n        /**\n         * Current frame handler clock date and time.\n         * @private\n         * @type {Number}\n         */\n        this._currDate = 0;\n\n        /**\n         * Previous frame handler clock date and time.\n         * @private\n         * @type {Number}\n         */\n        this._prevDate = 0;\n\n        this._clockPtr = null;\n\n        this._lightOn = false;\n\n        this._f = 0;\n        this._k = 0;\n\n        this._stopped = options.stopped || false;\n    }\n\n    public override oninit() {\n        this.planet!.lightEnabled = true;\n\n        // sunlight initialization\n        this.sunlight.addTo(this.planet!);\n\n        this.renderer!.events.on(\"draw\", this._draw, this);\n\n        if (!this._clockPtr) {\n            this._clockPtr = this.renderer!.handler.defaultClock;\n        }\n    }\n\n    public stop() {\n        this._stopped = true;\n        this.deactivate();\n    }\n\n    public start() {\n        this._stopped = false;\n        this.activate();\n    }\n\n    public override onactivate() {\n        super.onactivate();\n        this._stopped = false;\n    }\n\n    public bindClock(clock: Clock) {\n        this._clockPtr = clock;\n    }\n\n    protected _draw() {\n        if (!this._clockPtr) return;\n        this._currDate = this._clockPtr.currentDate;\n        if (!this._stopped) {\n            let cam = this.planet!.camera;\n            if (cam.getHeight() < this.activationHeight || !this._active) {\n                this._lightOn = true;\n                this._f = 1;\n                let n = cam.eye.normal(),\n                    u = cam.getForward();\n\n                u.scale(Math.sign(cam._u.dot(n))); // up\n\n                if (cam.slope > 0.99) {\n                    u = cam._u;\n                }\n\n                let tu = Vec3.proj_b_to_plane(u, n, u).normalize().scale(this.offsetVertical);\n                let tr = Vec3.proj_b_to_plane(cam._r, n, cam._r)\n                    .normalize()\n                    .scale(this.offsetHorizontal); // right\n\n                let d = tu.add(tr);\n                let pos = cam.eye.add(d);\n\n                if (this._k > 0) {\n                    this._k -= 0.01;\n                    let rot = Quat.getRotationBetweenVectors(\n                        this.sunlight._position.normal(),\n                        pos.normal()\n                    );\n                    let r = rot.slerp(Quat.IDENTITY, this._k).normalize();\n                    this.sunlight.setPosition3v(r.mulVec3(this.sunlight._position));\n                } else {\n                    this.sunlight.setPosition3v(pos);\n                }\n            } else {\n                this._k = 1;\n                if (this._f > 0) {\n                    this._f -= 0.01;\n                    let rot = Quat.getRotationBetweenVectors(\n                        this.sunlight._position.normal(),\n                        getSunPosition(this._currDate).normal()\n                    );\n                    let r = rot.slerp(Quat.IDENTITY, this._f).normalize();\n                    this.sunlight.setPosition3v(r.mulVec3(this.sunlight._position));\n                } else {\n                    if (\n                        (Math.abs(this._currDate - this._prevDate) > 0.00034 && this._active) ||\n                        this._lightOn\n                    ) {\n                        this._lightOn = false;\n                        this._prevDate = this._currDate;\n                        this.sunlight.setPosition3v(getSunPosition(this._currDate));\n                        this._f = 0;\n                    }\n                }\n            }\n        } else {\n            this.sunlight.setPosition3v(getSunPosition(this._currDate));\n        }\n    }\n}","import {input} from \"../input/input\";\nimport {Control, IControlParams} from \"./Control\";\n\ninterface IToggleWireframe extends IControlParams {\n    isActive?: boolean;\n}\n\n/**\n * Planet GL draw mode(TRIANGLE_STRIP/LINE_STRING) changer.\n */\nexport class ToggleWireframe extends Control {\n    protected _isActive = false;\n\n    constructor(options: IToggleWireframe = {}) {\n        super(options);\n        this._isActive = options.isActive || false;\n    }\n\n    public override oninit() {\n        this.renderer!.events.on(\"charkeypress\", input.KEY_X, this.toogleWireframe, this);\n        if (this._isActive) {\n            this.planet!.setDrawMode(this.renderer!.handler.gl!.LINE_STRIP);\n        }\n    }\n\n    public toogleWireframe = () => {\n        if (this.renderer && this.renderer.handler.gl) {\n            if (this.planet!.drawMode === this.renderer.handler.gl.LINE_STRIP) {\n                this.planet!.setDrawMode(this.renderer.handler.gl.TRIANGLE_STRIP);\n            } else {\n                this.planet!.setDrawMode(this.renderer.handler.gl.LINE_STRIP);\n            }\n        }\n    }\n}\n","import {Control, IControlParams} from \"./Control\";\nimport {Key} from \"../Lock\";\nimport {LonLat} from \"../LonLat\";\nimport {math} from \"../index\";\nimport {Quat} from \"../math/Quat\";\nimport {Ray} from \"../math/Ray\";\nimport {Sphere} from \"../bv/Sphere\";\nimport {Vec2} from \"../math/Vec2\";\nimport {Vec3} from \"../math/Vec3\";\nimport {ITouchState} from \"../renderer/RendererEvents\";\n\ninterface ITouchNavigationParams extends IControlParams {\n\n}\n\nclass TouchExt {\n    public x: number;\n    public y: number;\n    public prev_x: number;\n    public prev_y: number;\n    public grabbedPoint: Vec3 | null;\n    public grabbedSpheroid: Sphere;\n\n    protected _vec: Vec2;\n    protected _vecPrev: Vec2;\n\n\n    constructor() {\n        this.x = 0;\n        this.y = 0;\n        this.prev_x = 0;\n        this.prev_y = 0;\n        this.grabbedPoint = null;\n        this.grabbedSpheroid = new Sphere();\n        this._vec = new Vec2();\n        this._vecPrev = new Vec2();\n    }\n\n    public get dY(): number {\n        return this.y - this.prev_y;\n    }\n\n    public get dX(): number {\n        return this.x - this.prev_x;\n    }\n\n    public get vec(): Vec2 {\n        return this._vec.set(this.x, this.y);\n    }\n\n    public get vecPrev(): Vec2 {\n        return this._vecPrev.set(this.prev_x, this.prev_y);\n    }\n}\n\n/**\n * Touch pad planet camera dragging control.\n */\nexport class TouchNavigation extends Control {\n\n    public grabbedPoint: Vec3;\n    public inertia: number;\n\n    protected grabbedSpheroid: Sphere;\n    protected qRot: Quat;\n    protected scaleRot: number;\n    protected rot: number;\n    protected _eye0: Vec3;\n    protected pointOnEarth: Vec3 | null;\n    protected earthUp: Vec3 | null;\n    protected touches: TouchExt[];\n    protected _keyLock: Key;\n    protected _touching: boolean;\n\n\n    constructor(options: ITouchNavigationParams = {}) {\n        super(options);\n\n        this._name = \"touchNavigation\";\n\n        this.grabbedPoint = new Vec3();\n        this.inertia = 0.007;\n        this.grabbedSpheroid = new Sphere();\n        this.planet = null;\n        this.qRot = new Quat();\n        this.scaleRot = 0;\n        this.rot = 1;\n        this._eye0 = new Vec3();\n\n        this.pointOnEarth = null;\n        this.earthUp = null;\n\n        this.touches = [new TouchExt(), new TouchExt()];\n\n        this._keyLock = new Key();\n\n        this._touching = false;\n    }\n\n    override oninit() {\n        if (this.renderer) {\n            this.renderer.events.on(\"touchstart\", this.onTouchStart, this);\n            this.renderer.events.on(\"touchend\", this.onTouchEnd, this);\n            this.renderer.events.on(\"doubletouch\", this.onDoubleTouch, this);\n            this.renderer.events.on(\"touchcancel\", this.onTouchCancel, this);\n            this.renderer.events.on(\"touchmove\", this.onTouchMove, this);\n            this.renderer.events.on(\"draw\", this.onDraw, this);\n        }\n    }\n\n    protected onTouchStart(e: ITouchState) {\n        const handler = this.renderer!.handler;\n        this._touching = true;\n\n        if (e.sys!.touches.length === 2) {\n            const t0 = this.touches[0];\n            const t1 = this.touches[1];\n\n            t0.x = (e.sys!.touches.item(0)!.clientX - e.sys!.offsetLeft) * handler.pixelRatio;\n            t0.y = (e.sys!.touches.item(0)!.clientY - e.sys!.offsetTop) * handler.pixelRatio;\n            t0.prev_x = t0.x;\n            t0.prev_y = t0.y;\n\n            t0.grabbedPoint = this.planet!.getCartesianFromPixelTerrain(new Vec2(t0.x, t0.y)) || null;\n\n            t1.x = (e.sys!.touches.item(1)!.clientX - e.sys!.offsetLeft) * handler.pixelRatio;\n            t1.y = (e.sys!.touches.item(1)!.clientY - e.sys!.offsetTop) * handler.pixelRatio;\n            t1.prev_x = t1.x;\n            t1.prev_y = t1.y;\n\n            t1.grabbedPoint = this.planet!.getCartesianFromPixelTerrain(new Vec2(t1.x, t1.y)) || null;\n\n            this.pointOnEarth = this.planet!.getCartesianFromPixelTerrain(\n                this.renderer!.handler.getCenter()\n            ) || null;\n\n            if (this.pointOnEarth) {\n                this.earthUp = this.pointOnEarth.normal();\n            }\n\n            if (t0.grabbedPoint && t1.grabbedPoint) {\n                t0.grabbedSpheroid.radius = t0.grabbedPoint.length();\n                t1.grabbedSpheroid.radius = t1.grabbedPoint.length();\n                this.stopRotation();\n            }\n        } else if (e.sys!.touches.length === 1) {\n            this._startTouchOne(e);\n        }\n    }\n\n    protected _startTouchOne(e: ITouchState) {\n        const t = this.touches[0];\n        const handler = this.renderer!.handler;\n\n        t.x = (e.sys!.touches.item(0)!.clientX - e.sys!.offsetLeft) * handler.pixelRatio;\n        t.y = (e.sys!.touches.item(0)!.clientY - e.sys!.offsetTop) * handler.pixelRatio;\n        t.prev_x = t.x;\n        t.prev_y = t.y;\n\n        // t.grabbedPoint = this.planet!.getCartesianFromPixelTerrain(e, true);\n        t.grabbedPoint = this.planet!.getCartesianFromPixelTerrain(e) || null;\n        this._eye0.copy(this.planet!.camera.eye);\n\n        if (t.grabbedPoint) {\n            t.grabbedSpheroid.radius = t.grabbedPoint.length();\n            this.stopRotation();\n        }\n    }\n\n    public stopRotation() {\n        this.qRot.clear();\n        this.planet!.layerLock.free(this._keyLock);\n        this.planet!.terrainLock.free(this._keyLock);\n        this.planet!._normalMapCreator.free(this._keyLock);\n    }\n\n    protected onDoubleTouch(e: ITouchState) {\n\n        this.planet!.stopFlying();\n        this.stopRotation();\n\n        const p = this.planet!.getCartesianFromPixelTerrain(e);\n        if (p) {\n            const g = this.planet!.ellipsoid.cartesianToLonLat(p);\n            this.planet!.flyLonLat(\n                new LonLat(g.lon, g.lat, this.planet!.camera.eye.distance(p) * 0.57)\n            );\n        }\n    }\n\n    protected onTouchEnd(e: ITouchState) {\n        if (e.sys!.touches.length === 0) {\n            this._touching = false;\n        }\n\n        if (e.sys!.touches.length === 1) {\n            this._startTouchOne(e);\n        }\n\n        if (\n            Math.abs(this.touches[0].x - this.touches[0].prev_x) < 3 &&\n            Math.abs(this.touches[0].y - this.touches[0].prev_y) < 3\n        ) {\n            this.scaleRot = 0;\n        }\n    }\n\n    protected onTouchCancel(e: ITouchState) {\n    }\n\n    protected onTouchMove(e: ITouchState) {\n        let cam = this.planet!.camera;\n        const handler = this.renderer!.handler;\n        if (e.sys!.touches.length === 2) {\n            this.renderer!.controlsBag.scaleRot = 1;\n\n            let t0 = this.touches[0],\n                t1 = this.touches[1];\n\n            if (!t0.grabbedPoint || !t1.grabbedPoint) {\n                return;\n            }\n\n            this.planet!.stopFlying();\n\n            t0.prev_x = t0.x;\n            t0.prev_y = t0.y;\n            t0.x = (e.sys!.touches.item(0)!.clientX - e.sys!.offsetLeft) * handler.pixelRatio;\n            t0.y = (e.sys!.touches.item(0)!.clientY - e.sys!.offsetTop) * handler.pixelRatio;\n\n            t1.prev_x = t1.x;\n            t1.prev_y = t1.y;\n            t1.x = (e.sys!.touches.item(1)!.clientX - e.sys!.offsetLeft) * handler.pixelRatio;\n            t1.y = (e.sys!.touches.item(1)!.clientY - e.sys!.offsetTop) * handler.pixelRatio;\n\n            const middle = t0.vec.add(t1.vec).scale(0.5);\n            const earthMiddlePoint = this.planet!.getCartesianFromPixelTerrain(\n                middle\n            );\n            if (earthMiddlePoint) {\n                this.pointOnEarth = earthMiddlePoint\n\n                const prevAngle = Math.atan2(t0.prev_y - t1.prev_y, t0.prev_x - t1.prev_x)\n                const curAngle = Math.atan2(t0.y - t1.y, t0.x - t1.x)\n\n                const deltaAngle = curAngle - prevAngle;\n                const distanceToPointOnEarth = cam.eye.distance(this.pointOnEarth);\n\n                const zoomCur = t0.vec.sub(t1.vec);\n                const zoomPrev = t0.vecPrev.sub(t1.vecPrev);\n                const scale = zoomCur.length() / zoomPrev.length();\n\n                let d = distanceToPointOnEarth * -(1 - scale);\n                cam.eye.addA(cam.getForward().scale(d));\n                cam.rotateAround(-deltaAngle, false, this.pointOnEarth, this.earthUp);\n\n                const panCur = t0.vec.add(t1.vec).scale(0.5);\n                const panPrev = t0.vecPrev.add(t1.vecPrev).scale(0.5);\n                const panOffset = panCur.sub(panPrev).scale(-1);\n                var l = 0.5 / distanceToPointOnEarth * cam._lonLat.height * math.RADIANS;\n                if (l > 0.003) l = 0.003;\n                cam.rotateHorizontal(l * -panOffset.x, false, this.pointOnEarth, this.earthUp);\n                cam.rotateVertical(l * -panOffset.y, this.pointOnEarth);\n\n                cam.checkTerrainCollision();\n                cam.update();\n            }\n            this.scaleRot = 0;\n        } else if (e.sys!.touches.length === 1) {\n            let t = this.touches[0];\n\n            t.prev_x = t.x;\n            t.prev_y = t.y;\n            t.x = (e.sys!.touches.item(0)!.clientX - e.sys!.offsetLeft) * handler.pixelRatio;\n            t.y = (e.sys!.touches.item(0)!.clientY - e.sys!.offsetTop) * handler.pixelRatio;\n\n            if (!t.grabbedPoint) {\n                return;\n            }\n\n            this.planet!.stopFlying();\n\n            let direction = e.direction\n            let targetPoint = new Ray(cam.eye, direction).hitSphere(t.grabbedSpheroid);\n\n            if (targetPoint) {\n                if (cam.slope > 0.2) {\n                    this.qRot = Quat.getRotationBetweenVectors(\n                        targetPoint.normal(),\n                        t.grabbedPoint.normal()\n                    );\n                    let rot = this.qRot;\n                    cam.eye = rot.mulVec3(cam.eye);\n                    cam._r = rot.mulVec3(cam._r);\n                    cam._u = rot.mulVec3(cam._u);\n                    cam._b = rot.mulVec3(cam._b);\n                    cam.checkTerrainCollision();\n                    cam.update();\n                    this.scaleRot = 1;\n                } else {\n                    let p0 = t.grabbedPoint,\n                        p1 = Vec3.add(p0, cam._u),\n                        p2 = Vec3.add(p0, p0.normal());\n                    let dir = cam.unproject(t.x, t.y);\n                    let px = new Vec3();\n                    if (new Ray(cam.eye, dir).hitPlane(p0, p1, p2, px) === Ray.INSIDE) {\n                        cam.eye = this._eye0.addA(px.subA(p0).negate());\n                        cam.checkTerrainCollision();\n                        cam.update();\n                        this.scaleRot = 0;\n                    }\n                }\n            }\n        }\n    }\n\n    protected onDraw() {\n\n        const r = this.renderer!;\n\n        r.controlsBag.scaleRot = this.scaleRot;\n\n        if (this._touching) {\n            return;\n        }\n\n        let cam = this.planet!.camera;\n        let prevEye = cam.eye.clone();\n\n        if (r.events.mouseState.leftButtonDown || !this.scaleRot) {\n            return;\n        }\n\n        this.scaleRot -= this.inertia;\n        if (this.scaleRot <= 0) {\n            this.scaleRot = 0;\n        } else {\n            r.controlsBag.scaleRot = this.scaleRot;\n            let rot = this.qRot\n                .slerp(Quat.IDENTITY, 1 - this.scaleRot * this.scaleRot * this.scaleRot)\n                .normalize();\n            if (!(rot.x || rot.y || rot.z)) {\n                this.scaleRot = 0;\n            }\n            cam.eye = rot.mulVec3(cam.eye);\n            cam._r = rot.mulVec3(cam._r);\n            cam._u = rot.mulVec3(cam._u);\n            cam._b = rot.mulVec3(cam._b);\n            cam.checkTerrainCollision();\n            cam.update();\n        }\n\n        if (cam.eye.distance(prevEye) / cam.getAltitude() > 0.01) {\n            this.planet!.layerLock.lock(this._keyLock);\n            this.planet!.terrainLock.lock(this._keyLock);\n            this.planet!._normalMapCreator.lock(this._keyLock);\n        } else {\n            this.planet!.layerLock.free(this._keyLock);\n            this.planet!.terrainLock.free(this._keyLock);\n            this.planet!._normalMapCreator.free(this._keyLock);\n        }\n    }\n}\n","import {Key} from \"../Lock\";\nimport {Button} from \"../ui/Button\";\nimport {Control, IControlParams} from \"./Control\";\nimport {Renderer} from \"../renderer/Renderer\";\nimport {Vec2} from \"../math/Vec2\";\n\nconst ICON_PLUS_SVG = '<?xml version=\"1.0\"?>' +\n    '<svg width=24 height=24 xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">' +\n    '    <path d=\"M 11 5 L 11 11 L 5 11 L 5 13 L 11 13 L 11 19 L 13 19 L 13 13 L 19 13 L 19 11 L 13 11 L 13 5 L 11 5 z\"/>' +\n    '</svg>';\n\nconst ICON_MINUS_SVG = '<?xml version=\"1.0\"?>' +\n    '<svg width=24 height=24 xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">' +\n    '    <path d=\"M 5 11 L 5 13 L 19 13 L 19 11 L 5 11 z\"/>' +\n    '</svg>';\n\n/**\n * Planet zoom buttons control.\n */\nclass ZoomControl extends Control {\n    protected _keyLock: Key;\n    protected _move: number;\n    protected _targetPoint: Vec2 | null;\n\n    constructor(options: IControlParams = {}) {\n        super(options);\n        this._keyLock = new Key();\n        this._move = 0;\n        this._targetPoint = null;\n    }\n\n    public override oninit() {\n\n        let zoomInBtn = new Button({\n            classList: [\"og-map-button\", \"og-zoomin-button\"],\n            icon: ICON_PLUS_SVG\n        });\n        zoomInBtn.appendTo(this.renderer!.div!);\n\n\n        let zoomOutBtn = new Button({\n            classList: [\"og-map-button\", \"og-zoomout-button\"],\n            icon: ICON_MINUS_SVG\n        });\n        zoomOutBtn.appendTo(this.renderer!.div!);\n\n        zoomInBtn.events.on(\"mousedown\", () => this.zoomIn());\n        zoomInBtn.events.on(\"mouseup\", () => this.stopZoom());\n        zoomOutBtn.events.on(\"mousedown\", () => this.zoomOut());\n        zoomOutBtn.events.on(\"mouseup\", () => this.stopZoom());\n        zoomInBtn.events.on(\"touchstart\", () => this.zoomIn());\n        zoomInBtn.events.on(\"touchend\", () => this.stopZoom());\n        zoomInBtn.events.on(\"touchcancel\", () => this.stopZoom());\n        zoomOutBtn.events.on(\"touchstart\", () => this.zoomOut());\n        zoomOutBtn.events.on(\"touchend\", () => this.stopZoom());\n        zoomOutBtn.events.on(\"touchcancel\", () => this.stopZoom());\n\n        this.renderer!.events.on(\"draw\", this._draw, this);\n    }\n\n    /**\n     * Planet zoom in.\n     * @public\n     */\n    public zoomIn() {\n        this.planet!.layerLock.lock(this._keyLock);\n        this.planet!.terrainLock.lock(this._keyLock);\n        this.planet!._normalMapCreator.lock(this._keyLock);\n\n        this._targetPoint = this.renderer!.getCenter();\n\n        this._move = 1;\n    }\n\n    /**\n     * Planet zoom out.\n     * @public\n     */\n    zoomOut() {\n        this.planet!.layerLock.lock(this._keyLock);\n        this.planet!.terrainLock.lock(this._keyLock);\n        this.planet!._normalMapCreator.lock(this._keyLock);\n\n        this._targetPoint = this.renderer!.getCenter();\n        this._move = -1;\n    }\n\n    public stopZoom() {\n        this._move = 0;\n\n        this.planet!.layerLock.free(this._keyLock);\n        this.planet!.terrainLock.free(this._keyLock);\n        this.planet!._normalMapCreator.free(this._keyLock);\n    }\n\n    protected _draw(e: Renderer) {\n        const cam = this.planet!.camera;\n\n        if (this._move !== 0) {\n            const pos = this.planet!.getCartesianFromPixelTerrain(e.getCenter());\n            if (pos) {\n                let d = cam.eye.distance(pos) * 0.035;\n                cam.eye.addA(cam.getForward().scale(this._move * d));\n                cam.checkTerrainCollision();\n                cam.update();\n            }\n        }\n    }\n}\n\nexport {ZoomControl};\n","import { Entity } from '../../entity/Entity';\nimport { Events } from '../../Events';\nimport { Vector } from '../../layer/Vector';\nimport { LonLat } from '../../LonLat';\nimport { Object3d } from '../../Object3d';\nimport { RenderNode } from '../../scene/RenderNode';\n\nconst OUTLINE_COUNT = 120;\n\nconst MAX_SCALE = 0.005;\nconst MIN_SCALE = 0.001;\nconst MAX_SCALE_HEIGHT = 3000.0;\nconst MIN_SCALE_HEIGHT = 19000000.0;\n\nfunction distanceFormat(v: number) {\n    if (v > 1000) {\n        return `${(v / 1000).toFixed(1)} km`;\n    } else if (v > 9) {\n        return `${Math.round(v)} m`;\n    } else {\n        return `${v.toFixed(1)} m`;\n    }\n}\n\nclass SelectionScene extends RenderNode {\n    events: Events<string[]>;\n    _ignoreTerrain = false;\n    _onSelect: any;\n    _autoSelectionHide: any;\n    _planet: any;\n    _startLonLat: any;\n    _heading: number;\n    _propsLabel: Entity;\n    _trackEntity: Entity;\n    _cornerEntity: Entity[];\n    _trackLayer: Vector;\n    _cornersLayer: Vector;\n    _onMouseMove_: any;\n    _onMouseLdown_: any;\n    _onMouseLup_: any;\n    _pickedCorner: any;\n    _anchorLonLat: any;\n    constructor(options: { name?: string, ignoreTerrain?: boolean, onSelect?: any, autoSelectionHide?: boolean, planet?: any } = {}) {\n        super(options.name);\n\n        this.events = new Events(EVENT_NAMES);\n\n        this._ignoreTerrain = options.ignoreTerrain != undefined ? options.ignoreTerrain : true;\n\n        this._onSelect = options.onSelect || null;\n\n        this._autoSelectionHide = options.autoSelectionHide || false;\n\n        this._planet = options.planet || null;\n\n        this._startLonLat = null;\n\n        this._heading = 0;\n\n        this._propsLabel = new Entity({\n            'name': 'propsLabel',\n            'label': {\n                text: \"\",\n                size: 11,\n                color: \"rgba(455,455,455,1.0)\",\n                outlineColor: \"rgba(0,0,0,0.34)\",\n                outline: 0.23,\n                align: \"center\",\n                offset: [0, 18]\n            }\n        } as any);\n\n        this._propsLabel?.label?.setVisibility(false);\n\n        this._trackEntity = new Entity({\n            polyline: {\n                path3v: [],\n                thickness: 3.8,\n                color: \"rgb(455,455,455)\",\n                isClosed: false\n            }\n        } as any);\n\n        (this._trackEntity as any).polyline.altitude = 0.01;\n\n        let obj3d = Object3d.createCylinder(1.1, 0, 2.7, 20, 1, true, false, 0, 0, 0)\n\n        this._cornerEntity = [\n            new Entity({\n                geoObject: {\n                    scale: 1,\n                    instanced: true,\n                    tag: \"selection\",\n                    color: \"rgb(0,305,0)\",\n                    object3d: obj3d\n                },\n                properties: {\n                    name: \"start\"\n                }\n            } as any),\n            new Entity({\n                geoObject: {\n                    scale: 1,\n                    instanced: true,\n                    tag: \"selection\",\n                    color: \"rgb(455,0,0)\",\n                    object3d: obj3d\n                },\n                properties: {\n                    name: \"end\"\n                }\n            } as any)\n        ];\n\n        this._trackLayer = new Vector(\"track\", {\n            entities: [this._trackEntity, this._propsLabel],\n            pickingEnabled: false,\n            polygonOffsetUnits: -1.0,\n            relativeToGround: true,\n            hideInLayerSwitcher: false\n        });\n\n        this._cornersLayer = new Vector(\"corners\", {\n            entities: [this._cornerEntity[0], this._cornerEntity[1]],\n            pickingEnabled: true,\n            hideInLayerSwitcher: true,\n            scaleByDistance: [1.0, 4000000, 0.01],\n            pickingScale: 2\n        });\n    }\n\n    set ignoreTerrain(v: boolean) {\n        this._ignoreTerrain = v;\n        if (v) {\n            //...redraw line\n        }\n    }\n\n    bindPlanet(planet: any) {\n        this._planet = planet;\n    }\n\n    override init() {\n        this._activate();\n    }\n\n    override onremove() {\n        this._deactivate();\n    }\n\n    _activate() {\n        this._propsLabel?.label?.setVisibility(false);\n\n        this._onMouseMove_ = this._onMouseMove.bind(this);\n        this.renderer?.events.on(\"mousemove\", this._onMouseMove_, this);\n\n        this._onMouseLdown_ = this._onMouseLdown.bind(this);\n        this.renderer?.events.on(\"ldown\", this._onMouseLdown_, this);\n\n        this._onMouseLup_ = this._onMouseLup.bind(this);\n        this.renderer?.events.on(\"lup\", this._onMouseLup_, this);\n\n        this._planet.addLayer(this._trackLayer);\n\n        this._planet.addLayer(this._cornersLayer);\n\n    }\n\n    _deactivate() {\n        this._startLonLat = null;\n        this._trackLayer.remove();\n        this._cornersLayer.remove();\n        this.renderer?.events.off(\"mousemove\", this._onMouseMove_);\n        this.renderer?.events.off(\"ldown\", this._onMouseLdown_);\n        this.renderer?.events.off(\"lup\", this._onMouseLup_);\n\n        this.clear();\n\n        this._onMouseMove_ = null;\n        this._onMouseLdown_ = null;\n        this._onMouseLup_ = null;\n    }\n\n    _onMouseLdown(e: any) {\n\n        //workaround to show pointer, because ogGrabbingPoiner keep !importanti which override pointer style\n        e.renderer.handler.canvas.classList.remove('ogGrabbingPoiner');\n\n        e.renderer.handler.canvas.style.cursor = 'pointer';\n\n        if (!this._startLonLat) {\n\n\n            this._propsLabel.label?.setVisibility(false);\n\n            this._trackEntity.polyline?.setPath3v([]);\n\n\n            this._cornerEntity[0].geoObject?.setVisibility(true);\n            this._cornerEntity[1].geoObject?.setVisibility(true);\n\n            this.renderer?.controls.mouseNavigation?.deactivate();\n            this._startLonLat = this._planet.getLonLatFromPixelTerrain(e);\n\n            let startPos = this._planet.ellipsoid.lonLatToCartesian(this._startLonLat);\n            this._cornerEntity[0].setCartesian3v(startPos);\n            this._cornerEntity[1].setCartesian3v(startPos);\n        }\n    }\n\n    _onMouseLup(e: any) {\n        if (this._startLonLat) {\n\n            this._pickedCorner = null;\n            this._anchorLonLat = null;\n\n            this._propsLabel.label?.setVisibility(true);\n\n            if (this._onSelect && typeof this._onSelect === 'function') {\n                let startLonLat = this._cornerEntity[0].getLonLat();\n                let endLonLat = this._cornerEntity[1].getLonLat();\n\n                let extent = [\n                    Math.min(startLonLat.lon, endLonLat.lon),\n                    Math.min(startLonLat.lat, endLonLat.lat),\n                    Math.max(startLonLat.lon, endLonLat.lon),\n                    Math.max(startLonLat.lat, endLonLat.lat)\n                ];\n                this._onSelect(extent);\n            }\n\n            if (this._autoSelectionHide) {\n                this.clear();\n            }\n\n            this._startLonLat = null;\n        }\n        e.renderer.handler.canvas.style.cursor = 'default';\n        this.renderer?.controls.mouseNavigation?.activate();\n    }\n\n    _drawLine(startLonLat: any, endLonLat: any, startPos?: any) {\n\n        if (!startPos) {\n            startPos = this._planet.ellipsoid.lonLatToCartesian(startLonLat);\n        }\n\n        let endPos = this._planet.ellipsoid.lonLatToCartesian(endLonLat);\n\n        let res = this._planet.ellipsoid.direct(startLonLat, endLonLat);\n\n        this._heading = res.initialAzimuth;\n\n        let path = [];\n\n        this._cornerEntity[0].setCartesian3v(startPos);\n        this._cornerEntity[1].setCartesian3v(endPos);\n\n        let corners = [\n            startPos,\n            this._planet.ellipsoid.lonLatToCartesian(new LonLat(endLonLat.lon, startLonLat.lat, startLonLat.height)),\n            endPos,\n            this._planet.ellipsoid.lonLatToCartesian(new LonLat(startLonLat.lon, endLonLat.lat, startLonLat.height)),\n            startPos\n        ];\n\n\n        path.push(startPos);\n\n        let createPath = (sideA: any, sideB: any) => {\n            let dir = sideB.sub(sideA);\n            let dist = dir.length();\n            dir.normalize();\n\n            for (let i = 0; i < OUTLINE_COUNT; i++) {\n                let f = dir.scaleTo(i * dist / OUTLINE_COUNT).addA(sideA);\n                path.push(f);\n            }\n        };\n\n        for (let i = 0; i < corners.length - 1; i++) {\n            createPath(corners[i], corners[i + 1]);\n        }\n\n        this._trackEntity.polyline?.setPath3v([path]);\n\n        if (this._ignoreTerrain) {\n            // this._propsLabel.setCartesian3v(path[Math.floor(path.length / 2)]);\n            // this._propsLabel.label.setText(`${distanceFormat(length)}, ${Math.round(this._heading)} deg`);\n        }\n    }\n\n    _onMouseMove(e: any) {\n        if (this._startLonLat) {\n            this._propsLabel.label?.setVisibility(true);\n            let endLonLat = this._planet.getLonLatFromPixelTerrain(e);\n            if (!endLonLat)\n                return;\n            this._drawLine(this._startLonLat, endLonLat);\n        }\n    }\n\n    clear() {\n        this._trackEntity.polyline?.clear();\n        this._cornerEntity[0].geoObject?.setVisibility(false);\n        this._cornerEntity[1].geoObject?.setVisibility(false);\n    }\n\n    override frame() {\n        let t = this._trackEntity.polyline?.getPath3v()[0];\n        if (t) {\n            if (!this._ignoreTerrain) {\n                let res = 0;\n                for (let i = 0, len = t.length - 1; i < len; i++) {\n                    res += (t[i + 1] as any).distance(t[i]);\n                }\n\n                this._propsLabel.setCartesian3v(t[Math.floor(t.length / 2)] as any);\n                this._propsLabel.label?.setText(`${distanceFormat(res)}, ${Math.round(this._heading)} deg`);\n            }\n        }\n    }\n\n    get ellipsoid() {\n        return this._planet ? this._planet.ellipsoid : null;\n    }\n}\n\nconst EVENT_NAMES = [\n    \"add\",\n    \"remove\",\n    \"mousemove\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"lclick\",\n    \"rclick\",\n    \"mclick\",\n    \"ldblclick\",\n    \"rdblclick\",\n    \"mdblclick\",\n    \"lup\",\n    \"rup\",\n    \"mup\",\n    \"ldown\",\n    \"rdown\",\n    \"mdown\",\n    \"lhold\",\n    \"rhold\",\n    \"mhold\",\n    \"mousewheel\",\n    \"touchmove\",\n    \"touchstart\",\n    \"touchend\",\n    \"doubletouch\",\n    \"touchleave\",\n    \"touchenter\"\n];\n\nexport { SelectionScene };\n","import {Control, IControlParams} from \"../Control\";\nimport {SelectionScene} from \"./SelectionScene\";\nimport {ToggleButton} from \"../../ui/ToggleButton\";\n\nconst ICON_BUTTON_SVG = `<?xml version=\"1.0\" encoding=\"utf-8\"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\n<svg width=\"800px\" height=\"800px\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" role=\"img\" class=\"iconify iconify--gis\" preserveAspectRatio=\"xMidYMid meet\"><path d=\"M2.1 0v1.914H0v6h3V3h5.1V0h-6zm9 0v3h6V0h-6zm9 0v3h6V0h-6zm9 0v3h6V0h-6zm9 0v3h6V0h-6zm9 0v3h6V0h-6zm9 0v3h6V0h-6zm9 0v3h1.8v1.2h3V0h-4.8zm1.8 7.2v6h3v-6h-3zM0 10.913v6h3v-6H0zM66.9 16.2v6h3v-6h-3zM0 19.914v6h3v-6H0zM66.9 25.2v6h3v-6h-3zM0 28.914v6h3v-6H0zM66.9 34.2v6h3v-6h-3zM0 37.914v6h3v-6H0zM66.9 43.2v6h3v-6h-3zM0 46.914v6h3v-6H0zM66.9 52.2v6h3v-6h-3zM0 55.914v5.191h3.809v-3H3v-2.19H0zm6.809 2.191v3h6v-3h-6zm9 0v3h6v-3h-6zm9 0v3h6v-3h-6zm9 0v3h6v-3h-6zm9 0v3h6v-3h-6zm9 0v3h6v-3h-6zm9 0v3h6v-3h-6zm9.648 1.899a2.076 2.076 0 0 0-2.19 2.324l3.137 33.676c.2 1.635 2.135 2.399 3.397 1.34l6.623-5.371l2.969 5.142c1.707 2.958 4.417 3.684 7.375 1.977c2.957-1.708 3.684-4.417 1.976-7.375l-2.959-5.125l7.848-3.008c1.548-.564 1.855-2.62.539-3.611L71.576 60.416a2.073 2.073 0 0 0-1.119-.412z\" fill=\"#000000\"></path></svg>`;\n\ninterface ISelectionParams extends IControlParams {\n    ignoreTerrain?: boolean;\n    onSelect?: boolean;\n    autoSelectionHide?: boolean\n}\n\n/**\n * Activate Selection\n * @param {boolean} [options.ignoreTerrain=false].\n * @param {function} options.onSelect - callback (extent) => {} where extent is selected extent array [minLon,minLat,maxLon,maxLat]\n * @param {boolean} [options.autoSelectionHide=false] - clear selection rectangle  after passing extent to callback\n * @example:\n * to use bootstrap icons, include\n *  <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css\">\n *\n * new Selection({\n *       ignoreTerrain: false,\n *       autoSelectionHide:true,\n *       onSelect: (extent) => {\n *\n *           var vectorSource = new ol.source.Vector({\n *               format: new GeoJSON(),\n *               url: function (extent) {\n *                   return 'https://snap.ogs.trieste.it/geoserver/snap/ows?service=WFS&' +\n *                           'version=1.1.0&request=GetFeature&typename=snap:all_dataset_segy_view&' +\n *                           'outputFormat=application/json&srsname=EPSG:4326&' +\n *                           'bbox=' + extent.join(',') + ',EPSG:4326';\n *               },\n *               strategy: function (extent, resolution) {\n *                   if (this.resolution && this.resolution != resolution) {\n *                       this.loadedExtentsRtree_.clear();\n *                   }\n *                   return [extent];\n *               }\n *           });\n *\n *           vectorSource.loadFeatures(extent);\n *           \n *           console.log(extent);\n *\n *       }\n *   });\n */\nexport class Selection extends Control {\n    protected _selectorScene: SelectionScene;\n    protected _toggleBtn: ToggleButton;\n\n    constructor(options: ISelectionParams = {}) {\n        super(options);\n\n        this._selectorScene = new SelectionScene({\n            name: `selectionScene:${this.__id}`,\n            ignoreTerrain: options.ignoreTerrain,\n            onSelect: options.onSelect,\n            autoSelectionHide: options.autoSelectionHide\n        });\n\n\n        this._toggleBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-selection_button\"],\n            icon: ICON_BUTTON_SVG\n        });\n    }\n\n    public set ignoreTerrain(v: boolean) {\n        this._selectorScene.ignoreTerrain = v;\n    }\n\n    public override oninit() {\n        this._toggleBtn.appendTo(this.renderer!.div!);\n\n        this._toggleBtn.events.on(\"change\", (isActive: boolean) => {\n            if (isActive) {\n                this.activate();\n            } else {\n                this.deactivate();\n            }\n        });\n\n        this._selectorScene.bindPlanet(this.planet);\n    }\n\n    public override onactivate() {\n        this.renderer!.addNode(this._selectorScene);\n    }\n\n    override ondeactivate() {\n        this.renderer!.removeNode(this._selectorScene);\n    }\n}\n","import * as math from '../../math';\n\ntype BaselineType = \"alphabetic\" | \"bottom\" | \"hanging\" | \"ideographic\" | \"middle\" | \"top\";\ntype AlignType = \"center\" | \"end\" | \"left\" | \"right\" | \"start\";\n\nexport function addSeconds(date: Date, seconds: number): Date {\n    return new Date(+date + seconds * 1000);\n}\n\nexport function dateToStr(date: Date, showTime: boolean = true, showMilliseconds: boolean = false): string {\n\n    let month = MONTHS[date.getMonth()],\n        day = date.getUTCDate(),\n        year = date.getUTCFullYear();\n\n    if (showTime) {\n        let h = date.getUTCHours().toString().padStart(2, '0'),\n            m = date.getUTCMinutes().toString().padStart(2, '0'),\n            s = date.getUTCSeconds().toString().padStart(2, '0');\n\n        if (showMilliseconds) {\n            let ms = date.getUTCMilliseconds().toString().padStart(3, '0');\n            return `${month} ${day} ${year} ${h}:${m}:${s}.${ms}`;\n        }\n\n        return `${month} ${day} ${year} ${h}:${m}:${s}`;\n    }\n\n    return `${month} ${day} ${year}`;\n}\n\nexport function createCanvasHTML(): HTMLCanvasElement {\n    return document.createElement(\"canvas\");\n}\n\nexport function getNearestTimeLeft(t: number, div: number): number {\n    return t - (t % div);\n}\n\nexport function drawNotch(ctx: CanvasRenderingContext2D, xOffset: number = 0, size: number = 10, thickness: number = 2, color: string = \"white\") {\n    ctx.lineWidth = thickness;\n    ctx.strokeStyle = color;\n    ctx.beginPath();\n    ctx.moveTo(xOffset, 0);\n    ctx.lineTo(xOffset, size);\n    ctx.stroke();\n}\n\nexport function drawText(ctx: CanvasRenderingContext2D, text: string, x: number, y: number, font: string = \"12px Arial\", fillStyle: string = \"black\", align: AlignType = \"left\", baseLine: BaselineType = \"bottom\", rotDeg: number = 0) {\n    ctx.save();\n    ctx.translate(x, y);\n    ctx.rotate(rotDeg * math.RADIANS);\n    ctx.fillStyle = fillStyle;\n    ctx.textBaseline = baseLine;\n    ctx.font = font;\n    ctx.textAlign = align;\n    ctx.fillText(text, 0, 0);\n    ctx.restore();\n}\n\nexport const SCALES: [number, number][] = [\n    [0.001, 10],\n    [0.002, 10],\n    [0.005, 10],\n    [0.01, 10],\n    [0.02, 10],\n    [0.05, 10],\n    [0.1, 10],\n    [0.25, 10],\n    [0.5, 5],\n    [1.0, 10],\n    [2.0, 10],\n    [5.0, 5],\n    [10.0, 10],\n    [15.0, 15],\n    [30.0, 6],\n    [60.0, 12], // 1min\n    [120.0, 12], // 2min\n    [300.0, 5], // 5min\n    [600.0, 10], // 10min\n    [900.0, 15], // 15min\n    [1800.0, 6], // 30min\n    [3600.0, 12], // 1hr\n    [7200.0, 10], // 2hr\n    [14400.0, 4], // 4hr\n    [21600.0, 6], // 6hr\n    [43200.0, 12], // 12hr\n    [86400.0, 24], // 24hr\n    [172800.0, 2], // 2days\n    [345600.0, 4], // 4days\n    [604800.0, 7], // 7days\n    [1296000.0, 15], // 15days\n    [2592000.0, 5], // 30days\n    [5184000.0, 6], // 60days\n    [7776000.0, 9], // 90days\n    [15552000.0, 18], // 180days\n    [31536000.0, 12], // 365days\n    [63072000.0, 2], // 2years\n    [126144000.0, 4], // 4years\n    [157680000.0, 5], // 5years\n    [315360000.0, 10], // 10years\n    [630720000.0, 2], // 20years\n    [1261440000.0, 4], // 40years\n    [1576800000.0, 5], // 50years\n    [3153600000.0, 10], // 100years\n    [6307200000.0, 2], // 200years\n    [12614400000.0, 4], // 400years\n    [15768000000.0, 5], // 500years\n    [31536000000.0, 10], // 1000years\n];\n\nexport function getScale(seconds: number) {\n    for (let i = 0, len = SCALES.length; i < len; i++) {\n        if (SCALES[i][0] > seconds) {\n            return SCALES[i - 1];\n        }\n    }\n}\n\nexport const MONTHS = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n];\n","import {EventsHandler, createEvents} from '../../Events';\nimport {addSeconds} from \"./timelineUtils\";\n\ntype TimelineEventsList = [\"change\", \"current\"];\n\nconst TIMELINE_EVENTS: TimelineEventsList = [\"change\", \"current\"/*, \"tick\"*/];\n\ninterface ITimelineParams {\n    current?: Date;\n    rangeStart?: Date;\n    rangeEnd?: Date;\n    minDate?: Date | null;\n    maxDate?: Date | null;\n    multiplier?: number\n}\n\nclass TimelineModel {\n    public events: EventsHandler<TimelineEventsList>;\n    protected _current: Date;\n    protected _rangeStart: Date;\n    protected _rangeEnd: Date;\n    protected _range: number;\n    protected _minDate: Date | null;\n    protected _maxDate: Date | null;\n    protected _requestAnimationFrameId: number;\n    protected _prevNow: number;\n\n    public multiplier: number;\n    public dt: number;\n\n    constructor(options: ITimelineParams = {}) {\n\n        this.events = createEvents(TIMELINE_EVENTS);\n\n        this._current = options.current || new Date();\n        this._rangeStart = options.rangeStart || new Date();\n        this._rangeEnd = options.rangeEnd || addSeconds(this._rangeStart, 3600);\n        this._range = this._rangeEnd.getTime() - this._rangeStart.getTime();\n        this._minDate = options.minDate || null;\n        this._maxDate = options.maxDate || null;\n\n        this.multiplier = options.multiplier != undefined ? options.multiplier : 1.0;\n\n        this._requestAnimationFrameId = 0;\n        this._prevNow = 0;\n\n        this.dt = 0;\n    }\n\n    public play() {\n        if (!this._requestAnimationFrameId) {\n            this._prevNow = window.performance.now();\n            this._animationFrameCallback();\n        }\n    }\n\n    public stop() {\n        if (this._requestAnimationFrameId) {\n            window.cancelAnimationFrame(this._requestAnimationFrameId);\n            this._requestAnimationFrameId = 0;\n        }\n    }\n\n    public stopped() {\n        return this._requestAnimationFrameId == 0;\n    }\n\n    protected _animationFrameCallback() {\n        this._requestAnimationFrameId = window.requestAnimationFrame(() => {\n            this._frame();\n            this._animationFrameCallback();\n        });\n    }\n\n    protected _frame() {\n        let now = window.performance.now();\n        this.dt = now - this._prevNow;\n        this._prevNow = now;\n\n        this.current = new Date(this.currentTime + this.dt * this.multiplier);\n\n        // this._events.dispatch(this._events.tick, this._current);\n    }\n\n    public get range(): number {\n        return this._range\n    }\n\n    public set(rangeStart: Date, rangeEnd: Date) {\n        if (rangeStart !== this._rangeStart || rangeEnd !== this._rangeEnd) {\n            this._rangeStart = rangeStart;\n            this._rangeEnd = rangeEnd;\n            this._range = this._rangeEnd.getTime() - this._rangeStart.getTime();\n            this.events.dispatch(this.events.change, rangeStart, rangeEnd);\n        }\n    }\n\n    public get current(): Date {\n        return this._current;\n    }\n\n    public get rangeStart(): Date {\n        return this._rangeStart;\n    }\n\n    public get rangeEnd(): Date {\n        return this._rangeEnd;\n    }\n\n    public get rangeStartTime(): number {\n        return this._rangeStart.getTime();\n    }\n\n    public get rangeEndTime(): number {\n        return this._rangeEnd.getTime();\n    }\n\n    public get currentTime(): number {\n        return this._current.getTime();\n    }\n\n    public set current(current: Date) {\n        if (current !== this._current) {\n            if (this._maxDate && current > this._maxDate) {\n                this._current = this._maxDate;\n            } else if (this._minDate && current < this._minDate) {\n                this._current = this._minDate;\n            } else {\n                this._current = current;\n            }\n            this.events.dispatch(this.events.current, this._current);\n        }\n    }\n\n    public set rangeStart(date: Date) {\n        if (date !== this._rangeStart) {\n            this._rangeStart = date;\n            this._range = this._rangeEnd.getTime() - this._rangeStart.getTime();\n            this.events.dispatch(this.events.change, date);\n        }\n    }\n\n    public set rangeEnd(date: Date) {\n        if (date !== this._rangeEnd) {\n            this._rangeEnd = date;\n            this._range = this._rangeEnd.getTime() - this._rangeStart.getTime();\n            this.events.dispatch(this.events.change, date);\n        }\n    }\n}\n\nexport {TimelineModel};\n","import {EventsHandler} from \"../../Events\";\nimport {ButtonGroup} from \"../../ui/ButtonGroup\";\nimport {IViewParams, View, ViewEventsList} from '../../ui/View';\nimport {ToggleButton} from \"../../ui/ToggleButton\";\nimport {TimelineModel} from './TimelineModel';\nimport {\n    addSeconds,\n    createCanvasHTML,\n    dateToStr,\n    drawNotch,\n    drawText,\n    getNearestTimeLeft,\n    getScale\n} from './timelineUtils';\nimport {MouseEventExt} from \"../../input/MouseHandler\";\n\ninterface ITimelineViewParams extends IViewParams {\n    currentDate?: Date;\n    rangeStart?: Date;\n    rangeEnd?: Date;\n    minDate?: Date;\n    maxDate?: Date;\n    fillStyle?: string\n}\n\nconst SECONDS_TO_MILLISECONDS = 1000.0;\nconst MILLISECONDS_TO_SECONDS = 1.0 / SECONDS_TO_MILLISECONDS;\n\ntype TimelineViewEventsList = [\n    'startdrag',\n    'stopdrag',\n    'startdragcurrent',\n    'stopdragcurrent',\n    'setcurrent',\n    'reset',\n    'play',\n    'playback',\n    'pause',\n    'visibility'\n];\n\nconst TIMELINEVIEW_EVENTS: TimelineViewEventsList = [\n    'startdrag',\n    'stopdrag',\n    'startdragcurrent',\n    'stopdragcurrent',\n    'setcurrent',\n    'reset',\n    'play',\n    'playback',\n    'pause',\n    'visibility'\n];\n\nconst ICON_PLAY_SVG = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M8 5v14l11-7z\" style=\"fill: black;\"/></svg>';\nconst ICON_PAUSE_SVG = '<?xml version=\"1.0\" ?><!DOCTYPE svg  PUBLIC \\'-//W3C//DTD SVG 1.1//EN\\'  \\'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\'><svg enable-background=\"new 0 0 512 512\" height=\"512px\" version=\"1.1\" viewBox=\"0 0 512 512\" width=\"512px\" xml:space=\"preserve\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g id=\"Layer_6\"><rect fill=\"#252525\" height=\"320\" width=\"60\" x=\"153\" y=\"96\"/><rect fill=\"#252525\" height=\"320\" width=\"60\" x=\"299\" y=\"96\"/></g></svg>';\n\nconst SCALE_FILL_COLOR = \"rgba(64, 59, 59, 1.0)\";\nconst SCALE_NOTCH_COLOR = \"#bfbfbf\";\nconst SCALE_TIME_COLOR = \"#bfbfbf\";\n\nconst TEMPLATE =\n    `<div class=\"og-timeline\">\n\n  <div class=\"og-timeline-top\">\n  </div>\n\n  <div class=\"og-timeline-frame\">\n    <div class=\"og-timeline-current\">\n      <div class=\"og-timeline-current-spin\">\n        <div class=\"og-timeline-current-arrow\"></div>\n      </div>\n    </div>\n    <div class=\"og-timeline-scale\"></div>\n  </div>\n\n  <div class=\"og-timeline-bottom\">\n    <div class=\"og-timeline-controls\">\n    </div>\n  </div>\n\n</div>`;\n\n\nclass TimelineView extends View<TimelineModel> {\n\n    public override events: EventsHandler<TimelineViewEventsList> & EventsHandler<ViewEventsList>;\n    public fillStyle: string;\n    public $controls: HTMLElement | null;\n    protected _frameEl: HTMLElement | null;\n    protected _currentEl: HTMLElement | null;\n    protected _canvasEl: HTMLCanvasElement;\n    protected _ctx: CanvasRenderingContext2D;\n    protected _isMouseOver: boolean;\n    protected _isDragging: boolean;\n    protected _isCurrentDragging: boolean;\n    protected _isCurrentMouseOver: boolean;\n    protected _minWidth: number;\n    protected _canvasScale: number;\n    protected _millisecondsInPixel: number;\n    protected _clickPosX: number;\n    protected _clickRangeStart: Date;\n    protected _clickRangeEnd: Date;\n    protected _clickCurrentDate: Date;\n    protected _clickTime: number;\n    protected _clickDelay: number;\n    protected _onResizeObserver_: () => void;\n    protected _resizeObserver: ResizeObserver;\n    protected _pauseBtn: ToggleButton;\n    protected _playBtn: ToggleButton;\n    protected _buttons: ButtonGroup;\n    protected _visibility: boolean;\n\n    constructor(options: ITimelineViewParams = {}) {\n        super({\n            template: TEMPLATE,\n            model: new TimelineModel({\n                rangeStart: options.rangeStart,\n                rangeEnd: options.rangeEnd,\n                current: options.currentDate,\n                minDate: options.minDate,\n                maxDate: options.maxDate\n            })\n        });\n\n        //@ts-ignore\n        this.events = this.events.registerNames(TIMELINEVIEW_EVENTS);\n\n        this.fillStyle = options.fillStyle || SCALE_FILL_COLOR;\n\n        this.$controls = null;\n\n        this._frameEl = null;\n        this._currentEl = null;\n        this._canvasEl = createCanvasHTML();\n        this._ctx = this._canvasEl.getContext('2d')!;\n\n        this._isMouseOver = false;\n        this._isDragging = false;\n        this._isCurrentDragging = false;\n        this._isCurrentMouseOver = false;\n\n        this._minWidth = 330;\n        this._canvasScale = 2;\n\n        this._millisecondsInPixel = 0;\n\n        this._clickPosX = 0;\n        this._clickRangeStart = new Date();\n        this._clickRangeEnd = new Date();\n        this._clickCurrentDate = new Date();\n\n        this._clickTime = 0;\n        this._clickDelay = 450;\n\n        this._onResizeObserver_ = this._onResizeObserver.bind(this);\n        this._resizeObserver = new ResizeObserver(this._onResizeObserver_);\n\n        this._pauseBtn = new ToggleButton({\n            classList: [\"og-timeline-control_button\"],\n            icon: ICON_PAUSE_SVG,\n            name: \"pause\"\n        });\n\n        this._playBtn = new ToggleButton({\n            classList: [\"og-timeline-control_button\"],\n            icon: ICON_PLAY_SVG,\n            name: \"play\"\n        });\n\n        this._buttons = new ButtonGroup({\n            buttons: [this._pauseBtn, this._playBtn]\n        })\n\n        this._visibility = false;\n    }\n\n    protected _onResizeObserver() {\n        this.resize();\n    }\n\n    public get canvasScale(): number {\n        return this._canvasScale;\n    }\n\n    public set canvasScale(scale: number) {\n        if (scale !== this._canvasScale) {\n            this._canvasScale = scale;\n            this.resize();\n        }\n    }\n\n    public resize() {\n        this._resize();\n        this.draw();\n    }\n\n    public override afterRender(parentNode: HTMLElement) {\n        this.resize();\n    }\n\n    public override render(): this {\n        super.render();\n\n        this.$controls = this.select(\".og-timeline-controls\");\n\n        this._frameEl = this.select(\".og-timeline-frame\");\n        this._currentEl = this.select(\".og-timeline-current\");\n        this.select(\".og-timeline-frame .og-timeline-scale\")!.appendChild(this._canvasEl);\n\n        this._resizeObserver.observe(this.el!);\n\n        this.model.events.on(\"change\", () => {\n            this.draw()\n        });\n\n        this.model.events.on(\"current\", (d: Date) => {\n            this._drawCurrent();\n            this.events.dispatch(this.events.setcurrent, d);\n        });\n\n        this._canvasEl.addEventListener(\"mouseenter\", this._onMouseEnter);\n        this._canvasEl.addEventListener(\"mouseout\", this._onMouseOut);\n\n        this._currentEl!.addEventListener(\"mouseenter\", this._onCurrentMouseEnter);\n        this._currentEl!.addEventListener(\"mouseout\", this._onCurrentMouseOut);\n\n        document.body.addEventListener(\"mousemove\", this._onMouseMove);\n        document.body.addEventListener(\"mousedown\", this._onMouseDown);\n        document.body.addEventListener(\"mouseup\", this._onMouseUp);\n        document.body.addEventListener(\"wheel\", this._onMouseWheelFF);\n\n        this._playBtn.appendTo(this.$controls!);\n        this._pauseBtn.appendTo(this.$controls!);\n\n        if (this.model.stopped()) {\n            this._pauseBtn.setActive(true, true);\n            this._pauseBtn.preventClick = true;\n        } else {\n            this._playBtn.setActive(true, true);\n            this._playBtn.preventClick = true;\n        }\n\n        this._buttons.events.on(\"change\", (btn: ToggleButton) => {\n            switch (btn.name) {\n                case \"play\":\n                    this.play();\n                    break;\n                case \"pause\":\n                    this.pause();\n                    break;\n            }\n        });\n\n        // let mltView = new View({\n        //     template: `<div class=\"og-timeline-multiplier\">\n        //                 <select>\n        //                     <option value=\"0.25\">0.25</option>\n        //                     <option value=\"0.5\">0.5</option>\n        //                     <option value=\"1\" selected>1.0</option>\n        //                     <option value=\"2\">2.0</option>\n        //                     <option value=\"3\">3.0</option>\n        //                     <option value=\"5\">5.0</option>\n        //                 </select>\n        //                 </div>`\n        // });\n\n        //mltView.appendTo($ctl)\n\n        // let multiplierEl = this.select(\".og-timeline-multiplier select\");\n        //\n        // multiplierEl.value = this.model.multiplier.toString();\n        // multiplierEl.addEventListener(\"change\", (e) => {\n        //     this.model.multiplier = Math.sign(this.model.multiplier) * Number(e.target.value);\n        // });\n\n        this.setVisibility(true);\n\n        return this;\n    }\n\n    public setVisibility(visibility: boolean) {\n        if (visibility !== this._visibility) {\n            this._visibility = visibility;\n            if (this.el) {\n                if (visibility) {\n                    this.el.style.display = \"block\";\n                } else {\n                    this.el.style.display = \"none\";\n                }\n            }\n            this.events.dispatch(this.events.visibility, visibility);\n        }\n    }\n\n    public reset() {\n        this.model.stop();\n        this.events.dispatch(this.events.reset, this.model);\n    }\n\n    public play() {\n        this.model.multiplier = Math.abs(this.model.multiplier);\n        this.model.play();\n        this.events.dispatch(this.events.play, this.model);\n    }\n\n    public pause() {\n        this.model.stop();\n        this.events.dispatch(this.events.pause, this.model);\n    }\n\n    public playBack() {\n        this.model.multiplier = -1 * Math.abs(this.model.multiplier);\n        this.model.play();\n        this.events.dispatch(this.events.playback, this.model);\n    }\n\n    protected _onMouseWheel = (e: MouseEventExt) => {\n        if (this._isMouseOver) {\n            let rect = this._canvasEl.getBoundingClientRect();\n            let pointerPosX = e.clientX - rect.left,\n                pointerCenterOffsetX = -(pointerPosX - this.clientWidth * 0.5);\n            let pointerTime = this.model.rangeStartTime + this._millisecondsInPixel * pointerPosX;\n            this._zoom(pointerTime, pointerCenterOffsetX, Math.sign(e.wheelDelta!));\n        } else if (this._isCurrentMouseOver) {\n            let pointerCenterOffsetX = -((this.model.currentTime - this.model.rangeStartTime) / this._millisecondsInPixel - this.clientWidth * 0.5);\n            this._zoom(this.model.currentTime, pointerCenterOffsetX, Math.sign(e.wheelDelta!));\n        }\n    }\n\n    protected _onMouseWheelFF = (e: MouseEventExt) => {\n        this._onMouseWheel(e);\n    }\n\n    protected _zoom(pointerTime: number, pointerCenterOffsetX: number, dir: number) {\n        let centerTime = this.model.rangeStartTime + 0.5 * this.model.range;\n\n        let centerTimeOffset = (pointerTime - centerTime) * MILLISECONDS_TO_SECONDS;\n\n        let rangeStart = addSeconds(this.model.rangeStart, centerTimeOffset),\n            rangeEnd = addSeconds(this.model.rangeEnd, centerTimeOffset);\n\n        let delta = ((rangeEnd.getTime() - rangeStart.getTime()) / 20) * MILLISECONDS_TO_SECONDS;\n\n        let newRangeStart = addSeconds(rangeStart, delta * dir);\n        let newRangeEnd = addSeconds(rangeEnd, -delta * dir);\n        let msPx = (newRangeEnd.getTime() - newRangeStart.getTime()) / this.clientWidth;\n\n        if (msPx < 31536000000 && msPx > 0.1) {\n            let timeOffset = msPx * pointerCenterOffsetX * MILLISECONDS_TO_SECONDS;\n\n            this.model.set(\n                addSeconds(newRangeStart, timeOffset),\n                addSeconds(newRangeEnd, timeOffset)\n            );\n        }\n    }\n\n    protected _onMouseDown = (e: MouseEvent) => {\n        if (this._isMouseOver) {\n            this._isDragging = true;\n            document.body.classList.add(\"og-timeline-unselectable\");\n\n            this._clickPosX = e.clientX;\n            this._clickTime = Date.now();\n\n            this._clickRangeStart = this.model.rangeStart;\n            this._clickRangeEnd = this.model.rangeEnd;\n\n            this.events.dispatch(this.events.startdrag, e);\n        } else if (this._isCurrentMouseOver) {\n            this._isCurrentDragging = true;\n            document.body.classList.add(\"og-timeline-unselectable\");\n\n            this._clickPosX = e.clientX;\n\n            this._clickCurrentDate = this.model.current;\n\n            this.events.dispatch(this.events.startdragcurrent, e);\n        }\n    }\n\n    protected _onMouseUp = (e: MouseEvent) => {\n        if (this._isDragging) {\n            this._isDragging = false;\n            document.body.classList.remove(\"og-timeline-unselectable\");\n            if (this._clickPosX === e.clientX && (Date.now() - this._clickTime) < this._clickDelay) {\n                let rect = this._canvasEl.getBoundingClientRect();\n                let current = new Date(this.model.rangeStartTime + (e.clientX - rect.left) * this._millisecondsInPixel);\n                this.model.current = current;\n                this.events.dispatch(this.events.stopdrag, current);\n                this.events.dispatch(this.events.setcurrent, current);\n            } else {\n                this.events.dispatch(this.events.stopdrag, this.model.current);\n            }\n        } else if (this._isCurrentDragging) {\n            this._isCurrentDragging = false;\n            document.body.classList.remove(\"og-timeline-unselectable\");\n            this.events.dispatch(this.events.stopdragcurrent, this.model.current);\n        }\n    }\n\n    protected _onMouseEnter = () => {\n        this._isMouseOver = true;\n    }\n\n    protected _onMouseOut = () => {\n        this._isMouseOver = false;\n    }\n\n    protected _onCurrentMouseEnter = () => {\n        this._isCurrentMouseOver = true;\n    }\n\n    protected _onCurrentMouseOut = () => {\n        this._isCurrentMouseOver = false;\n    }\n\n    protected _onMouseMove = (e: MouseEvent) => {\n        if (this._isDragging) {\n            let offsetSec = (this._clickPosX - e.clientX) * this._millisecondsInPixel * MILLISECONDS_TO_SECONDS;\n            this.model.set(addSeconds(this._clickRangeStart, offsetSec), addSeconds(this._clickRangeEnd, offsetSec))\n        } else if (this._isCurrentDragging) {\n            let offsetSec = (this._clickPosX - e.clientX) * this._millisecondsInPixel * MILLISECONDS_TO_SECONDS;\n            let newCurrent = addSeconds(this._clickCurrentDate, -offsetSec);\n            if (newCurrent >= this.model.rangeStart && newCurrent <= this.model.rangeEnd) {\n                this.model.current = addSeconds(this._clickCurrentDate, -offsetSec);\n            }\n        }\n    }\n\n    public get clientWidth(): number {\n        return this._canvasEl ? this._canvasEl.width / this._canvasScale : 0;\n    }\n\n    public get clientHeight(): number {\n        return this._canvasEl ? this._canvasEl.height / this._canvasScale : 0;\n    }\n\n    protected _resize() {\n        if (this._frameEl) {\n            this._canvasEl.width = this._frameEl.clientWidth * this._canvasScale;\n            this._canvasEl.height = this._frameEl.clientHeight * this._canvasScale;\n            this._canvasEl.style.width = `${this._frameEl.clientWidth}px`;\n            this._canvasEl.style.height = `${this._frameEl.clientHeight}px`;\n        }\n    }\n\n    public getOffsetByTime(milliseconds: number): number {\n        return (milliseconds - this.model.rangeStartTime) / this._millisecondsInPixel;\n    }\n\n    public override remove() {\n        super.remove();\n        this.model.stop();\n    }\n\n    protected _clearCanvas() {\n        this._ctx.fillStyle = this.fillStyle;\n        this._ctx.fillRect(0, 0, this.clientWidth * this._canvasScale, this.clientHeight * this._canvasScale);\n    }\n\n    protected _drawCurrent() {\n        let curPosX = (this.model.currentTime - this.model.rangeStartTime) / this._millisecondsInPixel;\n        if (this.model.current < this.model.rangeStart || this.model.current > this.model.rangeEnd) {\n            this._currentEl!.style.display = \"none\";\n        } else {\n            this._currentEl!.style.display = \"block\";\n            this._currentEl!.style.transform = `translateX(${curPosX}px)`;\n        }\n    }\n\n    public draw() {\n        this._millisecondsInPixel = (this.model.range / this.clientWidth);\n        let minWidthMs = this._minWidth * this._millisecondsInPixel;\n        let scaleData = getScale(minWidthMs * MILLISECONDS_TO_SECONDS);\n        if (scaleData) {\n\n            this._clearCanvas();\n\n            let scaleMs = scaleData[0] * SECONDS_TO_MILLISECONDS,\n                scalePx = scaleMs / this._millisecondsInPixel,\n                segCount = scaleData[1];\n\n            let originTime = getNearestTimeLeft(this.model.rangeStartTime, scaleMs);\n\n            let showMilliseconds = scaleData[0] < 1.0,\n                showTime = scaleData[0] < 86400.0;\n\n            for (let i = originTime, rangeEnd = this.model.rangeEndTime + scaleMs; i < rangeEnd; i += scaleMs) {\n                let x = this.getOffsetByTime(i);\n                if (x >= 0 && x <= this.clientWidth * this._canvasScale) {\n                    drawNotch(this._ctx, x * this._canvasScale, 10 * this._canvasScale, 2 * this._canvasScale, SCALE_NOTCH_COLOR);\n                }\n                for (let j = 1; j < segCount; j++) {\n                    let xx = x + j * (scalePx / segCount);\n                    if (xx >= 0 && xx <= this.clientWidth * this._canvasScale) {\n                        drawNotch(this._ctx, xx * this._canvasScale, 5 * this._canvasScale, 1 * this._canvasScale, SCALE_NOTCH_COLOR);\n                    }\n                }\n                drawText(this._ctx, dateToStr(new Date(i), showTime, showMilliseconds), x * this._canvasScale, 26 * this._canvasScale, \"24px monospace\", SCALE_TIME_COLOR, \"center\");\n            }\n\n            this._drawCurrent();\n        }\n    }\n}\n\nexport {TimelineView};\n\n","import {Dialog} from \"../../ui/Dialog\";\nimport {ToggleButton} from \"../../ui/ToggleButton\";\nimport {Control, IControlParams} from '../Control';\nimport {TimelineView} from './TimelineView';\n\ninterface ITimelineControlParams extends IControlParams {\n    name?: string;\n    current?: Date;\n    rangeStart?: Date;\n    rangeEnd?: Date;\n}\n\nfunction addHours(date: Date, hours: number): Date {\n    const temp = new Date(date);\n    temp.setHours(temp.getHours() + hours);\n    return temp;\n}\n\nconst ICON_BUTTON_SVG = `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- Svg Vector Icons : http://www.onlinewebfonts.com/icon -->\n    <!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 1000 1000\" enable-background=\"new 0 0 1000 1000\" xml:space=\"preserve\">\n    <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>\n    <g><path d=\"M500,10C229.4,10,10,229.4,10,500s219.4,490,490,490s490-219.4,490-490S770.6,10,500,10z M800.3,800.3c-39,39-84.5,69.7-135,91C613,913.5,557.4,924.7,500,924.7s-112.9-11.2-165.3-33.3c-50.5-21.3-95.9-52-135-91c-39-39-69.7-84.5-91-135C86.5,612.9,75.3,557.4,75.3,500s11.2-112.9,33.3-165.3c21.3-50.5,52-95.9,91-135c39-39,84.5-69.7,135-91C387.1,86.5,442.6,75.3,500,75.3s112.9,11.2,165.3,33.3c50.5,21.3,95.9,52,135,91c39,39,69.7,84.5,91,135c22.1,52.3,33.3,107.9,33.3,165.3s-11.2,112.9-33.3,165.3C869.9,715.8,839.3,761.2,800.3,800.3z\"/><path d=\"M761.3,532.7H532.7V304c0-18.1-14.6-32.7-32.7-32.7s-32.7,14.6-32.7,32.7v261.3l0,0c0,18.1,14.6,32.7,32.7,32.7h261.3c18.1,0,32.7-14.6,32.7-32.7l0,0C794,547.3,779.4,532.7,761.3,532.7z\"/></g>\n</svg>`;\n\nclass TimelineControl extends Control {\n    protected _timelineView: TimelineView;\n    protected _toggleBtn: ToggleButton;\n    protected _dialog: Dialog<null>;\n\n    constructor(options: ITimelineControlParams = {}) {\n        super({\n            name: \"timeline\",\n            ...options\n        });\n\n        let currentDate = options.current || new Date();\n        let startDate = options.rangeStart || addHours(currentDate, -12);\n        let endDate = options.rangeEnd || addHours(currentDate, 12);\n\n        this._timelineView = new TimelineView({\n            rangeStart: startDate,\n            rangeEnd: endDate,\n            currentDate: currentDate\n        });\n\n        this._toggleBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-timeline_button\"],\n            icon: ICON_BUTTON_SVG\n        });\n\n        this._dialog = new Dialog({\n            title: \"Timeline\",\n            visible: false,\n            resizable: true,\n            useHide: true,\n            top: 10,\n            left: 60,\n            width: 600,\n            height: 115,\n            minHeight: 115,\n            maxHeight: 110\n        });\n\n        this._dialog.events.on(\"visibility\", (v: boolean) => {\n            this._toggleBtn.setActive(v);\n        });\n    }\n\n    public override oninit() {\n\n        let $container = this.renderer!.div!;\n\n        this._toggleBtn.appendTo($container);\n        this._dialog.appendTo($container);\n\n        this._toggleBtn.events.on(\"change\", (isActive: boolean) => {\n            this._dialog.setVisibility(isActive);\n            if (isActive) {\n                this._timelineView.resize();\n            }\n        });\n\n        this._timelineView.appendTo(this._dialog.container!);\n\n        this._timelineView.events.on(\"setcurrent\", (d: Date) => {\n            this.renderer && this.renderer.handler.defaultClock.setDate(d);\n        });\n\n        this._timelineView.events.on(\"startdrag\", () => {\n            this.renderer && this.renderer.controls.mouseNavigation.deactivate();\n        });\n\n        this._timelineView.events.on(\"stopdrag\", () => {\n            this.renderer && this.renderer.controls.mouseNavigation.activate();\n        });\n\n        this._timelineView.events.on(\"startdragcurrent\", () => {\n            this.renderer && this.renderer.controls.mouseNavigation.deactivate();\n        });\n\n        this._timelineView.events.on(\"stopdragcurrent\", () => {\n            this.renderer && this.renderer.controls.mouseNavigation.activate();\n        });\n    }\n}\n\nexport {TimelineControl};\n","export class Deferred<T> {\n    resolve: ((value: T | PromiseLike<T>) => void);\n    reject: ((reason?: any) => void);\n    promise: Promise<T>;\n\n    constructor() {\n        this.resolve = () => {\n        };\n        this.reject = () => {\n        };\n        this.promise = new Promise<T>((resolve: (value: T | PromiseLike<T>) => void, reject: (reason?: any) => void) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n        Object.freeze(this);\n    }\n}","import {Deferred} from '../../Deferred';\nimport {createEvents, EventsHandler} from '../../Events';\nimport {Vec3} from \"../../math/Vec3\";\nimport {Planet} from \"../../scene/Planet\";\nimport {LonLat} from \"../../LonLat\";\n\nconst DEFAULT_WARNING_HEIGHT_LEVEL = 5;\n\nexport interface ElevationProfileParams {\n    planet?: Planet\n}\n\nexport interface IProfileData {\n    dist: number;\n    minY: number;\n    maxY: number;\n    trackCoords: TrackItem[];\n    groundCoords: GroundItem[];\n}\n\nexport type ElevationProfileDrawData = [TrackItem[], GroundItem[]];\n\ntype ElevationProfileEventsList = [\"startcollecting\", \"profilecollected\", \"clear\"];\n\nconst ELEVATIONPROFILE_EVENTS: ElevationProfileEventsList = [\"startcollecting\", \"profilecollected\", \"clear\"];\n\n/**\n * Point types\n */\nexport const SAFE = 0;\nexport const WARNING = 1;\nexport const COLLISION = 2;\n\n/**\n * drawData index names\n */\nconst TRACK = 0;\nconst GROUND = 1;\n\nconst SEGMMENT_LENGTH = 1.0; // Distance between query points on the ground\nconst GROUND_OFFSET = 1.0; // Ground level offset\nconst BOTTOM_PADDING = 0.1; // Range minY padding in percentage from the bottom\nconst TOP_PADDING = 0.2; // Range maxY padding in percentage from the top\nconst HEIGHT_EPS = 0.1; // Warning height level error\n\ntype WarningLevel = typeof SAFE | typeof WARNING | typeof COLLISION;\n/**\n * 0 - distance, 1 - elevation, 2 - related ground point index\n */\nexport type TrackItem = [number, number, number];\n/**\n * 0 - distance, 1 - elevation, 2 - warning level, 3 - ..., 4 - related track point index\n */\nexport type GroundItem = [number, number, WarningLevel, number, number];\n\nexport class ElevationProfile {\n    public events: EventsHandler<ElevationProfileEventsList>;\n    public planet: Planet | null;\n    protected _warningHeightLevel: number;\n    protected _pointsReady: boolean;\n    protected _isWarning: boolean;\n\n    protected _planeDistance: number;\n    protected _minX: number;\n    protected _maxX: number;\n    protected _minY: number;\n    protected _maxY: number;\n    protected _drawData: ElevationProfileDrawData;\n    protected _promiseArr: Promise<void | number>[];\n    protected _promiseCounter: number;\n    protected _pMaxY: number;\n    protected _pMinY: number;\n    protected _pDist: number;\n    protected _pTrackCoords: TrackItem[];\n    protected _pGroundCoords: GroundItem[];\n    protected _pIndex: number;\n\n    constructor(options: ElevationProfileParams = {}) {\n        this.events = createEvents(ELEVATIONPROFILE_EVENTS);\n\n        this.planet = options.planet || null;\n\n        this._warningHeightLevel = DEFAULT_WARNING_HEIGHT_LEVEL;\n        this._pointsReady = false;\n        this._isWarning = false;\n\n        this._minX = 0;\n        this._planeDistance = this._maxX = 1000;\n        this._minY = 0;\n        this._maxY = 200;\n\n        this._drawData = [[], []];\n\n        this._promiseArr = [];\n        this._promiseCounter = 0;\n        this._pMaxY = 0;\n        this._pMinY = 0;\n        this._pDist = 0;\n        this._pTrackCoords = [];\n        this._pGroundCoords = [];\n\n        this._pIndex = 0;\n    }\n\n    public bindPlanet(planet: Planet) {\n        this.planet = planet;\n    }\n\n    public setWarningHeightLevel(warningHeight: number = 0) {\n        this._warningHeightLevel = warningHeight;\n    }\n\n    public setRange(minX: number, maxX: number, minY?: number, maxY?: number) {\n        this._minX = minX;\n        this._maxX = maxX;\n        if (minY) {\n            this._minY = minY;\n        }\n        if (maxY) {\n            this._maxY = maxY;\n        }\n    }\n\n    protected _getHeightAsync(ll: LonLat, pIndex: number, promiseCounter: number): Promise<number> {\n        let def = new Deferred<number>();\n        if (this.planet) {\n            let msl = this.planet.terrain!.geoid.getHeightLonLat(ll);\n            this.planet.terrain!.getHeightAsync(ll, (elv: number) => {\n                if (this.planet && promiseCounter === this._promiseCounter) {\n                    elv += msl;\n                    this._pGroundCoords[pIndex][1] = elv;\n                    this._pGroundCoords[pIndex][2] = SAFE;\n                    this._pGroundCoords[pIndex][3] = ll.height;\n                    if (elv > this._pMaxY) this._pMaxY = elv;\n                    if (elv < this._pMinY) this._pMinY = elv;\n                    this._updatePointType(pIndex);\n                    def.resolve(elv);\n                } else {\n                    def.reject();\n                }\n            });\n        } else {\n            def.reject();\n        }\n        return def.promise;\n    }\n\n    protected _collectCoordsBetweenTwoTrackPoints(index: number, internalPoints: number, scaleFactor: number, p0: Vec3, trackDir: Vec3, promiseCounter: number) {\n\n        if (!this.planet) return;\n\n        for (let j = 1; j <= internalPoints; j++) {\n            this._pDist += SEGMMENT_LENGTH;\n            this._pIndex++;\n\n            // Point on the track segment\n            let dirSegLen = j * scaleFactor;\n            let pjd = p0.add(trackDir.scaleTo(dirSegLen));\n            let llx = this.planet.ellipsoid.cartesianToLonLat(pjd);\n\n            this._pGroundCoords[this._pIndex] = [this._pDist, 0, SAFE, 0, index];\n\n            ((lonlat: LonLat, index: number) => {\n                this._promiseArr.push(this._getHeightAsync(lonlat, index, promiseCounter));\n            })(llx, this._pIndex);\n        }\n    }\n\n    protected _collectAllPoints(pointsLonLat: LonLat[], promiseCounter: number) {\n\n        if (!this.planet) return;\n        if (promiseCounter !== this._promiseCounter) return;\n\n        let p0 = new Vec3(),\n            p1 = new Vec3();\n\n        for (let i = 1, len = pointsLonLat.length; i < len; i++) {\n            let lonlat0 = pointsLonLat[i - 1],\n                lonlat1 = pointsLonLat[i];\n\n            this.planet.ellipsoid.lonLatToCartesianRes(lonlat0, p0);\n            this.planet.ellipsoid.lonLatToCartesianRes(lonlat1, p1);\n\n            let trackDir = p1.sub(p0);\n            let dirLength = trackDir.length();\n            let n0 = this.planet.ellipsoid.getSurfaceNormal3v(p0);\n            let proj = Vec3.proj_b_to_plane(trackDir, n0);\n            let projLen = proj.length();\n            let internalPoints = Math.floor(projLen / SEGMMENT_LENGTH);\n            let scaleFactor = SEGMMENT_LENGTH * dirLength / projLen;\n\n            this._getGroundElevation(lonlat0, i - 1, promiseCounter);\n\n            proj.normalize();\n            trackDir.normalize();\n\n            // Getting internal point elevations and looking for the collisions\n            this._collectCoordsBetweenTwoTrackPoints(i - 1, internalPoints, scaleFactor, p0, trackDir, promiseCounter);\n\n            this._pDist += projLen - internalPoints * SEGMMENT_LENGTH;\n            this._pIndex++;\n\n            let elv = lonlat1.height;\n            if (elv > this._pMaxY) this._pMaxY = elv;\n            if (elv < this._pMinY) this._pMinY = elv;\n\n            this._pTrackCoords[i] = [this._pDist, elv, this._pIndex];\n        }\n    }\n\n    protected _getGroundElevation(lonLat: LonLat, index: number, promiseCounter: number) {\n        this._pGroundCoords[this._pIndex] = [this._pDist, 0, SAFE, 0, index];\n        this._promiseArr.push(this._getHeightAsync(lonLat, this._pIndex, promiseCounter));\n    }\n\n    protected _calcPointsAsync(pointsLonLat: LonLat[], promiseCounter: number) {\n        return new Promise<IProfileData>((resolve: (p: IProfileData) => void, reject) => {\n            this._pTrackCoords = [[0, pointsLonLat[0].height, 0]];\n            this._pMaxY = pointsLonLat[0].height;\n            this._pMinY = this._pMaxY;\n            this._pDist = 0;\n            this._pGroundCoords = [];\n            this._pIndex = 0;\n            this._promiseArr = [];\n\n            this._collectAllPoints(pointsLonLat, promiseCounter);\n\n            this._getGroundElevation(pointsLonLat[pointsLonLat.length - 1], pointsLonLat.length - 1, promiseCounter);\n\n            Promise.all(this._promiseArr).then(() => {\n                resolve({\n                    dist: this._pDist,\n                    minY: this._pMinY,\n                    maxY: this._pMaxY,\n                    trackCoords: this._pTrackCoords,\n                    groundCoords: this._pGroundCoords\n                });\n            });\n        });\n    }\n\n    public get minX(): number {\n        return this._minX;\n    }\n\n    public get planeDistance(): number {\n        return this._planeDistance;\n    }\n\n    public get maxX(): number {\n        return this._maxX;\n    }\n\n    public get minY(): number {\n        return this._minY;\n    }\n\n    public get maxY(): number {\n        return this._maxY;\n    }\n\n    public get pointsReady(): boolean {\n        return this._pointsReady;\n    }\n\n    public get isWarningOrCollision(): boolean {\n        return this._isWarning;\n    }\n\n    public get drawData(): ElevationProfileDrawData {\n        return this._drawData;\n    }\n\n    public collectProfile(pointsLonLat: LonLat[]): Promise<ElevationProfileDrawData> {\n\n        let def = new Deferred<ElevationProfileDrawData>();\n\n        if (!this.planet) def.reject();\n\n        this._pointsReady = false;\n        this._isWarning = false;\n\n        if (!pointsLonLat || !pointsLonLat.length) {\n            def.reject();\n            return def.promise;\n        }\n\n        this.events.dispatch(this.events.startcollecting, this);\n\n        this._promiseCounter++;\n\n        ((counter: number) => {\n            this._calcPointsAsync(pointsLonLat, counter).then((p: IProfileData) => {\n                if (counter === this._promiseCounter) {\n                    this._planeDistance = p.dist;\n                    this.setRange(0, p.dist, p.minY - BOTTOM_PADDING * Math.abs(p.minY), p.maxY + Math.abs(p.maxY) * TOP_PADDING);\n                    this._pointsReady = true;\n                    this._drawData = [p.trackCoords, p.groundCoords];\n                    this.events.dispatch(this.events.profilecollected, this._drawData, this);\n                    def.resolve(this._drawData);\n                }\n            });\n        })(this._promiseCounter);\n\n        return def.promise;\n    }\n\n    protected _updatePointType(pIndex: number) {\n        if ((this._pGroundCoords[pIndex][3] >= this._pGroundCoords[pIndex][1]) &&\n            (this._pGroundCoords[pIndex][3] < this._pGroundCoords[pIndex][1] + this._warningHeightLevel - HEIGHT_EPS)) {\n            this._pGroundCoords[pIndex][2] = WARNING;\n        }\n\n        if (this._pGroundCoords[pIndex][3] <= this._pGroundCoords[pIndex][1] + GROUND_OFFSET) {\n            this._pGroundCoords[pIndex][2] = COLLISION;\n        }\n\n        if (this._pGroundCoords[pIndex][2] === WARNING || this._pGroundCoords[pIndex][2] === COLLISION) {\n            this._isWarning = true;\n        }\n    }\n\n    /**\n     * @deprecated\n     */\n    protected _setPointsType() {\n        this._isWarning = false;\n\n        this._pTrackCoords = this._drawData[TRACK];\n        this._pGroundCoords = this._drawData[GROUND];\n\n        for (let i = 0; i < this._pGroundCoords.length; i++) {\n            this._updatePointType(i);\n        }\n\n        this._drawData[GROUND] = this._pGroundCoords;\n        this.events.dispatch(this.events.profilecollected, this._drawData, this);\n    }\n\n    public clear() {\n        this._promiseCounter = 0;\n        this._pointsReady = false;\n        this._isWarning = false;\n        this._drawData = [[], []];\n        this._pMaxY = 0;\n        this._pMinY = 0;\n        this._pDist = 0;\n        this._pTrackCoords = [];\n        this._pGroundCoords = [];\n        this._pIndex = 0;\n        this.events.dispatch(this.events.clear, this._drawData, this);\n    }\n}","import {EventsHandler} from \"../../Events\";\nimport {IViewParams, View, ViewEventsList} from '../../ui/View';\nimport {\n    SAFE,\n    WARNING,\n    COLLISION,\n    ElevationProfile,\n    ElevationProfileDrawData,\n    GroundItem,\n    TrackItem\n} from './ElevationProfile';\nimport {distanceFormatExt, binarySearch} from \"../../utils/shared\";\nimport {MouseEventExt} from \"../../input/MouseHandler\";\n\nconst FILL_COLOR = \"rgb(63, 63, 63)\";\nconst TRACK_COLOR = \"rgb(0, 255, 50)\";\nconst TERRAIN_COLOR = \"rgb(198, 198, 198)\";\nconst TERRAIN_FILL_COLOR = \"rgb(64, 68, 82)\";\nconst WARNING_COLOR = \"rgb(255, 255, 0)\";\nconst COLLISION_COLOR = \"rgb(255, 0, 0)\";\nconst LINE_COLORS = [TERRAIN_COLOR, WARNING_COLOR, COLLISION_COLOR];\nconst TERRAIN_ALPHA = 0.5;\nconst LINE_WIDTH = 5;\n\ninterface IElevationProfileViewParams extends IViewParams {\n    fillStyle?: string;\n}\n\ntype ElevationProfileViewEventsList = [\"startdrag\", \"stopdrag\", \"pointer\", \"mouseenter\", \"mouseleave\", \"dblclick\", \"tracklength\", \"groundlength\", \"warninglength\", \"collisionlength\"];\n\nconst ELEVATIONPROFILEVIEW_EVENTS: ElevationProfileViewEventsList = [\"startdrag\", \"stopdrag\", \"pointer\", \"mouseenter\", \"mouseleave\", \"dblclick\", \"tracklength\", \"groundlength\", \"warninglength\", \"collisionlength\"];\n\nconst TEMPLATE =\n    `<div class=\"og-elevationprofile\">\n      <div class=\"og-elevationprofile-loading\" style=\"display: none;\">\n        <div class=\"loadingio-spinner-bars-r354qqyl5v\">\n          <div class=\"ldio-p0v5a1f6oz\">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n        </div> \n      </div>     \n    </div>`;\n\n\nclass ElevationProfileView extends View<ElevationProfile> {\n\n    public override events: EventsHandler<ElevationProfileViewEventsList> & EventsHandler<ViewEventsList>;\n\n    public fillStyle: string;\n\n    protected _pixelsInMeter_x: number;\n    protected _pixelsInMeter_y: number;\n    protected _canvasScale: number;\n    public $canvas: HTMLCanvasElement;\n    public $pointerCanvas: HTMLCanvasElement;\n    protected _ctx: CanvasRenderingContext2D;\n    protected _pointerCtx: CanvasRenderingContext2D;\n    protected _onResizeObserver_: () => void;\n    protected _resizeObserver: ResizeObserver;\n\n    public $loading: HTMLElement | null;\n\n    protected _isMouseOver: boolean;\n    protected _isDragging: boolean;\n\n    protected _clickPosX: number;\n    protected _clickLeftDistance: number;\n    protected _clickRightDistance: number;\n\n    protected _leftDistance: number;\n    protected _rightDistance: number;\n\n    protected _customFrame: boolean;\n\n    protected _timeStartHandler: number;\n\n    constructor(options: IElevationProfileViewParams = {}) {\n        super({\n            template: TEMPLATE,\n            model: new ElevationProfile()\n        });\n\n        //@ts-ignore\n        this.events = this.events.registerNames(ELEVATIONPROFILEVIEW_EVENTS);\n\n        this.fillStyle = options.fillStyle || FILL_COLOR;\n\n        this._customFrame = false;\n        this._leftDistance = 0;\n        this._rightDistance = 0;\n        this._pixelsInMeter_x = 0;\n        this._pixelsInMeter_y = 0;\n        this._canvasScale = 2;\n        this.$canvas = document.createElement(\"canvas\");\n        this.$canvas.style.position = \"absolute\";\n        this._ctx = this.$canvas.getContext('2d')!;\n\n        this.$pointerCanvas = document.createElement(\"canvas\");\n        this.$pointerCanvas.style.pointerEvents = \"none\";\n        this.$pointerCanvas.style.position = \"absolute\";\n        this._pointerCtx = this.$pointerCanvas.getContext('2d')!;\n\n        this.$loading = null;\n\n        this._isMouseOver = false;\n        this._isDragging = false;\n        this._clickPosX = 0;\n        this._clickLeftDistance = 0;\n        this._clickRightDistance = 0;\n\n        this._timeStartHandler = 0;\n\n        this._onResizeObserver_ = this._onResizeObserver.bind(this);\n        this._resizeObserver = new ResizeObserver(this._onResizeObserver_);\n    }\n\n    protected _onResizeObserver() {\n        this.resize();\n    }\n\n    public get canvasScale(): number {\n        return this._canvasScale;\n    }\n\n    public set canvasScale(scale: number) {\n        if (scale !== this._canvasScale) {\n            this._canvasScale = scale;\n            this.resize();\n        }\n    }\n\n    public resize() {\n        this._resize();\n        this.draw();\n    }\n\n    public override render(): this {\n        super.render();\n\n        this._resizeObserver.observe(this.el!);\n\n        this.el!.appendChild(this.$canvas);\n        this.el!.appendChild(this.$pointerCanvas);\n\n        this.model.events.on(\"profilecollected\", (data: ElevationProfileDrawData) => {\n            this._hideLoading();\n            this.clearPointerCanvas();\n            this.draw();\n        });\n\n        this.model.events.on(\"startcollecting\", () => {\n            clearTimeout(this._timeStartHandler);\n            //@ts-ignore\n            this._timeStartHandler = setTimeout(() => {\n                this._showLoading();\n            }, 450);\n        });\n\n        this.model.events.on(\"clear\", () => {\n            this._customFrame = false;\n            this._leftDistance = 0;\n            this.clearCanvas();\n            this.clearPointerCanvas();\n        });\n\n        this.$loading = this.select(\".og-elevationprofile-loading\");\n\n        this.$canvas.addEventListener(\"mouseenter\", this._onMouseEnter);\n        this.$canvas.addEventListener(\"mouseout\", this._onMouseOut);\n        this.$canvas.addEventListener(\"dblclick\", this._onMouseDblClick);\n\n        this.$canvas.addEventListener(\"mousemove\", this._onCanvasMouseMove);\n        document.body.addEventListener(\"mousemove\", this._onMouseMove);\n        document.body.addEventListener(\"mousedown\", this._onMouseDown);\n        document.body.addEventListener(\"mouseup\", this._onMouseUp);\n        document.body.addEventListener(\"wheel\", this._onMouseWheelFF);\n\n        return this;\n    }\n\n    protected _hideLoading() {\n        clearTimeout(this._timeStartHandler);\n        this.$loading!.style.display = \"none\";\n    }\n\n    protected _showLoading() {\n        this.$loading!.style.display = \"flex\";\n    }\n\n    protected _onMouseDblClick = (e: MouseEvent) => {\n        //\n        // @todo: The same code as in the pointer mouse move\n        //\n        let rect = this.$canvas.getBoundingClientRect();\n        let x = e.clientX - rect.left;\n\n        let pointerDistance = this._leftDistance + (this._rightDistance - this._leftDistance) * x / this.clientWidth;\n        let groundData = this.model.drawData[1];\n        let trackData = this.model.drawData[0];\n\n        let groundPoiIndex;\n\n        if (pointerDistance < 0) {\n            groundPoiIndex = 1;\n            pointerDistance = 0;\n            x = (0 - this._leftDistance) * this.clientWidth / (this._rightDistance - this._leftDistance);\n        } else if (pointerDistance > this.model.planeDistance) {\n            groundPoiIndex = groundData.length - 1;\n            pointerDistance = this.model.planeDistance;\n            x = (pointerDistance - this._leftDistance) * this.clientWidth / (this._rightDistance - this._leftDistance);\n        } else {\n            groundPoiIndex = -1 - binarySearch(groundData, pointerDistance, (a: number, b: GroundItem) => {\n                return a - b[0];\n            });\n        }\n\n        // Ground point\n        let gp0 = groundData[groundPoiIndex - 1],\n            gp1 = groundData[groundPoiIndex];\n        let d = (pointerDistance - gp0[0]) / (gp1[0] - gp0[0]);\n        let groundElv = gp0[1] + d * (gp1[1] - gp0[1]);\n\n        // track point\n        let trackPoiIndex = gp0[4];\n        let tp0 = trackData[trackPoiIndex],\n            tp1 = trackData[trackPoiIndex + 1];\n        d = (pointerDistance - tp0[0]) / (tp1[0] - tp0[0]);\n        let trackElv = tp0[1] + d * (tp1[1] - tp0[1]);\n\n        this.events.dispatch(this.events.dblclick, pointerDistance, tp0, tp1, gp0, gp1, trackPoiIndex, groundPoiIndex - 1, trackElv - groundElv);\n    }\n\n    protected _onMouseEnter = (e: MouseEvent) => {\n        this._isMouseOver = true;\n        this.events.dispatch(this.events.mouseenter, e);\n    }\n\n    protected _onMouseOut = (e: MouseEvent) => {\n        this._isMouseOver = false;\n        this.events.dispatch(this.events.mouseleave, e);\n    }\n\n    protected _onMouseDown = (e: MouseEvent) => {\n        if (this._isMouseOver) {\n            this._isDragging = true;\n            document.body.classList.add(\"og-timeline-unselectable\");\n\n            this._clickPosX = e.clientX;\n\n            if (!this._customFrame) {\n                this._leftDistance = this.model.minX;\n                this._rightDistance = this.model.maxX;\n            }\n\n            this._clickLeftDistance = this._leftDistance;\n            this._clickRightDistance = this._rightDistance;\n\n            this.events.dispatch(this.events.startdrag, e);\n        }\n    }\n\n    protected _onMouseUp = (e: MouseEvent) => {\n        if (this._isDragging) {\n            this._isDragging = false;\n            document.body.classList.remove(\"og-timeline-unselectable\");\n            this.events.dispatch(this.events.stopdrag, e);\n        }\n    }\n\n    protected _onCanvasMouseMove = (e: MouseEvent) => {\n        if (this.model.pointsReady) {\n            if (!this._isDragging) {\n\n                if (!this._customFrame) {\n                    this._leftDistance = this.model.minX;\n                    this._rightDistance = this.model.maxX;\n                }\n\n                let rect = this.$pointerCanvas.getBoundingClientRect();\n                let x = e.clientX - rect.left;\n                this.redrawPointerCanvas(x);\n            } else {\n                this.clearPointerCanvas();\n            }\n        }\n    }\n\n    public redrawPointerCanvas(x: number) {\n        this.clearPointerCanvas();\n\n        let pointerDistance = this._leftDistance + (this._rightDistance - this._leftDistance) * x / this.clientWidth;\n        let groundData = this.model.drawData[1];\n        let trackData = this.model.drawData[0];\n\n        let groundPoiIndex;\n\n        if (pointerDistance < 0) {\n            groundPoiIndex = 1;\n            pointerDistance = 0;\n            x = (0 - this._leftDistance) * this.clientWidth / (this._rightDistance - this._leftDistance);\n        } else if (pointerDistance > this.model.planeDistance) {\n            groundPoiIndex = groundData.length - 1;\n            pointerDistance = this.model.planeDistance;\n            x = (pointerDistance - this._leftDistance) * this.clientWidth / (this._rightDistance - this._leftDistance);\n        } else {\n            groundPoiIndex = -1 - binarySearch(groundData, pointerDistance, (a: number, b: GroundItem) => {\n                return a - b[0];\n            });\n        }\n\n        // Ground point\n        let gp0 = groundData[groundPoiIndex - 1],\n            gp1 = groundData[groundPoiIndex];\n        let d = (pointerDistance - gp0[0]) / (gp1[0] - gp0[0]);\n        let groundElv = gp0[1] + d * (gp1[1] - gp0[1]);\n\n        // track point\n        let trackPoiIndex = gp0[4];\n        let tp0 = trackData[trackPoiIndex],\n            tp1 = trackData[trackPoiIndex + 1];\n        d = (pointerDistance - tp0[0]) / (tp1[0] - tp0[0]);\n        let trackElv = tp0[1] + d * (tp1[1] - tp0[1]);\n\n        let trackY = (this.model.maxY - trackElv) * this._pixelsInMeter_y;\n        let groundY = (this.model.maxY - groundElv) * this._pixelsInMeter_y;\n\n        this.events.dispatch(this.events.pointer, pointerDistance, tp0, tp1, gp0, gp1, trackPoiIndex, groundPoiIndex - 1, trackElv - groundElv);\n\n        let ctx = this._pointerCtx;\n\n        // Vertical grey line\n        ctx.lineWidth = 3;\n        ctx.strokeStyle = \"rgba(64,64,64,0.6)\";\n        ctx.beginPath();\n        ctx.moveTo(x * this._canvasScale, 0);\n        ctx.lineTo(x * this._canvasScale, this.clientHeight * this._canvasScale);\n        ctx.stroke();\n\n        // Ground point\n        ctx.beginPath();\n        ctx.arc(x * this._canvasScale, groundY, 4, 0, 2 * Math.PI, false);\n        ctx.fillStyle = '#FFB277';\n        ctx.fill();\n        ctx.lineWidth = 4;\n        ctx.strokeStyle = '#FFB277';\n        ctx.stroke();\n\n        // Track point\n        ctx.beginPath();\n        ctx.arc(x * this._canvasScale, trackY, 4, 0, 2 * Math.PI, false);\n        ctx.fillStyle = '#FFB277';\n        ctx.fill();\n        ctx.lineWidth = 4;\n        ctx.strokeStyle = '#FFB277';\n        ctx.stroke();\n\n        // Vertical white line\n        ctx.lineWidth = 3;\n        ctx.strokeStyle = \"#FFB277\";\n        ctx.beginPath();\n        ctx.moveTo(x * this._canvasScale, groundY);\n        ctx.lineTo(x * this._canvasScale, trackY);\n        ctx.stroke();\n\n        // Altitude label\n        ctx.fillStyle = \"white\";\n        ctx.font = `${28 / devicePixelRatio}px Arial`;\n        ctx.textBaseline = \"middle\";\n        ctx.textAlign = \"left\";\n        ctx.fillText(`${Math.round(trackElv - groundElv).toString()} m`, (x + 5) * this._canvasScale, groundY + (trackY - groundY) * 0.5);\n\n        // distance from the begining label\n        ctx.fillStyle = \"white\";\n        ctx.font = `${28 / devicePixelRatio}px Arial`;\n        ctx.textAlign = \"right\";\n        let distStr = distanceFormatExt(pointerDistance);\n        ctx.fillText(`${distStr[0]} ${distStr[1]}`, (x - 5) * this._canvasScale, (this.clientHeight - 7) * this._canvasScale);\n    }\n\n    protected _onMouseMove = (e: MouseEvent) => {\n        if (this._isDragging && this.model.pointsReady) {\n            let offset = (this._clickPosX - e.clientX);\n            let distanceOffset = offset * this._canvasScale / this._pixelsInMeter_x;\n            this.setFrame(this._clickLeftDistance + distanceOffset, this._clickRightDistance + distanceOffset);\n        }\n    }\n\n    protected _onMouseWheelFF = (e: MouseEventExt) => {\n        this._onMouseWheel(e);\n    }\n    protected _onMouseWheel = (e: MouseEventExt) => {\n        if (this._isMouseOver && this.model.pointsReady) {\n\n            if (!this._customFrame) {\n                this._leftDistance = this.model.minX;\n                this._rightDistance = this.model.maxX;\n            }\n\n            this._customFrame = true;\n\n            let padDist = Math.sign(e.wheelDelta!) * (this._rightDistance - this._leftDistance) / 20;\n\n            let rect = this.$canvas.getBoundingClientRect();\n            let pointerPosX = e.clientX - rect.left,\n                pointerCenterOffsetX = pointerPosX - this.$canvas.clientWidth * 0.5;\n            let distanceCenterOffsetX = pointerCenterOffsetX * this._canvasScale / this._pixelsInMeter_x;\n\n            // Move distance under pointer to a screen center\n            let leftDistance = distanceCenterOffsetX + this._leftDistance + padDist;\n            let rightDistance = distanceCenterOffsetX + this._rightDistance - padDist;\n\n            // move center back to the mouse pointer\n            distanceCenterOffsetX = -pointerCenterOffsetX * (rightDistance - leftDistance) / this.clientWidth;\n\n            this.setFrame(leftDistance + distanceCenterOffsetX, rightDistance + distanceCenterOffsetX);\n\n            this.redrawPointerCanvas(pointerPosX);\n        }\n    }\n\n\n    public get clientWidth(): number {\n        return this.$canvas ? this.$canvas.width / this._canvasScale : 0;\n    }\n\n    public get clientHeight(): number {\n        return this.$canvas ? this.$canvas.height / this._canvasScale : 0;\n    }\n\n    protected _resize() {\n        if (this.el) {\n            this.$canvas.width = this.el.clientWidth * this._canvasScale;\n            this.$canvas.height = this.el.clientHeight * this._canvasScale;\n            this.$canvas.style.width = `${this.el.clientWidth}px`;\n            this.$canvas.style.height = `${this.el.clientHeight}px`;\n\n            this.$pointerCanvas.width = this.el.clientWidth * this._canvasScale;\n            this.$pointerCanvas.height = this.el.clientHeight * this._canvasScale;\n            this.$pointerCanvas.style.width = `${this.el.clientWidth}px`;\n            this.$pointerCanvas.style.height = `${this.el.clientHeight}px`;\n\n            if (this._customFrame) {\n                this._pixelsInMeter_x = this._canvasScale * this.clientWidth / (this._rightDistance - this._leftDistance);\n            }\n        }\n    }\n\n    public clearPointerCanvas() {\n        this._pointerCtx.fillStyle = \"rgba(0,0,0,0)\";\n        this._pointerCtx.clearRect(0, 0, this.clientWidth * this._canvasScale, this.clientHeight * this._canvasScale);\n    }\n\n    public clearCanvas() {\n        const grd = this._ctx.createLinearGradient(0, 0, 0, this.clientHeight * this._canvasScale);\n        grd.addColorStop(0, \"black\");\n        grd.addColorStop(1, this.fillStyle);\n\n        this._ctx.fillStyle = grd;\n        this._ctx.fillRect(0, 0, this.clientWidth * this._canvasScale, this.clientHeight * this._canvasScale);\n    }\n\n    public setFrame(leftDistance: number, rightDistance: number) {\n        this._leftDistance = leftDistance;\n        this._rightDistance = rightDistance;\n        this._customFrame = true;\n        this._pixelsInMeter_x = this._canvasScale * this.clientWidth / (this._rightDistance - this._leftDistance);\n        this.model.setRange(leftDistance, rightDistance);\n        this.draw();\n    }\n\n    public _updateUnits() {\n        if (!this._customFrame) {\n            this._pixelsInMeter_x = this._canvasScale * this.clientWidth / (this.model.maxX - this.model.minX);\n        }\n        this._pixelsInMeter_y = this._canvasScale * this.clientHeight / (this.model.maxY - this.model.minY);\n    }\n\n    public clear() {\n        this.model.clear();\n        this.clearCanvas();\n    }\n\n    public draw() {\n        let trackCoords = this.model.drawData[0];\n        if (trackCoords.length > 1) {\n\n            this._updateUnits();\n\n            this.clearCanvas();\n\n            let groundCoords = this.model.drawData[1];\n\n            this._drawTrack(trackCoords, groundCoords);\n            this._drawTerrain(groundCoords);\n            this._drawWarningAndCollision(groundCoords);\n            this._drawLabels(trackCoords, groundCoords);\n\n        } else {\n            this.clearCanvas();\n        }\n    }\n\n    protected _drawLabels(coords: TrackItem[], groundCoords: GroundItem[]) {\n        let ctx = this._ctx;\n        if (ctx) {\n            let p0 = coords[0];\n            const maxY = this.model.maxY;\n            let x = (-this._leftDistance + p0[0]) * this._pixelsInMeter_x,\n                yt = (maxY - p0[1]) * this._pixelsInMeter_y,\n                yg = (maxY - groundCoords[p0[2]][1]) * this._pixelsInMeter_y;\n\n            // Track points\n            ctx.beginPath();\n            ctx.fillStyle = '#F7F718';\n            ctx.fillRect(x - 4, yt - 4, 8, 8);\n            ctx.stroke();\n\n            // Alt label\n            ctx.fillStyle = \"white\";\n            ctx.font = `${26 / devicePixelRatio}px Arial`;\n            ctx.textBaseline = \"bottom\";\n            ctx.textAlign = \"left\";\n            ctx.fillText(`${Math.round(p0[1] - groundCoords[p0[2]][1]).toString()} m`, x + 1, yt - 10);\n            ctx.stroke();\n\n            for (let i = 1, len = coords.length; i < len; i++) {\n                let pi = coords[i];\n                x = (-this._leftDistance + pi[0]) * this._pixelsInMeter_x;\n                yt = (maxY - pi[1]) * this._pixelsInMeter_y;\n                yg = (maxY - groundCoords[pi[2]][1]) * this._pixelsInMeter_y;\n\n                // Track points\n                ctx.beginPath();\n                ctx.fillStyle = '#F7F718';\n                ctx.fillRect(x - 4, yt - 4, 8, 8);\n                ctx.stroke();\n\n                // Alt label\n                ctx.fillStyle = \"white\";\n                ctx.fillText(`${Math.round(pi[1] - groundCoords[pi[2]][1]).toString()} m`, x + 1, yt - 10);\n                ctx.stroke();\n            }\n        }\n    }\n\n    protected _drawTrack(coords: TrackItem[], groundCoords: GroundItem[]) {\n        let p0 = coords[0];\n        let ctx = this._ctx;\n        if (ctx) {\n            const maxY = this.model.maxY;\n            ctx.lineWidth = LINE_WIDTH;\n            ctx.strokeStyle = TRACK_COLOR;\n            ctx.beginPath();\n            ctx.moveTo((-this._leftDistance + p0[0]) * this._pixelsInMeter_x, (maxY - p0[1]) * this._pixelsInMeter_y);\n            let trackLength = 0;\n            for (let i = 1, len = coords.length; i < len; i++) {\n                let pi = coords[i];\n                ctx.lineTo((-this._leftDistance + pi[0]) * this._pixelsInMeter_x, (maxY - pi[1]) * this._pixelsInMeter_y);\n                let prevP = coords[i - 1];\n                let a = pi[0] - prevP[0],\n                    b = pi[1] - prevP[1],\n                    aa = a * a,\n                    bb = b * b;\n                trackLength += Math.sqrt(aa + bb);\n            }\n            ctx.stroke();\n\n            // Track points lines\n            ctx.lineWidth = 2;\n            ctx.strokeStyle = \"rgba(255,255,255,0.7)\";\n            ctx.beginPath();\n            let x = (-this._leftDistance + p0[0]) * this._pixelsInMeter_x,\n                yt = (maxY - p0[1]) * this._pixelsInMeter_y,\n                yg = (maxY - groundCoords[p0[2]][1]) * this._pixelsInMeter_y;\n            ctx.moveTo(x, yt);\n            ctx.lineTo(x, yg);\n\n            for (let i = 1, len = coords.length; i < len; i++) {\n                let pi = coords[i];\n                x = (-this._leftDistance + pi[0]) * this._pixelsInMeter_x;\n                yt = (maxY - pi[1]) * this._pixelsInMeter_y;\n                yg = (maxY - groundCoords[pi[2]][1]) * this._pixelsInMeter_y;\n                ctx.strokeStyle = \"rgba(255,255,255,0.7)\";\n                ctx.moveTo(x, yt);\n                ctx.lineTo(x, yg);\n            }\n\n            ctx.stroke();\n\n            this.events.dispatch(this.events.tracklength, trackLength);\n        }\n    }\n\n    protected _drawTerrain(coords: number[][]) {\n        let p0 = coords[0];\n        let ctx = this._ctx;\n        if (ctx) {\n            const maxY = this.model.maxY;\n            ctx.lineWidth = LINE_WIDTH;\n            ctx.strokeStyle = TERRAIN_COLOR;\n            ctx.beginPath();\n            ctx.moveTo((-this._leftDistance + p0[0]) * this._pixelsInMeter_x, this.$canvas.height);\n            ctx.lineTo((-this._leftDistance + p0[0]) * this._pixelsInMeter_x, (maxY - p0[1]) * this._pixelsInMeter_y);\n            let groundLength = 0;\n            for (let i = 1, len = coords.length; i < len; i++) {\n                let pi = coords[i];\n                ctx.lineTo((-this._leftDistance + pi[0]) * this._pixelsInMeter_x, (maxY - pi[1]) * this._pixelsInMeter_y);\n                let prevP = coords[i - 1];\n                let a = pi[0] - prevP[0],\n                    b = pi[1] - prevP[1],\n                    aa = a * a,\n                    bb = b * b;\n                groundLength += Math.sqrt(aa + bb);\n            }\n\n            ctx.lineTo((-this._leftDistance + coords[coords.length - 1][0]) * this._pixelsInMeter_x, this.$canvas.height);\n            ctx.closePath();\n            ctx.stroke();\n            ctx.save();\n            ctx.fillStyle = TERRAIN_FILL_COLOR;\n            ctx.globalAlpha = TERRAIN_ALPHA;\n            ctx.fill();\n            ctx.restore();\n            ctx.globalAlpha = 1;\n\n            this.events.dispatch(this.events.groundlength, groundLength);\n        }\n    }\n\n    protected _drawWarningAndCollision(coords: number[][]) {\n        let ctx = this._ctx;\n        if (ctx && coords.length > 1) {\n            let maxY = this.model.maxY;\n            ctx.lineWidth = LINE_WIDTH;\n            ctx.beginPath();\n\n            let warningLength = 0,\n                collisionLength = 0;\n\n            for (let i = 0, len = coords.length - 1; i < len; i++) {\n\n                let pi0 = coords[i],\n                    pi1 = coords[i + 1];\n\n                if (pi0[2] !== SAFE && pi1[2] !== SAFE) {\n\n                    let a = pi1[0] - pi0[0],\n                        b = pi1[1] - pi0[1],\n                        aa = a * a,\n                        bb = b * b;\n\n                    if (pi0[2] === COLLISION) {\n                        ctx.stroke();\n                        ctx.beginPath();\n                        ctx.strokeStyle = LINE_COLORS[COLLISION];\n                        collisionLength += Math.sqrt(aa + bb);\n                    } else if (pi0[2] === WARNING) {\n                        ctx.stroke();\n                        ctx.beginPath();\n                        ctx.strokeStyle = LINE_COLORS[WARNING];\n                        warningLength += Math.sqrt(aa + bb);\n                    }\n\n                    ctx.moveTo((-this._leftDistance + pi0[0]) * this._pixelsInMeter_x, (maxY - pi0[1]) * this._pixelsInMeter_y);\n                    ctx.lineTo((-this._leftDistance + pi1[0]) * this._pixelsInMeter_x, (maxY - pi1[1]) * this._pixelsInMeter_y);\n                }\n            }\n            ctx.stroke();\n\n            this.events.dispatch(this.events.warninglength, warningLength);\n\n            this.events.dispatch(this.events.collisionlength, collisionLength);\n        }\n    }\n}\n\nexport {ElevationProfileView};","import {Entity} from '../../entity/Entity';\nimport {createEvents, EventsHandler} from '../../Events';\nimport {LonLat} from \"../../LonLat\";\nimport {Extent} from \"../../Extent\";\nimport {Object3d} from '../../Object3d';\nimport {Planet} from \"../../scene/Planet\";\nimport {RenderNode} from '../../scene/RenderNode';\nimport {Vector} from '../../layer/Vector';\nimport {Vec2} from '../../math/Vec2';\nimport {Vec3} from '../../math/Vec3';\nimport {IMouseState} from \"../../renderer/RendererEvents\";\nimport {Ellipsoid} from \"../../ellipsoid/Ellipsoid\";\nimport {ILabelParams} from \"../../entity/Label\";\nimport {IRayParams} from \"../../entity/Ray\";\nimport {IBillboardParams} from \"../../entity/Billboard\";\nimport {Ray} from \"../../math/Ray\";\n\nexport interface IElevationProfileSceneParams {\n    name?: string;\n    planet?: Planet;\n}\n\nlet groundObj3d = Object3d.createCylinder(0.33, 0, 1.0, 20, 1, true, false, 0, 0, 0);\nlet headObj3d = Object3d.createCylinder(0.33, 0.33, 1.1, 20, 1, true, true, 0, -0.55, 0);\n\nconst POINTER_RAY_OPTIONS: IRayParams = {\n    startPosition: new Vec3(),\n    endPosition: new Vec3(),\n    startColor: \"rgba(255,131,0,0.2)\",\n    endColor: \"rgba(255,131,0,1.0)\",\n    thickness: 2.7\n}\n\nconst POINTER_BILLBOARD_OPTIONS: IBillboardParams = {\n    src: \"data:image/png;base64,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\",\n    color: \"rgb(255,131,0)\",\n    size: [8, 8]\n}\n\nconst POINTER_LABEL_OPTIONS: ILabelParams = {\n    text: \"\",\n    face: \"arial\",\n    size: 10.5,\n    color: \"rgba(455,455,455,1.0)\",\n    outlineColor: \"rgba(0,0,0,0.34)\",\n    outline: 0.23,\n    align: \"left\",\n    offset: [5, 15, -5]\n};\n\nconst LABEL_OPTIONS: ILabelParams = {\n    face: \"arial\",\n    text: \"\",\n    size: 10.5,\n    color: \"rgba(455,455,455,1.0)\",\n    outlineColor: \"rgba(0,0,0,0.34)\",\n    outline: 0.23,\n    align: \"right\",\n    offset: [-47, 25, 0]\n};\n\nconst GROUND_POINTER_OPTIONS = {\n    instanced: true,\n    tag: \"ground-pointer\",\n    color: \"rgb(0,305,0)\",\n    object3d: groundObj3d\n};\n\nconst HEAD_POINTER_OPTIONS = {\n    instanced: true,\n    tag: \"head-pointer\",\n    color: \"rgb(305,305,0)\",\n    object3d: headObj3d\n};\n\nclass ElevationProfileScene extends RenderNode {\n\n    public events: EventsHandler<ElevationProfileSceneEventsList>;\n\n    protected _planet: Planet | null;\n    protected _trackLayer: Vector;\n    protected _groundPointersLayer: Vector;\n    protected _columnPointersLayer: Vector;\n    protected _headPointersLayer: Vector;\n    protected _heightsLayer: Vector;\n    protected _trackEntity: Entity;\n    protected _pickedGroundEntity: Entity | null;\n    protected _pickedHeadEntity: Entity | null;\n\n\n    protected _pointerLayer: Vector;\n    protected _pointerHeadEntity: Entity;\n    protected _pointerLabelEntity: Entity;\n    protected _pointerRayEntity: Entity;\n\n    protected _startClickPos: Vec2;\n    protected _startEntityPos: Vec2;\n\n    protected _clampToGround: boolean;\n\n    constructor(options: IElevationProfileSceneParams = {}) {\n        super(\"ElevationProfileScene\");\n\n        this.events = createEvents(ELEVATIONPROFILESCENE_EVENTS);\n\n        this._planet = options.planet || null;\n\n        this._pickedGroundEntity = null;\n        this._pickedHeadEntity = null;\n        this._startClickPos = new Vec2();\n        this._startEntityPos = new Vec2();\n        this._clampToGround = true;\n\n        this._trackLayer = new Vector(\"track\", {\n            entities: [],\n            pickingEnabled: false,\n            polygonOffsetUnits: -1.0,\n            relativeToGround: true,\n            hideInLayerSwitcher: true\n        });\n\n        this._groundPointersLayer = new Vector(\"ground-pointers\", {\n            entities: [],\n            pickingEnabled: true,\n            hideInLayerSwitcher: true,\n            scaleByDistance: [1, 5000, 0.02],\n            pickingScale: 1.5\n        });\n\n        this._headPointersLayer = new Vector(\"head-pointers\", {\n            entities: [],\n            pickingEnabled: true,\n            hideInLayerSwitcher: true,\n            scaleByDistance: [1, 10000, 0.02],\n            pickingScale: 1\n        });\n\n        this._columnPointersLayer = new Vector(\"column-pointers\", {\n            entities: [],\n            pickingEnabled: false,\n            hideInLayerSwitcher: true\n        });\n\n        this._trackEntity = new Entity({\n            polyline: {\n                path3v: [],\n                thickness: 3.8,\n                color: \"rgba(0,305,0,0.8)\",\n                isClosed: false\n            }\n        });\n\n        this._trackLayer = new Vector(\"column-pointers\", {\n            entities: [this._trackEntity],\n            pickingEnabled: false,\n            hideInLayerSwitcher: true\n        });\n\n        this._heightsLayer = new Vector(\"heights-labels\", {\n            entities: [],\n            pickingEnabled: false,\n            hideInLayerSwitcher: true\n        });\n\n        this._pointerHeadEntity = new Entity({\n            cartesian: new Vec3(),\n            billboard: POINTER_BILLBOARD_OPTIONS\n        });\n\n        this._pointerLabelEntity = new Entity({\n            cartesian: new Vec3(),\n            label: POINTER_LABEL_OPTIONS\n        });\n\n        this._pointerRayEntity = new Entity({\n            cartesian: new Vec3(),\n            ray: POINTER_RAY_OPTIONS\n        });\n\n        this._pointerLayer = new Vector(\"pointer\", {\n            entities: [this._pointerHeadEntity, this._pointerLabelEntity, this._pointerRayEntity],\n            pickingEnabled: false,\n            hideInLayerSwitcher: true\n        });\n    }\n\n    public flyExtent() {\n        let entities = this._headPointersLayer.getEntities();\n        let minLon = 180, minLat = 180, maxLon = -180, maxLat = -180, maxHeight = -1000000;\n        if (entities.length > 1) {\n            for (let i = 0; i < entities.length; i++) {\n                let ll = entities[i].getLonLat();\n                if (ll.lon < minLon) minLon = ll.lon;\n                if (ll.lat < minLat) minLat = ll.lat;\n                if (ll.lon > maxLon) maxLon = ll.lon;\n                if (ll.lat > maxLat) maxLat = ll.lat;\n                if (ll.height > maxHeight) maxHeight = ll.height;\n            }\n\n            this._planet!.camera.flyExtent(new Extent(new LonLat(minLon, minLat), new LonLat(maxLon, maxLat)), maxHeight, null, 0);\n        }\n    }\n\n    public get planet(): Planet | null {\n        return this._planet;\n    }\n\n    protected _createGroundPointer(groundCart: Vec3, altitude: number = 10): {\n        headEntity: Entity,\n        groundEntity: Entity,\n        columnEntity: Entity,\n        heightLabelEntity: Entity\n    } {\n\n        let surfaceNormal = this.ellipsoid!.getSurfaceNormal3v(groundCart);\n        let headCart = groundCart.add(surfaceNormal.scale(altitude));\n\n        let columnEntity = new Entity({\n            ray: {\n                startPosition: groundCart,\n                endPosition: headCart,\n                startColor: \"rgba(255,255,255,0.2)\",\n                endColor: \"rgba(355,355,355,1.0)\",\n                thickness: 3.2\n            }\n        });\n\n        let groundEntity = new Entity({\n            cartesian: groundCart,\n            geoObject: GROUND_POINTER_OPTIONS,\n        });\n\n        let headEntity = new Entity({\n            cartesian: headCart,\n            geoObject: HEAD_POINTER_OPTIONS,\n            properties: {}\n        });\n\n        let heightLabelEntity = new Entity({\n            cartesian: headCart,\n            label: LABEL_OPTIONS\n        });\n\n        heightLabelEntity.appendChild(new Entity({\n                cartesian: headCart,\n                label: {...LABEL_OPTIONS, offset: [-47, 45, 0]}\n            })\n        );\n\n        const index = this._groundPointersLayer.getEntities().length;\n\n        columnEntity.properties =\n            groundEntity.properties =\n                headEntity.properties = {\n                    index,\n                    altitude: altitude,\n                    lonLatEll: new LonLat(),\n                    headEntity,\n                    groundEntity,\n                    columnEntity,\n                    heightLabelEntity\n                };\n\n        return {headEntity, groundEntity, columnEntity, heightLabelEntity};\n    }\n\n    public setPointerCartesian3v(p: Vec3, height: number) {\n        this._pointerLabelEntity.setCartesian3v(p);\n        this._pointerLabelEntity.label!.setText(`${Math.round(height).toString()} m`);\n\n        this._pointerRayEntity.ray!.setEndPosition3v(p);\n        let n = this._planet!.ellipsoid.getSurfaceNormal3v(p);\n        this._pointerRayEntity.ray!.setStartPosition3v(p.add(n.scale(-height)));\n\n        this._pointerHeadEntity.setCartesian3v(p);\n    }\n\n    public bindPlanet(planet: Planet) {\n        this._planet = planet;\n    }\n\n    public override init() {\n        this._activate();\n    }\n\n    public override onremove() {\n        this._deactivate();\n    }\n\n    public _activate() {\n\n        this._planet!.addLayer(this._trackLayer);\n        this._planet!.addLayer(this._groundPointersLayer);\n        this._planet!.addLayer(this._columnPointersLayer);\n        this._planet!.addLayer(this._headPointersLayer);\n        this._planet!.addLayer(this._heightsLayer);\n        this._planet!.addLayer(this._pointerLayer);\n\n        this.renderer!.events.on(\"ldblclick\", this._onLClick);\n        this.renderer!.events.on(\"mousemove\", this._onMouseMove);\n        this.renderer!.events.on(\"lup\", this._onLUp);\n\n        this._groundPointersLayer.events.on(\"mouseenter\", this._onGroundPointerEnter);\n        this._groundPointersLayer.events.on(\"mouseleave\", this._onGroundPointerLeave);\n        this._groundPointersLayer.events.on(\"ldown\", this._onGroundPointerLDown);\n        this._groundPointersLayer.events.on(\"lup\", this._onGroundPointerLUp);\n\n        this._headPointersLayer.events.on(\"mouseenter\", this._onHeadPointerEnter);\n        this._headPointersLayer.events.on(\"mouseleave\", this._onHeadPointerLeave);\n        this._headPointersLayer.events.on(\"ldown\", this._onHeadPointerLDown);\n        this._headPointersLayer.events.on(\"lup\", this._onHeadPointerLUp);\n\n        this.setPointerVisibility(false);\n    }\n\n    public getPointLonLat(index: number): LonLat | undefined {\n        let entity = this._headPointersLayer.getEntities()[index];\n        if (entity) {\n            return entity.getLonLat();\n        }\n    }\n\n    public getPointsLonLat(): LonLat[] {\n        let entities = this._headPointersLayer.getEntities();\n        let points: LonLat[] = new Array(entities.length);\n        for (let i = 0, len = points.length; i < len; i++) {\n            let ei = entities[i];\n            points[i] = ei.getLonLat();\n        }\n        return points;\n    }\n\n    public getHeightMSL(lonLat: LonLat) {\n        if (this._planet && this._planet.terrain!.geoid) {\n            return this._planet!.terrain!.geoid.getHeightLonLat(lonLat);\n        }\n        return 0;\n    }\n\n    public getHeightELLAsync(lonLat: LonLat): Promise<number> {\n        return new Promise((resolve, reject) => {\n            this._planet!.terrain!.getHeightAsync(lonLat, (hGnd: number) => {\n                if (this._planet) {\n                    let hMsl = this.getHeightMSL(lonLat);\n                    resolve(hGnd + hMsl);\n                } else {\n                    reject();\n                }\n            });\n        });\n    }\n\n    public addPointLonLatArrayAsync(lonLatArr: LonLat[], stopPropagation: boolean = false): Promise<Entity>[] {\n\n        if (!this._planet) {\n            throw new Error(\"Planet is not defined\");\n        }\n\n        let ell = this._planet.ellipsoid;\n\n        for (let i = 0, len = lonLatArr.length - 1; i < len; i++) {\n            let p0 = ell.lonLatToCartesian(lonLatArr[i]),\n                p1 = ell.lonLatToCartesian(lonLatArr[i + 1]);\n            if (p0.distance(p1) > 100000) {\n                throw new Error(\"Track is too long! 100 km is maximum.\");\n            }\n        }\n\n        let res = new Array(lonLatArr.length);\n\n        for (let i = 0, len = lonLatArr.length; i < len; i++) {\n            res[i] = this.addPointLonLatAsync(lonLatArr[i], true);\n        }\n\n        Promise.all(res).then(() => {\n            if (!stopPropagation) {\n                this.events.dispatch(this.events.change, this);\n            }\n        });\n\n        return res;\n    }\n\n    public addPointLonLatAsync(lonLat: LonLat, stopPropagation: boolean = false): Promise<Entity> {\n\n        let headPos = this._planet!.ellipsoid.lonLatToCartesian(lonLat);\n        let n = this._planet!.ellipsoid.getSurfaceNormal3v(headPos);\n\n        let ellLonLat = new LonLat(lonLat.lon, lonLat.lat);\n        let ellPos = this._planet!.ellipsoid.lonLatToCartesian(ellLonLat);\n\n        let {headEntity, groundEntity, columnEntity, heightLabelEntity} = this._createGroundPointer(ellPos);\n\n        this._groundPointersLayer.add(groundEntity);\n        this._columnPointersLayer.add(columnEntity);\n        this._headPointersLayer.add(headEntity);\n        this._heightsLayer.add(heightLabelEntity);\n        this._trackEntity.polyline!.appendPoint3v(headEntity.getCartesian());\n\n        groundEntity.properties.lonLatEll.lon = ellLonLat.lon;\n        groundEntity.properties.lonLatEll.lat = ellLonLat.lat;\n        groundEntity.properties.lonLatEll.height = ellLonLat.height;\n\n        return new Promise((resolve) => {\n            this.getHeightELLAsync(lonLat).then((hEll: number) => {\n\n                groundEntity.properties.lonLatEll.height = hEll;\n\n                let altitude = 10,\n                    groundPos: Vec3;\n\n                if (lonLat.height === 0) {\n                    groundPos = headPos.add(n.scaleTo(hEll));\n                    headPos = groundPos.add(n.scaleTo(altitude));\n                } else {\n                    altitude = lonLat.height - hEll;\n                    groundPos = headPos.sub(n.scaleTo(altitude));\n                }\n\n                groundEntity.setCartesian3v(groundPos);\n                heightLabelEntity.setCartesian3v(headPos);\n                heightLabelEntity.label!.setText(`${hEll.toFixed(1)} m`);\n                heightLabelEntity.childrenNodes[0].label!.setText(`${altitude.toFixed(1)} m`);\n                headEntity.properties.altitude = altitude;\n                headEntity.setCartesian3v(headPos);\n                headEntity.properties.columnEntity.ray!.setStartPosition3v(groundPos);\n                headEntity.properties.columnEntity.ray!.setEndPosition3v(headPos);\n                this._trackEntity.polyline?.setPoint3v(headPos, headEntity.properties.index);\n\n                if (!stopPropagation) {\n                    this.events.dispatch(this.events.addpoint, headEntity, this);\n                    this.events.dispatch(this.events.change, this);\n                }\n\n                resolve(headEntity);\n            });\n        });\n    }\n\n    public addGroundPointLonLatAsync(lonLat: LonLat, altitude: number = 10, stopPropagation: boolean = false): Promise<Entity> {\n        let groundPos = this._planet!.ellipsoid.lonLatToCartesian(lonLat)!;\n        return this._addPoint(groundPos, lonLat, altitude, stopPropagation);\n    }\n\n    public addGroundPoint3vAsync(groundPos: Vec3, altitude: number = 10, stopPropagation: boolean = false): Promise<Entity> {\n        let lonLat = this._planet!.ellipsoid.cartesianToLonLat(groundPos)!;\n        return this._addPoint(groundPos, lonLat, altitude, stopPropagation);\n    }\n\n    protected _addPoint(groundPos: Vec3, lonLat: LonLat, altitude: number, stopPropagation: boolean = false): Promise<Entity> {\n        return new Promise((resolve, reject) => {\n            let {\n                headEntity,\n                groundEntity,\n                columnEntity,\n                heightLabelEntity\n            } = this._createGroundPointer(groundPos, altitude);\n            this._groundPointersLayer.add(groundEntity);\n            this._columnPointersLayer.add(columnEntity);\n            this._headPointersLayer.add(headEntity);\n            this._heightsLayer.add(heightLabelEntity);\n            this._trackEntity.polyline!.appendPoint3v(headEntity.getCartesian());\n\n            groundEntity.properties.lonLatEll.lon = lonLat.lon;\n            groundEntity.properties.lonLatEll.lat = lonLat.lat;\n            groundEntity.properties.lonLatEll.height = lonLat.height;\n\n            this.getHeightELLAsync(lonLat).then((hEll: number) => {\n                groundEntity.properties.lonLatEll.height = lonLat.height = hEll;\n                let groundPos = this._planet!.ellipsoid.lonLatToCartesian(lonLat);\n                let groundNormal = this._planet!.ellipsoid.getSurfaceNormal3v(groundPos);\n                let headPos = groundPos.add(groundNormal.scale(altitude));\n                heightLabelEntity.setCartesian3v(headPos);\n                heightLabelEntity.label!.setText(`${hEll.toFixed(1)} m`);\n                heightLabelEntity.childrenNodes[0].label!.setText(`${altitude.toFixed(1)} m`);\n                headEntity.setCartesian3v(headPos);\n                headEntity.properties.columnEntity.ray!.setEndPosition3v(headPos);\n                this._trackEntity.polyline?.setPoint3v(headPos, headEntity.properties.index);\n                if (!stopPropagation) {\n                    this.events.dispatch(this.events.addpoint, headEntity, this);\n                    this.events.dispatch(this.events.change, this);\n                }\n                resolve(headEntity);\n            });\n        });\n    }\n\n    protected _onLClick = (e: IMouseState) => {\n        let groundPos = this._planet!.getCartesianFromPixelTerrain(e.pos);\n        if (groundPos) {\n            this.addGroundPoint3vAsync(groundPos);\n        }\n    }\n\n    protected _onMouseMove = (e: IMouseState) => {\n        let mouseCart = this._planet!.getCartesianFromMouseTerrain();\n        if (this._pickedGroundEntity) {\n            let d = new Vec2(e.x, e.y).sub(this._startClickPos),\n                p = this._startEntityPos.add(d);\n            let groundCart = this._planet!.getCartesianFromPixelTerrain(p);\n            if (groundCart) {\n                this.setGroundPointCartesian3v(this._pickedGroundEntity!.properties.index, groundCart);\n            }\n        } else if (this._pickedHeadEntity) {\n\n            let cam = this._planet!.camera;\n            let p0 = this._pickedHeadEntity.properties.groundEntity.getCartesian();\n            let groundNormal = this._planet!.ellipsoid.getSurfaceNormal3v(p0);\n            let p1 = p0.add(groundNormal);\n            let p2 = p0.add(cam.getRight());\n            let px = new Vec3();\n\n            if (new Ray(cam.eye, e.direction).hitPlane(p0, p1, p2, px) === Ray.INSIDE) {\n                let h = Vec3.proj_b_to_a(px, p0);\n                let s = h.sub(p0).dot(p0);\n                let headPos = p0.add(groundNormal.scale(Math.sign(s) * h.distance(p0)));\n                this.setHeadPointCartesian3v(this._pickedHeadEntity.properties.index, headPos);\n            }\n        }\n    }\n\n    public setHeadPointCartesian3v(entityIndex: number, headPos: Vec3) {\n\n        const headEntity = this._headPointersLayer.getEntities()[entityIndex];\n\n        if (headEntity) {\n            let groundPos = this._planet!.ellipsoid.lonLatToCartesian(headEntity.properties.lonLatEll);\n            let altitude = headPos.length() - groundPos.length();\n\n            if (altitude <= 0) {\n                headPos = groundPos;\n                altitude = 0;\n            }\n\n            headEntity.properties.altitude = altitude;\n            headEntity.setCartesian3v(headPos);\n            headEntity.properties.columnEntity.ray!.setEndPosition3v(headPos);\n            headEntity.properties.heightLabelEntity.setCartesian3v(headPos);\n            headEntity.properties.heightLabelEntity.childrenNodes[0].label!.setText(`${altitude.toFixed(1)} m`);\n\n            this._trackEntity.polyline!.setPoint3v(headPos, entityIndex);\n\n            this.events.dispatch(this.events.change, this._pickedHeadEntity);\n        }\n    }\n\n    public setGroundPointCartesian3v(entityIndex: number, groundPos: Vec3) {\n\n        let groundEntity = this._groundPointersLayer.getEntities()[entityIndex];\n\n        if (groundEntity) {\n\n            let lonLat = this._planet!.ellipsoid.cartesianToLonLat(groundPos);\n\n            groundEntity.properties.lonLatEll.lon = lonLat.lon;\n            groundEntity.properties.lonLatEll.lat = lonLat.lat;\n            groundEntity.properties.lonLatEll.height = lonLat.height;\n\n            let groundNormal = this._planet!.ellipsoid.getSurfaceNormal3v(groundPos);\n            let headEntity = groundEntity.properties.headEntity;\n            let heightLabelEntity = groundEntity.properties.heightLabelEntity;\n            let altitude = groundEntity.properties.altitude;\n\n            groundEntity.setCartesian3v(groundPos);\n\n            let headPos = groundPos.add(groundNormal.scale(altitude));\n            headEntity.setCartesian3v(headPos);\n            headEntity.properties.columnEntity.ray!.setStartPosition3v(groundPos);\n            headEntity.properties.columnEntity.ray!.setEndPosition3v(headPos);\n            this._trackEntity.polyline?.setPoint3v(headPos, headEntity.properties.index);\n\n            heightLabelEntity.setCartesian3v(headPos);\n            heightLabelEntity.label!.setText(`${lonLat.height.toFixed(1)} m`);\n            heightLabelEntity.childrenNodes[0].label!.setText(`${altitude.toFixed(1)} m`);\n\n            this.events.dispatch(this.events.change, groundEntity.properties.headEntity);\n        }\n    }\n\n    protected _onLUp = (e: IMouseState) => {\n\n    }\n\n    protected _onGroundPointerEnter = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"pointer\";\n    }\n\n    protected _onGroundPointerLeave = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"default\";\n    }\n\n    protected _onGroundPointerLDown = (e: IMouseState) => {\n        this._clampToGround = false;\n        this.renderer!.controls.mouseNavigation.deactivate();\n        this._pickedGroundEntity = e.pickingObject;\n        const coords = this._pickedGroundEntity!.getCartesian();\n        this._startClickPos.set(e.x, e.y);\n        this._startEntityPos = this._planet!.getPixelFromCartesian(coords);\n    }\n\n    protected _onGroundPointerLUp = (e: IMouseState) => {\n        this._clampToGround = true;\n        this.renderer!.controls.mouseNavigation.activate();\n        this._pickedGroundEntity = null;\n    }\n\n    protected _onHeadPointerEnter = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"pointer\";\n    }\n\n    protected _onHeadPointerLeave = (e: IMouseState) => {\n        e.renderer.handler.canvas!.style.cursor = \"default\";\n    }\n\n    protected _onHeadPointerLDown = (e: IMouseState) => {\n        this.renderer!.controls.mouseNavigation.deactivate();\n        this._pickedHeadEntity = e.pickingObject;\n    }\n\n    protected _onHeadPointerLUp = (e: IMouseState) => {\n        this.renderer!.controls.mouseNavigation.activate();\n        this._pickedHeadEntity = null;\n    }\n\n    protected _deactivate() {\n\n        this.renderer!.events.off(\"ldblclick\", this._onLClick);\n        this.renderer!.events.off(\"mousemove\", this._onMouseMove);\n        this.renderer!.events.off(\"lup\", this._onLUp);\n\n        this._groundPointersLayer.events.off(\"mouseenter\", this._onGroundPointerEnter);\n        this._groundPointersLayer.events.off(\"mouseleave\", this._onGroundPointerLeave);\n        this._groundPointersLayer.events.off(\"ldown\", this._onGroundPointerLDown);\n        this._groundPointersLayer.events.off(\"lup\", this._onGroundPointerLUp);\n\n        this._headPointersLayer.events.off(\"mouseenter\", this._onHeadPointerEnter);\n        this._headPointersLayer.events.off(\"mouseleave\", this._onHeadPointerLeave);\n        this._headPointersLayer.events.off(\"ldown\", this._onHeadPointerLDown);\n        this._headPointersLayer.events.off(\"lup\", this._onHeadPointerLUp);\n\n        this._trackLayer.remove();\n        this._groundPointersLayer.remove();\n        this._headPointersLayer.remove();\n        this._columnPointersLayer.remove();\n        this._trackLayer.remove();\n        this._heightsLayer.remove();\n        this._pointerLayer.remove();\n\n        this.clear();\n    }\n\n    public setPointerVisibility(visibility: boolean) {\n        this._pointerLayer.setVisibility(visibility);\n    }\n\n    public setVisibility(visibility: boolean) {\n        this._groundPointersLayer.setVisibility(visibility);\n        this._trackLayer.setVisibility(visibility);\n        this._columnPointersLayer.setVisibility(visibility);\n        this._headPointersLayer.setVisibility(visibility);\n        this._trackLayer.setVisibility(visibility);\n        this._heightsLayer.setVisibility(visibility);\n        this._pointerLayer.setVisibility(visibility);\n    }\n\n\n    public clear() {\n        this._headPointersLayer.setEntities([]);\n        this._groundPointersLayer.setEntities([]);\n        this._columnPointersLayer.setEntities([]);\n        this._heightsLayer.setEntities([]);\n        this._trackEntity.polyline!.setPath3v([]);\n    }\n\n    public override frame() {\n        if (this._clampToGround) {\n            let __tempVec__ = new Vec3();\n            const nodes = this._planet!._renderedNodes;\n            const entities = this._groundPointersLayer.getEntities();\n            for (let i = 0; i < entities.length; i++) {\n                let ei = entities[i];\n                for (let j = 0; j < nodes.length; j++) {\n                    let nj = nodes[j];\n                    if (nj.segment.isEntityInside(ei)) {\n                        nj.segment.getEntityTerrainPoint(ei, __tempVec__);\n                        ei.setCartesian3v(__tempVec__);\n                        ei.properties.columnEntity.ray!.setStartPosition3v(__tempVec__);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n\n    public get ellipsoid(): Ellipsoid | null {\n        return this._planet ? this._planet.ellipsoid : null;\n    }\n}\n\ntype ElevationProfileSceneEventsList = [\n    \"change\", \"addpoint\"\n];\n\nconst ELEVATIONPROFILESCENE_EVENTS: ElevationProfileSceneEventsList = [\n    \"change\", \"addpoint\"\n];\n\nexport {ElevationProfileScene};\n","import {View, IViewParams, ViewEventsList} from \"../../ui/View\";\nimport {Button} from \"../../ui/Button\";\nimport {ToggleButton} from \"../../ui/ToggleButton\";\nimport {EventsHandler} from \"../../Events\";\nimport {ElevationProfile} from \"./ElevationProfile\";\nimport {Dialog} from \"../../ui/Dialog\";\n\nconst TEMPLATE = '<div class=\"og-elevationprofile-buttons\"></div>';\n\nconst RESET_SVG_ICON = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" version=\"1.1\">\n  <g transform=\"translate(0,-289.0625)\">\n    <path d=\"M 15 6 C 10.041282 6 6 10.04128 6 15 C 6 19.95872 10.041282 24 15 24 C 16.586491 24 18.07668 23.58246 19.373047 22.857422 L 17.888672 21.375 C 17.00816 21.772814 16.032235 22 15 22 C 11.122162 22 8 18.87784 8 15 C 8 11.12216 11.122162 8 15 8 C 18.877838 8 22 11.12216 22 15 L 19 15 L 23 20 L 27 15 L 24 15 C 24 10.04128 19.958718 6 15 6 z \" transform=\"translate(0,289.0625)\" />\n  </g>\n</svg>`;\n\nconst LIST_SVG_ICON = `<?xml version=\"1.0\" encoding=\"utf-8\"?><svg width=\"800px\" height=\"800px\" viewBox=\"0 0 32 32\" id=\"icon\" xmlns=\"http://www.w3.org/2000/svg\"><defs><style>.cls-1{fill:none;}</style></defs><title>list</title><rect x=\"10\" y=\"6\" width=\"18\" height=\"2\"/><rect x=\"10\" y=\"24\" width=\"18\" height=\"2\"/><rect x=\"10\" y=\"15\" width=\"18\" height=\"2\"/><rect x=\"4\" y=\"15\" width=\"2\" height=\"2\"/><rect x=\"4\" y=\"6\" width=\"2\" height=\"2\"/><rect x=\"4\" y=\"24\" width=\"2\" height=\"2\"/></svg>`;\n\nconst LOCATION_SVG_ICON = `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- Svg Vector Icons : http://www.onlinewebfonts.com/icon -->\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 256 256\" enable-background=\"new 0 0 256 256\" xml:space=\"preserve\">\n<metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>\n<g><g><path fill=\"#000000\" d=\"M127,169.4c23.7,0,42.8-18.3,42.8-41s-19.2-41-42.8-41c-23.7,0-42.8,18.4-42.8,41S103.4,169.4,127,169.4z\"/><path fill=\"#000000\" d=\"M221.7,120.2c-3.8-44-40.9-78.9-87-82V15h-16.3v23.6c-44.8,4-80.3,38.5-84.1,81.7H10v15.6h24.3c3.8,43.1,39.3,77.4,84.1,81.7V241h16.3v-23.2c46-3.1,83.2-37.9,87-82H246v-15.6H221.7L221.7,120.2L221.7,120.2z M128,201.6c-42.5,0-76.7-33-76.7-73.4c0-40.4,34.5-73.4,76.7-73.4c42.5,0,76.7,33,76.7,73.4C204.7,168.5,170.5,201.6,128,201.6L128,201.6z\"/></g></g>\n</svg>`;\n\ninterface IElevationProfileButtonsViewParams extends IViewParams {\n}\n\ntype ElevationProfileButtonsViewEventsList = [\"reset\", \"list\", \"location\"];\n\nconst ELEVATIONPROFILEBUTTONSVIEW_EVENTS: ElevationProfileButtonsViewEventsList = [\"reset\", \"list\", \"location\"];\n\nexport class ElevationProfileButtonsView extends View<ElevationProfile> {\n\n    public override events: EventsHandler<ElevationProfileButtonsViewEventsList> & EventsHandler<ViewEventsList>;\n    public pointListBtn: ToggleButton;\n\n    constructor(params: IElevationProfileButtonsViewParams = {}) {\n        super({\n            ...params,\n            template: TEMPLATE\n        });\n\n        //@ts-ignore\n        this.events = this.events.registerNames(ELEVATIONPROFILEBUTTONSVIEW_EVENTS);\n\n        this.pointListBtn = new ToggleButton({\n            classList: [\"og-elevationprofile-button\"],\n            icon: LIST_SVG_ICON,\n            title: \"Point List\"\n        });\n\n        this.pointListBtn.events.on(\"change\", (isActive: boolean) => {\n            this.events.dispatch(this.events.list, isActive);\n        });\n    }\n\n    public override render(params: any) {\n        super.render(params);\n\n        let resetBtn = new Button({\n            classList: [\"og-elevationprofile-button\"],\n            icon: RESET_SVG_ICON,\n            title: \"Reset\"\n        });\n        resetBtn.appendTo(this.el!);\n\n        resetBtn.events.on(\"click\", () => {\n            this.model.clear();\n            this.events.dispatch(this.events.reset, this);\n        });\n\n        this.pointListBtn.appendTo(this.el!);\n\n        let locationBtn = new Button({\n            classList: [\"og-elevationprofile-button\", \"og-elevationprofile-button__location\"],\n            icon: LOCATION_SVG_ICON,\n            title: \"View bounds\"\n        });\n        locationBtn.appendTo(this.el!);\n\n        locationBtn.events.on(\"click\", () => {\n            this.events.dispatch(this.events.location, this);\n        });\n\n        return this;\n    }\n}","import {Button} from \"../../ui/Button\";\nimport {View} from \"../../ui/View\";\nimport {IDialogParams, Dialog} from \"../../ui/Dialog\";\nimport {ElevationProfileScene} from \"./ElevationProfileScene\";\nimport {LonLat} from \"../../LonLat\";\n\nconst LIST_TEMPLATE =\n    `<div class=\"og-elevationprofile-list\">\n        <textarea placeholder=\"[[lon, lat, height], [lon, lat, height], ..., [lon, lat, height]]\"></textarea>\n        <div class=\"og-elevationprofile-list-buttons\"></div>\n    </div>`;\n\ninterface IPointListDialog extends IDialogParams {\n    model: ElevationProfileScene;\n}\n\nclass PointListDialog extends Dialog<ElevationProfileScene> {\n\n    public $textarea: HTMLTextAreaElement | null;\n\n    constructor(params: IPointListDialog) {\n        super({\n            title: \"Points List\",\n            visible: false,\n            resizable: true,\n            useHide: true,\n            top: 150,\n            left: 200,\n            width: 400,\n            height: 300,\n            minHeight: 100,\n            minWidth: 100,\n            ...params\n        });\n\n        this.$textarea = null;\n    }\n\n    public override render(params?: any): this {\n        super.render(params);\n\n        let view = new View({\n            template: LIST_TEMPLATE\n        })\n        view.appendTo(this.container!);\n\n        let applyBtn = new Button({\n            classList: [\"og-elevationprofile-list-apply\"],\n            icon: \"Apply\"\n        });\n        applyBtn.appendTo(view.select(\".og-elevationprofile-list-buttons\")!);\n\n        applyBtn.events.on(\"click\", this._onApplyClick);\n\n        this.$textarea = view.select(\"textarea\");\n\n        return this;\n    }\n\n    protected _onApplyClick = () => {\n        try {\n            this.model.clear();\n            let coordsArr = JSON.parse(this.$textarea!.value);\n            let lonLatArr: LonLat[] = new Array(coordsArr.length);\n            for (let i = 0; i < coordsArr.length; i++) {\n                let ci = coordsArr[i];\n                lonLatArr[i] = new LonLat(ci[0], ci[1], ci[2]);\n            }\n            this.model.addPointLonLatArrayAsync(lonLatArr);\n        } catch (err) {\n            console.error(err);\n        }\n    }\n}\n\nexport {PointListDialog};","import {IViewParams, View, ViewEventsList} from '../../ui/View';\nimport {ElevationProfile} from \"./ElevationProfile\";\nimport {distanceFormatExt} from \"../../utils/shared\";\n\nconst TEMPLATE =\n    `<div class=\"og-elevationprofile-legend\">\n        <div class=\"og-elevationprofile-legend__row og-elevationprofile-legend__track\">\n          <div class=\"og-elevationprofile-square\"></div>\n          <div class=\"og-elevationprofile-value\">0</div>\n          <div class=\"og-elevationprofile-units\">m</div>\n        </div>\n        <div class=\"og-elevationprofile-legend__row og-elevationprofile-legend__ground\">\n          <div class=\"og-elevationprofile-square\"></div>\n          <div class=\"og-elevationprofile-value\">0</div>\n          <div class=\"og-elevationprofile-units\">m</div>\n        </div>\n        <div class=\"og-elevationprofile-legend__row og-elevationprofile-legend__warning\">        \n          <div class=\"og-elevationprofile-square\"></div>\n          <div class=\"og-elevationprofile-value\">0</div>\n          <div class=\"og-elevationprofile-units\">m</div>\n        </div>\n        <div class=\"og-elevationprofile-legend__row og-elevationprofile-legend__collision\">\n          <div class=\"og-elevationprofile-square\"></div>\n          <div class=\"og-elevationprofile-value\">0</div>\n          <div class=\"og-elevationprofile-units\">m</div>\n        </div>\n      </div>`;\n\nexport interface IElevationProfileLegendParams extends IViewParams {\n\n}\n\nexport class ElevationProfileLegend extends View<null> {\n\n    public $groundValue: HTMLElement | null;\n    public $trackValue: HTMLElement | null;\n    public $warningValue: HTMLElement | null;\n    public $collisionValue: HTMLElement | null;\n\n    public $trackUnits: HTMLElement | null;\n    public $groundUnits: HTMLElement | null;\n    public $warningUnits: HTMLElement | null;\n    public $collisionUnits: HTMLElement | null;\n\n    constructor(params: IElevationProfileLegendParams = {}) {\n        super({\n            ...params,\n            template: TEMPLATE\n        });\n\n        this.$groundValue = null;\n        this.$trackValue = null;\n        this.$warningValue = null;\n        this.$collisionValue = null;\n\n        this.$trackUnits = null;\n        this.$groundUnits = null;\n        this.$warningUnits = null;\n        this.$collisionUnits = null;\n    }\n\n    public override render(params: any): this {\n        super.render(params);\n\n        this.$trackValue = this.select(\".og-elevationprofile-legend__track .og-elevationprofile-value\");\n        this.$groundValue = this.select(\".og-elevationprofile-legend__ground .og-elevationprofile-value\");\n        this.$warningValue = this.select(\".og-elevationprofile-legend__warning .og-elevationprofile-value\");\n        this.$collisionValue = this.select(\".og-elevationprofile-legend__collision .og-elevationprofile-value\");\n\n        this.$trackUnits = this.select(\".og-elevationprofile-legend__track .og-elevationprofile-units\");\n        this.$groundUnits = this.select(\".og-elevationprofile-legend__ground .og-elevationprofile-units\");\n        this.$warningUnits = this.select(\".og-elevationprofile-legend__warning .og-elevationprofile-units\");\n        this.$collisionUnits = this.select(\".og-elevationprofile-legend__collision .og-elevationprofile-units\");\n\n        return this;\n    }\n\n    public clear() {\n        this.$trackValue && (this.$trackValue.innerText = \"0\");\n        this.$trackUnits && (this.$trackUnits.innerText = \"m\");\n        this.$groundValue && (this.$groundValue.innerText = \"0\");\n        this.$groundUnits && (this.$groundUnits.innerText = \"m\");\n        this.$warningValue && (this.$warningValue.innerText = \"0\");\n        this.$warningUnits && (this.$warningUnits.innerText = \"m\");\n        this.$collisionValue && (this.$collisionValue.innerText = \"0\");\n        this.$collisionUnits && (this.$collisionUnits.innerText = \"m\");\n    }\n\n    public setTrackLength(trackLength: number) {\n        let dist = distanceFormatExt(trackLength);\n        this.$trackValue!.innerText = dist[0];\n        this.$trackUnits!.innerText = dist[1];\n    }\n\n    public setGroundLength(groundLength: number) {\n        let dist = distanceFormatExt(groundLength);\n        this.$groundValue!.innerText = dist[0];\n        this.$groundUnits!.innerText = dist[1];\n    }\n\n    public setWarningLength(warningLength: number) {\n        let warningDist = distanceFormatExt(warningLength);\n        this.$warningValue!.innerText = warningDist[0];\n        this.$warningUnits!.innerText = warningDist[1];\n    }\n\n    public setCollisionLength(collisionLength: number) {\n        let collisionDist = distanceFormatExt(collisionLength);\n        this.$collisionValue!.innerText = collisionDist[0];\n        this.$collisionUnits!.innerText = collisionDist[1];\n    }\n}","import {Control, IControlParams} from \"../Control\";\nimport {Dialog, IDialogParams} from \"../../ui/Dialog\";\nimport {View} from \"../../ui/View\";\nimport {ToggleButton} from \"../../ui/ToggleButton\";\nimport {ElevationProfileView} from \"./ElevationProfileView\";\nimport {ElevationProfileScene} from \"./ElevationProfileScene\";\nimport {MouseNavigation} from \"../MouseNavigation\";\nimport {throttle} from \"../../utils/shared\";\nimport {ElevationProfileButtonsView} from \"./ElevationProfileButtonsView\";\nimport {PointListDialog} from \"./PointListDialog\";\nimport {GroundItem, TrackItem} from \"./ElevationProfile\";\nimport {ElevationProfileLegend} from \"./ElevationProfileLegend\";\n\nconst TEMPLATE =\n    `<div class=\"og-elevationprofile__container\">\n      <div class=\"og-elevationprofile__menu\"></div>\n      <div class=\"og-elevationprofile__graph\"></div>\n    </div>`;\n\ninterface IElevationProfileGraphParams extends IControlParams {\n}\n\nconst ICON_BUTTON_SVG = `<svg style=\"width: 2em; height: 2em;\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M128 896v-158.293333l331.946667-191.573334 160.853333 93.866667L896 480V896H128M896 381.44l-275.2 159.146667-160.853333-92.586667L128 640v-94.293333l331.946667-191.573334 160.853333 93.866667L896 288v93.44z\" fill=\"\" /></svg>`;\n\nexport class ElevationProfileControl extends Control {\n\n    protected _toggleBtn: ToggleButton;\n    protected _dialog: Dialog<null>;\n    protected _graphView: View<null>;\n    protected _poiListDialog: PointListDialog;\n    protected _elevationProfileView: ElevationProfileView;\n    protected _elevationProfileScene: ElevationProfileScene;\n    protected _elevationProfileButtonsView: ElevationProfileButtonsView;\n    protected _elevationProfileLegend: ElevationProfileLegend;\n\n    protected _collectProfileThrottled: () => void;\n\n    constructor(options: IElevationProfileGraphParams = {}) {\n        super({\n            name: \"ElevationProfileControl\",\n            ...options\n        });\n\n        this._elevationProfileScene = new ElevationProfileScene();\n        this._elevationProfileView = new ElevationProfileView();\n        this._elevationProfileLegend = new ElevationProfileLegend();\n        this._elevationProfileButtonsView = new ElevationProfileButtonsView({\n            model: this._elevationProfileView.model\n        });\n\n        this._elevationProfileView.events.on(\"pointer\", this._onElevationProfilePointer);\n        this._elevationProfileView.events.on(\"dblclick\", this._onElevationProfileDblClick);\n        this._elevationProfileView.events.on(\"mouseenter\", this._onElevationProfileMouseEnter);\n        this._elevationProfileView.events.on(\"mouseleave\", this._onElevationProfileMouseLeave);\n\n\n        this._dialog = new Dialog({\n            title: \"Elevation Profile\",\n            visible: false,\n            resizable: true,\n            useHide: true,\n            top: 175,\n            left: 65,\n            width: 400,\n            height: 200,\n            minHeight: 100,\n            minWidth: 100\n        });\n\n        this._graphView = new View({\n            template: TEMPLATE\n        });\n\n        this._poiListDialog = new PointListDialog({\n            model: this._elevationProfileScene\n        });\n\n        this._toggleBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-elevationprofile_button\"],\n            icon: ICON_BUTTON_SVG\n        });\n\n        this._collectProfileThrottled = throttle(() => {\n            let points = this._elevationProfileScene.getPointsLonLat();\n            this._elevationProfileView.model.collectProfile(points);\n        }, 250);\n    }\n\n    override oninit() {\n\n        this._dialog.appendTo(this.planet!.renderer!.div!);\n        this._graphView.appendTo(this._dialog.container!);\n\n        this._toggleBtn.appendTo(this.renderer!.div!);\n        this._dialog.events.on(\"visibility\", (v: boolean) => {\n            this._toggleBtn.setActive(v);\n            if (v) {\n                this.activate();\n                this._elevationProfileView.resize();\n            } else {\n                this.deactivate();\n            }\n        });\n        this._toggleBtn.events.on(\"change\", (isActive: boolean) => {\n            this._dialog.setVisibility(isActive);\n        });\n\n        this._elevationProfileView.appendTo(this._graphView.select(\".og-elevationprofile__graph\")!);\n        this._elevationProfileView.model.bindPlanet(this.planet!);\n        this._elevationProfileView.model.events.on(\"clear\", () => {\n            this._elevationProfileScene.clear();\n            this._elevationProfileLegend.clear();\n        });\n        this._elevationProfileView.model.events.on(\"startcollecting\", () => {\n            this._elevationProfileScene.setPointerVisibility(false);\n        });\n        this._elevationProfileView.events.on(\"tracklength\", (length: number) => {\n            this._elevationProfileLegend.setTrackLength(length);\n        });\n        this._elevationProfileView.events.on(\"groundlength\", (length: number) => {\n            this._elevationProfileLegend.setGroundLength(length);\n        });\n        this._elevationProfileView.events.on(\"warninglength\", (length: number) => {\n            this._elevationProfileLegend.setWarningLength(length);\n        });\n        this._elevationProfileView.events.on(\"collisionlength\", (length: number) => {\n            this._elevationProfileLegend.setCollisionLength(length);\n        });\n\n\n        this._poiListDialog.appendTo(this.planet!.renderer!.div!);\n        this._poiListDialog.events.on(\"visibility\", (isVisible: boolean) => {\n            this._elevationProfileButtonsView.pointListBtn.setActive(isVisible, true);\n        });\n\n        this._elevationProfileLegend.appendTo(this._graphView.select(\".og-elevationprofile__menu\")!);\n\n        this._elevationProfileButtonsView.appendTo(this._graphView.select(\".og-elevationprofile__menu\")!);\n        this._elevationProfileButtonsView.events.on(\"list\", (isActive: boolean) => {\n            this._poiListDialog.setVisibility(isActive);\n        });\n        this._elevationProfileButtonsView.events.on(\"location\", (isActive: boolean) => {\n            this._elevationProfileScene.flyExtent();\n        });\n        this._elevationProfileButtonsView.events.on(\"reset\", (isActive: boolean) => {\n            this._elevationProfileScene.setPointerVisibility(false);\n        });\n\n\n        this._elevationProfileScene.events.on(\"change\", this._onSceneChange);\n    }\n\n    protected _onSceneChange = () => {\n        this._collectProfileThrottled();\n    }\n\n    override onactivate() {\n        (this.renderer!.controls.mouseNavigation as MouseNavigation).deactivateDoubleClickZoom();\n        this.planet && this._elevationProfileScene.bindPlanet(this.planet);\n        this.renderer && this.renderer.addNode(this._elevationProfileScene);\n    }\n\n    override ondeactivate() {\n        this._poiListDialog.setVisibility(false);\n        this._elevationProfileView.model.clear();\n        (this.renderer!.controls.mouseNavigation as MouseNavigation).activateDoubleClickZoom();\n        this.renderer && this.renderer.removeNode(this._elevationProfileScene);\n        this._dialog.hide();\n    }\n\n    protected _onElevationProfilePointer = (pointerDistance: number, tp0: TrackItem, tp1: TrackItem, gp0: GroundItem, gp1: GroundItem, trackPoiIndex: number, groundPoiIndex: number, elevation: number) => {\n\n        let lonLat0 = this._elevationProfileScene.getPointLonLat(trackPoiIndex)!;\n        let lonLat1 = this._elevationProfileScene.getPointLonLat(trackPoiIndex + 1)!;\n\n        let cart0 = this.planet!.ellipsoid.lonLatToCartesian(lonLat0),\n            cart1 = this.planet!.ellipsoid.lonLatToCartesian(lonLat1);\n\n        let d = (pointerDistance - tp0[0]) / (tp1[0] - tp0[0]);\n\n        let dir = cart1.sub(cart0);\n\n        this._elevationProfileScene.setPointerCartesian3v(cart0.add(dir.scale(d)), elevation);\n    }\n\n    protected _onElevationProfileDblClick = (pointerDistance: number, tp0: TrackItem, tp1: TrackItem, gp0: GroundItem, gp1: GroundItem, trackPoiIndex: number, groundPoiIndex: number, elevation: number) => {\n        let lonLat0 = this._elevationProfileScene.getPointLonLat(trackPoiIndex)!;\n        let lonLat1 = this._elevationProfileScene.getPointLonLat(trackPoiIndex + 1)!;\n\n        let cart0 = this.planet!.ellipsoid.lonLatToCartesian(lonLat0),\n            cart1 = this.planet!.ellipsoid.lonLatToCartesian(lonLat1);\n\n        let d = (pointerDistance - tp0[0]) / (tp1[0] - tp0[0]);\n\n        let dir = cart1.sub(cart0);\n\n        let poi = cart0.add(dir.scale(d));\n\n        this.planet!.camera.flyDistance(poi, this.planet!.camera.eye.distance(poi));\n    }\n\n    protected _onElevationProfileMouseEnter = () => {\n        if (this._elevationProfileView.model.pointsReady) {\n            this._elevationProfileScene.setPointerVisibility(true);\n        }\n    }\n\n    protected _onElevationProfileMouseLeave = () => {\n\n    }\n}\n","import {Control, IControlParams} from \"./Control\";\nimport {Dialog} from '../ui/Dialog';\nimport {Slider} from \"../ui/Slider\";\nimport {Sun} from \"./Sun\";\nimport {ToggleButton} from \"../ui/ToggleButton\";\nimport {View} from '../ui/View';\nimport {Atmosphere} from \"./Atmosphere\";\nimport {Color} from \"../ui/Color\";\nimport {AtmosphereParameters} from \"../shaders/atmos\";\n\ninterface IAtmosphereConfigParams extends IControlParams {\n\n}\n\nconst TEMPLATE =\n    `<div class=\"og-atmosphere og-options-container\">\n         \n         <div class=\"og-option og-atmosphere-maxOpacity\"></div> \n         <div class=\"og-option og-atmosphere-minOpacity\"></div>\n         \n       <div class=\"og-emptyline-2\"></div>\n         \n         <div class=\"og-option og-atmosphere-rayleight\"></div>\n         <div class=\"og-option og-atmosphere-mie\"></div>\n         \n       <div class=\"og-emptyline-2\"></div>\n                  \n         <div class=\"og-option og-atmosphere-height\"></div> \n         <div class=\"og-option og-atmosphere-bottomRadius\"></div>\n         \n       <div class=\"og-emptyline-2\"></div>\n         \n         <div class=\"og-option og-atmosphere-mieScatteringCoefficient\"></div>  \n         <div class=\"og-option og-atmosphere-mieExtinctionCoefficient\"></div>\n         \n       <div class=\"og-emptyline-2\"></div>\n         \n         <div class=\"og-option og-atmosphere-rayleighScatteringCoefficientA\"></div>    \n         <div class=\"og-option og-atmosphere-rayleighScatteringCoefficientB\"></div>    \n         <div class=\"og-option og-atmosphere-rayleighScatteringCoefficientC\"></div>\n         \n       <div class=\"og-emptyline-2\"></div>\n         \n         <div class=\"og-option og-atmosphere-ozoneAbsorptionCoefficientA\"></div>    \n         <div class=\"og-option og-atmosphere-ozoneAbsorptionCoefficientB\"></div>    \n         <div class=\"og-option og-atmosphere-ozoneAbsorptionCoefficientC\"></div>\n         \n       <div class=\"og-emptyline-2\"></div>\n         \n         <div class=\"og-option og-atmosphere-ozoneDensityHeight\"></div>    \n         <div class=\"og-option og-atmosphere-ozoneDensityWide\"></div>    \n         \n       <div class=\"og-emptyline-2\"></div>\n         \n         <div class=\"og-option og-atmosphere-sunAngularRadius\"></div> \n         <div class=\"og-option og-atmosphere-sunIntensity\"></div> \n         <div class=\"og-option og-atmosphere-earthAlbedo\"></div>\n       \n    </div>`;\n\nconst ICON_BUTTON_SVG = `<?xml version=\"1.0\" encoding=\"utf-8\"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\n<svg width=\"800px\" height=\"800px\" viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#000000\" d=\"M135.688 18.5c-6.798 74.842-23.842 85.39-107.907 59.656 84.85 52.022 73.57 64.954-6.843 96.938 87.743-10.27 103.29 4.89 70.75 87.594 17.805-27.56 32.5-44.498 46.282-54.47-11.813 28.26-18.345 59.274-18.345 91.813 0 84.184 43.71 157.96 109.656 200.376-41.624-43.834-67.686-102.7-67.686-167.875 0-134.923 109.45-244.405 244.375-244.405 30.92 0 60.76 5.762 88 16.25-38.584-26.87-85.517-42.625-136.064-42.625-55.257 0-106.14 18.802-146.562 50.375 4.627-18.783 17.39-38.073 41.03-60.906C190.18 90.942 153.53 95.634 135.69 18.5zm10.03 77.188c5.67.002 11.428 1.247 16.876 3.874 14.506 6.998 22.72 21.81 22 36.938-10.26 10.87-19.507 22.696-27.594 35.344-9.035 2.753-19.075 2.27-28.25-2.156-19.37-9.343-27.5-32.6-18.156-51.97 6.715-13.92 20.638-22.036 35.125-22.03z\"/></svg>`;\n\n/**\n * Helps to set up atmosphere parameters.\n */\nexport class AtmosphereConfig extends Control {\n    protected _toggleBtn: ToggleButton;\n    protected _dialog: Dialog<null>;\n    protected _panel: View<null>;\n\n    public $maxOpacity: HTMLElement | null;\n    public $minOpacity: HTMLElement | null;\n    public $rayleight: HTMLElement | null;\n    public $mie: HTMLElement | null;\n    public $height: HTMLElement | null;\n    public $bottomRadius: HTMLElement | null;\n    public $mieScatteringCoefficient: HTMLElement | null;\n    public $mieExtinctionCoefficient: HTMLElement | null;\n    public $rayleighScatteringCoefficientA: HTMLElement | null;\n    public $rayleighScatteringCoefficientB: HTMLElement | null;\n    public $rayleighScatteringCoefficientC: HTMLElement | null;\n    public $ozoneAbsorptionCoefficientA: HTMLElement | null;\n    public $ozoneAbsorptionCoefficientB: HTMLElement | null;\n    public $ozoneAbsorptionCoefficientC: HTMLElement | null;\n    public $sunAngularRadius: HTMLElement | null;\n    public $sunIntensity: HTMLElement | null;\n    public $groundAlbedo: HTMLElement | null;\n    public $ozoneDensityHeight: HTMLElement | null;\n    public $ozoneDensityWide: HTMLElement | null;\n\n    protected _maxOpacity: Slider;\n    protected _minOpacity: Slider;\n    protected _rayleight: Slider;\n    protected _mie: Slider;\n    protected _height: Slider;\n    protected _bottomRadius: Slider;\n    protected _mieScatteringCoefficient: Slider;\n    protected _mieExtinctionCoefficient: Slider;\n    protected _rayleighScatteringCoefficientA: Slider;\n    protected _rayleighScatteringCoefficientB: Slider;\n    protected _rayleighScatteringCoefficientC: Slider;\n    protected _ozoneAbsorptionCoefficientA: Slider;\n    protected _ozoneAbsorptionCoefficientB: Slider;\n    protected _ozoneAbsorptionCoefficientC: Slider;\n    protected _sunAngularRadius: Slider;\n    protected _sunIntensity: Slider;\n    protected _groundAlbedo: Slider;\n    protected _ozoneDensityHeight: Slider;\n    protected _ozoneDensityWide: Slider;\n\n    protected _parameters: AtmosphereParameters;\n\n    constructor(options: IAtmosphereConfigParams = {}) {\n        super(options);\n\n        this.$maxOpacity = null;\n        this.$minOpacity = null;\n        this.$rayleight = null;\n        this.$mie = null;\n        this.$height = null;\n        this.$bottomRadius = null;\n        this.$mieScatteringCoefficient = null;\n        this.$mieExtinctionCoefficient = null;\n        this.$rayleighScatteringCoefficientA = null;\n        this.$rayleighScatteringCoefficientB = null;\n        this.$rayleighScatteringCoefficientC = null;\n        this.$ozoneAbsorptionCoefficientA = null;\n        this.$ozoneAbsorptionCoefficientB = null;\n        this.$ozoneAbsorptionCoefficientC = null;\n        this.$sunAngularRadius = null;\n        this.$sunIntensity = null;\n        this.$groundAlbedo = null;\n        this.$ozoneDensityHeight = null;\n        this.$ozoneDensityWide = null;\n\n        this._toggleBtn = new ToggleButton({\n            classList: [\"og-map-button\", \"og-atmosphere_button\"],\n            icon: ICON_BUTTON_SVG\n        });\n\n        this._dialog = new Dialog({\n            title: \"Atmosphere Parameters\",\n            visible: false,\n            useHide: true,\n            top: 60,\n            left: 60,\n            width: 720\n        });\n\n        this._dialog.events.on(\"visibility\", (v: boolean) => {\n            this._toggleBtn.setActive(v);\n        });\n\n        this._panel = new View({\n            template: TEMPLATE\n        });\n\n        this._maxOpacity = new Slider({\n            label: \"Max.opacity\",\n            max: 5\n        });\n\n        this._minOpacity = new Slider({\n            label: \"Min.opacity\",\n            max: 5\n        });\n\n        this._rayleight = new Slider({\n            label: \"Rayleight Scale\",\n            min: -10.0,\n            max: 10.0\n        });\n\n        this._mie = new Slider({\n            label: \"Mie Scale\",\n            min: -10.0,\n            max: 10.0\n        });\n\n        this._height = new Slider({\n            label: \"Height\",\n            max: 1000000.0\n        });\n\n        this._bottomRadius = new Slider({\n            label: \"Planet Radius\",\n            max: 5 * 6356752.3142451793\n        });\n\n        this._mieScatteringCoefficient = new Slider({\n            label: \"Mie Scattering Coefficient e-6\",\n            min: -10 * 3.996,\n            max: 10 * 3.996\n        });\n\n        this._mieExtinctionCoefficient = new Slider({\n            label: \"Mie Extinction Coef.e-6\",\n            min: -10 * 4.440,\n            max: 10 * 4.440\n        });\n\n        this._rayleighScatteringCoefficientA = new Slider({\n            label: \"Rayleight Scattering Coef A.e-6\",\n            min: -10 * 5.802,\n            max: 10 * 5.802\n        });\n\n        this._rayleighScatteringCoefficientB = new Slider({\n            label: \"Rayleight Scattering Coef B.e-6\",\n            min: -10 * 13.558,\n            max: 10 * 13.558\n        });\n\n        this._rayleighScatteringCoefficientC = new Slider({\n            label: \"Rayleight Scattering Coef C.e-6\",\n            min: -10 * 33.100,\n            max: 10 * 33.100\n        });\n\n        this._ozoneAbsorptionCoefficientA = new Slider({\n            label: \"Ozone absorbtion Coef A.e-6\",\n            min: -10 * 0.650,\n            max: 10 * 0.650\n        });\n\n        this._ozoneAbsorptionCoefficientB = new Slider({\n            label: \"Ozone absorbtion Coef B.e-6\",\n            min: -10 * 0.650,\n            max: 10 * 1.881\n        });\n\n        this._ozoneAbsorptionCoefficientC = new Slider({\n            label: \"Ozone absorbtion Coef C.e-6\",\n            min: -10 * 0.085,\n            max: 10 * 0.085\n        });\n\n        this._ozoneDensityHeight = new Slider({\n            label: \"Ozone Density Height\",\n            max: 100 * 25000\n        });\n\n        this._ozoneDensityWide = new Slider({\n            label: \"Ozone Density Wide\",\n            max: 100 * 25000\n        });\n\n        this._sunAngularRadius = new Slider({\n            label: \"Sun Angular Radius\",\n            max: 1000 * 0.004685\n        });\n\n        this._sunIntensity = new Slider({\n            label: \"Sun Intensity\",\n            max: 10 * 1.0\n        });\n\n        this._groundAlbedo = new Slider({\n            label: \"Earth Albedo\",\n            max: 10 * 0.05\n        });\n\n        this._parameters = {\n            ATMOS_HEIGHT: 0,\n            RAYLEIGH_SCALE: 0,\n            MIE_SCALE: 0,\n            GROUND_ALBEDO: 0,\n            BOTTOM_RADIUS: 0,\n            rayleighScatteringCoefficient: [0, 0, 0],\n            mieScatteringCoefficient: 0,\n            mieExtinctionCoefficient: 0,\n            ozoneAbsorptionCoefficient: [0, 0, 0],\n            SUN_ANGULAR_RADIUS: 0,\n            SUN_INTENSITY: 0,\n            ozoneDensityHeight: 0,\n            ozoneDensityWide: 0,\n        }\n    }\n\n    public override oninit() {\n\n        this._toggleBtn.appendTo(this.renderer!.div!);\n        this._dialog.appendTo(this.renderer!.div!);\n        this._panel.appendTo(this._dialog.container!);\n\n        if (this._panel.el) {\n            this.$height = this._panel.el.querySelector(\".og-option.og-atmosphere-height\");\n            this.$maxOpacity = this._panel.el.querySelector(\".og-option.og-atmosphere-maxOpacity\");\n            this.$minOpacity = this._panel.el.querySelector(\".og-option.og-atmosphere-minOpacity\");\n            this.$rayleight = this._panel.el.querySelector(\".og-option.og-atmosphere-rayleight\");\n            this.$mie = this._panel.el.querySelector(\".og-option.og-atmosphere-mie\");\n            this.$bottomRadius = this._panel.el.querySelector(\".og-option.og-atmosphere-bottomRadius\");\n            this.$mieScatteringCoefficient = this._panel.el.querySelector(\".og-option.og-atmosphere-mieScatteringCoefficient\");\n            this.$mieExtinctionCoefficient = this._panel.el.querySelector(\".og-option.og-atmosphere-mieExtinctionCoefficient\");\n            this.$rayleighScatteringCoefficientA = this._panel.el.querySelector(\".og-option.og-atmosphere-rayleighScatteringCoefficientA\");\n            this.$rayleighScatteringCoefficientB = this._panel.el.querySelector(\".og-option.og-atmosphere-rayleighScatteringCoefficientB\");\n            this.$rayleighScatteringCoefficientC = this._panel.el.querySelector(\".og-option.og-atmosphere-rayleighScatteringCoefficientC\");\n            this.$ozoneAbsorptionCoefficientA = this._panel.el.querySelector(\".og-option.og-atmosphere-ozoneAbsorptionCoefficientA\");\n            this.$ozoneAbsorptionCoefficientB = this._panel.el.querySelector(\".og-option.og-atmosphere-ozoneAbsorptionCoefficientB\");\n            this.$ozoneAbsorptionCoefficientC = this._panel.el.querySelector(\".og-option.og-atmosphere-ozoneAbsorptionCoefficientC\");\n            this.$sunAngularRadius = this._panel.el.querySelector(\".og-option.og-atmosphere-sunAngularRadius\");\n            this.$sunIntensity = this._panel.el.querySelector(\".og-option.og-atmosphere-sunIntensity\");\n            this.$groundAlbedo = this._panel.el.querySelector(\".og-option.og-atmosphere-earthAlbedo\");\n            this.$ozoneDensityHeight = this._panel.el.querySelector(\".og-option.og-atmosphere-ozoneDensityHeight\");\n            this.$ozoneDensityWide = this._panel.el.querySelector(\".og-option.og-atmosphere-ozoneDensityWide\");\n        }\n\n        this._toggleBtn.events.on(\"change\", (isActive: boolean) => {\n            this._dialog.setVisibility(isActive);\n        });\n\n        this._maxOpacity.appendTo(this.$maxOpacity!);\n        this._minOpacity.appendTo(this.$minOpacity!);\n        this._height.appendTo(this.$height!);\n        this._rayleight.appendTo(this.$rayleight!);\n        this._mie.appendTo(this.$mie!);\n        this._bottomRadius.appendTo(this.$bottomRadius!);\n        this._mieScatteringCoefficient.appendTo(this.$mieScatteringCoefficient!);\n        this._mieExtinctionCoefficient.appendTo(this.$mieExtinctionCoefficient!);\n        this._rayleighScatteringCoefficientA.appendTo(this.$rayleighScatteringCoefficientA!);\n        this._rayleighScatteringCoefficientB.appendTo(this.$rayleighScatteringCoefficientB!);\n        this._rayleighScatteringCoefficientC.appendTo(this.$rayleighScatteringCoefficientC!);\n        this._ozoneAbsorptionCoefficientA.appendTo(this.$ozoneAbsorptionCoefficientA!);\n        this._ozoneAbsorptionCoefficientB.appendTo(this.$ozoneAbsorptionCoefficientB!);\n        this._ozoneAbsorptionCoefficientC.appendTo(this.$ozoneAbsorptionCoefficientC!);\n        this._sunAngularRadius.appendTo(this.$sunAngularRadius!);\n        this._sunIntensity.appendTo(this.$sunIntensity!);\n        this._groundAlbedo.appendTo(this.$groundAlbedo!);\n        this._ozoneDensityHeight.appendTo(this.$ozoneDensityHeight!);\n        this._ozoneDensityWide.appendTo(this.$ozoneDensityWide!);\n\n        if (this.planet) {\n\n            this._parameters = this.planet.atmosphereControl.parameters;\n\n            this._height.value = this._parameters.ATMOS_HEIGHT;\n            this._rayleight.value = this._parameters.RAYLEIGH_SCALE;\n            this._mie.value = this._parameters.MIE_SCALE;\n            this._bottomRadius.value = this._parameters.BOTTOM_RADIUS;\n            this._mieScatteringCoefficient.value = this._parameters.mieScatteringCoefficient;\n            this._mieExtinctionCoefficient.value = this._parameters.mieExtinctionCoefficient;\n            this._rayleighScatteringCoefficientA.value = this._parameters.rayleighScatteringCoefficient[0];\n            this._rayleighScatteringCoefficientB.value = this._parameters.rayleighScatteringCoefficient[1];\n            this._rayleighScatteringCoefficientC.value = this._parameters.rayleighScatteringCoefficient[2];\n            this._ozoneAbsorptionCoefficientA.value = this._parameters.ozoneAbsorptionCoefficient[0];\n            this._ozoneAbsorptionCoefficientB.value = this._parameters.ozoneAbsorptionCoefficient[1];\n            this._ozoneAbsorptionCoefficientC.value = this._parameters.ozoneAbsorptionCoefficient[2];\n            this._sunAngularRadius.value = this._parameters.SUN_ANGULAR_RADIUS;\n            this._sunIntensity.value = this._parameters.SUN_INTENSITY;\n            this._groundAlbedo.value = this._parameters.GROUND_ALBEDO;\n            this._ozoneDensityHeight.value = this._parameters.ozoneDensityHeight;\n            this._ozoneDensityWide.value = this._parameters.ozoneDensityWide;\n        }\n\n\n        this._minOpacity.value = this.planet!.atmosphereMinOpacity;\n        this._minOpacity.events.on(\"change\", (val: number) => {\n            this.planet!.atmosphereMinOpacity = val;\n        });\n\n        this._maxOpacity.value = this.planet!.atmosphereMaxOpacity;\n        this._maxOpacity.events.on(\"change\", (val: number) => {\n            this.planet!.atmosphereMaxOpacity = val;\n            //let atmos = this.planet!.renderer!.controls.Atmosphere as Atmosphere;\n            //atmos.opacity = val;\n        });\n\n        this._rayleight.events.on(\"change\", (val: number) => {\n            this._parameters.RAYLEIGH_SCALE = val;\n            this._update();\n        });\n\n        this._mie.events.on(\"change\", (val: number) => {\n            this._parameters.MIE_SCALE = val;\n            this._update();\n        });\n\n        this._height.events.on(\"change\", (val: number) => {\n            this._parameters.ATMOS_HEIGHT = val;\n            this._update();\n        });\n\n        this._bottomRadius.events.on(\"change\", (val: number) => {\n            this._parameters.BOTTOM_RADIUS = val;\n            this._update();\n        });\n\n        this._mieScatteringCoefficient.events.on(\"change\", (val: number) => {\n            this._parameters.mieScatteringCoefficient = val;\n            this._update();\n        });\n\n        this._mieExtinctionCoefficient.events.on(\"change\", (val: number) => {\n            this._parameters.mieExtinctionCoefficient = val;\n            this._update();\n        });\n\n        this._rayleighScatteringCoefficientA.events.on(\"change\", (val: number) => {\n            this._parameters.rayleighScatteringCoefficient[0] = val;\n            this._update();\n        });\n\n        this._rayleighScatteringCoefficientB.events.on(\"change\", (val: number) => {\n            this._parameters.rayleighScatteringCoefficient[1] = val;\n            this._update();\n        });\n\n        this._rayleighScatteringCoefficientC.events.on(\"change\", (val: number) => {\n            this._parameters.rayleighScatteringCoefficient[2] = val;\n            this._update();\n        });\n\n        this._ozoneAbsorptionCoefficientA.events.on(\"change\", (val: number) => {\n            this._parameters.ozoneAbsorptionCoefficient[0] = val;\n            this._update();\n        });\n\n        this._ozoneAbsorptionCoefficientB.events.on(\"change\", (val: number) => {\n            this._parameters.ozoneAbsorptionCoefficient[1] = val;\n            this._update();\n        });\n\n        this._ozoneAbsorptionCoefficientC.events.on(\"change\", (val: number) => {\n            this._parameters.ozoneAbsorptionCoefficient[2] = val;\n            this._update();\n        });\n\n        this._sunAngularRadius.events.on(\"change\", (val: number) => {\n            this._parameters.SUN_ANGULAR_RADIUS = val;\n            this._update();\n        });\n\n        this._sunIntensity.events.on(\"change\", (val: number) => {\n            this._parameters.SUN_INTENSITY = val;\n            this._update();\n        });\n\n        this._groundAlbedo.events.on(\"change\", (val: number) => {\n            this._parameters.GROUND_ALBEDO = val;\n            this._update();\n        });\n\n        this._ozoneDensityHeight.events.on(\"change\", (val: number) => {\n            this._parameters.ozoneDensityHeight = val;\n            this._update();\n        });\n\n        this._ozoneDensityWide.events.on(\"change\", (val: number) => {\n            this._parameters.ozoneDensityWide = val;\n            this._update();\n        });\n    }\n\n    protected _update() {\n        if (this.planet) {\n            this.planet.atmosphereControl.setParameters(this._parameters);\n        }\n    }\n}\n","import {Program} from '../webgl/Program';\nimport {RenderNode} from './RenderNode';\nimport {WebGLBufferExt} from \"../webgl/Handler\";\n\nclass Axes extends RenderNode {\n\n    public size: number;\n    public axesBuffer: WebGLBufferExt | null;\n    public axesColorBuffer: WebGLBufferExt | null;\n\n    constructor(size: number = 100) {\n        super(\"Axes\");\n\n        this.size = size;\n        this.axesBuffer = null;\n        this.axesColorBuffer = null;\n    }\n\n    public override init() {\n        this.createAxesBuffer(this.size);\n        this.drawMode = this.renderer!.handler.gl!.LINES;\n        this.renderer!.handler.addProgram(new Program(\"axesShader\", {\n            uniforms: {\n                projectionViewMatrix: 'mat4'\n            },\n            attributes: {\n                aVertexPosition: 'vec3',\n                aVertexColor: 'vec4'\n            },\n            vertexShader:\n                `attribute vec3 aVertexPosition;\n            attribute vec4 aVertexColor;\n            uniform mat4 projectionViewMatrix;\n            varying vec4 vColor;\n            void main(void) {\n                gl_Position = projectionViewMatrix * vec4(aVertexPosition, 1.0);\n                vColor = aVertexColor;\n            }`,\n            fragmentShader:\n                `precision highp float;\n            varying vec4 vColor;\n            void main(void) {\n                gl_FragColor = vColor;\n            }`\n        }));\n    }\n\n    public override frame() {\n\n        this.renderer!.handler.programs.axesShader.activate().set({\n            projectionViewMatrix: this.renderer!.activeCamera!.getProjectionViewMatrix(),\n            aVertexPosition: this.axesBuffer,\n            aVertexColor: this.axesColorBuffer\n        });\n\n        this.renderer!.handler.programs.axesShader.drawArrays(this.drawMode, this.axesBuffer!.numItems);\n    }\n\n    public createAxesBuffer(gridSize: number) {\n\n        const vertices = [\n            0.0, 0.0, 0.0, gridSize - 1, 0.0, 0.0, // x - R\n            0.0, 0.0, 0.0, 0.0, gridSize - 1, 0.0, // y - B  \n            0.0, 0.0, 0.0, 0.0, 0.0, gridSize - 1  // z - G\n        ];\n\n        const colors = [\n            1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 1.0,   // x - R\n            0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 1.0, 1.0,   // y - B\n            0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0    // z - G\n        ];\n\n        this.axesBuffer = this.renderer!.handler.createArrayBuffer(new Float32Array(vertices), 3, 6);\n        this.axesColorBuffer = this.renderer!.handler.createArrayBuffer(new Float32Array(colors), 4, 6);\n    }\n}\n\nexport {Axes};\n","/**\n * @module og/segment/SegmentHelper\n */\n\nimport {N, W, S, E} from '../quadTree/quadTree';\n\ntype IndexTypeArray = Uint32Array;\ntype IndexesTable = [IndexTypeArray[][], IndexTypeArray[][], IndexTypeArray[][], IndexTypeArray[][]];\n\n\nfunction NewIndexesTypedArray(arr: number[]): IndexTypeArray {\n    return new Uint32Array(arr);\n}\n\nfunction NewIndexesTypedArrayEmpty(size: number): IndexTypeArray {\n    return new Uint32Array(size);\n}\n\nfunction createCenterBodyIndexes(size: number): IndexTypeArray {\n\n    let indexes = [];\n\n    let i0 = 1,\n        j0 = 1;\n\n    let i1 = 1,\n        j1 = 1;\n\n    let ind1 = 0, ind2 = 0, nr = 0;\n    for (let i = i0; i < size - 1 - i1; i++) {\n        for (let j = j0; j < size - j1; j++) {\n            ind1 = i * size + j;\n            nr = (i + 1) * size;\n            ind2 = nr + j;\n            indexes.push(ind1, ind2);\n        }\n        indexes.push(ind2, nr + j0);\n    }\n    indexes.push(indexes[indexes.length - 1], size * size - size);\n\n    return NewIndexesTypedArray(indexes);\n}\n\nfunction createWestNeighborSkirt(size: number, deltaGr: number): IndexTypeArray {\n    let indexes = [];\n    const grCount = (size - 1) / deltaGr;\n    const b = size * size - size;\n    let k = 0;\n    for (let i = 0; i < size - 2; i++) {\n        if (i % grCount === 0) {\n            k = i;\n        }\n        let rind = b - size * i - size + 1,\n            lind = b - size * k;\n        indexes.push(lind, rind);\n    }\n\n    if (deltaGr === (size - 1)) {\n        indexes.push(size);\n        indexes.push(0);\n    }\n\n    return NewIndexesTypedArray(indexes);\n}\n\nfunction createNorthNeighborSkirt(size: number, deltaGr: number): IndexTypeArray {\n    let indexes = [];\n    const grCount = (size - 1) / deltaGr;\n    let k = 0;\n    for (let i = 0; i < size - 2; i++) {\n        if (i % grCount === 0) {\n            k = i;\n        }\n        let rind = size + i + 1,\n            lind = k;\n        indexes.push(lind, rind);\n    }\n\n    if (deltaGr === (size - 1)) {\n        indexes.push(size - 2);\n        indexes.push(size - 1);\n    }\n\n    return NewIndexesTypedArray(indexes);\n}\n\nfunction createEastNeighborSkirt(size: number, deltaGr: number): IndexTypeArray {\n    let indexes = [];\n    const grCount = (size - 1) / deltaGr;\n    let k = 0;\n    for (let i = 0; i < size - 2; i++) {\n        if (i % grCount === 0) {\n            k = i;\n        }\n        let rind = size * (i + 1) + size - 2,\n            lind = size + size * k - 1;\n        indexes.push(lind, rind);\n    }\n\n    if (deltaGr === (size - 1)) {\n        indexes.push(size * (size - 1) - 1);\n        indexes.push(size * size - 1);\n    }\n\n    return NewIndexesTypedArray(indexes);\n}\n\nfunction createSouthNeighborSkirt(size: number, deltaGr: number): IndexTypeArray {\n    let indexes = [];\n    const grCount = (size - 1) / deltaGr;\n    let k = 0;\n    const rb = size * (size - 1) - 2;\n    const lb = size * size - 1;\n    for (let i = 0; i < size - 2; i++) {\n        if (i % grCount === 0) {\n            k = i;\n        }\n        let rind = rb - i,\n            lind = lb - k;\n        indexes.push(lind, rind);\n    }\n\n    if (deltaGr === (size - 1)) {\n        indexes.push(size * size - size + 1);\n    }\n    indexes.push(size * size - size);\n\n    return NewIndexesTypedArray(indexes);\n}\n\nfunction initIndexesBodySkirts(pow: number): IndexesTable {\n    let table: IndexesTable = [[], [], [], []];\n\n    for (let i = 0; i <= pow; i++) {\n        let d = Math.pow(2, i),\n            d1 = d + 1;\n\n        table[N][i] = [];\n        table[W][i] = [];\n        table[S][i] = [];\n        table[E][i] = [];\n\n        for (let j = 0; j <= pow; j++) {\n            let dd = Math.pow(2, j);\n            table[W][i][j] = createWestNeighborSkirt(d1, dd);\n            table[N][i][j] = createNorthNeighborSkirt(d1, dd);\n            table[E][i][j] = createEastNeighborSkirt(d1, dd);\n            table[S][i][j] = createSouthNeighborSkirt(d1, dd);\n\n        }\n    }\n    return table;\n}\n\nfunction initIndexBodiesTable(pow: number): IndexTypeArray[] {\n    let table = [];\n    for (let i = 0; i <= pow; i++) {\n        const d = Math.pow(2, i);\n        table[i] = createCenterBodyIndexes(d + 1);\n    }\n    return table;\n}\n\nfunction createTextureCoords(size: number): Uint16Array {\n    let texCoords = new Uint16Array((size + 1) * (size + 1) * 2);\n    let k = 0;\n    for (let i = 0; i <= size; i++) {\n        for (let j = 0; j <= size; j++) {\n            texCoords[k++] = j / size * 0xFFFF;\n            texCoords[k++] = i / size * 0xFFFF;\n        }\n    }\n    return texCoords;\n}\n\nclass SegmentHelper {\n\n    protected _maxGridSize: number;\n    public centerIndexesTable: IndexTypeArray[];\n    public skirtsIndexesTable: IndexesTable;\n\n    constructor(maxGridSize: number = 0) {\n        this._maxGridSize = maxGridSize;\n        this.centerIndexesTable = initIndexBodiesTable(this._maxGridSize)\n        this.skirtsIndexesTable = initIndexesBodySkirts(this._maxGridSize);\n    }\n\n    public get maxGridSize(): number {\n        return this._maxGridSize;\n    }\n\n    public init() {\n        this.centerIndexesTable = initIndexBodiesTable(this._maxGridSize);\n        this.skirtsIndexesTable = initIndexesBodySkirts(this._maxGridSize);\n    }\n\n    public setMaxGridSize(gridSize: number) {\n        this._maxGridSize = gridSize;\n        this.init();\n    }\n\n    public createSegmentIndexes(size: number, sidesSizes: [number, number, number, number]) {\n        if (size) {\n            let c = this.centerIndexesTable[size],\n                w = this.skirtsIndexesTable[W][size][sidesSizes[W]],\n                n = this.skirtsIndexesTable[N][size][sidesSizes[N]],\n                e = this.skirtsIndexesTable[E][size][sidesSizes[E]],\n                s = this.skirtsIndexesTable[S][size][sidesSizes[S]];\n\n            let indexes = NewIndexesTypedArrayEmpty(c.length + w.length + n.length + e.length + s.length);\n\n            indexes.set(c, 0);\n            indexes.set(w, c.length);\n            indexes.set(n, c.length + w.length);\n            indexes.set(e, c.length + w.length + n.length);\n            indexes.set(s, c.length + w.length + n.length + e.length);\n\n            return indexes;\n        } else {\n            return NewIndexesTypedArray([0, 2, 1, 3]);\n        }\n    }\n\n    public initTextureCoordsTable(pow: number): Uint16Array[] {\n        let table = [];\n        for (let i = 0; i <= pow; i++) {\n            const d = Math.pow(2, i);\n            table[i] = createTextureCoords(d);\n        }\n        return table;\n    }\n}\n\nlet instance = new SegmentHelper();\n\nexport function getInstance() {\n    return instance;\n}","export const UTILS = `\n    float getLerpValue(in float min, in float max, in float between)\n    {\n        return (clamp(between, min, max) - min) / (max - min);\n    }\n    \n    vec3 aces(vec3 color) \n    {\n        float a = 2.51;\n        float b = 0.03;\n        float c = 2.43;\n        float d = 0.59;\n        float e = 0.14;\n        return clamp((color * (a * color + b)) / (color * (c * color + d ) + e), 0.0, 1.0);\n    }\n     \n    bool intersectSphere(vec3 rayOrigin, vec3 rayDirection, float radius, inout float t1, inout float t2) \n    {\n        float b = dot(rayDirection, rayOrigin);\n        float c = dot(rayOrigin, rayOrigin) - radius * radius;\n        float d = b * b - c;\n        if (d < 0.0) {\n            return false;\n        }\n        t1 = -b - sqrt(d);\n        t2 = -b + sqrt(d);\n        return true;\n    }\n    \n    bool intersectSphere(vec3 rayOrigin, vec3 rayDirection, float radius, inout float t) \n    {\n        float b = dot(rayDirection, rayOrigin);\n        float c = dot(rayOrigin, rayOrigin) - radius * radius;\n        float d = b * b - c;\n        if (d < 0.0) {\n            return false;\n        }\n        t = -b - sqrt(d);\n        return true;\n    }\n    \n    bool intersectEllipsoid( in vec3 ro, in vec3 rd, in vec3 ra, inout float t )\n    {\n        vec3 ocn = ro/ra;\n        vec3 rdn = rd/ra;\n        float a = dot( rdn, rdn );\n        float b = dot( ocn, rdn );\n        float c = dot( ocn, ocn );\n        float h = b*b - a*(c-1.0);\n                       \n        if (h < 0.0) \n        { \n            return false; \n        }\n        \n        t = (-b-sqrt(h))/a;\n        \n        return true;\n    }\n    \n    bool intersectEllipsoid( in vec3 ro, in vec3 rd, in vec3 ra, inout float t1, inout float t2)\n    {\n        vec3 ocn = ro/ra;\n        vec3 rdn = rd/ra;\n        float a = dot( rdn, rdn );\n        float b = dot( ocn, rdn );\n        float c = dot( ocn, ocn );\n        float h = b*b - a*(c-1.0);\n                \n        if (h < 0.0) \n        { \n            return false; \n        }\n        \n        h = sqrt(h);\n        t1 = (-b-h)/a;\n        t2 = (-b+h)/a;\n        \n        return true;\n    }\n    \n    vec3 normalEllipsoid( in vec3 pos, in vec3 ra )\n    {\n        return normalize( pos/(ra*ra) );\n    }\n`;","import {Program} from '../webgl/Program';\nimport {UTILS} from './utils';\nimport {NumberArray3} from \"../math/Vec3\";\n\nexport interface AtmosphereParameters {\n    ATMOS_HEIGHT: number,\n    RAYLEIGH_SCALE: number,\n    MIE_SCALE: number,\n    GROUND_ALBEDO: number,\n    BOTTOM_RADIUS: number\n    rayleighScatteringCoefficient: NumberArray3,\n    mieScatteringCoefficient: number,\n    mieExtinctionCoefficient: number,\n    ozoneAbsorptionCoefficient: NumberArray3,\n    SUN_ANGULAR_RADIUS: number,\n    SUN_INTENSITY: number,\n    ozoneDensityHeight: number,\n    ozoneDensityWide: number,\n}\n\nconst DEFAULT_PARAMS: AtmosphereParameters = {\n    ATMOS_HEIGHT: 100000.0,\n    RAYLEIGH_SCALE: 0.08,\n    MIE_SCALE: 0.012,\n    GROUND_ALBEDO: 0.05,\n    BOTTOM_RADIUS: 6356752.3142451793,\n    rayleighScatteringCoefficient: [5.802, 13.558, 33.100],\n    mieScatteringCoefficient: 3.996,\n    mieExtinctionCoefficient: 4.440,\n    ozoneAbsorptionCoefficient: [0.650, 1.881, 0.085],\n    SUN_ANGULAR_RADIUS: 0.004685,\n    SUN_INTENSITY: 1.0,\n    ozoneDensityHeight: 25e3,\n    ozoneDensityWide: 15e3,\n}\n\nexport const COMMON = (atmosParams: AtmosphereParameters = DEFAULT_PARAMS): string =>\n    `    \n    ${UTILS}\n    \n    #define PI 3.1415926538\n    #define ATMOS_HEIGHT ${atmosParams.ATMOS_HEIGHT.toFixed(2)}\n    #define RAYLEIGH_SCALE ${atmosParams.RAYLEIGH_SCALE.toFixed(5)}\n    #define MIE_SCALE ${atmosParams.MIE_SCALE.toFixed(5)}\n    \n    #define SAMPLE_COUNT 16\n    #define SQRT_SAMPLE_COUNT 4\n            \n    const float GROUND_ALBEDO = ${atmosParams.GROUND_ALBEDO.toFixed(2)} / PI;\n\n    // Sphere\n    const float BOTTOM_RADIUS = ${atmosParams.BOTTOM_RADIUS.toFixed(10)};\n    const float TOP_RADIUS = BOTTOM_RADIUS + ATMOS_HEIGHT;   \n    const float EQUATORIAL_RADIUS = 6378137.0;\n    \n    // Ellipsoid\n    const vec3 bottomRadii = vec3(EQUATORIAL_RADIUS, EQUATORIAL_RADIUS, BOTTOM_RADIUS);           \n    const vec3 topRadii = bottomRadii + ATMOS_HEIGHT;\n    \n    const vec3 SPHERE_TO_ELLIPSOID_SCALE = vec3(BOTTOM_RADIUS) / bottomRadii;           \n    \n    const vec2 rayleighMieHeights = vec2(RAYLEIGH_SCALE, MIE_SCALE) * ATMOS_HEIGHT;\n     \n    const vec3 rayleighScatteringCoefficient = vec3(${atmosParams.rayleighScatteringCoefficient[0].toFixed(5)}, ${atmosParams.rayleighScatteringCoefficient[1].toFixed(5)}, ${atmosParams.rayleighScatteringCoefficient[2].toFixed(5)}) * 1e-6;\n    \n    const float mieScatteringCoefficient = ${atmosParams.mieScatteringCoefficient.toFixed(3)} * 1e-6;\n    const float mieExtinctionCoefficient = ${atmosParams.mieExtinctionCoefficient.toFixed(3)} * 1e-6;\n    const vec3 ozoneAbsorptionCoefficient = vec3(${atmosParams.ozoneAbsorptionCoefficient[0].toFixed(5)}, ${atmosParams.ozoneAbsorptionCoefficient[1].toFixed(5)}, ${atmosParams.ozoneAbsorptionCoefficient[2].toFixed(5)}) * 1e-6;\n    \n    const float SUN_ANGULAR_RADIUS = ${atmosParams.SUN_ANGULAR_RADIUS.toFixed(10)};\n    const float SUN_INTENSITY = ${atmosParams.SUN_INTENSITY.toFixed(2)};        \n    \n    const float ozoneDensityHeight = ${atmosParams.ozoneDensityHeight.toFixed(1)};//25e3;\n    const float ozoneDensityWide = ${atmosParams.ozoneDensityWide.toFixed(1)};//15e3;\n    \n    vec3 sunWithBloom(vec3 rayDir, vec3 sunDir) \n    {\n        float minSunCosTheta = cos(SUN_ANGULAR_RADIUS);            \n        float cosTheta = dot(rayDir, sunDir);\n        if (cosTheta >= minSunCosTheta) return vec3(1.0);                \n        float offset = minSunCosTheta - cosTheta;\n        float gaussianBloom = exp(-offset*15000.0)*0.7;\n        float invBloom = 1.0/(0.09 + offset*200.0)*0.01;\n        return vec3(gaussianBloom + invBloom);\n    }\n    \n    float rayleighPhase(float angle) \n    {\n        return 3.0 / (16.0 * PI) * (1.0 + (angle * angle));\n    }\n    \n    float miePhase(float angle) \n    {\n        float g = 0.8;\n        return 3.0 / (8.0 * PI) * ((1.0 - g * g) * (1.0 + angle * angle)) / ((2.0 + g * g) * pow(1.0 + g * g - 2.0 * g * angle, 1.5));\n    }\n        \n    vec3 opticalDepth(float height, float angle) \n    {\n        vec3 rayOrigin = vec3(0.0, BOTTOM_RADIUS + height, 0.0);\n        vec3 rayDirection = vec3(sqrt(1.0 - angle * angle), angle, 0.0);\n        float t1, t2;\n        intersectSphere(rayOrigin, rayDirection, TOP_RADIUS, t1, t2);\n        float segmentLength = t2 / float(SAMPLE_COUNT);\n        \n        float t = segmentLength * 0.5;\n        vec3 opticalDepth = vec3(0.0);\n        \n        for (int i = 0; i < SAMPLE_COUNT; i++) \n        {\n            vec3 position = rayOrigin + t * rayDirection;\n            float height = length(position) - BOTTOM_RADIUS;\n            opticalDepth.xy += exp(-height / rayleighMieHeights) * segmentLength;\n            opticalDepth.z += (1.0 - min(abs(height - ozoneDensityHeight) / ozoneDensityWide, 1.0)) * segmentLength;  \n            t += segmentLength;\n        }\n        \n        return opticalDepth;\n    }\n    \n    vec3 transmittance(float height, float angle) \n    {\n        vec3 opticalDepth = opticalDepth(height, angle);\n        return exp(-(rayleighScatteringCoefficient * opticalDepth.x + mieExtinctionCoefficient * opticalDepth.y + ozoneAbsorptionCoefficient * opticalDepth.z));\n    }`;\n\nexport function transmittance(atmosParams?: AtmosphereParameters): Program {\n    return new Program(\"transmittance\", {\n        uniforms: {\n            iResolution: \"vec2\"\n        },\n        attributes: {\n            a_position: \"vec2\"\n        },\n\n        vertexShader:\n            `\n            attribute vec2 a_position;\n            \n            void main(void) \n            {\n                gl_Position = vec4(a_position, 0.0, 1.0);\n            }`,\n\n        fragmentShader:\n            `\n            precision highp float;\n            \n            ${COMMON(atmosParams)}\n                       \n            uniform vec2 iResolution;\n                        \n            void main(void) \n            {\n                vec2 uv = gl_FragCoord.xy / iResolution.xy;\n                float height = uv.y * ATMOS_HEIGHT;\n                float angle = uv.x * 2.0 - 1.0;\n                gl_FragColor = vec4(transmittance(height, angle), 1.0);\n            }`\n    });\n}\n\nexport function scattering(atmosParams?: AtmosphereParameters): Program {\n    return new Program(\"scattering\", {\n        uniforms: {\n            iResolution: \"vec2\",\n            transmittanceTexture: \"sampler2d\"\n        },\n        attributes: {\n            a_position: \"vec2\"\n        },\n\n        vertexShader:\n            `            \n            attribute vec2 a_position;  \n                      \n            void main(void) \n            {\n                gl_Position = vec4(a_position, 0.0, 1.0);\n            }`,\n\n        fragmentShader:\n            `            \n            precision highp float;\n            \n            uniform sampler2D transmittanceTexture;\n            uniform vec2 iResolution;\n            \n            ${COMMON(atmosParams)}\n            \n            vec3 transmittanceFromTexture(float height, float angle) \n            {\n                float u = (angle + 1.0) * 0.5;\n                float v = height / ATMOS_HEIGHT;\n                return texture2D(transmittanceTexture, vec2(u, v)).xyz;\n            }\n                                   \n            void main(void) \n            {\n                vec2 uv = gl_FragCoord.xy / iResolution.xy;\n                \n                float height = uv.y * ATMOS_HEIGHT;\n                float angle = uv.x * 2.0 - 1.0;\n                \n                vec3 rayOrigin = vec3(0.0, BOTTOM_RADIUS + height, 0.0);\n                vec3 up = rayOrigin / length(rayOrigin);\n                vec3 lightDirection = vec3(sqrt(1.0 - angle * angle), angle, 0.0);\n                                \n                const float isotropicPhase = 1.0 / (4.0 * PI);\n                \n                vec3 light = vec3(0.0);\n                vec3 lightTransferFactor = vec3(0.0);\n                \n                for (int i = 0; i < SQRT_SAMPLE_COUNT; i++)\n                {\n                    for (int j = 0; j < SQRT_SAMPLE_COUNT; j++)\n                    {\n                        float u = ((0.5 + float(i)) / float(SQRT_SAMPLE_COUNT)) * 2.0 - 1.0;\n                        float v = (0.5 + float(j)) / float(SQRT_SAMPLE_COUNT);\n                        float r = sqrt(1.0 - u * u);\n                        float theta = 2.0 * PI * v;\n                        vec3 rayDirection = vec3(cos(theta) * r, sin(theta) * r, u);\n                                                \n                        float rayAngle = dot(up, rayDirection);\n                        bool cameraBelow = rayAngle < 0.0;\n                        \n                        vec3 transmittanceFromCameraToSpace = transmittanceFromTexture(height, cameraBelow ? -rayAngle : rayAngle);\n                        \n                        float offset = 0.0;\n                        float distanceToSpace = 0.0;\n                        \n                        intersectSphere(rayOrigin, rayDirection, TOP_RADIUS, offset, distanceToSpace);\n                        \n                        float distanceToGround = 0.0;\n                        bool hitGround = intersectSphere(rayOrigin, rayDirection, BOTTOM_RADIUS, distanceToGround) && distanceToGround > 0.0;                        \n                        float segmentLength = (hitGround ? distanceToGround : distanceToSpace) / float(SAMPLE_COUNT);\n                        float t = segmentLength * 0.5;\n                        \n                        vec3 transmittanceCamera;\n                        vec3 transmittanceLight;\n                         \n                        for (int k = 0; k < SAMPLE_COUNT; k++) \n                        {\n                            vec3 position = rayOrigin + t * rayDirection;\n                            float height = length(position) - BOTTOM_RADIUS;\n                            vec3 up = position / length(position);\n                            float rayAngle = dot(up, rayDirection);\n                            float lightAngle = dot(up, lightDirection);\n                            \n                            float distanceToGround;\n                            float shadow = intersectSphere(position, lightDirection, BOTTOM_RADIUS, distanceToGround) && distanceToGround >= 0.0 ? 0.0 : 1.0;\n                            vec3 transmittanceToSpace = transmittanceFromTexture(height, cameraBelow ? -rayAngle : rayAngle);\n                            \n                            transmittanceCamera = cameraBelow ? (transmittanceToSpace / transmittanceFromCameraToSpace) : (transmittanceFromCameraToSpace / transmittanceToSpace);\n                            transmittanceLight = transmittanceFromTexture(height, lightAngle);\n                            \n                            vec2 opticalDensity = exp(-height / rayleighMieHeights);        \n                            vec3 scatteredLight = transmittanceLight * (rayleighScatteringCoefficient * opticalDensity.x + mieScatteringCoefficient * opticalDensity.y) * isotropicPhase;\n                            \n                            light += shadow * transmittanceCamera * scatteredLight * segmentLength;\n                            lightTransferFactor += transmittanceCamera * (rayleighScatteringCoefficient * opticalDensity.x + mieScatteringCoefficient * opticalDensity.y) * segmentLength;\n                            \n                            t += segmentLength;\n                        }\n                    \n                        if (hitGround) \n                        {\n                            vec3 hitPoint = rayOrigin + rayDirection * distanceToGround;\n                            vec3 normal = normalize(hitPoint);\n                            float diffuseAngle = max(dot(normal, lightDirection), 0.0); \n                            light += transmittanceCamera * transmittanceLight * GROUND_ALBEDO * diffuseAngle;\n                        }\n                    }\n                }\n                \n                light /= float(SAMPLE_COUNT);\n                lightTransferFactor /= float(SAMPLE_COUNT);\n                vec3 color = light / (1.0 - lightTransferFactor);                 \n                gl_FragColor = vec4(color, 1.0);\n            }`\n    });\n}\n\n// const vec3 solar_irradiance = vec3(1.474000,1.850400,1.911980);\n// float GetTextureCoordFromUnitRange(float x, int texture_size) {\n//     return 0.5 / float(texture_size) + x * (1.0 - 1.0 / float(texture_size));\n// }\n//\n// float ClampDistance(float d) {\n//     return max(d, 0.0 * m);\n// }\n//\n// float SafeSqrt(float a) {\n//     return sqrt(max(a, 0.0 * m2));\n// }\n\n// float DistanceToTopAtmosphereBoundary(float r, float mu) {\n//\n//     //assert(r <= atmosphere.top_radius);\n//     //assert(mu >= -1.0 && mu <= 1.0);\n//\n//     float discriminant = r * r * (mu * mu - 1.0) + TOP_RADIUS * TOP_RADIUS;\n//     return ClampDistance(-r * mu + SafeSqrt(discriminant));\n// }\n\n// vec2 GetTransmittanceTextureUvFromRMu(\n//     float r,\n//     float mu)\n// {\n//     //assert(r >= atmosphere.BOTTOM_RADIUS && r <= TOP_RADIUS);\n//     //assert(mu >= -1.0 && mu <= 1.0);\n//\n//     float H = sqrt(TOP_RADIUS * TOP_RADIUS - BOTTOM_RADIUS * BOTTOM_RADIUS);\n//     float rho = SafeSqrt(r * r - BOTTOM_RADIUS * BOTTOM_RADIUS);\n//     float d = DistanceToTopAtmosphereBoundary(r, mu);\n//     float d_min = TOP_RADIUS - r;\n//     float d_max = rho + H;\n//     float x_mu = (d - d_min) / (d_max - d_min);\n//     float x_r = rho / H;\n//\n//     return vec2(\n//         GetTextureCoordFromUnitRange(x_mu, TRANSMITTANCE_TEXTURE_WIDTH),\n//         GetTextureCoordFromUnitRange(x_r, TRANSMITTANCE_TEXTURE_HEIGHT)\n//     );\n// }\n\n// vec3 GetTransmittanceToTopAtmosphereBoundary(in sampler2D transmittance_texture, float r, float mu)\n// {\n//     //assert(r >= BOTTOM_RADIUS && r <= TOP_RADIUS);\n//\n//     vec2 uv = GetTransmittanceTextureUvFromRMu(r, mu);\n//     return texture(transmittance_texture, uv).xyz;\n// }\n\n// vec3 GetTransmittanceToSun(\n//     in sampler2D transmittance_texture,\n//     float r,\n//     float mu_s)\n// {\n//     float sin_theta_h = BOTTOM_RADIUS / r;\n//     float cos_theta_h = -sqrt(max(1.0 - sin_theta_h * sin_theta_h, 0.0));\n//\n//     return GetTransmittanceToTopAtmosphereBoundary(transmittance_texture, r, mu_s) * smoothstep(\n//         -sin_theta_h * SUN_ANGULAR_RADIUS / rad, sin_theta_h * SUN_ANGULAR_RADIUS / rad,\n//         mu_s - cos_theta_h\n//     );\n// }\n\n// vec3 GetSunAndSkyIrradiance(\n//     in sampler2D transmittance_texture,\n//     in vec3 point,\n//     in vec3 normal,\n//     in vec3 sun_direction,\n//     out vec3 sky_irradiance)\n// {\n//     float r = length(point);\n//     float mu_s = dot(point, sun_direction) / r;\n//\n//     sky_irradiance = vec3(0.0);  // GetIrradiance(atmosphere, irradiance_texture, r, mu_s) * (1.0 + dot(normal, point) / r) * 0.5;\n//\n//     return solar_irradiance * GetTransmittanceToSun(transmittance_texture, r, mu_s) * max(dot(normal, sun_direction), 0.0);\n// }","import {AtmosphereParameters, COMMON} from \"./atmos\";\nimport {Program} from \"../webgl/Program\";\nimport {UTILS} from './utils';\n\n// REMEMBER!\n// src*(1)+dest*(1-src.alpha)\n// glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);\n// src*(src.alpha)+dest*(1-src.alpha)\n// glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n\nconst NIGHT = `const vec3 nightStep = 10.0 * vec3(0.58, 0.48, 0.25);`;\n\nconst DEF_BLEND = `#define blend(DEST, SAMPLER, OFFSET, OPACITY) \\\n                    src = texture( SAMPLER, OFFSET.xy + vTextureCoord.xy * OFFSET.zw );\\\n                    DEST = DEST * (1.0 - src.a * OPACITY) + src * OPACITY;`;\n\nconst DEF_BLEND_WEBGL1 = `#define blend(DEST, SAMPLER, OFFSET, OPACITY) \\\n                            src = texture2D( SAMPLER, OFFSET.xy + vTextureCoord.xy * OFFSET.zw ); \\\n                            DEST = DEST * (1.0 - src.a * OPACITY) + src * OPACITY;`;\n\nconst DEF_BLEND_PICKING = `#define blendPicking(DEST, OFFSET, SAMPLER, MASK, COLOR, OPACITY) \\\n    tc = OFFSET.xy + vTextureCoord.xy * OFFSET.zw; \\\n    t = texture2D(SAMPLER, tc); \\\n    p = texture2D(MASK, tc); \\\n    DEST = mix(DEST, vec4(max(COLOR.rgb, p.rgb), OPACITY), (t.a == 0.0 ? 0.0 : 1.0) * COLOR.a);`\n\n\nconst SLICE_SIZE = 4;\n\nexport function drawnode_screen_nl(): Program {\n    return new Program(\"drawnode_screen_nl\", {\n        uniforms: {\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            samplerCount: \"int\",\n            tileOffsetArr: \"vec4\",\n            layerOpacityArr: \"float\",\n            samplerArr: \"sampler2darray\",\n            defaultTexture: \"sampler2d\",\n            height: \"float\"\n        }, attributes: {\n            aVertexPositionHigh: \"vec3\",\n            aVertexPositionLow: \"vec3\",\n            aTextureCoord: \"vec2\"\n        },\n\n        vertexShader:\n            `precision highp float;\n            \n            attribute vec3 aVertexPositionHigh;\n            attribute vec3 aVertexPositionLow;\n            attribute vec2 aTextureCoord;\n\n            uniform mat4 projectionMatrix;\n            uniform mat4 viewMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float height;\n\n            varying vec2 vTextureCoord;\n\n            void main(void) {\n\n                vTextureCoord = aTextureCoord;\n                vec3 nh = height * normalize(aVertexPositionHigh + aVertexPositionLow);\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n                mat4 m = projectionMatrix * viewMatrixRTE;\n        \n                vec3 highDiff = aVertexPositionHigh - eyePositionHigh;\n                vec3 lowDiff = aVertexPositionLow - eyePositionLow + nh;\n                \n                // This is works for Mac Chrome, prevent some weird optimization I suppose\n                gl_Position =  m * vec4(highDiff * step(1.0, length(highDiff)) + lowDiff, 1.0);\n            }`,\n\n        fragmentShader: `precision highp float;\n            #define SLICE_SIZE ${SLICE_SIZE + 1}\n            uniform vec4 tileOffsetArr[SLICE_SIZE];\n            uniform float layerOpacityArr[SLICE_SIZE];\n            uniform sampler2D defaultTexture;\n            uniform sampler2D samplerArr[SLICE_SIZE];\n            uniform int samplerCount;\n            varying vec2 vTextureCoord;\n\n            ${DEF_BLEND_WEBGL1}\n\n            void main(void) {\n                gl_FragColor = texture2D( defaultTexture, vTextureCoord );\n                if( samplerCount == 0 ) return;\n\n                vec4 src;\n\n                blend(gl_FragColor, samplerArr[0], tileOffsetArr[0], layerOpacityArr[0]);\n                if( samplerCount == 1 ) return;\n\n                blend(gl_FragColor, samplerArr[1], tileOffsetArr[1], layerOpacityArr[1]);\n                if( samplerCount == 2 ) return;\n\n                blend(gl_FragColor, samplerArr[2], tileOffsetArr[2], layerOpacityArr[2]);\n                if( samplerCount == 3 ) return;\n\n                blend(gl_FragColor, samplerArr[3], tileOffsetArr[3], layerOpacityArr[3]);\n                if( samplerCount == 4 ) return;\n\n                blend(gl_FragColor, samplerArr[4], tileOffsetArr[4], layerOpacityArr[4]);\n            }`\n    });\n}\n\nexport function drawnode_screen_wl_webgl1NoAtmos(): Program {\n    return new Program(\"drawnode_screen_wl\", {\n        uniforms: {\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            height: \"float\",\n\n            uGlobalTextureCoord: \"vec4\",\n            uNormalMapBias: \"vec3\",\n\n            samplerCount: \"int\",\n            tileOffsetArr: \"vec4\",\n            layerOpacityArr: \"float\",\n            samplerArr: \"sampler2darray\",\n            defaultTexture: \"sampler2d\",\n            uNormalMap: \"sampler2d\",\n            nightTexture: \"sampler2d\",\n            specularTexture: \"sampler2d\",\n            lightsPositions: \"vec3\",\n            diffuse: \"vec3\",\n            ambient: \"vec3\",\n            specular: \"vec4\",\n\n            camHeight: \"float\",\n            nightTextureCoefficient: \"float\"\n        }, attributes: {\n            aVertexPositionHigh: \"vec3\",\n            aVertexPositionLow: \"vec3\",\n            aTextureCoord: \"vec2\"\n        },\n\n        vertexShader:\n            `\n            attribute vec3 aVertexPositionHigh;\n            attribute vec3 aVertexPositionLow;\n            attribute vec2 aTextureCoord;\n\n            uniform mat4 projectionMatrix;\n            uniform mat4 viewMatrix;\n            uniform vec4 uGlobalTextureCoord;\n            uniform vec3 uNormalMapBias;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float height;\n\n            varying vec4 vTextureCoord;\n            varying vec3 v_vertex;\n            varying vec3 cameraPosition;\n            varying vec2 vGlobalTextureCoord;\n            varying float v_height;\n\n            void main(void) {\n\n                vec3 aVertexPosition = aVertexPositionHigh + aVertexPositionLow;                \n                vec3 nh = height * normalize(aVertexPosition);\n\n                vTextureCoord.xy = aTextureCoord;\n                vGlobalTextureCoord = uGlobalTextureCoord.xy + (uGlobalTextureCoord.zw - uGlobalTextureCoord.xy) * aTextureCoord;\n                vTextureCoord.zw = uNormalMapBias.z * ( aTextureCoord + uNormalMapBias.xy );\n\n                cameraPosition = eyePositionHigh + eyePositionLow;\n                \n                vec3 highDiff = aVertexPositionHigh - eyePositionHigh;\n                vec3 lowDiff = aVertexPositionLow - eyePositionLow + nh;\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                v_height = height;\n                v_vertex = aVertexPosition + nh;\n                            \n                gl_Position = projectionMatrix * viewMatrixRTE * vec4(highDiff * step(1.0, length(highDiff)) + lowDiff, 1.0);\n            }`,\n\n        fragmentShader:\n            `\n            precision highp float;\n            \n            #define MAX_POINT_LIGHTS 1\n            #define SLICE_SIZE ${SLICE_SIZE + 1}\n\n            uniform vec4 specular;\n            uniform vec3 diffuse;\n            uniform vec3 ambient;\n\n            uniform sampler2D uNormalMap;\n            uniform sampler2D nightTexture;\n            uniform sampler2D specularTexture;\n            uniform sampler2D defaultTexture;\n            uniform sampler2D samplerArr[SLICE_SIZE];\n\n            uniform vec4 tileOffsetArr[SLICE_SIZE];\n            uniform vec3 lightsPositions[MAX_POINT_LIGHTS];\n            uniform float layerOpacityArr[SLICE_SIZE];\n\n            uniform int samplerCount;\n            uniform float nightTextureCoefficient;              \n            uniform float camHeight;\n\n            varying vec4 vTextureCoord;\n            varying vec3 v_vertex;\n            varying vec3 cameraPosition;\n            varying vec2 vGlobalTextureCoord;\n            varying float v_height;\n\n            vec3 sunPos;\n\n            ${NIGHT}\n\n            ${DEF_BLEND_WEBGL1}\n            \n            ${UTILS}\n                                               \n            void main(void) {\n            \n                sunPos = lightsPositions[0];\n                                \n                vec3 texNormal = texture2D(uNormalMap, vTextureCoord.zw).rgb;\n                vec3 normal = normalize((texNormal - 0.5) * 2.0);\n                \n                float minH = 1200000.0;\n                float maxH = minH * 3.0;\n                float nightCoef = getLerpValue(minH, maxH, camHeight) * nightTextureCoefficient;\n                                \n                // if(camHeight > 6000000.0)\n                // {\n                //     normal = normalize(v_vertex);\n                // }\n                                            \n                vec3 lightDir = normalize(sunPos);\n                vec3 viewDir = normalize(cameraPosition - v_vertex);\n                                                \n                float overGround = 1.0 - step(0.1, v_height);\n\n                float shininess = texture2D( specularTexture, vGlobalTextureCoord.st ).r * 255.0 * overGround;\n                vec3 reflectionDirection = reflect(-lightDir, normal);\n                float reflection = max( dot(reflectionDirection, viewDir), 0.0);\n                vec3 spec = specular.rgb * pow( reflection, specular.w) * shininess;                \n                float diffuseLightWeighting = max(dot(normal, lightDir), 0.0);                \n                vec4 nightImageColor = texture2D( nightTexture, vGlobalTextureCoord.st );\n                vec3 night = nightStep * (.18 - diffuseLightWeighting * 3.0) * nightImageColor.rgb * nightCoef;\n                night *= overGround * step(0.0, night);                \n                vec4 lightWeighting = vec4(ambient + diffuse * diffuseLightWeighting + night, 1.0);\n                \n                gl_FragColor = texture2D( defaultTexture, vTextureCoord.xy );\n                if( samplerCount == 0 ) {\n                    gl_FragColor = gl_FragColor * lightWeighting + vec4(spec, 0.0);\n                    return;\n                }\n\n                vec4 src;\n\n                blend(gl_FragColor, samplerArr[0], tileOffsetArr[0], layerOpacityArr[0]);\n                if( samplerCount == 1 ) {                \n                    gl_FragColor = gl_FragColor * lightWeighting + vec4(spec, 0.0);\n                    return;\n                }\n\n                blend(gl_FragColor, samplerArr[1], tileOffsetArr[1], layerOpacityArr[1]);\n                if( samplerCount == 2 ) {\n                    gl_FragColor = gl_FragColor * lightWeighting + vec4(spec, 0.0);\n                    return;\n                }\n\n                blend(gl_FragColor, samplerArr[2], tileOffsetArr[2], layerOpacityArr[2]);\n                if( samplerCount == 3 ) {\n                    gl_FragColor = gl_FragColor * lightWeighting + vec4(spec, 0.0);\n                    return;\n                }\n\n                blend(gl_FragColor, samplerArr[3], tileOffsetArr[3], layerOpacityArr[3]);\n                if( samplerCount == 4 ) {\n                    gl_FragColor = gl_FragColor * lightWeighting + vec4(spec, 0.0);\n                    return;\n                }\n\n                blend(gl_FragColor, samplerArr[4], tileOffsetArr[4], layerOpacityArr[4]);\n                gl_FragColor = gl_FragColor * lightWeighting + vec4(spec, 0.0);\n            }`\n    });\n}\n\nexport function drawnode_screen_wl_webgl2NoAtmos(): Program {\n    return new Program(\"drawnode_screen_wl\", {\n        uniforms: {\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            height: \"float\",\n\n            uGlobalTextureCoord: \"vec4\",\n            uNormalMapBias: \"vec3\",\n\n            samplerCount: \"int\",\n            tileOffsetArr: \"vec4\",\n            layerOpacityArr: \"float\",\n            samplerArr: \"sampler2darray\",\n            defaultTexture: \"sampler2d\",\n            uNormalMap: \"sampler2d\",\n            nightTexture: \"sampler2d\",\n            specularTexture: \"sampler2d\",\n            lightsPositions: \"vec3\",\n            diffuse: \"vec3\",\n            ambient: \"vec3\",\n            specular: \"vec4\",\n\n            camHeight: \"float\",\n            nightTextureCoefficient: \"float\",\n\n            transitionOpacity: \"float\"\n        }, attributes: {\n            aVertexPositionHigh: \"vec3\",\n            aVertexPositionLow: \"vec3\",\n            aTextureCoord: \"vec2\"\n        },\n\n        vertexShader:\n            `#version 300 es\n\n            precision highp float;\n\n            in vec3 aVertexPositionHigh;\n            in vec3 aVertexPositionLow;\n            in vec2 aTextureCoord;\n\n            uniform mat4 projectionMatrix;\n            uniform mat4 viewMatrix;\n            uniform vec4 uGlobalTextureCoord;\n            uniform vec3 uNormalMapBias;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float height;\n\n            out vec4 vTextureCoord;\n            out vec3 v_vertex;\n            out vec3 cameraPosition;\n            out vec2 vGlobalTextureCoord;\n            out float v_height;\n\n            void main(void) {\n\n                vec3 aVertexPosition = aVertexPositionHigh + aVertexPositionLow;                \n                vec3 nh = height * normalize(aVertexPosition);\n                \n                vTextureCoord.xy = aTextureCoord;\n                vGlobalTextureCoord = uGlobalTextureCoord.xy + (uGlobalTextureCoord.zw - uGlobalTextureCoord.xy) * aTextureCoord;\n                vTextureCoord.zw = uNormalMapBias.z * ( aTextureCoord + uNormalMapBias.xy );\n\n                cameraPosition = eyePositionHigh + eyePositionLow;\n                \n                vec3 highDiff = aVertexPositionHigh - eyePositionHigh;\n                vec3 lowDiff = aVertexPositionLow - eyePositionLow + nh;\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                v_height = height;\n                v_vertex = aVertexPosition + nh;\n                            \n                gl_Position = projectionMatrix * viewMatrixRTE * vec4(highDiff * step(1.0, length(highDiff)) + lowDiff, 1.0);\n            }`,\n\n        fragmentShader:\n            `#version 300 es\n\n            precision highp float;\n            \n            #define MAX_POINT_LIGHTS 1\n            #define SLICE_SIZE ${SLICE_SIZE + 1}\n\n            uniform vec4 specular;\n            uniform vec3 diffuse;\n            uniform vec3 ambient;  \n\n            uniform sampler2D uNormalMap;\n            uniform sampler2D nightTexture;\n            uniform sampler2D specularTexture;\n            uniform sampler2D defaultTexture;\n            uniform sampler2D samplerArr[SLICE_SIZE];\n\n            uniform vec4 tileOffsetArr[SLICE_SIZE];\n            uniform vec3 lightsPositions[MAX_POINT_LIGHTS];\n            uniform float layerOpacityArr[SLICE_SIZE];\n\n            uniform int samplerCount;\n            uniform float nightTextureCoefficient;\n            \n            uniform float transitionOpacity;\n                \n            uniform float camHeight;\n\n            in vec4 vTextureCoord;\n            in vec3 v_vertex;\n            in vec3 cameraPosition;\n            in vec2 vGlobalTextureCoord;\n            in float v_height;\n\n            vec3 sunPos;\n\n            layout(location = 0) out vec4 diffuseColor;\n\n            ${NIGHT}\n\n            ${DEF_BLEND}\n            \n            ${UTILS}\n                                               \n            void main(void) {\n            \n                sunPos = lightsPositions[0];\n                                \n                vec3 texNormal = texture(uNormalMap, vTextureCoord.zw).rgb;\n                vec3 normal = normalize((texNormal - 0.5) * 2.0);\n                \n                float minH = 1200000.0;\n                float maxH = minH * 3.0;\n                float nightCoef = getLerpValue(minH, maxH, camHeight) * nightTextureCoefficient;\n                                \n                // if(camHeight > 6000000.0)\n                // {\n                //     normal = normalize(v_vertex);\n                // }\n                                            \n                vec3 lightDir = normalize(sunPos);\n                vec3 viewDir = normalize(cameraPosition - v_vertex);\n                                                \n                float overGround = 1.0 - step(0.1, v_height);\n\n                float shininess = texture( specularTexture, vGlobalTextureCoord.st ).r * 255.0 * overGround;\n                vec3 reflectionDirection = reflect(-lightDir, normal);\n                float reflection = max( dot(reflectionDirection, viewDir), 0.0);\n                vec3 spec = specular.rgb * pow( reflection, specular.w) * shininess;                \n                float diffuseLightWeighting = max(dot(normal, lightDir), 0.0);                \n                vec4 nightImageColor = texture( nightTexture, vGlobalTextureCoord.st );\n                vec3 night = nightStep * (.18 - diffuseLightWeighting * 3.0) * nightImageColor.rgb * nightCoef;\n                night *= overGround * step(0.0, night);                \n                vec4 lightWeighting = vec4(ambient + diffuse * diffuseLightWeighting + night, 1.0);\n                \n                diffuseColor = texture( defaultTexture, vTextureCoord.xy );\n                \n                if( samplerCount == 0 ) {\n                    diffuseColor = diffuseColor * lightWeighting + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                vec4 src;\n\n                blend(diffuseColor, samplerArr[0], tileOffsetArr[0], layerOpacityArr[0]);\n                if( samplerCount == 1 ) {                \n                    diffuseColor = diffuseColor * lightWeighting + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                blend(diffuseColor, samplerArr[1], tileOffsetArr[1], layerOpacityArr[1]);\n                if( samplerCount == 2 ) {\n                    diffuseColor = diffuseColor * lightWeighting + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                blend(diffuseColor, samplerArr[2], tileOffsetArr[2], layerOpacityArr[2]);\n                if( samplerCount == 3 ) {\n                    diffuseColor = diffuseColor * lightWeighting + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                blend(diffuseColor, samplerArr[3], tileOffsetArr[3], layerOpacityArr[3]);\n                if( samplerCount == 4 ) {\n                    diffuseColor = diffuseColor * lightWeighting + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                blend(diffuseColor, samplerArr[4], tileOffsetArr[4], layerOpacityArr[4]);\n                diffuseColor = diffuseColor * lightWeighting + vec4(spec, 0.0);\n                diffuseColor *= transitionOpacity;\n            }`\n    });\n}\n\n\nexport function drawnode_screen_wl_webgl2Atmos(atmosParams?: AtmosphereParameters): Program {\n    return new Program(\"drawnode_screen_wl\", {\n        uniforms: {\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            height: \"float\",\n\n            uGlobalTextureCoord: \"vec4\",\n            uNormalMapBias: \"vec3\",\n\n            samplerCount: \"int\",\n            tileOffsetArr: \"vec4\",\n            layerOpacityArr: \"float\",\n            samplerArr: \"sampler2darray\",\n            defaultTexture: \"sampler2d\",\n            uNormalMap: \"sampler2d\",\n            nightTexture: \"sampler2d\",\n            specularTexture: \"sampler2d\",\n            lightsPositions: \"vec3\",\n            diffuse: \"vec3\",\n            ambient: \"vec3\",\n            specular: \"vec4\",\n\n            transmittanceTexture: \"sampler2D\",\n            scatteringTexture: \"sampler2D\",\n            camHeight: \"float\",\n            nightTextureCoefficient: \"float\",\n            maxMinOpacity: \"vec2\",\n\n            transitionOpacity: \"float\"\n        }, attributes: {\n            aVertexPositionHigh: \"vec3\",\n            aVertexPositionLow: \"vec3\",\n            aTextureCoord: \"vec2\"\n        },\n\n        vertexShader:\n            `#version 300 es\n\n            precision highp float;\n\n            in vec3 aVertexPositionHigh;\n            in vec3 aVertexPositionLow;\n            in vec2 aTextureCoord;\n\n            uniform mat4 projectionMatrix;\n            uniform mat4 viewMatrix;\n            uniform vec4 uGlobalTextureCoord;\n            uniform vec3 uNormalMapBias;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float height;\n\n            out vec4 vTextureCoord;\n            out vec3 v_vertex;\n            out vec3 cameraPosition;\n            out vec2 vGlobalTextureCoord;\n            out float v_height;\n\n            void main(void) {\n\n                vec3 aVertexPosition = aVertexPositionHigh + aVertexPositionLow;                \n                vec3 nh = height * normalize(aVertexPosition);\n\n                vTextureCoord.xy = aTextureCoord;\n                vGlobalTextureCoord = uGlobalTextureCoord.xy + (uGlobalTextureCoord.zw - uGlobalTextureCoord.xy) * aTextureCoord;\n                vTextureCoord.zw = uNormalMapBias.z * ( aTextureCoord + uNormalMapBias.xy );\n\n                cameraPosition = eyePositionHigh + eyePositionLow;\n                \n                vec3 highDiff = aVertexPositionHigh - eyePositionHigh;\n                vec3 lowDiff = aVertexPositionLow - eyePositionLow + nh;\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                v_height = height;\n                v_vertex = aVertexPosition + nh;\n                            \n                gl_Position = projectionMatrix * viewMatrixRTE * vec4(highDiff * step(1.0, length(highDiff)) + lowDiff, 1.0);\n            }`,\n\n        fragmentShader:\n            `#version 300 es\n\n            precision highp float;\n            \n            #define MAX_POINT_LIGHTS 1\n            #define SLICE_SIZE ${SLICE_SIZE + 1}\n\n            uniform vec4 specular;\n            uniform vec3 diffuse;\n            uniform vec3 ambient;\n\n            uniform vec3 lightsPositions[MAX_POINT_LIGHTS];\n\n            uniform sampler2D uNormalMap;\n            uniform sampler2D nightTexture;\n            uniform sampler2D specularTexture;\n            uniform sampler2D transmittanceTexture;\n            uniform sampler2D scatteringTexture;\n            uniform sampler2D defaultTexture;\n            uniform sampler2D samplerArr[SLICE_SIZE];\n\n            uniform vec4 tileOffsetArr[SLICE_SIZE];\n            uniform float layerOpacityArr[SLICE_SIZE];\n\n            uniform int samplerCount;\n            uniform float nightTextureCoefficient;\n            \n            uniform vec2 maxMinOpacity;                \n            uniform float camHeight;\n            \n            uniform float transitionOpacity;\n\n            in vec4 vTextureCoord;\n            in vec3 v_vertex;\n            in vec3 cameraPosition;\n            in vec2 vGlobalTextureCoord;\n            in float v_height;\n\n            vec3 sunPos;\n\n            layout(location = 0) out vec4 diffuseColor;\n\n            ${NIGHT}\n\n            ${DEF_BLEND}\n            \n            ${COMMON(atmosParams)}            \n            \n            vec3 transmittanceFromTexture(float height, float angle) \n            {\n                float u = (angle + 1.0) * 0.5;\n                float v = height / ATMOS_HEIGHT;\n                return texture(transmittanceTexture, vec2(u, v)).xyz;\n            }\n\n            vec3 multipleScatteringContributionFromTexture(float height, float angle) \n            {\n                float u = (angle + 1.0) * 0.5;\n                float v = height / ATMOS_HEIGHT;\n                return texture(scatteringTexture, vec2(u, v)).xyz;\n            }\n            \n            void getSunIlluminance(in vec3 point, in vec3 lightDir, out vec3 sunIlluminance)\n            {\n                //     float r = length(point);\n                //     float mu_s = dot(point, sun_direction) / r;\n                //     float height = r - BOTTOM_RADIUS;\n                \n                float mu_s = dot(normalize(point), lightDir);\n                float height = length(point) - BOTTOM_RADIUS;\n                sunIlluminance = SUN_INTENSITY * transmittanceFromTexture(height, mu_s);\n            }\n           \n            void atmosGroundColor(out vec4 fragColor, in vec3 normal)\n            {      \n                vec3 cameraPosition = cameraPosition;           \n                \n                if(length(cameraPosition * SPHERE_TO_ELLIPSOID_SCALE) < BOTTOM_RADIUS + 1.0){\n                    cameraPosition = normalize(cameraPosition * SPHERE_TO_ELLIPSOID_SCALE) * (BOTTOM_RADIUS + 1.0) / SPHERE_TO_ELLIPSOID_SCALE;\n                }             \n                                                                                \n                vec3 rayDirection = normalize(v_vertex - cameraPosition);\n                vec3 lightDir = normalize(sunPos);\n                \n                rayDirection = normalize(rayDirection * SPHERE_TO_ELLIPSOID_SCALE);\n                vec3 camPos = cameraPosition * SPHERE_TO_ELLIPSOID_SCALE;\n                lightDir = normalize(lightDir * SPHERE_TO_ELLIPSOID_SCALE);\n               \n\n                vec3 light = vec3(0.0);\n                vec3 transmittanceFromCameraToSpace = vec3(1.0);\n                float offset = 0.0;\n                float distanceToSpace = 0.0;\n                \n                intersectSphere(camPos, rayDirection, TOP_RADIUS, offset, distanceToSpace);\n            \n                vec3 rayOrigin = camPos;\n                \n                // above atmosphere\n                if (offset > 0.0) \n                {\n                    // intersection of camera ray with atmosphere\n                    rayOrigin += rayDirection * offset;\n                }\n                \n                float height = length(rayOrigin) - BOTTOM_RADIUS;\n                float rayAngle = dot(rayOrigin, rayDirection) / length(rayOrigin);\n                bool cameraBelow = rayAngle < 0.0;\n                \n                transmittanceFromCameraToSpace = transmittanceFromTexture(height, cameraBelow ? -rayAngle : rayAngle);\n                \n                float phaseAngle = dot(lightDir, rayDirection);\n                float rayleighPhase = rayleighPhase(phaseAngle);\n                float miePhase = miePhase(phaseAngle);\n                \n                float distanceToGround = 0.0;\n                \n                bool hitGround = intersectSphere(camPos, rayDirection, BOTTOM_RADIUS, distanceToGround) && distanceToGround > 0.0;                \n                //intersectSphere(camPos, rayDirection, BOTTOM_RADIUS, distanceToGround);\n               \n\n                if(length(v_vertex * SPHERE_TO_ELLIPSOID_SCALE) > BOTTOM_RADIUS){\n                    distanceToGround = distance(camPos, v_vertex * SPHERE_TO_ELLIPSOID_SCALE);\n                }\n                                                                \n                float segmentLength = (distanceToGround - max(offset, 0.0)) / float(SAMPLE_COUNT);\n                \n                float t = segmentLength * 0.5;\n                \n                vec3 transmittanceCamera; \n                vec3 transmittanceLight; \n                \n                for (int i = 0; i < SAMPLE_COUNT; i++) \n                {\n                    vec3 position = rayOrigin + t * rayDirection;\n                    float height = length(position) - BOTTOM_RADIUS;\n                    vec3 up = position / length(position);\n                    float rayAngle = dot(up, rayDirection);\n                    float lightAngle = dot(up, lightDir);                                                 \n                    vec3 transmittanceToSpace = transmittanceFromTexture(height, cameraBelow ? -rayAngle : rayAngle);\n                    transmittanceCamera = cameraBelow ? (transmittanceToSpace / transmittanceFromCameraToSpace) : (transmittanceFromCameraToSpace / transmittanceToSpace);\n                    transmittanceLight = transmittanceFromTexture(height, lightAngle);\n                    vec2 opticalDensity = exp(-height / rayleighMieHeights);\n                    vec3 scatteredLight = transmittanceLight * (rayleighScatteringCoefficient * opticalDensity.x * rayleighPhase + mieScatteringCoefficient * opticalDensity.y * miePhase);\n                    scatteredLight += multipleScatteringContributionFromTexture(height, lightAngle) * (rayleighScatteringCoefficient * opticalDensity.x + mieScatteringCoefficient * opticalDensity.y);  \n                    light += transmittanceCamera * scatteredLight * segmentLength;\n                    t += segmentLength;\n                }\n                \n                light *= SUN_INTENSITY;\n        \n                vec3 hitPoint = camPos + rayDirection * distanceToGround;\n                vec3 up = normalize(hitPoint);\n                float diffuseAngle = max(dot(up, lightDir), 0.0);                \n                                \n                float lightAngle = dot(normal, lightDir);\n                vec3 tA = transmittanceCamera * GROUND_ALBEDO * SUN_INTENSITY;                                               \n                vec3 scatteringLight = multipleScatteringContributionFromTexture(height, lightAngle);\n                vec3 diffuseTransmittanceLight = transmittanceLight * diffuseAngle;                \n                light += tA * (scatteringLight + diffuseTransmittanceLight);\n                                                                \n                fragColor = vec4(pow(light * 8.0, vec3(1.0 / 2.2)), 1.0);\n            }\n\n            void getAtmosFadingOpacity(out float opacity)\n            {            \n                float c = length(cameraPosition);\n                float maxDist = sqrt(c * c - BOTTOM_RADIUS * BOTTOM_RADIUS);\n                float minDist = c - BOTTOM_RADIUS;\n                float vertDist = distance(cameraPosition, v_vertex);                    \n                opacity = clamp(maxMinOpacity.y + ( maxMinOpacity.x -  maxMinOpacity.y) * getLerpValue(minDist, maxDist, vertDist), 0.0, 1.0);\n            }\n\n            void main(void) {\n            \n                sunPos = lightsPositions[0];\n                                \n                vec3 texNormal = texture(uNormalMap, vTextureCoord.zw).rgb;\n                vec3 normal = normalize((texNormal - 0.5) * 2.0);\n                \n                float minH = 1200000.0;\n                float maxH = minH * 3.0;\n                float nightCoef = getLerpValue(minH, maxH, camHeight) * nightTextureCoefficient;\n                                \n                // if(camHeight > 6000000.0)\n                // {\n                //    normal = normalize(v_vertex);\n                // }\n                                            \n                vec3 lightDir = normalize(sunPos);\n                vec3 viewDir = normalize(cameraPosition - v_vertex);\n                \n                vec4 atmosColor;\n                atmosGroundColor(atmosColor, normal);\n                \n                vec3 sunIlluminance;                \n                getSunIlluminance(v_vertex * SPHERE_TO_ELLIPSOID_SCALE, lightDir * SPHERE_TO_ELLIPSOID_SCALE, sunIlluminance);\n                \n                float overGround = 1.0 - step(0.1, v_height);\n\n                float shininess = texture( specularTexture, vGlobalTextureCoord.st ).r * 255.0 * overGround;\n                vec3 reflectionDirection = reflect(-lightDir, normal);\n                float reflection = max( dot(reflectionDirection, viewDir), 0.0);\n                vec3 spec = sunIlluminance * specular.rgb * pow( reflection, specular.w) * shininess;                \n                float diffuseLightWeighting = max(dot(normal, lightDir), 0.0);\n                              \n                vec4 nightImageColor = texture( nightTexture, vGlobalTextureCoord.st );\n                vec3 night = nightStep * (.18 - diffuseLightWeighting * 3.0) * nightImageColor.rgb * nightCoef;\n                night *= overGround * step(0.0, night);                \n                vec4 lightWeighting = vec4(ambient + sunIlluminance * diffuse * diffuseLightWeighting + night, 1.0);\n                \n                float fadingOpacity;\n                getAtmosFadingOpacity(fadingOpacity);\n                \n                getSunIlluminance(cameraPosition, viewDir * SPHERE_TO_ELLIPSOID_SCALE, sunIlluminance);\n                \n                spec *= sunIlluminance;\n\n                diffuseColor = texture( defaultTexture, vTextureCoord.xy );\n                if( samplerCount == 0 ) {\n                    diffuseColor = mix(diffuseColor * lightWeighting, atmosColor, fadingOpacity) + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                vec4 src;\n\n                blend(diffuseColor, samplerArr[0], tileOffsetArr[0], layerOpacityArr[0]);\n                if( samplerCount == 1 ) {                \n                    diffuseColor = mix(diffuseColor * lightWeighting, atmosColor * diffuseColor.a, fadingOpacity) + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                blend(diffuseColor, samplerArr[1], tileOffsetArr[1], layerOpacityArr[1]);\n                if( samplerCount == 2 ) {\n                    diffuseColor = mix(diffuseColor * lightWeighting, atmosColor * diffuseColor.a, fadingOpacity) + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                blend(diffuseColor, samplerArr[2], tileOffsetArr[2], layerOpacityArr[2]);\n                if( samplerCount == 3 ) {\n                    diffuseColor = mix(diffuseColor * lightWeighting, atmosColor * diffuseColor.a, fadingOpacity) + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                blend(diffuseColor, samplerArr[3], tileOffsetArr[3], layerOpacityArr[3]);\n                if( samplerCount == 4 ) {\n                    diffuseColor = mix(diffuseColor * lightWeighting, atmosColor * diffuseColor.a, fadingOpacity) + vec4(spec, 0.0);\n                    diffuseColor *= transitionOpacity;\n                    return;\n                }\n\n                blend(diffuseColor, samplerArr[4], tileOffsetArr[4], layerOpacityArr[4]);\n                diffuseColor = mix(diffuseColor * lightWeighting, atmosColor * diffuseColor.a, fadingOpacity) + vec4(spec, 0.0);\n                diffuseColor *= transitionOpacity;\n            }`\n    });\n}\n\nexport function drawnode_colorPicking(): Program {\n    return new Program(\"drawnode_colorPicking\", {\n        uniforms: {\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            samplerCount: \"int\",\n            tileOffsetArr: \"vec4\",\n            samplerArr: \"sampler2darray\",\n            pickingMaskArr: \"sampler2darray\",\n            pickingColorArr: \"vec4\",\n            height: \"float\"\n        }, attributes: {\n            aVertexPositionHigh: \"vec3\", aVertexPositionLow: \"vec3\", aTextureCoord: \"vec2\"\n        },\n\n        vertexShader:\n            `precision highp float;\n            \n            attribute vec3 aVertexPositionHigh;\n            attribute vec3 aVertexPositionLow;\n            attribute vec2 aTextureCoord;\n\n            uniform mat4 projectionMatrix;\n            uniform mat4 viewMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float height;\n\n            varying vec2 vTextureCoord;\n\n            void main(void) {\n\n                vTextureCoord = aTextureCoord;\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                mat4 m = projectionMatrix * viewMatrixRTE;\n\n                vec3 nh = height * normalize(aVertexPositionHigh + aVertexPositionLow);\n\n                vec3 highDiff = aVertexPositionHigh - eyePositionHigh;\n                vec3 lowDiff = aVertexPositionLow - eyePositionLow + nh;\n\n                gl_Position = m * vec4(highDiff * step(1.0, length(highDiff)) + lowDiff, 1.0);\n            }`,\n\n        fragmentShader:\n            `precision highp float;\n            #define SLICE_SIZE ${SLICE_SIZE + 1}\n            uniform vec4 tileOffsetArr[SLICE_SIZE];\n            uniform vec4 pickingColorArr[SLICE_SIZE];\n            uniform sampler2D samplerArr[SLICE_SIZE];\n            uniform sampler2D pickingMaskArr[SLICE_SIZE];\n            uniform int samplerCount;\n            varying vec2 vTextureCoord;\n\n            ${DEF_BLEND_PICKING}\n\n            void main(void) {\n                gl_FragColor = vec4(0.0);\n                if( samplerCount == 0 ) return;\n\n                vec2 tc;\n                vec4 t;\n                vec4 p;\n\n                blendPicking(gl_FragColor, tileOffsetArr[0], samplerArr[0], pickingMaskArr[0], pickingColorArr[0], 1.0);\n                if( samplerCount == 1 ) return;\n\n                blendPicking(gl_FragColor, tileOffsetArr[1], samplerArr[1], pickingMaskArr[1], pickingColorArr[1], 1.0);\n                if( samplerCount == 2 ) return;\n\n                blendPicking(gl_FragColor, tileOffsetArr[2], samplerArr[2], pickingMaskArr[2], pickingColorArr[2], 1.0);\n                if( samplerCount == 3 ) return;\n\n                blendPicking(gl_FragColor, tileOffsetArr[3], samplerArr[3], pickingMaskArr[3], pickingColorArr[3], 1.0);\n                if( samplerCount == 4 ) return;\n\n                blendPicking(gl_FragColor, tileOffsetArr[4], samplerArr[4], pickingMaskArr[4], pickingColorArr[4], 1.0);\n            }`\n    });\n}\n\nexport function drawnode_heightPicking(): Program {\n    return new Program(\"drawnode_heightPicking\", {\n        uniforms: {\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            height: \"float\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\"\n        }, attributes: {\n            aVertexPositionHigh: \"vec3\", aVertexPositionLow: \"vec3\"\n        },\n\n        vertexShader:\n            `precision highp float;\n\n            attribute vec3 aVertexPositionHigh;\n            attribute vec3 aVertexPositionLow;\n\n            uniform mat4 projectionMatrix;\n            uniform mat4 viewMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float height;\n\n            varying vec3 eyePosition;\n            varying vec3 vertexPosition;\n\n            void main(void) {\n\n                // This code is works for Mac Chrome and Safari\n                // any other code probably will produce jittering\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                mat4 m = projectionMatrix * viewMatrixRTE;\n\n                vec3 nh = height * normalize(aVertexPositionHigh + aVertexPositionLow);\n\n                eyePosition = eyePositionHigh + eyePositionLow;\n                vertexPosition = aVertexPositionHigh + aVertexPositionLow;\n\n                vec3 highDiff = aVertexPositionHigh - eyePositionHigh;\n                vec3 lowDiff = aVertexPositionLow - eyePositionLow + nh;\n                \n                gl_Position =  m * vec4(highDiff * step(1.0, length(highDiff)) + lowDiff, 1.0);         \n            }`,\n\n        fragmentShader:\n            `precision highp float;\n\n            varying vec3 eyePosition;\n            varying vec3 vertexPosition;\n\n            vec3 encode24(highp float f) {\n                float F = abs(f);\n                float s = step( 0.0, -f );\n                float e = floor( log2(F) );\n                float m = exp2(- e) * F;\n                e = floor( log2(F) + 127.0 ) + floor( log2(m) );\n                return vec3(\n                    ( 128.0 * s + floor( e * exp2(-1.0) ) ) / 255.0,\n                    ( 128.0 * mod( e, 2.0 ) + mod( floor( m * 128.0 ), 128.0 ) ) / 255.0,\n                    floor( mod( floor( m * exp2( 23.0 - 8.0) ), exp2(8.0) ) ) / 255.0);\n            }\n\n            void main(void) {\n                float range = distance(eyePosition, vertexPosition);\n                gl_FragColor = vec4(encode24(range), 1.0);\n            }`\n    });\n}\n\nexport function drawnode_depth(): Program {\n    return new Program(\"drawnode_depth\", {\n        uniforms: {\n            projectionMatrix: \"mat4\",\n            viewMatrix: \"mat4\",\n            height: \"float\",\n            eyePositionHigh: \"vec3\",\n            eyePositionLow: \"vec3\",\n            frustumPickingColor: \"vec3\"\n        }, attributes: {\n            aVertexPositionHigh: \"vec3\", aVertexPositionLow: \"vec3\"\n        },\n\n        vertexShader:\n            `precision highp float;\n\n            attribute vec3 aVertexPositionHigh;\n            attribute vec3 aVertexPositionLow;\n\n            uniform mat4 projectionMatrix;\n            uniform mat4 viewMatrix;\n            uniform vec3 eyePositionHigh;\n            uniform vec3 eyePositionLow;\n            uniform float height;\n\n            void main(void) {\n\n                // @hack\n                // This code is works for Mac Chrome and Safari\n                // any other code probably will produce jittering\n\n                mat4 viewMatrixRTE = viewMatrix;\n                viewMatrixRTE[3] = vec4(0.0, 0.0, 0.0, 1.0);\n\n                mat4 m = projectionMatrix * viewMatrixRTE;\n\n                vec3 nh = height * normalize(aVertexPositionHigh + aVertexPositionLow);\n\n                vec3 eyePosition = eyePositionHigh + eyePositionLow;\n                vec3 vertexPosition = aVertexPositionHigh + aVertexPositionLow;\n\n                vec3 highDiff = aVertexPositionHigh - eyePositionHigh;\n                vec3 lowDiff = aVertexPositionLow - eyePositionLow + nh;\n                \n                gl_Position =  m * vec4(highDiff * step(1.0, length(highDiff)) + lowDiff, 1.0);    \n            }`,\n\n        fragmentShader:\n            `precision highp float;\n            uniform vec3 frustumPickingColor;\n\n            void main(void) {\n                gl_FragColor = vec4(frustumPickingColor, 1.0);\n            } `\n    });\n}\n","import {Handler} from \"./Handler\";\n\nexport interface IBaseFramebufferParams {\n    internalFormat?: string | string[];\n    width?: number;\n    height?: number;\n    useDepth?: boolean;\n    depthComponent?: string;\n    size?: number;\n    filter?: string;\n}\n\nexport class BaseFramebuffer {\n    public handler: Handler;\n    public _fbo: WebGLFramebuffer | null;\n    protected _depthRenderbuffer: WebGLRenderbuffer | null;\n    public _width: number;\n    public _height: number;\n    protected _depthComponent: string;\n    protected _size: number;\n    protected _active: boolean;\n    protected _useDepth: boolean;\n    protected _filter: string;\n\n    constructor(handler: Handler, options: IBaseFramebufferParams = {}) {\n        this.handler = handler;\n        this._fbo = null;\n        this._width = options.width || handler.canvas!.width;\n        this._height = options.height || handler.canvas!.height;\n        this._depthComponent = options.depthComponent != undefined ? options.depthComponent : \"DEPTH_COMPONENT16\";\n        this._useDepth = options.useDepth != undefined ? options.useDepth : true;\n        this._active = false;\n        this._size = options.size || 1;\n        this._depthRenderbuffer = null;\n        this._filter = options.filter || \"NEAREST\";\n    }\n\n    public get width(): number {\n        return this._width;\n    }\n\n    public get height(): number {\n        return this._height;\n    }\n\n    /**\n     * Sets framebuffer viewport size.\n     * @public\n     * @param {number} width - Framebuffer width.\n     * @param {number} height - Framebuffer height.\n     * @param {boolean} [forceDestroy] -\n     */\n    public setSize(width: number, height: number, forceDestroy: boolean = false) {\n        this._width = width;\n        this._height = height;\n\n        if (this._active) {\n            this.handler.gl!.viewport(0, 0, this._width, this._height);\n        }\n\n        if (this._useDepth || forceDestroy) {\n            this.destroy();\n            this.init();\n        }\n    }\n\n    public init() {\n    }\n\n    public destroy() {\n    }\n\n    /**\n     * Returns framebuffer completed.\n     * @public\n     * @returns {boolean} -\n     */\n    public isComplete(): boolean {\n        let gl = this.handler.gl!;\n        return gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE;\n    }\n\n    public checkStatus(): number {\n        let gl = this.handler.gl!;\n        return gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    }\n\n    /**\n     * Activate framebuffer frame to draw.\n     * @public\n     * @returns {Framebuffer} Returns Current framebuffer.\n     */\n    public activate() {\n        let gl = this.handler.gl!;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._fbo);\n        gl.viewport(0, 0, this._width, this._height);\n        this._active = true;\n\n        let c = this.handler.framebufferStack.current().data;\n        c && (c._active = false);\n        this.handler.framebufferStack.push(this);\n        return this;\n    }\n\n    /**\n     * Deactivate framebuffer frame.\n     * @public\n     */\n    public deactivate() {\n        let h = this.handler,\n            gl = h.gl!;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null!);\n        this._active = false;\n\n        let f = this.handler.framebufferStack.popPrev();\n\n        if (f) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, f._fbo);\n            gl.viewport(0, 0, f._width, f._height);\n        } else {\n            gl.viewport(0, 0, h.canvas!.width, h.canvas!.height);\n        }\n    }\n}","/**\n * Usefull class for working with JS canvas object.\n * @class\n * @param {number} [width] - Canvas width. Default 256.\n * @param {number} [height] - Canvas height. Default 256.\n */\nclass ImageCanvas {\n\n    /**\n     * Canvas object.\n     * @protected\n     * @type {HTMLCanvasElement}\n     */\n    protected _canvas: HTMLCanvasElement;\n\n    /**\n     * Canvas context.\n     * @protected\n     * @type {CanvasRenderingContext2D}\n     */\n    protected _context: CanvasRenderingContext2D;\n\n    constructor(width: number = 256, height: number = 256) {\n        this._canvas = document.createElement(\"canvas\");\n        this._canvas.width = width;\n        this._canvas.height = height;\n\n        this._context = this._canvas.getContext(\"2d\", {\n            willReadFrequently: true\n        })!;\n    }\n\n    /**\n     * Returns canvas object.\n     * @public\n     * @returns {HTMLCanvasElement}\n     */\n    public getCanvas(): HTMLCanvasElement {\n        return this._canvas;\n    }\n\n    /**\n     * Returns canvas context pointer.\n     * @public\n     * @returns {CanvasRenderingContext2D}\n     */\n    public getContext(): CanvasRenderingContext2D {\n        return this._context;\n    }\n\n    /**\n     * Fills canvas RGBA with zeroes.\n     * @public\n     */\n    public fillEmpty() {\n        let imgd = this._context.getImageData(0, 0, this._canvas.width, this._canvas.height);\n        let pixels = imgd.data;\n        for (let i = 0, n = pixels.length; i < n; i += 4) {\n            pixels[i] = pixels[i + 1] = pixels[i + 2] = pixels[i + 3] = 0;\n        }\n        this._context.putImageData(imgd, 0, 0);\n    }\n\n    /**\n     * Fills canvas RGBA with color.\n     * @public\n     * @param {string} color - CSS string color.\n     */\n    public fill(color: string) {\n        this._context.fillStyle = color\n        this._context.fill()\n    }\n\n    /**\n     * Gets canvas pixels RGBA data.\n     * @public\n     * @returns {Uint8ClampedArray}\n     */\n    public getData(): Uint8ClampedArray {\n        let imgd = this._context.getImageData(0, 0, this._canvas.width, this._canvas.height);\n        return imgd.data;\n    }\n\n    /**\n     * Fill the canvas by color.\n     * @public\n     * @param {string} color - CSS string color.\n     */\n    public fillColor(color: string) {\n        this._context.fillStyle = color;\n        this._context.fillRect(0, 0, this._canvas.width, this._canvas.height);\n    }\n\n    /**\n     * Sets RGBA pixel data.\n     * @public\n     * @param {Array.<number>} data - Array RGBA data.\n     */\n    public setData(data: ArrayLike<number>) {\n        let imageData = this._context.createImageData(this._canvas.width, this._canvas.height);\n        imageData.data.set(data);\n        this._context.putImageData(imageData, 0, 0);\n    }\n\n    /**\n     * Resize canvas.\n     * @public\n     * @param {number} width - Width.\n     * @param {number} height - Height.\n     */\n    public resize(width: number, height: number) {\n        this._canvas.width = width;\n        this._canvas.height = height;\n        this._context = this._canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    }\n\n    /**\n     * Draw an image on the canvas.\n     * @public\n     * @param {Image} img - Draw image.\n     * @param {number} [x] - Left top image corner X coordinate on the canvas.\n     * @param {number} [y] - Left top image corner Y coordinate on the canvas.\n     * @param {number} [width] - Image width slice. Image width is default.\n     * @param {number} [height] - Image height slice. Image height is default.\n     */\n    public drawImage(img: HTMLImageElement, x: number, y: number, width: number, height: number) {\n        this._context.drawImage(img, x || 0, y || 0, width || img.width, height || img.height);\n    }\n\n    /**\n     * Converts canvas to JS image object.\n     * @public\n     * @returns {Image}\n     */\n    public getImage(): HTMLImageElement {\n        let img = new Image();\n        img.width = this.getWidth();\n        img.height = this.getHeight();\n        img.src = this._canvas.toDataURL(\"image/png\");\n        return img;\n    }\n\n    /**\n     * Get measured text width.\n     * @public\n     * @param {string} text - Measured text.\n     * @returns {number}\n     */\n    public getTextWidth(text: string): number {\n        let metrics = this._context.measureText(text);\n        return Math.round(metrics.width);\n    }\n\n    /**\n     * Draw a text on the canvas.\n     * @public\n     * @param {string} text - Text.\n     * @param {number} [x] - Canvas X - coordinate. 0 - default.\n     * @param {number} [y] - Canvas Y - coordinate. 0 - default.\n     * @param {string} [font] - Font style. 'normal 14px Verdana' - is default.\n     * @param {string} [color] - Css font color.\n     */\n    public drawText(text: string, x: number = 0, y: number = 14, font: string = \"normal 14px Verdana\", color: string = \"black\") {\n        this._context.fillStyle = color;\n        this._context.font = font;\n        this._context.fillText(text, x, y);\n    }\n\n    /**\n     * Gets canvas width.\n     * @public\n     * @returns {number}\n     */\n    public getWidth(): number {\n        return this._canvas.width;\n    }\n\n    /**\n     * Gets canvas height.\n     * @public\n     * @returns {number}\n     */\n    public getHeight(): number {\n        return this._canvas.height;\n    }\n\n    /**\n     * Load image to canvas.\n     * @public\n     * @param {string} url - Image url.\n     * @param {Function} [callback] - Image onload callback.\n     */\n    public load(url: string, callback: Function) {\n        let img = new Image();\n        let that = this;\n        img.onload = function () {\n            that.resize(img.width, img.height);\n            that._context.drawImage(img, 0, 0, img.width, img.height);\n            callback && callback(img);\n        };\n        img.src = url;\n    }\n\n    /**\n     * Open canvas image in the new window.\n     * @public\n     */\n    public openImage() {\n        let img = this.getImage();\n        let dataUrl = img.src;\n\n        let windowContent = \"<!DOCTYPE html>\";\n        windowContent += \"<html>\";\n        windowContent += \"<head><title>Print</title></head>\";\n        windowContent += \"<body>\";\n        windowContent += '<img src=\"' + dataUrl + '\">';\n        windowContent += \"</body>\";\n        windowContent += \"</html>\";\n\n        let printWin = window.open(\n            \"\",\n            \"\",\n            \"width=\" + img.width + \"px ,height=\" + img.height + \"px\"\n        );\n\n        if (printWin) {\n            printWin.document.open();\n            printWin.document.write(windowContent);\n            printWin.document.close();\n            printWin.focus();\n        }\n    }\n\n    public destroy() {\n        this._canvas.width = 1;\n        this._canvas.height = 1;\n        //@ts-ignore\n        this._canvas = null;\n        //@ts-ignore\n        this._context = null;\n    }\n}\n\nexport {ImageCanvas};\n","import {BaseFramebuffer, IBaseFramebufferParams} from \"./BaseFramebuffer\";\nimport {ImageCanvas} from \"../ImageCanvas\";\nimport {Handler} from \"./Handler\";\n\nexport interface IFrameBufferParams extends IBaseFramebufferParams {\n    isBare?: boolean;\n    format?: string | string[];\n    type?: string | string[];\n    attachment?: string | string[];\n    renderbufferTarget?: string;\n    textures?: WebGLTexture[];\n}\n\n/**\n * Class represents framebuffer.\n * @class\n * @param {Handler} handler - WebGL handler.\n * @param {IFrameBufferParams} [options] - Framebuffer options:\n */\nexport class Framebuffer extends BaseFramebuffer {\n\n    protected _isBare: boolean;\n\n    protected _internalFormatArr: string[];\n\n    protected _formatArr: string[];\n\n    protected _typeArr: string[];\n\n    protected _attachmentArr: string[];\n\n    protected _renderbufferTarget: string;\n\n    /**\n     * Framebuffer texture.\n     * @public\n     * @type {number}\n     */\n    public textures: WebGLTexture[];\n\n    constructor(handler: Handler, options: IFrameBufferParams = {}) {\n\n        super(handler, options);\n\n        this._isBare = options.isBare || false;\n\n        this._internalFormatArr = options.internalFormat instanceof Array ? options.internalFormat : [options.internalFormat || \"RGBA\"];\n\n        this._formatArr = options.format instanceof Array ? options.format : [options.format || \"RGBA\"];\n\n        this._typeArr = options.type instanceof Array ? options.type : [options.type || \"UNSIGNED_BYTE\"];\n\n        if (options.attachment instanceof Array) {\n            this._attachmentArr = options.attachment.map((a: string, i: number) => {\n                let res = a.toUpperCase();\n                if (res === \"COLOR_ATTACHMENT\") {\n                    return `${res}${i.toString()}`;\n                }\n                return res;\n            })\n        } else {\n            this._attachmentArr = [options.attachment as string || \"COLOR_ATTACHMENT0\"];\n        }\n\n        this._renderbufferTarget = options.renderbufferTarget != undefined ? options.renderbufferTarget : \"DEPTH_ATTACHMENT\";\n\n        this.textures = options.textures || new Array(this._size);\n    }\n\n    // static blit(sourceFramebuffer: Framebuffer, destFramebuffer: Framebuffer, glAttachment: number, glMask: number, glFilter: number) {\n    //     let gl = sourceFramebuffer.handler.gl!;\n    //\n    //     gl.bindFramebuffer(gl.READ_FRAMEBUFFER, sourceFramebuffer._fbo);\n    //     gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, destFramebuffer._fbo);\n    //     gl.readBuffer(glAttachment);\n    //\n    //     gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 1.0]);\n    //\n    //     gl.blitFramebuffer(0, 0, sourceFramebuffer._width, sourceFramebuffer._height, 0, 0, destFramebuffer._width, destFramebuffer._height, glMask, glFilter);\n    //\n    //     gl.bindFramebuffer(gl.FRAMEBUFFER, null!);\n    //     gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null!);\n    //     gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null!);\n    // }\n\n    public override destroy() {\n        let gl = this.handler.gl;\n\n        if (!gl) return;\n\n        for (let i = 0; i < this.textures.length; i++) {\n            gl.deleteTexture(this.textures[i]);\n        }\n        this.textures = new Array(this._size);\n\n        gl.deleteFramebuffer(this._fbo);\n        gl.deleteRenderbuffer(this._depthRenderbuffer);\n\n        this._depthRenderbuffer = null;\n        this._fbo = null;\n\n        this._active = false;\n    }\n\n    /**\n     * Framebuffer initialization.\n     * @public\n     * @override\n     */\n    public override init() {\n        let gl = this.handler.gl;\n\n        if (!gl) return;\n\n        this._fbo = gl.createFramebuffer();\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._fbo);\n\n        if (!this._isBare) {\n            let attachmentArr = [];\n            for (let i = 0; i < this.textures.length; i++) {\n                let ti = this.textures[i] || this.handler.createEmptyTexture2DExt(this._width, this._height, this._filter, this._internalFormatArr[i], this._formatArr[i], this._typeArr[i]);\n\n                let att_i = (gl as any)[this._attachmentArr[i]];\n\n                if (ti) {\n                    this.bindOutputTexture(ti, att_i);\n                    this.textures[i] = ti;\n                }\n\n                if (this._attachmentArr[i] != \"DEPTH_ATTACHMENT\") {\n                    attachmentArr.push(att_i);\n                }\n            }\n            gl.drawBuffers && gl.drawBuffers(attachmentArr);\n        }\n\n        if (this._useDepth) {\n            this._depthRenderbuffer = gl.createRenderbuffer();\n            gl.bindRenderbuffer(gl.RENDERBUFFER, this._depthRenderbuffer);\n            gl.renderbufferStorage(gl.RENDERBUFFER, (gl as any)[this._depthComponent], this._width, this._height);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, (gl as any)[this._renderbufferTarget], gl.RENDERBUFFER, this._depthRenderbuffer);\n            gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        }\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null!);\n    }\n\n    /**\n     * Bind buffer texture.\n     * @public\n     * @param {WebGLTexture} texture - Output texture.\n     * @param {number} [glAttachment=0] - color attachment index.\n     */\n    public bindOutputTexture(texture: WebGLTexture, glAttachment?: number) {\n        let gl = this.handler.gl!;\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, glAttachment || gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n    }\n\n    /**\n     * Gets pixel RGBA color from framebuffer by coordinates.\n     * @public\n     * @param {Uint8Array} res - Normalized x - coordinate.\n     * @param {number} nx - Normalized x - coordinate.\n     * @param {number} ny - Normalized y - coordinate.\n     * @param {number} [w=1] - Normalized width.\n     * @param {number} [h=1] - Normalized height.\n     * @param {number} [index=0] - color attachment index.\n     */\n    public readPixels(res: Uint8Array, nx: number, ny: number, index: number = 0, w: number = 1, h: number = 1) {\n        let gl = this.handler.gl!;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._fbo);\n        gl.readBuffer && gl.readBuffer(gl.COLOR_ATTACHMENT0 + index || 0);\n        gl.readPixels(nx * this._width, ny * this._height, w, h, gl.RGBA, (gl as any)[this._typeArr[index]], res);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null!);\n    }\n\n    /**\n     * Reads all pixels(RGBA colors) from framebuffer.\n     * @public\n     * @param {Uint8Array} res - Result array.\n     * @param {number} [attachmentIndex=0] - color attachment index.\n     */\n    public readAllPixels(res: Uint8Array, attachmentIndex: number = 0) {\n        let gl = this.handler.gl!;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._fbo);\n        gl.readBuffer && gl.readBuffer(gl.COLOR_ATTACHMENT0 + attachmentIndex);\n        gl.readPixels(0, 0, this._width, this._height, gl.RGBA, (gl as any)[this._typeArr[attachmentIndex]], res);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null!);\n    }\n\n    /**\n     * Gets JavaScript image that in the framebuffer.\n     * @public\n     * @returns {HTMLImageElement} -\n     */\n    public getImage(): HTMLImageElement {\n        let data = new Uint8Array(4 * this._width * this._height);\n        this.readAllPixels(data);\n        let imageCanvas = new ImageCanvas(this._width, this._height);\n        imageCanvas.setData(data);\n        return imageCanvas.getImage();\n    }\n}\n","import {AtmosphereParameters, COMMON, transmittance, scattering} from \"../shaders/atmos\";\nimport {Framebuffer} from \"../webgl/Framebuffer\";\nimport {Program} from '../webgl/Program';\nimport {Control, IControlParams} from \"./Control\";\nimport {NumberArray3} from '../math/Vec3';\n\nexport interface IAtmosphereParams extends IControlParams {\n    height?: number,\n    rayleighScale?: number,\n    mieScale?: number,\n    groundAlbedo?: number,\n    bottomRadius?: number,\n    rayleighScatteringCoefficient?: NumberArray3,\n    mieScatteringCoefficient?: number,\n    mieExtinctionCoefficient?: number,\n    ozoneAbsorptionCoefficient?: NumberArray3,\n    sunAngularRadius?: number,\n    sunIntensity?: number,\n    ozoneDensityHeight?: number,\n    ozoneDensityWide?: number,\n}\n\nexport class Atmosphere extends Control {\n    public _transmittanceBuffer: Framebuffer | null;\n    public _scatteringBuffer: Framebuffer | null;\n    public opacity: number;\n\n    protected _parameters: AtmosphereParameters;\n\n    constructor(options: IAtmosphereParams = {}) {\n        super({\n            name: \"Atmosphere\",\n            ...options\n        });\n\n        this._transmittanceBuffer = null;\n        this._scatteringBuffer = null;\n\n        this.opacity = 1.0;\n\n        this._parameters = {\n            ATMOS_HEIGHT: options.height || 100000.0,\n            RAYLEIGH_SCALE: options.rayleighScale || 0.08,\n            MIE_SCALE: options.mieScale || 0.012,\n            GROUND_ALBEDO: options.groundAlbedo || 0.05,\n            BOTTOM_RADIUS: options.bottomRadius || 6356752.3142451793,\n            rayleighScatteringCoefficient: options.rayleighScatteringCoefficient || [5.802, 13.558, 33.100],\n            mieScatteringCoefficient: options.mieScatteringCoefficient || 3.996,\n            mieExtinctionCoefficient: options.mieExtinctionCoefficient || 4.440,\n            ozoneAbsorptionCoefficient: options.ozoneAbsorptionCoefficient || [0.650, 1.881, 0.085],\n            SUN_ANGULAR_RADIUS: options.sunAngularRadius || 0.004685,\n            SUN_INTENSITY: options.sunIntensity || 1.0,\n            ozoneDensityHeight: options.ozoneDensityHeight || 25e3,\n            ozoneDensityWide: options.ozoneDensityWide || 15e3,\n        }\n    }\n\n    public setParameters(parameters: AtmosphereParameters) {\n\n        this._parameters = JSON.parse(JSON.stringify(parameters));\n\n        this.initLookupTexturesShaders();\n        this.drawLookupTextures();\n        this.removeLookupTexturesShaders();\n\n        this.initPlanetAtmosphereShader();\n    }\n\n    public get parameters(): AtmosphereParameters {\n        return JSON.parse(JSON.stringify(this._parameters));\n    }\n\n    public initPlanetAtmosphereShader() {\n        this.planet?.initAtmosphereShader(this._parameters);\n    }\n\n    public override oninit() {\n        if (this.renderer) {\n\n            //\n            // Draw atmosphere lookup textures\n            //\n            this._initLookupTextures();\n\n            this.initLookupTexturesShaders();\n            this.drawLookupTextures();\n            this.removeLookupTexturesShaders();\n\n            this.initBackgroundShader();\n\n            this.activate();\n        }\n    }\n\n    public initLookupTexturesShaders() {\n        if (this.renderer) {\n            this.renderer.handler.addProgram(transmittance(this._parameters), true);\n            this.renderer.handler.addProgram(scattering(this._parameters), true);\n        }\n    }\n\n    public initBackgroundShader() {\n        if (this.renderer) {\n            this.renderer.handler.addProgram(atmosphereBackgroundShader(this._parameters), true);\n        }\n    }\n\n    public removeBackgroundShader() {\n        if (this.renderer) {\n            this.renderer.handler.removeProgram(\"atmosphereBackground\");\n        }\n    }\n\n    public removeLookupTexturesShaders() {\n        if (this.renderer) {\n            let h = this.renderer.handler;\n\n            if (this._scatteringBuffer?.isComplete()) {\n                h.removeProgram(\"scattering\");\n            }\n\n            if (this._transmittanceBuffer?.isComplete()) {\n                h.removeProgram(\"transmittance\");\n            }\n        }\n    }\n\n    public override onactivate() {\n        super.onactivate();\n        this.planet && this.planet.events.on(\"draw\", this._drawBackground, this);\n    }\n\n    public override ondeactivate() {\n        super.ondeactivate();\n        this.planet && this.planet.events.off(\"draw\", this._drawBackground);\n    }\n\n    protected _initLookupTextures() {\n\n        let width = 1024,\n            height = 1024;\n\n        this._transmittanceBuffer = new Framebuffer(this.renderer!.handler, {\n            width: width,\n            height: height,\n            useDepth: false,\n            filter: \"LINEAR\",\n            type: \"FLOAT\",\n            internalFormat: \"RGBA16F\"\n        });\n\n        this._transmittanceBuffer.init();\n\n        this._scatteringBuffer = new Framebuffer(this.renderer!.handler, {\n            width: width,\n            height: height,\n            useDepth: false,\n            filter: \"LINEAR\",\n            type: \"FLOAT\",\n            internalFormat: \"RGBA16F\"\n        });\n\n        this._scatteringBuffer.init();\n    }\n\n    protected _renderLookupTextures() {\n        if (!this.renderer) return;\n\n        let positionBuffer = this.renderer.screenFramePositionBuffer;\n\n        let h = this.renderer.handler;\n        let gl = h.gl!;\n\n        //\n        // Draw transmittance texture\n        //\n        if (this._transmittanceBuffer) {\n            this._transmittanceBuffer.activate();\n\n            let p = h.programs.transmittance;\n            let sha = p._program.attributes;\n            let shu = p._program.uniforms;\n            p.activate();\n\n            gl.clearColor(0.0, 0.0, 0.0, 1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            gl.uniform2fv(shu.iResolution, [this._transmittanceBuffer.width, this._transmittanceBuffer.height]);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer!);\n            gl.vertexAttribPointer(sha.a_position, positionBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, positionBuffer!.numItems);\n\n            this._transmittanceBuffer.deactivate();\n        }\n\n        //\n        // Draw scattering texture\n        //\n        if (this._scatteringBuffer && this._transmittanceBuffer) {\n            this._scatteringBuffer.activate();\n\n            let p = h.programs.scattering;\n            let sha = p._program.attributes;\n            let shu = p._program.uniforms;\n            p.activate();\n\n            gl.clearColor(0.0, 0.0, 0.0, 1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            gl.uniform2fv(shu.iResolution, [this._scatteringBuffer.width, this._scatteringBuffer.height]);\n\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, this._transmittanceBuffer.textures[0]);\n            gl.uniform1i(shu.transmittanceTexture, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer!);\n            gl.vertexAttribPointer(sha.a_position, positionBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, positionBuffer!.numItems);\n\n            this._scatteringBuffer.deactivate();\n        }\n    }\n\n    public drawLookupTextures() {\n        this._renderLookupTextures();\n    }\n\n    protected _drawBackground() {\n        let h = this.renderer!.handler;\n        let sh = h.programs.atmosphereBackground,\n            p = sh._program,\n            shu = p.uniforms,\n            gl = h.gl!;\n        let r = this.renderer!;\n        let cam = this.planet!.camera;\n\n        gl.disable(gl.DEPTH_TEST);\n\n        sh.activate();\n        gl.bindBuffer(gl.ARRAY_BUFFER, r.screenFramePositionBuffer!);\n        gl.vertexAttribPointer(p.attributes.corners, 2, gl.FLOAT, false, 0, 0);\n\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this._transmittanceBuffer!.textures[0]);\n        gl.uniform1i(shu.transmittanceTexture, 0);\n\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this._scatteringBuffer!.textures[0]);\n        gl.uniform1i(shu.scatteringTexture, 1);\n\n        gl.uniformMatrix4fv(shu.viewMatrix, false, cam.getViewMatrix());\n\n        let sunPos = this.planet!.sunPos;\n        gl.uniform3fv(shu.sunPos, [sunPos.x, sunPos.y, sunPos.z]);\n        gl.uniform3fv(shu.camPos, [cam.eye.x, cam.eye.y, cam.eye.z]);\n        gl.uniform2fv(shu.iResolution, [r.sceneFramebuffer!.width, r.sceneFramebuffer!.height]);\n        gl.uniform1f(shu.fov, cam.getViewAngle());\n        gl.uniform1f(shu.opacity, this.opacity);\n\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n        gl.enable(gl.DEPTH_TEST);\n    }\n}\n\nfunction atmosphereBackgroundShader(atmosParams?: AtmosphereParameters): Program {\n    return new Program(\"atmosphereBackground\", {\n        uniforms: {\n            iResolution: \"vec2\",\n            fov: \"float\",\n            camPos: \"vec3\",\n            viewMatrix: \"mat4\",\n            transmittanceTexture: \"sampler2D\",\n            scatteringTexture: \"sampler2D\",\n            sunPos: \"vec3\",\n            opacity: \"float\"\n        },\n        attributes: {\n            corners: \"vec3\"\n        },\n        vertexShader:\n            `            \n            attribute vec2 corners;\n            \n            void main(void) {\n                gl_Position = vec4(corners, 0.0, 1.0);\n            }`,\n        fragmentShader:\n            `                                   \n            precision lowp float;\n            \n            ${COMMON(atmosParams)}\n            \n            uniform mat4 viewMatrix;\n            uniform vec3 sunPos;\n            uniform vec3 camPos;     \n            uniform vec2 iResolution;\n            uniform float fov;\n            uniform float opacity;\n                       \n            uniform sampler2D transmittanceTexture;\n            uniform sampler2D scatteringTexture;\n                                                           \n            vec3 transmittanceFromTexture(float height, float angle) \n            {\n                float u = (angle + 1.0) * 0.5;\n                float v = height / ATMOS_HEIGHT;\n                return texture2D(transmittanceTexture, vec2(u, v)).xyz;\n            }\n            \n            vec3 multipleScatteringContributionFromTexture(float height, float angle) \n            {\n                float u = (angle + 1.0) * 0.5;\n                float v = height / ATMOS_HEIGHT;\n                return texture2D(scatteringTexture, vec2(u, v)).xyz; \n            }\n\n            bool intersectEllipsoidToSphere(in vec3 ro, in vec3 rd, in vec3 ellRadii, in float sphereRadius, out float t1, out float t2) \n            {\n                float offset = 0.0,\n                      distanceToSpace = 0.0;\n                                                        \n                if(intersectEllipsoid(ro, rd, ellRadii, offset, distanceToSpace)){\n                    vec3 hitEll = ro + rd * offset;\n                    vec3 nEll = normalEllipsoid(hitEll, ellRadii);\n                    float t = 0.0;\n                    bool intersectsSphere = intersectSphere(hitEll, nEll, sphereRadius, t);\n                    vec3 hitSphere = hitEll + nEll * t;\n                    t1 = length(hitSphere - ro);\n                    \n                    hitEll = ro + rd * distanceToSpace;\n                    nEll = normalEllipsoid(hitEll, ellRadii);\n                    t = 0.0;\n                    intersectsSphere = intersectSphere(hitEll, nEll, sphereRadius, t);\n                    hitSphere = hitEll + nEll * t;\n                    t2 = length(hitSphere - ro);\n                    \n                    return true; \n                }\n                return false; \n            }\n            \n            mat4 transpose(in mat4 m) \n            {\n                vec4 i0 = m[0];\n                vec4 i1 = m[1];\n                vec4 i2 = m[2];\n                vec4 i3 = m[3];\n            \n                mat4 outMatrix = mat4(\n                     vec4(i0.x, i1.x, i2.x, i3.x),\n                     vec4(i0.y, i1.y, i2.y, i3.y),\n                     vec4(i0.z, i1.z, i2.z, i3.z),\n                     vec4(i0.w, i1.w, i2.w, i3.w)\n                     );\n                                 \n                return outMatrix;\n            }\n                                                                     \n            void mainImage(out vec4 fragColor) \n            {            \n                vec3 cameraPosition = camPos;\n                \n                vec3 lightDirection = normalize(sunPos);               \n                             \n                vec2 uv = (2.0 * gl_FragCoord.xy - iResolution.xy) / iResolution.y;\n                float fieldOfView = fov;\n                float z = 1.0 / tan(fieldOfView * 0.5 * PI / 180.0);\n                vec3 rayDirection = normalize(vec3(uv, -z));\n                vec4 rd = transpose(viewMatrix) * vec4(rayDirection, 1.0);\n                rayDirection = rd.xyz;               \n                                          \n                vec3 light = vec3(0.0);\n                vec3 transmittanceFromCameraToSpace = vec3(1.0);\n                float offset = 0.0;\n                float distanceToSpace = 0.0;\n                                                \n                rayDirection = normalize(rayDirection * SPHERE_TO_ELLIPSOID_SCALE);\n                cameraPosition *= SPHERE_TO_ELLIPSOID_SCALE;\n                lightDirection = normalize(lightDirection * SPHERE_TO_ELLIPSOID_SCALE);\n                \n                if(length(cameraPosition) < BOTTOM_RADIUS + 100.0){\n                    cameraPosition = normalize(cameraPosition) * (BOTTOM_RADIUS + 100.0); \n                }\n                                                \n                if (intersectSphere(cameraPosition, rayDirection, TOP_RADIUS, offset, distanceToSpace)) \n                {    \n                    vec3 rayOrigin = cameraPosition;\n                    \n                    // above atmosphere                    \n                    if (offset > 0.0) {\n                        // intersection of camera ray with atmosphere\n                        rayOrigin = cameraPosition + rayDirection * offset;\n                    }                   \n                    \n                    float height = length(rayOrigin) - BOTTOM_RADIUS;\n                    float rayAngle = dot(rayOrigin, rayDirection) / length(rayOrigin);\n                    bool cameraBelow = rayAngle < 0.0;\n                    \n                    transmittanceFromCameraToSpace = transmittanceFromTexture(height, cameraBelow ? -rayAngle : rayAngle);\n                    \n                    float phaseAngle = dot(lightDirection, rayDirection);\n                    float rayleighPhase = rayleighPhase(phaseAngle);\n                    float miePhase = miePhase(phaseAngle);\n                    \n                    float distanceToGround = 0.0;\n                    \n                    bool hitGround = intersectSphere(cameraPosition, rayDirection, BOTTOM_RADIUS, distanceToGround) && distanceToGround > 0.0;\n                    \n                    if(intersectSphere(cameraPosition, rayDirection, BOTTOM_RADIUS - 100000.0, distanceToGround) && hitGround)\n                    {\n                        discard;\n                    }\n                    \n                    float segmentLength = ((hitGround ? distanceToGround : distanceToSpace) - max(offset, 0.0)) / float(SAMPLE_COUNT);\n                                                                    \n                    float t = segmentLength * 0.5;\n                    \n                    vec3 transmittanceCamera; \n                    vec3 transmittanceLight; \n            \n                    for (int i = 0; i < SAMPLE_COUNT; i++) \n                    {\n                        vec3 position = rayOrigin + t * rayDirection;\n                        float height = length(position) - BOTTOM_RADIUS; \n                        vec3 up = position / length(position);\n                        float rayAngle = dot(up, rayDirection);\n                        float lightAngle = dot(up, lightDirection);\n                        vec3 transmittanceToSpace = transmittanceFromTexture(height, cameraBelow ? -rayAngle : rayAngle);\n                        transmittanceCamera = cameraBelow ? (transmittanceToSpace / transmittanceFromCameraToSpace) : (transmittanceFromCameraToSpace / transmittanceToSpace);\n                        transmittanceLight = transmittanceFromTexture(height, lightAngle);\n                        vec2 opticalDensity = exp(-height / rayleighMieHeights);\n                        vec3 scatteredLight = transmittanceLight * (rayleighScatteringCoefficient * opticalDensity.x * rayleighPhase + mieScatteringCoefficient * opticalDensity.y * miePhase);\n                        scatteredLight += multipleScatteringContributionFromTexture(height, lightAngle) * (rayleighScatteringCoefficient * opticalDensity.x + mieScatteringCoefficient * opticalDensity.y);  \n                        light += transmittanceCamera * scatteredLight * segmentLength;\n                        t += segmentLength;\n                    }\n                    \n                    light *= SUN_INTENSITY;\n            \n                    if (hitGround) \n                    {\n                        vec3 hitPoint = cameraPosition + rayDirection * distanceToGround;\n                        vec3 up = hitPoint / length(hitPoint);\n                        float diffuseAngle = max(dot(up, lightDirection), 0.0);\n                        float lightAngle = dot(up, lightDirection);\n                        light += transmittanceCamera * GROUND_ALBEDO * multipleScatteringContributionFromTexture(height, lightAngle) * SUN_INTENSITY;\n                        light += transmittanceCamera * transmittanceLight * GROUND_ALBEDO * diffuseAngle * SUN_INTENSITY;\n                    }\n                }\n                                     \n                // sun disk\n                // float distanceToGround;\n                // bool hitGround = intersectSphere(cameraPosition, rayDirection, BOTTOM_RADIUS, distanceToGround) && distanceToGround > 0.0;\n                // if (!hitGround) {\n                //    float angle = dot(rayDirection, lightDirection);\n                //    if (angle > cos(SUN_ANGULAR_RADIUS)) {\n                //       light = SUN_INTENSITY * transmittanceFromCameraToSpace;\n                //    }\n                // }\n                \n                float distanceToGround = 0.0;\n                bool hitGround = intersectSphere(cameraPosition, rayDirection, BOTTOM_RADIUS, distanceToGround) && distanceToGround > 0.0;\n                if(!hitGround)\n                {\n                    vec3 sunLum = sunWithBloom(rayDirection, lightDirection) * vec3(1.0,1.0,0.8);\n                    // limit the bloom effect\n                    sunLum = smoothstep(0.002, 1.0, sunLum);\n                    light += sunLum * SUN_INTENSITY * transmittanceFromCameraToSpace;\n                }\n                            \n                fragColor = vec4(pow(light * 8.0, vec3(1.0 / 2.2)), clamp(opacity, 0.0, 1.0));           \n            }\n                                    \n            void main(void) \n            {                            \n                mainImage(gl_FragColor);            \n            }`\n    });\n}\n","interface IProjParams {\n    units: string;\n    code: string;\n}\n\n/**\n * Projection units: 'degrees', 'ft', 'm' or 'km'.\n * @enum {string}\n * @api\n */\nexport const Units = {\n    DEGREES: \"degrees\",\n    FEET: \"ft\",\n    METERS: \"m\",\n    KILOMETERS: \"km\"\n};\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Record<string, number>}\n */\nexport const METERS_PER_UNIT: Record<string, number> = {};\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.KILOMETERS] = 1000;\n\nlet _counter = 0;\n\nclass Proj {\n\n    public id: number;\n\n    /**\n     * @public\n     * @type {string}\n     */\n    public code: string;\n\n    /**\n     * @public\n     * @type {Units}\n     */\n    public units: string;\n\n    constructor(options: IProjParams) {\n        this.id = _counter++;\n        this.code = options.code;\n        this.units = options.units;\n    }\n\n    /**\n     * Compare projections.\n     * @public\n     * @param {Proj} proj - Projection object.\n     * @returns {boolean}\n     */\n    public equal(proj: Proj): boolean {\n        return proj.id === this.id;\n    }\n}\n\nexport {Proj};","/**\n * @module og/proj/EPSG3857\n */\n\nimport { Proj, Units } from \"./Proj\";\n\n/**\n * EPSG:3857 projection object.\n * @type {Proj}\n */\nexport const EPSG3857 = new Proj({ code: \"epsg:3857\", units: Units.METERS });\n","import {Layer} from \"../layer/Layer\";\nimport {Segment} from \"./Segment\";\nimport {Material} from \"../layer/Material\";\n\nclass Slice {\n    public segment: Segment;\n    public layers: Layer[];\n    public tileOffsetArr: Float32Array;\n    public layerOpacityArr: Float32Array;\n\n    constructor(segment: Segment) {\n        this.segment = segment;\n        this.layers = [];\n        this.tileOffsetArr = new Float32Array(segment.planet.SLICE_SIZE_4);\n        this.layerOpacityArr = new Float32Array(segment.planet.SLICE_SIZE);\n    }\n\n    public clear() {\n        // @ts-ignore\n        this.layers = null;\n        // @ts-ignore\n        this.tileOffsetArr = null;\n        // @ts-ignore\n        this.layerOpacityArr = null;\n    }\n\n    public append(layer: Layer, material: Material) {\n        let n = this.layers.length;\n\n        this.layers.push(layer);\n\n        this.layerOpacityArr[n] = layer.screenOpacity;\n\n        let n4 = n * 4;\n\n        let arr = layer.applyMaterial(material);\n        this.tileOffsetArr[n4] = arr[0];\n        this.tileOffsetArr[n4 + 1] = arr[1];\n        this.tileOffsetArr[n4 + 2] = arr[2];\n        this.tileOffsetArr[n4 + 3] = arr[3];\n\n        //arr = this.segment._getLayerExtentOffset(layer);\n        //slice.visibleExtentOffsetArr[n4] = arr[0];\n        //slice.visibleExtentOffsetArr[n4 + 1] = arr[1];\n        //slice.visibleExtentOffsetArr[n4 + 2] = arr[2];\n        //slice.visibleExtentOffsetArr[n4 + 3] = arr[3];\n\n    }\n}\n\nexport {Slice}","import * as mercator from \"../mercator\";\nimport * as segmentHelper from \"../segment/segmentHelper\";\nimport {Box} from \"../bv/Box\";\nimport {Extent} from \"../Extent\";\nimport {Entity} from \"../entity/Entity\";\nimport {EPSG3857} from \"../proj/EPSG3857\";\nimport {E, N, NOTRENDERING, OPSIDE, RENDERING, S, W, WALKTHROUGH} from \"../quadTree/quadTree\";\nimport {getMatrixSubArray64, TypedArray} from \"../utils/shared\";\nimport {Handler, WebGLBufferExt, WebGLTextureExt} from \"../webgl/Handler\";\nimport {ITerrainWorkerData} from \"../utils/TerrainWorker\";\nimport {Layer} from \"../layer/Layer\";\nimport {LonLat} from \"../LonLat\";\nimport {Material} from \"../layer/Material\";\nimport {Node} from \"../quadTree/Node\";\nimport {Planet} from \"../scene/Planet\";\nimport {PlanetCamera} from \"../camera/PlanetCamera\";\nimport {Program} from \"../webgl/Program\";\nimport {Proj} from \"../proj/Proj\";\nimport {NumberArray6, Sphere} from \"../bv/Sphere\";\nimport {Slice} from \"./Slice\";\nimport {Ray} from \"../math/Ray\";\nimport {Vec3} from \"../math/Vec3\";\nimport {IPlainSegmentWorkerData} from \"../utils/PlainSegmentWorker\";\nimport {MAX_LAT, MIN_LAT, POLE} from \"../mercator\";\n\n//Math.round(Math.abs(-pole - extent.southWest.lon) / (extent.northEast.lon - extent.southWest.lon));\n\nexport function getTileCellIndex(coordinate: number, tileSize: number, worldEdge: number): number {\n    return Math.floor(Math.abs(worldEdge - coordinate) / tileSize);\n}\n\nexport function getTileCellExtent(x: number, y: number, z: number, worldExtent: Extent): Extent {\n    let pz = 1.0 / (1 << z);\n\n    let worldWidth = worldExtent.getWidth(),\n        worldHeight = worldExtent.getHeight();\n\n    let w = worldWidth * pz,\n        h = worldHeight * pz;\n\n    let sw_lon = worldExtent.southWest.lon + x * w,\n        ne_lat = worldExtent.northEast.lat - y * h;\n\n    return new Extent(new LonLat(sw_lon, ne_lat - h), new LonLat(sw_lon + w, ne_lat));\n}\n\nexport const TILEGROUP_COMMON = 0;\nexport const TILEGROUP_NORTH = 20;\nexport const TILEGROUP_SOUTH = 300;\n\nexport function getTileGroupByLat(lat: number, maxLat: number = MAX_LAT): number {\n    if (lat > maxLat) {\n        return TILEGROUP_NORTH;\n    } else if (lat < -maxLat) {\n        return TILEGROUP_SOUTH;\n    }\n    return TILEGROUP_COMMON;\n}\n\nlet _tempHigh = new Vec3();\nlet _tempLow = new Vec3();\n\nlet _v0 = new Vec3(),\n    _v1 = new Vec3(),\n    _v2 = new Vec3(),\n    _v3 = new Vec3();\n\nlet _ray = new Ray(),\n    _rayEx = new Ray();\n\nconst _S = new Array(4);\n_S[N] = 0;\n_S[E] = 1;\n_S[S] = 1;\n_S[W] = 0;\n\nconst _V = new Array(4);\n_V[N] = false;\n_V[E] = true;\n_V[S] = false;\n_V[W] = true;\n\n/**\n * Planet segment Web Mercator tile class that stored and rendered with a quad-tree.\n * @class\n * @param {Node} node - Segment node.\n * @param {Planet} planet - Planet scene.\n * @param {number} tileZoom - Zoom index.\n * @param {Extent} extent - Segment extent.\n */\nclass Segment {\n\n    public _isNorth?: boolean;\n\n    public isPole: boolean;\n\n    public _tileGroup: number;\n\n    public _projection: Proj;\n\n    public elevationData: TypedArray | null;\n\n    /**\n     * Quad tree node of the segment.\n     * @type {Node}\n     */\n    public node: Node;\n\n    /**\n     * Planet pointer.\n     * @type {Planet}\n     */\n    public planet: Planet;\n\n    /**\n     * WebGl handler pointer.\n     * @type {Handler}\n     */\n    public handler: Handler;\n\n    /**\n     * Segment bounding sphere\n     * @type {Sphere}\n     */\n    public bsphere: Sphere;\n\n    public _plainRadius: number;\n\n    /**\n     * Segment bounding box.\n     * @type {Box}\n     */\n    public bbox: Box;\n\n    public _sw: Vec3;\n    public _nw: Vec3;\n    public _se: Vec3;\n    public _ne: Vec3;\n\n    public centerNormal: Vec3;\n\n    /**\n     * Geographical extent.\n     * @type {Extent}\n     */\n    public _extent: Extent;\n\n    public _extentMerc: Extent;\n\n    public _extentLonLat: Extent;\n\n    /**\n     * Vertices grid size.\n     * @type {number}\n     */\n    public gridSize: number;\n\n    public fileGridSize: number;\n\n    /**\n     * Tile zoom index.\n     * @type {number}\n     */\n    public tileZoom: number;\n\n    /**\n     * Equals to pow(2, tileZoom).\n     * @type {number}\n     */\n    public powTileZoom: number;\n\n    /**\n     * Horizontal tile index.\n     * @type {number}\n     */\n    public tileX: number;\n\n    public tileXE: number;\n\n    public tileXW: number;\n\n    public tileYN: number;\n\n    public tileYS: number;\n\n    /**\n     * Vertical tile index.\n     * @type {number}\n     */\n    public tileY: number;\n\n    public tileIndex: string;\n\n    /**\n     * Texture materials array.\n     * @type {Array.<Material>}\n     *\n     * @toso: Check it should be Map<number, Material> instead of array\n     *\n     */\n    public materials: Material[];\n\n    /**\n     * Plain segment vertices was created.\n     * @type {boolean}\n     */\n    public plainReady: boolean;\n\n    /**\n     * Segment is ready to create plain vertices.\n     * @type {boolean}\n     */\n    public initialized: boolean;\n\n    /**\n     * Normal map is allready made.\n     * @type {boolean}\n     */\n    public normalMapReady: boolean;\n\n    /**\n     * Terrain is allready applied flag.\n     * @type {boolean}\n     */\n    public terrainReady: boolean;\n\n    /**\n     * Terrain is loading now flag.\n     * @type {boolean}\n     */\n    public terrainIsLoading: boolean;\n\n    /**\n     * Terrain existing flag.\n     * @type {boolean}\n     */\n    public terrainExists: boolean;\n\n    /**\n     * Means that tree passage reach the segment, and the segment terrain is ready.\n     * @type {boolean}\n     */\n    public passReady: boolean;\n\n    public plainVertices: Float64Array | null;\n    public plainVerticesHigh: Float32Array | null;\n    public plainVerticesLow: Float32Array | null;\n\n    public plainNormals: Float32Array | null;\n\n    public terrainVertices: Float64Array | null;\n    public terrainVerticesHigh: Float32Array | null;\n    public terrainVerticesLow: Float32Array | null;\n    public noDataVertices: Uint8Array | null;\n\n    public tempVertices: Float64Array | null;\n    public tempVerticesHigh: Float32Array | null;\n    public tempVerticesLow: Float32Array | null;\n\n    public normalMapTexture: WebGLTextureExt | null;\n    public normalMapTextureBias: Float32Array;\n    public normalMapVertices: Float64Array | null;\n    public normalMapVerticesHigh: Float32Array | null;\n    public normalMapVerticesLow: Float32Array | null;\n    public normalMapNormals: Float32Array | null;\n\n    public vertexNormalBuffer: WebGLBufferExt | null;\n    public vertexPositionBuffer: WebGLBufferExt | null;\n    public vertexPositionBufferHigh: WebGLBufferExt | null;\n    public vertexPositionBufferLow: WebGLBufferExt | null;\n    public vertexTextureCoordBuffer: WebGLBufferExt | null;\n\n    public _globalTextureCoordinates: Float32Array;\n    public _inTheQueue: boolean;\n    public _appliedNeighborsZoom: [number, number, number, number];\n\n    public _slices: Slice[];\n\n    public _indexBuffer: WebGLBufferExt | null;\n\n    public readyToEngage: boolean;\n\n    public plainProcessing: boolean;\n\n    public normalMapTexturePtr: WebGLTextureExt | null;\n\n    public _transitionOpacity: number;\n\n    public _transitionTimestamp: number;\n\n    constructor(node: Node, planet: Planet, tileZoom: number, extent: Extent) {\n\n        this.isPole = false;\n\n        this._tileGroup = TILEGROUP_COMMON;\n\n        this._projection = EPSG3857;\n\n        this.node = node;\n\n        this.planet = planet;\n\n        this.handler = planet.renderer!.handler;\n\n        this.bsphere = new Sphere();\n\n        this._plainRadius = 0;\n\n        this.bbox = new Box();\n\n        this._sw = new Vec3();\n        this._nw = new Vec3();\n        this._se = new Vec3();\n        this._ne = new Vec3();\n\n        this.centerNormal = new Vec3();\n\n        this._extent = this._extentMerc = extent;\n\n        this._extentLonLat = new Extent();\n\n        this.gridSize = planet.terrain!.gridSizeByZoom[tileZoom];\n\n        this.fileGridSize = 0;\n\n        this.tileZoom = tileZoom;\n\n        this.powTileZoom = 1 << tileZoom; //Math.pow(2, tileZoom);\n\n        this.tileX = 0;\n\n        this.tileXE = 0;\n\n        this.tileXW = 0;\n\n        this.tileYN = 0;\n\n        this.tileYS = 0;\n\n        this.tileY = 0;\n\n        this.tileIndex = \"\";\n\n        this.elevationData = null;\n\n        this._assignTileIndexes();\n\n        /**\n         * @toso: Check it should be Map<number, Material> instead of array\n         */\n        this.materials = [];\n\n        this.plainReady = false;\n\n        this.initialized = false;\n\n        this.normalMapReady = false;\n\n        this.terrainReady = false;\n\n        this.terrainIsLoading = false;\n\n        this.terrainExists = false;\n\n        this.passReady = false;\n\n        this.plainVertices = null;\n        this.plainVerticesHigh = null;\n        this.plainVerticesLow = null;\n\n        this.plainNormals = null;\n\n        this.terrainVertices = null;\n        this.terrainVerticesHigh = null;\n        this.terrainVerticesLow = null;\n        this.noDataVertices = null;\n\n        this.tempVertices = null;\n        this.tempVerticesHigh = null;\n        this.tempVerticesLow = null;\n\n        this.normalMapTexture = null;\n        this.normalMapTextureBias = new Float32Array(3);\n        this.normalMapVertices = null;\n        this.normalMapVerticesHigh = null;\n        this.normalMapVerticesLow = null;\n        this.normalMapNormals = null;\n\n        this.vertexNormalBuffer = null;\n        this.vertexPositionBuffer = null;\n        this.vertexPositionBufferHigh = null;\n        this.vertexPositionBufferLow = null;\n        this.vertexTextureCoordBuffer = null;\n\n        this._globalTextureCoordinates = new Float32Array(4);\n        this._inTheQueue = false;\n        this._appliedNeighborsZoom = [0, 0, 0, 0];\n\n        this._slices = [];\n\n        this._indexBuffer = null;\n\n        this.readyToEngage = false;\n\n        this.plainProcessing = false;\n\n        this.normalMapTexturePtr = null;\n\n        this._transitionOpacity = 1.0;\n\n        this._transitionTimestamp = 0;\n    }\n\n    public checkZoom(): boolean {\n        return this.tileZoom < this.planet.terrain!._maxNodeZoom;\n    }\n\n    /**\n     * Returns entity terrain point.\n     * @public\n     * @param {Entity} entity - Entity.\n     * @param {Vec3} res - Point coordinates.\n     * @returns {Vec3} -\n     */\n    public getEntityTerrainPoint(entity: Entity, res: Vec3): number {\n        return this.getTerrainPoint(entity._cartesian, this.getInsideLonLat(entity), res);\n    }\n\n    public getInsideLonLat(obj: Entity | PlanetCamera): LonLat {\n        return obj._lonLatMerc;\n    }\n\n    public isEntityInside(entity: Entity): boolean {\n        return this._extentLonLat!.isInside(entity._lonLat);\n    }\n\n    /**\n     * Returns distance from object to terrain coordinates and terrain point that calculates out in the res parameter.\n     * @public\n     * @param {Vec3} xyz - Cartesian object position.\n     * @param {LonLat} insideSegmentPosition - Geodetic object position.\n     * @param {Vec3} [res] - Result cartesian coordinates on the terrain.\n     * @returns {number} -\n     */\n    public getTerrainPoint(xyz: Vec3, insideSegmentPosition: LonLat, res: Vec3): number {\n        let verts = this.tempVertices;\n\n        if (verts && verts.length) {\n            let norm = this.planet.ellipsoid.getSurfaceNormal3v(xyz);\n            _ray.set(xyz, norm.negateTo());\n\n            let ne = this._extent.northEast,\n                sw = this._extent.southWest,\n                size = Math.sqrt(verts.length / 3) - 1;\n\n            let xmax = ne.lon,\n                ymax = ne.lat,\n                xmin = sw.lon,\n                ymin = sw.lat,\n                x = insideSegmentPosition.lon,\n                y = insideSegmentPosition.lat;\n\n            let sxn = xmax - xmin,\n                syn = ymax - ymin;\n\n            let qx = sxn / size,\n                qy = syn / size;\n\n            let xn = x - xmin,\n                yn = y - ymin;\n\n            let indX = Math.floor(xn / qx),\n                indY = Math.floor(size - yn / qy);\n\n            let ind_v0 = ((size + 1) * indY + indX) * 3;\n            let ind_v2 = ((size + 1) * (indY + 1) + indX) * 3;\n\n            _v0.set(verts[ind_v0], verts[ind_v0 + 1], verts[ind_v0 + 2]);\n            _v1.set(verts[ind_v0 + 3], verts[ind_v0 + 4], verts[ind_v0 + 5]);\n            _v2.set(verts[ind_v2], verts[ind_v2 + 1], verts[ind_v2 + 2]);\n\n            let d = _ray.hitTriangle(_v0, _v1, _v2, res);\n\n            if (d === Ray.INSIDE) {\n                return xyz.distance(res);\n            } else if (d === Ray.AWAY) {\n                _rayEx.set(xyz, norm);\n                let d = _rayEx.hitTriangle(_v0, _v1, _v2, res);\n                if (d === Ray.INSIDE) {\n                    return -xyz.distance(res);\n                }\n            }\n\n            _v3.set(verts[ind_v2 + 3], verts[ind_v2 + 4], verts[ind_v2 + 5]);\n\n            d = _ray.hitTriangle(_v1, _v3, _v2, res);\n            if (d === Ray.INSIDE) {\n                return xyz.distance(res);\n            } else if (d === Ray.AWAY) {\n                _rayEx.set(xyz, norm);\n                let d = _rayEx.hitTriangle(_v1, _v3, _v2, res);\n                if (d === Ray.INSIDE) {\n                    return -xyz.distance(res);\n                }\n            }\n\n            if (d === Ray.AWAY) {\n                return -xyz.distance(res);\n            }\n\n            return xyz.distance(res);\n        } else {\n            return xyz.distance(this.planet.ellipsoid.hitRay(_ray.origin, _ray.direction)!);\n        }\n    }\n\n    /**\n     * Project wgs86 to segment native projection.\n     * @public\n     * @param {LonLat} lonlat - Coordinates to project.\n     * @returns {LonLat} -\n     */\n    public projectNative(lonlat: LonLat): LonLat {\n        return lonlat.forwardMercator();\n    }\n\n    public loadTerrain(forceLoading: boolean = false) {\n        if (this.tileZoom < this.planet.terrain!.minZoom || this.planet.terrain!.isEmpty) {\n            this.terrainIsLoading = true;\n\n            this.elevationsNotExists();\n\n            if (!this._inTheQueue) {\n                this.planet._normalMapCreator.queue(this);\n            }\n        } else {\n            if (this.tileZoom > this.planet.terrain!.maxZoom) {\n                this.elevationsNotExists();\n            } else if (!this.terrainIsLoading && !this.terrainReady) {\n                this.planet.terrain!.loadTerrain(this, forceLoading);\n            }\n            // if (!this.terrainIsLoading && !this.terrainReady) {\n            //     this.planet.terrain.loadTerrain(this, forceLoading);\n            // }\n        }\n    }\n\n    /**\n     * Terrain obtained from server.\n     * @param {Float32Array} elevations - Elevation data.\n     */\n    public elevationsExists(elevations: number[] | TypedArray) {\n        if (this.plainReady && this.terrainIsLoading) {\n\n            let _elevations = new Float32Array(elevations.length);\n            _elevations.set(elevations);\n\n            this.elevationData = new Float32Array(elevations.length);\n            this.elevationData.set(elevations);\n\n            this.planet._terrainWorker.make({segment: this, elevations: _elevations});\n\n            this.plainVerticesHigh = null;\n            this.plainVerticesLow = null;\n\n            this.normalMapVerticesHigh = null;\n            this.normalMapVerticesLow = null;\n\n            if (!this.planet.terrain!.equalizeVertices) {\n                this.tempVerticesHigh = null;\n                this.tempVerticesLow = null;\n            }\n        }\n    }\n\n    /**\n     * Keep plain elevation segment for rendering\n     *\n     * 'this.tileZoom <= this.planet.terrain.maxZoom' it means, that the segment is plain\n     *\n     */\n    public elevationsNotExists() {\n        if (this.planet && this.tileZoom <= this.planet.terrain!.maxNativeZoom) {\n\n            if (this.plainReady && this.terrainIsLoading) {\n                this.terrainIsLoading = false;\n\n                let n = this.node;\n                n.appliedTerrainNodeId = this.node.nodeId;\n                n.equalizedSideWithNodeId[N] = n.equalizedSideWithNodeId[E] = n.equalizedSideWithNodeId[S] =\n                    n.equalizedSideWithNodeId[W] = n.appliedTerrainNodeId;\n\n                if (this.planet.lightEnabled && !this._inTheQueue) {\n                    this.planet._normalMapCreator.queue(this);\n                }\n\n                this.readyToEngage = true;\n            }\n\n            // plain terrain only\n            this.terrainVertices = this.plainVertices;\n            this.terrainVerticesHigh = this.plainVerticesHigh;\n            this.terrainVerticesLow = this.plainVerticesLow;\n\n            this.tempVertices = this.terrainVertices;\n            this.tempVerticesHigh = this.terrainVerticesHigh;\n            this.tempVerticesLow = this.terrainVerticesLow;\n\n            this.noDataVertices = null;\n\n            this.fileGridSize = Math.sqrt(this.terrainVertices!.length / 3) - 1;\n            this.gridSize = this.fileGridSize;\n            this.terrainReady = true;\n            this.terrainExists = false;\n\n        } else {\n\n            if (this.plainReady && this.terrainIsLoading) {\n                this.terrainIsLoading = false;\n\n                let n = this.node;\n                n.appliedTerrainNodeId = this.node.nodeId;\n                n.equalizedSideWithNodeId[N] = n.equalizedSideWithNodeId[E] = n.equalizedSideWithNodeId[S] =\n                    n.equalizedSideWithNodeId[W] = n.appliedTerrainNodeId;\n\n                this.readyToEngage = true;\n                this.terrainReady = true;\n                this.passReady = true;\n\n                this.terrainExists = false;\n            }\n        }\n    }\n\n    protected _checkEqualization(neighborSide: number, neigborNode: Node): boolean {\n        return neigborNode && neigborNode.segment && this.tileZoom >= neigborNode.segment.tileZoom &&\n            this.node.equalizedSideWithNodeId[neighborSide] !== neigborNode.equalizedSideWithNodeId[OPSIDE[neighborSide]];\n    }\n\n    public equalize() {\n\n        // Equalization doesnt work correctly for gridSize equals 2\n        if (this.tileZoom < 2 || this.gridSize < 2) {\n            return;\n        }\n\n        this.readyToEngage = true;\n\n        let nn = this.node.neighbors;\n\n        let v = this.tempVertices!,\n            vHigh = this.tempVerticesHigh!,\n            vLow = this.tempVerticesLow!;\n\n        let gs = this.gridSize,\n            gsOne = gs + 1;\n\n        let n = nn[N][0];\n        if (this._checkEqualization(N, n)) {\n\n            this.node.equalizedSideWithNodeId[N] = n.equalizedSideWithNodeId[S];\n\n            this.readyToEngage = true;\n\n            let offset = this.node.getOffsetOppositeNeighbourSide(n, N);\n\n            let nv = n.segment.tempVertices!,\n                nvHigh = n.segment.tempVerticesHigh!,\n                nvLow = n.segment.tempVerticesLow!;\n\n            let n_gs = n.segment.gridSize,\n                n_gsOne = n_gs + 1;\n\n            let dz = 1 / (1 << (this.tileZoom - n.segment.tileZoom));\n\n            let inc = Math.max(gs / (n_gs * dz), 1),\n                n_inc = Math.max((n_gs * dz) / gs, 1),\n                n_offset = offset * n_gs;\n\n            for (let k = 0, nk = n_offset; k < gsOne; k += inc, nk += n_inc) {\n                const index = k * 3;\n                const n_index = (n_gsOne * n_gs + nk) * 3;\n\n                v[index] = nv[n_index];\n                v[index + 1] = nv[n_index + 1];\n                v[index + 2] = nv[n_index + 2];\n\n                vHigh[index] = nvHigh[n_index];\n                vHigh[index + 1] = nvHigh[n_index + 1];\n                vHigh[index + 2] = nvHigh[n_index + 2];\n\n                vLow[index] = nvLow[n_index];\n                vLow[index + 1] = nvLow[n_index + 1];\n                vLow[index + 2] = nvLow[n_index + 2];\n            }\n        }\n\n        n = nn[E][0];\n        if (this._checkEqualization(E, n)) {\n\n            this.node.equalizedSideWithNodeId[E] = n.equalizedSideWithNodeId[W];\n\n            this.readyToEngage = true;\n\n            let offset = this.node.getOffsetOppositeNeighbourSide(n, E);\n\n            let nv = n.segment.tempVertices!,\n                nvHigh = n.segment.tempVerticesHigh!,\n                nvLow = n.segment.tempVerticesLow!;\n\n            let n_gs = n.segment.gridSize,\n                n_gsOne = n_gs + 1;\n\n            let dz = 1 / (1 << (this.tileZoom - n.segment.tileZoom));\n\n            let inc = Math.max(gs / (n_gs * dz), 1),\n                n_inc = Math.max((n_gs * dz) / gs, 1),\n                n_offset = offset * n_gs;\n\n            for (let k = 0, nk = n_offset; k < gsOne; k += inc, nk += n_inc) {\n                const index = (gsOne * k + gs) * 3;\n                const n_index = n_gsOne * nk * 3;\n\n                v[index] = nv[n_index];\n                v[index + 1] = nv[n_index + 1];\n                v[index + 2] = nv[n_index + 2];\n\n                vHigh[index] = nvHigh[n_index];\n                vHigh[index + 1] = nvHigh[n_index + 1];\n                vHigh[index + 2] = nvHigh[n_index + 2];\n\n                vLow[index] = nvLow[n_index];\n                vLow[index + 1] = nvLow[n_index + 1];\n                vLow[index + 2] = nvLow[n_index + 2];\n            }\n        }\n\n        n = nn[S][0];\n        if (this._checkEqualization(S, n)) {\n\n            this.node.equalizedSideWithNodeId[S] = n.equalizedSideWithNodeId[N];\n\n            this.readyToEngage = true;\n\n            let offset = this.node.getOffsetOppositeNeighbourSide(n, S);\n\n            let nv = n.segment.tempVertices!,\n                nvHigh = n.segment.tempVerticesHigh!,\n                nvLow = n.segment.tempVerticesLow!;\n\n            let n_gs = n.segment.gridSize; // n_gsOne = n_gs + 1;\n\n            let dz = 1 / (1 << (this.tileZoom - n.segment.tileZoom));\n\n            let inc = Math.max(gs / (n_gs * dz), 1),\n                n_inc = Math.max((n_gs * dz) / gs, 1),\n                n_offset = offset * n_gs;\n\n            for (let k = 0, nk = n_offset; k < gsOne; k += inc, nk += n_inc) {\n                const index = (gsOne * gs + k) * 3;\n                const n_index = nk * 3;\n\n                v[index] = nv[n_index];\n                v[index + 1] = nv[n_index + 1];\n                v[index + 2] = nv[n_index + 2];\n\n                vHigh[index] = nvHigh[n_index];\n                vHigh[index + 1] = nvHigh[n_index + 1];\n                vHigh[index + 2] = nvHigh[n_index + 2];\n\n                vLow[index] = nvLow[n_index];\n                vLow[index + 1] = nvLow[n_index + 1];\n                vLow[index + 2] = nvLow[n_index + 2];\n            }\n        }\n\n        n = nn[W][0];\n        if (this._checkEqualization(W, n)) {\n\n            this.node.equalizedSideWithNodeId[W] = n.equalizedSideWithNodeId[E];\n\n            this.readyToEngage = true;\n\n            let offset = this.node.getOffsetOppositeNeighbourSide(n, W);\n\n            let nv = n.segment.tempVertices!,\n                nvHigh = n.segment.tempVerticesHigh!,\n                nvLow = n.segment.tempVerticesLow!;\n\n            let n_gs = n.segment.gridSize,\n                n_gsOne = n_gs + 1;\n\n            let dz = 1 / (1 << (this.tileZoom - n.segment.tileZoom));\n\n            let inc = Math.max(gs / (n_gs * dz), 1),\n                n_inc = Math.max((n_gs * dz) / gs, 1),\n                n_offset = offset * n_gs;\n\n            for (let k = 0, nk = n_offset; k < gsOne; k += inc, nk += n_inc) {\n                const index = gsOne * k * 3;\n                const n_index = (n_gsOne * nk + n_gs) * 3;\n\n                v[index] = nv[n_index];\n                v[index + 1] = nv[n_index + 1];\n                v[index + 2] = nv[n_index + 2];\n\n                vHigh[index] = nvHigh[n_index];\n                vHigh[index + 1] = nvHigh[n_index + 1];\n                vHigh[index + 2] = nvHigh[n_index + 2];\n\n                vLow[index] = nvLow[n_index];\n                vLow[index + 1] = nvLow[n_index + 1];\n                vLow[index + 2] = nvLow[n_index + 2];\n            }\n        }\n    }\n\n    public engage() {\n        this.readyToEngage = false;\n        this.createCoordsBuffers(this.tempVerticesHigh!, this.tempVerticesLow!, this.gridSize);\n    }\n\n    public _terrainWorkerCallback(data: ITerrainWorkerData) {\n        if (this.plainReady) {\n            this.readyToEngage = true;\n\n            this.normalMapNormals = null;\n\n            this.normalMapVertices = null;\n            this.normalMapVerticesHigh = null;\n            this.normalMapVerticesLow = null;\n\n            this.terrainVertices = null;\n            this.terrainVerticesHigh = null;\n            this.terrainVerticesLow = null;\n            this.noDataVertices = null;\n\n            this.tempVertices = null;\n            this.tempVerticesHigh = null;\n            this.tempVerticesLow = null;\n\n            this.normalMapNormals = data.normalMapNormals;\n            this.normalMapVertices = data.normalMapVertices;\n            this.normalMapVerticesHigh = data.normalMapVerticesHigh;\n            this.normalMapVerticesLow = data.normalMapVerticesLow;\n\n            this.terrainVertices = data.terrainVertices;\n            this.terrainVerticesHigh = data.terrainVerticesHigh;\n            this.terrainVerticesLow = data.terrainVerticesLow;\n\n            this.noDataVertices = data.noDataVertices;\n\n            this.tempVertices = this.terrainVertices;\n            this.tempVerticesHigh = this.terrainVerticesHigh;\n            this.tempVerticesLow = this.terrainVerticesLow;\n\n            this.setBoundingVolumeArr(data.bounds);\n\n            this.gridSize = Math.sqrt(this.terrainVertices!.length / 3) - 1;\n\n            let n = this.node;\n            n.appliedTerrainNodeId = n.nodeId;\n            n.equalizedSideWithNodeId[N] = n.equalizedSideWithNodeId[E] = n.equalizedSideWithNodeId[S] =\n                n.equalizedSideWithNodeId[W] = n.appliedTerrainNodeId;\n\n            this.terrainReady = true;\n            this.terrainIsLoading = false;\n            this.terrainExists = true;\n\n            if (!this.normalMapTexturePtr) {\n                const nmc = this.planet._normalMapCreator;\n                this.normalMapTexturePtr = this.planet.renderer!.handler.createEmptyTexture_l(nmc.width, nmc.height);\n            }\n\n            if (this.planet.lightEnabled) {\n                this.planet._normalMapCreator.queue(this);\n            }\n        }\n    }\n\n    public _normalMapEdgeEqualize(side: number) {\n        let nn = this.node.neighbors;\n        let nns = nn[side];\n        let n: Node | undefined = nns && nns[0];\n        let maxZ = this.planet.terrain!.maxZoom;\n\n        if (this.tileZoom === maxZ) {\n            if (nns && !(nn[0].length || nn[1].length || nn[2].length || nn[3].length)) {\n                n = this.node.getEqualNeighbor(side);\n            }\n        }\n\n        let b = n && n.segment,\n            s = this;\n\n        if (\n            n &&\n            b &&\n            b.terrainReady &&\n            b.terrainExists &&\n            b.tileZoom <= maxZ &&\n            s._appliedNeighborsZoom[side] !== b.tileZoom\n        ) {\n            s._appliedNeighborsZoom[side] = b.tileZoom;\n\n            let seg_a = s.normalMapNormals,\n                seg_b = b.normalMapNormals;\n\n            if (!(seg_a && seg_b)) return;\n\n            let seg_a_raw = s.normalMapNormals!,\n                seg_b_raw = b.normalMapNormals!;\n\n            // let seg_a_verts = s.terrainVertices,\n            //     seg_b_verts = s.terrainVertices;\n\n            let s_gs = Math.sqrt(seg_a.length / 3),\n                // b_gs = Math.sqrt(seg_b.length / 3),\n                s_gs1 = s_gs - 1;\n            // b_gs1 = b_gs - 1;\n\n            const i_a = s_gs1 * _S[side];\n\n            let nx, ny, nz, q;\n\n            if (s.tileZoom === b.tileZoom) {\n                const i_b = s_gs1 - i_a;\n\n                if (_V[side]) {\n                    for (let k = 0; k < s_gs; k++) {\n                        let vInd_a = (k * s_gs + i_a) * 3,\n                            vInd_b = (k * s_gs + i_b) * 3;\n\n                        nx = seg_a_raw[vInd_a] + seg_b_raw[vInd_b];\n                        ny = seg_a_raw[vInd_a + 1] + seg_b_raw[vInd_b + 1];\n                        nz = seg_a_raw[vInd_a + 2] + seg_b_raw[vInd_b + 2];\n\n                        q = 1.0 / Math.sqrt(nx * nx + ny * ny + nz * nz);\n\n                        seg_b[vInd_b] = seg_a[vInd_a] = nx * q;\n                        seg_b[vInd_b + 1] = seg_a[vInd_a + 1] = ny * q;\n                        seg_b[vInd_b + 2] = seg_a[vInd_a + 2] = nz * q;\n                    }\n                } else {\n                    for (let k = 0; k < s_gs; k++) {\n                        let vInd_a = (i_a * s_gs + k) * 3,\n                            vInd_b = (i_b * s_gs + k) * 3;\n\n                        nx = seg_a_raw[vInd_a] + seg_b_raw[vInd_b];\n                        ny = seg_a_raw[vInd_a + 1] + seg_b_raw[vInd_b + 1];\n                        nz = seg_a_raw[vInd_a + 2] + seg_b_raw[vInd_b + 2];\n\n                        q = 1.0 / Math.sqrt(nx * nx + ny * ny + nz * nz);\n\n                        seg_b[vInd_b] = seg_a[vInd_a] = nx * q;\n                        seg_b[vInd_b + 1] = seg_a[vInd_a + 1] = ny * q;\n                        seg_b[vInd_b + 2] = seg_a[vInd_a + 2] = nz * q;\n                    }\n                }\n\n                if (!b._inTheQueue && b._appliedNeighborsZoom[OPSIDE[side]] !== s.tileZoom) {\n                    b._appliedNeighborsZoom[OPSIDE[side]] = s.tileZoom;\n                    s.planet._normalMapCreator.queue(b);\n                }\n            }\n        }\n    }\n\n    public applyTerrain(elevations?: number[] | TypedArray | null) {\n        if (elevations) {\n            this.elevationsExists(elevations);\n        } else {\n            this.elevationsNotExists();\n        }\n    }\n\n    public deleteBuffers() {\n\n        const gl = this.handler.gl!;\n\n        gl.deleteBuffer(this.vertexNormalBuffer!);\n        gl.deleteBuffer(this.vertexPositionBuffer!);\n        gl.deleteBuffer(this.vertexPositionBufferHigh!);\n        gl.deleteBuffer(this.vertexPositionBufferLow!);\n\n        this.vertexNormalBuffer = null;\n        this.vertexPositionBuffer = null;\n        this.vertexPositionBufferHigh = null;\n        this.vertexPositionBufferLow = null;\n        this.vertexTextureCoordBuffer = null;\n    }\n\n    public deleteMaterials() {\n        let m = this.materials;\n        for (let i = 0; i < m.length; i++) {\n            let mi = m[i];\n            if (mi) {\n                mi.clear();\n            }\n        }\n        this.materials.length = 0;\n    }\n\n    public deleteElevations() {\n        this.terrainExists = false;\n        this.terrainReady = false;\n        this.terrainIsLoading = false;\n\n        this.normalMapVertices = null;\n        this.normalMapVerticesHigh = null;\n        this.normalMapVerticesLow = null;\n        this.normalMapNormals = null;\n\n        this.tempVertices = null;\n        this.tempVerticesHigh = null;\n        this.tempVerticesLow = null;\n\n        this.terrainVertices = null;\n        this.terrainVerticesHigh = null;\n        this.terrainVerticesLow = null;\n        this.noDataVertices = null;\n\n        this.plainVertices = null;\n        this.plainVerticesHigh = null;\n        this.plainVerticesLow = null;\n        this.plainNormals = null;\n\n        if (this.normalMapReady) {\n            this.handler.gl!.deleteTexture(this.normalMapTexture!);\n            this.normalMapReady = false;\n        }\n\n        this._appliedNeighborsZoom = [0, 0, 0, 0];\n\n        this.normalMapTextureBias[0] = 0;\n        this.normalMapTextureBias[1] = 0;\n        this.normalMapTextureBias[2] = 1;\n\n        this._inTheQueue = false;\n    }\n\n    public clearSegment() {\n        this.plainReady = false;\n        this.initialized = false;\n        this.deleteBuffers();\n        this.deleteMaterials();\n        this.deleteElevations();\n    }\n\n    public childrenInitialized(): boolean {\n        let n = this.node.nodes;\n        return n.length === 4 && n[0].segment.initialized && n[1].segment.initialized && n[2].segment.initialized && n[3].segment.initialized;\n    }\n\n    public destroySegment() {\n\n        this.clearSegment();\n\n        let i = this._slices.length;\n        while (i--) {\n            this._slices[i].clear();\n        }\n\n        //@ts-ignore\n        this._slices = null;\n        //@ts-ignore\n        this.node = null;\n        //@ts-ignore\n        this.planet = null;\n        //@ts-ignore\n        this.handler = null;\n        //@ts-ignore\n        this.bbox = null;\n        //@ts-ignore\n        this.bsphere = null;\n        //@ts-ignore\n        this._extent = null;\n        //@ts-ignore\n        this.materials = null;\n\n        this.plainVertices = null;\n        this.plainVerticesHigh = null;\n        this.plainVerticesLow = null;\n        this.plainNormals = null;\n\n        this.terrainVertices = null;\n        this.terrainVerticesHigh = null;\n        this.terrainVerticesLow = null;\n        this.noDataVertices = null;\n\n        this.tempVertices = null;\n        this.tempVerticesHigh = null;\n        this.tempVerticesLow = null;\n\n        //@ts-ignore\n        this.normalMapTextureBias = null;\n        this.normalMapTexture = null;\n        this.normalMapVertices = null;\n        this.normalMapVerticesHigh = null;\n        this.normalMapVerticesLow = null;\n        this.normalMapNormals = null;\n\n        this.vertexNormalBuffer = null;\n        this.vertexPositionBuffer = null;\n        this.vertexPositionBufferHigh = null;\n        this.vertexPositionBufferLow = null;\n        this.vertexTextureCoordBuffer = null;\n\n        // @ts-ignore\n        this._projection = null;\n        // @ts-ignore\n        this._appliedNeighborsZoom = null;\n        // @ts-ignore\n        this._globalTextureCoordinates = null;\n    }\n\n    /**\n     * @todo: looks like it could be simplified in Segment contructor\n     */\n    public _setExtentLonLat() {\n        this._extentLonLat = this._extent.inverseMercator();\n    }\n\n    protected _createExtentNormals() {\n        const ellipsoid = this.planet.ellipsoid;\n        const extent = this._extentLonLat;\n\n        const coord_sw = ellipsoid.geodeticToCartesian(extent.southWest.lon, extent.southWest.lat);\n        const coord_ne = ellipsoid.geodeticToCartesian(extent.northEast.lon, extent.northEast.lat);\n\n        const coord_nw = ellipsoid.geodeticToCartesian(\n            extent.southWest.lon,\n            extent.northEast.lat\n        );\n\n        const coord_se = ellipsoid.geodeticToCartesian(\n            extent.northEast.lon,\n            extent.southWest.lat\n        );\n\n        this._sw.copy(coord_sw);\n        this._nw.copy(coord_nw);\n        this._ne.copy(coord_ne);\n        this._se.copy(coord_se);\n    }\n\n    public createBoundsByExtent() {\n        this._createExtentNormals();\n        this.setBoundingVolume3v(this._sw, this._ne);\n    }\n\n    public createBoundsByParent() {\n        let pn = this.node;\n\n        while (pn.parentNode && !pn.segment.terrainReady) {\n            pn = pn.parentNode;\n        }\n\n        let dZ2 = 1 << (this.tileZoom - pn.segment.tileZoom);\n\n        let offsetX = this.tileX - pn.segment.tileX * dZ2,\n            offsetY = this.tileY - pn.segment.tileY * dZ2;\n\n        if (pn.segment.terrainReady && pn.segment.tileZoom >= this.planet.terrain!.minZoom) {\n            let gridSize = pn.segment.gridSize / dZ2;\n\n            if (gridSize >= 1.0) {\n                //\n                // (*) Actually, we get parent whole bounding volume\n                //\n                this.bsphere.center.x = pn.segment.bsphere.center.x;\n                this.bsphere.center.y = pn.segment.bsphere.center.y;\n                this.bsphere.center.z = pn.segment.bsphere.center.z;\n                this.bsphere.radius = pn.segment.bsphere.radius;\n\n                let i0 = gridSize * offsetY;\n                let j0 = gridSize * offsetX;\n\n                let pnGsOne = pn.segment.gridSize + 1;\n\n                let ind_sw = 3 * ((i0 + gridSize) * pnGsOne + j0),\n                    ind_nw = 3 * (i0 * pnGsOne + j0),\n                    ind_ne = 3 * (i0 * pnGsOne + j0 + gridSize),\n                    ind_se = 3 * ((i0 + gridSize) * pnGsOne + j0 + gridSize);\n\n                let pVerts = pn.segment.tempVertices!;\n\n                let v_sw = new Vec3(pVerts[ind_sw], pVerts[ind_sw + 1], pVerts[ind_sw + 2]),\n                    v_ne = new Vec3(pVerts[ind_ne], pVerts[ind_ne + 1], pVerts[ind_ne + 2]);\n\n                // check for segment zoom\n                let v_nw = new Vec3(pVerts[ind_nw], pVerts[ind_nw + 1], pVerts[ind_nw + 2]),\n                    v_se = new Vec3(pVerts[ind_se], pVerts[ind_se + 1], pVerts[ind_se + 2]);\n\n                this._sw.copy(v_sw);\n                this._nw.copy(v_nw);\n                this._ne.copy(v_ne);\n                this._se.copy(v_se);\n\n            } else {\n                let pseg = pn.segment;\n\n                let i0 = Math.floor(gridSize * offsetY),\n                    j0 = Math.floor(gridSize * offsetX);\n\n                let insideSize = 1.0 / gridSize;\n\n                let t_i0 = offsetY - insideSize * i0,\n                    t_j0 = offsetX - insideSize * j0;\n\n                let bigOne;\n                if (pseg.gridSize === 1) {\n                    bigOne = pseg.tempVertices!;\n                } else {\n                    bigOne = getMatrixSubArray64(pseg.tempVertices!, pseg.gridSize, i0, j0, 1);\n                }\n\n                let v_lt = new Vec3(bigOne[0], bigOne[1], bigOne[2]),\n                    v_rb = new Vec3(bigOne[9], bigOne[10], bigOne[11]);\n\n                let vn = new Vec3(\n                        bigOne[3] - bigOne[0],\n                        bigOne[4] - bigOne[1],\n                        bigOne[5] - bigOne[2]\n                    ),\n                    vw = new Vec3(\n                        bigOne[6] - bigOne[0],\n                        bigOne[7] - bigOne[1],\n                        bigOne[8] - bigOne[2]\n                    ),\n                    ve = new Vec3(\n                        bigOne[3] - bigOne[9],\n                        bigOne[4] - bigOne[10],\n                        bigOne[5] - bigOne[11]\n                    ),\n                    vs = new Vec3(\n                        bigOne[6] - bigOne[9],\n                        bigOne[7] - bigOne[10],\n                        bigOne[8] - bigOne[11]\n                    );\n\n                let vi_y = t_i0,\n                    vi_x = t_j0;\n\n                let coords_lt, coords_rb;\n\n                if (vi_y + vi_x < insideSize) {\n                    coords_lt = Vec3.add(\n                        vn.scaleTo(vi_x / insideSize),\n                        vw.scaleTo(vi_y / insideSize)\n                    ).addA(v_lt);\n                } else {\n                    coords_lt = Vec3.add(\n                        vs.scaleTo(1 - vi_x / insideSize),\n                        ve.scaleTo(1 - vi_y / insideSize)\n                    ).addA(v_rb);\n                }\n\n                vi_y = t_i0 + 1;\n                vi_x = t_j0 + 1;\n\n                if (vi_y + vi_x < insideSize) {\n                    coords_rb = Vec3.add(\n                        vn.scaleTo(vi_x / insideSize),\n                        vw.scaleTo(vi_y / insideSize)\n                    ).addA(v_lt);\n                } else {\n                    coords_rb = Vec3.add(\n                        vs.scaleTo(1 - vi_x / insideSize),\n                        ve.scaleTo(1 - vi_y / insideSize)\n                    ).addA(v_rb);\n                }\n\n                this._createExtentNormals();\n                this.setBoundingVolume3v(coords_lt, coords_rb);\n            }\n        } else {\n            this.createBoundsByExtent();\n        }\n    }\n\n    public setBoundingSphere(x: number, y: number, z: number, v: Vec3) {\n        this.bsphere.center.x = x;\n        this.bsphere.center.y = y;\n        this.bsphere.center.z = z;\n        this.bsphere.radius = this.bsphere.center.distance(v);\n    }\n\n    public setBoundingVolume(xmin: number, ymin: number, zmin: number, xmax: number, ymax: number, zmax: number) {\n        this.bbox.setFromBoundsArr([xmin, ymin, zmin, xmax, ymax, zmax]);\n\n        let x = xmin + (xmax - xmin) * 0.5,\n            y = ymin + (ymax - ymin) * 0.5,\n            z = zmin + (zmax - zmin) * 0.5;\n\n        this.bsphere.center.set(x, y, z);\n        this.bsphere.radius = this.bsphere.center.distance(new Vec3(xmin, ymin, zmin));\n    }\n\n    public setBoundingVolume3v(vmin: Vec3, vmax: Vec3) {\n        this.bbox.setFromBoundsArr([vmin.x, vmin.y, vmin.z, vmax.x, vmax.y, vmax.z]);\n\n        let x = vmin.x + (vmax.x - vmin.x) * 0.5,\n            y = vmin.y + (vmax.y - vmin.y) * 0.5,\n            z = vmin.z + (vmax.z - vmin.z) * 0.5;\n\n        this.bsphere.center.set(x, y, z);\n        this.bsphere.radius = this.bsphere.center.distance(new Vec3(vmin.x, vmin.y, vmin.z));\n    }\n\n    public setBoundingVolumeArr(bounds: NumberArray6) {\n        this.bbox.setFromBoundsArr(bounds);\n\n        let x = bounds[0] + (bounds[3] - bounds[0]) * 0.5,\n            y = bounds[1] + (bounds[4] - bounds[1]) * 0.5,\n            z = bounds[2] + (bounds[5] - bounds[2]) * 0.5;\n\n        this.bsphere.center.set(x, y, z);\n        this.bsphere.radius = this.bsphere.center.distance(\n            new Vec3(bounds[0], bounds[1], bounds[2])\n        );\n    }\n\n    public createCoordsBuffers(verticesHigh: Float32Array, verticesLow: Float32Array, gridSize: number) {\n        const gsgs = (gridSize + 1) * (gridSize + 1);\n        const h = this.handler;\n\n        if (this.vertexPositionBufferHigh && this.vertexPositionBufferHigh.numItems === gsgs) {\n            h.setStreamArrayBuffer(this.vertexPositionBufferHigh!, verticesHigh);\n            h.setStreamArrayBuffer(this.vertexPositionBufferLow!, verticesLow);\n        } else {\n            h.gl!.deleteBuffer(this.vertexPositionBufferHigh!);\n            h.gl!.deleteBuffer(this.vertexPositionBufferLow!);\n\n            this.vertexTextureCoordBuffer = this.planet._textureCoordsBufferCache[Math.log2(gridSize)];\n\n            // @todo use it!\n            //this.vertexPositionBufferHigh = h.createStreamArrayBuffer(3, gsgs);\n            //h.setStreamArrayBuffer(this.vertexPositionBufferHigh, verticesHigh);\n            //this.vertexPositionBufferLow = h.createStreamArrayBuffer(3, gsgs);\n            //h.setStreamArrayBuffer(this.vertexPositionBufferLow, verticesLow);\n\n            // It works, but I'm not sure that it is correct and better use the comment above\n            this.vertexPositionBufferHigh = h.createArrayBuffer(verticesHigh, 3, gsgs);\n            this.vertexPositionBufferLow = h.createArrayBuffer(verticesLow, 3, gsgs);\n        }\n    }\n\n    public _addViewExtent() {\n        const ext = this._extentLonLat;\n\n        let viewExt = this.planet._viewExtent;\n\n        if (ext.southWest.lon < viewExt.southWest.lon) {\n            viewExt.southWest.lon = ext.southWest.lon;\n        }\n\n        if (ext.northEast.lon > viewExt.northEast.lon) {\n            viewExt.northEast.lon = ext.northEast.lon;\n        }\n\n        if (ext.southWest.lat < viewExt.southWest.lat) {\n            viewExt.southWest.lat = ext.southWest.lat;\n        }\n\n        if (ext.northEast.lat > viewExt.northEast.lat) {\n            viewExt.northEast.lat = ext.northEast.lat;\n        }\n    }\n\n    protected _assignTileIndexes() {\n\n        this._tileGroup = TILEGROUP_COMMON;\n\n        const tileZoom = this.tileZoom;\n        const extent = this._extent;\n        const pole = mercator.POLE;\n\n        // this.tileX = Math.round(Math.abs(-pole - extent.southWest.lon) / (extent.northEast.lon - extent.southWest.lon));\n        // this.tileY = Math.round(Math.abs(pole - extent.northEast.lat) / (extent.northEast.lat - extent.southWest.lat));\n        this.tileX = getTileCellIndex(extent.getCenter().lon, extent.getWidth(), -pole);\n        this.tileY = getTileCellIndex(extent.getCenter().lat, extent.getHeight(), pole);\n\n        const p2 = this.powTileZoom;//Math.pow(2, tileZoom);\n\n        this.tileXE = (this.tileX + 1) % p2;\n        this.tileXW = (p2 + this.tileX - 1) % p2;\n\n        this.tileYN = this.tileY - 1;\n        this.tileYS = this.tileY + 1;\n\n        this.tileIndex = Layer.getTileIndex(this.tileX, this.tileY, tileZoom, this._tileGroup);\n    }\n\n    public initialize() {\n        const p = this.planet;\n        const n = this.node;\n\n        this.gridSize = p.terrain!.gridSizeByZoom[this.tileZoom] || p.terrain!.plainGridSize;\n\n        n.sideSizeLog2[0] = n.sideSizeLog2[1] = n.sideSizeLog2[2] = n.sideSizeLog2[3] = Math.log2(this.gridSize);\n\n        if (this.tileZoom <= p.terrain!.maxZoom) {\n            const nmc = this.planet._normalMapCreator;\n            this.normalMapTexturePtr = p.renderer!.handler.createEmptyTexture_l(nmc.width, nmc.height);\n        }\n\n        this.normalMapTexture = this.planet.transparentTexture;\n\n        this._assignGlobalTextureCoordinates();\n\n        this.initialized = true;\n    }\n\n    protected _assignGlobalTextureCoordinates() {\n        const e = this._extent;\n        this._globalTextureCoordinates[0] =\n            (e.southWest.lon + mercator.POLE) * mercator.ONE_BY_POLE_DOUBLE;\n        this._globalTextureCoordinates[1] =\n            (mercator.POLE - e.northEast.lat) * mercator.ONE_BY_POLE_DOUBLE;\n        this._globalTextureCoordinates[2] =\n            (e.northEast.lon + mercator.POLE) * mercator.ONE_BY_POLE_DOUBLE;\n        this._globalTextureCoordinates[3] =\n            (mercator.POLE - e.southWest.lat) * mercator.ONE_BY_POLE_DOUBLE;\n    }\n\n    public createPlainSegmentAsync() {\n        let p = this.planet,\n            t = p.terrain!;\n\n        if (t.isReady() && !this.plainReady && this.tileZoom <= t.maxZoom) {\n            this.plainProcessing = true;\n            p._plainSegmentWorker.make(this);\n        }\n    }\n\n    public _plainSegmentWorkerCallback(data: IPlainSegmentWorkerData) {\n        this.plainProcessing = false;\n\n        if (this.initialized && !this.terrainReady) {\n            this.plainReady = true;\n\n            this.plainVertices = data.plainVertices;\n            this.plainVerticesHigh = data.plainVerticesHigh;\n            this.plainVerticesLow = data.plainVerticesLow;\n            this.plainNormals = data.plainNormals;\n            this._plainRadius = data.plainRadius;\n\n            this.normalMapNormals = data.normalMapNormals;\n            this.normalMapVertices = data.normalMapVertices;\n            this.normalMapVerticesHigh = data.normalMapVerticesHigh;\n            this.normalMapVerticesLow = data.normalMapVerticesLow;\n\n            //this.terrainVertices = this.plainVertices;\n            //this.terrainVerticesHigh = this.plainVerticesHigh;\n            //this.terrainVerticesLow = this.plainVerticesLow;\n\n            this.fileGridSize = Math.sqrt(data.normalMapVertices!.length / 3) - 1;\n        }\n    }\n\n    public createPlainSegment() {\n        this.initialize();\n        this._createPlainVertices();\n        this.readyToEngage = true;\n    }\n\n    protected _projToDeg(lon: number, lat: number): LonLat {\n        return LonLat.inverseMercator(lon, lat);\n    }\n\n    protected _createPlainVertices() {\n        const gridSize = this.planet.terrain!.gridSizeByZoom[this.tileZoom];\n        const fgs = this.planet.terrain!.plainGridSize;\n        const currGridSize = Math.max(fgs, gridSize);\n        const e = this._extent;\n        const lonSize = e.getWidth();\n        const latSize = e.getHeight();\n        const llStep = lonSize / currGridSize;\n        const ltStep = latSize / currGridSize;\n        const esw_lon = e.southWest.lon;\n        const ene_lat = e.northEast.lat;\n        const dg = Math.max(fgs / gridSize, 1);\n        const gs = currGridSize + 1;\n        const r2 = this.planet.ellipsoid._invRadii2;\n        const gsgs = gs * gs;\n        const gridSize3 = (gridSize + 1) * (gridSize + 1) * 3;\n\n        let ind = 0,\n            nmInd = 0;\n\n        this.plainNormals = new Float32Array(gridSize3);\n        this.plainVertices = new Float64Array(gridSize3);\n        this.plainVerticesHigh = new Float32Array(gridSize3);\n        this.plainVerticesLow = new Float32Array(gridSize3);\n\n        this.normalMapNormals = new Float32Array(gsgs * 3);\n        this.normalMapVertices = new Float64Array(gsgs * 3);\n        this.normalMapVerticesHigh = new Float32Array(gsgs * 3);\n        this.normalMapVerticesLow = new Float32Array(gsgs * 3);\n\n        let verts = this.plainVertices,\n            vertsHigh = this.plainVerticesHigh,\n            vertsLow = this.plainVerticesLow,\n            norms = this.plainNormals,\n            nmVerts = this.normalMapVertices,\n            nmVertsHigh = this.normalMapVerticesHigh,\n            nmVertsLow = this.normalMapVerticesLow,\n            nmNorms = this.normalMapNormals;\n\n        for (let k = 0; k < gsgs; k++) {\n            let j = k % gs,\n                i = ~~(k / gs);\n\n            let v = this.planet.ellipsoid.lonLatToCartesian(\n                this._projToDeg(esw_lon + j * llStep, ene_lat - i * ltStep)\n            );\n\n            let nx = v.x * r2.x,\n                ny = v.y * r2.y,\n                nz = v.z * r2.z;\n\n            let l = 1.0 / Math.sqrt(nx * nx + ny * ny + nz * nz);\n\n            let nxl = nx * l,\n                nyl = ny * l,\n                nzl = nz * l;\n\n            Vec3.doubleToTwoFloats(v, _tempHigh, _tempLow);\n\n            nmVerts[nmInd] = v.x;\n            nmVertsHigh[nmInd] = _tempHigh.x;\n            nmVertsLow[nmInd] = _tempLow.x;\n            nmNorms[nmInd++] = nxl;\n\n            nmVerts[nmInd] = v.y;\n            nmVertsHigh[nmInd] = _tempHigh.y;\n            nmVertsLow[nmInd] = _tempLow.y;\n            nmNorms[nmInd++] = nyl;\n\n            nmVerts[nmInd] = v.z;\n            nmVertsHigh[nmInd] = _tempHigh.z;\n            nmVertsLow[nmInd] = _tempLow.z;\n            nmNorms[nmInd++] = nzl;\n\n            if (i % dg === 0 && j % dg === 0) {\n                verts[ind] = v.x;\n                vertsHigh[ind] = _tempHigh.x;\n                vertsLow[ind] = _tempLow.x;\n                norms[ind++] = nxl;\n\n                verts[ind] = v.y;\n                vertsHigh[ind] = _tempHigh.y;\n                vertsLow[ind] = _tempLow.y;\n                norms[ind++] = nyl;\n\n                verts[ind] = v.z;\n                vertsHigh[ind] = _tempHigh.z;\n                vertsLow[ind] = _tempLow.z;\n                norms[ind++] = nzl;\n            }\n        }\n\n        this.terrainVertices = verts;\n        this.terrainVerticesHigh = vertsHigh;\n        this.terrainVerticesLow = vertsLow;\n\n        this.plainReady = true;\n    }\n\n    /**\n     * Gets specific layer material.\n     * @public\n     * @param {Layer} layer - Layer object.\n     * @returns {Material | undefined} - Segment material.\n     */\n    public getMaterialByLayer(layer: Layer): Material | undefined {\n        return this.materials[layer.__id];\n    }\n\n    /**\n     * @param layer\n     * @protected\n     *\n     * @todo siplify layer._extentMerc in this.getLayerExtent(layer)\n     *\n     */\n\n    protected _getLayerExtentOffset(layer: Layer): [number, number, number, number] {\n        const v0s = layer._extentMerc;\n        const v0t = this._extent;\n        const sSize_x = v0s.northEast.lon - v0s.southWest.lon;\n        const sSize_y = v0s.northEast.lat - v0s.southWest.lat;\n        const dV0s_x = (v0t.southWest.lon - v0s.southWest.lon) / sSize_x;\n        const dV0s_y = (v0s.northEast.lat - v0t.northEast.lat) / sSize_y;\n        const dSize_x = (v0t.northEast.lon - v0t.southWest.lon) / sSize_x;\n        const dSize_y = (v0t.northEast.lat - v0t.southWest.lat) / sSize_y;\n        return [dV0s_x, dV0s_y, dSize_x, dSize_y];\n    }\n\n    public initSlice(sliceIndex: number): Slice {\n        let slice = this._slices[sliceIndex];\n\n        if (!slice) {\n            slice = this._slices[sliceIndex] = new Slice(this);\n        } else {\n            //TODO: optimization!!!\n            slice.layers = [];\n        }\n\n        return slice;\n    }\n\n    public screenRendering(sh: Program, layerSlice: Layer[], sliceIndex: number, defaultTexture?: WebGLTextureExt | null, isOverlay: boolean = false, forcedOpacity?: number) {\n        const gl = this.handler.gl!;\n        const sha = sh.attributes;\n        const shu = sh.uniforms;\n\n        const pm = this.materials;\n        const p = this.planet;\n\n        let currHeight, li;\n        if (layerSlice && layerSlice.length) {\n            li = layerSlice[0];\n            currHeight = li._height;\n        } else {\n            currHeight = 0;\n        }\n\n        // First always draw whole planet base layer segment with solid texture.\n        gl.activeTexture(gl.TEXTURE0 + p.SLICE_SIZE + 2);\n        gl.bindTexture(gl.TEXTURE_2D, (defaultTexture || this.getDefaultTexture())!);\n        gl.uniform1i(shu.defaultTexture, p.SLICE_SIZE + 2);\n\n        let n = 0,\n            i = 0;\n\n        let notEmpty = false;\n\n        let slice = this.initSlice(sliceIndex);\n\n        this._indexBuffer = this._getIndexBuffer();\n\n        while (li) {\n            if (\n                this.layerOverlap(li) &&\n                ((li._fading && li._fadingOpacity > 0.0) ||\n                    ((li.minZoom >= p.minCurrZoom || li.maxZoom >= p.minCurrZoom) &&\n                        (li.minZoom <= p.maxCurrZoom || li.maxZoom <= p.maxCurrZoom)))\n            ) {\n                notEmpty = true;\n\n                let m = pm[li.__id];\n\n                if (!m) {\n                    m = pm[li.__id] = li.createMaterial(this);\n                }\n\n                if (!m.isReady) {\n                    this.planet._renderCompleted = false;\n                }\n\n                slice.append(li, m);\n\n                p._samplerArr[n] = n;\n\n                gl.activeTexture(gl.TEXTURE0 + n);\n                gl.bindTexture(gl.TEXTURE_2D, (m.texture || p.transparentTexture)!);\n\n                n++;\n            }\n            i++;\n            li = layerSlice[i];\n        }\n\n        if (notEmpty || !isOverlay) {\n\n            gl.uniform1f(shu.transitionOpacity, forcedOpacity || this._transitionOpacity > 1.0 ? 1.0 : this._transitionOpacity);\n\n            gl.uniform1i(shu.samplerCount, n);\n            gl.uniform1f(shu.height, currHeight);\n            gl.uniform1iv(shu.samplerArr, p._samplerArr);\n\n            //slice.uniform(gl, shu);\n\n            gl.uniform4fv(shu.tileOffsetArr, slice.tileOffsetArr);\n            gl.uniform1fv(shu.layerOpacityArr, slice.layerOpacityArr);\n            //gl.uniform4fv(shu.visibleExtentOffsetArr, slice.visibleExtentOffsetArr);\n\n            // bind normalmap texture\n            if (p.lightEnabled) {\n                gl.activeTexture(gl.TEXTURE0 + p.SLICE_SIZE + 3);\n                gl.bindTexture(gl.TEXTURE_2D, (this.normalMapTexture || p.transparentTexture)!);\n                gl.uniform1i(shu.uNormalMap, p.SLICE_SIZE + 3);\n\n                gl.uniform3fv(shu.uNormalMapBias, this.normalMapTextureBias);\n\n                // bind segment specular and night material texture coordinates\n                gl.uniform4fv(shu.uGlobalTextureCoord, this._globalTextureCoordinates);\n            }\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferHigh!);\n            gl.vertexAttribPointer(sha.aVertexPositionHigh, this.vertexPositionBufferHigh!.itemSize, gl.FLOAT, false, 0, 0);\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferLow!);\n            gl.vertexAttribPointer(sha.aVertexPositionLow, this.vertexPositionBufferLow!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexTextureCoordBuffer!);\n            gl.vertexAttribPointer(sha.aTextureCoord, 2, gl.UNSIGNED_SHORT, true, 0, 0);\n\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n            gl.drawElements(p.drawMode, this._indexBuffer.numItems, gl.UNSIGNED_INT, 0);\n        }\n    }\n\n    public heightPickingRendering(sh: Program, layerSlice: Layer[]) {\n        const gl = this.handler.gl!;\n        const sha = sh.attributes;\n        const shu = sh.uniforms;\n\n        // var pm = this.materials,\n        //     p = this.planet;\n\n        let currHeight;\n        if (layerSlice && layerSlice.length) {\n            currHeight = layerSlice[0]._height;\n        } else {\n            currHeight = 0;\n        }\n\n        gl.uniform1f(shu.height, currHeight);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferHigh!);\n        gl.vertexAttribPointer(sha.aVertexPositionHigh, this.vertexPositionBufferHigh!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferLow!);\n        gl.vertexAttribPointer(sha.aVertexPositionLow, this.vertexPositionBufferLow!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer!);\n        gl.drawElements(gl.TRIANGLE_STRIP, this._indexBuffer!.numItems, gl.UNSIGNED_INT, 0);\n    }\n\n    public increaseTransitionOpacity() {\n        //this._transitionOpacity += 0.01;\n        this._transitionOpacity += (window.performance.now() - this._transitionTimestamp) / this.planet.transitionTime;\n        this._transitionTimestamp = window.performance.now();\n        if (this._transitionOpacity > 2.0) {\n            this._transitionOpacity = 2.0;\n        }\n\n        let i = this.node._fadingNodes.length;\n        while (i--) {\n            let n = this.node._fadingNodes[i];\n            if (n.segment) {\n                if (n.segment._transitionOpacity > 0 && !this.planet._fadingNodes.has(n.__id)) {\n                    this.planet._fadingNodes.set(n.__id, n);\n                    n.segment._transitionOpacity = 2.0 - this._transitionOpacity;\n                    if (n.segment._transitionOpacity === 0) {\n                        this.node._fadingNodes.splice(i, 1);\n                    }\n                }\n            } else {\n                this._transitionOpacity = 1.0;\n                break;\n            }\n        }\n    }\n\n    public fadingTransitionOpacity() {\n        this._transitionOpacity -= 0.01;\n        // this._transitionOpacity -= (window.performance.now() - this._transitionTimestamp) / this.planet.transitionTime;\n        this._transitionTimestamp = window.performance.now();\n        if (this._transitionOpacity < 0.0) {\n            this._transitionOpacity = 0;\n        }\n    }\n\n    public colorPickingRendering(sh: Program, layerSlice: Layer[], sliceIndex: number, defaultTexture?: WebGLTextureExt | null, isOverlay: boolean = false) {\n        const gl = this.handler.gl!;\n        const sha = sh.attributes;\n        const shu = sh.uniforms;\n\n        let pm = this.materials,\n            p = this.planet;\n\n        let currHeight;\n        if (layerSlice && layerSlice.length) {\n            currHeight = layerSlice[0]._height;\n        } else {\n            currHeight = 0;\n        }\n\n        let notEmpty = false;\n\n        let slice = this._slices[sliceIndex];\n\n        let len = slice.layers.length;\n\n        for (let n = 0; n < len; n++) {\n            notEmpty = true;\n\n            let li = slice.layers[n];\n            let n4 = n * 4;\n\n            p._pickingColorArr[n4] = li._pickingColor.x / 255.0;\n            p._pickingColorArr[n4 + 1] = li._pickingColor.y / 255.0;\n            p._pickingColorArr[n4 + 2] = li._pickingColor.z / 255.0;\n            p._pickingColorArr[n4 + 3] = Number(li._pickingEnabled);\n\n            p._samplerArr[n] = n;\n            gl.activeTexture(gl.TEXTURE0 + n);\n            gl.bindTexture(gl.TEXTURE_2D, (pm[li.__id].texture || this.planet.transparentTexture)!);\n\n            p._pickingMaskArr[n] = n + p.SLICE_SIZE;\n            gl.activeTexture(gl.TEXTURE0 + n + p.SLICE_SIZE);\n            gl.bindTexture(gl.TEXTURE_2D, (pm[li.__id].pickingMask || this.planet.transparentTexture)!);\n        }\n\n        if (notEmpty || !isOverlay) {\n            gl.uniform1i(shu.samplerCount, len);\n            gl.uniform1f(shu.height, currHeight);\n            gl.uniform1iv(shu.samplerArr, p._samplerArr);\n            gl.uniform1iv(shu.pickingMaskArr, p._pickingMaskArr);\n            gl.uniform4fv(shu.pickingColorArr, p._pickingColorArr);\n\n            //slice.uniform(gl, shu);\n\n            gl.uniform4fv(shu.tileOffsetArr, slice.tileOffsetArr);\n            gl.uniform1fv(shu.layerOpacityArr, slice.layerOpacityArr);\n            //gl.uniform4fv(shu.visibleExtentOffsetArr, slice.visibleExtentOffsetArr);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferHigh!);\n            gl.vertexAttribPointer(sha.aVertexPositionHigh, this.vertexPositionBufferHigh!.itemSize, gl.FLOAT, false, 0, 0);\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferLow!);\n            gl.vertexAttribPointer(sha.aVertexPositionLow, this.vertexPositionBufferLow!.itemSize, gl.FLOAT, false, 0, 0);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexTextureCoordBuffer!);\n            gl.vertexAttribPointer(sha.aTextureCoord, 2, gl.UNSIGNED_SHORT, true, 0, 0);\n\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer!);\n            gl.drawElements(gl.TRIANGLE_STRIP, this._indexBuffer!.numItems, gl.UNSIGNED_INT, 0);\n        }\n    }\n\n    public depthRendering(sh: Program, layerSlice: Layer[]) {\n        const gl = this.handler.gl!;\n        const sha = sh.attributes;\n        const shu = sh.uniforms;\n\n        var currHeight;\n        if (layerSlice && layerSlice.length) {\n            currHeight = layerSlice[0]._height;\n        } else {\n            currHeight = 0;\n        }\n\n        gl.uniform1f(shu.height, currHeight);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferHigh!);\n        gl.vertexAttribPointer(sha.aVertexPositionHigh, this.vertexPositionBufferHigh!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferLow!);\n        gl.vertexAttribPointer(sha.aVertexPositionLow, this.vertexPositionBufferLow!.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer!);\n        gl.drawElements(gl.TRIANGLE_STRIP, this._indexBuffer!.numItems, gl.UNSIGNED_INT, 0);\n    }\n\n    protected _getIndexBuffer(): WebGLBufferExt {\n        const s = this.node.sideSizeLog2;\n        let cache = this.planet._indexesCache[Math.log2(this.gridSize)][s[0]][s[1]][s[2]][s[3]];\n        if (!cache.buffer) {\n            let indexes = segmentHelper.getInstance().createSegmentIndexes(Math.log2(this.gridSize), [s[0], s[1], s[2], s[3]]);\n            cache.buffer = this.planet.renderer!.handler.createElementArrayBuffer(indexes, 1);\n            this.planet._indexesCacheToRemoveCounter++;\n        }\n        return cache.buffer;\n    }\n\n    public layerOverlap(layer: Layer): boolean {\n        return this._extent.overlaps(layer._extentMerc);\n    }\n\n    public getDefaultTexture(): WebGLTextureExt | null {\n        return this.planet.solidTextureOne;\n    }\n\n    public getExtentLonLat(): Extent {\n        return this._extentLonLat;\n    }\n\n    public getExtentMerc(): Extent {\n        return this._extentMerc;\n    }\n\n    public getExtent(): Extent {\n        return this._extent;\n    }\n\n    public getNeighborSide(b: Segment) {\n        if (this.tileY === b.tileY) {\n            if (this.tileX === b.tileXE) {\n                return W;\n            } else if (this.tileX === b.tileXW) {\n                return E;\n            }\n        } else if (this.tileX === b.tileX) {\n            if (this.tileY === b.tileYS) {\n                return N;\n            } else if (this.tileY === b.tileYN) {\n                return S;\n            }\n        }\n        return -1;\n    }\n}\n\nexport {Segment};","import {Extent} from \"../Extent\";\nimport {EPSG3857} from \"../proj/EPSG3857\";\nimport {EPSG4326} from \"../proj/EPSG4326\";\nimport {binaryInsert, getMatrixSubArray32, getMatrixSubArray64, getMatrixSubArrayBoundsExt} from \"../utils/shared\";\nimport {LonLat} from \"../LonLat\";\nimport {MAX, MIN} from \"../math\";\nimport {MAX_LAT} from \"../mercator\";\nimport {Planet} from \"../scene/Planet\";\nimport {Segment} from \"../segment/Segment\";\n\nimport {Vec2} from \"../math/Vec2\";\nimport {Vec3} from \"../math/Vec3\";\nimport {\n    E,\n    MAX_RENDERED_NODES,\n    N,\n    NE,\n    NEIGHBOUR,\n    NOTRENDERING,\n    NW,\n    OPPART,\n    OPSIDE,\n    PARTOFFSET,\n    RENDERING,\n    S,\n    SE,\n    SW,\n    W,\n    WALKTHROUGH\n} from \"./quadTree\";\n\nimport {\n    TILEGROUP_COMMON,\n    TILEGROUP_NORTH,\n    TILEGROUP_SOUTH\n} from \"../segment/Segment\";\n\nimport {PlanetCamera} from \"../camera/PlanetCamera\";\n\nlet _tempHigh = new Vec3(),\n    _tempLow = new Vec3();\n\nconst _vertOrder: Vec2[] = [\n    new Vec2(0, 0), new Vec2(1, 0),\n    new Vec2(0, 1), new Vec2(1, 1)\n];\n\nconst _neGridSize = Math.sqrt(_vertOrder.length) - 1;\n\ntype BoundsType = {\n    xmin: number; ymin: number; zmin: number;\n    xmax: number; ymax: number; zmax: number\n};\n\nlet BOUNDS: BoundsType = {\n    xmin: 0.0, ymin: 0.0, zmin: 0.0,\n    xmax: 0.0, ymax: 0.0, zmax: 0.0\n};\n\nlet __staticCounter = 0;\n\n/**\n * Quad tree planet segment node.\n * @constructor\n * @param {Segment} segmentPrototype - Planet segment node constructor.\n * @param {Planet} planet - Planet scene instance.\n * @param {number} partId - NorthEast, SouthWest etc.\n * @param {Node} parent - Parent of this node.\n * @param {number} id - Tree node identifier (id * 4 + 1);\n * @param {number} tileZoom - Deep index of the quad tree.\n * @param {Extent} extent - Planet segment extent.\n */\nclass Node {\n    public __id: number;\n    public SegmentPrototype: typeof Segment;\n    public planet: Planet;\n    public parentNode: Node | null;\n    public partId: number;\n    public nodeId: number;\n    public state: number | null;\n    public prevState: number | null;\n    public appliedTerrainNodeId: number;\n    public sideSizeLog2: [number, number, number, number];\n    public ready: boolean;\n    public neighbors: [Node[], Node[], Node[], Node[]];\n    public equalizedSideWithNodeId: number[];\n    public nodes: [Node, Node, Node, Node] | [];\n    public segment: Segment;\n    public _cameraInside: boolean;\n    public inFrustum: number;\n    public _fadingNodes: Node[];\n\n    constructor(\n        SegmentPrototype: typeof Segment,\n        planet: Planet,\n        partId: number,\n        parent: Node | null,\n        tileZoom: number,\n        extent: Extent\n    ) {\n        planet._createdNodesCount++;\n\n        this.__id = __staticCounter++;\n\n        this.SegmentPrototype = SegmentPrototype;\n        this.planet = planet;\n        this.parentNode = parent;\n        this.partId = partId;\n        this.nodeId = partId + (parent ? parent.nodeId * 4 + 1 : 0);\n        this.state = null;\n        this.prevState = null;\n        this.appliedTerrainNodeId = -1;\n        this.sideSizeLog2 = [0, 0, 0, 0];\n        this.ready = false;\n        this.neighbors = [[], [], [], []];\n        this.equalizedSideWithNodeId = [this.nodeId, this.nodeId, this.nodeId, this.nodeId];\n        // @todo: this.nodes = null;\n        this.nodes = [];\n        this.segment = new SegmentPrototype(this, planet, tileZoom, extent);\n        this._cameraInside = false;\n        this.inFrustum = 0;\n        this._fadingNodes = [];\n        this.createBounds();\n    }\n\n    public createChildrenNodes() {\n        this.ready = true;\n        const p = this.planet;\n        const ps = this.segment;\n        const ext = ps._extent;\n        const z = ps.tileZoom + 1;\n        const size_x = ext.getWidth() * 0.5;\n        const size_y = ext.getHeight() * 0.5;\n        const ne = ext.northEast;\n        const sw = ext.southWest;\n        const c = new LonLat(sw.lon + size_x, sw.lat + size_y);\n        const nd = this.nodes;\n\n        nd[NW] = new Node(this.SegmentPrototype, p, NW, this, z, new Extent(new LonLat(sw.lon, sw.lat + size_y), new LonLat(sw.lon + size_x, ne.lat)));\n        nd[NE] = new Node(this.SegmentPrototype, p, NE, this, z, new Extent(c, new LonLat(ne.lon, ne.lat)));\n        nd[SW] = new Node(this.SegmentPrototype, p, SW, this, z, new Extent(new LonLat(sw.lon, sw.lat), c));\n        nd[SE] = new Node(this.SegmentPrototype, p, SE, this, z, new Extent(new LonLat(sw.lon + size_x, sw.lat), new LonLat(ne.lon, sw.lat + size_y)));\n    }\n\n    public createBounds() {\n\n        let seg = this.segment;\n\n        seg._setExtentLonLat();\n\n        if (seg.tileZoom === 0) {\n            seg.setBoundingSphere(0.0, 0.0, 0.0, new Vec3(0.0, 0.0, seg.planet.ellipsoid.equatorialSize));\n        } else if (seg.tileZoom < seg.planet.terrain!.minZoom) {\n            seg.createBoundsByExtent();\n        } else {\n            seg.createBoundsByParent();\n        }\n\n        let x = seg.bsphere.center.x,\n            y = seg.bsphere.center.y,\n            z = seg.bsphere.center.z;\n\n        let length = 1.0 / Math.sqrt(x * x + y * y + z * z);\n        seg.centerNormal.x = x * length;\n        seg.centerNormal.y = y * length;\n        seg.centerNormal.z = z * length;\n    }\n\n    public getState(): number | null {\n        if (this.state === -1) {\n            return this.state;\n        }\n        let pn = this.parentNode;\n        while (pn) {\n            if (pn.state !== WALKTHROUGH) {\n                return NOTRENDERING;\n            }\n            pn = pn.parentNode;\n        }\n        return this.state;\n    }\n\n    /**\n     * Returns the same deep existent neighbour node.\n     * @public\n     * @param {number} side - Neighbour side index e.g. og.quadTree.N, og.quadTree.W etc.\n     * @returns {Node} -\n     */\n    public getEqualNeighbor(side: number): Node | undefined {\n        let pn: Node = this;\n        let part = NEIGHBOUR[side][pn.partId];\n        if (part !== -1) {\n            // (!) it means that we would never ask to get head node neighbors\n            return pn.parentNode!.nodes[part];\n        } else {\n            let pathId = [];\n            while (pn.parentNode) {\n                pathId.push(pn.partId);\n                part = NEIGHBOUR[side][pn.partId];\n                pn = pn.parentNode;\n                if (part !== -1) {\n                    let i = pathId.length;\n                    side = OPSIDE[side];\n                    while (pn && i--) {\n                        part = OPPART[side][pathId[i]];\n                        pn = pn.nodes[part];\n                    }\n                    return pn;\n                }\n            }\n        }\n    }\n\n    // public isBrother(node: Node): boolean {\n    //     return !(this.parentNode || node.parentNode) || (this.parentNode!.nodeId === node.parentNode!.nodeId);\n    // }\n\n    public traverseNodes(cam: PlanetCamera, maxZoom?: number | null, terrainReadySegment?: Segment | null, stopLoading?: boolean, zoomPassNode?: Node) {\n        if (!this.ready) {\n            this.createChildrenNodes();\n        }\n\n        let n = this.nodes;\n\n        n[0]!.renderTree(cam, maxZoom, terrainReadySegment, stopLoading, zoomPassNode);\n        n[1]!.renderTree(cam, maxZoom, terrainReadySegment, stopLoading, zoomPassNode);\n        n[2]!.renderTree(cam, maxZoom, terrainReadySegment, stopLoading, zoomPassNode);\n        n[3]!.renderTree(cam, maxZoom, terrainReadySegment, stopLoading, zoomPassNode);\n    }\n\n    public renderTree(cam: PlanetCamera, maxZoom?: number | null, terrainReadySegment?: Segment | null, stopLoading?: boolean, zoomPassNode?: Node) {\n        if (this.planet._renderedNodes.length >= MAX_RENDERED_NODES) {\n            return;\n        }\n\n        if (!maxZoom || zoomPassNode && this.segment.tileZoom > zoomPassNode.segment.tileZoom) {\n            this.prevState = this.state;\n        }\n        this.state = WALKTHROUGH;\n\n        this.clearNeighbors();\n\n        let seg = this.segment,\n            planet = this.planet;\n\n        this._cameraInside = false;\n\n        // Search a node which the camera is flying over.\n        if (!this.parentNode || this.parentNode._cameraInside) {\n            let inside;\n            if (/*Math.abs(cam._lonLat.lat) <= MAX_LAT && */seg._projection.id === EPSG3857.id) {\n                inside = seg._extent.isInside(cam._lonLatMerc);\n            } else /*if (seg._projection.id === EPSG4326.id)*/ {\n                inside = seg._extent.isInside(cam._lonLat);\n            }\n\n            if (inside) {\n                cam._insideSegment = seg;\n                this._cameraInside = true;\n            }\n        }\n\n        this.inFrustum = 0;\n\n        let frustums = cam.frustums, numFrustums = frustums.length;\n\n        if (seg.tileZoom < 6) {\n            for (let i = 0; i < numFrustums; i++) {\n                if (frustums[i].containsSphere(seg.bsphere)) {\n                    this.inFrustum |= 1 << i;\n                }\n            }\n        } else {\n            for (let i = 0; i < numFrustums; i++) {\n                if (seg.terrainReady) {\n                    if (frustums[i].containsBox(seg.bbox)) {\n                        this.inFrustum |= 1 << i;\n                    }\n                } else {\n                    if (frustums[i].containsSphere(seg.bsphere)) {\n                        this.inFrustum |= 1 << i;\n                    }\n                }\n            }\n        }\n\n        if (this.inFrustum || this._cameraInside || seg.tileZoom < 3) {\n            let h = Math.abs(cam._lonLat.height);\n\n            let horizonDist = cam.eye.length2() - planet.ellipsoid.polarSizeSqr;\n            horizonDist = horizonDist < 106876472875.63281 * planet._heightFactor ? 106876472875.63281 * planet._heightFactor : horizonDist;\n\n            let altVis = seg.tileZoom < 2 || seg.tileZoom > 19 ||\n                /* Could be replaced with camera frustum always looking down check,\n                and not to go through nodes from the opposite of the globe*/\n                (seg.tileZoom < 6 && !seg.terrainReady);\n\n            altVis = altVis ||\n                cam.eye.distance2(seg._sw) < horizonDist ||\n                cam.eye.distance2(seg._nw) < horizonDist ||\n                cam.eye.distance2(seg._ne) < horizonDist ||\n                cam.eye.distance2(seg._se) < horizonDist;\n\n            if ((this.inFrustum && (altVis || h > 10000.0)) || this._cameraInside) {\n                planet.quadTreeStrategy.collectVisibleNode(this);\n            }\n\n            if (seg.tileZoom < 2) {\n                this.traverseNodes(cam, maxZoom, terrainReadySegment, stopLoading, zoomPassNode);\n            } else if (\n                seg.terrainReady && (!maxZoom && cam.projectedSize(seg.bsphere.center, seg._plainRadius) < planet.lodSize\n                    || maxZoom && ((seg.tileZoom === maxZoom) || !altVis))\n            ) {\n\n                if (altVis) {\n                    seg.passReady = true;\n                    this.renderNode(this.inFrustum, !this.inFrustum, terrainReadySegment, stopLoading);\n                } else {\n                    this.state = NOTRENDERING;\n                }\n\n            } else if (seg.terrainReady && seg.checkZoom() && (!maxZoom || cam.projectedSize(seg.bsphere.center, seg.bsphere.radius) > this.planet._maxLodSize)) {\n                this.traverseNodes(cam, maxZoom, seg, stopLoading, zoomPassNode);\n            } else if (altVis) {\n                seg.passReady = maxZoom ? seg.terrainReady : false;\n                this.renderNode(this.inFrustum, !this.inFrustum, terrainReadySegment, stopLoading);\n            } else {\n                this.state = NOTRENDERING;\n            }\n        } else {\n            this.state = NOTRENDERING;\n        }\n    }\n\n    public renderNode(inFrustum: number, onlyTerrain?: boolean, terrainReadySegment?: Segment | null, stopLoading?: boolean) {\n        let seg = this.segment;\n\n        // Create and load terrain data\n        if (!seg.terrainReady) {\n            if (!seg.initialized) {\n                seg.initialize();\n            }\n\n            this.whileTerrainLoading(terrainReadySegment);\n\n            if (!seg.plainProcessing) {\n                seg.createPlainSegmentAsync();\n            }\n\n            if (seg.plainReady && !stopLoading) {\n                seg.loadTerrain();\n            }\n        }\n\n        // Create normal map texture\n        if (seg.planet.lightEnabled && !seg.normalMapReady) {\n            this.whileNormalMapCreating();\n        }\n\n        if (onlyTerrain) {\n            this.state = -1;\n            return;\n        }\n\n        // Calculate minimal and maximal zoom index on the screen\n        if (!this._cameraInside && seg.tileZoom > this.planet.maxCurrZoom) {\n            this.planet.maxCurrZoom = seg.tileZoom;\n        }\n\n        if (seg.tileZoom < this.planet.minCurrZoom) {\n            this.planet.minCurrZoom = seg.tileZoom;\n        }\n\n        seg._addViewExtent();\n\n        // Finally this node proceeds to rendering.\n        this.addToRender(inFrustum);\n    }\n\n    public childrenPrevStateEquals(state: number): boolean {\n        let n = this.nodes;\n        return n.length === 4 && n[0].prevState === state && n[1].prevState === state && n[2].prevState === state && n[3].prevState === state;\n    }\n\n    public isFading(): boolean {\n        let n = this.nodes;\n        return this.state === WALKTHROUGH && this.segment._transitionOpacity > 0.0 && n.length === 4 && (n[0].state === RENDERING && n[1].state === RENDERING && n[2].state === RENDERING && n[3].state === RENDERING);\n    }\n\n    public _collectFadingNodes() {\n\n        if (this.segment.tileZoom < 3) {\n            this.segment._transitionOpacity = 1.0;\n            return;\n        }\n\n        // Light up the node\n        if (this.prevState !== RENDERING) {\n\n            // means that the node is lighting up\n            this.segment._transitionOpacity = 0.0;\n\n            // store fading nodes, could be a parent or children nodes\n            this._fadingNodes = [];\n\n            let timestamp = window.performance.now();\n            this.segment._transitionTimestamp = timestamp;\n\n            if (this.parentNode) {\n                // Parent was visible the last frame, make the parent fading\n                if (this.parentNode.prevState === RENDERING) {\n\n                    let pn: Node | null = this.parentNode.parentNode;\n                    while (pn) {\n                        if (pn.isFading()) {\n                            for (let i = 0; i < pn.nodes.length; i++) {\n                                pn.nodes[i].segment._transitionOpacity = 1.0;\n                                pn.nodes[i]._fadingNodes = [];\n                            }\n                            pn.segment._transitionOpacity = 0.0;\n                            break;\n                        }\n                        pn = pn.parentNode;\n                    }\n\n                    // not sure it's necessary here\n                    this.parentNode.whileTerrainLoading();\n\n                    this._fadingNodes.push(this.parentNode);\n                    this.parentNode.segment._transitionOpacity = 2.0;\n                    this.parentNode.segment._transitionTimestamp = timestamp;\n                } else {\n                    // Check if the children were visible last frame, and make them fading\n                    if (this.segment.childrenInitialized() && this.childrenPrevStateEquals(RENDERING)) {\n                        for (let i = 0; i < this.nodes.length; i++) {\n                            let ni = this.nodes[i];\n\n                            // not sure it's necessary here\n                            ni.whileTerrainLoading();\n\n                            this._fadingNodes.push(ni);\n                            ni.segment._transitionOpacity = 2.0;\n                            ni.segment._transitionTimestamp = timestamp;\n                            ni.prevState = ni.state;\n                            ni.state = NOTRENDERING;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    public clearNeighbors() {\n        //this.sideSizeLog2[0] = this.sideSizeLog2[1] = this.sideSizeLog2[2] = this.sideSizeLog2[3] = Math.log2(this.segment.gridSize);\n        if (this.neighbors) {\n            // @ts-ignore\n            this.neighbors[0] = this.neighbors[1] = this.neighbors[2] = this.neighbors[3] = null;\n\n            this.neighbors[0] = [];\n            this.neighbors[1] = [];\n            this.neighbors[2] = [];\n            this.neighbors[3] = [];\n        }\n    }\n\n    public _refreshTransitionOpacity() {\n        if (this._fadingNodes.length === 0) {\n            this.segment._transitionOpacity = 1.0;\n        } else {\n            if (this._fadingNodes.length === 4 && !this.childrenPrevStateEquals(RENDERING)) {\n                this.segment._transitionOpacity = 1.0;\n                this._fadingNodes = [];\n            } else {\n                // Looks like a bug fix for suddenly empty spaces\n                for (let i = 0; i < this._fadingNodes.length; i++) {\n                    if (this.segment._transitionOpacity < 1.0 && this._fadingNodes[i].segment._transitionOpacity === 0) {\n                        this._fadingNodes[i].segment._transitionOpacity = 0;\n                        this.segment._transitionOpacity = 1.0;\n                    }\n                }\n                this.segment.increaseTransitionOpacity();\n            }\n        }\n    }\n\n    /**\n     * Picking up current node to render processing.\n     * @public\n     */\n    public addToRender(inFrustum: number) {\n        this.state = RENDERING;\n\n        let nodes = this.planet._renderedNodes;\n\n        //@ts-ignore\n        if (!this.planet._transitionOpacityEnabled) {\n            this.getRenderedNodesNeighbors(nodes);\n            nodes.push(this);\n        } else {\n            //@todo: check if it's possible to get rid of the sorting when using breadth traverse tree\n            binaryInsert(nodes, this, (a: Node, b: Node) => {\n                return a.segment.tileZoom - b.segment.tileZoom;\n            });\n        }\n\n        if (!this.segment.terrainReady) {\n            this.planet._renderCompleted = false;\n            this.planet._terrainCompleted = false;\n        }\n\n        let k = 0,\n            rf = this.planet._renderedNodesInFrustum;\n        while (inFrustum) {\n            if (inFrustum & 1) {\n                rf[k].push(this);\n            }\n            k++;\n            inFrustum >>= 1;\n        }\n    }\n\n    public applyNeighbor(node: Node, side: number) {\n\n        const opcs = OPSIDE[side];\n\n        if (this.neighbors[side].length === 0 || node.neighbors[opcs].length === 0) {\n            const ap = this.segment;\n            const bp = node.segment;\n\n            const ld = ap.gridSize / (bp.gridSize * Math.pow(2, bp.tileZoom - ap.tileZoom));\n\n            let cs_size = ap.gridSize,\n                opcs_size = bp.gridSize;\n\n            if (ld > 1) {\n                cs_size = Math.ceil(ap.gridSize / ld);\n                opcs_size = bp.gridSize;\n            } else if (ld < 1) {\n                cs_size = ap.gridSize;\n                opcs_size = Math.ceil(bp.gridSize * ld);\n            }\n\n            this.sideSizeLog2[side] = Math.log2(cs_size);\n            node.sideSizeLog2[opcs] = Math.log2(opcs_size);\n        }\n\n        //@todo: fix dupe neighbors\n        this.neighbors[side].push(node);\n        node.neighbors[opcs].push(this);\n    }\n\n    /**\n     * Searching current node for its neighbours.\n     * @public\n     */\n    public getRenderedNodesNeighbors(nodes: Node[]) {\n\n        for (let i = nodes.length - 1; i >= 0; --i) {\n\n            let ni = nodes[i];\n            let cs = this.getCommonSide(ni);\n\n            if (cs !== -1) {\n                this.applyNeighbor(ni, cs);\n            }\n        }\n    }\n\n    /**\n     * Checking if current node has a common side with input node and return side index N, E, S or W. Otherwise returns -1.\n     * @param {Node} node - Input node\n     * @returns {number} - Node side index\n     */\n    public getCommonSide(node: Node): number {\n        const as = this.segment;\n        const bs = node.segment;\n\n        if (as.tileZoom === bs.tileZoom && as._tileGroup === bs._tileGroup) {\n            return as.getNeighborSide(bs);\n        } else {\n            const a = as._extentLonLat;\n            const b = bs._extentLonLat;\n\n            let a_ne = a.northEast, a_sw = a.southWest,\n                b_ne = b.northEast, b_sw = b.southWest;\n\n            let a_ne_lon = a_ne.lon, a_ne_lat = a_ne.lat,\n                a_sw_lon = a_sw.lon, a_sw_lat = a_sw.lat,\n                b_ne_lon = b_ne.lon, b_ne_lat = b_ne.lat,\n                b_sw_lon = b_sw.lon, b_sw_lat = b_sw.lat;\n\n            if (as._tileGroup === bs._tileGroup) {\n                if (a_ne_lon === b_sw_lon && ((a_ne_lat <= b_ne_lat && a_sw_lat >= b_sw_lat) || (a_ne_lat >= b_ne_lat && a_sw_lat <= b_sw_lat))) {\n                    return E;\n                } else if (a_sw_lon === b_ne_lon && ((a_ne_lat <= b_ne_lat && a_sw_lat >= b_sw_lat) || (a_ne_lat >= b_ne_lat && a_sw_lat <= b_sw_lat))) {\n                    return W;\n                } else if (a_ne_lat === b_sw_lat && ((a_sw_lon >= b_sw_lon && a_ne_lon <= b_ne_lon) || (a_sw_lon <= b_sw_lon && a_ne_lon >= b_ne_lon))) {\n                    return N;\n                } else if (a_sw_lat === b_ne_lat && ((a_sw_lon >= b_sw_lon && a_ne_lon <= b_ne_lon) || (a_sw_lon <= b_sw_lon && a_ne_lon >= b_ne_lon))) {\n                    return S;\n                }\n                // World edge 180 to -180\n                else if (bs.tileX === 0 && b_sw_lon === -a_ne_lon && ((a_ne_lat <= b_ne_lat && a_sw_lat >= b_sw_lat) || (a_ne_lat >= b_ne_lat && a_sw_lat <= b_sw_lat))) {\n                    return E;\n                } else if (as.tileX === 0 && a_sw_lon === -b_ne_lon && ((a_ne_lat <= b_ne_lat && a_sw_lat >= b_sw_lat) || (a_ne_lat >= b_ne_lat && a_sw_lat <= b_sw_lat))) {\n                    return W;\n                }\n            }\n\n            // @todo: replace to the default strategy\n            if (as._tileGroup === TILEGROUP_COMMON && bs._tileGroup === TILEGROUP_NORTH && as.tileY === 0 && bs.tileY === bs.powTileZoom/*Math.pow(2, bs.tileZoom)*/ - 1 && ((a_sw_lon >= b_sw_lon && a_ne_lon <= b_ne_lon) || (a_sw_lon <= b_sw_lon && a_ne_lon >= b_ne_lon))) {\n                return N;\n            } else if (as._tileGroup === TILEGROUP_COMMON && bs._tileGroup === TILEGROUP_SOUTH && as.tileY === as.powTileZoom/*Math.pow(2, as.tileZoom)*/ - 1 && bs.tileY === 0 && ((a_sw_lon >= b_sw_lon && a_ne_lon <= b_ne_lon) || (a_sw_lon <= b_sw_lon && a_ne_lon >= b_ne_lon))) {\n                return S;\n            } else if (as._tileGroup === TILEGROUP_SOUTH && bs._tileGroup === TILEGROUP_COMMON && as.tileY === 0 && bs.tileY === bs.powTileZoom/*Math.pow(2, bs.tileZoom)*/ - 1 && ((a_sw_lon >= b_sw_lon && a_ne_lon <= b_ne_lon) || (a_sw_lon <= b_sw_lon && a_ne_lon >= b_ne_lon))) {\n                return N;\n            } else if (as._tileGroup === TILEGROUP_NORTH && bs._tileGroup === TILEGROUP_COMMON && as.tileY === as.powTileZoom/*Math.pow(2, as.tileZoom)*/ - 1 && bs.tileY === 0 && ((a_sw_lon >= b_sw_lon && a_ne_lon <= b_ne_lon) || (a_sw_lon <= b_sw_lon && a_ne_lon >= b_ne_lon))) {\n                return S;\n            }\n        }\n\n        return -1;\n    }\n\n    public whileNormalMapCreating() {\n\n        const seg = this.segment;\n\n        if (!seg.terrainIsLoading && seg.terrainExists && !seg._inTheQueue) {\n            seg.planet._normalMapCreator.queue(seg);\n        }\n\n        let pn: Node = this;\n        while (pn.parentNode && !pn.segment.normalMapReady) {\n            pn = pn.parentNode;\n        }\n\n        const dZ2 = 2 << (seg.tileZoom - pn.segment.tileZoom - 1);\n\n        seg.normalMapTexture = pn.segment.normalMapTexture;\n        seg.normalMapTextureBias[0] = seg.tileX - pn.segment.tileX * dZ2;\n        seg.normalMapTextureBias[1] = seg.tileY - pn.segment.tileY * dZ2;\n        seg.normalMapTextureBias[2] = 1.0 / dZ2;\n    }\n\n    public whileTerrainLoading(terrainReadySegment?: Segment | null) {\n\n        const seg = this.segment;\n\n        let pn: Node = this;\n\n        if (terrainReadySegment && terrainReadySegment.terrainReady) {\n            pn = terrainReadySegment.node;\n        } else {\n            while (pn.parentNode && !pn.segment.terrainReady) {\n                pn = pn.parentNode;\n            }\n        }\n\n        if (pn.segment.terrainReady && this.appliedTerrainNodeId !== pn.nodeId) {\n\n            let dZ2 = 2 << (seg.tileZoom - pn.segment.tileZoom - 1), // 2 * Math.pow(2, dZ-1)\n                offsetX = seg.tileX - pn.segment.tileX * dZ2,\n                offsetY = seg.tileY - pn.segment.tileY * dZ2;\n\n            const pseg = pn.segment;\n\n            let tempVertices: Float64Array,\n                tempVerticesHigh: Float32Array,\n                tempVerticesLow: Float32Array,\n                noDataVertices: Uint8Array;\n\n            this.appliedTerrainNodeId = pn.nodeId;\n            this.equalizedSideWithNodeId[N] = this.equalizedSideWithNodeId[E] = this.equalizedSideWithNodeId[S] = this.equalizedSideWithNodeId[W] = this.appliedTerrainNodeId;\n\n            let gridSize = pn.segment.gridSize / dZ2,\n                gridSizeExt = pn.segment.fileGridSize / dZ2;\n\n            BOUNDS.xmin = MAX;\n            BOUNDS.xmax = MIN;\n            BOUNDS.ymin = MAX;\n            BOUNDS.ymax = MIN;\n            BOUNDS.zmin = MAX;\n            BOUNDS.zmax = MIN;\n\n            if (gridSize >= 1) {\n                seg.gridSize = gridSize;\n\n                let len = (gridSize + 1) * (gridSize + 1) * 3;\n                tempVertices = new Float64Array(len);\n                tempVerticesHigh = new Float32Array(len);\n                tempVerticesLow = new Float32Array(len);\n\n                if (pseg.noDataVertices) {\n                    noDataVertices = new Uint8Array(len / 3);\n                }\n\n                getMatrixSubArrayBoundsExt(\n                    pseg.terrainVertices!,\n                    pseg.terrainVerticesHigh!,\n                    pseg.terrainVerticesLow!,\n                    pseg.noDataVertices!,\n                    pseg.gridSize,\n                    gridSize * offsetY,\n                    gridSize * offsetX,\n                    gridSize,\n                    tempVertices,\n                    tempVerticesHigh,\n                    tempVerticesLow,\n                    BOUNDS,\n                    noDataVertices!\n                );\n\n            } else if (gridSizeExt >= 1 && pn.segment.terrainExists) {\n\n                seg.gridSize = gridSizeExt;\n\n                let len = (gridSizeExt + 1) * (gridSizeExt + 1) * 3;\n                tempVertices = new Float64Array(len);\n                tempVerticesHigh = new Float32Array(len);\n                tempVerticesLow = new Float32Array(len);\n\n                if (pseg.noDataVertices) {\n                    noDataVertices = new Uint8Array(len / 3);\n                }\n\n                getMatrixSubArrayBoundsExt(\n                    pseg.normalMapVertices!,\n                    pseg.normalMapVerticesHigh!,\n                    pseg.normalMapVerticesLow!,\n                    pseg.noDataVertices!,\n                    pn.segment.fileGridSize,\n                    gridSizeExt * offsetY,\n                    gridSizeExt * offsetX,\n                    gridSizeExt,\n                    tempVertices,\n                    tempVerticesHigh,\n                    tempVerticesLow,\n                    BOUNDS,\n                    noDataVertices!\n                );\n\n            } else {\n\n                seg.gridSize = _neGridSize;\n\n                let i0 = Math.floor(gridSize * offsetY),\n                    j0 = Math.floor(gridSize * offsetX);\n\n                let bigOne;\n                if (pseg.gridSize === 1) {\n                    bigOne = pseg.terrainVertices!;\n                } else {\n                    bigOne = getMatrixSubArray64(pseg.terrainVertices!, pseg.gridSize, i0, j0, 1);\n                }\n\n                let insideSize = 1.0 / gridSize;\n\n                let t_i0 = offsetY - insideSize * i0, t_j0 = offsetX - insideSize * j0;\n\n                let v_lt = new Vec3(bigOne[0], bigOne[1], bigOne[2]),\n                    v_rb = new Vec3(bigOne[9], bigOne[10], bigOne[11]);\n\n                let vn = new Vec3(bigOne[3] - bigOne[0], bigOne[4] - bigOne[1], bigOne[5] - bigOne[2]),\n                    vw = new Vec3(bigOne[6] - bigOne[0], bigOne[7] - bigOne[1], bigOne[8] - bigOne[2]),\n                    ve = new Vec3(bigOne[3] - bigOne[9], bigOne[4] - bigOne[10], bigOne[5] - bigOne[11]),\n                    vs = new Vec3(bigOne[6] - bigOne[9], bigOne[7] - bigOne[10], bigOne[8] - bigOne[11]);\n\n                let coords = new Vec3();\n\n                tempVertices = new Float64Array(3 * _vertOrder.length);\n                tempVerticesHigh = new Float32Array(3 * _vertOrder.length);\n                tempVerticesLow = new Float32Array(3 * _vertOrder.length);\n\n                for (let i = 0; i < _vertOrder.length; i++) {\n                    let vi_y = _vertOrder[i].y + t_i0, vi_x = _vertOrder[i].x + t_j0;\n\n                    let vi_x_is = vi_x * gridSize, vi_y_is = vi_y * gridSize;\n\n                    if (vi_y + vi_x < insideSize) {\n                        coords = vn.scaleTo(vi_x_is).addA(vw.scaleTo(vi_y_is)).addA(v_lt);\n                    } else {\n                        coords = vs.scaleTo(1 - vi_x_is).addA(ve.scaleTo(1 - vi_y_is)).addA(v_rb);\n                    }\n\n                    Vec3.doubleToTwoFloats(coords, _tempHigh, _tempLow);\n\n                    let i3 = i * 3;\n\n                    tempVertices[i3] = coords.x;\n                    tempVertices[i3 + 1] = coords.y;\n                    tempVertices[i3 + 2] = coords.z;\n\n                    tempVerticesHigh[i3] = _tempHigh.x;\n                    tempVerticesHigh[i3 + 1] = _tempHigh.y;\n                    tempVerticesHigh[i3 + 2] = _tempHigh.z;\n\n                    tempVerticesLow[i3] = _tempLow.x;\n                    tempVerticesLow[i3 + 1] = _tempLow.y;\n                    tempVerticesLow[i3 + 2] = _tempLow.z;\n\n                    if (coords.x < BOUNDS.xmin) BOUNDS.xmin = coords.x;\n                    if (coords.x > BOUNDS.xmax) BOUNDS.xmax = coords.x;\n                    if (coords.y < BOUNDS.ymin) BOUNDS.ymin = coords.y;\n                    if (coords.y > BOUNDS.ymax) BOUNDS.ymax = coords.y;\n                    if (coords.z < BOUNDS.zmin) BOUNDS.zmin = coords.z;\n                    if (coords.z > BOUNDS.zmax) BOUNDS.zmax = coords.z;\n                }\n            }\n\n            seg.readyToEngage = true;\n\n            seg.terrainVertices = tempVertices;\n            seg.terrainVerticesHigh = tempVerticesHigh;\n            seg.terrainVerticesLow = tempVerticesLow;\n\n            seg.tempVertices = tempVertices;\n            seg.tempVerticesHigh = tempVerticesHigh;\n            seg.tempVerticesLow = tempVerticesLow;\n\n            seg.noDataVertices = noDataVertices!;\n\n            seg.setBoundingVolume(BOUNDS.xmin, BOUNDS.ymin, BOUNDS.zmin, BOUNDS.xmax, BOUNDS.ymax, BOUNDS.zmax);\n\n            if (seg.tileZoom > seg.planet.terrain!.maxZoom) {\n                if (pn.segment.tileZoom >= seg.planet.terrain!.maxZoom) {\n\n                    seg._plainRadius = pn.segment._plainRadius / dZ2;\n\n                    seg.terrainReady = true;\n                    seg.terrainIsLoading = false;\n\n                    seg.terrainVertices = tempVertices;\n                    seg.terrainVerticesHigh = tempVerticesHigh;\n                    seg.terrainVerticesLow = tempVerticesLow;\n\n                    seg.passReady = true;\n\n                    this.appliedTerrainNodeId = this.nodeId;\n                    this.equalizedSideWithNodeId[N] = this.equalizedSideWithNodeId[E] = this.equalizedSideWithNodeId[S] = this.equalizedSideWithNodeId[W] = this.appliedTerrainNodeId;\n\n                    if (pn.segment.terrainExists) {\n                        seg.normalMapVertices = tempVertices;\n                        seg.fileGridSize = Math.sqrt(tempVertices.length / 3) - 1;\n\n                        let fgs = Math.sqrt(pseg.normalMapNormals!.length / 3) - 1,\n                            fgsZ = fgs / dZ2;\n\n                        if (fgs > 1) {\n                            seg.normalMapNormals = getMatrixSubArray32(pseg.normalMapNormals!, fgs, fgsZ * offsetY, fgsZ * offsetX, fgsZ);\n                        } else {\n                            // TODO: interpolation\n                            seg.normalMapNormals = pseg.normalMapNormals;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    public destroy() {\n\n        this.prevState = this.state = NOTRENDERING;\n        this.segment.destroySegment();\n\n        let n = this.neighbors;\n        for (let i = 0, len = n.length; i < len; i++) {\n            let ni = n[i];\n            if (ni) {\n                for (let j = 0; j < ni.length; j++) {\n                    let nij = ni[j];\n                    if (nij && nij.neighbors) {\n                        nij.clearNeighbors();\n                    }\n                }\n            }\n        }\n\n        // @ts-ignore\n        this.neighbors = null;\n        // @ts-ignore\n        this.parentNode = null;\n        // @ts-ignore\n        this.sideSizeLog2 = null;\n        // @ts-ignore\n        this.segment = null;\n    }\n\n    public clearTree() {\n        const state = this.getState();\n        if (state === NOTRENDERING || state === RENDERING) {\n            this.destroyBranches();\n        } else {\n            for (let i = 0; i < this.nodes.length; i++) {\n                this.nodes[i] && this.nodes[i].clearTree();\n            }\n        }\n    }\n\n    public clearBranches() {\n        for (let i = 0; i < this.nodes.length; i++) {\n            this.nodes[i]!.clearBranches();\n            this.nodes[i]!.segment.deleteMaterials();\n        }\n    }\n\n    public destroyBranches() {\n        if (this.ready) {\n            let nodesToRemove: Node[] = [],\n                i;\n\n            for (i = 0; i < this.nodes.length; i++) {\n                nodesToRemove[i] = this.nodes[i]!;\n            }\n\n            this.ready = false;\n            this.nodes = [];\n\n            for (i = 0; i < nodesToRemove.length; i++) {\n                nodesToRemove[i].destroyBranches();\n                nodesToRemove[i].destroy();\n                //@ts-ignore\n                nodesToRemove[i] = null;\n            }\n\n            nodesToRemove.length = 0;\n\n            // @ts-ignore\n            nodesToRemove = null;\n        }\n    }\n\n    public traverseTree(callback: Function) {\n        callback(this);\n        if (this.ready) {\n            for (let i = 0; i < this.nodes.length; i++) {\n                this.nodes[i]!.traverseTree(callback);\n            }\n        }\n    }\n\n    public getOffsetOppositeNeighbourSide(neighbourNode: Node, side: number): number {\n        let pNode: Node = this,\n            neighbourZoom = neighbourNode.segment.tileZoom,\n            offset = 0;\n\n        while (pNode.segment.tileZoom > neighbourZoom) {\n            offset += PARTOFFSET[pNode.partId][side] / (1 << (pNode.segment.tileZoom - neighbourZoom));\n            pNode = pNode.parentNode!;\n        }\n\n        return offset;\n    }\n}\n\nexport {Node};","class QueueArray<T> {\n    protected _size: number;\n    protected _array: T[];\n    protected _popIndex: number;\n    protected _shiftIndex: number;\n    public length: number;\n\n    constructor(size: number = 2048) {\n        this._size = size;\n        this._array = new Array(this._size);\n        this._popIndex = Math.floor(this._size * 0.5);\n        this._shiftIndex = this._popIndex;\n        this.length = 0;\n    }\n\n    public reset() {\n        this._popIndex = Math.floor(this._size * 0.5);\n        this._shiftIndex = this._popIndex;\n        this.length = 0;\n    }\n\n    public clear() {\n        this._array.length = 0;\n        this._array = new Array(this._size);\n        this._popIndex = Math.floor(this._size * 0.5);\n        this._shiftIndex = this._popIndex;\n        this.length = 0;\n    }\n\n    public push(data: T) {\n        this.length++;\n        this._array[this._popIndex++] = data;\n    }\n\n    public pop(): T | undefined {\n        if (this.length) {\n            this.length--;\n            let res = this._array[--this._popIndex]!;\n            // @ts-ignore\n            this._array[this._popIndex] = null;\n            if (!this._array[this._popIndex - 1]) {\n                this._popIndex = Math.floor(this._size * 0.5);\n                this._shiftIndex = this._popIndex;\n            }\n            return res;\n        }\n        return undefined;\n    }\n\n    public unshift(data: T) {\n        this.length++;\n        this._array[--this._shiftIndex] = data;\n    }\n\n    public shift(): T | undefined {\n        if (this.length) {\n            this.length--;\n            let res = this._array[this._shiftIndex]!;\n            // @ts-ignore\n            this._array[this._shiftIndex++] = null;\n            if (!this._array[this._shiftIndex]) {\n                this._popIndex = Math.floor(this._size * 0.5);\n                this._shiftIndex = this._popIndex;\n            }\n            return res;\n        }\n        return undefined;\n    }\n    public forEach(callback: (el: T) => void) {\n        for (let i = this._shiftIndex; i < this._popIndex; i++) {\n            callback(this._array[i]);\n        }\n    }\n}\n\nexport {QueueArray};\n","import {Vector} from \"../layer/Vector\";\nimport {EntityCollectionNode} from \"./EntityCollectionNode\";\nimport {Entity} from \"../entity/Entity\";\nimport {EntityCollection} from \"../entity/EntityCollection\";\nimport {QueueArray} from \"../QueueArray\";\n\nexport class EntityCollectionsTreeStrategy {\n\n    public _layer: Vector;\n\n    /**\n     * Maximum entities quantity in the tree node.\n     * @public\n     */\n    public _nodeCapacity: number;\n\n    public _secondPASS: EntityCollectionNode[];\n\n    protected _counter: number;\n    protected _deferredEntitiesPendingQueue: QueueArray<EntityCollectionNode>;\n\n    public _renderingNodes: Record<number, boolean>;\n\n    constructor(layer: Vector, nodeCapacity: number) {\n        this._layer = layer;\n        this._nodeCapacity = nodeCapacity;\n        this._secondPASS = [];\n\n        this._counter = 0;\n        this._deferredEntitiesPendingQueue = new QueueArray<EntityCollectionNode>();\n\n        this._renderingNodes = {};\n    }\n\n    public insertEntity(entity: Entity, rightNow: boolean = false) {\n\n    }\n\n    public setPickingEnabled(pickingEnabled: boolean) {\n\n    }\n\n    public dispose() {\n\n    }\n\n    public insertEntities(entitiesForTree: Entity[]) {\n\n    }\n\n    public collectVisibleEntityCollections(outArr: EntityCollection[]) {\n    }\n\n    public _queueDeferredNode(node: EntityCollectionNode) {\n        if (this._layer.getVisibility()) {\n            node._inTheQueue = true;\n            if (this._counter >= 1) {\n                this._deferredEntitiesPendingQueue.push(node);\n            } else {\n                this._execDeferredNode(node);\n            }\n        }\n    }\n\n    protected _execDeferredNode(node: EntityCollectionNode) {\n        this._counter++;\n        requestAnimationFrame(() => {\n            node.applyCollection();\n            this._counter--;\n            if (this._deferredEntitiesPendingQueue.length && this._counter < 1) {\n                while (this._deferredEntitiesPendingQueue.length) {\n                    let n = this._deferredEntitiesPendingQueue.pop()!;\n                    n._inTheQueue = false;\n                    if (n.isVisible()) {\n                        this._execDeferredNode(n);\n                        return;\n                    }\n                }\n            }\n        });\n    }\n}","import {EPSG3857} from \"../proj/EPSG3857\";\nimport {Layer} from \"../layer/Layer\";\nimport {Vector} from \"../layer/Vector\";\nimport {Node} from \"../quadTree/Node\";\nimport {Planet} from \"../scene/Planet\";\nimport {Proj} from \"../proj/Proj\";\nimport {LonLat} from \"../LonLat\";\nimport {getTileCellExtent, getTileCellIndex, TILEGROUP_COMMON} from \"../segment/Segment\";\nimport {Extent} from \"../Extent\";\nimport {EntityCollectionsTreeStrategy} from \"./EntityCollectionsTreeStrategy\";\n\nexport class QuadTreeStrategy {\n    public name: string;\n    public projection: Proj;\n    protected _planet: Planet;\n\n    /**\n     * grid tree list.\n     * @protected\n     * @type {Node[]}\n     */\n    protected _quadTreeList: Node[];\n\n    /**\n     * Current visible mercator segments tree nodes array.\n     * @public\n     * @type {Node}\n     */\n    public _visibleNodes: Record<number, Node>;\n\n    constructor(planet: Planet, name: string = \"\", proj: Proj = EPSG3857) {\n        this.name = name;\n        this.projection = proj;\n        this._planet = planet;\n        this._quadTreeList = [];\n        this._visibleNodes = {};\n    }\n\n    public createEntitiCollectionsTreeStrategy(layer: Vector, nodeCapacity: number): EntityCollectionsTreeStrategy {\n        return new EntityCollectionsTreeStrategy(layer, nodeCapacity);\n    }\n\n    public destroyBranches() {\n        for (let i = 0, len = this._quadTreeList.length; i < len; i++) {\n            this._quadTreeList[i].destroyBranches();\n        }\n    }\n\n    public clearLayerMaterial(layer: Layer) {\n        let lid = layer.__id;\n        for (let i = 0, len = this._quadTreeList.length; i < len; i++) {\n            this._quadTreeList[i].traverseTree(function (node: Node) {\n                let mats = node.segment.materials;\n                if (mats[lid]) {\n                    mats[lid].clear();\n                    //@ts-ignore\n                    mats[lid] = null;\n                    //delete mats[lid];\n                }\n            });\n        }\n    }\n\n    public get planet() {\n        return this._planet;\n    }\n\n    public init() {\n\n    }\n\n    public preRender() {\n        for (let i = 0; i < this._quadTreeList.length; i++) {\n\n            let quadTree = this._quadTreeList[i];\n            quadTree.createChildrenNodes();\n            quadTree.segment.createPlainSegment();\n\n            for (let j = 0; j < quadTree.nodes.length; j++) {\n                quadTree.nodes[j].segment.createPlainSegment();\n            }\n        }\n    }\n\n    public preLoad() {\n\n        for (let i = 0; i < this._quadTreeList.length; i++) {\n\n            let quadTree = this._quadTreeList[i];\n            quadTree.segment.passReady = true;\n            quadTree.renderNode(1);\n            this._planet.normalMapCreator.drawSingle(quadTree.segment);\n\n            for (let j = 0; j < quadTree.nodes.length; j++) {\n                quadTree.nodes[j].segment.passReady = true;\n                quadTree.nodes[j].renderNode(1);\n                this._planet._normalMapCreator.drawSingle(quadTree.nodes[j].segment);\n            }\n        }\n    }\n\n    protected _clearVisibleNodes() {\n        this._visibleNodes = {};\n    }\n\n    public collectRenderNodes() {\n        this._clearVisibleNodes();\n        for (let i = 0; i < this._quadTreeList.length; i++) {\n            this._quadTreeList[i].renderTree(this._planet.camera, 0, null);\n        }\n    }\n\n    public clear() {\n        for (let i = 0; i < this._quadTreeList.length; i++) {\n            this._quadTreeList[i].clearTree();\n        }\n    }\n\n    public get quadTreeList(): Node[] {\n        return this._quadTreeList;\n    }\n\n    public getTileXY(lonLat: LonLat, zoom: number): [number, number, number, number] {\n        let z = zoom,\n            x = -1,\n            y = -1,\n            pz = (1 << z);\n\n        x = getTileCellIndex(lonLat.lon, 360 / pz, -180);\n        y = getTileCellIndex(lonLat.lat, 180 / pz, 90);\n\n        return [x, y, z, TILEGROUP_COMMON];\n    }\n\n    public getLonLatTileOffset(lonLat: LonLat, x: number, y: number, z: number, gridSize: number): [number, number] {\n        let coords = lonLat;\n        let extent = new Extent();\n\n        let worldExtent = Extent.createFromArray([-180, -90, 180, 90]);\n        extent = getTileCellExtent(x, y, z, worldExtent);\n\n        let sizeImgW = extent.getWidth() / (gridSize - 1),\n            sizeImgH = extent.getHeight() / (gridSize - 1);\n\n        let i = gridSize - Math.ceil((coords.lat - extent.southWest.lat) / sizeImgH) - 1,\n            j = Math.floor((coords.lon - extent.southWest.lon) / sizeImgW);\n\n        return [i, j];\n    }\n\n    public collectVisibleNode(node: Node) {\n        this._visibleNodes[node.nodeId] = node;\n    }\n}","/**\n * @module og/proj/EPSG4326\n */\n\nimport { Proj, Units } from \"./Proj\";\n\n/**\n * EPSG:4326 projection object.\n * @type {Proj}\n */\nexport const EPSG4326 = new Proj({ code: \"epsg:4326\", units: Units.DEGREES });\n","import * as mercator from \"../mercator\";\nimport * as quadTree from \"../quadTree/quadTree\";\nimport {EPSG4326} from \"../proj/EPSG4326\";\nimport {Extent} from \"../Extent\";\nimport {Layer} from \"../layer/Layer\";\nimport {Node} from \"../quadTree/Node\";\nimport {Planet} from \"../scene/Planet\";\nimport {getTileCellIndex, Segment, TILEGROUP_NORTH, TILEGROUP_SOUTH} from \"./Segment\";\nimport {LonLat} from \"../LonLat\";\nimport {Entity} from \"../entity/Entity\";\nimport {PlanetCamera} from \"../camera/PlanetCamera\";\nimport {WebGLTextureExt} from \"../webgl/Handler\";\n\nconst MAX_POLE_ZOOM = 7;\nexport const POLE_PIECE_SIZE = (90.0 - mercator.MAX_LAT) / Math.pow(2, MAX_POLE_ZOOM);\n\n/**\n * Planet segment Web Mercator tile class that stored and rendered with quad tree.\n * @class\n * @extends {Segment}\n */\nclass SegmentLonLat extends Segment {\n    constructor(node: Node, planet: Planet, tileZoom: number, extent: Extent) {\n        super(node, planet, tileZoom, extent);\n\n        this._projection = EPSG4326;\n\n        this._extentLonLat = this._extent;\n\n        this._extentMerc = new Extent(\n            extent.southWest.forwardMercatorEPS01(),\n            extent.northEast.forwardMercatorEPS01()\n        );\n\n        this._isNorth = this._extent.northEast.lat > 0;\n\n        this.isPole = true;\n    }\n\n    public override _setExtentLonLat() {\n        this._extentLonLat = this._extent;\n    }\n\n    public override projectNative(coords: LonLat): LonLat {\n        return coords;\n    }\n\n    public override getInsideLonLat(obj: Entity | PlanetCamera): LonLat {\n        return obj._lonLat;\n    }\n\n    protected _getMaxZoom() {\n        let maxPoleZoom = 0;\n        if (this._isNorth) {\n            //north pole limits\n            let Yz = Math.floor((90.0 - this._extent.northEast.lat) / POLE_PIECE_SIZE);\n            maxPoleZoom = Math.floor(Yz / 16) + 7;\n        } else {\n            //south pole limits\n            let Yz = Math.floor((mercator.MIN_LAT - this._extent.northEast.lat) / POLE_PIECE_SIZE);\n            maxPoleZoom = 12 - Math.floor(Yz / 16);\n        }\n        return maxPoleZoom;\n    }\n\n    public override checkZoom() {\n        return super.checkZoom() && this.tileZoom <= this._getMaxZoom();\n    }\n\n    protected override _assignTileIndexes() {\n        this._assignTileXIndexes(this._extent);\n        this._assignTileYIndexes(this._extent);\n        this.tileIndex = Layer.getTileIndex(this.tileX, this.tileY, this.tileZoom, this._tileGroup);\n    }\n\n    protected _assignTileXIndexes(extent: Extent) {\n        this.tileX = getTileCellIndex(extent.getCenter().lon, extent.getWidth(), -180);\n        let p2 = 1 << this.tileZoom;\n        this.tileXE = (this.tileX + 1) % p2;\n        this.tileXW = (p2 + this.tileX - 1) % p2;\n    }\n\n    protected _assignTileYIndexes(extent: Extent) {\n        const lat = extent.getCenter().lat;//extent.northEast.lat;\n        if (lat > 0) {\n            this._tileGroup = TILEGROUP_NORTH;\n            this.tileY = getTileCellIndex(lat, extent.getHeight(), 90.0);\n        } else {\n            this._tileGroup = TILEGROUP_SOUTH;\n            this.tileY = getTileCellIndex(lat, extent.getHeight(), mercator.MIN_LAT);\n        }\n        this.tileYN = this.tileY - 1;\n        this.tileYS = this.tileY + 1;\n    }\n\n    protected override _projToDeg(lon: number, lat: number): LonLat {\n        return new LonLat(lon, lat);\n    }\n\n    protected override _assignGlobalTextureCoordinates() {\n        const e = this._extent;\n        this._globalTextureCoordinates[0] = (e.southWest.lon + 180.0) / 360.0;\n        this._globalTextureCoordinates[1] = (90 - e.northEast.lat) / 180.0;\n        this._globalTextureCoordinates[2] = (e.northEast.lon + 180.0) / 360.0;\n        this._globalTextureCoordinates[3] = (90 - e.southWest.lat) / 180.0;\n    }\n\n    /**\n     * @param layer\n     * @protected\n     *\n     * @todo simplify layer._extentMerc in layer.getNativeExtent(this)\n     *\n     */\n    protected override _getLayerExtentOffset(layer: Layer): [number, number, number, number] {\n        const v0s = layer._extent;\n        const v0t = this._extent;\n        const sSize_x = v0s.northEast.lon - v0s.southWest.lon;\n        const sSize_y = v0s.northEast.lat - v0s.southWest.lat;\n        const dV0s_x = (v0t.southWest.lon - v0s.southWest.lon) / sSize_x;\n        const dV0s_y = (v0s.northEast.lat - v0t.northEast.lat) / sSize_y;\n        const dSize_x = (v0t.northEast.lon - v0t.southWest.lon) / sSize_x;\n        const dSize_y = (v0t.northEast.lat - v0t.southWest.lat) / sSize_y;\n        return [dV0s_x, dV0s_y, dSize_x, dSize_y];\n    }\n\n    public override layerOverlap(layer: Layer): boolean {\n        return this._extent.overlaps(layer._extent);\n    }\n\n    public override getDefaultTexture(): WebGLTextureExt | null {\n        return this._isNorth ? this.planet.solidTextureOne : this.planet.solidTextureTwo;\n    }\n\n    public override getExtentLonLat(): Extent {\n        return this._extent;\n    }\n\n}\n\nexport {SegmentLonLat};\n","import * as mercator from '../mercator';\nimport {NW, NE, SW, SE, RENDERING, VISIBLE_DISTANCE} from './quadTree';\nimport {EntityCollection} from '../entity/EntityCollection';\nimport {Extent} from '../Extent';\nimport {LonLat} from '../LonLat';\nimport {Node} from \"../quadTree/Node\";\nimport {Planet} from \"../scene/Planet\";\nimport {Sphere} from '../bv/Sphere';\nimport {Segment} from \"../segment/Segment\";\nimport {Vec3} from '../math/Vec3';\nimport {Vector} from \"../layer/Vector\";\nimport {Entity} from \"../entity/Entity\";\nimport {EntityCollectionsTreeStrategy} from \"./EntityCollectionsTreeStrategy\";\n\n\nexport type NodesDict = Record<number, Node>;\n\n/**\n * @todo: remove planet parameter. It's already available in the layer.\n */\nclass EntityCollectionNode {\n\n    public layer: Vector;\n    public strategy: EntityCollectionsTreeStrategy\n    public parentNode: EntityCollectionNode | null;\n    public childrenNodes: EntityCollectionNode[];\n    public partId: number;\n    public nodeId: number;\n    public state: number | null;\n    public extent: Extent;\n    public count: number;\n    public deferredEntities: Entity[];\n    public entityCollection: EntityCollection | null;\n    public zoom: number;\n    public bsphere: Sphere;\n\n    public _inTheQueue: boolean;\n\n    constructor(strategy: EntityCollectionsTreeStrategy, partId: number, parent: EntityCollectionNode | null, extent: Extent, planet: Planet, zoom: number) {\n        this.strategy = strategy;\n        this.layer = strategy._layer;\n        this.parentNode = parent;\n        this.childrenNodes = [];\n        this.partId = partId;\n        //this.nodeId = partId + id;\n        this.nodeId = partId + (parent ? parent.nodeId * 4 + 1 : 0);\n        this.state = null;\n        this.extent = extent;\n        this.count = 0;\n        this.deferredEntities = [];\n        this.entityCollection = null;\n        this.zoom = zoom;\n        this._inTheQueue = false;\n\n        this.bsphere = new Sphere();\n\n        planet && this._setExtentBounds();\n    }\n\n    public insertEntity(entity: Entity, rightNow: boolean = false) {\n        this.buildTree([entity], rightNow);\n    }\n\n    protected _addEntitiesToCollection(entities: Entity[], rightNow: boolean = false) {\n        if (entities.length) {\n            const l = this.layer;\n            const p = l._planet!;\n\n            let ec = this.entityCollection;\n\n            if (!ec) {\n                ec = new EntityCollection({\n                    pickingEnabled: l._pickingEnabled,\n                    labelMaxLetters: l.labelMaxLetters\n                });\n                ec._layer = this.layer;\n                ec.addTo(p, true);\n                ec._quadNode = this;\n                l._bindEventsDefault(ec);\n                this.entityCollection = ec;\n            }\n\n            if (rightNow || !l.async) {\n                this.entityCollection!.addEntities(entities);\n            } else {\n                this.deferredEntities.push.apply(this.deferredEntities, entities);\n            }\n        }\n    }\n\n    protected _setExtentBounds() {\n        if (!this.nodeId) {\n            this.bsphere.radius = this.layer._planet!.ellipsoid.equatorialSize;\n            this.bsphere.center = new Vec3();\n        } else {\n            this.bsphere.setFromExtent(this.layer._planet!.ellipsoid, this.extent.inverseMercator());\n        }\n    }\n\n    public __setLonLat__(entity: Entity): LonLat {\n\n        if (entity._lonLat.isZero() && !entity._cartesian.isZero()) {\n            entity._lonLat = this.layer._planet!.ellipsoid.cartesianToLonLat(entity._cartesian);\n        }\n\n        if (Math.abs(entity._lonLat.lat) < mercator.MAX_LAT) {\n            entity._lonLatMerc = entity._lonLat.forwardMercator();\n        } else {\n            entity._lonLatMerc = new LonLat();\n        }\n        return entity._lonLatMerc;\n    }\n\n    public buildTree(entities: Entity[], rightNow: boolean = false) {\n\n        this.count += entities.length;\n\n        if (entities.length > this.layer._nodeCapacity) {\n            const cn = this.childrenNodes;\n            if (!cn.length) {\n                this.createChildrenNodes();\n            }\n\n            let en_nw = [],\n                en_ne = [],\n                en_sw = [],\n                en_se = [];\n\n            let i = entities.length;\n            while (i--) {\n                const ei = entities[i];\n                if (cn[NW].isInside(ei)) {\n                    ei._nodePtr = cn[NW];\n                    en_nw.push(ei);\n                } else if (cn[NE].isInside(ei)) {\n                    ei._nodePtr = cn[NE];\n                    en_ne.push(ei);\n                } else if (cn[SW].isInside(ei)) {\n                    ei._nodePtr = cn[SW];\n                    en_sw.push(ei);\n                } else if (cn[SE].isInside(ei)) {\n                    ei._nodePtr = cn[SE];\n                    en_se.push(ei);\n                }\n            }\n\n            en_nw.length && cn[NW].buildTree(en_nw, rightNow);\n            en_ne.length && cn[NE].buildTree(en_ne, rightNow);\n            en_sw.length && cn[SW].buildTree(en_sw, rightNow);\n            en_se.length && cn[SE].buildTree(en_se, rightNow);\n\n        } else {\n            this._addEntitiesToCollection(entities, rightNow);\n        }\n    }\n\n    public isInside(entity: Entity): boolean {\n        if (entity._lonLatMerc) {\n            return this.extent.isInside(entity._lonLatMerc);\n        } else {\n            return false;\n        }\n    }\n\n    public createChildrenNodes() {\n        const s = this.strategy;\n        const ext = this.extent;\n        const size_x = ext.getWidth() * 0.5;\n        const size_y = ext.getHeight() * 0.5;\n        const ne = ext.northEast;\n        const sw = ext.southWest;\n        const c = new LonLat(sw.lon + size_x, sw.lat + size_y);\n        const nd = this.childrenNodes;\n        const p = this.layer._planet!;\n        const z = this.zoom + 1;\n\n        nd[NW] = new EntityCollectionNode(s, NW, this, new Extent(new LonLat(sw.lon, sw.lat + size_y), new LonLat(sw.lon + size_x, ne.lat)), p, z);\n        nd[NE] = new EntityCollectionNode(s, NE, this, new Extent(c, new LonLat(ne.lon, ne.lat)), p, z);\n        nd[SW] = new EntityCollectionNode(s, SW, this, new Extent(new LonLat(sw.lon, sw.lat), c), p, z);\n        nd[SE] = new EntityCollectionNode(s, SE, this, new Extent(new LonLat(sw.lon + size_x, sw.lat), new LonLat(ne.lon, sw.lat + size_y)), p, z);\n    }\n\n    public collectRenderCollectionsPASS1(visibleNodes: NodesDict, outArr: EntityCollection[]) {\n        const n = visibleNodes[this.nodeId];\n        if (n) {\n            const cn = this.childrenNodes;\n            if (this.entityCollection) {\n                this.renderCollection(outArr, visibleNodes);\n            } else if (cn.length) {\n                if (n.state === RENDERING) {\n                    this.strategy._secondPASS.push(this);\n                } else {\n                    cn[NW].collectRenderCollectionsPASS1(visibleNodes, outArr);\n                    cn[NE].collectRenderCollectionsPASS1(visibleNodes, outArr);\n                    cn[SW].collectRenderCollectionsPASS1(visibleNodes, outArr);\n                    cn[SE].collectRenderCollectionsPASS1(visibleNodes, outArr);\n                }\n            }\n        }\n    }\n\n    public collectRenderCollectionsPASS2(visibleNodes: NodesDict, outArr: EntityCollection[], renderingNodeId: number) {\n        const p = this.layer._planet!;\n        const cam = p.camera;\n\n        const altVis = (cam.eye.distance(this.bsphere.center) - this.bsphere.radius <\n            VISIBLE_DISTANCE * Math.sqrt(cam._lonLat.height)) || cam._lonLat.height > 10000;\n\n        if (this.count > 0 && altVis && cam.containsSphere(this.bsphere)) {\n\n            const cn = this.childrenNodes;\n\n            if (this.entityCollection) {\n                this.renderCollection(outArr, visibleNodes, renderingNodeId);\n            } else if (cn.length) {\n                cn[NW].collectRenderCollectionsPASS2(visibleNodes, outArr, renderingNodeId);\n                cn[NE].collectRenderCollectionsPASS2(visibleNodes, outArr, renderingNodeId);\n                cn[SW].collectRenderCollectionsPASS2(visibleNodes, outArr, renderingNodeId);\n                cn[SE].collectRenderCollectionsPASS2(visibleNodes, outArr, renderingNodeId);\n            }\n        }\n    }\n\n    public applyCollection() {\n        this.entityCollection!.addEntities(this.deferredEntities);\n        this.deferredEntities.length = 0;\n        this.deferredEntities = [];\n        this._inTheQueue = false;\n    }\n\n    public traverseTree(callback: Function) {\n\n        const cn = this.childrenNodes;\n\n        if (this.entityCollection) {\n            callback(this);\n        } else if (cn.length) {\n            cn[NW].traverseTree(callback);\n            cn[NE].traverseTree(callback);\n            cn[SW].traverseTree(callback);\n            cn[SE].traverseTree(callback);\n        }\n    }\n\n    public renderCollection(outArr: EntityCollection[], visibleNodes: NodesDict, renderingNodeId?: number) {\n\n        const s = this.strategy;\n\n        s._renderingNodes[this.nodeId] = true;\n\n        if (this.deferredEntities.length && !this._inTheQueue) {\n            if (this.layer.async) {\n                s._queueDeferredNode(this);\n            } else {\n                this.applyCollection();\n            }\n        }\n\n        let ec = this.entityCollection!;\n        let l = this.layer;\n\n        ec._fadingOpacity = l._fadingOpacity;\n        ec.scaleByDistance = l.scaleByDistance;\n        ec.pickingScale = l.pickingScale;\n        ec.polygonOffsetUnits = l.polygonOffsetUnits;\n\n        outArr.push(ec);\n\n        if (l.clampToGround || l.relativeToGround) {\n            const e = ec._entities;\n            let i = e.length;\n\n            if (visibleNodes[this.nodeId] && visibleNodes[this.nodeId].state === RENDERING) {\n                while (i--) {\n                    let ei = e[i];\n                    this.alignEntityToTheGround(ei, visibleNodes[this.nodeId].segment);\n                }\n            } else if (renderingNodeId) {\n                while (i--) {\n                    let ei = e[i];\n                    this.alignEntityToTheGround(ei, visibleNodes[renderingNodeId].segment);\n                }\n            } else {\n                const n = l._planet!._renderedNodes;\n                while (i--) {\n                    let ei = e[i];\n                    let j = n.length;\n                    while (j--) {\n                        if (n[j].segment.isEntityInside(ei)) {\n                            this.alignEntityToTheGround(ei, n[j].segment);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    public alignEntityToTheGround(entity: Entity, segment: Segment) {\n        let res = new Vec3();\n        segment.getEntityTerrainPoint(entity, res);\n        let alt = (Number(this.layer.relativeToGround) && entity._altitude) || 0.0;\n        if (alt) {\n            let n = this.layer._planet!.ellipsoid.getSurfaceNormal3v(res);\n            entity._setCartesian3vSilent(res.addA(n.scale(alt)));\n        } else {\n            entity._setCartesian3vSilent(res);\n        }\n    }\n\n    public isVisible(): boolean {\n        if (this.strategy._renderingNodes[this.nodeId]) {\n            return true;\n        }\n        return false;\n    }\n}\n\nexport {EntityCollectionNode}\n","import {EarthEntityCollectionsTreeStrategy} from \"./EarthEntityCollectionsTreeStrategy\";\nimport {Extent} from \"../../Extent\";\nimport {Planet} from \"../../scene/Planet\";\nimport {LonLat} from \"../../LonLat\";\nimport {NE, NW, SE, SW} from \"../quadTree\";\nimport {Entity} from \"../../entity/Entity\";\nimport {EntityCollection} from \"../../entity/EntityCollection\";\nimport {EntityCollectionNode, NodesDict} from \"../EntityCollectionNode\";\n\nexport class EarthEntityCollectionNodeLonLat extends EntityCollectionNode {\n\n    public isNorth: boolean;\n\n    public override strategy: EarthEntityCollectionsTreeStrategy;\n\n    constructor(strategy: EarthEntityCollectionsTreeStrategy, partId: number, parent: EarthEntityCollectionNodeLonLat | null, extent: Extent, planet: Planet, zoom: number) {\n        super(strategy, partId, parent, extent, planet, zoom);\n        this.strategy = strategy;\n        this.isNorth = false;\n    }\n\n    public override createChildrenNodes() {\n        const s = this.strategy;\n        const ext = this.extent;\n        const size_x = ext.getWidth() * 0.5;\n        const size_y = ext.getHeight() * 0.5;\n        const ne = ext.northEast;\n        const sw = ext.southWest;\n        const c = new LonLat(sw.lon + size_x, sw.lat + size_y);\n        const nd = this.childrenNodes;\n        const p = this.layer._planet!;\n        const z = this.zoom + 1;\n\n        nd[NW] = new EarthEntityCollectionNodeLonLat(s, NW, this, new Extent(new LonLat(sw.lon, sw.lat + size_y), new LonLat(sw.lon + size_x, ne.lat)), p, z);\n        nd[NE] = new EarthEntityCollectionNodeLonLat(s, NE, this, new Extent(c, new LonLat(ne.lon, ne.lat)), p, z);\n        nd[SW] = new EarthEntityCollectionNodeLonLat(s, SW, this, new Extent(new LonLat(sw.lon, sw.lat), c), p, z);\n        nd[SE] = new EarthEntityCollectionNodeLonLat(s, SE, this, new Extent(new LonLat(sw.lon + size_x, sw.lat), new LonLat(ne.lon, sw.lat + size_y)), p, z);\n    }\n\n    protected override _setExtentBounds() {\n        if (this.extent.northEast.lat > 0) {\n            this.isNorth = true;\n        }\n        this.bsphere.setFromExtent(this.layer._planet!.ellipsoid, this.extent);\n    }\n\n    public override __setLonLat__(entity: Entity): LonLat {\n        if (entity._lonLat.isZero()) {\n            entity._lonLat = this.layer._planet!.ellipsoid.cartesianToLonLat(entity._cartesian);\n        }\n        return entity._lonLat;\n    }\n\n    public override isVisible(): boolean {\n        if (this.isNorth && this.strategy._renderingNodesNorth[this.nodeId]) {\n            return true;\n        } else if (this.strategy._renderingNodesSouth[this.nodeId]) {\n            return true;\n        }\n        return false;\n    }\n\n    public override isInside(entity: Entity): boolean {\n        return this.extent.isInside(entity._lonLat);\n    }\n\n    public override renderCollection(outArr: EntityCollection[], visibleNodes: NodesDict, renderingNode: number) {\n\n        if (this.isNorth) {\n            this.strategy._renderingNodesNorth[this.nodeId] = true;\n        } else {\n            this.strategy._renderingNodesSouth[this.nodeId] = true;\n        }\n\n        if (this.deferredEntities.length && !this._inTheQueue) {\n            if (this.layer.async) {\n                this.strategy._queueDeferredNode(this);\n            } else {\n                this.applyCollection();\n            }\n        }\n\n        const ec = this.entityCollection!;\n\n        ec._fadingOpacity = this.layer._fadingOpacity;\n        ec.scaleByDistance = this.layer.scaleByDistance;\n        ec.pickingScale = this.layer.pickingScale;\n\n        if (!ec.isEmpty()) {\n            outArr.push(ec);\n        }\n    }\n}\n","import {EntityCollectionNode} from \"../EntityCollectionNode\";\nimport {EarthEntityCollectionNodeLonLat} from \"./EarthEntityCollectionNodeLonLat\";\nimport {Vector} from \"../../layer/Vector\";\nimport * as quadTree from \"../quadTree\";\nimport {Extent} from \"../../Extent\";\nimport * as mercator from \"../../mercator\";\nimport {Entity} from \"../../entity/Entity\";\nimport {EntityCollection} from \"../../entity/EntityCollection\";\nimport {EarthQuadTreeStrategy} from \"./EarthQuadTreeStrategy\";\nimport {EntityCollectionsTreeStrategy} from \"../EntityCollectionsTreeStrategy\";\n\nexport class EarthEntityCollectionsTreeStrategy extends EntityCollectionsTreeStrategy {\n\n    protected _entityCollectionsTree: EntityCollectionNode;\n    protected _entityCollectionsTreeNorth: EarthEntityCollectionNodeLonLat;\n    protected _entityCollectionsTreeSouth: EarthEntityCollectionNodeLonLat;\n\n    public _renderingNodesNorth: Record<number, boolean>;\n    public _renderingNodesSouth: Record<number, boolean>;\n\n    constructor(layer: Vector, nodeCapacity: number) {\n        super(layer, nodeCapacity);\n\n        let planet = layer._planet!;\n\n        this._entityCollectionsTree = new EntityCollectionNode(\n            this,\n            quadTree.NW,\n            null,\n            Extent.createFromArray([-20037508.34, -20037508.34, 20037508.34, 20037508.34]),\n            planet,\n            0\n        );\n\n        this._entityCollectionsTreeNorth = new EarthEntityCollectionNodeLonLat(\n            this,\n            quadTree.NW,\n            null,\n            Extent.createFromArray([-180, mercator.MAX_LAT, 180, 90]),\n            planet,\n            0\n        );\n\n        this._entityCollectionsTreeSouth = new EarthEntityCollectionNodeLonLat(\n            this,\n            quadTree.NW,\n            null,\n            Extent.createFromArray([-180, -90, 180, mercator.MIN_LAT]),\n            planet,\n            0\n        );\n\n        this._renderingNodes = {};\n        this._renderingNodesNorth = {};\n        this._renderingNodesSouth = {};\n    }\n\n    public override insertEntity(entity: Entity, rightNow: boolean = false) {\n        if (entity._lonLat.lat > mercator.MAX_LAT) {\n            this._entityCollectionsTreeNorth!.__setLonLat__(entity);\n            this._entityCollectionsTreeNorth!.insertEntity(entity, rightNow);\n        } else if (entity._lonLat.lat < mercator.MIN_LAT) {\n            this._entityCollectionsTreeSouth!.__setLonLat__(entity);\n            this._entityCollectionsTreeSouth!.insertEntity(entity, rightNow);\n        } else {\n            this._entityCollectionsTree!.__setLonLat__(entity);\n            this._entityCollectionsTree!.insertEntity(entity, rightNow);\n        }\n    }\n\n    public override setPickingEnabled(pickingEnabled: boolean) {\n        this._entityCollectionsTree && this._entityCollectionsTree.traverseTree((node: EntityCollectionNode) => {\n            node.entityCollection!.setPickingEnabled(pickingEnabled);\n        });\n\n        this._entityCollectionsTreeNorth && this._entityCollectionsTreeNorth.traverseTree((node: EarthEntityCollectionNodeLonLat) => {\n            node.entityCollection!.setPickingEnabled(pickingEnabled);\n        });\n\n        this._entityCollectionsTreeSouth && this._entityCollectionsTreeSouth.traverseTree((node: EarthEntityCollectionNodeLonLat) => {\n            node.entityCollection!.setPickingEnabled(pickingEnabled);\n        });\n    }\n\n    public override dispose() {\n        //@ts-ignore\n        this._entityCollectionsTree = null;\n        //@ts-ignore\n        this._entityCollectionsTreeNorth = null;\n        //@ts-ignore\n        this._entityCollectionsTreeSouth = null;\n\n        this._renderingNodes = {};\n        this._renderingNodesNorth = {};\n        this._renderingNodesSouth = {};\n    }\n\n    public override insertEntities(entitiesForTree: Entity[]) {\n        let northEntities: Entity[] = [],\n            southEntities: Entity[] = [],\n            mercEntities: Entity[] = [];\n        for (let i = 0, len = entitiesForTree.length; i < len; i++) {\n            let entity = entitiesForTree[i];\n            // north tree\n            if (entity._lonLat.lat > mercator.MAX_LAT) {\n                northEntities.push(entity);\n                this._entityCollectionsTreeNorth.__setLonLat__(entity);\n            } else if (entity._lonLat.lat < mercator.MIN_LAT) {\n                southEntities.push(entity);\n                this._entityCollectionsTreeSouth.__setLonLat__(entity);\n            } else {\n                mercEntities.push(entity);\n                this._entityCollectionsTree.__setLonLat__(entity);\n            }\n        }\n\n        this._entityCollectionsTree.buildTree(mercEntities);\n        this._entityCollectionsTreeNorth.buildTree(northEntities);\n        this._entityCollectionsTreeSouth.buildTree(southEntities);\n    }\n\n    public override collectVisibleEntityCollections(outArr: EntityCollection[]) {\n        this._renderingNodes = {};\n        this._renderingNodesNorth = {};\n        this._renderingNodesSouth = {};\n\n        let pqs = this._layer._planet!.quadTreeStrategy as EarthQuadTreeStrategy;\n\n        // Merc nodes\n        this._secondPASS = [];\n        this._entityCollectionsTree.collectRenderCollectionsPASS1(pqs._visibleNodes, outArr);\n        let i = this._secondPASS.length;\n        while (i--) {\n            this._secondPASS[i].collectRenderCollectionsPASS2(pqs._visibleNodes, outArr, this._secondPASS[i].nodeId);\n        }\n\n        // North nodes\n        this._secondPASS = [];\n        this._entityCollectionsTreeNorth.collectRenderCollectionsPASS1(pqs._visibleNodesNorth, outArr);\n        i = this._secondPASS.length;\n        while (i--) {\n            this._secondPASS[i].collectRenderCollectionsPASS2(pqs._visibleNodesNorth, outArr, this._secondPASS[i].nodeId);\n        }\n\n        // South nodes\n        this._secondPASS = [];\n        this._entityCollectionsTreeSouth.collectRenderCollectionsPASS1(pqs._visibleNodesSouth, outArr);\n        i = this._secondPASS.length;\n        while (i--) {\n            this._secondPASS[i].collectRenderCollectionsPASS2(pqs._visibleNodesSouth, outArr, this._secondPASS[i].nodeId);\n        }\n    }\n}","import * as mercator from \"../../mercator\";\nimport {Extent} from \"../../Extent\";\nimport {Node} from \"../Node\";\nimport {Planet} from \"../../scene/Planet\";\nimport {QuadTreeStrategy} from \"../QuadTreeStrategy\";\nimport {\n    Segment,\n    TILEGROUP_NORTH,\n    TILEGROUP_SOUTH,\n    getTileGroupByLat,\n    getTileCellExtent,\n    getTileCellIndex\n} from \"../../segment/Segment\";\nimport {SegmentLonLat} from \"../../segment/SegmentLonLat\";\nimport {LonLat} from \"../../LonLat\";\nimport {Vector} from \"../../layer/Vector\";\nimport {EarthEntityCollectionsTreeStrategy} from \"./EarthEntityCollectionsTreeStrategy\";\n\nexport class EarthQuadTreeStrategy extends QuadTreeStrategy {\n\n    /**\n     * Current visible north pole nodes tree nodes array.\n     * @public\n     * @type {Node}\n     * @todo\n     */\n    public _visibleNodesNorth: Record<number, Node>;\n\n    /**\n     * Current visible south pole nodes tree nodes array.\n     * @public\n     * @type {Node}\n     * @todo\n     */\n    public _visibleNodesSouth: Record<number, Node>;\n\n    constructor(planet: Planet) {\n        super(planet, \"Earth\");\n\n        this._visibleNodesNorth = {};\n        this._visibleNodesSouth = {};\n    }\n\n    public override collectVisibleNode(node: Node) {\n        let tg = node.segment._tileGroup;\n        if (tg === TILEGROUP_NORTH) {\n            this._visibleNodesNorth[node.nodeId] = node;\n        } else if (tg === TILEGROUP_SOUTH) {\n            this._visibleNodesSouth[node.nodeId] = node;\n        } else {\n            this._visibleNodes[node.nodeId] = node;\n        }\n    }\n\n    protected override _clearVisibleNodes() {\n        super._clearVisibleNodes();\n        this._visibleNodesNorth = {};\n        this._visibleNodesSouth = {};\n    }\n\n    public override createEntitiCollectionsTreeStrategy(layer: Vector, nodeCapacity: number): EarthEntityCollectionsTreeStrategy {\n        return new EarthEntityCollectionsTreeStrategy(layer, nodeCapacity);\n    }\n\n    public override init() {\n        this._quadTreeList = [\n            new Node(Segment, this.planet, 0, null, 0,\n                Extent.createFromArray([-20037508.34, -20037508.34, 20037508.34, 20037508.34])\n            ),\n            new Node(SegmentLonLat, this.planet, 0, null, 0,\n                Extent.createFromArray([-180, mercator.MAX_LAT, 180, 90])\n            ),\n            new Node(SegmentLonLat, this.planet, 0, null, 0,\n                Extent.createFromArray([-180, -90, 180, mercator.MIN_LAT])\n            )\n        ];\n    }\n\n    public override getTileXY(lonLat: LonLat, zoom: number): [number, number, number, number] {\n        let tileGroup = getTileGroupByLat(lonLat.lat, mercator.MAX_LAT),\n            z = zoom,\n            x = -1,\n            y = -1,\n            pz = (1 << z)/*Math.pow(2, z)*/;\n\n        if (tileGroup === TILEGROUP_NORTH) {\n            x = getTileCellIndex(lonLat.lon, 360 / pz, -180);\n            y = getTileCellIndex(lonLat.lat, (90 - mercator.MAX_LAT) / pz, 90);\n        } else if (tileGroup === TILEGROUP_SOUTH) {\n            x = getTileCellIndex(lonLat.lon, 360 / pz, -180);\n            y = getTileCellIndex(lonLat.lat, (90 - mercator.MAX_LAT) / pz, mercator.MIN_LAT);\n        } else {\n            let merc = mercator.forward(lonLat);\n            x = getTileCellIndex(merc.lon, mercator.POLE2 / pz, -mercator.POLE);\n            y = getTileCellIndex(merc.lat, mercator.POLE2 / pz, mercator.POLE);\n        }\n\n        return [x, y, z, tileGroup];\n    }\n\n    public override getLonLatTileOffset(lonLat: LonLat, x: number, y: number, z: number, gridSize: number): [number, number] {\n        let coords = lonLat;\n        let extent = new Extent();\n\n        if (lonLat.lat > mercator.MAX_LAT) {\n            let worldExtent = Extent.createFromArray([-180, mercator.MAX_LAT, 180, 90]);\n            extent = getTileCellExtent(x, y, z, worldExtent);\n        } else if (lonLat.lat < mercator.MIN_LAT) {\n            let worldExtent = Extent.createFromArray([-180, -90, 180, mercator.MIN_LAT]);\n            extent = getTileCellExtent(x, y, z, worldExtent);\n        } else {\n            coords = mercator.forward(lonLat);\n            extent = mercator.getTileExtent(x, y, z);\n        }\n\n        let sizeImgW = extent.getWidth() / (gridSize - 1),\n            sizeImgH = extent.getHeight() / (gridSize - 1);\n\n        let i = gridSize - Math.ceil((coords.lat - extent.southWest.lat) / sizeImgH) - 1,\n            j = Math.floor((coords.lon - extent.southWest.lon) / sizeImgW);\n\n        return [i, j];\n    }\n}","/* This file is mostly a straight translation of\n * GeographicLib/src/Geoid.cpp from C++ to JavaScript\n * by Kim Vandry <vandry@TZoNE.ORG>\n *\n * @license\n *  **\n * * \\file Geoid.cpp\n * * \\brief Implementation for GeographicLib::Geoid class\n * *\n * * Copyright (c) Charles Karney (2009) <charles@karney.com>\n * * and licensed under the LGPL.  For more information, see\n * * http://geographiclib.sourceforge.net/\n * **********************************************************************\n *\n * Geoid height grade not supported\n * The files can be downloaded from here:\n * http://geographiclib.sourceforge.net/1.18/geoid.html\n */\n\n//window.myGeoid = new Geoid();\n\n//Geoid.loadModel(\"./res/egm84-30.pgm\")\n//    .then(function (model) {\n//        myGeoid.setModel(model);\n\n//        globe.planet.renderer.events.on(\"lclick\", (e) => {\n//            let c = globe.planet.getLonLatFromPixelTerrain(e);\n//            let h = myGeoid.getHeight(c.lon, c.lat);\n//            console.log(`${c.lat} ${c.lon} h=${h}`);\n//        });\n//    })\n//    .catch(function (err) {\n//        // If we get here, the model failed to load\n//        console.log(err);\n//    });\n\nimport {LonLat} from \"../LonLat\";\n\ninterface IGeoidParams {\n    model?: GeoidModel;\n    src?: string | null;\n}\n\n\nexport type GeoidModel = {\n    scale: number;\n    offset: number,\n    width: number;\n    height: number;\n    rlonres: number;\n    rlatres: number;\n    i: number;\n    rawfile: Uint8Array\n};\n\nclass Geoid {\n\n    public model: GeoidModel | null;\n    public src: string | null;\n\n    protected _cached_ix: number;\n    protected _cached_iy: number;\n    protected _v00: number;\n    protected _v01: number;\n    protected _v10: number;\n    protected _v11: number;\n    protected _t: number;\n\n    constructor(options: IGeoidParams = {}) {\n\n        this.model = options.model || null;\n        this.src = options.src || null;\n\n        this._cached_ix = 0;\n        this._cached_iy = 0;\n        this._v00 = 0;\n        this._v01 = 0;\n        this._v10 = 0;\n        this._v11 = 0;\n        this._t = 0;\n    }\n\n    static loadModel(url?: string | null): Promise<GeoidModel | null> {\n        if (!url) {\n            return new Promise((resolve: any) => {\n                resolve(null);\n            });\n        } else\n            return fetch(url, {})\n\n                .then((r: Response) => {\n                    if (!r.ok) {\n                        throw Error(\"Geoid model file: HTTP error \" + r.status);\n                    }\n                    return r.arrayBuffer();\n                })\n\n                .then((r: ArrayBuffer) => {\n                    if (r) {\n                        return new Uint8Array(r);\n                    } else {\n                        throw Error(\"Geoid model file: no data from \" + url);\n                    }\n                })\n\n                .then(function (rawfile: Uint8Array) {\n\n                    if (!((rawfile[0] === 80) && (rawfile[1] === 53) && (\n                        ((rawfile[2] === 13) && (rawfile[3] === 10)) ||\n                        (rawfile[2] === 10)\n                    ))) {\n                        throw new Error(\"Geoid model file: no PGM header\");\n                    }\n\n                    var i: number = (rawfile[2] === 13) ? 4 : 3;\n                    var offset: number | null = null;\n                    var scale: number | null = null;\n\n                    function getline(): string {\n                        let start = i;\n                        for (var j = i; ; j++) {\n                            if (j >= rawfile.length) {\n                                throw new Error(\"Geoid model file: missing newline in header\");\n                            }\n                            if (rawfile[j] === 10) {\n                                i = j + 1;\n                                break;\n                            }\n                        }\n                        if ((j > start) && (rawfile[j - 1] === 13)) j--;\n                        return String.fromCharCode.apply(null, rawfile.slice(start, j) as any);\n                    }\n\n                    var m, s;\n                    for (; ;) {\n                        s = getline();\n                        if (s[0] !== '#') break;\n                        m = s.match(/^# Offset (.*)$/);\n                        if (m) {\n                            offset = parseInt(m[1], 10);\n                            if (!isFinite(offset)) {\n                                throw new Error(\"Geoid model file: bad offset \" + m[1]);\n                            }\n                        } else {\n                            m = s.match(/^# Scale (.*)$/);\n                            if (m) {\n                                scale = parseFloat(m[1]);\n                                if (!isFinite(scale)) {\n                                    throw new Error(\"Geoid model file: bad scale \" + m[1]);\n                                }\n                            }\n                        }\n                    }\n\n                    m = s.match(/^\\s*(\\d+)\\s+(\\d+)\\s*$/);\n\n                    let width: number = 0;\n                    let height: number = 0;\n\n                    if (m) {\n                        width = parseInt(m[1], 10);\n                        height = parseInt(m[2], 10);\n                    }\n\n                    if (!(m && (width >= 0) && (height >= 0))) {\n                        throw new Error(\"Geoid model file: bad PGM width&height line\");\n                    }\n\n                    let levels = parseInt(getline());\n\n                    if (levels != 65535) {\n                        throw new Error(\"Geoid model file: PGM file must have 65535 gray levels\");\n                    }\n                    if (offset === null) {\n                        throw new Error(\"Geoid model file: PGM file does not contain offset\");\n                    }\n                    if (scale === null) {\n                        throw new Error(\"Geoid model file: PGM file does not contain scale\");\n                    }\n                    if ((width < 2) || (height < 2)) {\n                        throw new Error(\"Geoid model file: Raster size too small\");\n                    }\n\n                    let payload_len = rawfile.length - i;\n\n                    if (payload_len !== (width * height * 2)) {\n                        throw new Error(\"Geoid model file: File has the wrong length\");\n                    }\n\n                    return {\n                        scale: scale,\n                        offset: offset,\n                        width: width,\n                        height: height,\n                        rlonres: width / 360,\n                        rlatres: (height - 1) / 180,\n                        i: i,\n                        rawfile: rawfile\n                    };\n                });\n    }\n\n    setModel(model: GeoidModel | null) {\n        this.model = model;\n    }\n\n    protected _rawval(ix: number, iy: number): number {\n        let model = this.model!;\n\n        if (iy < 0) {\n            iy = -iy;\n            ix += model.width / 2;\n        } else if (iy >= model.height) {\n            iy = 2 * (model.height - 1) - iy;\n            ix += model.width / 2;\n        }\n\n        if (ix < 0) {\n            ix += model.width;\n        } else if (ix >= model.width) {\n            ix -= model.width;\n        }\n\n        let k = (iy * model.width + ix) * 2 + model.i;\n\n        return (model.rawfile[k] << 8) | model.rawfile[k + 1];\n    }\n\n    public getHeightLonLat(lonlat: LonLat): number {\n        return this.getHeight(lonlat.lon, lonlat.lat);\n    }\n\n    public getHeight(lon: number, lat: number): number {\n\n        if (!this.model) return 0;\n\n        let model = this.model;\n\n        if (lon < 0) lon += 360.0;\n\n        let fy = (90 - lat) * model.rlatres;\n        let fx = lon * model.rlonres;\n        let iy = Math.floor(fy);\n        let ix = Math.floor(fx);\n\n        fx -= ix;\n        fy -= iy;\n\n        if (iy === (model.height - 1)) {\n            iy--;\n        }\n\n        if ((this._cached_ix !== ix) || (this._cached_iy !== iy)) {\n\n            this._cached_ix = ix;\n            this._cached_iy = iy;\n\n            this._v00 = this._rawval(ix, iy);\n            this._v01 = this._rawval(ix + 1, iy);\n            this._v10 = this._rawval(ix, iy + 1);\n            this._v11 = this._rawval(ix + 1, iy + 1);\n        }\n\n        let a = (1 - fx) * this._v00 + fx * this._v01;\n        let b = (1 - fx) * this._v10 + fx * this._v11;\n\n        let h = (1 - fy) * a + fy * b;\n\n        return model.offset + model.scale * h;\n    }\n}\n\nexport {Geoid};","import * as utils from '../utils/shared';\nimport {BaseGeoImage} from \"../layer/BaseGeoImage\";\nimport {Framebuffer} from '../webgl/Framebuffer';\nimport {LonLat} from '../LonLat';\nimport {Program} from '../webgl/Program';\nimport {Planet} from \"../scene/Planet\";\nimport {doubleToTwoFloats2} from \"../math/coder\";\nimport {WebGLBufferExt, WebGLTextureExt} from \"../webgl/Handler\";\n\nexport class GeoImageCreator {\n\n    public MAX_FRAMES: number;\n\n    protected _gridSize: number;\n    protected _planet: Planet;\n    public _framebuffer: Framebuffer | null;\n    protected _framebufferMercProj: Framebuffer | null;\n    public _texCoordsBuffer: WebGLBufferExt | null;\n    public _indexBuffer: WebGLBufferExt | null;\n    protected _currentFrame: number;\n    protected _queue: BaseGeoImage[];\n    protected _animate: BaseGeoImage[];\n    protected _quadTexCoordsBuffer: WebGLBufferExt | null;\n    protected _quadVertexBuffer: WebGLTextureExt | null;\n\n    constructor(planet: Planet, maxFrames: number = 5) {\n        this.MAX_FRAMES = maxFrames;\n        this._gridSize = 64;\n        this._planet = planet;\n        this._framebuffer = null;\n        this._framebufferMercProj = null;\n        this._texCoordsBuffer = null;\n        this._indexBuffer = null;\n        this._currentFrame = 0;\n        this._queue = [];\n        this._animate = [];\n        this._quadTexCoordsBuffer = null;\n        this._quadVertexBuffer = null;\n    }\n\n    public init() {\n        this._initShaders();\n        this._initBuffers();\n    }\n\n    /**\n     * Creates geoImage corners coordinates grid buffer.\n     * @public\n     * @param{Array.<LonLat>} c - GeoImage corners coordinates.\n     * @param{boolean} [toMerc=false] - Transform to web mercator.\n     * @return{WebGLBuffer} Grid coordinates buffer.\n     */\n    public createGridBuffer(c: LonLat[], toMerc: boolean = false): [WebGLBufferExt, WebGLBufferExt] {\n        let gs = this._gridSize;\n\n        let v03 = new LonLat((c[3].lon - c[0].lon) / gs, (c[3].lat - c[0].lat) / gs),\n            v12 = new LonLat((c[2].lon - c[1].lon) / gs, (c[2].lat - c[1].lat) / gs),\n            v01 = new LonLat((c[1].lon - c[0].lon) / gs, (c[1].lat - c[0].lat) / gs),\n            v32 = new LonLat((c[2].lon - c[3].lon) / gs, (c[2].lat - c[3].lat) / gs);\n\n        const size = (gs + 1) * (gs + 1) * 2,\n            halfSize = size / 2;\n\n        let gridHigh = new Float32Array(size),\n            gridLow = new Float32Array(size);\n\n        let lonLatArr = new Array(halfSize);\n\n        let kh = 0,\n            kl = 0,\n            k = 0;\n\n        let tempArr = new Float32Array(2);\n\n        for (let i = 0; i <= gs; i++) {\n\n            let P03i = new LonLat(c[0].lon + i * v03.lon, c[0].lat + i * v03.lat),\n                P12i = new LonLat(c[1].lon + i * v12.lon, c[1].lat + i * v12.lat);\n\n            for (let j = 0; j <= gs; j++) {\n                let P01j = new LonLat(c[0].lon + j * v01.lon, c[0].lat + j * v01.lat),\n                    P32j = new LonLat(c[3].lon + j * v32.lon, c[3].lat + j * v32.lat);\n                let xx = utils.getLinesIntersectionLonLat(P03i, P12i, P01j, P32j)!;\n                doubleToTwoFloats2(xx.lon, tempArr);\n                gridHigh[kh++] = tempArr[0];\n                gridLow[kl++] = tempArr[1];\n                doubleToTwoFloats2(xx.lat, tempArr);\n                gridHigh[kh++] = tempArr[0];\n                gridLow[kl++] = tempArr[1];\n\n                lonLatArr[k++] = xx;\n            }\n        }\n\n        if (toMerc) {\n            for (let i = 0; i < halfSize; i++) {\n                let c = lonLatArr[i].forwardMercator();\n                doubleToTwoFloats2(c.lon, tempArr);\n                gridHigh[i * 2] = tempArr[0];\n                gridLow[i * 2] = tempArr[1];\n\n                doubleToTwoFloats2(c.lat, tempArr);\n                gridHigh[i * 2 + 1] = tempArr[0];\n                gridLow[i * 2 + 1] = tempArr[1];\n            }\n        }\n\n        return [\n            this._planet.renderer!.handler.createArrayBuffer(gridHigh, 2, halfSize),\n            this._planet.renderer!.handler.createArrayBuffer(gridLow, 2, halfSize)\n        ];\n    }\n\n    public frame() {\n        let i = this.MAX_FRAMES;\n        while (i-- && this._queue.length) {\n            const q = this._queue.shift()!;\n            q._isRendering = false;\n            q.rendering();\n            q.events.dispatch(q.events.loadend);\n        }\n\n        i = this._animate.length;\n        while (i--) {\n            this._animate[i].rendering();\n        }\n    }\n\n    public add(geoImage: BaseGeoImage) {\n        if (!geoImage._isRendering) {\n            geoImage._isRendering = true;\n            if (geoImage._animate) {\n                this._animate.push(geoImage);\n            } else {\n                this._queue.push(geoImage);\n            }\n        }\n    }\n\n    public remove(geoImage: BaseGeoImage) {\n        if (geoImage._isRendering) {\n            geoImage._creationProceeding = false;\n            geoImage._isRendering = false;\n            let arr: BaseGeoImage[];\n            if (geoImage._animate) {\n                arr = this._animate;\n            } else {\n                arr = this._queue;\n            }\n            for (let i = 0; i < arr.length; i++) {\n                if (arr[i].isEqual(geoImage)) {\n                    arr.splice(i, 1);\n                    return;\n                }\n            }\n        }\n    }\n\n    protected _initBuffers() {\n\n        let h = this._planet.renderer!.handler!;\n\n        this._framebuffer = new Framebuffer(h, {width: 2, height: 2, useDepth: false});\n        this._framebuffer.init();\n\n        this._framebufferMercProj = new Framebuffer(h, {width: 2, height: 2, useDepth: false});\n        this._framebufferMercProj.init();\n\n        let gs = Math.log2(this._gridSize);\n\n        this._texCoordsBuffer = this._planet._textureCoordsBufferCache[gs];\n\n        this._indexBuffer = this._planet._indexesCache[gs][gs][gs][gs][gs].buffer;\n\n        this._quadTexCoordsBuffer = h.createArrayBuffer(new Float32Array([0, 1, 1, 1, 0, 0, 1, 0]), 2, 4);\n        this._quadVertexBuffer = h.createArrayBuffer(new Float32Array([-1, 1, 1, 1, -1, -1, 1, -1]), 2, 4);\n    }\n\n    protected _initShaders() {\n\n        this._planet.renderer!.handler.addProgram(new Program(\"geoImageTransform\", {\n            uniforms: {\n                sourceTexture: \"sampler2d\",\n                extentParamsHigh: \"vec4\",\n                extentParamsLow: \"vec4\",\n                isFullExtent: \"bool\"\n            },\n            attributes: {\n                cornersHigh: \"vec2\",\n                cornersLow: \"vec2\",\n                texCoords: \"vec2\"\n            },\n            vertexShader:\n                `attribute vec2 cornersHigh; \n                     attribute vec2 cornersLow;\n                      attribute vec2 texCoords; \n                      uniform vec4 extentParamsHigh; \n                      uniform vec4 extentParamsLow; \n                      varying vec2 v_texCoords;\n                      void main() {                                                             \n                          v_texCoords = texCoords; \n                          vec2 highDiff = cornersHigh - extentParamsHigh.xy;\n                          vec2 lowDiff = cornersLow - extentParamsLow.xy;                                        \n                          gl_Position = vec4((-1.0 + (highDiff * step(1.0, length(highDiff)) + lowDiff) * extentParamsHigh.zw) * vec2(1.0, -1.0), 0.0, 1.0); \n                      }`,\n            fragmentShader:\n                `precision highp float;\n                        uniform sampler2D sourceTexture;\n                        uniform bool isFullExtent;\n                        varying vec2 v_texCoords;\n                        void main () {\n                            if(!isFullExtent && (v_texCoords.x <= 0.001 || v_texCoords.x >= 0.999 ||\n                                v_texCoords.y <= 0.001 || v_texCoords.y >= 0.999)) {\n                                discard;\n                            }\n                            gl_FragColor = texture2D(sourceTexture, v_texCoords);\n                        }`\n        }));\n    }\n}","import {EventsHandler, createEvents} from '../Events';\nimport {Planet} from \"../scene/Planet\";\nimport {Segment} from \"../segment/Segment\";\n\ntype LoaderEventsList = [\"loadend\", \"layerloadend\"];\n\nconst LOADER_EVENTS: LoaderEventsList = [\"loadend\", \"layerloadend\"];\n\nexport interface IResponse {\n    status: string;\n    data?: any;\n    msg?: string;\n}\n\ntype IResponseCallback = (response: IResponse) => void;\n\n// interface IResponseHandler {\n//     json: (r: Response) => Promise<any>;\n//     blob: (r: Response) => Promise<Blob>;\n//     arrayBuffer: (r: Response) => Promise<ArrayBuffer>;\n//     imageBitmap: (r: Response) => Promise<ImageBitmap>;\n//     text: (r: Response) => Promise<string>;\n// }\n\ninterface Obj<T> {\n    __id: number;\n    isIdle: boolean;\n    isEqual: (obj: T) => boolean;\n    events: EventsHandler<any>\n    _planet: Planet | null;\n\n}\n\ntype QueryParams<T> = {\n    sender?: T,\n    src: string,\n    type: string,\n    filter?: (val: QueryParams<T>) => boolean,\n    options?: any,\n    segment?: Segment\n};\n\ntype QueueData<T> = {\n    params: QueryParams<T>,\n    callback: IResponseCallback\n};\n\ntype RequestCounter<T> = {\n    sender: T,\n    counter: number,\n    __requestCounterFrame__: number\n};\n\n\nexport class Loader<T extends Obj<T>> {\n    public MAX_REQUESTS: number;\n\n    public events: EventsHandler<LoaderEventsList>;\n\n    protected _loading: number;\n\n    protected _queue: QueueData<T>[];//new QueueArray();\n\n    protected _senderRequestCounter: RequestCounter<T>[];\n\n    protected _promises: { [key: string]: (r: Response) => Promise<any> };//IResponseHandler;\n\n    constructor(maxRequests: number = 24) {\n\n        this.MAX_REQUESTS = maxRequests;\n\n        this.events = createEvents(LOADER_EVENTS);\n\n        this._loading = 0;\n\n        this._queue = [];//new QueueArray();\n\n        this._senderRequestCounter = [];\n\n        this._promises = {\n            'json': r => r.json(),\n            'blob': r => r.blob(),\n            'arrayBuffer': r => r.arrayBuffer(),\n            'imageBitmap': r => r.blob().then(\n                (r: Blob) => createImageBitmap(r, {\n                    premultiplyAlpha: \"premultiply\"\n                })),\n            'text': r => r.text()\n        };\n    }\n\n    public load(params: QueryParams<T>, callback: IResponseCallback) {\n        if (params.sender) {\n            if (!this._senderRequestCounter[params.sender.__id]) {\n                this._senderRequestCounter[params.sender.__id] = {\n                    sender: params.sender, counter: 0, __requestCounterFrame__: 0\n                };\n            }\n            this._senderRequestCounter[params.sender.__id].counter++;\n        }\n        this._queue.push({params, callback});\n        this._exec();\n    }\n\n    public fetch(params: QueryParams<T>) {\n        return fetch(params.src, params.options || {})\n            .then((response: Response) => {\n                if (!response.ok) {\n                    throw Error(`Unable to load '${params.src}'`);\n                }\n                return this._promises[params.type || \"blob\"](response);\n            })\n\n            .then((data: any) => {\n                return {status: \"ready\", data: data};\n\n            })\n\n            .catch((err: Error) => {\n                return {status: \"error\", msg: err.toString()};\n            });\n    }\n\n    public getRequestCounter(sender: T): number {\n        if (sender) {\n            let r = this._senderRequestCounter[sender.__id];\n            if (r) {\n                return r.counter;\n            }\n        }\n        return 0;\n    }\n\n    public isIdle(sender: T): boolean {\n        return sender.isIdle;\n    }\n\n    protected _checkLoadend(request: RequestCounter<T>, sender: T) {\n        if (request.counter === 0 && (!sender._planet || sender._planet._terrainCompletedActivated)) {\n            sender.events.dispatch(sender.events.loadend, sender);\n            this.events.dispatch(this.events.layerloadend, sender);\n            request.__requestCounterFrame__ = 0;\n        } else {\n            request.__requestCounterFrame__ = requestAnimationFrame(() => {\n                this._checkLoadend(request, sender);\n            });\n        }\n    }\n\n    protected _handleResponse(q: QueueData<T>, response: IResponse) {\n        q.callback(response);\n        let sender = q.params.sender;\n        if (sender && (sender.events.loadend!.handlers.length || this.events.layerloadend!.handlers.length)) {\n            let request = this._senderRequestCounter[sender.__id];\n            if (request && request.counter > 0) {\n                request.counter--;\n                cancelAnimationFrame(request.__requestCounterFrame__!);\n                request.__requestCounterFrame__ = requestAnimationFrame(() => {\n                    this._checkLoadend(request, sender!);\n                });\n            }\n        }\n        this._exec();\n    }\n\n    protected _exec() {\n\n        if (this._queue.length > 0 && this._loading < this.MAX_REQUESTS) {\n\n            let q = this._queue.pop()!;\n\n            if (!q) return;\n\n            let p = q.params;\n\n            if (!p.filter || p.filter(p)) {\n\n                this._loading++;\n\n                return fetch(p.src!, p.options || {})\n                    .then((response: Response) => {\n                        if (!response.ok) {\n                            throw Error(`Unable to load '${p.src}'`);\n                        }\n                        return this._promises[p.type || \"blob\"](response);\n                    })\n                    .then((data: any) => {\n                        this._loading--;\n                        this._handleResponse(q, {status: \"ready\", data: data});\n                    })\n                    .catch((err: Error) => {\n                        this._loading--;\n                        this._handleResponse(q, {status: \"error\", msg: err.toString()});\n                    });\n\n            } else {\n                this._handleResponse(q, {status: \"abort\"});\n            }\n        } else if (this._loading === 0) {\n            this.events.dispatch(this.events.loadend);\n        }\n    }\n\n    public abort(sender: T) {\n\n        if (this._senderRequestCounter[sender.__id]) {\n            this._senderRequestCounter[sender.__id].counter = 0;\n            cancelAnimationFrame(this._senderRequestCounter[sender.__id].__requestCounterFrame__);\n            this._senderRequestCounter[sender.__id].__requestCounterFrame__ = 0;\n        }\n\n        for (let i = 0, len = this._queue.length; i < len; i++) {\n            let qi = this._queue[i];\n            if (qi && qi.params.sender && sender.isEqual(qi.params.sender)) {\n                qi.callback({'status': \"abort\"});\n                //@ts-ignore\n                this._queue[i] = null;\n            }\n        }\n    }\n\n    public abortAll() {\n        for (let i = 0, len = this._queue.length; i < len; i++) {\n            let qi = this._queue[i];\n            if (qi) {\n                let sender = qi.params.sender;\n                if (sender && this._senderRequestCounter[sender.__id]) {\n                    this._senderRequestCounter[sender.__id].counter = 0;\n                    cancelAnimationFrame(this._senderRequestCounter[sender.__id].__requestCounterFrame__);\n                    this._senderRequestCounter[sender.__id].__requestCounterFrame__ = 0;\n                }\n                qi.callback({'status': \"abort\"});\n                //@ts-ignore\n                this._queue[i] = null;\n            }\n        }\n        this._queue = [];\n    }\n\n    public get loading(): number {\n        return this._loading;\n    }\n\n    public get queue(): QueueData<T>[] {\n        return this._queue;\n    }\n}","import * as quadTree from \"../quadTree/quadTree\";\nimport {Framebuffer} from \"../webgl/Framebuffer\";\nimport {Lock, Key} from \"../Lock\";\nimport {Planet} from \"../scene/Planet\";\nimport {Program} from \"../webgl/Program\";\nimport {QueueArray} from \"../QueueArray\";\nimport {Segment} from \"../segment/Segment\";\nimport {WebGLBufferExt, WebGLTextureExt, Handler} from \"../webgl/Handler\";\n\ninterface INormalMapCreatorParams {\n    minTableSize?: number;\n    maxTableSize?: number;\n    width?: number;\n    height?: number;\n}\n\nexport class NormalMapCreator {\n\n    protected _minTabelSize: number;\n    protected _maxTableSize: number;\n\n    protected _planet: Planet;\n    protected _handler: Handler | null;\n    protected _verticesBufferArray: WebGLBufferExt[];\n    protected _indexBufferArray: WebGLBufferExt[];\n    protected _positionBuffer: WebGLBufferExt | null;\n    protected _framebuffer: Framebuffer | null;\n    protected _normalMapVerticesTexture: WebGLTextureExt | null;\n\n    protected _width: number;\n    protected _height: number;\n\n    protected _queue: QueueArray<Segment>;\n\n    protected _lock: Lock;\n\n    constructor(planet: Planet, options: INormalMapCreatorParams = {}) {\n\n        this._minTabelSize = options.minTableSize || 1;\n        this._maxTableSize = options.maxTableSize || 8;\n\n        this._planet = planet;\n        this._handler = null;\n        this._verticesBufferArray = [];\n        this._indexBufferArray = [];\n        this._positionBuffer = null;\n        this._framebuffer = null;\n        this._normalMapVerticesTexture = null;\n\n        this._width = options.width || 128;\n        this._height = options.height || 128;\n\n        this._queue = new QueueArray(1024);\n\n        this._lock = new Lock();\n    }\n\n    public get width(): number {\n        return this._width;\n    }\n\n    public get height(): number {\n        return this._height;\n    }\n\n    public init() {\n\n        this._maxTableSize = this._planet.maxGridSize || 8;\n\n        this._handler = this._planet.renderer!.handler;\n\n        let isWebkit = false; //('WebkitAppearance' in document.documentElement.style) && !/^((?!chrome).)*safari/i.test(navigator.userAgent);\n\n        /*==================================================================================\n         * http://www.sunsetlakesoftware.com/2013/10/21/optimizing-gaussian-blurs-mobile-gpu\n         *=================================================================================*/\n        const normalMapBlur = new Program(\"normalMapBlur\", {\n            attributes: {\n                a_position: \"vec2\"\n            },\n            uniforms: {\n                s_texture: \"sampler2d\"\n            },\n            vertexShader:\n                `attribute vec2 a_position;\n                       attribute vec2 a_texCoord;\n\n                      varying vec2 blurCoordinates[5];\n\n                      void main() {\n                          vec2 vt = a_position * 0.5 + 0.5; \n                          ${isWebkit ? \"vt.y = 1.0 - vt.y; \" : \" \"}\n                          gl_Position = vec4(a_position, 0.0, 1.0);\n                          blurCoordinates[0] = vt;\n                          blurCoordinates[1] = vt + ${(1.0 / this._width) * 1.407333};\n                          blurCoordinates[2] = vt - ${(1.0 / this._height) * 1.407333};\n                          blurCoordinates[3] = vt + ${(1.0 / this._width) * 3.294215};\n                          blurCoordinates[4] = vt - ${(1.0 / this._height) * 3.294215};\n                }`,\n            fragmentShader: `precision lowp float;\n                        uniform sampler2D s_texture;                        \n                        varying vec2 blurCoordinates[5];                        \n\n                        void main() {\n                            lowp vec4 sum = vec4(0.0);\n                            //if(blurCoordinates[0].x <= 0.01 || blurCoordinates[0].x >= 0.99 ||\n                            //    blurCoordinates[0].y <= 0.01 || blurCoordinates[0].y >= 0.99){\n                            //    sum = texture2D(s_texture, blurCoordinates[0]);\n                            //} else {\n                                sum += texture2D(s_texture, blurCoordinates[0]) * 0.204164;\n                                sum += texture2D(s_texture, blurCoordinates[1]) * 0.304005;\n                                sum += texture2D(s_texture, blurCoordinates[2]) * 0.304005;\n                                sum += texture2D(s_texture, blurCoordinates[3]) * 0.093913;\n                                sum += texture2D(s_texture, blurCoordinates[4]) * 0.093913;\n                            //}\n                            gl_FragColor = sum;\n                        }`\n        });\n\n        const normalMap = new Program(\"normalMap\", {\n            attributes: {\n                a_position: \"vec2\",\n                a_normal: \"vec3\"\n            },\n            uniforms: {},\n            vertexShader: `attribute vec2 a_position;\n                      attribute vec3 a_normal;\n                      \n                      varying vec3 v_color;\n                      \n                      void main() {\n                          gl_Position = vec4(a_position, 0, 1);\n                          v_color = normalize(a_normal) * 0.5 + 0.5;\n                      }`,\n            fragmentShader: `precision highp float;\n                        \n                        varying vec3 v_color;\n                        \n                        void main () {\n                            gl_FragColor = vec4(v_color, 1.0);\n                        }`\n        });\n\n        this._handler.addProgram(normalMapBlur);\n        this._handler.addProgram(normalMap);\n\n        //create hidden handler buffer\n        this._framebuffer = new Framebuffer(this._handler, {\n            width: this._width,\n            height: this._height,\n            useDepth: false\n        });\n\n        this._framebuffer.init();\n\n        this._normalMapVerticesTexture = this._handler.createEmptyTexture_l(this._width, this._height);\n\n        //create vertices hasharray for different grid size segments from 2^4(16) to 2^7(128)\n        for (let p = this._minTabelSize; p <= this._maxTableSize; p++) {\n\n            const gs = (1 << p);//Math.pow(2, p);\n            const gs2 = gs / 2;\n\n            let vertices = new Float32Array((gs + 1) * (gs + 1) * 2);\n\n            for (let i = 0; i <= gs; i++) {\n                for (let j = 0; j <= gs; j++) {\n                    let ind = (i * (gs + 1) + j) * 2;\n                    vertices[ind] = -1 + j / gs2;\n                    vertices[ind + 1] = -1 + i / gs2;\n                }\n            }\n\n            this._verticesBufferArray[gs] = this._handler.createArrayBuffer(\n                vertices,\n                2,\n                vertices.length / 2\n            );\n\n            this._indexBufferArray[gs] =\n                this._planet._indexesCache[Math.log2(gs)][Math.log2(gs)][Math.log2(gs)][Math.log2(gs)][Math.log2(gs)].buffer!;\n        }\n\n        //create 2d screen square buffer\n        const positions = new Float32Array([-1.0, -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, 1.0]);\n\n        this._positionBuffer = this._handler.createArrayBuffer(positions, 2, positions.length / 2);\n    }\n\n    protected _drawNormalMapBlur(segment: Segment): boolean {\n        let normals = segment.normalMapNormals;\n        if (\n            segment.node &&\n            segment.node.getState() !== quadTree.NOTRENDERING &&\n            normals &&\n            normals.length\n        ) {\n            const size = normals.length / 3;\n            const gridSize = Math.sqrt(size) - 1;\n\n            let indBuf = this._verticesBufferArray[gridSize];\n\n            if (indBuf) {\n                if (segment.planet.terrain!.equalizeNormals) {\n                    segment._normalMapEdgeEqualize(quadTree.N);\n                    segment._normalMapEdgeEqualize(quadTree.S);\n                    segment._normalMapEdgeEqualize(quadTree.W);\n                    segment._normalMapEdgeEqualize(quadTree.E);\n                }\n\n                let outTexture = segment.normalMapTexturePtr;\n\n                const h = this._handler!;\n                const gl = h.gl!;\n\n                let _normalsBuffer = h.createArrayBuffer(normals, 3, size, gl.DYNAMIC_DRAW);\n\n                const f = this._framebuffer!;\n                let p = h.programs.normalMap;\n                let sha = p._program.attributes;\n\n                f.bindOutputTexture(this._normalMapVerticesTexture!);\n\n                p.activate();\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, indBuf);\n                gl.vertexAttribPointer(sha.a_position, indBuf.itemSize, gl.FLOAT, false, 0, 0);\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, _normalsBuffer);\n                gl.vertexAttribPointer(sha.a_normal, _normalsBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBufferArray[gridSize]);\n                gl.drawElements(\n                    gl.TRIANGLE_STRIP,\n                    this._indexBufferArray[gridSize].numItems,\n                    gl.UNSIGNED_INT,\n                    0\n                );\n\n                gl.deleteBuffer(_normalsBuffer);\n\n                //\n                // blur pass\n                //\n                f.bindOutputTexture(outTexture!);\n\n                p = h.programs.normalMapBlur;\n\n                p.activate();\n                gl.bindBuffer(gl.ARRAY_BUFFER, this._positionBuffer!);\n                gl.vertexAttribPointer(\n                    p._program.attributes.a_position,\n                    this._positionBuffer!.itemSize,\n                    gl.FLOAT,\n                    false,\n                    0,\n                    0\n                );\n                gl.activeTexture(gl.TEXTURE0);\n                gl.bindTexture(gl.TEXTURE_2D, this._normalMapVerticesTexture!);\n                gl.uniform1i(p._program.uniforms.s_texture, 0);\n                gl.drawArrays(gl.TRIANGLE_STRIP, 0, this._positionBuffer!.numItems);\n                return true;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    protected _drawNormalMapNoBlur(segment: Segment): boolean {\n        let normals = segment.normalMapNormals;\n        if (\n            segment.node &&\n            segment.node.getState() !== quadTree.NOTRENDERING &&\n            normals &&\n            normals.length\n        ) {\n            const size = normals.length / 3;\n            const gridSize = Math.sqrt(size) - 1;\n\n            let indBuf = this._verticesBufferArray[gridSize];\n\n            if (indBuf) {\n                if (segment.planet.terrain!.equalizeNormals) {\n                    segment._normalMapEdgeEqualize(quadTree.N);\n                    segment._normalMapEdgeEqualize(quadTree.S);\n                    segment._normalMapEdgeEqualize(quadTree.W);\n                    segment._normalMapEdgeEqualize(quadTree.E);\n                }\n\n                let outTexture = segment.normalMapTexturePtr;\n\n                const h = this._handler!;\n                const gl = h.gl!;\n\n                let _normalsBuffer = h.createArrayBuffer(normals, 3, size, gl.DYNAMIC_DRAW);\n\n                const f = this._framebuffer!;\n                const p = h.programs.normalMap;\n                const sha = p._program.attributes;\n\n                f.bindOutputTexture(outTexture!);\n\n                p.activate();\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, indBuf);\n                gl.vertexAttribPointer(sha.a_position, indBuf.itemSize, gl.FLOAT, false, 0, 0);\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, _normalsBuffer);\n                gl.vertexAttribPointer(sha.a_normal, _normalsBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBufferArray[gridSize]);\n                gl.drawElements(\n                    gl.TRIANGLE_STRIP,\n                    this._indexBufferArray[gridSize].numItems,\n                    gl.UNSIGNED_INT,\n                    0\n                );\n\n                gl.deleteBuffer(_normalsBuffer);\n\n                return true;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    protected _drawNormalMap(segment: Segment) {\n        if (segment.planet.terrain!.isBlur(segment)) {\n            return this._drawNormalMapBlur(segment);\n        } else {\n            return this._drawNormalMapNoBlur(segment);\n        }\n    }\n\n    public drawSingle(segment: Segment) {\n        const h = this._handler!;\n        const gl = h.gl!;\n\n        this._framebuffer!.activate();\n\n        gl.disable(gl.CULL_FACE);\n        gl.disable(gl.DEPTH_TEST);\n        gl.disable(gl.BLEND);\n\n        if (segment.terrainReady && this._drawNormalMap(segment)) {\n            segment.normalMapReady = true;\n            segment.normalMapTexture = segment.normalMapTexturePtr;\n            segment.normalMapTextureBias[0] = 0;\n            segment.normalMapTextureBias[1] = 0;\n            segment.normalMapTextureBias[2] = 1;\n        }\n        segment._inTheQueue = false;\n\n        gl.enable(gl.DEPTH_TEST);\n        gl.enable(gl.CULL_FACE);\n        gl.enable(gl.BLEND);\n\n        this._framebuffer!.deactivate();\n    }\n\n    public frame() {\n        if (this._queue.length) {\n            const h = this._handler!;\n            const gl = h.gl!;\n\n            this._framebuffer!.activate();\n\n            gl.disable(gl.CULL_FACE);\n            gl.disable(gl.DEPTH_TEST);\n            gl.disable(gl.BLEND);\n\n            let deltaTime = 0,\n                startTime = window.performance.now();\n\n            while (this._lock.isFree() && this._queue.length && deltaTime < 0.25) {\n                const segment = this._queue.shift()!;\n                if (segment.terrainReady && this._drawNormalMap(segment)) {\n                    segment.normalMapReady = true;\n                    segment.normalMapTexture = segment.normalMapTexturePtr;\n                    segment.normalMapTextureBias[0] = 0;\n                    segment.normalMapTextureBias[1] = 0;\n                    segment.normalMapTextureBias[2] = 1;\n                }\n                segment._inTheQueue = false;\n                deltaTime = window.performance.now() - startTime;\n            }\n\n            gl.enable(gl.BLEND);\n            gl.enable(gl.DEPTH_TEST);\n            gl.enable(gl.CULL_FACE);\n\n            this._framebuffer!.deactivate();\n        }\n    }\n\n    public get queueSize(): number {\n        return this._queue.length;\n    }\n\n    public queue(segment: Segment) {\n        segment._inTheQueue = true;\n        this._queue.push(segment);\n    }\n\n    public unshift(segment: Segment) {\n        segment._inTheQueue = true;\n        this._queue.unshift(segment);\n    }\n\n    public remove(segment: Segment) {\n        //...\n    }\n\n    public clear() {\n        while (this._queue.length) {\n            let s = this._queue.pop()!;\n            s._inTheQueue = false;\n        }\n    }\n\n    /**\n     * Set activity off\n     * @public\n     */\n    public lock(key: Key) {\n        this._lock.lock(key);\n    }\n\n    /**\n     * Set activity on\n     * @public\n     */\n    public free(key: Key) {\n        this._lock.free(key);\n    }\n\n}","/**\n * @module og/proj/equi\n */\n\nimport { Proj, Units } from \"./Proj\";\n\n/**\n * Any equrectangualr projection object.\n * @type {Proj}\n */\nexport const equi = new Proj({ code: \"equi\", units: Units.DEGREES });\n","// import { QueueArray } from '../QueueArray.js';\nimport {EPSG4326} from \"../proj/EPSG4326\";\nimport {equi} from \"../proj/equi\";\nimport {BaseWorker} from \"./BaseWorker\";\nimport {Segment} from \"../segment/Segment\";\nimport {Geoid} from \"../terrain/Geoid\";\n\nexport interface IPlainSegmentWorkerData {\n    plainVertices: Float64Array | null;\n    plainVerticesHigh: Float32Array | null;\n    plainVerticesLow: Float32Array | null;\n    plainNormals: Float32Array | null;\n    plainRadius: number;\n\n    normalMapNormals: Float32Array | null;\n    normalMapVertices: Float64Array | null;\n    normalMapVerticesHigh: Float32Array | null;\n    normalMapVerticesLow: Float32Array | null;\n}\n\ntype MessageEventExt = MessageEvent & {\n    data: IPlainSegmentWorkerData\n}\n\nclass PlainSegmentWorker extends BaseWorker<Segment> {\n    constructor(numWorkers: number = 2) {\n        super(numWorkers, PLAIN_SEGMENT_PROGRAM);\n    }\n\n    protected override _onMessage(e: MessageEventExt) {\n        this._source.get(e.data.id)!._plainSegmentWorkerCallback(e.data);\n\n        e.data.plainVertices = null;\n        e.data.plainVerticesHigh = null;\n        e.data.plainVerticesLow = null;\n        e.data.plainNormals = null;\n        e.data.normalMapNormals = null;\n        e.data.normalMapVertices = null;\n        e.data.normalMapVerticesHigh = null;\n        e.data.normalMapVerticesLow = null;\n\n        this._source.delete(e.data.id)\n    }\n\n    public setGeoid(geoid: Geoid) {\n\n        if (geoid.model) {\n            let m = geoid.model;\n            let model = {\n                scale: m.scale,\n                offset: m.offset,\n                width: m.width,\n                height: m.height,\n                rlonres: m.rlonres,\n                rlatres: m.rlatres,\n                i: m.i\n            };\n\n            this._workerQueue.forEach((w) => {\n                let rawfile = new Uint8Array(m.rawfile.length);\n                rawfile.set(m.rawfile);\n\n                w.postMessage({\n                        model: model,\n                        rawfile: rawfile\n                    }, [\n                        rawfile.buffer\n                    ]\n                );\n            });\n        } else {\n            this._workerQueue.forEach((w) => {\n                w.postMessage({\n                    model: null\n                });\n            });\n        }\n    }\n\n    public override make(segment: Segment) {\n        if (segment.initialized) {\n            if (this._workerQueue.length) {\n                let w = this._workerQueue.pop()!;\n\n                this._source.set(this._sourceId, segment);\n\n                let isLonLat = (segment._projection.id === EPSG4326.id || segment._projection.id === equi.id) ? 1.0 : 0.0;\n\n                let params = new Float64Array([\n                    this._sourceId,\n                    isLonLat,\n                    segment.planet.terrain!.gridSizeByZoom[segment.tileZoom],\n                    segment.planet.terrain!.plainGridSize,\n                    segment._extent.southWest.lon,\n                    segment._extent.southWest.lat,\n                    segment._extent.northEast.lon,\n                    segment._extent.northEast.lat,\n                    // @ts-ignore\n                    segment.planet.ellipsoid._e2,\n                    segment.planet.ellipsoid.equatorialSize,\n                    segment.planet.ellipsoid._invRadii2.x,\n                    segment.planet.ellipsoid._invRadii2.y,\n                    segment.planet.ellipsoid._invRadii2.z,\n                    segment.planet._heightFactor\n                ]);\n\n                this._sourceId++;\n\n                w.postMessage({\n                    params: params\n                }, [\n                    params.buffer\n                ]);\n            } else {\n                this._pendingQueue.push(segment);\n            }\n        } else {\n            this.check();\n        }\n    }\n}\n\nconst PLAIN_SEGMENT_PROGRAM = `\n    'use strict';\n    \n    let model = null;\n\n    let cached_ix = null;\n    let cached_iy = null;\n    let v00 = null;\n    let v01 = null;\n    let v10 = null;\n    let v11 = null;\n    let t = null;\n\n    function rawval(ix, iy) {\n\n        if (iy < 0) {\n            iy = -iy;\n            ix += model.width / 2;\n        } else if (iy >= model.height) {\n            iy = 2 * (model.height - 1) - iy;\n            ix += model.width / 2;\n        }\n\n        if (ix < 0) {\n            ix += model.width;\n        } else if (ix >= model.width) {\n            ix -= model.width;\n        }\n\n        var k = (iy * model.width + ix) * 2 + model.i;\n\n        return (model.rawfile[k] << 8) | model.rawfile[k + 1];\n    };\n\n    function getHeightMSL(lon, lat) {\n\n        if (!model) return 0;\n\n        if (lon < 0) lon += 360.0;\n\n        var fy = (90 - lat) * model.rlatres;\n        var fx = lon * model.rlonres;\n        var iy = Math.floor(fy);\n        var ix = Math.floor(fx);\n\n        fx -= ix;\n        fy -= iy;\n\n        if (iy === (model.height - 1)) {\n            iy--;\n        }\n\n        if ((cached_ix !== ix) || (cached_iy !== iy)) {\n\n            cached_ix = ix;\n            cached_iy = iy;\n\n            v00 = rawval(ix, iy);\n            v01 = rawval(ix + 1, iy);\n            v10 = rawval(ix, iy + 1);\n            v11 = rawval(ix + 1, iy + 1);\n        }\n\n        let h = null;\n\n        var a = (1 - fx) * v00 + fx * v01;\n        var b = (1 - fx) * v10 + fx * v11;\n\n        h = (1 - fy) * a + fy * b;\n\n        return model.offset + model.scale * h;\n    };\n\n    const HALF_PI = Math.PI * 0.5;\n    const POLE = 20037508.34;\n    const PI_BY_POLE = Math.PI / POLE;\n    const INV_POLE_BY_180 = 180.0 / POLE;\n    const INV_PI_BY_180 = 180.0 / Math.PI;\n    const INV_PI_BY_180_HALF_PI = INV_PI_BY_180 * HALF_PI;\n    const RADIANS = Math.PI / 180.0;\n    const INV_PI_BY_360 = INV_PI_BY_180 * 2.0;\n\n    let E2 = 0.0,\n        A = 0.0;\n\n    let _projFunc = null;\n\n    const Vec3 = function (x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    };\n\n    var geodeticToCartesian = function (lon, lat, heightFactor, res) {\n\n        let h = getHeightMSL(lon, lat) * heightFactor;\n\n        let latrad = RADIANS * lat,\n            lonrad = RADIANS * lon;\n\n        let slt = Math.sin(latrad);\n\n        let N = A / Math.sqrt(1.0 - E2 * slt * slt);\n        let nc = (N + h) * Math.cos(latrad);       \n           \n        res.x = nc * Math.cos(lonrad);\n        res.y = nc * Math.sin(lonrad);\n        res.z = (N * (1 - E2) + h) * slt;\n    };\n\n    var geodeticToCartesianInverse = function (lon, lat, heightFactor, res){\n        geodeticToCartesian(\n            lon * INV_POLE_BY_180,\n            INV_PI_BY_360 * Math.atan(Math.exp(lat * PI_BY_POLE)) - INV_PI_BY_180_HALF_PI,\n            heightFactor,\n            res);\n    };\n\n    var v = new Vec3(0.0, 0.0, 0.0);\n    var _tempHigh = new Vec3(0.0, 0.0, 0.0);\n    var _tempLow = new Vec3(0.0, 0.0, 0.0);\n\n    var doubleToTwoFloats = function(v, high, low) {\n\n        let x = v.x, y = v.y, z = v.z;\n    \n        if (x >= 0.0) {\n            var doubleHigh = Math.floor(x / 65536.0) * 65536.0;\n            high.x = Math.fround(doubleHigh);\n            low.x = Math.fround(x - doubleHigh);\n        } else {\n            var doubleHigh = Math.floor(-x / 65536.0) * 65536.0;\n            high.x = Math.fround(-doubleHigh);\n            low.x = Math.fround(x + doubleHigh);\n        }\n\n        if (y >= 0.0) {\n            var doubleHigh = Math.floor(y / 65536.0) * 65536.0;\n            high.y = Math.fround(doubleHigh);\n            low.y = Math.fround(y - doubleHigh);\n        } else {\n            var doubleHigh = Math.floor(-y / 65536.0) * 65536.0;\n            high.y = Math.fround(-doubleHigh);\n            low.y = Math.fround(y + doubleHigh);\n        }\n\n        if (z >= 0.0) {\n            var doubleHigh = Math.floor(z / 65536.0) * 65536.0;\n            high.z = Math.fround(doubleHigh);\n            low.z = Math.fround(z - doubleHigh);\n        } else {\n            var doubleHigh = Math.floor(-z / 65536.0) * 65536.0;\n            high.z = Math.fround(-doubleHigh);\n            low.z = Math.fround(z + doubleHigh);\n        }\n    };\n\n    self.onmessage = function (msg) {\n        if(msg.data.model) {\n            model = msg.data.model;\n            model.rawfile = msg.data.rawfile;\n        } else if(msg.data.params) {\n\n            let xmin = 549755748352.0, xmax = -549755748352.0, \n                ymin = 549755748352.0, ymax = -549755748352.0, \n                zmin = 549755748352.0, zmax = -549755748352.0;\n\n            E2 = msg.data.params[8];\n            A = msg.data.params[9];\n\n            let gridSize = msg.data.params[2],\n                fgs = msg.data.params[3],\n                r2_x = msg.data.params[10],\n                r2_y = msg.data.params[11],\n                r2_z = msg.data.params[12];\n\n            let heightFactor =  msg.data.params[13];\n        \n            if(msg.data.params[1] === 0.0){\n                _projFunc = geodeticToCartesianInverse;\n            }else{\n                _projFunc = geodeticToCartesian;\n            }\n\n            let maxFgs = Math.max(fgs, gridSize);\n            let llStep = (msg.data.params[6] - msg.data.params[4]) / maxFgs;\n            let ltStep = (msg.data.params[7] - msg.data.params[5]) / maxFgs;\n\n            let esw_lon = msg.data.params[4],\n                ene_lat = msg.data.params[7];\n\n            let dg = Math.max(fgs / gridSize, 1.0),\n                gs = maxFgs + 1;\n            \n            const gsgs = gs * gs;\n\n            const gridSize3 = (gridSize + 1) * (gridSize + 1) * 3;\n\n            let plainNormals = new Float32Array(gridSize3);\n\n            let plainVertices = new Float64Array(gridSize3);\n            let plainVerticesHigh = new Float32Array(gridSize3);\n            let plainVerticesLow = new Float32Array(gridSize3);\n\n            let normalMapNormals = new Float32Array(gsgs * 3);\n\n            let normalMapVertices = new Float64Array(gsgs * 3);\n            let normalMapVerticesHigh = new Float32Array(gsgs * 3);\n            let normalMapVerticesLow = new Float32Array(gsgs * 3);\n\n            let ind = 0,\n                nmInd = 0;\n\n            for (let k = 0; k < gsgs; k++) {\n\n                let j = k % gs,\n                    i = ~~(k / gs);\n\n                _projFunc(esw_lon + j * llStep, ene_lat - i * ltStep, heightFactor, v);\n\n                let nx = v.x * r2_x, ny = v.y * r2_y, nz = v.z * r2_z;\n                let l = 1.0 / Math.sqrt(nx * nx + ny * ny + nz * nz);            \n                let nxl = nx * l,\n                    nyl = ny * l,\n                    nzl = nz * l;\n\n                doubleToTwoFloats(v, _tempHigh, _tempLow);\n\n                normalMapVertices[nmInd] = v.x;\n                normalMapVerticesHigh[nmInd] = _tempHigh.x;\n                normalMapVerticesLow[nmInd] = _tempLow.x;\n                normalMapNormals[nmInd++] = nxl;\n\n                normalMapVertices[nmInd] = v.y;\n                normalMapVerticesHigh[nmInd] = _tempHigh.y;\n                normalMapVerticesLow[nmInd] = _tempLow.y;\n                normalMapNormals[nmInd++] = nyl;\n\n                normalMapVertices[nmInd] = v.z;\n                normalMapVerticesHigh[nmInd] = _tempHigh.z;\n                normalMapVerticesLow[nmInd] = _tempLow.z;\n                normalMapNormals[nmInd++] = nzl;\n\n                if (i % dg === 0 && j % dg === 0) {\n                    plainVertices[ind] = v.x;\n                    plainVerticesHigh[ind] = _tempHigh.x;\n                    plainVerticesLow[ind] = _tempLow.x;\n                    plainNormals[ind++] = nxl;\n\n                    plainVertices[ind] = v.y;\n                    plainVerticesHigh[ind] = _tempHigh.y;\n                    plainVerticesLow[ind] = _tempLow.y;\n                    plainNormals[ind++] = nyl;\n\n                    plainVertices[ind] = v.z;\n                    plainVerticesHigh[ind] = _tempHigh.z;\n                    plainVerticesLow[ind] = _tempLow.z;\n                    plainNormals[ind++] = nzl;\n\n                    if (v.x < xmin) xmin = v.x; if (v.x > xmax) xmax = v.x;\n                    if (v.y < ymin) ymin = v.y; if (v.y > ymax) ymax = v.y;\n                    if (v.z < zmin) zmin = v.z; if (v.z > zmax) zmax = v.z;\n                }\n            }\n\n            let x = (xmax - xmin) * 0.5,\n                y = (ymax - ymin) * 0.5,\n                z = (zmax - zmin) * 0.5;\n\n            let plainRadius = Math.sqrt(x * x + y * y + z * z);\n\n            self.postMessage({\n                id: msg.data.params[0],\n                plainVertices: plainVertices,\n                plainVerticesHigh: plainVerticesHigh,\n                plainVerticesLow: plainVerticesLow,\n                plainNormals: plainNormals,\n                normalMapNormals: normalMapNormals,\n                normalMapVertices: normalMapVertices,\n                normalMapVerticesHigh: normalMapVerticesHigh,\n                normalMapVerticesLow: normalMapVerticesLow,\n                plainRadius: plainRadius\n             }, [\n                plainVertices.buffer,\n                plainVerticesHigh.buffer,\n                plainVerticesLow.buffer,\n                plainNormals.buffer,\n                normalMapNormals.buffer,\n                normalMapVertices.buffer,\n                normalMapVerticesHigh.buffer,\n                normalMapVerticesLow.buffer\n            ]);\n        }\n    }`;\n\nexport {PlainSegmentWorker};\n","import {Box} from \"../bv/Box\";\nimport {Mat4, NumberArray16} from \"../math/Mat4\";\nimport {NumberArray4} from \"../math/Vec4\";\nimport {Sphere} from \"../bv/Sphere\";\nimport {Vec3} from \"../math/Vec3\";\nimport {RADIANS_HALF} from \"../math\";\n\nfunction planeNormalize(plane: NumberArray4) {\n    let t = 1.0 / Math.sqrt(plane[0] * plane[0] + plane[1] * plane[1] + plane[2] * plane[2]);\n    plane[0] *= t;\n    plane[1] *= t;\n    plane[2] *= t;\n    plane[3] *= t;\n}\n\ninterface IFrustumParams {\n    cameraFrustumIndex?: number;\n    fov?: number;\n    aspect?: number,\n    near?: number;\n    far?: number;\n}\n\n/**\n * Frustum object, part of the camera object.\n * @class\n * @param {*} options\n */\nclass Frustum {\n\n    protected _f: [NumberArray4, NumberArray4, NumberArray4, NumberArray4, NumberArray4, NumberArray4];\n\n    /**\n     * Camera projection matrix.\n     * @protected\n     * @type {Mat4}\n     */\n    public projectionMatrix: Mat4;\n\n    /**\n     * Camera inverse projection matrix.\n     * @protected\n     * @type {Mat4}\n     */\n    public inverseProjectionMatrix: Mat4;\n\n    /**\n     * Product of projection and view matrices.\n     * @protected\n     * @type {Mat4}\n     */\n    public projectionViewMatrix: Mat4;\n\n    /**\n     * Inverse projectionView Matrix.\n     * @protected\n     * @type {Mat4}\n     */\n    public inverseProjectionViewMatrix: Mat4;\n\n    /**\n     * Projection frustum left value.\n     * @public\n     */\n    public left: number;\n    /**\n     * Projection frustum right value.\n     * @public\n     */\n    public right: number;\n    /**\n     * Projection frustum bottom value.\n     * @public\n     */\n    public bottom: number;\n    /**\n     * Projection frustum top value.\n     * @public\n     */\n    public top: number;\n    /**\n     * Projection frustum near value.\n     * @public\n     */\n    public near: number;\n    /**\n     * Projection frustum far value.\n     * @public\n     */\n    public far: number;\n\n    public cameraFrustumIndex: number;\n\n    public _pickingColorU: Float32Array = new Float32Array([0, 0, 0]);\n\n    constructor(options: IFrustumParams = {}) {\n\n        this._f = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]];\n\n        this.projectionMatrix = new Mat4();\n\n        this.inverseProjectionMatrix = new Mat4();\n\n        this.projectionViewMatrix = new Mat4();\n\n        this.inverseProjectionViewMatrix = new Mat4();\n\n        this.left = 0.0;\n\n        this.right = 0.0;\n\n        this.bottom = 0.0;\n\n        this.top = 0.0;\n\n        this.near = 0.0;\n\n        this.far = 0.0;\n\n        this.cameraFrustumIndex = options.cameraFrustumIndex != undefined ? options.cameraFrustumIndex : -1;\n\n        this.setProjectionMatrix(\n            options.fov || 30.0,\n            options.aspect || 1.0,\n            options.near || 1.0,\n            options.far || 1000.0\n        );\n    }\n\n    public getRightPlane(): NumberArray4 {\n        return this._f[0];\n    }\n\n    public getLeftPlane(): NumberArray4 {\n        return this._f[1];\n    }\n\n    public getBottomPlane(): NumberArray4 {\n        return this._f[2];\n    }\n\n    public getTopPlane(): NumberArray4 {\n        return this._f[3];\n    }\n\n    public getBackwardPlane(): NumberArray4 {\n        return this._f[4];\n    }\n\n    public getForwardPlane(): NumberArray4 {\n        return this._f[5];\n    }\n\n    public getProjectionViewMatrix(): NumberArray16 {\n        return this.projectionViewMatrix._m;\n    }\n\n    public getProjectionMatrix(): NumberArray16 {\n        return this.projectionMatrix._m;\n    }\n\n    public getInverseProjectionMatrix(): NumberArray16 {\n        return this.inverseProjectionMatrix._m;\n    }\n\n    /**\n     * Sets up camera projection matrix.\n     * @public\n     * @param {number} angle - Camera's view angle.\n     * @param {number} aspect - Screen aspect ratio.\n     * @param {number} near - Near camera distance.\n     * @param {number} far - Far camera distance.\n     */\n    public setProjectionMatrix(angle: number, aspect: number, near: number, far: number) {\n        this.top = near * Math.tan(angle * RADIANS_HALF);\n        this.bottom = -this.top;\n        this.right = this.top * aspect;\n        this.left = -this.right;\n        this.near = near;\n        this.far = far;\n\n        this.projectionMatrix.setPerspective(\n            this.left,\n            this.right,\n            this.bottom,\n            this.top,\n            near,\n            far\n        );\n        this.projectionMatrix.inverseTo(this.inverseProjectionMatrix);\n    }\n\n    /**\n     * Camera's projection matrix values.\n     * @public\n     * @param {Mat4} viewMatrix - View matrix.\n     */\n    public setViewMatrix(viewMatrix: Mat4) {\n        this.projectionViewMatrix = this.projectionMatrix.mul(viewMatrix);\n        this.projectionViewMatrix.inverseTo(this.inverseProjectionViewMatrix);\n\n        let m = this.projectionViewMatrix._m;\n\n        /* Right */\n        this._f[0][0] = m[3] - m[0];\n        this._f[0][1] = m[7] - m[4];\n        this._f[0][2] = m[11] - m[8];\n        this._f[0][3] = m[15] - m[12];\n        planeNormalize(this._f[0]);\n\n        /* Left */\n        this._f[1][0] = m[3] + m[0];\n        this._f[1][1] = m[7] + m[4];\n        this._f[1][2] = m[11] + m[8];\n        this._f[1][3] = m[15] + m[12];\n        planeNormalize(this._f[1]);\n\n        /* Bottom */\n        this._f[2][0] = m[3] + m[1];\n        this._f[2][1] = m[7] + m[5];\n        this._f[2][2] = m[11] + m[9];\n        this._f[2][3] = m[15] + m[13];\n        planeNormalize(this._f[2]);\n\n        /* Top */\n        this._f[3][0] = m[3] - m[1];\n        this._f[3][1] = m[7] - m[5];\n        this._f[3][2] = m[11] - m[9];\n        this._f[3][3] = m[15] - m[13];\n        planeNormalize(this._f[3]);\n\n        /* Backward */\n        this._f[4][0] = m[3] - m[2];\n        this._f[4][1] = m[7] - m[6];\n        this._f[4][2] = m[11] - m[10];\n        this._f[4][3] = m[15] - m[14];\n        planeNormalize(this._f[4]);\n\n        /* Forward */\n        this._f[5][0] = m[3] + m[2];\n        this._f[5][1] = m[7] + m[6];\n        this._f[5][2] = m[11] + m[10];\n        this._f[5][3] = m[15] + m[14];\n        planeNormalize(this._f[5]);\n    }\n\n    /**\n     * Returns true if a point in the frustum.\n     * @public\n     * @param {Vec3} point - Cartesian point.\n     * @returns {boolean} -\n     */\n    public containsPoint(point: Vec3): boolean {\n        for (let p = 0; p < 6; p++) {\n            let d = point.dotArr(this._f[p]) + this._f[p][3];\n            if (d <= 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Returns true if the frustum contains a bonding sphere, but bottom plane exclude.\n     * @public\n     * @param {Sphere} sphere - Bounding sphere.\n     * @returns {boolean} -\n     */\n    public containsSphereBottomExc(sphere: Sphere): boolean {\n        let r = -sphere.radius,\n            f = this._f;\n        if (sphere.center.dotArr(f[0]) + f[0][3] <= r) return false;\n        if (sphere.center.dotArr(f[1]) + f[1][3] <= r) return false;\n        if (sphere.center.dotArr(f[3]) + f[3][3] <= r) return false;\n        if (sphere.center.dotArr(f[4]) + f[4][3] <= r) return false;\n        if (sphere.center.dotArr(f[5]) + f[5][3] <= r) return false;\n        return true;\n    }\n\n    public containsSphereButtom(sphere: Sphere): boolean {\n        let r = -sphere.radius,\n            f = this._f;\n        if (sphere.center.dotArr(f[2]) + f[2][3] <= r)\n            return false;\n        return true;\n    }\n\n    /**\n     * Returns true if the frustum contains a bonding sphere.\n     * @public\n     * @param {Sphere} sphere - Bounding sphere.\n     * @returns {boolean} -\n     */\n    public containsSphere(sphere: Sphere): boolean {\n        let r = -sphere.radius,\n            f = this._f;\n        if (sphere.center.dotArr(f[0]) + f[0][3] <= r) return false;\n        if (sphere.center.dotArr(f[1]) + f[1][3] <= r) return false;\n        if (sphere.center.dotArr(f[2]) + f[2][3] <= r) return false;\n        if (sphere.center.dotArr(f[3]) + f[3][3] <= r) return false;\n        if (sphere.center.dotArr(f[4]) + f[4][3] <= r) return false;\n        if (sphere.center.dotArr(f[5]) + f[5][3] <= r) return false;\n        return true;\n    }\n\n    /**\n     * Returns true if the frustum contains a bonding sphere.\n     * @public\n     * @param {Vec3} center - Sphere center.\n     * @param {number} radius - Sphere radius.\n     * @returns {boolean} -\n     */\n    public containsSphere2(center: Vec3, radius: number): boolean {\n        let r = -radius;\n        if (center.dotArr(this._f[0]) + this._f[0][3] <= r) return false;\n        if (center.dotArr(this._f[1]) + this._f[1][3] <= r) return false;\n        if (center.dotArr(this._f[2]) + this._f[2][3] <= r) return false;\n        if (center.dotArr(this._f[3]) + this._f[3][3] <= r) return false;\n        if (center.dotArr(this._f[4]) + this._f[4][3] <= r) return false;\n        if (center.dotArr(this._f[5]) + this._f[5][3] <= r) return false;\n        return true;\n    }\n\n    /**\n     * Returns true if the frustum contains a bounding box.\n     * @public\n     * @param {Box} box - Bounding box.\n     * @returns {boolean} -\n     */\n    public containsBox(box: Box): boolean {\n        let result: boolean = true,\n            cout: number,\n            cin: number;\n\n        for (let i = 0; i < 6; i++) {\n            cout = 0;\n            cin = 0;\n            for (let k = 0; k < 8 && (cin === 0 || cout === 0); k++) {\n                let d = box.vertices[k].dotArr(this._f[i]) + this._f[i][3];\n                if (d < 0) {\n                    cout++;\n                } else {\n                    cin++;\n                }\n            }\n\n            if (cin === 0) {\n                return false;\n            } else if (cout > 0) {\n                result = true;\n            }\n        }\n\n        return result;\n    }\n}\n\nexport {Frustum};\n","import * as math from \"../math\";\nimport {Events, EventsHandler, createEvents} from \"../Events\";\nimport {Frustum} from \"./Frustum\";\nimport {Mat3, NumberArray9} from \"../math/Mat3\";\nimport {Mat4, NumberArray16} from \"../math/Mat4\";\nimport {Renderer} from \"../renderer/Renderer\";\nimport {Vec2, NumberArray2} from \"../math/Vec2\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Vec4} from \"../math/Vec4\";\nimport {Sphere} from \"../bv/Sphere\";\n\ntype CameraEvents = [\"viewchange\", \"moveend\"];\n\nconst EVENT_NAMES: CameraEvents = [\n    /**\n     * When camera has been updated.\n     * @event og.Camera#viewchange\n     */\n    \"viewchange\",\n\n    /**\n     * Camera is stopped.\n     * @event og.Camera#moveend\n     */\n    \"moveend\"\n];\n\nexport interface ICameraParams {\n    eye?: Vec3;\n    aspect?: number;\n    viewAngle?: number;\n    look?: Vec3;\n    up?: Vec3;\n    frustums?: NumberArray2[]\n}\n\n/**\n * Camera class.\n * @class\n * @param {Renderer} [renderer] - Renderer uses the camera instance.\n * @param {Object} [options] - Camera options:\n * @param {Object} [options.name] - Camera name.\n * @param {number} [options.viewAngle=47] - Camera angle of view. Default is 47.0\n * @param {number} [options.near=1] - Camera near plane distance. Default is 1.0\n * @param {number} [options.far=og.math.MAX] - Camera far plane distance. Default is og.math.MAX\n * @param {Vec3} [options.eye=[0,0,0]] - Camera eye position. Default (0,0,0)\n * @param {Vec3} [options.look=[0,0,0]] - Camera look position. Default (0,0,0)\n * @param {Vec3} [options.up=[0,1,0]] - Camera eye position. Default (0,1,0)\n *\n * @fires EventsHandler<CameraEvents>#viewchange\n * @fires EventsHandler<CameraEvents>#moveend\n */\nclass Camera {\n\n    /**\n     * Assigned renderer\n     * @public\n     * @type {Renderer}\n     */\n    public renderer: Renderer | null;\n\n    /**\n     * Camera events handler\n     * @public\n     * @type {Events}\n     */\n    public events: EventsHandler<CameraEvents>;\n\n    /**\n     * Camera position.\n     * @public\n     * @type {Vec3}\n     */\n    public eye: Vec3;\n\n    /**\n     * Camera RTE high position\n     * @public\n     * @type {Float32Array}\n     */\n    public eyeHigh: Float32Array;\n\n    /**\n     * Camera RTE low position\n     * @public\n     * @type {Float32Array}\n     */\n    public eyeLow: Float32Array;\n\n    /**\n     * Aspect ratio.\n     * @protected\n     * @type {Number}\n     */\n    protected _aspect: number;\n\n    /**\n     * Camera view angle in degrees\n     * @protected\n     * @type {Number}\n     */\n    protected _viewAngle: number;\n\n    /**\n     * Camera view matrix.\n     * @protected\n     * @type {Mat4}\n     */\n    protected _viewMatrix: Mat4;\n\n    /**\n     * Camera normal matrix.\n     * @protected\n     * @type {Mat3}\n     */\n    protected _normalMatrix: Mat3;\n\n    /**\n     * Camera right vector.\n     * @public\n     * @type {Vec3}\n     */\n    public _r: Vec3;\n\n    /**\n     * Camera up vector.\n     * @public\n     * @type {Vec3}\n     */\n    public _u: Vec3;\n\n    /**\n     * Camera backward vector.\n     * @public\n     * @type {Vec3}\n     */\n    public _b: Vec3;\n\n    protected _pr: Vec3;\n    protected _pu: Vec3;\n    protected _pb: Vec3;\n    protected _peye: Vec3;\n\n    public isMoving: boolean;\n\n    protected _tanViewAngle_hrad: number;\n\n    public _tanViewAngle_hradOneByHeight: number;\n\n    protected _projSizeConst: number;\n\n    public frustums: Frustum[];\n\n    public frustumColors: number[];\n\n    public FARTHEST_FRUSTUM_INDEX: number;\n\n    public currentFrustumIndex: number;\n\n    public isFirstPass: boolean;\n\n    constructor(renderer: Renderer | null, options: ICameraParams = {}) {\n        this.renderer = renderer;\n\n        this.events = createEvents<CameraEvents>(EVENT_NAMES, this);\n\n        this.eye = options.eye || new Vec3();\n\n        this.eyeHigh = new Float32Array(3);\n\n        this.eyeLow = new Float32Array(3);\n\n        this._aspect = options.aspect || 1.0;\n\n        this._viewAngle = options.viewAngle || 47.0;\n\n        this._viewMatrix = new Mat4();\n\n        this._normalMatrix = new Mat3();\n\n        this._r = new Vec3(1.0, 0.0, 0.0);\n\n        this._u = new Vec3(0.0, 1.0, 0.0);\n\n        this._b = new Vec3(0.0, 0.0, 1.0);\n\n        // Previous frame values\n        this._pr = this._r.clone();\n        this._pu = this._u.clone();\n        this._pb = this._b.clone();\n        this._peye = this.eye.clone();\n        this.isMoving = false;\n\n        this._tanViewAngle_hrad = 0.0;\n        this._tanViewAngle_hradOneByHeight = 0.0;\n\n        this.frustums = [];\n\n        this.frustumColors = [];\n\n        if (options.frustums) {\n            for (let i = 0, len = options.frustums.length; i < len; i++) {\n                let fi = options.frustums[i];\n\n                let fr = new Frustum({\n                    fov: this._viewAngle,\n                    aspect: this._aspect,\n                    near: fi[0],\n                    far: fi[1]\n                });\n\n                fr.cameraFrustumIndex = this.frustums.length;\n                this.frustums.push(fr);\n                //this.frustumColors.push.apply(this.frustumColors, fr._pickingColorU);\n                this.frustumColors.push(fr._pickingColorU[0], fr._pickingColorU[1], fr._pickingColorU[2]);\n            }\n        } else {\n            let near = 1.0,\n                far = 10000.0;\n\n            let fr = new Frustum({\n                fov: this._viewAngle,\n                aspect: this._aspect,\n                near: near,\n                far: far\n            });\n\n            fr.cameraFrustumIndex = this.frustums.length;\n            this.frustums.push(fr);\n            //this.frustumColors.push.apply(this.frustumColors, fr._pickingColorU);\n            this.frustumColors.push(fr._pickingColorU[0], fr._pickingColorU[1], fr._pickingColorU[2]);\n        }\n\n        this.FARTHEST_FRUSTUM_INDEX = this.frustums.length - 1;\n\n        this.currentFrustumIndex = 0;\n\n        this.isFirstPass = false;\n\n        this._projSizeConst = 0;\n\n        this.set(\n            options.eye || new Vec3(0.0, 0.0, 1.0),\n            options.look || new Vec3(),\n            options.up || new Vec3(0.0, 1.0, 0.0)\n        );\n    }\n\n    public checkMoveEnd() {\n        let r = this._r,\n            u = this._u,\n            b = this._b,\n            eye = this.eye;\n\n        if (this._peye.equal(eye) && this._pr.equal(r) && this._pu.equal(u) && this._pb.equal(b)) {\n            if (this.isMoving) {\n                this.events.dispatch(this.events.moveend, this);\n            }\n            this.isMoving = false;\n        } else {\n            this.isMoving = true;\n        }\n\n        this._pr.copy(r);\n        this._pu.copy(u);\n        this._pb.copy(b);\n        this._peye.copy(eye);\n    }\n\n    public bindRenderer(renderer: Renderer) {\n        this.renderer = renderer;\n        for (let i = 0; i < this.frustums.length; i++) {\n            this.renderer.assignPickingColor<Frustum>(this.frustums[i]);\n        }\n        this._aspect = this.renderer.handler.getClientAspect();\n\n        this._setProj(this._viewAngle, this._aspect);\n    }\n\n    /**\n     * Camera initialization.\n     * @public\n     * @param {Object} [options] - Camera options:\n     * @param {number} [options.viewAngle] - Camera angle of view.\n     * @param {number} [options.near] - Camera near plane distance. Default is 1.0\n     * @param {number} [options.far] - Camera far plane distance. Default is math.MAX\n     * @param {Vec3} [options.eye] - Camera eye position. Default (0,0,0)\n     * @param {Vec3} [options.look] - Camera look position. Default (0,0,0)\n     * @param {Vec3} [options.up] - Camera eye position. Default (0,1,0)\n     */\n    protected _init(options: ICameraParams) {\n\n        this._setProj(this._viewAngle, this._aspect);\n\n        this.set(\n            options.eye || new Vec3(0.0, 0.0, 1.0),\n            options.look || new Vec3(),\n            options.up || new Vec3(0.0, 1.0, 0.0)\n        );\n    }\n\n    public getUp(): Vec3 {\n        return this._u.clone();\n    }\n\n    public getDown(): Vec3 {\n        return this._u.negateTo();\n    }\n\n    public getRight(): Vec3 {\n        return this._r.clone();\n    }\n\n    public getLeft(): Vec3 {\n        return this._r.negateTo();\n    }\n\n    public getForward(): Vec3 {\n        return this._b.negateTo();\n    }\n\n    public getBackward(): Vec3 {\n        return this._b.clone();\n    }\n\n    /**\n     * Updates camera view space\n     * @public\n     * @virtual\n     */\n    public update() {\n        let u = this._r,\n            v = this._u,\n            n = this._b,\n            eye = this.eye;\n\n        Vec3.doubleToTwoFloat32Array(eye, this.eyeHigh, this.eyeLow);\n\n        this._viewMatrix.set([\n            u.x, v.x, n.x, 0.0,\n            u.y, v.y, n.y, 0.0,\n            u.z, v.z, n.z, 0.0,\n            -eye.dot(u), -eye.dot(v), -eye.dot(n), 1.0\n        ]);\n\n        // do not clean up, someday it will be using\n        //this._normalMatrix = this._viewMatrix.toMatrix3(); // this._viewMatrix.toInverseMatrix3().transposeTo();\n\n        for (let i = 0, len = this.frustums.length; i < len; i++) {\n            this.frustums[i].setViewMatrix(this._viewMatrix);\n        }\n\n        this.events.dispatch(this.events.viewchange, this);\n    }\n\n    /**\n     * Refresh camera matrices\n     * @public\n     */\n    public refresh() {\n        this._setProj(this._viewAngle, this._aspect);\n        this.update();\n    }\n\n    /**\n     * Sets aspect ratio\n     * @public\n     * @param {Number} aspect - Camera aspect ratio\n     */\n    public setAspectRatio(aspect: number) {\n        this._aspect = aspect;\n        this.refresh();\n    }\n\n    /**\n     * Returns aspect ratio\n     * @public\n     * @returns {number} - Aspect ratio\n     */\n    public getAspectRatio(): number {\n        return this._aspect;\n    }\n\n    /**\n     * Sets up camera projection\n     * @public\n     * @param {number} angle - Camera view angle\n     * @param {number} aspect - Screen aspect ratio\n     */\n    protected _setProj(angle: number, aspect: number) {\n        this._viewAngle = angle;\n        this._aspect = aspect;\n        this._tanViewAngle_hrad = Math.tan(angle * math.RADIANS_HALF);\n        this._tanViewAngle_hradOneByHeight =\n            this._tanViewAngle_hrad * this.renderer!.handler._oneByHeight;\n        let c = this.renderer!.handler.canvas!;\n        this._projSizeConst = Math.min(c.clientWidth < 512 ? 512 : c.clientWidth, c.clientHeight < 512 ? 512 : c.clientHeight) / (angle * math.RADIANS);\n        for (let i = 0, len = this.frustums.length; i < len; i++) {\n            this.frustums[i].setProjectionMatrix(\n                angle,\n                aspect,\n                this.frustums[i].near,\n                this.frustums[i].far\n            );\n        }\n    }\n\n    /**\n     * Sets camera view angle in degrees\n     * @public\n     * @param {number} angle - View angle\n     */\n    public setViewAngle(angle: number) {\n        this._viewAngle = angle;\n        this.refresh();\n    }\n\n    /**\n     * Gets camera view angle in degrees\n     * @public\n     * @returns {number} angle -\n     */\n    public getViewAngle(): number {\n        return this._viewAngle;\n    }\n\n    public get viewAngle(): number {\n        return this._viewAngle;\n    }\n\n    /**\n     * Sets camera to eye position\n     * @public\n     * @param {Vec3} eye - Camera position\n     * @param {Vec3} look - Look point\n     * @param {Vec3} up - Camera up vector\n     * @returns {Camera} - This camera\n     */\n    public set(eye: Vec3, look?: Vec3, up?: Vec3): this {\n        this.eye.x = eye.x;\n        this.eye.y = eye.y;\n        this.eye.z = eye.z;\n        look = look || this._b;\n        up = up || this._u;\n        this._b.x = eye.x - look.x;\n        this._b.y = eye.y - look.y;\n        this._b.z = eye.z - look.z;\n        this._r.copy(up.cross(this._b));\n        this._b.normalize();\n        this._r.normalize();\n        this._u.copy(this._b.cross(this._r));\n        return this;\n    }\n\n    /**\n     * Sets camera look point\n     * @public\n     * @param {Vec3} look - Look point\n     * @param {Vec3} [up] - Camera up vector otherwise camera current up vector(this._u)\n     */\n    public look(look: Vec3, up?: Vec3) {\n        this._b.set(this.eye.x - look.x, this.eye.y - look.y, this.eye.z - look.z);\n        this._r.copy((up || this._u).cross(this._b));\n        this._b.normalize();\n        this._r.normalize();\n        this._u.copy(this._b.cross(this._r));\n    }\n\n    /**\n     * Slides camera to vector d - (du, dv, dn)\n     * @public\n     * @param {number} du - delta X\n     * @param {number} dv - delta Y\n     * @param {number} dn - delta Z\n     */\n    public slide(du: number, dv: number, dn: number) {\n        this.eye.x += du * this._r.x + dv * this._u.x + dn * this._b.x;\n        this.eye.y += du * this._r.y + dv * this._u.y + dn * this._b.y;\n        this.eye.z += du * this._r.z + dv * this._u.z + dn * this._b.z;\n    }\n\n    /**\n     * Roll the camera to the angle in degrees\n     * @public\n     * @param {number} angle - Delta roll angle in degrees\n     */\n    public roll(angle: number) {\n        let cs = Math.cos(math.RADIANS * angle);\n        let sn = Math.sin(math.RADIANS * angle);\n        let t = this._r.clone();\n        this._r.set(\n            cs * t.x - sn * this._u.x,\n            cs * t.y - sn * this._u.y,\n            cs * t.z - sn * this._u.z\n        );\n        this._u.set(\n            sn * t.x + cs * this._u.x,\n            sn * t.y + cs * this._u.y,\n            sn * t.z + cs * this._u.z\n        );\n    }\n\n    /**\n     * Pitch the camera to the angle in degrees\n     * @public\n     * @param {number} angle - Delta pitch angle in degrees\n     */\n    public pitch(angle: number) {\n        let cs = Math.cos(math.RADIANS * angle);\n        let sn = Math.sin(math.RADIANS * angle);\n        let t = this._b.clone();\n        this._b.set(\n            cs * t.x - sn * this._u.x,\n            cs * t.y - sn * this._u.y,\n            cs * t.z - sn * this._u.z\n        );\n        this._u.set(\n            sn * t.x + cs * this._u.x,\n            sn * t.y + cs * this._u.y,\n            sn * t.z + cs * this._u.z\n        );\n    }\n\n    /**\n     * Yaw the camera to the angle in degrees\n     * @public\n     * @param {number} angle - Delta yaw angle in degrees\n     */\n    public yaw(angle: number) {\n        let cs = Math.cos(math.RADIANS * angle);\n        let sn = Math.sin(math.RADIANS * angle);\n        let t = this._r.clone();\n        this._r.set(\n            cs * t.x - sn * this._b.x,\n            cs * t.y - sn * this._b.y,\n            cs * t.z - sn * this._b.z\n        );\n        this._b.set(\n            sn * t.x + cs * this._b.x,\n            sn * t.y + cs * this._b.y,\n            sn * t.z + cs * this._b.z\n        );\n    }\n\n    /**\n     * Returns normal vector direction to the unprojected screen point from camera eye\n     * @public\n     * @param {number} x - Screen X coordinate\n     * @param {number} y - Screen Y coordinate\n     * @returns {Vec3} - Direction vector\n     */\n    public unproject(x: number, y: number) {\n        let c = this.renderer!.handler.canvas!,\n            w = c.width * 0.5,\n            h = c.height * 0.5;\n\n        let px = (x - w) / w,\n            py = -(y - h) / h;\n\n        let world1 = this.frustums[0].inverseProjectionViewMatrix.mulVec4(new Vec4(px, py, -1.0, 1.0)).affinity(),\n            world2 = this.frustums[0].inverseProjectionViewMatrix.mulVec4(new Vec4(px, py, 0.0, 1.0)).affinity();\n\n        return world2.subA(world1).toVec3().normalize();\n    }\n\n    /**\n     * Gets projected 3d point to the 2d screen coordinates\n     * @public\n     * @param {Vec3} v - Cartesian 3d coordinates\n     * @returns {Vec2} - Screen point coordinates\n     */\n    public project(v: Vec3): Vec2 {\n        let r = this.frustums[0].projectionViewMatrix.mulVec4(v.toVec4()),\n            c = this.renderer!.handler.canvas!;\n        return new Vec2((1 + r.x / r.w) * c.width * 0.5, (1 - r.y / r.w) * c.height * 0.5);\n    }\n\n    /**\n     * Rotates camera around center point\n     * @public\n     * @param {number} angle - Rotation angle in radians\n     * @param {boolean} [isArc] - If true camera up vector gets from current up vector every frame,\n     * otherwise up is always input parameter.\n     * @param {Vec3} [center] - Point that the camera rotates around\n     * @param {Vec3} [up] - Camera up vector\n     */\n    public rotateAround(angle: number, isArc?: boolean, center?: Vec3 | null, up?: Vec3 | null) {\n        center = center || Vec3.ZERO;\n        up = up || Vec3.UP;\n\n        let rot = new Mat4().setRotation(isArc ? this._u : up, angle);\n        let tr = new Mat4().setIdentity().translate(center);\n        let ntr = new Mat4().setIdentity().translate(center.negateTo());\n        let trm = tr.mul(rot).mul(ntr);\n\n        this.eye = trm.mulVec3(this.eye);\n        this._u = rot.mulVec3(this._u).normalize();\n        this._r = rot.mulVec3(this._r).normalize();\n        this._b = rot.mulVec3(this._b).normalize();\n    }\n\n    /**\n     * Rotates camera around center point by horizontal.\n     * @public\n     * @param {number} angle - Rotation angle in radians.\n     * @param {boolean} [isArc] - If true camera up vector gets from current up vector every frame,\n     * otherwise up is always input parameter.\n     * @param {Vec3} [center] - Point that the camera rotates around.\n     * @param {Vec3} [up] - Camera up vector.\n     */\n    public rotateHorizontal(angle: number, isArc?: boolean, center?: Vec3 | null, up?: Vec3 | null) {\n        this.rotateAround(angle, isArc, center, up);\n    }\n\n    /**\n     * Rotates camera around center point by vertical.\n     * @param {number} angle - Rotation angle in radians.\n     * @param {Vec3} [center] - Point that the camera rotates around.\n     */\n    public rotateVertical(angle: number, center?: Vec3) {\n        this.rotateAround(angle, false, center, this._r);\n    }\n\n    /**\n     * Gets 3d size factor. Uses in LOD distance calculation.\n     * @public\n     * @param {Vec3} p - Far point.\n     * @param {Vec3} r - Far point.\n     * @returns {number} - Size factor.\n     */\n    public projectedSize(p: Vec3, r: number): number {\n        return Math.atan(r / this.eye.distance(p)) * this._projSizeConst;\n    }\n\n    /**\n     * Returns model matrix.\n     * @public\n     * @returns {NumberArray16} - View matrix.\n     */\n    public getViewMatrix(): NumberArray16 {\n        return this._viewMatrix._m;\n    }\n\n    /**\n     * Returns normal matrix.\n     * @public\n     * @returns {NumberArray9} - Normal matrix.\n     */\n    public getNormalMatrix(): NumberArray9 {\n        return this._normalMatrix._m;\n    }\n\n    public setCurrentFrustum(k: number) {\n        this.currentFrustumIndex = k;\n        this.isFirstPass = k === this.FARTHEST_FRUSTUM_INDEX;\n    }\n\n    public getCurrentFrustum(): number {\n        return this.currentFrustumIndex;\n    }\n\n    public containsSphere(sphere: Sphere): boolean {\n        for (let i = 0; i < this.frustums.length; i++) {\n            if (this.frustums[i].containsSphere(sphere)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public get frustum(): Frustum {\n        return this.frustums[this.currentFrustumIndex];\n    }\n\n    /**\n     * Returns projection matrix.\n     * @public\n     * @returns {Mat4} - Projection matrix.\n     */\n    public getProjectionMatrix(): NumberArray16 {\n        return this.frustum.projectionMatrix._m;\n    }\n\n    /**\n     * Returns projection and model matrix product.\n     * @public\n     * @return {Mat4} - Projection-view matrix.\n     */\n    public getProjectionViewMatrix(): NumberArray16 {\n        return this.frustum.projectionViewMatrix._m;\n    }\n\n    /**\n     * Returns inverse projection and model matrix product.\n     * @public\n     * @returns {Mat4} - Inverse projection-view matrix.\n     */\n    public getInverseProjectionViewMatrix(): NumberArray16 {\n        return this.frustum.inverseProjectionViewMatrix._m;\n    }\n\n    /**\n     * Returns inverse projection matrix.\n     * @public\n     * @returns {Mat4} - Inverse projection-view matrix.\n     */\n    public getInverseProjectionMatrix(): NumberArray16 {\n        return this.frustum.inverseProjectionMatrix._m;\n    }\n}\n\nexport {Camera};\n","import * as mercator from \"../mercator\";\nimport * as math from \"../math\";\nimport {Camera, ICameraParams} from \"./Camera\";\nimport {Key} from \"../Lock\";\nimport {LonLat} from \"../LonLat\";\nimport {Mat4} from \"../math/Mat4\";\nimport {Planet} from \"../scene/Planet\";\nimport {Quat} from \"../math/Quat\";\nimport {Ray} from \"../math/Ray\";\nimport {Vec3} from \"../math/Vec3\";\nimport {Extent} from \"../Extent\";\nimport {Segment} from \"../segment/Segment\";\n\ninterface IPlanetCameraParams extends ICameraParams {\n    minAltitude?: number;\n    maxAltitude?: number;\n}\n\ntype CameraFrame = {\n    eye: Vec3;\n    n: Vec3;\n    u: Vec3;\n    v: Vec3;\n}\n\n/**\n * Planet camera.\n * @class\n * @extends {Camera}\n * @param {Planet} planet - Planet render node.\n * @param {IPlanetCameraParams} [options] - Planet camera options:\n * @param {string} [options.name] - Camera name.\n * @param {number} [options.viewAngle] - Camera angle of view.\n * @param {number} [options.near] - Camera near plane distance. Default is 1.0\n * @param {number} [options.far] - Camera far plane distance. Default is og.math.MAX\n * @param {number} [options.minAltitude] - Minimal altitude for the camera. Default is 5\n * @param {number} [options.maxAltitude] - Maximal altitude for the camera. Default is 20000000\n * @param {Vec3} [options.eye] - Camera eye position. Default (0,0,0)\n * @param {Vec3} [options.look] - Camera look position. Default (0,0,0)\n * @param {Vec3} [options.up] - Camera eye position. Default (0,1,0)\n */\nclass PlanetCamera extends Camera {\n    /**\n     * Assigned camera's planet.\n     * @public\n     * @type {Planet}\n     */\n    public planet: Planet;\n\n    /**\n     * Minimal altitude that camera can reach over the terrain.\n     * @public\n     * @type {number}\n     */\n    public minAltitude: number;\n\n    /**\n     * Maximal altitude that camera can reach over the globe.\n     * @public\n     * @type {number}\n     */\n    public maxAltitude: number;\n\n    /**\n     * Current geographical degree position.\n     * @public\n     * @type {LonLat}\n     */\n    public _lonLat: LonLat;\n\n    /**\n     * Current geographical mercator position.\n     * @public\n     * @type {LonLat}\n     */\n    public _lonLatMerc: LonLat;\n\n    /**\n     * Current altitude.\n     * @protected\n     * @type {number}\n     */\n    protected _terrainAltitude: number;\n\n    /**\n     * Cartesian coordinates on the terrain.\n     * @protected\n     * @type {Vec3}\n     */\n    protected _terrainPoint: Vec3;\n\n    /**\n     * Quad node that camera flies over.\n     * @protected\n     * @type {Segment}\n     */\n\n    public _insideSegment: Segment | null;\n\n    public slope: number;\n\n    protected _keyLock: Key;\n    protected _framesArr: CameraFrame[];\n    protected _framesCounter: number;\n    protected _numFrames: number;\n    protected _completeCallback: Function | null;\n    protected _frameCallback: Function | null;\n\n    protected _flying: boolean;\n    protected _checkTerrainCollision: boolean;\n\n    public eyeNorm: Vec3;\n\n    constructor(planet: Planet, options: IPlanetCameraParams = {}) {\n        super(planet.renderer, {\n                ...options,\n                frustums: options.frustums || [[1, 100 + 0.075], [100, 1000 + 0.075], [1000, 1e6 + 10000], [1e6, 1e9]],\n            }\n        );\n\n        this.planet = planet;\n\n        this.minAltitude = options.minAltitude || 1;\n\n        this.maxAltitude = options.maxAltitude || 20000000;\n\n        this._lonLat = this.planet.ellipsoid.cartesianToLonLat(this.eye);\n\n        this._lonLatMerc = this._lonLat.forwardMercator();\n\n        this._terrainAltitude = this._lonLat.height;\n\n        this._terrainPoint = new Vec3();\n\n        this._insideSegment = null;\n\n        this.slope = 0;\n\n        this._keyLock = new Key();\n\n        this._framesArr = [];\n        this._framesCounter = 0;\n        this._numFrames = 50;\n        this._completeCallback = null;\n        this._frameCallback = null;\n        this._flying = false;\n        this._checkTerrainCollision = true;\n\n        this.eyeNorm = this.eye.getNormal();\n    }\n\n    public setTerrainCollisionActivity(isActive: boolean) {\n        this._checkTerrainCollision = isActive;\n    }\n\n    /**\n     * Updates camera view space.\n     * @public\n     * @virtual\n     */\n    public override update() {\n        this.events.stopPropagation();\n\n        let maxAlt = this.maxAltitude + this.planet.ellipsoid.getEquatorialSize();\n\n        if (this.eye.length() > maxAlt) {\n            this.eye.copy(this.eye.getNormal().scale(maxAlt));\n        }\n\n        super.update();\n\n        this.updateGeodeticPosition();\n\n        this.eyeNorm = this.eye.getNormal();\n        this.slope = this._b.dot(this.eyeNorm);\n\n        this.events.dispatch(this.events.viewchange, this);\n    }\n\n    public updateGeodeticPosition() {\n        this.planet.ellipsoid.cartesianToLonLatRes(this.eye, this._lonLat);\n        if (Math.abs(this._lonLat.lat) <= mercator.MAX_LAT) {\n            LonLat.forwardMercatorRes(this._lonLat, this._lonLatMerc);\n        }\n    }\n\n    /**\n     * Sets altitude over the terrain.\n     * @public\n     * @param {number} alt - Altitude over the terrain.\n     */\n    public setAltitude(alt: number) {\n\n        let t = this._terrainPoint;\n        let n = this.planet.ellipsoid.getSurfaceNormal3v(this.eye);\n\n        this.eye.x = n.x * alt + t.x;\n        this.eye.y = n.y * alt + t.y;\n        this.eye.z = n.z * alt + t.z;\n\n        this._terrainAltitude = alt;\n    }\n\n    /**\n     * Gets altitude over the terrain.\n     * @public\n     */\n    public getAltitude(): number {\n        return this._terrainAltitude;\n    }\n\n    /**\n     * Places camera to view to the geographical point.\n     * @public\n     * @param {LonLat} lonlat - New camera and camera view position.\n     * @param {LonLat} [lookLonLat] - Look up coordinates.\n     * @param {Vec3} [up] - Camera UP vector. Default (0,1,0)\n     */\n    public setLonLat(lonlat: LonLat, lookLonLat?: LonLat, up?: Vec3) {\n        this.stopFlying();\n        this._lonLat.set(lonlat.lon, lonlat.lat, lonlat.height || this._lonLat.height);\n        let el = this.planet.ellipsoid;\n        let newEye = el.lonLatToCartesian(this._lonLat);\n        let newLook = lookLonLat ? el.lonLatToCartesian(lookLonLat) : Vec3.ZERO;\n        this.set(newEye, newLook, up || Vec3.NORTH);\n        this.update();\n    }\n\n    /**\n     * Returns camera geographical position.\n     * @public\n     * @returns {LonLat}\n     */\n    public getLonLat(): LonLat {\n        return this._lonLat;\n    }\n\n    /**\n     * Returns camera height.\n     * @public\n     * @returns {number}\n     */\n    public getHeight(): number {\n        return this._lonLat.height;\n    }\n\n    /**\n     * Gets position by viewable extent.\n     * @public\n     * @param {Extent} extent - Viewable extent.\n     * @param {Number} height - Camera height\n     * @returns {Vec3}\n     */\n    public getExtentPosition(extent: Extent, height?: number | null): Vec3 {\n\n        height = height || 0;\n\n        let north = extent.getNorth();\n        let south = extent.getSouth();\n        let east = extent.getEast();\n        let west = extent.getWest();\n\n        if (west > east) {\n            east += 360;\n        }\n\n        let e = this.planet.ellipsoid;\n\n        let cart = new LonLat(east, north);\n        let northEast = e.lonLatToCartesian(cart);\n        cart.lat = south;\n        let southEast = e.lonLatToCartesian(cart);\n        cart.lon = west;\n        let southWest = e.lonLatToCartesian(cart);\n        cart.lat = north;\n        let northWest = e.lonLatToCartesian(cart);\n\n        let center = Vec3.sub(northEast, southWest).scale(0.5).addA(southWest);\n\n        let mag = center.length();\n        if (mag < 0.000001) {\n            cart.lon = (east + west) * 0.5;\n            cart.lat = (north + south) * 0.5;\n            center = e.lonLatToCartesian(cart);\n        }\n\n        northWest.subA(center);\n        southEast.subA(center);\n        northEast.subA(center);\n        southWest.subA(center);\n\n        let direction = center.getNormal(); // ellipsoid.getSurfaceNormal(center).negate().normalize();\n        let right = direction.cross(Vec3.NORTH).normalize();\n        let up = right.cross(direction).normalize();\n\n        let _h = Math.max(\n            Math.abs(up.dot(northWest)),\n            Math.abs(up.dot(southEast)),\n            Math.abs(up.dot(northEast)),\n            Math.abs(up.dot(southWest))\n        );\n\n        let _w = Math.max(\n            Math.abs(right.dot(northWest)),\n            Math.abs(right.dot(southEast)),\n            Math.abs(right.dot(northEast)),\n            Math.abs(right.dot(southWest))\n        );\n\n        let tanPhi = Math.tan(this._viewAngle * math.RADIANS * 0.5);\n        let tanTheta = this._aspect * tanPhi;\n        let d = Math.max(_w / tanTheta, _h / tanPhi);\n\n        center.normalize();\n        center.scale(mag + d + height);\n\n        return center;\n    }\n\n    /**\n     * View current extent.\n     * @public\n     * @param {Extent} extent - Current extent.\n     * @param {number} [height]\n     */\n    public viewExtent(extent: Extent, height?: number) {\n        this.stopFlying();\n        this.set(this.getExtentPosition(extent, height), Vec3.ZERO, Vec3.NORTH);\n        this.update();\n    }\n\n    /**\n     * Flies to the current extent.\n     * @public\n     * @param {Extent} extent - Current extent.\n     * @param {number} [height] - Destination height.\n     * @param {Vec3} [up] - Camera UP in the end of flying. Default - (0,1,0)\n     * @param {Number} [ampl] - Altitude amplitude factor.\n     * @param {Function} [completeCallback] - Callback that calls after flying when flying is finished.\n     * @param {Function} [startCallback] - Callback that calls before the flying begins.\n     * @param {Function} [frameCallback] - Each frame callback\n     */\n    public flyExtent(\n        extent: Extent,\n        height?: number | null,\n        up?: Vec3 | null,\n        ampl?: number | null,\n        completeCallback?: Function | null,\n        startCallback?: Function | null,\n        frameCallback?: Function | null) {\n        this.flyCartesian(\n            this.getExtentPosition(extent, height),\n            Vec3.ZERO,\n            up,\n            ampl == null ? 1 : ampl,\n            completeCallback,\n            startCallback,\n            frameCallback\n        );\n    }\n\n    public viewDistance(cartesian: Vec3, distance: number = 10000.0) {\n        let p0 = this.eye.add(this.getForward().scaleTo(distance));\n        let _rot = Quat.getRotationBetweenVectors(p0.getNormal(), cartesian.getNormal());\n        if (_rot.isZero()) {\n            let newPos = cartesian.add(this.getBackward().scaleTo(distance));\n            this.set(newPos, cartesian);\n        } else {\n            let newPos = cartesian.add(_rot.mulVec3(this.getBackward()).scale(distance)),\n                newUp = _rot.mulVec3(this.getUp());\n            this.set(newPos, cartesian, newUp);\n        }\n        this.update();\n    }\n\n    public flyDistance(\n        cartesian: Vec3,\n        distance: number = 10000.0,\n        ampl: number = 0.0,\n        completeCallback?: Function,\n        startCallback?: Function,\n        frameCallback?: Function\n    ) {\n        let p0 = this.eye.add(this.getForward().scaleTo(distance));\n        let _rot = Quat.getRotationBetweenVectors(p0.getNormal(), cartesian.getNormal());\n        if (_rot.isZero()) {\n            let newPos = cartesian.add(this.getBackward().scaleTo(distance));\n            this.set(newPos, cartesian);\n        } else {\n            let newPos = cartesian.add(_rot.mulVec3(this.getBackward()).scale(distance)),\n                newUp = _rot.mulVec3(this.getUp());\n            this.flyCartesian(\n                newPos,\n                cartesian,\n                newUp,\n                ampl,\n                completeCallback,\n                startCallback,\n                frameCallback\n            );\n        }\n    }\n\n    /**\n     * Flies to the cartesian coordinates.\n     * @public\n     * @param {Vec3} cartesian - Finish cartesian coordinates.\n     * @param {Vec3} [look] - Camera LOOK in the end of flying. Default - (0,0,0)\n     * @param {Vec3} [up] - Camera UP vector in the end of flying. Default - (0,1,0)\n     * @param {Number} [ampl=1.0] - Altitude amplitude factor.\n     * @param {Function} [completeCallback] - Callback that calls after flying when flying is finished.\n     * @param {Function} [startCallback] - Callback that calls before the flying begins.\n     * @param {Function} [frameCallback] - Each frame callback\n     */\n    flyCartesian(\n        cartesian: Vec3,\n        look: Vec3 | LonLat | null = Vec3.ZERO,\n        up: Vec3 | null = Vec3.NORTH,\n        ampl: number = 1.0,\n        completeCallback: Function | null = () => {\n        },\n        startCallback: Function | null = () => {\n        },\n        frameCallback: Function | null = () => {\n        }) {\n\n        this.stopFlying();\n\n        look = look || Vec3.ZERO;\n        up = up || Vec3.NORTH;\n\n        this._completeCallback = completeCallback;\n\n        this._frameCallback = frameCallback;\n\n        if (startCallback) {\n            startCallback.call(this);\n        }\n\n        if (look instanceof LonLat) {\n            look = this.planet.ellipsoid.lonLatToCartesian(look);\n        }\n\n        let ground_a = this.planet.ellipsoid.lonLatToCartesian(\n            new LonLat(this._lonLat.lon, this._lonLat.lat)\n        );\n\n        let v_a = this._u,\n            n_a = this._b;\n\n        let lonlat_b = this.planet.ellipsoid.cartesianToLonLat(cartesian);\n        let up_b = up;\n        let ground_b = this.planet.ellipsoid.lonLatToCartesian(\n            new LonLat(lonlat_b.lon, lonlat_b.lat, 0)\n        );\n        let n_b = Vec3.sub(cartesian, look as Vec3);\n        let u_b = up_b.cross(n_b);\n        n_b.normalize();\n        u_b.normalize();\n        let v_b = n_b.cross(u_b);\n\n        let an = ground_a.getNormal();\n        let bn = ground_b.getNormal();\n        let anbn = 1.0 - an.dot(bn);\n        let hM_a = ampl * math.SQRT_HALF * Math.sqrt(anbn > 0.0 ? anbn : 0.0);\n\n        let maxHeight = 6639613;\n        let currMaxHeight = Math.max(this._lonLat.height, lonlat_b.height);\n        if (currMaxHeight > maxHeight) {\n            maxHeight = currMaxHeight;\n        }\n        let max_h = currMaxHeight + 2.5 * hM_a * (maxHeight - currMaxHeight);\n        let zero = Vec3.ZERO;\n\n        // camera path and orientations calculation\n        for (let i = 0; i <= this._numFrames; i++) {\n            let d = 1 - i / this._numFrames;\n            d = d * d * (3 - 2 * d);\n            d *= d;\n\n            let g_i = ground_a.smerp(ground_b, d).normalize();\n            let ground_i = this.planet.getRayIntersectionEllipsoid(new Ray(zero, g_i));\n            let t = 1 - d;\n            let height_i =\n                this._lonLat.height * d * d * d +\n                max_h * 3 * d * d * t +\n                max_h * 3 * d * t * t +\n                lonlat_b.height * t * t * t;\n\n            let eye_i = ground_i!.addA(g_i.scale(height_i));\n            let up_i = v_a.smerp(v_b, d);\n            let look_i = Vec3.add(eye_i, n_a.smerp(n_b, d).negateTo());\n\n            let n = new Vec3(eye_i.x - look_i.x, eye_i.y - look_i.y, eye_i.z - look_i.z);\n            let u = up_i.cross(n);\n            n.normalize();\n            u.normalize();\n\n            let v = n.cross(u);\n            this._framesArr[i] = {\n                eye: eye_i,\n                n: n,\n                u: u,\n                v: v\n            };\n        }\n\n        this._framesCounter = this._numFrames;\n        this._flying = true;\n    }\n\n    /**\n     * Flies to the geo coordinates.\n     * @public\n     * @param {LonLat} lonlat - Finish coordinates.\n     * @param {Vec3 | LonLat} [look] - Camera LOOK in the end of flying. Default - (0,0,0)\n     * @param {Vec3} [up] - Camera UP vector in the end of flying. Default - (0,1,0)\n     * @param {number} [ampl] - Altitude amplitude factor.\n     * @param {Function} [completeCallback] - Callback that calls after flying when flying is finished.\n     * @param {Function} [startCallback] - Callback that calls befor the flying begins.\n     * @param {Function} [frameCallback] - each frame callback\n     */\n    flyLonLat(\n        lonlat: LonLat,\n        look?: Vec3 | LonLat,\n        up?: Vec3,\n        ampl?: number,\n        completeCallback?: Function,\n        startCallback?: Function,\n        frameCallbak?: Function\n    ) {\n        let _lonLat = new LonLat(lonlat.lon, lonlat.lat, lonlat.height || this._lonLat.height);\n        this.flyCartesian(\n            this.planet.ellipsoid.lonLatToCartesian(_lonLat),\n            look,\n            up,\n            ampl,\n            completeCallback,\n            startCallback,\n            frameCallbak\n        );\n    }\n\n    /**\n     * Breaks the flight.\n     * @public\n     */\n    stopFlying() {\n        this.planet.layerLock.free(this._keyLock);\n        this.planet.terrainLock.free(this._keyLock);\n        this.planet.normalMapCreator.free(this._keyLock);\n\n        this._flying = false;\n        this._framesArr.length = 0;\n        this._framesArr = [];\n        this._framesCounter = -1;\n        this._frameCallback = null;\n    }\n\n    /**\n     * Returns camera is flying.\n     * @public\n     * @returns {boolean}\n     */\n    isFlying() {\n        return this._flying;\n    }\n\n    /**\n     * Rotates around planet to the left.\n     * @public\n     * @param {number} angle - Rotation angle.\n     * @param {boolean} [spin] - If its true rotates around globe spin.\n     */\n    public rotateLeft(angle: number, spin: boolean) {\n        this.rotateHorizontal(angle * math.RADIANS, spin !== true, Vec3.ZERO);\n        this.update();\n    }\n\n    /**\n     * Rotates around planet to the right.\n     * @public\n     * @param {number} angle - Rotation angle.\n     * @param {boolean} [spin] - If its true rotates around globe spin.\n     */\n    public rotateRight(angle: number, spin: boolean) {\n        this.rotateHorizontal(-angle * math.RADIANS, spin !== true, Vec3.ZERO);\n        this.update();\n    }\n\n    /**\n     * Rotates around planet to the North Pole.\n     * @public\n     * @param {number} angle - Rotation angle.\n     */\n    public rotateUp(angle: number) {\n        this.rotateVertical(angle * math.RADIANS, Vec3.ZERO);\n        this.update();\n    }\n\n    /**\n     * Rotates around planet to the South Pole.\n     * @public\n     * @param {number} angle - Rotation angle.\n     */\n    public rotateDown(angle: number) {\n        this.rotateVertical(-angle * math.RADIANS, Vec3.ZERO);\n        this.update();\n    }\n\n    public override rotateVertical(angle: number, center: Vec3, minSlope: number = 0) {\n        let rot = new Mat4().setRotation(this._r, angle);\n        let tr = new Mat4().setIdentity().translate(center);\n        let ntr = new Mat4().setIdentity().translate(center.negateTo());\n        let trm = tr.mul(rot).mul(ntr);\n\n        let eye = trm.mulVec3(this.eye);\n        let u = rot.mulVec3(this._u).normalize();\n        let r = rot.mulVec3(this._r).normalize();\n        let b = rot.mulVec3(this._b).normalize();\n\n        let eyeNorm = eye.getNormal();\n        let slope = b.dot(eyeNorm);\n\n        if (minSlope) {\n            let dSlope = slope - this.slope;\n\n            if (slope < minSlope && dSlope < 0) return;\n\n            if (\n                (slope > 0.1 && u.dot(eyeNorm) > 0) ||\n                this.slope <= 0.1 ||\n                this._u.dot(this.eye.getNormal()) <= 0.0\n            ) {\n                this.eye = eye;\n                this._u = u;\n                this._r = r;\n                this._b = b;\n            }\n        } else {\n            this.eye = eye;\n            this._u = u;\n            this._r = r;\n            this._b = b;\n        }\n    }\n\n    /**\n     * Prepare camera to the frame. Used in render node frame function.\n     * @public\n     */\n    public checkFly() {\n        if (this._flying) {\n            let c = this._numFrames - this._framesCounter;\n\n            this.planet.layerLock.lock(this._keyLock);\n            this.planet.terrainLock.lock(this._keyLock);\n            this.planet.normalMapCreator.lock(this._keyLock);\n\n            this.eye = this._framesArr[c].eye;\n            this._r = this._framesArr[c].u;\n            this._u = this._framesArr[c].v;\n            this._b = this._framesArr[c].n;\n\n            if (this._frameCallback) {\n                this._frameCallback();\n            }\n\n            this.update();\n\n            this._framesCounter--;\n\n            if (this._framesCounter < 0) {\n                this.stopFlying();\n                if (this._completeCallback) {\n                    this._completeCallback();\n                    this._completeCallback = null;\n                }\n            }\n        }\n    }\n\n    public checkTerrainCollision() {\n        this._terrainAltitude = this._lonLat.height;\n        if (this._insideSegment && this._insideSegment.planet) {\n            this._terrainAltitude = this._insideSegment.getTerrainPoint(\n                this.eye,\n                this._insideSegment.getInsideLonLat(this),\n                this._terrainPoint\n            );\n            if (this._terrainAltitude < this.minAltitude && this._checkTerrainCollision) {\n                this.setAltitude(this.minAltitude);\n            }\n            return this._terrainPoint;\n        }\n    }\n\n    public getSurfaceVisibleDistance(d: number): number {\n        let R = this.planet.ellipsoid.equatorialSize;\n        return R * Math.acos(R / (R + this._lonLat.height + d));\n    }\n\n    public getHeading(): number {\n        let u = this.eye.getNormal();\n        let f = Vec3.proj_b_to_plane(\n                this.slope >= 0.97 ? this.getUp() : this.getForward(),\n                u\n            ).normalize(),\n            n = Vec3.proj_b_to_plane(Vec3.NORTH, u).normalize();\n        let res = Math.sign(u.dot(f.cross(n))) * Math.acos(f.dot(n)) * math.DEGREES;\n        if (res < 0.0) {\n            return 360.0 + res;\n        }\n        return res;\n    }\n\n    public isVisible(poi: Vec3): boolean {\n        let e = this.eye.length();\n        return this.eye.distance(poi) < Math.sqrt(e * e - this.planet.ellipsoid.equatorialSizeSqr);\n    }\n\n    // _calcOrientation() {\n    //     let qq = Quat.yRotation(this.yaw * RADIANS).mul(this._qNorthFrame).conjugate();\n    //     this.orientation = qq.mulVec3(MODEL_FORWARD).normalize();\n    //     this._uOrientation[0] = this.orientation.x;\n    //     this._uOrientation[1] = this.orientation.y;\n    //     this._uOrientation[2] = this.orientation.z;\n    // }\n    //\n    // _updatePrediction(now) {\n    //\n    //     this._qNorthFrame = Planet.getBearingNorthRotationQuat(this.eye);\n    //\n    //     let dt = (now - this._positionTime) * 0.001;\n    //     this._positionTime = now;\n    //\n    //     this._predMapPosCart = this.eye.add(this._velCartesian.scaleTo(dt));\n    // }\n}\n\nexport {PlanetCamera};\n","// import { QueueArray } from '../QueueArray.js';\n\nimport {BaseWorker} from \"./BaseWorker\";\nimport {Segment} from \"../segment/Segment\";\nimport {NumberArray6} from \"../bv/Sphere\";\n\ninterface TerrainInfo {\n    segment: Segment;\n    elevations: Float32Array;\n}\n\nexport interface ITerrainWorkerData {\n    id: number;\n    normalMapNormals: Float32Array | null;\n    normalMapVertices: Float64Array | null;\n    normalMapVerticesHigh: Float32Array | null;\n    normalMapVerticesLow: Float32Array | null;\n    terrainVertices: Float64Array | null;\n    terrainVerticesHigh: Float32Array | null;\n    terrainVerticesLow: Float32Array | null;\n    noDataVertices: Uint8Array | null;\n    bounds: NumberArray6;\n}\n\ntype MessageEventExt = MessageEvent & {\n    data: ITerrainWorkerData\n}\n\nclass TerrainWorker extends BaseWorker<TerrainInfo> {\n    constructor(numWorkers: number = 2) {\n        super(numWorkers, TERRAIN_PROGRAM);\n    }\n\n    protected override _onMessage(e: MessageEventExt) {\n        this._source.get(e.data.id)!.segment._terrainWorkerCallback(e.data);\n        this._source.delete(e.data.id);\n\n        e.data.normalMapNormals = null;\n        e.data.normalMapVertices = null;\n        e.data.normalMapVerticesHigh = null;\n        e.data.normalMapVerticesLow = null;\n        e.data.terrainVertices = null;\n        e.data.terrainVerticesHigh = null;\n        e.data.terrainVerticesLow = null;\n    }\n\n    public override make(info: TerrainInfo) {\n        if (info.segment.plainReady && info.segment.terrainIsLoading) {\n\n            if (this._workerQueue.length) {\n\n                const w = this._workerQueue.pop()!;\n\n                this._source.set(this._sourceId, info);\n\n                let segment = info.segment;\n\n                w.postMessage({\n                    'elevations': info.elevations,\n                    'this_plainVertices': segment.plainVertices,\n                    'this_plainNormals': segment.plainNormals,\n                    'this_normalMapVertices': segment.normalMapVertices,\n                    'this_normalMapNormals': segment.normalMapNormals,\n                    'heightFactor': segment.planet._heightFactor,\n                    'gridSize': segment.planet.terrain!.gridSizeByZoom[segment.tileZoom],\n                    'noDataValues': segment.planet.terrain!.noDataValues,\n                    'id': this._sourceId\n                }, [\n                    info.elevations.buffer,\n                    segment.plainVertices!.buffer,\n                    segment.plainNormals!.buffer,\n                    segment.normalMapVertices!.buffer,\n                    segment.normalMapNormals!.buffer\n                ]);\n\n                this._sourceId++;\n\n            } else {\n                this._pendingQueue.push(info);\n            }\n        } else {\n            this.check();\n        }\n    }\n}\n\nconst TERRAIN_PROGRAM =\n    `'use strict';\n    //\n    //Terrain worker\n    //\n\n    function binarySearchFast(arr, x) {\n        let start = 0,\n            end = arr.length - 1;\n        while (start <= end) {\n            let k = Math.floor((start + end) * 0.5); \n            if (Math.abs(arr[k] - x) < 1e-3)\n                return k;\n            else if (arr[k] < x)\n                start = k + 1;\n            else\n                end = k - 1;\n        }\n        return -1;\n    };\n\n    function checkNoDataValue(noDataValues, value) {\n        return binarySearchFast(noDataValues, value) !== -1;\n    };\n\n\n    var Vec3 = function(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    };\n\n    var doubleToTwoFloats = function(v, high, low) {\n\n        let x = v.x, y = v.y, z = v.z;\n    \n        if (x >= 0.0) {\n            var doubleHigh = Math.floor(x / 65536.0) * 65536.0;\n            high.x = Math.fround(doubleHigh);\n            low.x = Math.fround(x - doubleHigh);\n        } else {\n            var doubleHigh = Math.floor(-x / 65536.0) * 65536.0;\n            high.x = Math.fround(-doubleHigh);\n            low.x = Math.fround(x + doubleHigh);\n        }\n\n        if (y >= 0.0) {\n            var doubleHigh = Math.floor(y / 65536.0) * 65536.0;\n            high.y = Math.fround(doubleHigh);\n            low.y = Math.fround(y - doubleHigh);\n        } else {\n            var doubleHigh = Math.floor(-y / 65536.0) * 65536.0;\n            high.y = Math.fround(-doubleHigh);\n            low.y = Math.fround(y + doubleHigh);\n        }\n\n        if (z >= 0.0) {\n            var doubleHigh = Math.floor(z / 65536.0) * 65536.0;\n            high.z = Math.fround(doubleHigh);\n            low.z = Math.fround(z - doubleHigh);\n        } else {\n            var doubleHigh = Math.floor(-z / 65536.0) * 65536.0;\n            high.z = Math.fround(-doubleHigh);\n            low.z = Math.fround(z + doubleHigh);\n        }\n    };\n\n    Vec3.prototype.sub = function(v) {\n        return new Vec3(this.x - v.x, this.y - v.y, this.z - v.z);\n    };\n\n    Vec3.prototype.add = function(v) {\n        return new Vec3(this.x + v.x, this.y + v.y, this.z + v.z);\n    };\n\n    Vec3.prototype.cross = function(v) {\n        return new Vec3(\n            this.y * v.z - this.z * v.y,\n            this.z * v.x - this.x * v.z,\n            this.x * v.y - this.y * v.x\n        );\n    };\n\n    Vec3.prototype.normalize = function(v) {\n        var x = this.x, y = this.y, z = this.z;\n        var length = 1.0 / Math.sqrt(x * x + y * y + z * z);\n        this.x = x * length;\n        this.y = y * length;\n        this.z = z * length;\n        return this;\n    };\n\n    Vec3.prototype.distance = function(v) {\n        return this.sub(v).length();\n    };\n\n    Vec3.prototype.length = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    };\n\n    var blerp = function(x, y, fQ11, fQ21, fQ12, fQ22) {\n        return (fQ11 * (1.0 - x) * (1.0 - y) + fQ21 * x * (1.0 - y) + fQ12 * (1.0 - x) * y + fQ22 * x * y);\n    };\n    \n    var slice = function (t, h1, h0) {\n      return t * (h1 - h0);\n    };\n\n    var _tempVec = new Vec3(0.0, 0.0, 0.0);\n\n    var _tempHigh = new Vec3(0.0, 0.0, 0.0),\n        _tempLow = new Vec3(0.0, 0.0, 0.0);\n\n    self.onmessage = function (e) {\n        var elevations = e.data.elevations,\n            this_plainVertices = e.data.this_plainVertices,\n            this_plainNormals = e.data.this_plainNormals,\n            this_normalMapVertices = e.data.this_normalMapVertices,\n            this_normalMapNormals = e.data.this_normalMapNormals,\n            heightFactor =  e.data.heightFactor,\n            gridSize = e.data.gridSize,\n            noDataValues = e.data.noDataValues,\n            id = e.data.id;\n        \n        var xmin = 549755748352.0, xmax = -549755748352.0, \n            ymin = 549755748352.0, ymax = -549755748352.0, \n            zmin = 549755748352.0, zmax = -549755748352.0;\n\n        const fileGridSize = Math.sqrt(elevations.length) - 1;\n\n        const fileGridSize_one = fileGridSize + 1;\n        const fileGridSize_one_x2 = fileGridSize_one * fileGridSize_one;\n        const tgs = gridSize;\n        const dg = fileGridSize / tgs;\n        const gs = tgs + 1;\n        const hf = heightFactor;\n\n        var nmvInd = 0,\n            vInd = 0,\n            noDataInd = 0;\n\n        var gsgs3 = gs * gs * 3;\n\n        var terrainVertices = new Float64Array(gsgs3),\n            terrainVerticesHigh = new Float32Array(gsgs3),\n            terrainVerticesLow = new Float32Array(gsgs3),\n            noDataVertices = new Uint8Array(gs * gs);\n\n        var normalMapNormals,\n            normalMapVertices,\n            normalMapVerticesHigh,\n            normalMapVerticesLow;\n\n        var nv = this_normalMapVertices,\n            nn = this_normalMapNormals;\n\n        if (fileGridSize >= tgs) {\n\n            normalMapNormals = new Float32Array(fileGridSize_one_x2 * 3);\n            normalMapVertices = new Float64Array(fileGridSize_one_x2 * 3);\n            normalMapVerticesHigh = new Float32Array(fileGridSize_one_x2 * 3);\n            normalMapVerticesLow = new Float32Array(fileGridSize_one_x2 * 3);\n\n            for (let k = 0; k < fileGridSize_one_x2; k++) {\n\n                var j = k % fileGridSize_one,\n                    i = ~~(k / fileGridSize_one);\n\n                //\n                // V0\n                //\n                var hInd0 = k;\n                var vInd0 = hInd0 * 3;\n                var currElv = elevations[hInd0];\n                if(checkNoDataValue(noDataValues, currElv)) {\n                    currElv = 0.0;\n                }\n                var h0 = hf * currElv;\n                var v0 = new Vec3(nv[vInd0] + h0 * nn[vInd0], nv[vInd0 + 1] + h0 * nn[vInd0 + 1], nv[vInd0 + 2] + h0 * nn[vInd0 + 2]);\n                                \n                doubleToTwoFloats(v0, _tempHigh, _tempLow);\n\n                normalMapVertices[vInd0] = v0.x;\n                normalMapVertices[vInd0 + 1] = v0.y;\n                normalMapVertices[vInd0 + 2] = v0.z;\n\n                normalMapVerticesHigh[vInd0] = _tempHigh.x;\n                normalMapVerticesHigh[vInd0 + 1] = _tempHigh.y;\n                normalMapVerticesHigh[vInd0 + 2] = _tempHigh.z;\n\n                normalMapVerticesLow[vInd0] = _tempLow.x;\n                normalMapVerticesLow[vInd0 + 1] = _tempLow.y;\n                normalMapVerticesLow[vInd0 + 2] = _tempLow.z;\n\n                //\n                // The vertex goes into screen buffer\n                if (i % dg === 0 && j % dg === 0) {\n\n                    let currVert = new Vec3(nv[vInd0], nv[vInd0 + 1], nv[vInd0 + 2]);\n                    let nextVert = new Vec3(nv[vInd0 + 3], nv[vInd0 + 4], nv[vInd0 + 5]);\n\n                    let nextElv =  elevations[hInd0 + 1];\n                    if(checkNoDataValue(noDataValues, nextElv)) {\n                        nextElv = 0.0;\n                    }\n                    \n                    let eps = false;\n                    if(noDataValues.length === 0){\n                        let step = currVert.distance(nextVert);\n                        let deltaElv = Math.abs(currElv - nextElv);\n                        eps = ((deltaElv / step) > 10.0) || (currElv < -5000);\n                    }\n\n                    if(eps){\n                        noDataVertices[noDataInd] = 1;\n                    } else {\n                        noDataVertices[noDataInd] = 0;\n                        if (v0.x < xmin) xmin = v0.x; if (v0.x > xmax) xmax = v0.x;\n                        if (v0.y < ymin) ymin = v0.y; if (v0.y > ymax) ymax = v0.y;\n                        if (v0.z < zmin) zmin = v0.z; if (v0.z > zmax) zmax = v0.z;\n                    }\n\n                    terrainVerticesHigh[vInd] = _tempHigh.x;\n                    terrainVerticesLow[vInd] = _tempLow.x;\n                    terrainVertices[vInd++] = v0.x;\n\n                    terrainVerticesHigh[vInd] = _tempHigh.y;\n                    terrainVerticesLow[vInd] = _tempLow.y;\n                    terrainVertices[vInd++] = v0.y;\n\n                    terrainVerticesHigh[vInd] = _tempHigh.z;\n                    terrainVerticesLow[vInd] = _tempLow.z;\n                    terrainVertices[vInd++] = v0.z;\n\n                    noDataInd++;\n                }\n\n                if (i !== fileGridSize && j !== fileGridSize) {\n\n                    //\n                    //  V1\n                    //\n                    var hInd1 = k + 1;\n                    var vInd1 = hInd1 * 3;\n                    var elv = elevations[hInd1];\n                    if(checkNoDataValue(noDataValues, elv)) {\n                        elv = 0.0;\n                    }\n                    var h1 = hf * elv;\n                    var v1 = new Vec3(nv[vInd1] + h1 * nn[vInd1], nv[vInd1 + 1] + h1 * nn[vInd1 + 1], nv[vInd1 + 2] + h1 * nn[vInd1 + 2]);\n\n                    doubleToTwoFloats(v1, _tempHigh, _tempLow);\n\n                    normalMapVertices[vInd1] = v1.x;\n                    normalMapVertices[vInd1 + 1] = v1.y;\n                    normalMapVertices[vInd1 + 2] = v1.z;\n\n                    normalMapVerticesHigh[vInd1] = _tempHigh.x;\n                    normalMapVerticesHigh[vInd1 + 1] = _tempHigh.y;\n                    normalMapVerticesHigh[vInd1 + 2] = _tempHigh.z;\n\n                    normalMapVerticesLow[vInd1] = _tempLow.x;\n                    normalMapVerticesLow[vInd1 + 1] = _tempLow.y;\n                    normalMapVerticesLow[vInd1 + 2] = _tempLow.z;\n\n                    //\n                    //  V2\n                    //\n                    var hInd2 = k + fileGridSize_one;\n                    var vInd2 = hInd2 * 3;\n                    var elv = elevations[hInd2];\n                    if(checkNoDataValue(noDataValues, elv)) {\n                        elv = 0.0;\n                    }\n                    var h2 = hf * elv;\n                    var v2 = new Vec3(nv[vInd2] + h2 * nn[vInd2], nv[vInd2 + 1] + h2 * nn[vInd2 + 1], nv[vInd2 + 2] + h2 * nn[vInd2 + 2]);\n\n                    doubleToTwoFloats(v2, _tempHigh, _tempLow);\n\n                    normalMapVertices[vInd2] = v2.x;\n                    normalMapVertices[vInd2 + 1] = v2.y;\n                    normalMapVertices[vInd2 + 2] = v2.z;\n\n                    normalMapVerticesHigh[vInd2] = _tempHigh.x;\n                    normalMapVerticesHigh[vInd2 + 1] = _tempHigh.y;\n                    normalMapVerticesHigh[vInd2 + 2] = _tempHigh.z;\n\n                    normalMapVerticesLow[vInd2] = _tempLow.x;\n                    normalMapVerticesLow[vInd2 + 1] = _tempLow.y;\n                    normalMapVerticesLow[vInd2 + 2] = _tempLow.z;\n\n                    //\n                    //  V3\n                    //\n                    var hInd3 = k + fileGridSize_one + 1;\n                    var vInd3 = hInd3 * 3;\n                    var elv = elevations[hInd3];\n                    if(checkNoDataValue(noDataValues, elv)) {\n                        elv = 0.0;\n                    }\n                    var h3 = hf * elv;\n                    var v3 = new Vec3(nv[vInd3] + h3 * nn[vInd3], nv[vInd3 + 1] + h3 * nn[vInd3 + 1], nv[vInd3 + 2] + h3 * nn[vInd3 + 2]);\n\n                    doubleToTwoFloats(v3, _tempHigh, _tempLow);\n\n                    normalMapVertices[vInd3] = v3.x;\n                    normalMapVertices[vInd3 + 1] = v3.y;\n                    normalMapVertices[vInd3 + 2] = v3.z;\n\n                    normalMapVerticesHigh[vInd3] = _tempHigh.x;\n                    normalMapVerticesHigh[vInd3 + 1] = _tempHigh.y;\n                    normalMapVerticesHigh[vInd3 + 2] = _tempHigh.z;\n\n                    normalMapVerticesLow[vInd3] = _tempLow.x;\n                    normalMapVerticesLow[vInd3 + 1] = _tempLow.y;\n                    normalMapVerticesLow[vInd3 + 2] = _tempLow.z;\n\n                    //\n                    // Normal\n                    //\n                    var e10 = v1.sub(v0),\n                        e20 = v2.sub(v0),\n                        e30 = v3.sub(v0);\n                    var sw = e20.cross(e30).normalize();\n                    var ne = e30.cross(e10).normalize();\n                    var n0 = ne.add(sw).normalize();\n\n                    normalMapNormals[vInd0] += n0.x;\n                    normalMapNormals[vInd0 + 1] += n0.y;\n                    normalMapNormals[vInd0 + 2] += n0.z;\n\n                    normalMapNormals[vInd1] += ne.x;\n                    normalMapNormals[vInd1 + 1] += ne.y;\n                    normalMapNormals[vInd1 + 2] += ne.z;\n\n                    normalMapNormals[vInd2] += sw.x;\n                    normalMapNormals[vInd2 + 1] += sw.y;\n                    normalMapNormals[vInd2 + 2] += sw.z;\n\n                    normalMapNormals[vInd3] += n0.x;\n                    normalMapNormals[vInd3 + 1] += n0.y;\n                    normalMapNormals[vInd3 + 2] += n0.z;\n                }\n            }\n\n        } else {\n\n            normalMapNormals = new Float32Array(gsgs3);\n            normalMapVertices = new Float64Array(gsgs3);\n            normalMapVerticesHigh = new Float32Array(gsgs3);\n            normalMapVerticesLow = new Float32Array(gsgs3);\n            normalMapNormals = new Float32Array(gsgs3);\n\n            var oneSize = tgs / fileGridSize;\n            var h, inside_i, inside_j, v_i, v_j;\n            var gsgs = gsgs3 / 3;\n            var fgsOne = fileGridSize + 1;\n\n            for(let i = 0; i < gsgs; i++) {\n                let ii = Math.floor(i / gs),\n                    ij = i % gs;\n              \n                let qii = ii % oneSize,\n                    qij = ij % oneSize;\n\n                let hlt_ind = Math.floor(ii / oneSize) * fgsOne + Math.floor(ij / oneSize);\n\n                if (ij === tgs) {\n                    hlt_ind -= 1;\n                    qij = oneSize;\n                }\n\n                if (ii === tgs) {\n                    hlt_ind -= fgsOne;\n                    qii = oneSize;\n                }\n\n                let hrt_ind = hlt_ind + 1,\n                    hlb_ind = hlt_ind + fgsOne,\n                    hrb_ind = hlb_ind + 1;\n\n                let h_lt = elevations[hlt_ind],\n                    h_rt = elevations[hrt_ind],\n                    h_lb = elevations[hlb_ind],\n                    h_rb = elevations[hrb_ind];\n\n                if(checkNoDataValue(noDataValues, h_lt)) {\n                    h_lt = 0.0;\n                }\n\n                if(checkNoDataValue(noDataValues, h_rt)) {\n                    h_rt = 0.0;\n                }\n\n                if(checkNoDataValue(noDataValues, h_lb)) {\n                    h_lb = 0.0;\n                }\n\n                if(checkNoDataValue(noDataValues, h_rb)) {\n                    h_rb = 0.0;\n                }\n\n                let hi = blerp(qij / oneSize, qii / oneSize, h_lt, h_rt, h_lb, h_rb);\n\n                let i3 = i * 3;\n\n                _tempVec.x = this_plainVertices[i3] + hi * this_plainNormals[i3],\n                _tempVec.y = this_plainVertices[i3 + 1] + hi * this_plainNormals[i3 + 1],\n                _tempVec.z = this_plainVertices[i3 + 2] + hi * this_plainNormals[i3 + 2];\n\n                doubleToTwoFloats(_tempVec, _tempHigh, _tempLow);\n\n                terrainVertices[i3] = _tempVec.x;\n                terrainVertices[i3 + 1] = _tempVec.y;\n                terrainVertices[i3 + 2] = _tempVec.z;\n\n                terrainVerticesHigh[i3] = _tempHigh.x;\n                terrainVerticesHigh[i3 + 1] = _tempHigh.y;\n                terrainVerticesHigh[i3 + 2] = _tempHigh.z;\n\n                terrainVerticesLow[i3] = _tempLow.x;\n                terrainVerticesLow[i3 + 1] = _tempLow.y;\n                terrainVerticesLow[i3 + 2] = _tempLow.z;\n\n                if (_tempVec.x < xmin) xmin = _tempVec.x; if (_tempVec.x > xmax) xmax = _tempVec.x;\n                if (_tempVec.y < ymin) ymin = _tempVec.y; if (_tempVec.y > ymax) ymax = _tempVec.y;\n                if (_tempVec.z < zmin) zmin = _tempVec.z; if (_tempVec.z > zmax) zmax = _tempVec.z;\n            }\n\n            normalMapVertices.set(terrainVertices);\n            normalMapVerticesHigh.set(terrainVerticesHigh);\n            normalMapVerticesLow.set(terrainVerticesLow);\n\n            for (let k = 0; k < gsgs; k++) {\n\n                var j = k % gs,\n                    i = ~~(k / gs);\n\n                if (i !== tgs && j !== tgs) {\n                    var v0ind = k * 3,\n                        v1ind = v0ind + 3,\n                        v2ind = v0ind + gs * 3,\n                        v3ind = v2ind + 3;\n\n\n                    var v0 = new Vec3(terrainVertices[v0ind], terrainVertices[v0ind + 1], terrainVertices[v0ind + 2]),\n                        v1 = new Vec3(terrainVertices[v1ind], terrainVertices[v1ind + 1], terrainVertices[v1ind + 2]),\n                        v2 = new Vec3(terrainVertices[v2ind], terrainVertices[v2ind + 1], terrainVertices[v2ind + 2]),\n                        v3 = new Vec3(terrainVertices[v3ind], terrainVertices[v3ind + 1], terrainVertices[v3ind + 2]);\n\n                    var e10 = v1.sub(v0).normalize(),\n                        e20 = v2.sub(v0).normalize(),\n                        e30 = v3.sub(v0).normalize();\n\n                    var sw = e20.cross(e30).normalize();\n                    var ne = e30.cross(e10).normalize();\n                    var n0 = ne.add(sw).normalize();\n\n                    normalMapNormals[v0ind] += n0.x;\n                    normalMapNormals[v0ind + 1] += n0.y;\n                    normalMapNormals[v0ind + 2] += n0.z;\n\n                    normalMapNormals[v1ind] += ne.x;\n                    normalMapNormals[v1ind + 1] += ne.y;\n                    normalMapNormals[v1ind + 2] += ne.z;\n\n                    normalMapNormals[v2ind] += sw.x;\n                    normalMapNormals[v2ind + 1] += sw.y;\n                    normalMapNormals[v2ind + 2] += sw.z;\n\n                    normalMapNormals[v3ind] += n0.x;\n                    normalMapNormals[v3ind + 1] += n0.y;\n                    normalMapNormals[v3ind + 2] += n0.z;\n                }\n            }\n        }\n\n        self.postMessage({\n                id: id,\n                normalMapNormals: normalMapNormals,\n                normalMapVertices: normalMapVertices,\n                normalMapVerticesHigh: normalMapVerticesHigh,\n                normalMapVerticesLow: normalMapVerticesLow,\n                terrainVertices: terrainVertices,\n                terrainVerticesHigh: terrainVerticesHigh,\n                terrainVerticesLow: terrainVerticesLow,\n                noDataVertices: noDataVertices,\n                //bounds: [xmin, xmax, ymin, ymax, zmin, zmax]\n                bounds: [xmin, ymin, zmin, xmax, ymax, zmax]\n             }, [\n                    normalMapNormals.buffer, \n                    normalMapVertices.buffer, \n                    normalMapVerticesHigh.buffer, \n                    normalMapVerticesLow.buffer, \n                    terrainVertices.buffer,\n                    terrainVerticesHigh.buffer,\n                    terrainVerticesLow.buffer,\n                    noDataVertices.buffer\n            ]);\n    }`;\n\nexport {TerrainWorker};\n","import {doubleToTwoFloats2} from '../math/coder';\nimport {Framebuffer} from '../webgl/Framebuffer';\nimport {Handler} from \"../webgl/Handler\";\nimport {Material} from \"../layer/Material\";\nimport {Program} from '../webgl/Program';\nimport {Planet} from \"../scene/Planet\";\nimport {RENDERING} from '../quadTree/quadTree';\nimport {Vector} from \"../layer/Vector\";\n\nlet tempArr = new Float32Array(2);\n\nconst MAX_FRAME_TIME = 25.0;\n\nexport class VectorTileCreator {\n    protected _width: number;\n    protected _height: number;\n    protected _planet: Planet;\n    protected _framebuffer: Framebuffer | null;\n    protected _queue: Material[];\n    protected _handler: Handler | null;\n\n    constructor(planet: Planet, width: number = 512, height: number = 512) {\n        this._width = width;\n        this._height = height;\n        this._planet = planet;\n        this._framebuffer = null;\n        this._queue = [];\n        this._handler = null;\n    }\n\n    public init() {\n\n        this._handler = this._planet.renderer!.handler;\n\n        //Line\n        if (!this._handler.programs.vectorTileLineRasterization) {\n            this._handler.addProgram(new Program(\"vectorTileLineRasterization\", {\n                uniforms: {\n                    'viewport': \"vec2\",\n                    'thicknessOutline': \"float\",\n                    'alpha': \"float\",\n                    'extentParamsHigh': \"vec4\",\n                    'extentParamsLow': \"vec4\"\n                },\n                attributes: {\n                    'prevHigh': \"vec2\",\n                    'currentHigh': \"vec2\",\n                    'nextHigh': \"vec2\",\n\n                    'prevLow': \"vec2\",\n                    'currentLow': \"vec2\",\n                    'nextLow': \"vec2\",\n\n                    'order': \"float\",\n                    'color': \"vec4\",\n                    'thickness': \"float\"\n                },\n                vertexShader:\n                    `attribute vec2 prevHigh;\n                attribute vec2 currentHigh;\n                attribute vec2 nextHigh;\n\n                attribute vec2 prevLow;\n                attribute vec2 currentLow;\n                attribute vec2 nextLow;\n\n                attribute float order;\n                attribute float thickness;\n                attribute vec4 color;\n                uniform float thicknessOutline;\n                uniform vec2 viewport;\n                uniform vec4 extentParamsHigh;\n                uniform vec4 extentParamsLow;\n                varying vec4 vColor;\n                \n                vec2 proj(vec2 coordHigh, vec2 coordLow) {\n                    vec2 highDiff = coordHigh - extentParamsHigh.xy;\n                    vec2 lowDiff = coordLow - extentParamsLow.xy;                    \n                    return vec2(-1.0 + (highDiff * step(1.0, length(highDiff)) + lowDiff) * extentParamsHigh.zw) * vec2(1.0, -1.0);\n                }\n                \n                void main(){\n                    vColor = color;\n\n                    vec2 vNext = proj(nextHigh, nextLow),\n                         vCurrent = proj(currentHigh, currentLow),\n                         vPrev = proj(prevHigh, prevLow);\n\n                    vec2 _next = vNext;\n                    vec2 _prev = vPrev;\n                    vec2 _current = vCurrent;\n\n                    if(_prev == _current){\n                        if(_next == _current){\n                            _next = _current + vec2(1.0, 0.0);\n                            _prev = _current - _next;\n                        }else{\n                            _prev = _current + normalize(_current - _next);\n                        }\n                    }\n\n                    if(_next == _current){\n                        _next = _current + normalize(_current - _prev);\n                    }\n\n                    vec2 sNext = _next;\n                    vec2 sCurrent = _current;\n                    vec2 sPrev = _prev;\n                    \n                    vec2 dirNext = normalize(sNext - sCurrent);\n                    vec2 dirPrev = normalize(sPrev - sCurrent);\n                    float dotNP = dot(dirNext, dirPrev);\n                    \n                    vec2 normalNext = normalize(vec2(-dirNext.y, dirNext.x));\n                    vec2 normalPrev = normalize(vec2(dirPrev.y, -dirPrev.x));\n                    vec2 d = (thickness + thicknessOutline) * 0.5 * sign(order) / viewport;\n                    \n                    vec2 m;\n                    if(dotNP >= 0.99991){\n                        m = sCurrent - normalPrev * d;\n                    }else{\n                        vec2 dir = normalPrev + normalNext;\n                        m = sCurrent + dir * d / (dirNext.x * dir.y - dirNext.y * dir.x);\n                        \n                        if( dotNP > 0.5 && dot(dirNext + dirPrev, m - sCurrent) < 0.0 ){\n                            float occw = order * sign(dirNext.x * dirPrev.y - dirNext.y * dirPrev.x);\n                            if(occw == -1.0){\n                                m = sCurrent + normalPrev * d;\n                            }else if(occw == 1.0){\n                                m = sCurrent + normalNext * d;\n                            }else if(occw == -2.0){\n                                m = sCurrent + normalNext * d;\n                            }else if(occw == 2.0){\n                                m = sCurrent + normalPrev * d;\n                            }\n                        }else if(distance(sCurrent, m) > min(distance(sCurrent, sNext), distance(sCurrent, sPrev))){\n                            m = sCurrent + normalNext * d;\n                        }\n                    }\n                    gl_Position = vec4(m.x, m.y, 0.0, 1.0);\n                }`,\n                fragmentShader: `precision highp float;\n                uniform float alpha;\n                varying vec4 vColor;\n                void main() {\n                    gl_FragColor = vec4(vColor.rgb, alpha * vColor.a);\n                }`\n            }));\n        }\n\n        //Polygon\n        if (!this._handler.programs.vectorTilePolygonRasterization) {\n            this._handler.addProgram(new Program(\"vectorTilePolygonRasterization\", {\n                uniforms: {\n                    'extentParamsHigh': \"vec4\",\n                    'extentParamsLow': \"vec4\"\n                },\n                attributes: {\n                    'coordinatesHigh': \"vec2\",\n                    'coordinatesLow': \"vec2\",\n                    'colors': \"vec4\"\n                },\n                vertexShader:\n                    `attribute vec2 coordinatesHigh;\n                attribute vec2 coordinatesLow; \n                attribute vec4 colors; \n                uniform vec4 extentParamsHigh; \n                uniform vec4 extentParamsLow; \n                varying vec4 color;\n\n                vec2 proj(vec2 coordHigh, vec2 coordLow) {\n                    vec2 highDiff = coordHigh - extentParamsHigh.xy;\n                    vec2 lowDiff = coordLow - extentParamsLow.xy;\n                    return vec2(-1.0 + (highDiff * step(1.0, length(highDiff)) + lowDiff) * extentParamsHigh.zw) * vec2(1.0, -1.0);\n                }\n\n                void main() { \n                    color = colors;\n                    gl_Position = vec4(proj(coordinatesHigh, coordinatesLow), 0.0, 1.0); \n                }`,\n                fragmentShader:\n                    `precision highp float;\n                varying vec4 color;\n                void main () {  \n                    gl_FragColor = color; \n                }`\n            }));\n        }\n\n        this._framebuffer = new Framebuffer(this._handler, {\n            width: this._width,\n            height: this._height,\n            useDepth: false\n        });\n\n        this._framebuffer.init();\n    }\n\n    public frame() {\n        if (this._planet.layerLock.isFree() && this._queue.length) {\n            let h = this._handler!,\n                gl = h.gl!;\n\n            gl.disable(gl.CULL_FACE);\n            gl.disable(gl.DEPTH_TEST);\n\n            let hLine = h.programs.vectorTileLineRasterization,\n                hPoly = h.programs.vectorTilePolygonRasterization;\n\n            let _w = this._width,\n                _h = this._height,\n                width = _w,\n                height = _h,\n                _w2 = width << 1,\n                _h2 = height << 1;\n\n            // var prevLayerId = -1;\n\n            let extentParamsHigh = new Float32Array(4);\n            let extentParamsLow = new Float32Array(4);\n\n            let f = this._framebuffer!.activate();\n\n            let deltaTime = 0,\n                startTime = window.performance.now();\n\n            while (this._queue.length && deltaTime < MAX_FRAME_TIME) {\n                let material = this._queue.shift()!;\n                if (material.isLoading && material.segment.node.getState() === RENDERING) {\n                    let pickingEnabled = material.layer._pickingEnabled;\n\n                    if (material.segment.tileZoom < 4) {\n                        width = _w2;\n                        height = _h2;\n                    } else {\n                        width = _w;\n                        height = _h;\n                    }\n\n                    let texture = material._updateTexture || h.createEmptyTexture_l(width, height);\n                    let pickingMask = pickingEnabled ? material._updatePickingMask || h.createEmptyTexture_n(width, height) : null;\n\n                    material.applyTexture(texture, pickingMask);\n\n                    f.setSize(width, height);\n\n                    f.bindOutputTexture(texture!);\n\n                    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n                    gl.clear(gl.COLOR_BUFFER_BIT);\n\n                    let extent = material.segment.getExtentMerc();\n\n                    doubleToTwoFloats2(extent.southWest.lon, tempArr);\n                    extentParamsHigh[0] = tempArr[0];\n                    extentParamsLow[0] = tempArr[1];\n\n                    doubleToTwoFloats2(extent.southWest.lat, tempArr);\n                    extentParamsHigh[1] = tempArr[0];\n                    extentParamsLow[1] = tempArr[1];\n\n                    extentParamsHigh[2] = 2.0 / extent.getWidth();\n                    extentParamsHigh[3] = 2.0 / extent.getHeight();\n\n                    hPoly.activate();\n                    let sh = hPoly._program;\n                    let sha = sh.attributes,\n                        shu = sh.uniforms;\n\n                    let geomHandler = (material.layer as Vector)._geometryHandler;\n\n                    //=========================================\n                    //Polygon rendering\n                    //=========================================\n                    gl.uniform4fv(shu.extentParamsHigh, extentParamsHigh);\n                    gl.uniform4fv(shu.extentParamsLow, extentParamsLow);\n\n                    gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._polyVerticesHighBufferMerc!);\n                    gl.vertexAttribPointer(sha.coordinatesHigh, geomHandler._polyVerticesHighBufferMerc!.itemSize, gl.FLOAT, false, 0, 0);\n\n                    gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._polyVerticesLowBufferMerc!);\n                    gl.vertexAttribPointer(sha.coordinatesLow, geomHandler._polyVerticesLowBufferMerc!.itemSize, gl.FLOAT, false, 0, 0);\n\n                    gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._polyColorsBuffer!);\n                    gl.vertexAttribPointer(sha.colors, geomHandler._polyColorsBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n                    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, geomHandler._polyIndexesBuffer!);\n\n                    gl.drawElements(gl.TRIANGLES, geomHandler._polyIndexesBuffer!.numItems, gl.UNSIGNED_INT, 0);\n\n                    //Polygon picking PASS\n                    if (pickingEnabled) {\n                        f.bindOutputTexture(pickingMask!);\n\n                        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n                        gl.clear(gl.COLOR_BUFFER_BIT);\n\n                        gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._polyPickingColorsBuffer!);\n                        gl.vertexAttribPointer(sha.colors, geomHandler._polyPickingColorsBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n                        gl.drawElements(gl.TRIANGLES, geomHandler._polyIndexesBuffer!.numItems, gl.UNSIGNED_INT, 0);\n                    }\n\n                    //=========================================\n                    //Strokes and linestrings rendering\n                    //=========================================\n                    f.bindOutputTexture(texture!);\n\n                    hLine.activate();\n                    sh = hLine._program;\n                    sha = sh.attributes;\n                    shu = sh.uniforms;\n\n                    gl.uniform2fv(shu.viewport, [width, height]);\n\n                    gl.uniform4fv(shu.extentParamsHigh, extentParamsHigh);\n                    gl.uniform4fv(shu.extentParamsLow, extentParamsLow);\n\n                    //vertex\n                    let mb = geomHandler._lineVerticesHighBufferMerc!;\n                    gl.bindBuffer(gl.ARRAY_BUFFER, mb);\n\n                    gl.vertexAttribPointer(sha.prevHigh, mb.itemSize, gl.FLOAT, false, 8, 0);\n                    gl.vertexAttribPointer(sha.currentHigh, mb.itemSize, gl.FLOAT, false, 8, 32);\n                    gl.vertexAttribPointer(sha.nextHigh, mb.itemSize, gl.FLOAT, false, 8, 64);\n\n                    mb = geomHandler._lineVerticesLowBufferMerc!;\n                    gl.bindBuffer(gl.ARRAY_BUFFER, mb);\n\n                    gl.vertexAttribPointer(sha.prevLow, mb.itemSize, gl.FLOAT, false, 8, 0);\n                    gl.vertexAttribPointer(sha.currentLow, mb.itemSize, gl.FLOAT, false, 8, 32);\n                    gl.vertexAttribPointer(sha.nextLow, mb.itemSize, gl.FLOAT, false, 8, 64);\n\n                    //order\n                    gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._lineOrdersBuffer!);\n                    gl.vertexAttribPointer(sha.order, geomHandler._lineOrdersBuffer!.itemSize, gl.FLOAT, false, 4, 0);\n\n                    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, geomHandler._lineIndexesBuffer!);\n\n                    //PASS - stroke\n                    gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._lineStrokesBuffer!);\n                    gl.vertexAttribPointer(sha.thickness, geomHandler._lineStrokesBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n                    gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._lineStrokeColorsBuffer!);\n                    gl.vertexAttribPointer(sha.color, geomHandler._lineStrokeColorsBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n                    //Antialias pass\n                    gl.uniform1f(shu.thicknessOutline, 2);\n                    gl.uniform1f(shu.alpha, 0.54);\n                    gl.drawElements(gl.TRIANGLE_STRIP, geomHandler._lineIndexesBuffer!.numItems, gl.UNSIGNED_INT, 0);\n                    //\n                    //Aliased pass\n                    gl.uniform1f(shu.thicknessOutline, 1);\n                    gl.uniform1f(shu.alpha, 1.0);\n                    gl.drawElements(gl.TRIANGLE_STRIP, geomHandler._lineIndexesBuffer!.numItems, gl.UNSIGNED_INT, 0);\n\n                    //PASS - inside line\n                    gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._lineThicknessBuffer!);\n                    gl.vertexAttribPointer(sha.thickness, geomHandler._lineThicknessBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n                    gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._lineColorsBuffer!);\n                    gl.vertexAttribPointer(sha.color, geomHandler._lineColorsBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n\n                    //Antialias pass\n                    gl.uniform1f(shu.thicknessOutline, 2);\n                    gl.uniform1f(shu.alpha, 0.54);\n                    gl.drawElements(gl.TRIANGLE_STRIP, geomHandler._lineIndexesBuffer!.numItems, gl.UNSIGNED_INT, 0);\n                    //\n                    //Aliased pass\n                    gl.uniform1f(shu.thicknessOutline, 1);\n                    gl.uniform1f(shu.alpha, 1.0);\n                    gl.drawElements(gl.TRIANGLE_STRIP, geomHandler._lineIndexesBuffer!.numItems, gl.UNSIGNED_INT, 0);\n\n                    if (pickingEnabled) {\n                        f.bindOutputTexture(pickingMask!);\n                        gl.uniform1f(shu.thicknessOutline, 8);\n                        gl.bindBuffer(gl.ARRAY_BUFFER, geomHandler._linePickingColorsBuffer!);\n                        gl.vertexAttribPointer(sha.color, geomHandler._linePickingColorsBuffer!.itemSize, gl.FLOAT, false, 0, 0);\n                        gl.drawElements(gl.TRIANGLE_STRIP, geomHandler._lineIndexesBuffer!.numItems, gl.UNSIGNED_INT, 0);\n                    }\n                } else {\n                    material.isLoading = false;\n                }\n\n                deltaTime = window.performance.now() - startTime;\n            }\n\n            gl.enable(gl.DEPTH_TEST);\n            gl.enable(gl.CULL_FACE);\n\n            f.deactivate();\n        }\n    }\n\n    public add(material: Material) {\n        this._queue.push(material);\n    }\n\n    public remove(material: Material) {\n        //...\n    }\n\n    public get queueSize(): number {\n        return this._queue.length;\n    }\n}\n","import {LonLat} from \"../LonLat\";\nimport {Quat} from \"../math/Quat\";\nimport {Vec3} from \"../math/Vec3\";\nimport {DEGREES, EPS1, EPS12, EPS15, RADIANS, zeroTwoPI} from \"../math\";\n\nexport interface IInverseResult {\n    distance: number;\n    initialAzimuth: number;\n    finalAzimuth: number;\n}\n\nexport interface IDirectResult {\n    destination: LonLat;\n    finalAzimuth: number;\n}\n\n/**\n * Class represents a plant ellipsoid.\n * @class\n * @param {number} equatorialSize - Equatorial ellipsoid size.\n * @param {number} polarSize - Polar ellipsoid size.\n */\nclass Ellipsoid {\n\n    /**\n     * Equatorial size\n     * @type {number}\n     * @protected\n     */\n    protected _a: number;\n\n    /**\n     * Polar size\n     * @type {number}\n     * @protected\n     */\n    protected _b: number;\n    protected _flattening: number;\n    protected _f: number;\n    protected _a2: number;\n    protected _b2: number;\n    protected _e: number;\n    protected _e2: number;\n    protected _e22: number;\n    protected _k: number;\n    protected _k2: number;\n    protected _radii: Vec3;\n    protected _radii2: Vec3;\n    protected _invRadii: Vec3;\n    public _invRadii2: Vec3;\n\n    constructor(equatorialSize: number = 1, polarSize: number = 1) {\n        this._a = equatorialSize;\n        this._b = polarSize;\n        this._flattening = (equatorialSize - polarSize) / equatorialSize;\n        this._f = 1 / this._flattening;\n\n        this._a2 = equatorialSize * equatorialSize;\n        this._b2 = polarSize * polarSize;\n\n        const qa2b2 = Math.sqrt(this._a2 - this._b2);\n\n        this._e = qa2b2 / equatorialSize;\n        this._e2 = this._e * this._e;\n        this._e22 = this._e2 * this._e2;\n\n        this._k = qa2b2 / polarSize;\n        this._k2 = this._k * this._k;\n\n        this._radii = new Vec3(equatorialSize, equatorialSize, polarSize);\n        this._radii2 = new Vec3(this._a2, this._a2, this._b2);\n        this._invRadii = new Vec3(1.0 / equatorialSize, 1.0 / equatorialSize, 1.0 / polarSize);\n        this._invRadii2 = new Vec3(1.0 / this._a2, 1.0 / this._a2, 1.0 / this._b2);\n    }\n\n    /**\n     * Returns the distance travelling from ‚Äòthis‚Äô point to destination point along a rhumb line.\n     * @param   {LonLat} startLonLat coordinates.\n     * @param   {LonLat} endLonLat coordinates\n     * @returns {number} Distance in m between this point and destination point (same units as radius).\n     */\n    public rhumbDistanceTo(startLonLat: LonLat, endLonLat: LonLat): number {\n        const f1 = startLonLat.lat * RADIANS;\n        const f2 = endLonLat.lat * RADIANS;\n        const df = f2 - f1;\n        let d = Math.abs(endLonLat.lon - startLonLat.lon) * RADIANS;\n        if (Math.abs(d) > Math.PI) d = d > 0 ? -(2 * Math.PI - d) : (2 * Math.PI + d);\n        const dd = Math.log(Math.tan(f2 / 2 + Math.PI / 4) / Math.tan(f1 / 2 + Math.PI / 4));\n        const q = Math.abs(dd) > 10e-12 ? df / dd : Math.cos(f1);\n        const t = Math.sqrt(df * df + q * q * d * d); // angular distance in radians\n        return t * this._a;\n    }\n\n    /**\n     * Returns the point at given fraction between two points on the great circle.\n     * @param   {LonLat} lonLat1 - Longitude/Latitude of source point.\n     * @param   {LonLat} lonLat2 - Longitude/Latitude of destination point.\n     * @param   {number} fraction - Fraction between the two points (0 = source point, 1 = destination point).\n     * @returns {LonLat} Intermediate point between points.\n     */\n    public getIntermediatePointOnGreatCircle(lonLat1: LonLat, lonLat2: LonLat, fraction: number): LonLat {\n        if (fraction == 0) return lonLat1.clone();\n        if (fraction == 1) return lonLat2.clone();\n        const inverse = this.inverse(lonLat1, lonLat2);\n        const dist = inverse.distance;\n        const azimuth = inverse.initialAzimuth;\n        return isNaN(azimuth) ? lonLat1 : this.getGreatCircleDestination(lonLat1, azimuth, dist * fraction);\n    }\n\n    /**\n     * REMOVE ASAP after\n     * @param lonLat1\n     * @param lonLat2\n     * @returns {number}\n     */\n    static getBearing(lonLat1: LonLat, lonLat2: LonLat): number {\n        let f1 = lonLat1.lat * RADIANS,\n            l1 = lonLat1.lon * RADIANS;\n        let f2 = lonLat2.lat * RADIANS,\n            l2 = lonLat2.lon * RADIANS;\n        let y = Math.sin(l2 - l1) * Math.cos(f2);\n        let x = Math.cos(f1) * Math.sin(f2) - Math.sin(f1) * Math.cos(f2) * Math.cos(l2 - l1);\n        return Math.atan2(y, x) * DEGREES;\n    }\n\n    public getFlattening(): number {\n        return this._flattening;\n    }\n\n    /**\n     * Gets ellipsoid equatorial size.\n     * @public\n     * @returns {number} -\n     */\n    public getEquatorialSize(): number {\n        return this._a;\n    }\n\n    public get equatorialSize(): number {\n        return this._a;\n    }\n\n    public get equatorialSizeSqr(): number {\n        return this._a2;\n    }\n\n    /**\n     * Gets ellipsoid polar size.\n     * @public\n     * @returns {number} -\n     */\n    public getPolarSize(): number {\n        return this._b;\n    }\n\n    public get polarSize(): number {\n        return this._b;\n    }\n\n    public get polarSizeSqr(): number {\n        return this._b2;\n    }\n\n    /**\n     * Calculate cartesian coordinates by its ECEF geodetic coordinates.\n     * @public\n     * @param {LonLat} lonlat - Geodetic coordinates.\n     * @returns {Vec3} -\n     */\n    public lonLatToCartesian(lonlat: LonLat): Vec3 {\n        return this.geodeticToCartesian(lonlat.lon, lonlat.lat, lonlat.height);\n    }\n\n    /**\n     * Calculate cartesian coordinates by its ECEF geodetic coordinates.\n     * @public\n     * @param {LonLat} lonlat - Geodetic coordinates.\n     * @param {Vec3} res - Output variable reference.\n     * @returns {Vec3} -\n     */\n    public lonLatToCartesianRes(lonlat: LonLat, res: Vec3): Vec3 {\n        return this.geodeticToCartesian(lonlat.lon, lonlat.lat, lonlat.height, res);\n    }\n\n    /**\n     * Gets cartesian ECEF 3d coordinates from geodetic coordinates.\n     * @public\n     * @param {Number} lon - Longitude.\n     * @param {Number} lat - Latitude.\n     * @param {Number} height - Height.\n     * @param {Vec3} res - Output result variable.\n     * @returns {Vec3} -\n     */\n    public geodeticToCartesian(lon: number, lat: number, height: number = 0, res: Vec3 = new Vec3()): Vec3 {\n        let latrad = RADIANS * lat,\n            lonrad = RADIANS * lon;\n\n        let slt = Math.sin(latrad);\n\n        let N = this._a / Math.sqrt(1 - this._e2 * slt * slt);\n        let nc = (N + height) * Math.cos(latrad);\n\n        res.x = nc * Math.cos(lonrad);\n        res.y = nc * Math.sin(lonrad);\n        res.z = (N * (1 - this._e2) + height) * slt;\n\n        return res;\n    }\n\n    /**\n     * Gets Wgs84 geodetic coordinates from cartesian ECEF.\n     * @public\n     * @param {Vec3} p - Cartesian coordinates.\n     * @returns {LonLat} -\n     */\n    public projToSurface(p: Vec3): Vec3 {\n\n        let pX = p.x || 0.0,\n            pY = p.y || 0.0,\n            pZ = p.z || 0.0;\n\n        let length = Math.sqrt(pX * pX + pY * pY + pZ * pZ);\n\n        if (length === 0) {\n            return this.lonLatToCartesian(new LonLat());\n        }\n\n        let invRadii2X = this._invRadii2.x,\n            invRadii2Y = this._invRadii2.y,\n            invRadii2Z = this._invRadii2.z;\n\n        let x2 = pX * pX * invRadii2X,\n            y2 = pY * pY * invRadii2Y,\n            z2 = pZ * pZ * invRadii2Z;\n\n        let norm = x2 + y2 + z2;\n        let ratio = Math.sqrt(1.0 / norm);\n        let first = p.scaleTo(ratio);\n\n        if (norm < EPS1) {\n            return !Number.isFinite(ratio) ? new Vec3() : first\n        }\n\n        let lambda = ((1.0 - ratio) * length) / first.mulA(this._invRadii2).length();\n\n        let m_X = 0.0, m_Y = 0.0, m_Z = 0.0;\n\n        do {\n            m_X = 1.0 / (1.0 + lambda * invRadii2X);\n            m_Y = 1.0 / (1.0 + lambda * invRadii2Y);\n            m_Z = 1.0 / (1.0 + lambda * invRadii2Z);\n\n            let m_X2 = m_X * m_X,\n                m_Y2 = m_Y * m_Y,\n                m_Z2 = m_Z * m_Z;\n\n            let func = x2 * m_X2 + y2 * m_Y2 + z2 * m_Z2 - 1.0;\n\n            if (Math.abs(func) < EPS12) {\n                break;\n            }\n\n            let m_X3 = m_X2 * m_X,\n                m_Y3 = m_Y2 * m_Y,\n                m_Z3 = m_Z2 * m_Z;\n\n            lambda += 0.5 * func / (x2 * m_X3 * invRadii2X + y2 * m_Y3 * invRadii2Y + z2 * m_Z3 * invRadii2Z);\n\n        } while (true); // eslint-disable-line\n\n        return new Vec3(pX * m_X, pY * m_Y, pZ * m_Z);\n    }\n\n    /**\n     * Converts 3d cartesian coordinates to geodetic\n     * @param {Vec3} cart - Cartesian coordinates\n     * @returns {LonLat} - Geodetic coordinates\n     */\n    public cartesianToLonLat(cart: Vec3): LonLat {\n        return this.cartesianToLonLatRes(cart);\n    }\n\n    /**\n     * Converts 3d cartesian coordinates to geodetic\n     * @param {Vec3} cart - Cartesian coordinates\n     * @param {LonLat} res - Link geodetic coordinates variable\n     * @returns {LonLat} - Geodetic coordinates\n     */\n    public cartesianToLonLatRes(cart: Vec3, res: LonLat = new LonLat()): LonLat {\n        let p = this.projToSurface(cart);\n        let n = this.getSurfaceNormal3v(p),\n            h = cart.sub(p);\n\n        res.lon = Math.atan2(n.y, n.x) * DEGREES;\n        res.lat = Math.asin(n.z) * DEGREES;\n        res.height = Math.sign(h.dot(cart)) * h.length();\n\n        return res;\n    }\n\n    /**\n     * Gets ellipsoid surface normal.\n     * @public\n     * @param {Vec3} coord - Spatial coordinates.\n     * @return {Vec3} -\n     */\n    public getSurfaceNormal3v(coord: Vec3): Vec3 {\n        let r2 = this._invRadii2;\n        let nx = coord.x * r2.x,\n            ny = coord.y * r2.y,\n            nz = coord.z * r2.z;\n        let l = 1.0 / Math.sqrt(nx * nx + ny * ny + nz * nz);\n        return new Vec3(nx * l, ny * l, nz * l);\n    }\n\n    public getGreatCircleDistance(lonLat1: LonLat, lonLat2: LonLat): number {\n        return this.inverse(lonLat1, lonLat2).distance;\n    }\n\n    /**\n     * Calculates the destination point given start point lat / lon, azimuth(deg) and distance (m).\n     * Source: http://movable-type.co.uk/scripts/latlong-vincenty-direct.html and optimized / cleaned up by Mathias Bynens <http://mathiasbynens.be/>\n     * Based on the Vincenty direct formula by T. Vincenty, ‚ÄúDirect and Inverse Solutions of Geodesics on the Ellipsoid with application of nested equations‚Äù, Survey Review, vol XXII no 176, 1975 <http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf>\n     * @param {LonLat} lonLat - Origin coordinates\n     * @param {number} azimuth - View azimuth in degrees\n     * @param {number} dist - Distance to the destination point coordinates in meters\n     * @returns {LonLat} - Destination point coordinates\n     */\n    public getGreatCircleDestination(lonLat: LonLat, azimuth: number, dist: number): LonLat {\n        return this.direct(lonLat, azimuth, dist).destination;\n    }\n\n    /**\n     * Returns inverse Geodesic solution for two points\n     * @param {LonLat} lonLat1 - start coordinates point\n     * @param {LonLat} lonLat2 - end coordinates point\n     * @returns {IInverseResult} - Contains distance, initialAzimuth, and finalAzimuth values\n     */\n    public inverse(lonLat1: LonLat, lonLat2: LonLat): IInverseResult {\n\n        let a = this._a, b = this._b, f = this._flattening;\n\n        const fi1 = lonLat1.lat * RADIANS, lambda1 = lonLat1.lon * RADIANS;\n        const fi2 = lonLat2.lat * RADIANS, lambda2 = lonLat2.lon * RADIANS;\n\n        const L = lambda2 - lambda1; // L = difference in longitude, U = reduced latitude, defined by tan U = (1-f)¬∑tanœÜ.\n        const tanU1 = (1 - f) * Math.tan(fi1), cosU1 = 1 / Math.sqrt((1 + tanU1 * tanU1)), sinU1 = tanU1 * cosU1;\n        const tanU2 = (1 - f) * Math.tan(fi2), cosU2 = 1 / Math.sqrt((1 + tanU2 * tanU2)), sinU2 = tanU2 * cosU2;\n\n        const antipodal = Math.abs(L) > Math.PI / 2 || Math.abs(fi2 - fi1) > Math.PI / 2;\n\n        let lmb = L, sinLmb = null, cosLmb = null; // lmb - difference in longitude on an auxiliary sphere\n        let s = antipodal ? Math.PI : 0, sin_s = 0, cos_s = antipodal ? -1 : 1, sinSqs = null; // s - angular distance lonLat1 lonLat2 on the sphere\n        let cos2sm = 1;                      // sm - angular distance on the sphere from the equator to the midpoint of the line\n        let cosSqa = 1;                      // a - azimuth of the geodesic at the equator\n\n        let lmb_ = null, iterations = 0;\n        do {\n            sinLmb = Math.sin(lmb);\n            cosLmb = Math.cos(lmb);\n            sinSqs = (cosU2 * sinLmb) ** 2 + (cosU1 * sinU2 - sinU1 * cosU2 * cosLmb) ** 2;\n            if (Math.abs(sinSqs) < 1e-24) break;  // co-incident/antipodal points (œÉ < ‚âà0.006mm)\n            sin_s = Math.sqrt(sinSqs);\n            cos_s = sinU1 * sinU2 + cosU1 * cosU2 * cosLmb;\n            s = Math.atan2(sin_s, cos_s);\n            const sin_a = cosU1 * cosU2 * sinLmb / sin_s;\n            cosSqa = 1 - sin_a * sin_a;\n            cos2sm = (cosSqa != 0) ? (cos_s - 2 * sinU1 * sinU2 / cosSqa) : 0; // on equatorial line cos¬≤Œ± = 0 (¬ß6)\n            const C = f / 16 * cosSqa * (4 + f * (4 - 3 * cosSqa));\n            lmb_ = lmb;\n            lmb = L + (1 - C) * f * sin_a * (s + C * sin_s * (cos2sm + C * cos_s * (-1 + 2 * cos2sm * cos2sm)));\n        } while (Math.abs(lmb - lmb_) > EPS12 && ++iterations < 1000);\n\n        const uSq = cosSqa * (a * a - b * b) / (b * b);\n        const A = 1 + uSq / 16384 * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq)));\n        const B = uSq / 1024 * (256 + uSq * (-128 + uSq * (74 - 47 * uSq)));\n        const ds = B * sin_s * (cos2sm + B / 4 * (cos_s * (-1 + 2 * cos2sm * cos2sm) - B / 6 * cos2sm * (-3 + 4 * sin_s * sin_s) * (-3 + 4 * cos2sm * cos2sm)));\n\n        const dist = b * A * (s - ds); // s = length of the geodesic\n\n        // note special handling of exactly antipodal points where sin¬≤œÉ = 0 (due to discontinuity\n        // atan2(0, 0) = 0 but atan2(Œµ, 0) = œÄ/2 / 90¬∞) - in which case bearing is always meridional,\n        // due north (or due south!)\n        // Œ± = azimuths of the geodesic; Œ±2 the direction P‚ÇÅ P‚ÇÇ produced\n        const a1 = Math.abs(sinSqs) < Number.EPSILON ? 0 : Math.atan2(cosU2 * sinLmb, cosU1 * sinU2 - sinU1 * cosU2 * cosLmb);\n        const a2 = Math.abs(sinSqs) < Number.EPSILON ? Math.PI : Math.atan2(cosU1 * sinLmb, -sinU1 * cosU2 + cosU1 * sinU2 * cosLmb);\n\n        return {\n            distance: dist,\n            initialAzimuth: Math.abs(dist) < Number.EPSILON ? NaN : zeroTwoPI(a1) * DEGREES,\n            finalAzimuth: Math.abs(dist) < Number.EPSILON ? NaN : zeroTwoPI(a2) * DEGREES\n        };\n    }\n\n    /**\n     * Calculates the destination point given start point lat / lon, azimuth(deg) and distance (m).\n     * Source: http://movable-type.co.uk/scripts/latlong-vincenty-direct.html and optimized / cleaned up by Mathias Bynens <http://mathiasbynens.be/>\n     * Based on the Vincenty direct formula by T. Vincenty, ‚ÄúDirect and Inverse Solutions of Geodesics on the Ellipsoid with application of nested equations‚Äù, Survey Review, vol XXII no 176, 1975 <http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf>\n     * @param {LonLat} lonLat - Origin coordinates\n     * @param {number} azimuth - View azimuth in degrees\n     * @param {number} dist - Distance to the destination point coordinates in meters\n     * @returns {{ destination: LonLat; finalAzimuth: number }} - Destination point coordinates\n     */\n    public direct(lonLat: LonLat, azimuth: number, dist: number): IDirectResult {\n\n        let lon1 = lonLat.lon,\n            lat1 = lonLat.lat;\n\n        let a = this._a,\n            b = this._b,\n            f = this._flattening,\n            s = dist,\n            alpha1 = azimuth * RADIANS,\n            sinAlpha1 = Math.sin(alpha1),\n            cosAlpha1 = Math.cos(alpha1),\n            tanU1 = (1 - f) * Math.tan(lat1 * RADIANS),\n            cosU1 = 1 / Math.sqrt(1 + tanU1 * tanU1),\n            sinU1 = tanU1 * cosU1,\n            sigma1 = Math.atan2(tanU1, cosAlpha1),\n            sinAlpha = cosU1 * sinAlpha1,\n            cosSqAlpha = 1 - sinAlpha * sinAlpha,\n            uSq = (cosSqAlpha * (a * a - b * b)) / (b * b),\n            A = 1 + (uSq / 16384) * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq))),\n            B = (uSq / 1024) * (256 + uSq * (-128 + uSq * (74 - 47 * uSq))),\n            sigma = s / (b * A),\n            sigmaP = 2 * Math.PI;\n\n        let cos2SigmaM = 0,\n            sinSigma = 0,\n            cosSigma = 0,\n            deltaSigma = 0;\n\n        while (Math.abs(sigma - sigmaP) > 1e-12) {\n            cos2SigmaM = Math.cos(2 * sigma1 + sigma);\n            sinSigma = Math.sin(sigma);\n            cosSigma = Math.cos(sigma);\n            deltaSigma = B * sinSigma *\n                (cos2SigmaM + (B / 4) *\n                    (\n                        cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM) -\n                        (B / 6) * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM)\n                    ));\n            sigmaP = sigma;\n            sigma = s / (b * A) + deltaSigma;\n        }\n\n        let tmp = sinU1 * sinSigma - cosU1 * cosSigma * cosAlpha1,\n            lat2 = Math.atan2(\n                sinU1 * cosSigma + cosU1 * sinSigma * cosAlpha1,\n                (1 - f) * Math.sqrt(sinAlpha * sinAlpha + tmp * tmp)\n            ),\n            lambda = Math.atan2(\n                sinSigma * sinAlpha1,\n                cosU1 * cosSigma - sinU1 * sinSigma * cosAlpha1\n            ),\n            C = (f / 16.0) * cosSqAlpha * (4.0 + f * (4.0 - 3.0 * cosSqAlpha)),\n            L = lambda - (1.0 - C) * f * sinAlpha * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1.0 + 2.0 * cos2SigmaM * cos2SigmaM))),\n            revAz = Math.atan2(sinAlpha, -tmp);\n\n        return {\n            destination: new LonLat(lon1 + L * DEGREES, lat2 * DEGREES),\n            finalAzimuth: revAz * DEGREES\n        };\n    }\n\n\n    /**\n     * Returns cartesian coordinates of the intersection of a ray and an ellipsoid.\n     * If the ray doesn't hit ellipsoid returns null.\n     * @public\n     * @param {Vec3} origin - Ray origin point.\n     * @param {Vec3} direction - Ray direction.\n     * @returns {Vec3} -\n     */\n    public hitRay(origin: Vec3, direction: Vec3): Vec3 | undefined {\n        let q = this._invRadii.mul(origin);\n        let w = this._invRadii.mul(direction);\n\n        let q2 = q.dot(q);\n        let qw = q.dot(w);\n\n        let difference, w2, product, discriminant, temp;\n\n        if (q2 > 1.0) {\n            // Outside ellipsoid.\n            if (qw >= 0.0) {\n                // Looking outward or tangent (0 intersections).\n                return undefined;\n            }\n\n            // qw < 0.0.\n            var qw2 = qw * qw;\n            difference = q2 - 1.0; // Positively valued.\n            w2 = w.dot(w);\n            product = w2 * difference;\n\n            let eps = Math.abs(qw2 - product);\n\n            if (eps > EPS15 && qw2 < product) {\n                // Imaginary roots (0 intersections).\n                return undefined;\n            } else if (qw2 > product) {\n                // Distinct roots (2 intersections).\n                discriminant = qw * qw - product;\n                temp = -qw + Math.sqrt(discriminant); // Avoid cancellation.\n                var root0 = temp / w2;\n                var root1 = difference / temp;\n                if (root0 < root1) {\n                    return origin.add(direction.scaleTo(root0));\n                }\n                return origin.add(direction.scaleTo(root1));\n            } else {\n                // qw2 == product.  Repeated roots (2 intersections).\n                var root = Math.sqrt(difference / w2);\n                return origin.add(direction.scaleTo(root));\n            }\n        } else if (q2 < 1.0) {\n            // Inside ellipsoid (2 intersections).\n            difference = q2 - 1.0; // Negatively valued.\n            w2 = w.dot(w);\n            product = w2 * difference; // Negatively valued.\n            discriminant = qw * qw - product;\n            temp = -qw + Math.sqrt(discriminant); // Positively valued.\n            return origin.add(direction.scaleTo(temp / w2));\n        } else {\n            // q2 == 1.0. On ellipsoid.\n            if (qw < 0.0) {\n                // Looking inward.\n                w2 = w.dot(w);\n                return origin.add(direction.scaleTo(-qw / w2));\n            }\n            // qw >= 0.0.  Looking outward or tangent.\n            // return undefined\n        }\n    }\n\n    public getNorthFrameRotation(cartesian: Vec3): Quat {\n        let n = this.getSurfaceNormal3v(cartesian);\n        let t = Vec3.proj_b_to_plane(Vec3.NORTH, n);\n        return Quat.getLookRotation(t, n);\n    }\n\n    /**\n     * @todo this is not precise function, needs to be replaced or removed\n     * @param lonLat1\n     * @param bearing\n     * @param distance\n     * @returns {LonLat}\n     */\n    public getBearingDestination(lonLat1: LonLat, bearing: number = 0.0, distance: number = 0): LonLat {\n        bearing = bearing * RADIANS;\n        var nlon = ((lonLat1.lon + 540) % 360) - 180;\n        var f1 = lonLat1.lat * RADIANS,\n            l1 = nlon * RADIANS;\n        var dR = distance / this._a;\n        var f2 = Math.asin(\n            Math.sin(f1) * Math.cos(dR) + Math.cos(f1) * Math.sin(dR) * Math.cos(bearing)\n        );\n        return new LonLat(\n            (l1 +\n                Math.atan2(\n                    Math.sin(bearing) * Math.sin(dR) * Math.cos(f1),\n                    Math.cos(dR) - Math.sin(f1) * Math.sin(f2)\n                )) *\n            DEGREES,\n            f2 * DEGREES\n        );\n    }\n\n    /**\n     * Returns the point at given fraction between two points on the great circle.\n     * @param   {LonLat} lonLat1 - Longitude/Latitude of source point.\n     * @param   {LonLat} lonLat2 - Longitude/Latitude of destination point.\n     * @param   {number} fraction - Fraction between the two points (0 = source point, 1 = destination point).\n     * @returns {LonLat} Intermediate point between points.\n     */\n    static getIntermediatePointOnGreatCircle(lonLat1: LonLat, lonLat2: LonLat, fraction: number): LonLat {\n        var f1 = lonLat1.lat * RADIANS,\n            l1 = lonLat1.lon * RADIANS;\n        var f2 = lonLat2.lat * RADIANS,\n            l2 = lonLat2.lon * RADIANS;\n\n        var sinf1 = Math.sin(f1),\n            cosf1 = Math.cos(f1),\n            sinl1 = Math.sin(l1),\n            cosl1 = Math.cos(l1);\n        var sinf2 = Math.sin(f2),\n            cosf2 = Math.cos(f2),\n            sinl2 = Math.sin(l2),\n            cosl2 = Math.cos(l2);\n\n        var df = f2 - f1,\n            dl = l2 - l1;\n        var a =\n            Math.sin(df / 2) * Math.sin(df / 2) +\n            Math.cos(f1) * Math.cos(f2) * Math.sin(dl / 2) * Math.sin(dl / 2);\n        var d = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n        var A = Math.sin((1 - fraction) * d) / Math.sin(d);\n        var B = Math.sin(fraction * d) / Math.sin(d);\n\n        var x = A * cosf1 * cosl1 + B * cosf2 * cosl2;\n        var y = A * cosf1 * sinl1 + B * cosf2 * sinl2;\n        var z = A * sinf1 + B * sinf2;\n\n        var f3 = Math.atan2(z, Math.sqrt(x * x + y * y));\n        var l3 = Math.atan2(y, x);\n\n        return new LonLat(((l3 * DEGREES + 540) % 360) - 180, f3 * DEGREES);\n    }\n\n    static getRhumbBearing(lonLat1: LonLat, lonLat2: LonLat): number {\n        var dLon = (lonLat2.lon - lonLat1.lon) * RADIANS;\n        var dPhi = Math.log(\n            Math.tan((lonLat2.lat * RADIANS) / 2 + Math.PI / 4) /\n            Math.tan((lonLat1.lat * RADIANS) / 2 + Math.PI / 4)\n        );\n        if (Math.abs(dLon) > Math.PI) {\n            if (dLon > 0) {\n                dLon = (2 * Math.PI - dLon) * -1;\n            } else {\n                dLon = 2 * Math.PI + dLon;\n            }\n        }\n        return (Math.atan2(dLon, dPhi) * DEGREES + 360) % 360;\n    }\n}\n\nexport {Ellipsoid};\n","import {Ellipsoid} from \"./Ellipsoid\";\n\n/**\n * WGS84 ellipsoid object.\n * @type {Ellipsoid}\n */\nexport const wgs84 = new Ellipsoid(6378137.0, 6356752.3142451793); // Equitorial Radius (m), Polar Radius (m)\n","import * as math from \"../math\";\nimport * as segmentHelper from \"../segment/segmentHelper\";\nimport * as shaders from \"../shaders/drawnode\";\nimport * as utils from \"../utils/shared\";\nimport {Atmosphere, IAtmosphereParams} from \"../control/Atmosphere\";\nimport {Control} from \"../control/Control\";\nimport {createColorRGB, isUndef} from \"../utils/shared\";\nimport {createEvents, EventsHandler} from \"../Events\";\nimport {decodeFloatFromRGBAArr} from \"../math/coder\";\nimport {EarthQuadTreeStrategy} from \"../quadTree/earth/EarthQuadTreeStrategy\";\nimport {EmptyTerrain} from \"../terrain/EmptyTerrain\";\nimport {Extent} from \"../Extent\";\nimport {Entity} from \"../entity/Entity\";\nimport {Ellipsoid} from \"../ellipsoid/Ellipsoid\";\nimport {EntityCollection} from \"../entity/EntityCollection\";\nimport {Geoid, GeoidModel} from \"../terrain/Geoid\";\nimport {GeoImageCreator} from \"../utils/GeoImageCreator\";\nimport {IBaseInputState} from \"../renderer/RendererEvents\";\nimport {Key, Lock} from \"../Lock\";\nimport {Layer} from \"../layer/Layer\";\nimport {Loader} from \"../utils/Loader\";\nimport {LonLat} from \"../LonLat\";\nimport {Node} from \"../quadTree/Node\";\nimport {NormalMapCreator} from \"../utils/NormalMapCreator\";\nimport {PlainSegmentWorker} from \"../utils/PlainSegmentWorker\";\nimport {PlanetCamera} from \"../camera/PlanetCamera\";\nimport {Quat} from \"../math/Quat\";\nimport {QuadTreeStrategy} from \"../quadTree/QuadTreeStrategy\";\nimport {Ray} from \"../math/Ray\";\nimport {RenderNode} from \"./RenderNode\";\nimport {SimpleSkyBackground} from \"../control/SimpleSkyBackground\";\nimport {Sun} from \"../control/Sun\";\nimport {TerrainWorker} from \"../utils/TerrainWorker\";\nimport {Vec2, Vec3, Vec4, NumberArray2, NumberArray3, NumberArray4} from \"../math/index\";\nimport {Vector} from \"../layer/Vector\";\nimport {VectorTileCreator} from \"../utils/VectorTileCreator\";\nimport {wgs84} from \"../ellipsoid/wgs84\";\nimport {WebGLBufferExt, WebGLTextureExt, IDefaultTextureParams, WebGLContextExt} from \"../webgl/Handler\";\nimport {Program} from \"../webgl/Program\";\nimport {Segment} from \"../segment/Segment\";\nimport {AtmosphereParameters} from \"../shaders/atmos\";\n\nexport interface IPlanetParams {\n    name?: string;\n    ellipsoid?: Ellipsoid;\n    minAltitude?: number;\n    maxAltitude?: number;\n    frustums?: NumberArray2[];\n    maxEqualZoomAltitude?: number;\n    minEqualZoomAltitude?: number;\n    minEqualZoomCameraSlope?: number;\n    quadTreeStrategyPrototype?: typeof QuadTreeStrategy;\n    ambient?: string | NumberArray3 | Vec3;\n    diffuse?: string | NumberArray3 | Vec3;\n    specular?: string | NumberArray3 | Vec3;\n    shininess?: number;\n    nightTextureSrc?: string | null;\n    specularTextureSrc?: string | null;\n    maxGridSize?: number;\n    maxLoadingRequests?: number;\n    atmosphereEnabled?: boolean;\n    transitionOpacityEnabled?: boolean;\n    atmosphereParameters?: IAtmosphereParams;\n}\n\nexport type PlanetEventsList = [\n    \"draw\",\n    \"layeradd\",\n    \"baselayerchange\",\n    \"layerremove\",\n    \"layervisibilitychange\",\n    \"rendercompleted\",\n    \"terraincompleted\",\n    \"layerloadend\"\n];\n\nconst CUR_LOD_SIZE = 250; //px\nconst MIN_LOD_SIZE = 312; //px\nconst MAX_LOD_SIZE = 190; //px\n\nlet _tempPickingPix_ = new Uint8Array(4);\nlet _tempDepthColor_ = new Uint8Array(4);\n\nconst DEPTH_DISTANCE = 11;//m\n\n/**\n * Maximum created nodes count. The more nodes count the more memory usage.\n * @const\n * @type {number}\n * @default\n */\nconst MAX_NODES = 200;\n\nconst HORIZON_TANGENT = 0.81;\n\ntype IndexBufferCacheData = { buffer: WebGLBufferExt | null };\n\n/**\n * Main class for rendering planet\n * @class\n * @extends {RenderNode}\n * @param {string} [options.name=\"Earth\"] - Planet name(Earth by default)\n * @param {Ellipsoid} [options.ellipsoid] - Planet ellipsoid(WGS84 by default)\n * @param {Number} [options.maxGridSize=128] - Segment maximal grid size\n * @param {Number} [options.maxEqualZoomAltitude=15000000.0] - Maximal altitude since segments on the screen become the same zoom level\n * @param {Number} [options.minEqualZoomAltitude=10000.0] - Minimal altitude since segments on the screen become the same zoom level\n * @param {Number} [options.minEqualZoomCameraSlope=0.8] - Minimal camera slope above te globe where segments on the screen become the same zoom level\n *\n * @fires EventsHandler<PlanetEventList>#draw\n * @fires EventsHandler<PlanetEventList>#layeradd\n * @fires EventsHandler<PlanetEventList>#baselayerchange\n * @fires EventsHandler<PlanetEventList>#layerremove\n * @fires EventsHandler<PlanetEventList>#layervisibilitychange\n * @fires EventsHandler<PlanetEventList>#geoimageadd\n */\nexport class Planet extends RenderNode {\n\n    public events: EventsHandler<PlanetEventsList>;\n\n    /**\n     * @public\n     * @type {Ellipsoid}\n     */\n    public ellipsoid: Ellipsoid;\n\n    /**\n     * @public\n     * @override\n     * @type {Boolean}\n     */\n    public override lightEnabled: boolean;\n\n    /**\n     * Squared ellipsoid radius.\n     * @public\n     * @type {number}\n     */\n    public _planetRadius2: number;\n\n    /**\n     * Layers array.\n     * @public\n     * @type {Array.<Layer>}\n     */\n    public _layers: Layer[];\n\n    /**\n     * Flag to trigger layer update in a next frame\n     * @type {boolean}\n     * @protected\n     */\n    protected _updateLayer: boolean;\n\n    /**\n     * Current visible imagery tile layers array.\n     * @public\n     * @type {Array.<Layer>}\n     */\n    public visibleTileLayers: Layer[];\n\n    /**\n     * Current visible vector layers array.\n     * @protected\n     * @type {Array.<Layer>}\n     */\n    protected visibleVectorLayers: Layer[];\n\n    protected _visibleTileLayerSlices: Layer[][];\n\n    /**\n     * Vector layers visible nodes with collections.\n     * @protected\n     * @type {Array.<EntityCollection>}\n     */\n    protected _frustumEntityCollections: EntityCollection[];\n\n    /**\n     * There is only one base layer on the globe when layer.isBaseLayer is true.\n     * @public\n     * @type {Layer}\n     */\n    public baseLayer: Layer | null;\n\n    /**\n     * Terrain provider.\n     * @public\n     * @type {EmptyTerrain}\n     */\n    public terrain: EmptyTerrain | null;\n\n    /**\n     * Camera is this.renderer.activeCamera pointer.\n     * @public\n     * @type {PlanetCamera}\n     */\n    public camera: PlanetCamera;\n\n    public maxEqualZoomAltitude: number;\n    public minEqualZoomAltitude: number;\n    public minEqualZoomCameraSlope: number;\n\n    /**\n     * Screen mouse pointer projected to planet cartesian position.\n     * @public\n     * @type {Vec3}\n     */\n    public mousePositionOnEarth: Vec3;\n\n    public emptyTexture: WebGLTextureExt | null;\n    public transparentTexture: WebGLTextureExt | null;\n    public defaultTexture: WebGLTextureExt | null;\n\n    /**\n     * Current visible minimal zoom index planet segment.\n     * @public\n     * @type {number}\n     */\n    public minCurrZoom: number;\n\n    /**\n     * Current visible maximal zoom index planet segment.\n     * @public\n     * @type {number}\n     */\n    public maxCurrZoom: number;\n\n    public _viewExtent: Extent;\n\n    protected _initialViewExtent: Extent | null;\n\n    public _createdNodesCount: number;\n\n    /**\n     * Planet's segments collected for rendering frame.\n     * @public\n     * @type {Node}\n     */\n    public _renderedNodes: Node[];\n\n    public _renderedNodesInFrustum: Node[][];\n\n    public _fadingNodes: Map<number, Node>;\n\n    public _fadingNodesInFrustum: Node[][];\n\n    /**\n     * Layers activity lock.\n     * @public\n     * @type {Lock}\n     */\n    public layerLock: Lock;\n\n    /**\n     * Terrain providers activity lock.\n     * @public\n     * @type {Lock}\n     */\n    public terrainLock: Lock;\n\n    /**\n     * Height scale factor. 1 - is normal elevation scale.\n     * @public\n     * @type {number}\n     */\n    public _heightFactor: number;\n\n    /**\n     * Precomputed indexes array for different grid size segments.\n     * @protected\n     * @type {Array.<Array.<number>>}\n     */\n    public _indexesCache: IndexBufferCacheData[][][][][];\n\n    protected _indexesCacheToRemove: IndexBufferCacheData[];\n    public _indexesCacheToRemoveCounter: number;\n\n    /**\n     * Precomputed texture coordinates buffers for different grid size segments.\n     * @public\n     * @type {Array.<Array.<number>>}\n     */\n    public _textureCoordsBufferCache: WebGLBufferExt[];\n\n    public quadTreeStrategy: QuadTreeStrategy;\n\n    /**\n     * Night glowing gl texture.\n     * @protected\n     */\n    protected _nightTexture: WebGLTextureExt | null;\n\n    /**\n     * Specular mask gl texture.\n     * @protected\n     */\n    protected _specularTexture: WebGLTextureExt | null;\n\n\n    public _ambient: Float32Array;\n    public _diffuse: Float32Array;\n    public _specular: Float32Array;\n\n    protected _maxGridSize: number;\n\n    /**\n     * Segment multiple textures size.(4 - convenient value for the most devices)\n     * @const\n     * @public\n     */\n    public SLICE_SIZE: number;\n    public SLICE_SIZE_4: number;\n    public SLICE_SIZE_3: number;\n\n    /**\n     * Level of details of visible segments.\n     * @protected\n     * @type {number}\n     */\n    protected _lodSize: number;\n    protected _curLodSize: number;\n    protected _minLodSize: number;\n    public _maxLodSize: number;\n\n    public _pickingColorArr: Float32Array;\n    public _samplerArr: Int32Array;\n    public _pickingMaskArr: Int32Array;\n\n    /**\n     * GeoImage creator.\n     * @public\n     * @type{GeoImageCreator}\n     */\n    public _geoImageCreator: GeoImageCreator;\n\n    /**\n     * VectorTileCreator creator.\n     * @public\n     * @type{VectorTileCreator}\n     */\n    public _vectorTileCreator: VectorTileCreator;\n\n    /**\n     * NormalMapCreator creator.\n     * @public\n     * @type{NormalMapCreator}\n     */\n    public _normalMapCreator: NormalMapCreator;\n\n    public _terrainWorker: TerrainWorker;\n\n    public _plainSegmentWorker: PlainSegmentWorker;\n\n    public _tileLoader: Loader<Layer>;\n\n    protected _memKey: Key;\n\n    public _distBeforeMemClear: number;\n\n    protected _prevCamEye: Vec3;\n\n    protected _initialized: boolean;\n\n    protected always: any[];\n\n    public _renderCompleted: boolean\n    public _renderCompletedActivated: boolean;\n\n    public _terrainCompleted: boolean;\n    public _terrainCompletedActivated: boolean;\n\n    protected _collectRenderNodesIsActive: boolean;\n\n    /**\n     * Night texture brightness coefficient\n     * @type {number}\n     */\n    public nightTextureCoefficient: number;\n\n    protected _renderScreenNodesPASS: () => void;\n    protected _renderScreenNodesWithHeightPASS: () => void;\n\n    protected _atmosphereEnabled: boolean;\n    protected _atmosphereMaxMinOpacity: Float32Array;\n\n    public solidTextureOne: WebGLTextureExt | null;\n    public solidTextureTwo: WebGLTextureExt | null;\n\n    protected _skipPreRender: boolean;\n\n    protected _nightTextureSrc: string | null;\n    protected _specularTextureSrc: string | null;\n\n    public transitionTime: number;\n\n    public _prevNodes: Map<number, Node>;\n    public _currNodes: Map<number, Node>;\n\n    protected _transitionOpacityEnabled: boolean;\n\n    protected _atmosphere: Atmosphere;\n\n    constructor(options: IPlanetParams = {}) {\n        super(options.name);\n\n        this._atmosphere = new Atmosphere(options.atmosphereParameters);\n\n        this._prevNodes = new Map<number, Node>();\n        this._currNodes = new Map<number, Node>();\n\n        this.transitionTime = 580;\n\n        this.ellipsoid = options.ellipsoid || wgs84;\n\n        this.lightEnabled = true;\n\n        this._planetRadius2 = (this.ellipsoid.getPolarSize() - 10000.0) * (this.ellipsoid.getPolarSize() - 10000.0);\n\n        this._layers = [];\n\n        this._updateLayer = false;\n\n        this.visibleTileLayers = [];\n\n        this.visibleVectorLayers = [];\n\n        this._visibleTileLayerSlices = [];\n\n        this._frustumEntityCollections = [];\n\n        this.baseLayer = null;\n\n        this.terrain = null;\n\n        this.camera = new PlanetCamera(this, {\n            frustums: options.frustums,\n            eye: new Vec3(25000000, 0, 0),\n            look: Vec3.ZERO,\n            up: Vec3.NORTH,\n            minAltitude: options.minAltitude,\n            maxAltitude: options.maxAltitude\n        });\n\n        this.maxEqualZoomAltitude = options.maxEqualZoomAltitude || 15000000.0;\n        this.minEqualZoomAltitude = options.minEqualZoomAltitude || 10000.0;\n        this.minEqualZoomCameraSlope = options.minEqualZoomCameraSlope || 0.8;\n\n        this.mousePositionOnEarth = new Vec3();\n\n        this.emptyTexture = null;\n        this.transparentTexture = null;\n        this.defaultTexture = null;\n\n        this.minCurrZoom = math.MAX;\n\n        this.maxCurrZoom = math.MIN;\n\n        this._viewExtent = new Extent(new LonLat(180, 180), new LonLat(-180, -180));\n\n        this._skipPreRender = false;\n\n        this._initialViewExtent = null;\n\n        this._createdNodesCount = 0;\n\n        this._renderedNodes = [];\n        this._renderedNodesInFrustum = [];\n\n        this._fadingNodes = new Map<number, Node>;\n        this._fadingNodesInFrustum = [];\n\n        this.layerLock = new Lock();\n\n        this.terrainLock = new Lock();\n\n        this._heightFactor = 1.0;\n\n        this._indexesCache = [];\n        this._indexesCacheToRemove = [];\n        this._indexesCacheToRemoveCounter = 0;\n\n        this._textureCoordsBufferCache = [];\n\n        this.quadTreeStrategy = options.quadTreeStrategyPrototype ? new options.quadTreeStrategyPrototype(this) : new EarthQuadTreeStrategy(this);\n\n        this._nightTexture = null;\n\n        this._specularTexture = null;\n\n        let a = utils.createColorRGB(options.ambient, new Vec3(0.2, 0.2, 0.3));\n        let d = utils.createColorRGB(options.diffuse, new Vec3(1.0, 1.0, 1.0));\n        let s = utils.createColorRGB(options.specular, new Vec3(0.00063, 0.00055, 0.00032));\n        let shininess = options.shininess || 18.0;\n\n        this._ambient = new Float32Array([a.x, a.y, a.z]);\n        this._diffuse = new Float32Array([d.x, d.y, d.z]);\n        this._specular = new Float32Array([s.x, s.y, s.z, shininess]);\n\n        this._maxGridSize = Math.log2(options.maxGridSize || 256);\n\n        this.SLICE_SIZE = 4;\n        this.SLICE_SIZE_4 = this.SLICE_SIZE * 4;\n        this.SLICE_SIZE_3 = this.SLICE_SIZE * 3;\n\n        this._lodSize = CUR_LOD_SIZE;\n        this._curLodSize = CUR_LOD_SIZE;\n        this._minLodSize = MIN_LOD_SIZE;\n        this._maxLodSize = MAX_LOD_SIZE;\n\n        this._pickingColorArr = new Float32Array(this.SLICE_SIZE_4);\n        this._samplerArr = new Int32Array(this.SLICE_SIZE);\n        this._pickingMaskArr = new Int32Array(this.SLICE_SIZE);\n\n        this._geoImageCreator = new GeoImageCreator(this);\n\n        this._vectorTileCreator = new VectorTileCreator(this);\n\n        this._normalMapCreator = new NormalMapCreator(this);\n\n        this._terrainWorker = new TerrainWorker(3);\n\n        this._plainSegmentWorker = new PlainSegmentWorker(3);\n\n        this._tileLoader = new Loader(options.maxLoadingRequests || 12);\n\n        this._memKey = new Key();\n\n        this.events = createEvents<PlanetEventsList>(PLANET_EVENTS);\n\n        this._distBeforeMemClear = 0.0;\n\n        this._prevCamEye = new Vec3();\n\n        this._initialized = false;\n\n        this.always = [];\n\n        this._renderCompleted = false;\n        this._renderCompletedActivated = false;\n\n        this._terrainCompleted = false;\n        this._terrainCompletedActivated = false;\n        this._collectRenderNodesIsActive = true;\n\n        this.nightTextureCoefficient = 2.0;\n\n        this._renderScreenNodesPASS = this._renderScreenNodesPASSNoAtmos;\n        this._renderScreenNodesWithHeightPASS = this._renderScreenNodesWithHeightPASSNoAtmos;\n\n        this._atmosphereEnabled = options.atmosphereEnabled || false;\n        this._atmosphereMaxMinOpacity = new Float32Array([1.0, 0.41]);\n\n        this.solidTextureOne = null;\n        this.solidTextureTwo = null;\n\n        this._nightTextureSrc = options.nightTextureSrc || null;\n        this._specularTextureSrc = options.specularTextureSrc || null;\n\n        this._transitionOpacityEnabled = options.transitionOpacityEnabled != undefined ? options.transitionOpacityEnabled : true;\n    }\n\n    /**\n     * Returns true if current terrain data set is loaded\n     */\n    public get terrainReady(): boolean {\n        return this._terrainCompleted && this._terrainCompletedActivated;\n    }\n\n    public get maxGridSize(): number {\n        return this._maxGridSize;\n    }\n\n    public getNorthFrameRotation(cartesian: Vec3): Quat {\n        return this.ellipsoid.getNorthFrameRotation(cartesian);\n    }\n\n    public set atmosphereMaxOpacity(opacity: number) {\n        this._atmosphereMaxMinOpacity[0] = opacity;\n    }\n\n    public get atmosphereMaxOpacity(): number {\n        return this._atmosphereMaxMinOpacity[0];\n    }\n\n    public set atmosphereMinOpacity(opacity: number) {\n        this._atmosphereMaxMinOpacity[1] = opacity;\n    }\n\n    public get atmosphereMinOpacity(): number {\n        return this._atmosphereMaxMinOpacity[1];\n    }\n\n    public set atmosphereEnabled(enabled: boolean) {\n        if (enabled != this._atmosphereEnabled) {\n            this._atmosphereEnabled = enabled;\n            this._initializeAtmosphere();\n        }\n    }\n\n    public get atmosphereEnabled(): boolean {\n        return this._atmosphereEnabled;\n    }\n\n    public set diffuse(rgb: string | NumberArray3 | Vec3) {\n        let vec = createColorRGB(rgb);\n        this._diffuse = new Float32Array(vec.toArray());\n    }\n\n    public set ambient(rgb: string | NumberArray3 | Vec3) {\n        let vec = createColorRGB(rgb);\n        this._ambient = new Float32Array(vec.toArray());\n    }\n\n    public set specular(rgb: string | NumberArray3 | Vec3) {\n        let vec = createColorRGB(rgb);\n        this._specular = new Float32Array([vec.x, vec.y, vec.y, this._specular[3]]);\n    }\n\n    public set shininess(v: number) {\n        this._specular[3] = v;\n    }\n\n    public get normalMapCreator(): NormalMapCreator {\n        return this._normalMapCreator;\n    }\n\n    public get layers(): Layer[] {\n        return [...this._layers];\n    }\n\n    /**\n     * @todo: remove after tests\n     * Get the collection of layers associated with this planet.\n     * @return {Array.<Layer>} Layers array.\n     * @public\n     */\n    public getLayers(): Layer[] {\n        return this.layers;\n    }\n\n\n    public get sunPos(): Vec3 {\n        return (this.renderer!.controls.sun as Sun).sunlight.getPosition();\n    }\n\n    /**\n     * Add the given control to the renderer of the planet scene.\n     * @param {Control} control - Control.\n     */\n    public addControl(control: Control) {\n        control.planet = this;\n        control.addTo(this.renderer!);\n    }\n\n    public get lodSize(): number {\n        return this._lodSize;\n    }\n\n    public setLodSize(currentLodSize: number, minLodSize?: number, maxLodSize?: number) {\n        this._maxLodSize = maxLodSize || this._maxLodSize;\n        this._minLodSize = minLodSize || this._minLodSize;\n        this._curLodSize = currentLodSize;\n        this._renderCompletedActivated = false;\n        this._terrainCompletedActivated = false;\n    }\n\n    /**\n     * Add the given controls array to the renderer of the planet.\n     * @param {Array.<Control>} cArr - Control array.\n     */\n    public addControls(cArr: Control[]) {\n        for (let i = 0; i < cArr.length; i++) {\n            this.addControl(cArr[i]);\n        }\n    }\n\n    /**\n     * Return layer by it name\n     * @param {string} name - Name of the layer. og.Layer.prototype.name\n     * @public\n     * @returns {Layer} -\n     */\n    public getLayerByName(name: string): Layer | undefined {\n        for (let i = 0, len = this._layers.length; i < len; i++) {\n            if (name === this._layers[i].name) {\n                return this._layers[i];\n            }\n        }\n    }\n\n    /**\n     * Adds layer to the planet.\n     * @param {Layer} layer - Layer object.\n     * @public\n     */\n    public addLayer(layer: Layer) {\n        layer.addTo(this);\n    }\n\n    /**\n     * Dispatch layer visibility changing event.\n     * @param {Layer} layer - Changed layer.\n     * @public\n     */\n    public _onLayerVisibilityChanged(layer: Layer) {\n        this.events.dispatch(this.events.layervisibilitychange, layer);\n    }\n\n    /**\n     * Adds the given layers array to the planet.\n     * @param {Array.<Layer>} layers - Layers array.\n     * @public\n     */\n    public addLayers(layers: Layer[]) {\n        for (let i = 0, len = layers.length; i < len; i++) {\n            this.addLayer(layers[i]);\n        }\n    }\n\n    /**\n     * Removes the given layer from the planet.\n     * @param {Layer} layer - Layer to remove.\n     * @public\n     */\n    public removeLayer(layer: Layer) {\n        layer.remove();\n    }\n\n    /**\n     *\n     * @public\n     * @param {Layer} layer - Material layer.\n     */\n    public _clearLayerMaterial(layer: Layer) {\n        this.quadTreeStrategy.clearLayerMaterial(layer);\n    }\n\n    /**\n     * Sets base layer coverage to the planet.\n     * @param {Layer} layer - Layer object.\n     * @public\n     */\n    public setBaseLayer(layer: Layer) {\n        if (this.baseLayer) {\n            if (!this.baseLayer.isEqual(layer)) {\n                this.baseLayer.setVisibility(false);\n                this.baseLayer = layer;\n                layer.setVisibility(true);\n                this.events.dispatch(this.events.baselayerchange, layer);\n            }\n        } else {\n            this.baseLayer = layer;\n            this.baseLayer.setVisibility(true);\n            this.events.dispatch(this.events.baselayerchange, layer);\n        }\n    }\n\n    /**\n     * Sets elevation scale. 1.0 is default.\n     * @param {number} factor - Elevation scale.\n     */\n    public setHeightFactor(factor: number) {\n        this._renderCompletedActivated = false;\n        this._terrainCompletedActivated = false;\n\n        if (this._heightFactor !== factor) {\n            this._heightFactor = factor;\n            this.quadTreeStrategy.destroyBranches();\n            this._clearRenderedNodeList();\n            this._clearRenderNodesInFrustum();\n        }\n    }\n\n    /**\n     * Gets elevation scale.\n     * @returns {number} Terrain elevation scale\n     */\n    public getHeightFactor(): number {\n        return this._heightFactor;\n    }\n\n    /**\n     * Sets terrain provider\n     * @public\n     * @param {EmptyTerrain} terrain - Terrain provider.\n     */\n    public setTerrain(terrain: EmptyTerrain) {\n        this._renderCompletedActivated = false;\n        this._terrainCompletedActivated = false;\n\n        if (this._initialized) {\n            this.memClear();\n        }\n\n        if (this.terrain) {\n            this.terrain.abortLoading();\n            this.terrain.clearCache();\n            this.terrain._planet = null;\n        }\n\n        this.terrain = terrain;\n        this.terrain._planet = this;\n\n        this.quadTreeStrategy.destroyBranches();\n\n        if (terrain._geoid.model) {\n            this._plainSegmentWorker.setGeoid(terrain.getGeoid());\n            terrain._isReady = true;\n        } else {\n            Geoid.loadModel(terrain.geoid.src)\n                .then((m: GeoidModel | null) => {\n                    terrain.geoid.setModel(m);\n                    this._plainSegmentWorker.setGeoid(terrain.getGeoid());\n                    terrain._isReady = true;\n                })\n                .catch((err) => {\n                    console.warn(err);\n                });\n        }\n    }\n\n    public initAtmosphereShader(atmosParams?: AtmosphereParameters) {\n        if (this.renderer && this.renderer.handler && this._atmosphereEnabled) {\n            let h = this.renderer.handler;\n            if (h.isWebGl2()) {\n                h.removeProgram(\"drawnode_screen_wl\");\n                h.addProgram(shaders.drawnode_screen_wl_webgl2Atmos(atmosParams), true);\n            } else {\n                console.warn(\"Atmosphere WebGL2 only\");\n            }\n        }\n    }\n\n    public get atmosphereControl(): Atmosphere {\n        return this._atmosphere;\n    }\n\n    protected _initializeAtmosphere() {\n\n        if (!this.renderer) return;\n\n        let h = this.renderer.handler;\n\n        h.removeProgram(\"drawnode_screen_wl\");\n\n        if (this._atmosphereEnabled) {\n\n            this._renderScreenNodesPASS = this._renderScreenNodesPASSAtmos;\n            this._renderScreenNodesWithHeightPASS = this._renderScreenNodesWithHeightPASSAtmos;\n\n            if (!this.renderer.controls.Atmosphere) {\n                this.addControl(this._atmosphere);\n            }\n\n            this._atmosphere.activate();\n\n            if (h.isWebGl2()) {\n                h.addProgram(shaders.drawnode_screen_wl_webgl2Atmos(this._atmosphere.parameters), true);\n            } else {\n                h.addProgram(shaders.drawnode_screen_wl_webgl1NoAtmos(), true);\n            }\n\n            if (this.renderer.controls.SimpleSkyBackground) {\n                this.renderer.controls.SimpleSkyBackground.deactivate();\n            }\n\n        } else {\n\n            this._renderScreenNodesPASS = this._renderScreenNodesPASSNoAtmos;\n            this._renderScreenNodesWithHeightPASS = this._renderScreenNodesWithHeightPASSNoAtmos;\n\n            this._atmosphere.deactivate();\n\n            if (!this.renderer.controls.SimpleSkyBackground) {\n                this.addControl(new SimpleSkyBackground());\n            } else {\n                this.renderer.controls.SimpleSkyBackground.activate();\n            }\n\n            if (h.isWebGl2()) {\n                h.addProgram(shaders.drawnode_screen_wl_webgl2NoAtmos(), true);\n            } else {\n                h.addProgram(shaders.drawnode_screen_wl_webgl1NoAtmos(), true);\n            }\n        }\n    }\n\n    protected _initializeShaders() {\n        let h = this.renderer!.handler;\n\n        h.addProgram(shaders.drawnode_screen_nl(), true);\n        h.addProgram(shaders.drawnode_colorPicking(), true);\n        h.addProgram(shaders.drawnode_depth(), true);\n        h.addProgram(shaders.drawnode_heightPicking(), true);\n\n        this.renderer!.addPickingCallback(this, this._renderColorPickingFramebufferPASS);\n        this.renderer!.addDepthCallback(this, this._renderDepthFramebufferPASS);\n        this.renderer!.addDistanceCallback(this, this._renderDistanceFramebufferPASS);\n    }\n\n    protected _onLayerLoadend(layer: Layer) {\n        this.events.dispatch(this.events.layerloadend, layer);\n    }\n\n    public override init() {\n\n        this._tileLoader.events.on(\"layerloadend\", this._onLayerLoadend, this);\n\n        // Initialization indexes table\n        segmentHelper.getInstance().setMaxGridSize(this._maxGridSize);\n\n        const TABLESIZE = this._maxGridSize;\n\n        let kk = 0;\n        // Initialization indexes buffers cache. It takes about 120mb RAM!\n        for (let i = 0; i <= TABLESIZE; i++) {\n            !this._indexesCache[i] && (this._indexesCache[i] = new Array(TABLESIZE));\n            for (let j = 0; j <= TABLESIZE; j++) {\n                !this._indexesCache[i][j] && (this._indexesCache[i][j] = new Array(TABLESIZE));\n                for (let k = 0; k <= TABLESIZE; k++) {\n                    !this._indexesCache[i][j][k] && (this._indexesCache[i][j][k] = new Array(TABLESIZE));\n                    for (let m = 0; m <= TABLESIZE; m++) {\n                        !this._indexesCache[i][j][k][m] && (this._indexesCache[i][j][k][m] = new Array(TABLESIZE));\n                        for (let q = 0; q <= TABLESIZE; q++) {\n\n                            let ptr: IndexBufferCacheData = {\n                                buffer: null\n                            };\n\n                            if (i >= 1 && i === j && i === k && i === m && i === q) {\n                                let indexes = segmentHelper.getInstance().createSegmentIndexes(i, [j, k, m, q]);\n                                ptr.buffer = this.renderer!.handler.createElementArrayBuffer(indexes, 1);\n                            } else {\n                                this._indexesCacheToRemove[kk++] = ptr;\n                            }\n\n                            this._indexesCache[i][j][k][m][q] = ptr;\n                        }\n                    }\n                }\n            }\n        }\n\n        this.renderer!.events.on(\"resize\", () => {\n            this._renderCompletedActivated = false;\n            this._terrainCompletedActivated = false;\n        });\n\n        this.renderer!.events.on(\"drawtransparent\", () => {\n            this._renderScreenNodesWithHeightPASS();\n        });\n\n        // Initialize texture coordinates buffer pool\n        this._textureCoordsBufferCache = [];\n\n        let texCoordCache = segmentHelper.getInstance().initTextureCoordsTable(TABLESIZE + 1);\n\n        for (let i = 0; i <= TABLESIZE; i++) {\n            this._textureCoordsBufferCache[i] = this.renderer!.handler.createArrayBuffer(texCoordCache[i], 2, ((1 << i) + 1) * ((1 << i) + 1));\n        }\n\n        // creating empty textures\n        this.renderer!.handler.createDefaultTexture(null, (t: WebGLTextureExt) => {\n            this.solidTextureOne = t;\n            this.solidTextureTwo = t;\n        });\n\n        this.transparentTexture = this.renderer!.handler.transparentTexture;\n\n        this._renderedNodesInFrustum = new Array(this.camera.frustums.length);\n        for (let i = 0, len = this._renderedNodesInFrustum.length; i < len; i++) {\n            this._renderedNodesInFrustum[i] = [];\n        }\n\n        // Creating quad trees nodes\n        this.quadTreeStrategy.init();\n\n        this.drawMode = this.renderer!.handler.gl!.TRIANGLE_STRIP;\n\n        // Applying shaders\n        this._initializeShaders();\n\n        this._initializeAtmosphere();\n\n        this._updateVisibleLayers();\n\n        this.renderer!.addPickingCallback(this, this._frustumEntityCollectionPickingCallback);\n\n        // loading Earth night glowing texture\n        if (this._nightTextureSrc) {\n\n            let img = new Image();\n            img.crossOrigin = \"Anonymous\";\n            img.onload = () => {\n                this._nightTexture = this.renderer!.handler.createTextureDefault(img)!;\n                this._nightTexture.default = true;\n            };\n            img.src = this._nightTextureSrc;\n\n            // createImageBitmap(NIGHT).then((e: ImageBitmap) => {\n            //     this._nightTexture = this.renderer!.handler!.createTextureDefault(e);\n            // });\n        }\n\n        // load water specular mask\n        if (this._specularTextureSrc) {\n            let img = new Image();\n            img.crossOrigin = \"Anonymous\";\n            img.onload = () => {\n                this._specularTexture = this.renderer!.handler.createTextureDefault(img)!;\n                this._specularTexture.default = true;\n            };\n            img.src = this._specularTextureSrc;\n\n            // createImageBitmap(SPECULAR).then((e: ImageBitmap) => {\n            //     this._specularTexture = this.renderer!.handler!.createTexture_l(e);\n            // });\n        }\n\n        this._geoImageCreator.init();\n\n        this._vectorTileCreator.init();\n\n        this._normalMapCreator.init();\n\n        this.renderer!.events.on(\"draw\", this._globalPreDraw, this, -100);\n\n        // Loading first nodes for better viewing if you have started on a lower altitude.\n        this._preRender();\n\n        this.renderer!.events.on(\"postdraw\", () => {\n            this._checkRendercompleted();\n        });\n\n        this.initLayers();\n\n        this._initialized = true;\n\n        //\n        // after init\n        //\n        if (this._initialViewExtent) {\n            this.viewExtent(this._initialViewExtent);\n        }\n\n        this.renderer!.activeCamera = this.camera;\n        this.camera.bindRenderer(this.renderer!);\n        this.camera.update();\n    }\n\n    public initLayers() {\n        let temp = [...this._layers];\n        for (let i = 0; i < temp.length; i++) {\n            this.removeLayer(temp[i]);\n            this.addLayer(temp[i]);\n        }\n    }\n\n    protected _clearIndexesCache() {\n        this._indexesCacheToRemoveCounter = 0;\n        let c = this._indexesCacheToRemove,\n            gl = this.renderer!.handler.gl!;\n        for (let i = 0, len = c.length; i < len; i++) {\n            let ci = c[i];\n            gl.deleteBuffer(ci.buffer as WebGLBuffer);\n            ci.buffer = null;\n        }\n    }\n\n    protected _preRender() {\n        this.quadTreeStrategy.preRender();\n        this._preLoad();\n    }\n\n    protected _preLoad() {\n        this._clearRenderedNodeList();\n        this._skipPreRender = false;\n        this.quadTreeStrategy.preLoad();\n    }\n\n    /**\n     * Creates default textures first for the North Pole and whole globe and second for the South Pole.\n     * @public\n     * @param{IDefaultTextureParams} param0 -\n     * @param{IDefaultTextureParams} param1 -\n     */\n    public createDefaultTextures(param0: IDefaultTextureParams, param1: IDefaultTextureParams) {\n        this.renderer!.handler.gl!.deleteTexture(this.solidTextureOne!);\n        this.renderer!.handler.gl!.deleteTexture(this.solidTextureTwo!);\n        this.renderer!.handler.createDefaultTexture(param0, (texture: WebGLTextureExt) => {\n            this.solidTextureOne = texture;\n        });\n        this.renderer!.handler.createDefaultTexture(param1, (texture: WebGLTextureExt) => {\n            this.solidTextureTwo = texture;\n        });\n    }\n\n    protected _getLayerAttributionHTML(layer: Layer) {\n        return `<div class=\"og-attribution__layer\">${layer.getAttribution()}</div>`;\n    }\n\n    /**\n     * Updates attribution lists\n     * @public\n     */\n    public updateAttributionsList() {\n        let html = \"\";\n        for (let i = 0, len = this._layers.length; i < len; i++) {\n            let li = this._layers[i];\n            if (li.getVisibility()) {\n                if (li.getAttribution().length) {\n                    html += this._getLayerAttributionHTML(li);\n                }\n            }\n        }\n        this._applyAttribution(html)\n    }\n\n    public updateVisibleLayers() {\n        this._updateLayer = true;\n    }\n\n    protected _updateVisibleLayers() {\n        this.visibleTileLayers = [];\n        this.visibleTileLayers.length = 0;\n\n        this.visibleVectorLayers = [];\n        this.visibleVectorLayers.length = 0;\n\n        let html = \"\";\n        for (let i = 0, len = this._layers.length; i < len; i++) {\n            let li = this._layers[i];\n            if (li.getVisibility()) {\n                if (li.isBaseLayer()) {\n                    this.createDefaultTextures(li._defaultTextures[0]!, li._defaultTextures[1]!);\n                    this.baseLayer = li;\n                }\n\n                if (li.hasImageryTiles()) {\n                    this.visibleTileLayers.push(li);\n                }\n\n                if (li.isVector) {\n                    this.visibleVectorLayers.push(li);\n                }\n\n                if (li.getAttribution().length) {\n                    html += this._getLayerAttributionHTML(li);\n                }\n\n            } else if (li._fading && li._fadingOpacity > 0) {\n                if (li.hasImageryTiles()) {\n                    this.visibleTileLayers.push(li);\n                }\n\n                if (li.isVector) {\n                    this.visibleVectorLayers.push(li);\n                }\n            }\n        }\n\n        this._applyAttribution(html);\n\n        this._sortLayers();\n    }\n\n    /**\n     * Apply to render list of layer attributions\n     * @protected\n     */\n    protected _applyAttribution(html: string) {\n        if (this.renderer && this.renderer.div) {\n            if (html.length) {\n                if (this.renderer.div.attributions!.innerHTML !== html) {\n                    this.renderer.div.attributions!.innerHTML = html;\n                }\n            } else {\n                this.renderer.div.attributions!.innerHTML = \"\";\n            }\n        }\n    }\n\n    /**\n     * Sort visible layer - preparing for rendering.\n     * @protected\n     */\n    protected _sortLayers() {\n\n        this.visibleVectorLayers.sort((a, b) => (a.getZIndex() - b.getZIndex()) || (a.getHeight() - b.getHeight()));\n\n        this._visibleTileLayerSlices = [];\n        this._visibleTileLayerSlices.length = 0;\n\n        if (this.visibleTileLayers.length) {\n            this.visibleTileLayers.sort((a, b) => (a.getHeight() - b.getHeight()) || (a.getZIndex() - b.getZIndex()));\n\n            let k = -1;\n            let currHeight = this.visibleTileLayers[0].getHeight();\n            for (let i = 0, len = this.visibleTileLayers.length; i < len; i++) {\n                if (i % this.SLICE_SIZE === 0 || this.visibleTileLayers[i].getHeight() !== currHeight) {\n                    k++;\n                    this._visibleTileLayerSlices[k] = [];\n                    currHeight = this.visibleTileLayers[i].getHeight();\n                }\n                this._visibleTileLayerSlices[k].push(this.visibleTileLayers[i]);\n            }\n        }\n    }\n\n    protected _clearRenderedNodeList() {\n        this._renderedNodes.length = 0;\n        this._renderedNodes = [];\n    }\n\n    protected _clearRenderNodesInFrustum() {\n        for (let i = 0, len = this._renderedNodesInFrustum.length; i < len; i++) {\n            this._renderedNodesInFrustum[i].length = 0;\n            this._renderedNodesInFrustum[i] = [];\n        }\n    }\n\n    protected _collectRenderedNodesMaxZoom(cam: PlanetCamera) {\n        if (cam.slope > this.minEqualZoomCameraSlope && cam._lonLat.height < this.maxEqualZoomAltitude && cam._lonLat.height > this.minEqualZoomAltitude) {\n\n            this.minCurrZoom = this.maxCurrZoom;\n\n            let temp = this._renderedNodes,\n                rf = this._renderedNodesInFrustum,\n                temp2 = [];\n\n            this._clearRenderNodesInFrustum();\n            this._renderedNodes = [];\n\n            for (let i = 0, len = temp.length; i < len; i++) {\n                let ri = temp[i];\n                let ht = ri.segment.centerNormal.dot(cam._b);\n                if (ri.segment.tileZoom === this.maxCurrZoom || ht < HORIZON_TANGENT) {\n                    this._renderedNodes.push(ri);\n                    let k = 0, inFrustum = ri.inFrustum;\n                    while (inFrustum) {\n                        if (inFrustum & 1) {\n                            rf[k].push(ri);\n                        }\n                        k++;\n                        inFrustum >>= 1;\n                    }\n                } else {\n                    temp2.push(ri);\n                }\n            }\n\n            for (let i = 0, len = temp2.length; i < len; i++) {\n                temp2[i].renderTree(cam, this.maxCurrZoom, null, false, temp2[i]);\n            }\n        }\n    }\n\n    public set transitionOpacityEnabled(isEnabled: boolean) {\n        this._transitionOpacityEnabled = isEnabled;\n        //@todo: set render nodes transition opacity to one\n    }\n\n    public get transitionOpacityEnabled(): boolean {\n        return this._transitionOpacityEnabled;\n    }\n\n    /**\n     * Collects visible quad nodes.\n     * @protected\n     */\n    protected _collectRenderNodes(cam: PlanetCamera) {\n        this._lodSize = math.lerp(cam.slope < 0.0 ? 0.0 : cam.slope, this._curLodSize, this._minLodSize);\n        cam._insideSegment = null;\n\n        // clear first\n        this._clearRenderedNodeList();\n        this._clearRenderNodesInFrustum();\n\n        this._viewExtent.southWest.set(180, 180);\n        this._viewExtent.northEast.set(-180, -180);\n\n        // todo: replace to camera\n        this.minCurrZoom = math.MAX;\n        this.maxCurrZoom = math.MIN;\n\n        this.quadTreeStrategy.collectRenderNodes();\n\n        this._collectRenderedNodesMaxZoom(cam);\n\n        // main camera effect\n        this._fadingNodes.clear();\n\n        if (this._transitionOpacityEnabled) {\n\n            let opaqueNodes: Node[] = [];\n\n            for (let i = 0; i < this._renderedNodes.length; i++) {\n                let ri = this._renderedNodes[i];\n                // it's not impossible to move the code into Node.addToRender, because\n                // we can't know actual state before _collectRenderedNodesMaxZoom pass\n                ri._collectFadingNodes();\n                ri._refreshTransitionOpacity();\n\n                if (ri.segment._transitionOpacity >= 1.0) {\n                    ri.clearNeighbors();\n                    ri.getRenderedNodesNeighbors(opaqueNodes);\n                    opaqueNodes.push(ri);\n                } else {\n                    for (let j = 0; j < ri._fadingNodes.length; j++) {\n                        let rij = ri._fadingNodes[j];\n                        if (rij.segment && rij.segment._transitionOpacity >= 1.0) {\n                            rij.clearNeighbors();\n                            rij.getRenderedNodesNeighbors(opaqueNodes);\n                            opaqueNodes.push(rij);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    protected _renderScreenNodesPASSNoAtmos() {\n        let cam = this.renderer!.activeCamera as PlanetCamera;\n        let sh = this._setUniformsNoAtmos(cam);\n        //\n        // PASS 0: rendering base slice of layers, which is often zero height\n        this._renderingScreenNodes(sh, cam, this._renderedNodesInFrustum[cam.currentFrustumIndex]);\n    }\n\n    protected _renderScreenNodesPASSAtmos() {\n        let cam = this.renderer!.activeCamera as PlanetCamera;\n        let sh = this._setUniformsAtmos(cam);\n        //\n        // PASS 0: rendering base slice of layers, which is often zero height\n        this._renderingScreenNodes(sh, cam, this._renderedNodesInFrustum[cam.currentFrustumIndex]);\n    }\n\n    protected _renderScreenNodesWithHeightPASSNoAtmos() {\n        let cam = this.renderer!.activeCamera as PlanetCamera;\n        let sh = this._setUniformsNoAtmos(cam);\n        //\n        // PASS 1: rendering slices, and layers with heights, without transition opacity effect\n        this._renderingScreenNodesWithHeight(sh, cam, this._renderedNodesInFrustum[cam.currentFrustumIndex]);\n    }\n\n    protected _renderScreenNodesWithHeightPASSAtmos() {\n        let cam = this.renderer!.activeCamera as PlanetCamera;\n        let sh = this._setUniformsAtmos(cam);\n        //\n        // PASS 1: rendering slices, and layers with heights, without transition opacity effect\n        this._renderingScreenNodesWithHeight(sh, cam, this._renderedNodesInFrustum[cam.currentFrustumIndex]);\n    }\n\n    protected _globalPreDraw() {\n        let cam = this.camera;\n\n        // Might be it's better to replace it in setTerrain,\n        // but we have to be sure that setTerrain exists with renderer insttance\n        this.renderer!.__useDistanceFramebuffer__ = !this.terrain!.isEmpty;\n\n        this._distBeforeMemClear += this._prevCamEye.distance(cam.eye);\n        this._prevCamEye.copy(cam.eye);\n        cam.checkFly();\n\n        // free memory\n        if (this._createdNodesCount > MAX_NODES && this._distBeforeMemClear > 1000.0) {\n            this.terrain!.clearCache();\n            this.memClear();\n        }\n\n        if (this._indexesCacheToRemoveCounter > 600) {\n            this._clearIndexesCache();\n        }\n    }\n\n    /**\n     * Render node callback.\n     * @public\n     */\n    public override preFrame() {\n\n        if (this._updateLayer) {\n            this._updateLayer = false;\n            this._updateVisibleLayers();\n        }\n\n        if (this.camera.isFirstPass) {\n            this.camera.update();\n\n            if (this._skipPreRender && this._collectRenderNodesIsActive) {\n                this._collectRenderNodes(this.camera);\n            }\n\n            this._skipPreRender = true;\n\n            this.transformLights();\n\n            // creates terrain normal maps\n            this._normalMapCreator.frame();\n\n            // Creating geoImages textures.\n            this._geoImageCreator.frame();\n\n            // Vector tiles rasterization\n            this._vectorTileCreator.frame();\n\n            this.camera.checkTerrainCollision();\n            this.camera.update();\n\n            // Here is the planet node dispatches a draw event before\n            // rendering begins, and we have got render nodes.\n            this.events.dispatch(this.events.draw, this);\n\n            // Collect entity collections from vector layers\n            this._collectVectorLayerCollections();\n        }\n\n        this.drawEntityCollections(this._frustumEntityCollections);\n    }\n\n    /**\n     * Render node callback.\n     * Frame function is called for each renderer activrCamera frustum.\n     * @public\n     * @override\n     */\n    public override frame() {\n        this._renderScreenNodesPASS();\n    }\n\n    protected _checkRendercompleted() {\n        if (this._renderCompleted) {\n            if (!this._renderCompletedActivated) {\n                this._renderCompletedActivated = true;\n                this.events.dispatch(this.events.rendercompleted, true);\n            }\n        } else {\n            this._renderCompletedActivated = false;\n        }\n        this._renderCompleted = true;\n\n        if (this._terrainCompleted) {\n            if (!this._terrainCompletedActivated) {\n                this._terrainCompletedActivated = true;\n                this.events.dispatch(this.events.terraincompleted, true);\n            }\n        } else {\n            this._terrainCompletedActivated = false;\n        }\n\n        this._terrainCompleted = true;\n    }\n\n    public lockQuadTree() {\n        this._collectRenderNodesIsActive = false;\n        this.camera.setTerrainCollisionActivity(false);\n    }\n\n    public unlockQuadTree() {\n        this._collectRenderNodesIsActive = true;\n        this.camera.setTerrainCollisionActivity(true);\n    }\n\n\n    protected _setUniformsNoAtmos(cam: PlanetCamera): Program {\n        let sh, shu;\n        let renderer = this.renderer!;\n\n        let h = renderer.handler;\n        let gl = h.gl!;\n\n        gl.enable(gl.CULL_FACE);\n\n        renderer.enableBlendOneSrcAlpha();\n\n        if (this.lightEnabled) {\n            h.programs.drawnode_screen_wl.activate();\n            sh = h.programs.drawnode_screen_wl._program;\n            shu = sh.uniforms;\n\n            gl.uniform3fv(shu.lightsPositions, this._lightsPositions);\n            gl.uniformMatrix4fv(shu.viewMatrix, false, cam.getViewMatrix());\n            gl.uniformMatrix4fv(shu.projectionMatrix, false, cam.getProjectionMatrix());\n\n            if (this.baseLayer) {\n                gl.uniform3fv(shu.diffuse, this.baseLayer._diffuse || this._diffuse);\n                gl.uniform3fv(shu.ambient, this.baseLayer._ambient || this._ambient);\n                gl.uniform4fv(shu.specular, this.baseLayer._specular || this._specular);\n                gl.uniform1f(shu.nightTextureCoefficient, this.baseLayer.nightTextureCoefficient || this.nightTextureCoefficient);\n            } else {\n                gl.uniform3fv(shu.diffuse, this._diffuse);\n                gl.uniform3fv(shu.ambient, this._ambient);\n                gl.uniform4fv(shu.specular, this._specular);\n                gl.uniform1f(shu.nightTextureCoefficient, this.nightTextureCoefficient);\n            }\n\n            //\n            // Night and specular\n            //\n            gl.activeTexture(gl.TEXTURE0 + this.SLICE_SIZE);\n            gl.bindTexture(gl.TEXTURE_2D, this._nightTexture! || this.transparentTexture!);\n            gl.uniform1i(shu.nightTexture, this.SLICE_SIZE);\n\n            gl.activeTexture(gl.TEXTURE0 + this.SLICE_SIZE + 1);\n            gl.bindTexture(gl.TEXTURE_2D, this._specularTexture! || this.transparentTexture!);\n            gl.uniform1i(shu.specularTexture, this.SLICE_SIZE + 1);\n\n            gl.uniform1f(shu.camHeight, cam.getHeight());\n\n        } else {\n            h.programs.drawnode_screen_nl.activate();\n            sh = h.programs.drawnode_screen_nl._program;\n            shu = sh.uniforms;\n            gl.uniformMatrix4fv(shu.viewMatrix, false, cam.getViewMatrix());\n            gl.uniformMatrix4fv(shu.projectionMatrix, false, cam.getProjectionMatrix());\n        }\n\n        gl.uniform3fv(shu.eyePositionHigh, cam.eyeHigh);\n        gl.uniform3fv(shu.eyePositionLow, cam.eyeLow);\n\n        return sh;\n    }\n\n    protected _setUniformsAtmos(cam: PlanetCamera): Program {\n\n        let sh, shu;\n        let renderer = this.renderer!;\n        let h = renderer.handler;\n        let gl = h.gl!;\n\n        gl.enable(gl.CULL_FACE);\n\n        renderer.enableBlendOneSrcAlpha();\n\n        if (this.lightEnabled) {\n            h.programs.drawnode_screen_wl.activate();\n            sh = h.programs.drawnode_screen_wl._program;\n            shu = sh.uniforms;\n\n            gl.uniform3fv(shu.lightsPositions, this._lightsPositions);\n            gl.uniformMatrix4fv(shu.viewMatrix, false, cam.getViewMatrix());\n            gl.uniformMatrix4fv(shu.projectionMatrix, false, cam.getProjectionMatrix());\n\n            if (this.baseLayer) {\n                gl.uniform3fv(shu.diffuse, this.baseLayer._diffuse || this._diffuse);\n                gl.uniform3fv(shu.ambient, this.baseLayer._ambient || this._ambient);\n                gl.uniform4fv(shu.specular, this.baseLayer._specular || this._specular);\n                gl.uniform1f(shu.nightTextureCoefficient, this.baseLayer.nightTextureCoefficient || this.nightTextureCoefficient);\n            } else {\n                gl.uniform3fv(shu.diffuse, this._diffuse);\n                gl.uniform3fv(shu.ambient, this._ambient);\n                gl.uniform4fv(shu.specular, this._specular);\n                gl.uniform1f(shu.nightTextureCoefficient, this.nightTextureCoefficient);\n            }\n\n            gl.uniform2fv(shu.maxMinOpacity, this._atmosphereMaxMinOpacity);\n\n            //\n            // Night and specular\n            //\n            gl.activeTexture(gl.TEXTURE0 + this.SLICE_SIZE);\n            gl.bindTexture(gl.TEXTURE_2D, this._nightTexture! || this.transparentTexture!);\n            gl.uniform1i(shu.nightTexture, this.SLICE_SIZE);\n\n            gl.activeTexture(gl.TEXTURE0 + this.SLICE_SIZE + 1);\n            gl.bindTexture(gl.TEXTURE_2D, this._specularTexture! || this.transparentTexture!);\n            gl.uniform1i(shu.specularTexture, this.SLICE_SIZE + 1);\n\n            //\n            // atmos precomputed textures\n            //\n            gl.activeTexture(gl.TEXTURE0 + this.SLICE_SIZE + 4);\n            gl.bindTexture(gl.TEXTURE_2D, (renderer.controls.Atmosphere as Atmosphere)._transmittanceBuffer!.textures[0]);\n            gl.uniform1i(shu.transmittanceTexture, this.SLICE_SIZE + 4);\n\n            gl.activeTexture(gl.TEXTURE0 + this.SLICE_SIZE + 5);\n            gl.bindTexture(gl.TEXTURE_2D, (renderer.controls.Atmosphere as Atmosphere)._scatteringBuffer!.textures[0]);\n            gl.uniform1i(shu.scatteringTexture, this.SLICE_SIZE + 5);\n\n            gl.uniform1f(shu.camHeight, cam.getHeight());\n\n        } else {\n            h.programs.drawnode_screen_nl.activate();\n            sh = h.programs.drawnode_screen_nl._program;\n            shu = sh.uniforms;\n            gl.uniformMatrix4fv(shu.viewMatrix, false, cam.getViewMatrix());\n            gl.uniformMatrix4fv(shu.projectionMatrix, false, cam.getProjectionMatrix());\n        }\n\n        gl.uniform3fv(shu.eyePositionHigh, cam.eyeHigh);\n        gl.uniform3fv(shu.eyePositionLow, cam.eyeLow);\n\n        return sh;\n    }\n\n    protected _renderingFadingNodes = (nodes: Map<number, boolean>, sh: Program, currentNode: Node, sl: Layer[], sliceIndex: number, outTransparentSegments?: Segment[]) => {\n\n        let isFirstPass = sliceIndex === 0;\n        let isEq = this.terrain!.equalizeVertices;\n\n        for (let j = 0, len = currentNode._fadingNodes.length; j < len; j++) {\n            let f = currentNode._fadingNodes[j].segment;\n            if (this._fadingNodes.has(currentNode._fadingNodes[0].__id) && !nodes.has(f.node.__id)) {\n                nodes.set(f.node.__id, true);\n\n                if (f._transitionOpacity < 1.0) {\n                    outTransparentSegments!.push(f);\n                } else {\n                    if (isFirstPass) {\n                        isEq && f.equalize();\n                        f.readyToEngage && f.engage();\n                        f.screenRendering(sh, sl, sliceIndex);\n                    } else {\n                        f.screenRendering(sh, sl, sliceIndex, this.transparentTexture, true);\n                    }\n                }\n            }\n        }\n    }\n\n    protected _renderingFadingNodesNoDepth = (nodes: Map<number, boolean>, sh: Program, currentNode: Node, sl: Layer[], sliceIndex: number) => {\n\n        let isFirstPass = sliceIndex === 0;\n        let isEq = this.terrain!.equalizeVertices;\n        let gl = sh.gl!;\n\n        gl.disable(gl.DEPTH_TEST);\n\n        for (let j = 0, len = currentNode._fadingNodes.length; j < len; j++) {\n            let f = currentNode._fadingNodes[j].segment;\n            if (this._fadingNodes.has(currentNode._fadingNodes[0].__id) && !nodes.has(f.node.__id)) {\n                nodes.set(f.node.__id, true);\n                if (isFirstPass) {\n                    isEq && f.equalize();\n                    f.readyToEngage && f.engage();\n                    f.screenRendering(sh, sl, sliceIndex);\n                } else {\n                    f.screenRendering(sh, sl, sliceIndex, this.transparentTexture, true);\n                }\n            }\n        }\n\n        gl.enable(gl.DEPTH_TEST);\n    }\n\n    /**\n     * Drawing nodes\n     */\n    protected _renderingScreenNodes(sh: Program, cam: PlanetCamera, renderedNodes: Node[]) {\n\n        let firstPass = cam.isFirstPass;\n\n        let sl = this._visibleTileLayerSlices;\n\n        if (sl.length) {\n            let sli = sl[0];\n            for (let i = sli.length - 1; i >= 0; --i) {\n                let li = sli[i];\n                if (li._fading && firstPass && li._refreshFadingOpacity()) {\n                    sli.splice(i, 1);\n                }\n            }\n        }\n\n        let nodes = new Map<number, boolean>;\n        let transparentSegments: Segment[] = [];\n\n        let isEq = this.terrain!.equalizeVertices;\n        let i = renderedNodes.length;\n\n        if (cam.slope > 0.8 || !this.terrain || this.terrain.isEmpty /*|| cam.getAltitude() > 10000*/) {\n            while (i--) {\n                let ri = renderedNodes[i];\n                let s = ri.segment;\n\n                this._renderingFadingNodesNoDepth(nodes, sh, ri, sl[0], 0);\n\n                isEq && s.equalize();\n                s.readyToEngage && s.engage();\n                s.screenRendering(sh, sl[0], 0);\n            }\n        } else {\n            while (i--) {\n                let ri = renderedNodes[i];\n                let s = ri.segment;\n\n                this._renderingFadingNodes(nodes, sh, ri, sl[0], 0, transparentSegments);\n\n                if (s._transitionOpacity < 1) {\n                    transparentSegments.push(s);\n                } else {\n                    isEq && s.equalize();\n                    s.readyToEngage && s.engage();\n                    s.screenRendering(sh, sl[0], 0);\n                }\n            }\n\n            for (let j = 0; j < transparentSegments.length; j++) {\n                let tj = transparentSegments[j];\n\n                isEq && tj.equalize();\n                tj.readyToEngage && tj.engage();\n                tj.screenRendering(sh, sl[0], 0);\n            }\n        }\n\n    }\n\n    protected _renderingScreenNodesWithHeight(sh: Program, cam: PlanetCamera, renderedNodes: Node[]) {\n        let gl = this.renderer!.handler.gl!;\n        let firstPass = cam.isFirstPass;\n\n        let sl = this._visibleTileLayerSlices;\n\n        gl.enable(gl.POLYGON_OFFSET_FILL);\n        gl.disable(gl.CULL_FACE);\n\n        let nodes = new Map<number, boolean>;\n        let transparentSegments: Segment[] = [];\n\n        for (let j = 1, len = sl.length; j < len; j++) {\n            let slj = sl[j];\n            for (let i = slj.length - 1; i >= 0; --i) {\n                let li = slj[i];\n                if (li._fading && firstPass && li._refreshFadingOpacity()) {\n                    slj.splice(i, 1);\n                }\n            }\n\n            gl.polygonOffset(0, -j);\n            let i = renderedNodes.length;\n            while (i--) {\n                let ri = renderedNodes[i];\n                this._renderingFadingNodes(nodes, sh, ri, sl[j], j, transparentSegments);\n                if (ri.segment._transitionOpacity < 1) {\n                    ri.segment.initSlice(j);\n                } else {\n                    ri.segment.screenRendering(sh, sl[j], j, this.transparentTexture, true);\n                }\n            }\n        }\n\n        gl.disable(gl.POLYGON_OFFSET_FILL);\n        gl.enable(gl.CULL_FACE);\n    }\n\n    protected _renderDistanceFramebufferPASS() {\n        if (!this.terrain!.isEmpty) {\n\n            let sh;\n            let renderer = this.renderer!;\n            let h = renderer.handler;\n            let gl = h.gl!;\n            let cam = renderer.activeCamera as PlanetCamera;\n\n            h.programs.drawnode_heightPicking.activate();\n            sh = h.programs.drawnode_heightPicking._program;\n            let shu = sh.uniforms;\n\n            gl.uniformMatrix4fv(shu.viewMatrix, false, cam.getViewMatrix());\n            gl.uniformMatrix4fv(shu.projectionMatrix, false, cam.getProjectionMatrix());\n\n            gl.uniform3fv(shu.eyePositionHigh, cam.eyeHigh);\n            gl.uniform3fv(shu.eyePositionLow, cam.eyeLow);\n\n            // drawing planet nodes\n            let rn = this._renderedNodesInFrustum[cam.currentFrustumIndex];\n            let sl = this._visibleTileLayerSlices;\n\n            let i = rn.length;\n            while (i--) {\n                rn[i].segment.heightPickingRendering(sh, sl[0]);\n            }\n        }\n    }\n\n    protected _renderColorPickingFramebufferPASS() {\n        let sh;\n        let renderer = this.renderer!;\n        let h = renderer.handler;\n        let gl = h.gl!;\n        h.programs.drawnode_colorPicking.activate();\n        sh = h.programs.drawnode_colorPicking._program;\n        let shu = sh.uniforms;\n        let cam = renderer.activeCamera!;\n\n        gl.enable(gl.CULL_FACE);\n\n        gl.uniformMatrix4fv(shu.viewMatrix, false, cam.getViewMatrix());\n        gl.uniformMatrix4fv(shu.projectionMatrix, false, cam.getProjectionMatrix());\n\n        gl.uniform3fv(shu.eyePositionHigh, cam.eyeHigh);\n        gl.uniform3fv(shu.eyePositionLow, cam.eyeLow);\n\n        // drawing planet nodes\n        let rn = this._renderedNodesInFrustum[cam.getCurrentFrustum()];\n        let sl = this._visibleTileLayerSlices;\n\n        let i = rn.length;\n        while (i--) {\n            rn[i].segment.colorPickingRendering(sh, sl[0], 0);\n        }\n\n        // Here is set blending for transparent overlays\n        renderer.enableBlendDefault();\n\n        gl.enable(gl.POLYGON_OFFSET_FILL);\n        for (let j = 1, len = sl.length; j < len; j++) {\n            i = rn.length;\n            gl.polygonOffset(0, -j);\n            while (i--) {\n                rn[i].segment.colorPickingRendering(sh, sl[j], j, this.transparentTexture, true);\n            }\n        }\n        gl.disable(gl.POLYGON_OFFSET_FILL);\n    }\n\n    protected _renderDepthFramebufferPASS() {\n        let sh;\n        let renderer = this.renderer!;\n        let h = renderer.handler;\n        let gl = h.gl!;\n        h.programs.drawnode_depth.activate();\n        sh = h.programs.drawnode_depth._program;\n        let shu = sh.uniforms;\n        let cam = renderer.activeCamera!;\n\n        gl.disable(gl.BLEND);\n        gl.disable(gl.POLYGON_OFFSET_FILL);\n\n        gl.uniformMatrix4fv(shu.viewMatrix, false, cam.getViewMatrix());\n        gl.uniformMatrix4fv(shu.projectionMatrix, false, cam.getProjectionMatrix());\n\n        gl.uniform3fv(shu.eyePositionHigh, cam.eyeHigh);\n        gl.uniform3fv(shu.eyePositionLow, cam.eyeLow);\n\n        gl.uniform3fv(shu.frustumPickingColor, cam.frustum._pickingColorU);\n\n        // drawing planet nodes\n        let rn = this._renderedNodesInFrustum[cam.getCurrentFrustum()],\n            sl = this._visibleTileLayerSlices;\n\n        let i = rn.length;\n        while (i--) {\n            rn[i].segment.depthRendering(sh, sl[0]);\n        }\n\n        gl.enable(gl.BLEND);\n    }\n\n    protected _collectVectorLayerCollections() {\n        this._frustumEntityCollections.length = 0;\n        this._frustumEntityCollections = [];\n\n        let i = this.visibleVectorLayers.length;\n        while (i--) {\n            let vi = this.visibleVectorLayers[i] as Vector;\n\n            if (vi._fading && vi._refreshFadingOpacity()) {\n                this.visibleVectorLayers.splice(i, 1);\n            }\n\n            vi.collectVisibleCollections(this._frustumEntityCollections);\n            vi.update();\n        }\n    }\n\n    protected _frustumEntityCollectionPickingCallback() {\n        this.drawPickingEntityCollections(this._frustumEntityCollections);\n    }\n\n    /**\n     * Starts clear memory thread.\n     * @public\n     */\n    public memClear() {\n        this._distBeforeMemClear = 0;\n\n        this.camera._insideSegment = null;\n\n        this.layerLock.lock(this._memKey);\n        this.terrainLock.lock(this._memKey);\n        this._normalMapCreator.lock(this._memKey);\n\n        this._normalMapCreator.clear();\n        this.terrain!.abortLoading();\n        this._tileLoader.abortAll();\n\n        this.quadTreeStrategy.clear();\n        this.layerLock.free(this._memKey);\n        this.terrainLock.free(this._memKey);\n        this._normalMapCreator.free(this._memKey);\n\n        this._createdNodesCount = 0;\n    }\n\n    /**\n     * Returns ray vector hit ellipsoid coordinates.\n     * If the ray doesn't hit ellipsoid it returns 'undefined'.\n     * @public\n     * @param {Ray} ray - Ray.\n     * @returns {Vec3 | undefined} -\n     */\n    public getRayIntersectionEllipsoid(ray: Ray): Vec3 | undefined {\n        return this.ellipsoid.hitRay(ray.origin, ray.direction);\n    }\n\n    /**\n     * Project screen coordinates to the planet ellipsoid.\n     * @public\n     * @param {Vec2 | IBaseInputState } px - Screen coordinates.\n     * @returns {Vec3 | undefined} - Cartesian coordinates.\n     */\n    public getCartesianFromPixelEllipsoid(px: Vec2 | IBaseInputState): Vec3 | undefined {\n        let cam = this.renderer!.activeCamera!;\n        return this.ellipsoid.hitRay(cam.eye, cam.unproject(px.x, px.y));\n    }\n\n    /**\n     * Project screen coordinates to the planet ellipsoid.\n     * @public\n     * @param {Vec2 | IBaseInputState} px - Screen coordinates.\n     * @returns {LonLat | undefined} - Geodetic coordinates.\n     */\n    public getLonLatFromPixelEllipsoid(px: Vec2): LonLat | undefined {\n        let coords = this.getCartesianFromPixelEllipsoid(px);\n        if (coords) {\n            return this.ellipsoid.cartesianToLonLat(coords);\n        }\n    }\n\n    /**\n     * Returns mouse position cartesian coordinates on the current terrain.\n     * @public\n     * @returns {Vec3 | undefined} -\n     */\n    public getCartesianFromMouseTerrain(): Vec3 | undefined {\n        let ms = this.renderer!.events.mouseState;\n        let distance = this.getDistanceFromPixel(ms);\n        if (distance) {\n            return ms.direction.scaleTo(distance).addA(this.renderer!.activeCamera!.eye);\n        }\n    }\n\n    /**\n     * Returns screen coordinates cartesian coordinates on the current terrain.\n     * position or null if input coordinates is outside the planet.\n     * @public\n     * @param {Vec2} px - Pixel screen 2d coordinates.\n     * @returns {Vec3 | undefined} -\n     */\n    public getCartesianFromPixelTerrain(px: Vec2 | IBaseInputState): Vec3 | undefined {\n        let distance = this.getDistanceFromPixel(px);\n        if (distance) {\n            let direction = (px as IBaseInputState).direction || this.renderer!.activeCamera!.unproject(px.x, px.y);\n            return direction.scaleTo(distance).addA(this.renderer!.activeCamera!.eye);\n        }\n    }\n\n    /**\n     * Returns geodetic coordinates on the current terrain planet by its screen coordinates.\n     * position or null if input coordinates is outside the planet.\n     * @public\n     * @param {Vec2 | IBaseInputState} px - Pixel screen 2d coordinates.\n     * @returns {LonLat | undefined} -\n     */\n    public getLonLatFromPixelTerrain(px: Vec2 | IBaseInputState): LonLat | undefined {\n        let coords = this.getCartesianFromPixelTerrain(px);\n        if (coords) {\n            return this.ellipsoid.cartesianToLonLat(coords);\n        }\n    }\n\n    /**\n     * Project cartesian coordinates to screen space.\n     * @public\n     * @param {Vec3} coords - Cartesian coordinates.\n     * @returns {Vec2} - Screen coordinates.\n     */\n    public getPixelFromCartesian(coords: Vec3): Vec2 {\n        return this.renderer!.activeCamera!.project(coords);\n    }\n\n    /**\n     * Project geodetic coordinates to screen space.\n     * @public\n     * @param {LonLat} lonlat - Geodetic coordinates.\n     * @returns {Vec2 | undefined} - Screen coordinates.\n     */\n    public getPixelFromLonLat(lonlat: LonLat): Vec2 | undefined {\n        let coords = this.ellipsoid.lonLatToCartesian(lonlat);\n        if (coords) {\n            return this.renderer!.activeCamera!.project(coords);\n        }\n    }\n\n    /**\n     * Returns distance from an active (screen) camera to the planet ellipsoid.\n     * @public\n     * @param {Vec2} px - Screen coordinates.\n     * @returns {number} -\n     */\n    public getDistanceFromPixelEllipsoid(px: Vec2 | IBaseInputState): number | undefined {\n        let coords = this.getCartesianFromPixelEllipsoid(px);\n        if (coords) {\n            return coords.distance(this.renderer!.activeCamera!.eye);\n        }\n    }\n\n    /**\n     * Returns distance from active (screen) camera to the planet terrain by screen coordinates.\n     * @public\n     * @param {Vec2 | IBaseInputState} px - Screen coordinates.\n     * @returns {number | undefined} -\n     */\n    public getDistanceFromPixel(px: Vec2 | IBaseInputState): number {\n        if (this.terrain!.isEmpty) {\n            return this.getDistanceFromPixelEllipsoid(px) || 0;\n        } else {\n\n            let r = this.renderer!;\n            let cnv = r.handler!.canvas!;\n\n            let spx = px.x / cnv.width;\n            let spy = (cnv.height - px.y) / cnv.height;\n\n            _tempPickingPix_[0] = _tempPickingPix_[1] = _tempPickingPix_[2] = 0.0;\n\n            let dist = 0;\n\n            r.readDistanceColor(spx, spy, _tempPickingPix_);\n\n            dist = decodeFloatFromRGBAArr(_tempPickingPix_);\n\n            if (!(_tempPickingPix_[0] || _tempPickingPix_[1] || _tempPickingPix_[2])) {\n                dist = this.getDistanceFromPixelEllipsoid(px) || 0;\n            } else if (dist < DEPTH_DISTANCE) {\n                r.screenDepthFramebuffer!.activate();\n\n                //if (r.screenDepthFramebuffer.isComplete()) {\n                r.screenDepthFramebuffer!.readPixels(_tempDepthColor_, spx, spy);\n                let screenPos = new Vec4(spx * 2.0 - 1.0, spy * 2.0 - 1.0, (_tempDepthColor_[0] / 255.0) * 2.0 - 1.0, 1.0 * 2.0 - 1.0);\n                let viewPosition = this.camera.frustums[0].inverseProjectionMatrix.mulVec4(screenPos);\n                let dir = (px as IBaseInputState).direction || r.activeCamera!.unproject(px.x, px.y);\n                dist = -(viewPosition.z / viewPosition.w) / dir.dot(r.activeCamera!.getForward());\n                //}\n\n                r.screenDepthFramebuffer!.deactivate();\n            }\n            return dist;\n        }\n    }\n\n    /**\n     * Sets camera to the planet geographical extent.\n     * @public\n     * @param {Extent} extent - Geographical extent.\n     */\n    public viewExtent(extent: Extent) {\n        if (this.camera) {\n            this.camera.viewExtent(extent);\n        } else {\n            this._initialViewExtent = extent;\n        }\n    }\n\n    /**\n     * Fits camera position for the view extent.\n     * @public\n     * @param {Array.<number>} extentArr - Geographical extent array, (exactly 4 entries)\n     * where index 0 - southwest longitude, 1 - latitude southwest, 2 - longitude northeast, 3 - latitude northeast.\n     */\n    public viewExtentArr(extentArr: NumberArray4) {\n        this.viewExtent(new Extent(new LonLat(extentArr[0], extentArr[1]), new LonLat(extentArr[2], extentArr[3])));\n    }\n\n    /**\n     * Gets current camera view extent.\n     * @public\n     * @returns {Extent} -\n     */\n    public getViewExtent(): Extent {\n        return this._viewExtent;\n    }\n\n    /**\n     * Sets camera to the planet geographical position.\n     * @public\n     * @param {LonLat} lonlat - Camera position.\n     * @param {LonLat} [lookLonLat] - Viewpoint.\n     * @param {Vec3} [up] - Camera up vector.\n     */\n    public viewLonLat(lonlat: LonLat, lookLonLat?: LonLat, up?: Vec3) {\n        this.camera.setLonLat(lonlat, lookLonLat, up);\n    }\n\n    /**\n     * Fly active camera to the view extent.\n     * @public\n     * @param {Extent} extent - Geographical extent.\n     * @param {Number} [height] - Height on the end of the flight route.\n     * @param {Vec3} [up] - Camera UP vector on the end of a flying.\n     * @param {Number} [ampl] - Altitude amplitude factor.\n     * @param {Function} [startCallback] - Callback that calls before the flying begins.\n     * @param {Function} [completeCallback] - Callback that calls after flying when flying is finished.\n     */\n    public flyExtent(\n        extent: Extent,\n        height?: number,\n        up?: Vec3,\n        ampl?: number,\n        completeCallback?: Function,\n        startCallback?: Function\n    ) {\n        this.camera.flyExtent(extent, height, up, ampl, completeCallback, startCallback);\n    }\n\n    /**\n     * Fly camera to the point.\n     * @public\n     * @param {Vec3} cartesian - Point coordinates.\n     * @param {Vec3} [look] - Camera \"look at\" point.\n     * @param {Vec3} [up] - Camera UP vector on the end of a flying.\n     * @param {Number} [ampl] - Altitude amplitude factor.\n     * @param {Function} [completeCallback] - Call the function in the end of flight\n     * @param {Function} [startCallback] - Call the function in the beginning\n     * @param {Function} [frameCallback] - Each frame callback\n     */\n    public flyCartesian(\n        cartesian: Vec3,\n        look?: Vec3 | null,\n        up?: Vec3 | null,\n        ampl?: number,\n        completeCallback?: Function | null,\n        startCallback?: Function | null,\n        frameCallback?: Function | null\n    ) {\n        this.camera.flyCartesian(cartesian, look, up, ampl, completeCallback, startCallback, frameCallback);\n    }\n\n    /**\n     * Fly camera to the geodetic position.\n     * @public\n     * @param {LonLat} lonlat - Fly geographical coordinates.\n     * @param {Vec3 | LonLat} [look] - Camera viewpoint in the end of the flight.\n     * @param {Vec3} [up] - Camera UP vector on the end of a flying.\n     * @param {Number} [ampl] - Altitude amplitude factor.\n     * @param [completeCallback]\n     * @param [startCallback]\n     * @param [frameCallback]\n     */\n    public flyLonLat(\n        lonlat: LonLat,\n        look?: Vec3 | LonLat,\n        up?: Vec3,\n        ampl?: number,\n        completeCallback?: Function,\n        startCallback?: Function,\n        frameCallback?: Function\n    ) {\n        this.camera.flyLonLat(lonlat, look, up, ampl, completeCallback, startCallback, frameCallback);\n    }\n\n    /**\n     * Stop current flight.\n     * @public\n     */\n    public stopFlying() {\n        this.camera.stopFlying();\n    }\n\n    public override updateBillboardsTexCoords() {\n        for (let i = 0; i < this.entityCollections.length; i++) {\n            this.entityCollections[i].billboardHandler.refreshTexCoordsArr();\n        }\n\n        let readyCollections: Record<number, boolean> = {};\n        for (let i = 0; i < this._layers.length; i++) {\n            let li = this._layers[i];\n            if (li instanceof Vector) {\n                (li as Vector).each(function (e: Entity) {\n                    if (e._entityCollection && !readyCollections[e._entityCollection.id]) {\n                        e._entityCollection.billboardHandler.refreshTexCoordsArr();\n                        readyCollections[e._entityCollection.id] = true;\n                    }\n                });\n            }\n        }\n    }\n\n    public getEntityTerrainPoint(entity: Entity, res: Vec3) {\n        let n = this._renderedNodes, i = n.length;\n        while (i--) {\n            if (n[i].segment.isEntityInside(entity)) {\n                return n[i].segment.getEntityTerrainPoint(entity, res);\n            }\n        }\n    }\n\n    public async getHeightDefault(lonLat: LonLat): Promise<number> {\n        return new Promise<number>((resolve: (alt: number) => void) => {\n            if (this.terrain) {\n                this.terrain.getHeightAsync(lonLat.clone(), (alt: number) => {\n                    resolve(alt);\n                });\n            } else {\n                resolve(0);\n            }\n        });\n    }\n\n    public async getHeightAboveELL(lonLat: LonLat): Promise<number> {\n        return new Promise<number>((resolve: (alt: number) => void) => {\n            if (this.terrain) {\n                this.terrain.getHeightAsync(lonLat.clone(), (alt: number) => {\n                    resolve(alt + this.terrain!.geoid.getHeightLonLat(lonLat));\n                });\n            } else {\n                resolve(0);\n            }\n        });\n    }\n\n    public override onremove() {\n        this.memClear();\n        this.quadTreeStrategy.destroyBranches();\n        this._renderedNodes = [];\n    }\n\n    // function checkTerrainCollision(entity) {\n    //     let _tempTerrPoint = new Vec3();\n    //     let nodes = globus.planet._renderedNodes;\n    //     for (let j = 0; j < nodes.length; j++) {\n    //         let seg = nodes[j].segment;\n    //         if (seg && seg._extentLonLat.isInside(entity.getLonLat())) {\n    //             seg.getEntityTerrainPoint(entity, _tempTerrPoint);\n    //             entity.setCartesian3v(_tempTerrPoint);\n    //             break;\n    //         }\n    //     }\n    // }\n}\n\nconst PLANET_EVENTS: PlanetEventsList = [\n    /**\n     * Triggered before globe frame begins to render.\n     * @event og.scene.Planet#draw\n     */\n    \"draw\",\n\n    /**\n     * Triggered when layer has added to the planet.\n     * @event og.scene.Planet#layeradd\n     */\n    \"layeradd\",\n\n    /**\n     * Triggered when base layer changed.\n     * @event og.scene.Planet#baselayerchange\n     */\n    \"baselayerchange\",\n\n    /**\n     * Triggered when layer has removed from the planet.\n     * @event og.scene.Planet#layerremove\n     */\n    \"layerremove\",\n\n    /**\n     * Triggered when some layer visibility changed.\n     * @event og.scene.Planet#layervisibilitychange\n     */\n    \"layervisibilitychange\",\n\n    /**\n     * Triggered when all data is loaded\n     * @event og.scene.Planet#rendercompleted\n     */\n    \"rendercompleted\",\n\n    /**\n     * Triggered when all data is loaded\n     * @event og.scene.Planet#terraincompleted\n     */\n    \"terraincompleted\",\n\n    /**\n     * Triggered when layer data is laded\n     * @event og.scene.Planet#terraincompleted\n     */\n    \"layerloadend\"\n];\n\n","import {Program} from '../webgl/Program';\nimport {types} from '../webgl/types';\n\nexport function skybox(): Program {\n    return new Program(\"skybox\", {\n        uniforms: {\n            projectionViewMatrix: {type: types.MAT4},\n            uSampler: {type: types.SAMPLERCUBE},\n            pos: {type: types.VEC3}\n        },\n        attributes: {\n            aVertexPosition: {type: types.VEC3, enableArray: true}\n        },\n        vertexShader:\n            `attribute vec3 aVertexPosition;\n            uniform mat4 projectionViewMatrix;\n            uniform vec3 pos;\n            varying vec3 vTextureCoord;\n            void main(void) {\n                vTextureCoord = aVertexPosition;\n                gl_Position = projectionViewMatrix * vec4(aVertexPosition + pos, 1.0);\n            }`,\n        fragmentShader:\n            `precision lowp float;\n            varying vec3 vTextureCoord;\n            uniform samplerCube uSampler;\n            void main(void) {\n                gl_FragColor = textureCube(uSampler, vTextureCoord);\n            }`\n    });\n}","import * as shaders from '../shaders/skybox';\nimport {RenderNode} from './RenderNode';\nimport {WebGLBufferExt, WebGLTextureExt, Texture3DParams} from \"../webgl/Handler\";\n\nclass SkyBox extends RenderNode {\n\n    public params: Texture3DParams;\n    public vertexPositionBuffer: WebGLBufferExt | null;\n    public texture: WebGLTextureExt | null;\n\n    constructor(params: Texture3DParams) {\n        super(\"skybox\");\n        this.params = params;\n        this.vertexPositionBuffer = null;\n        this.texture = null;\n    }\n\n    static createDefault(RESOURCES_URL: string) {\n        return new SkyBox({\n            nx: RESOURCES_URL + \"skybox/gal/_nx.jpg\",\n            px: RESOURCES_URL + \"skybox/gal/_px.jpg\",\n            py: RESOURCES_URL + \"skybox/gal/_py.jpg\",\n            ny: RESOURCES_URL + \"skybox/gal/_ny.jpg\",\n            pz: RESOURCES_URL + \"skybox/gal/_pz.jpg\",\n            nz: RESOURCES_URL + \"skybox/gal/_nz.jpg\"\n        });\n    }\n\n    public override init() {\n        this.renderer!.handler!.addProgram(shaders.skybox(), true);\n        this.texture = this.renderer!.handler.loadCubeMapTexture(this.params);\n        this._createBuffers();\n        this.drawMode = this.renderer!.handler.gl!.TRIANGLES;\n    }\n\n    public override frame() {\n        let h = this.renderer!.handler;\n        let gl = h.gl!;\n        let cam = this.renderer!.activeCamera!;\n        gl.disable(gl.DEPTH_TEST);\n\n        h.programs.skybox.activate();\n        let sh = h.programs.skybox._program;\n        let shu = sh.uniforms;\n        gl.uniformMatrix4fv(shu.projectionViewMatrix, false, cam.getProjectionViewMatrix());\n        gl.uniform3fv(shu.pos, cam.eye.toArray());\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, this.texture!);\n        gl.uniform1i(shu.uSampler, 0);\n        let buf = this.vertexPositionBuffer!;\n        gl.bindBuffer(gl.ARRAY_BUFFER, buf);\n        gl.vertexAttribPointer(sh.attributes.aVertexPosition, buf.itemSize, gl.FLOAT, false, 0, 0);\n\n        gl.drawArrays(this.drawMode, 0, buf.numItems);\n        gl.enable(gl.DEPTH_TEST);\n    }\n\n    protected _createBuffers() {\n\n        const vertices = new Float32Array([\n            -100000000.0, 100000000.0, -100000000.0,\n            -100000000.0, -100000000.0, -100000000.0,\n            100000000.0, -100000000.0, -100000000.0,\n            100000000.0, -100000000.0, -100000000.0,\n            100000000.0, 100000000.0, -100000000.0,\n            -100000000.0, 100000000.0, -100000000.0,\n\n            -100000000.0, -100000000.0, 100000000.0,\n            -100000000.0, -100000000.0, -100000000.0,\n            -100000000.0, 100000000.0, -100000000.0,\n            -100000000.0, 100000000.0, -100000000.0,\n            -100000000.0, 100000000.0, 100000000.0,\n            -100000000.0, -100000000.0, 100000000.0,\n\n            100000000.0, -100000000.0, -100000000.0,\n            100000000.0, -100000000.0, 100000000.0,\n            100000000.0, 100000000.0, 100000000.0,\n            100000000.0, 100000000.0, 100000000.0,\n            100000000.0, 100000000.0, -100000000.0,\n            100000000.0, -100000000.0, -100000000.0,\n\n            -100000000.0, -100000000.0, 100000000.0,\n            -100000000.0, 100000000.0, 100000000.0,\n            100000000.0, 100000000.0, 100000000.0,\n            100000000.0, 100000000.0, 100000000.0,\n            100000000.0, -100000000.0, 100000000.0,\n            -100000000.0, -100000000.0, 100000000.0,\n\n            -100000000.0, 100000000.0, -100000000.0,\n            100000000.0, 100000000.0, -100000000.0,\n            100000000.0, 100000000.0, 100000000.0,\n            100000000.0, 100000000.0, 100000000.0,\n            -100000000.0, 100000000.0, 100000000.0,\n            -100000000.0, 100000000.0, -100000000.0,\n\n            -100000000.0, -100000000.0, -100000000.0,\n            -100000000.0, -100000000.0, 100000000.0,\n            100000000.0, -100000000.0, -100000000.0,\n            100000000.0, -100000000.0, -100000000.0,\n            -100000000.0, -100000000.0, 100000000.0,\n            100000000.0, -100000000.0, 100000000.0\n        ]);\n\n        this.vertexPositionBuffer = this.renderer!.handler.createArrayBuffer(vertices, 3, vertices.length / 3);\n    }\n}\n\nexport {SkyBox};\n","import {binarySearchFast, TypedArray} from \"../utils/shared\";\nimport {Geoid} from \"./Geoid\";\nimport {LonLat} from \"../LonLat\";\nimport {Planet} from \"../scene/Planet\";\nimport {Segment} from \"../segment/Segment\";\n\nexport interface IEmptyTerrainParams {\n    equalizeVertices?: boolean;\n    name?: string;\n    minZoom?: number;\n    maxZoom?: number;\n    maxNativeZoom?: number;\n    geoidSrc?: string;\n    geoid?: Geoid;\n    gridSizeByZoom?: number[]\n}\n\nexport type UrlRewriteFunc = (tileX: number, tileY: number, tileZoom: number, tileGroup: number) => string | null | undefined;\n\n/**\n * Class represents terrain provider without elevation data.\n * @param {IEmptyTerrainParams} [options] - Provider options:\n * @param {string} [options.name=\"empty\"] - Provider name.\n * @param {boolean} [options.equalizeVertices] -\n * @param {number} [options.minZoom=2] - Minimal visible zoom index when terrain handler works.\n * @param {number} [options.minZoom=50] - Maximal visible zoom index when terrain handler works.\n * @param {number} [options.maxNativeZoom=19] - Maximal available terrain zoom level.\n * @param {Array.<number>} [options.gridSizeByZoom] - Array of segment triangulation grid sizes where array index agreed to the segment zoom index.\n * @param {Array.<number>} [gridSizeByZoom] - Array of values, where each value corresponds to the size of a tile(or segment) on the globe. Each value must be power of two.\n * @param {Geoid} [options.geoid] -\n * @param {string} [options.geoidSrc] -\n */\nclass EmptyTerrain {\n\n    static __counter__: number = 0;\n\n    /**\n     * Uniq identifier.\n     * @public\n     * @type {number}\n     */\n    public __id: number;\n\n    public equalizeVertices: boolean;\n\n    public equalizeNormals: boolean;\n\n    public isEmpty: boolean;\n\n    /**\n     * Provider name is \"empty\"\n     * @public\n     * @type {string}\n     */\n    public name: string;\n\n    /**\n     * Minimal z-index value for segment elevation data handling.\n     * @public\n     * @type {number}\n     */\n    public minZoom: number;\n\n    /**\n     * Maximal z-index value for segment elevation data handling.\n     * @public\n     * @type {number}\n     */\n    public maxZoom: number;\n\n    public noDataValues: number[];\n\n    /**\n     * Maximal existent available zoom\n     * @type {number}\n     */\n    public maxNativeZoom: number;\n\n    /**\n     * @public\n     * @type {Array.<number>}\n     */\n    public gridSizeByZoom: number[];\n\n    public _maxNodeZoom: number;\n\n    /**\n     * Elevation grid size. Current is 2x2 is the smallest grid size.\n     * @public\n     * @type {number}\n     */\n    public plainGridSize: number;\n\n    /**\n     * Planet scene.\n     * @public\n     * @type {Planet}\n     */\n    public _planet: Planet | null;\n\n    public _geoid: Geoid;\n\n    public _isReady: boolean;\n\n    constructor(options: IEmptyTerrainParams = {}) {\n\n        this.__id = EmptyTerrain.__counter__++;\n\n        this.equalizeVertices = options.equalizeVertices || false;\n\n        this.equalizeNormals = false;\n\n        this.isEmpty = true;\n\n        this.name = options.name || \"empty\";\n\n        this.minZoom = options.minZoom || 2;\n\n        this.maxZoom = options.maxZoom || 19;\n\n        this.maxNativeZoom = options.maxNativeZoom || this.maxZoom;\n\n        this.gridSizeByZoom = options.gridSizeByZoom || [\n            64, 32, 16, 8, 4, 4, 4, 4, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2\n        ];\n\n        this._maxNodeZoom = this.gridSizeByZoom.length - 1;\n\n        this.plainGridSize = 2;\n\n        this.noDataValues = [];\n\n        this._planet = null;\n\n        this._geoid = options.geoid || new Geoid({\n            src: options.geoidSrc || null\n        });\n\n        this._isReady = false;\n\n        // const _ellToAltFn = [\n        //     (lon, lat, alt, callback) => callback(alt),\n        //     (lon, lat, alt, callback) => callback(alt - this._geoid.getHeight(lon, lat)),\n        //     (lon, lat, alt, callback) => {\n\n        //         let x = mercator.getTileX(lon, zoom),\n        //             y = mercator.getTileY(lat, zoom);\n\n        //         let mslAlt = alt - this._geoid.getHeight(lon, lat);\n\n        //         if (true) {\n\n        //         } else {\n\n        //         }\n\n        //         return callback(mslAlt);\n        //     },\n        // ];\n    }\n\n    /**\n     * Sets url rewrite callback, used for custom url rewriting for every tile loading.\n     * @public\n     * @param {UrlRewriteFunc} ur - The callback that returns tile custom created url.\n     */\n    public setUrlRewriteCallback(ur: UrlRewriteFunc) {\n    }\n\n    public get isIdle(): boolean {\n        return true;\n    }\n\n    public isEqual(obj: this): boolean {\n        return obj.__id === this.__id;\n    }\n\n    static checkNoDataValue(noDataValues: number[] | TypedArray, value: number): boolean {\n        return binarySearchFast(noDataValues, value) !== -1;\n    }\n\n    public isBlur(segment?: Segment): boolean {\n        return false;\n    }\n\n    public set maxNodeZoom(val: number) {\n        if (val > this.gridSizeByZoom.length - 1) {\n            val = this.gridSizeByZoom.length - 1;\n        }\n        this._maxNodeZoom = val;\n    }\n\n    public get maxNodeZoom(): number {\n        return this._maxNodeZoom;\n    }\n\n    public set geoid(geoid: Geoid) {\n        this._geoid = geoid;\n    }\n\n    public get geoid(): Geoid {\n        return this._geoid;\n    }\n\n    public getGeoid(): Geoid {\n        return this._geoid;\n    }\n\n    /**\n     * Loads or creates segment elevation data.\n     * @public\n     * @param {Segment} segment - Segment to create elevation data.\n     */\n    public handleSegmentTerrain(segment: Segment) {\n        segment.terrainIsLoading = false;\n        segment.terrainReady = true;\n        segment.terrainExists = true;\n    }\n\n    public isReady(): boolean {\n        return this._isReady;\n    }\n\n    public abortLoading() {\n    }\n\n    public clearCache() {\n    }\n\n    public getHeightAsync(lonLat: LonLat, callback: (height: number) => void): boolean {\n        callback(0);\n        return true;\n    }\n\n    public loadTerrain(segment: Segment, forceLoading: boolean = false) {\n\n    }\n}\n\nexport {EmptyTerrain};","import * as mercator from \"../mercator\";\nimport {createEvents, EventsHandler} from \"../Events\";\nimport {createExtent, stringTemplate, TypedArray} from \"../utils/shared\";\nimport {EmptyTerrain, IEmptyTerrainParams, UrlRewriteFunc} from \"./EmptyTerrain\";\nimport {Extent} from \"../Extent\";\nimport {Layer} from \"../layer/Layer\";\nimport {IResponse, Loader} from \"../utils/Loader\";\nimport {LonLat} from \"../LonLat\";\nimport {NOTRENDERING} from \"../quadTree/quadTree\";\nimport {Segment, TILEGROUP_COMMON} from \"../segment/Segment\";\n// import { QueueArray } from '../QueueArray';\nimport {Ray} from \"../math/Ray\";\nimport {Vec3} from \"../math/Vec3\";\n\nexport interface IGlobusTerrainParams extends IEmptyTerrainParams {\n    subdomains?: string[];\n    url?: string;\n    extent?: Extent | [[number, number], [number, number]];\n    urlRewrite?: UrlRewriteFunc;\n    noDataValues?: number[];\n    plainGridSize?: number;\n    heightFactor?: number;\n}\n\ntype TileData = {\n    heights: number[] | TypedArray | null,\n    extent: Extent | null\n}\n\n/**\n * @deprecated\n * Use GlobusRgbTerrain\n * Class that loads segment elevation data, converts it to the array and passes it to the planet segment.\n * @class\n * @extends {GlobusTerrain}\n * @param {string} [name=\"\"] - Terrain provider name.\n * @param {IGlobusTerrainParams} [options] - Provider options:\n * @param {number} [options.minZoom=3] - Minimal visible zoom index when terrain handler works.\n * @param {number} [options.minZoom=14] - Maximal visible zoom index when terrain handler works.\n * @param {number} [options.minNativeZoom=14] - Maximal available terrain zoom level.\n * @param {string} [options.url=\"//openglobus.org/heights/srtm3/{z}/{y}/{x}.ddm\"] - Terrain source path url template. Default is openglobus ddm elevation file.\n * @param {Array.<number>} [options.gridSizeByZoom] - Array of segment triangulation grid sizes where array index agreed to the segment zoom index.\n * @param {number} [options.plainGridSize=32] - Elevation grid size. Default is 32x32. Must be power of two.\n * @param {string} [options.responseType=\"arraybuffer\"] - Response type.\n * @param {number} [options.MAX_LOADING_TILES] - Maximum at one time loading tiles.\n * @param {Array.<number>} [gridSizeByZoom] - Array of values, where each value corresponds to the size of a tile(or segment) on the globe. Each value must be power of two.\n * @param {number} [heightFactor=1] - Elevation height multiplier.\n *\n * @fires GlobusTerrainEvents#load\n * @fires GlobusTerrainEvents#loadend\n */\nclass GlobusTerrain extends EmptyTerrain {\n\n    public events: GlobusTerrainEvents;\n\n    protected _s: string[];\n\n    protected _requestCount: number;\n\n    protected _requestsPeerSubdomain: number;\n\n    /**\n     * Terrain source path url template.\n     * @protected\n     * @type {string}\n     */\n    protected url: string;\n\n    protected _extent: Extent;\n\n    protected _dataType: string;\n\n    protected _elevationCache: Record<string, TileData>;\n\n    protected _fetchCache: Record<string, Promise<any>>;\n\n    protected _loader: Loader<GlobusTerrain>;\n\n    /**\n     * Rewrites elevation storage url query.\n     * @protected\n     * @type {Function} -\n     */\n    protected _urlRewriteCallback: UrlRewriteFunc | null;\n\n    protected _heightFactor: number;\n\n\n    constructor(name: string = \"\", options: IGlobusTerrainParams = {}) {\n\n        super({\n            geoidSrc: \"https://openglobus.org/geoid/egm84-30.pgm\",\n            maxNativeZoom: options.maxNativeZoom || 14,\n            ...options\n        });\n\n        this._s = options.subdomains || [\"a\", \"b\", \"c\"];\n\n        this.events = createEvents(GLOBUSTERRAIN_EVENTS, this);\n\n        this._requestCount = 0;\n\n        this._requestsPeerSubdomain = 4;\n\n        this.isEmpty = false;\n\n        this.equalizeNormals = true;\n\n        this.name = name || \"openglobus\";\n\n        this.url = options.url || \"https://{s}.srtm3.openglobus.org/{z}/{y}/{x}.ddm\";\n\n        this.gridSizeByZoom = options.gridSizeByZoom || [\n            64, 32, 32, 16, 16, 8, 8, 8, 16, 16, 16, 32, 32, 32, 32, 16, 8, 4, 2, 2, 2, 2, 2, 2\n        ];\n\n        this._heightFactor = options.heightFactor != undefined ? options.heightFactor : 1.0;\n\n        this.noDataValues = options.noDataValues || [];\n\n        for (let i = 0; i < this.noDataValues.length; i++) {\n            this.noDataValues[i] *= this._heightFactor;\n        }\n\n        this.plainGridSize = options.plainGridSize || 32;\n\n        this._extent = createExtent(options.extent, new Extent(new LonLat(-180.0, -90.0), new LonLat(180.0, 90.0)));\n\n        this._dataType = \"arrayBuffer\";\n\n        this._maxNodeZoom = this.gridSizeByZoom.length - 1;\n\n        this._elevationCache = {};\n\n        this._fetchCache = {};\n\n        this._loader = new Loader<GlobusTerrain>();\n\n        this._urlRewriteCallback = options.urlRewrite || null;\n    }\n\n    public get loader(): Loader<GlobusTerrain> {\n        return this._loader;\n    }\n\n    public override clearCache() {\n        for (let c in this._elevationCache) {\n            this._elevationCache[c].heights = null;\n            this._elevationCache[c].extent = null;\n            delete this._elevationCache[c];\n        }\n        //@ts-ignore\n        this._elevationCache = null;\n        this._elevationCache = {};\n\n        for (let c in this._fetchCache) {\n            //@ts-ignore\n            this._fetchCache[c] = null;\n            delete this._fetchCache[c];\n        }\n        //@ts-ignore\n        this._fetchCache = null;\n        this._fetchCache = {};\n    }\n\n    public override isBlur(segment: Segment): boolean {\n        return segment.tileZoom >= 6;\n    }\n\n    public setElevationCache(tileIndex: string, tileData: TileData) {\n        this._elevationCache[tileIndex] = tileData;\n    }\n\n    public getElevationCache(tileIndex: string): TileData | undefined {\n        return this._elevationCache[tileIndex];\n    }\n\n    public override getHeightAsync(lonLat: LonLat, callback: (h: number) => void, zoom?: number, firstAttempt?: boolean): boolean {\n        if (!lonLat || lonLat.lat > mercator.MAX_LAT || lonLat.lat < mercator.MIN_LAT) {\n            callback(0);\n            return true;\n        }\n\n        firstAttempt = firstAttempt != undefined ? firstAttempt : true;\n\n        const [x, y, z, tileGroup] = this._planet!.quadTreeStrategy.getTileXY(lonLat, zoom || this.maxZoom);\n\n        let tileIndex = Layer.getTileIndex(x, y, z, tileGroup);\n\n        let cache = this.getElevationCache(tileIndex);\n\n        let merc = mercator.forward(lonLat)\n\n        if (cache) {\n            if (cache.heights) {\n                callback(this._getGroundHeightMerc(merc, cache));\n            } else {\n                callback(0);\n            }\n            return true;\n        } else {\n            let def = this._fetchCache[tileIndex];\n            if (!def) {\n                def = this._loader.fetch({\n                    src: this.buildURL(x, y, z, tileGroup),\n                    type: this._dataType\n                });\n                this._fetchCache[tileIndex] = def;\n            }\n\n            def!.then((response: IResponse) => {\n\n                let extent = mercator.getTileExtent(x, y, z);\n\n                if (response.status === \"ready\") {\n\n                    let cache: TileData = {\n                        heights: this._createHeights(response.data, null, tileGroup, x, y, z, extent),\n                        extent: extent\n                    };\n\n                    this.setElevationCache(tileIndex, cache);\n\n                    callback(this._getGroundHeightMerc(merc, cache));\n\n                } else if (response.status === \"error\") {\n                    if (firstAttempt && z > this.maxNativeZoom) {\n                        firstAttempt = false;\n                        this.getHeightAsync(lonLat, callback, this.maxNativeZoom, false);\n                        return;\n                    }\n\n                    this.setElevationCache(tileIndex, {\n                        heights: null,\n                        extent: extent\n                    });\n\n                    callback(0);\n\n                } else {\n                    // @ts-ignore\n                    this._fetchCache[tileIndex] = null;\n                    delete this._fetchCache[tileIndex];\n                }\n            });\n        }\n\n        return false;\n    }\n\n    protected _getGroundHeightMerc(merc: LonLat, tileData: TileData): number {\n        if (!(tileData.extent && tileData.heights)) {\n            return 0;\n        }\n\n        let w = tileData.extent.getWidth(),\n            gs = Math.sqrt(tileData.heights.length);\n\n        let size = w / (gs - 1);\n\n        /*\n        v2-----------v3\n        |            |\n        |            |\n        |            |\n        v0-----------v1\n        */\n\n        let i = gs - Math.ceil((merc.lat - tileData.extent.southWest.lat) / size) - 1,\n            j = Math.floor((merc.lon - tileData.extent.southWest.lon) / size);\n\n        let v0Ind = (i + 1) * gs + j,\n            v1Ind = v0Ind + 1,\n            v2Ind = i * gs + j,\n            v3Ind = v2Ind + 1;\n\n        let h0 = tileData.heights[v0Ind],\n            h1 = tileData.heights[v1Ind],\n            h2 = tileData.heights[v2Ind],\n            h3 = tileData.heights[v3Ind];\n\n        let v0 = new Vec3(tileData.extent.southWest.lon + size * j, h0, tileData.extent.northEast.lat - size * i - size),\n            v1 = new Vec3(v0.x + size, h1, v0.z),\n            v2 = new Vec3(v0.x, h2, v0.z + size),\n            v3 = new Vec3(v0.x + size, h3, v0.z + size);\n\n        let xyz = new Vec3(merc.lon, 100000.0, merc.lat),\n            ray = new Ray(xyz, new Vec3(0, -1, 0));\n\n        let res = new Vec3();\n        let d = ray.hitTriangle(v0, v1, v2, res);\n\n        if (d === Ray.INSIDE) {\n            return res.y;\n        }\n\n        d = ray.hitTriangle(v1, v3, v2, res);\n        if (d === Ray.INSIDE) {\n            return res.y;\n        }\n\n        return 0;\n    }\n\n    /**\n     * Stop loading.\n     * @public\n     */\n    public override abortLoading() {\n        this._loader.abortAll();\n    }\n\n    /**\n     * Sets terrain data url template.\n     * @public\n     * @param {string} url - Url template.\n     * @example <caption>Default openglobus url template:</caption>:\n     * \"http://earth3.openglobus.org/{z}/{y}/{x}.ddm\"\n     */\n    public setUrl(url: string) {\n        this.url = url;\n    }\n\n    /**\n     * Sets provider name.\n     * @public\n     * @param {string} name - Name.\n     */\n    public setName(name: string) {\n        this.name = name;\n    }\n\n    public isReadyToLoad(segment: Segment): boolean {\n        return segment._tileGroup === TILEGROUP_COMMON && this._extent.overlaps(segment.getExtentLonLat());\n    }\n\n    /**\n     * Starts to load segment elevation data.\n     * @public\n     * @param {Segment} segment - Segment that wants a terrain data.\n     * @param {boolean} [forceLoading] -\n     */\n    public override loadTerrain(segment: Segment, forceLoading: boolean = false) {\n\n        if (this._planet!.terrainLock.isFree()) {\n\n            segment.terrainReady = false;\n            segment.terrainIsLoading = true;\n\n            if (this.isReadyToLoad(segment)) {\n\n                let cache = this.getElevationCache(segment.tileIndex);\n\n                if (cache) {\n                    this._applyElevationsData(segment, cache.heights);\n                } else {\n                    this._loader.load({\n                            sender: this,\n                            src: this._getHTTPRequestString(segment),\n                            segment: segment,\n                            type: this._dataType,\n                            filter: () => (segment.plainReady && segment.node.getState() !== NOTRENDERING) || forceLoading\n                        }, (response: IResponse) => {\n\n                            if (response.status === \"ready\") {\n\n                                let heights = this._createHeights(\n                                    response.data,\n                                    segment,\n                                    segment._tileGroup,\n                                    segment.tileX,\n                                    segment.tileY,\n                                    segment.tileZoom,\n                                    segment.getExtent(),\n                                    segment.tileZoom === this.maxZoom\n                                );\n\n                                this.setElevationCache(segment.tileIndex, {\n                                    heights: heights,\n                                    extent: segment.getExtent()\n                                });\n\n                                this._applyElevationsData(segment, heights);\n\n                            } else if (response.status === \"abort\") {\n                                segment.terrainIsLoading = false;\n                            } else if (response.status === \"error\") {\n                                this._applyElevationsData(segment, null);\n                            } else {\n                                segment.terrainIsLoading = false;\n                            }\n                        }\n                    );\n                }\n            } else {\n                segment.elevationsNotExists();\n            }\n        } else {\n            segment.terrainIsLoading = false;\n        }\n    }\n\n    protected _getSubdomain(): string {\n        this._requestCount++;\n        return this._s[Math.floor(this._requestCount % (this._requestsPeerSubdomain * this._s.length) / this._requestsPeerSubdomain)];\n    }\n\n    public buildURL(x: number, y: number, z: number, tileGroup: number): string {\n        return stringTemplate(this.url, {\n            s: this._getSubdomain(),\n            x: x.toString(),\n            y: y.toString(),\n            z: z.toString()\n        });\n    }\n\n    /**\n     * Creates default query url string.\n     * @protected\n     * @param {Segment} segment -\n     * @returns {string} -\n     */\n    protected _createUrl(segment: Segment): string {\n        return this.buildURL(segment.tileX, segment.tileY, segment.tileZoom, segment._tileGroup);\n    }\n\n    /**\n     * Returns actual url query string.\n     * @protected\n     * @param {Segment} segment - Segment that loads image data.\n     * @returns {string} - Url string.\n     */\n    protected _getHTTPRequestString(segment: Segment): string {\n        if (this._urlRewriteCallback) {\n            return this._urlRewriteCallback(segment.tileX, segment.tileY, segment.tileZoom, segment._tileGroup) || this._createUrl(segment);\n        } else {\n            return this._createUrl(segment);\n        }\n    }\n\n    /**\n     * Sets url rewrite callback, used for custom url rewriting for every tile loading.\n     * @public\n     * @param {UrlRewriteFunc} ur - The callback that returns tile custom created url.\n     */\n    public override setUrlRewriteCallback(ur: UrlRewriteFunc) {\n        this._urlRewriteCallback = ur;\n    }\n\n    /**\n     * Converts loaded data to segment elevation data type(column major elevation data array in meters)\n     * @public\n     * @returns {Array.<number>} -\n     */\n    protected _createHeights(data: any, segment?: Segment | null, tileGroup?: number, x?: number, y?: number, z?: number, extent?: Extent, isMaxZoom?: boolean): TypedArray | number[] {\n        if (this._heightFactor !== 1) {\n            let res = new Float32Array(data);\n            for (let i = 0, len = res.length; i < len; i++) {\n                res[i] = res[i] * this._heightFactor;\n            }\n            return res;\n        }\n        return new Float32Array(data);\n    }\n\n    /**\n     * @protected\n     */\n    protected _applyElevationsData(segment: Segment, elevations: number[] | TypedArray | null) {\n        if (segment) {\n            let e = this.events.load!;\n            if (e.handlers.length) {\n                this.events.dispatch(e, {\n                    elevations: elevations,\n                    segment: segment\n                });\n            }\n            segment.applyTerrain(elevations);\n        }\n    }\n}\n\ntype GlobusTerrainEventsList = [\n    \"load\",\n    \"loadend\"\n];\n\ntype GlobusTerrainEvents = EventsHandler<GlobusTerrainEventsList>;\n\nconst GLOBUSTERRAIN_EVENTS: GlobusTerrainEventsList = [\n    /**\n     * Triggered when current elevation tile has loaded but before rendering.\n     * @event og.terrain.GlobusTerrain#load\n     */\n    \"load\",\n\n    /**\n     * Triggered when all elevation tiles have loaded or loading has stopped.\n     * @event og.terrain.GlobusTerrain#loadend\n     */\n    \"loadend\"\n];\n\n\nexport {GlobusTerrain};","import * as mercator from \"../mercator\";\nimport {Layer, ILayerParams, LayerEventsList} from \"./Layer\";\nimport {RENDERING} from \"../quadTree/quadTree\";\nimport {Segment} from \"../segment/Segment\";\nimport {stringTemplate} from \"../utils/shared\";\nimport {EventsHandler} from \"../Events\";\nimport {Material} from \"./Material\";\nimport {NumberArray4} from \"../math/Vec4\";\nimport {IResponse} from \"../utils/Loader\";\n\nexport interface IXYZParams extends ILayerParams {\n    url?: string;\n    subdomains?: string[];\n    minNativeZoom?: number;\n    maxNativeZoom?: number;\n    urlRewrite?: Function;\n}\n\ntype XYZEventsList = [\n    \"load\",\n    \"loadend\"\n];\n\ntype XYZEventsType = EventsHandler<XYZEventsList> & EventsHandler<LayerEventsList>;\n\n/**\n * Represents an imagery tiles source provider.\n * @class\n * @extends {Layer}\n * @param {string} name - Layer name.\n * @param {IXYZParams} options:\n * @param {number} [options.opacity=1.0] - Layer opacity.\n * @param {Array.<string>} [options.subdomains=['a','b','c']] - Subdomains of the tile service.\n * @param {number} [options.minZoom=0] - Minimal visibility zoom level.\n * @param {number} [options.maxZoom=0] - Maximal visibility zoom level.\n * @param {number} [options.minNativeZoom=0] - Minimal available zoom level.\n * @param {number} [options.maxNativeZoom=19] - Maximal available zoom level.\n * @param {string} [options.attribution] - Layer attribution that displayed in the attribution area on the screen.\n * @param {boolean} [options.isBaseLayer=false] - Base layer flag.\n * @param {boolean} [options.visibility=true] - Layer visibility.\n * @param {string} [options.crossOrigin=true] - If true, all tiles will have their crossOrigin attribute set to ''.\n * @param {string} options.url - Tile url source template(see example below).\n * @param {string} options.textureFilter - texture gl filter. NEAREST, LINEAR, MIPMAP, ANISOTROPIC.\n * @param {Function} options.urlRewrite - Url rewrite function.\n *\n * @fires EventsHandler<XYZEventsList>#load\n * @fires EventsHandler<XYZEventsList>#loadend\n *\n * @example <caption>Creates OpenStreetMap base tile layer</caption>\n * new og.layer.XYZ(\"OpenStreetMap\", {\n *     isBaseLayer: true,\n *     url: \"http://b.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n *     visibility: true,\n *     attribution: 'Data @ <a href=\"http://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"http://www.openstreetmap.org/copyright\">ODbL</a>'\n * });\n */\nexport class XYZ extends Layer {\n\n    public override events: XYZEventsType;\n\n    /**\n     * Tile url source template.\n     * @public\n     * @type {string}\n     */\n    public url: string;\n\n    /**\n     * @protected\n     */\n    protected _s: string[];\n\n    /**\n     * Minimal native zoom level when tiles are available.\n     * @public\n     * @type {number}\n     */\n    public minNativeZoom: number;\n\n    /**\n     * Maximal native zoom level when tiles are available.\n     * @public\n     * @type {number}\n     */\n    public maxNativeZoom: number;\n\n    /**\n     * Rewrites imagery tile url query.\n     * @private\n     * @param {Segment} segment - Segment to load.\n     * @param {string} url - Created url.\n     * @returns {string} - Url query string.\n     */\n    protected _urlRewriteCallback: Function | null;\n\n    protected _requestsPeerSubdomains: number;\n\n    protected _requestCount: number;\n\n    constructor(name: string | null, options: IXYZParams = {}) {\n        super(name, options);\n\n        //@ts-ignore\n        this.events = this.events.registerNames(XYZ_EVENTS);\n\n        this.url = options.url || \"\";\n\n        this._s = options.subdomains || [\"a\", \"b\", \"c\"];\n\n        this.minNativeZoom = options.minNativeZoom || 0;\n\n        this.maxNativeZoom = options.maxNativeZoom || 19;\n\n        this._urlRewriteCallback = options.urlRewrite || null;\n\n        this._requestsPeerSubdomains = 4;\n\n        this._requestCount = 0;\n    }\n\n    /**\n     * @warning Use XYZ.isIdle in requestAnimationFrame(after setVisibility)\n     */\n    public override get isIdle(): boolean {\n        return super.isIdle && this._planet!._tileLoader.getRequestCounter(this) === 0;\n    }\n\n    public override get instanceName(): string {\n        return \"XYZ\";\n    }\n\n    /**\n     * Abort loading tiles.\n     * @public\n     */\n    public override abortLoading() {\n        if (this._planet) {\n            this._planet._tileLoader.abort(this);\n        }\n    }\n\n    /**\n     * Sets layer visibility.\n     * @public\n     * @param {boolean} visibility - Layer visibility.\n     */\n    public override setVisibility(visibility: boolean) {\n        if (visibility !== this._visibility) {\n            super.setVisibility(visibility);\n            if (!visibility) {\n                this.abortLoading();\n            }\n        }\n    }\n\n    public override remove(): this {\n        this.abortLoading();\n        super.remove();\n        return this;\n    }\n\n    /**\n     * Sets imagery tiles url source template.\n     * @public\n     * @param {string} url - Url template.\n     * @example\n     * http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\n     * where {z}, {x} and {y} - replaces by current tile values, {s} - random domain.\n     */\n    public setUrl(url: string) {\n        this.url = url;\n    }\n\n    public _checkSegment(segment: Segment) {\n        return segment._projection.id === this._planet!.quadTreeStrategy.projection.id;\n    }\n\n    /**\n     * Start to load tile material.\n     * @public\n     * @virtual\n     * @param {Material} material - Loads current material.\n     * @param {boolean} [forceLoading=false] -\n     */\n    public override loadMaterial(material: Material, forceLoading: boolean = false) {\n\n        let seg = material.segment;\n\n        if (this._isBaseLayer) {\n            material.texture = seg.getDefaultTexture();\n        } else {\n            material.texture = seg.planet.transparentTexture;\n        }\n\n        // Q: Maybe we should change \"<2\" to material.segment.tileZoom < (material.layer.minZoom + 1)\n        if (this._planet!.layerLock.isFree() || material.segment.tileZoom < 2) {\n            material.isReady = false;\n            material.isLoading = true;\n\n            if (this._checkSegment(seg)) {\n                material.loadingAttempts++;\n\n                this._planet!._tileLoader.load({\n                        sender: this,\n                        src: this._getHTTPRequestString(material.segment),\n                        type: \"imageBitmap\",\n                        filter: () => (seg.initialized && seg.node.getState() === RENDERING) || forceLoading,\n                        options: {}\n                    },\n                    (response: IResponse) => {\n                        if (response.status === \"ready\") {\n                            if (material.isLoading) {\n                                let e = this.events.load!;\n                                if (e.handlers.length) {\n                                    this.events.dispatch(e, material);\n                                }\n                                material.applyImage(response.data);\n                                response.data = null;\n                            }\n                        } else if (response.status === \"abort\") {\n                            material.isLoading = false;\n                        } else if (response.status === \"error\") {\n                            if (material.isLoading) {\n                                material.textureNotExists();\n                            }\n                        }\n                    }\n                    //,this.__id\n                );\n            } else {\n                material.textureNotExists();\n            }\n        }\n    }\n\n    /**\n     * Creates query url.\n     * @protected\n     * @virtual\n     * @param {Segment} segment - Creates specific url for current segment.\n     * @returns {string} - Returns url string.\n     */\n    protected _createUrl(segment: Segment): string {\n        return stringTemplate(this.url, {\n            s: this._getSubdomain(),\n            x: segment.tileX.toString(),\n            y: segment.tileY.toString(),\n            z: segment.tileZoom.toString()\n        });\n    }\n\n    protected _getSubdomain(): string {\n        this._requestCount++;\n        return this._s[Math.floor(this._requestCount % (this._requestsPeerSubdomains * this._s.length) / this._requestsPeerSubdomains)];\n    }\n\n    /**\n     * Returns actual url query string.\n     * @protected\n     * @param {Segment} segment - Segment that loads image data.\n     * @returns {string} - Url string.\n     */\n    protected _getHTTPRequestString(segment: Segment) {\n        return this._urlRewriteCallback ? this._urlRewriteCallback(segment, this.url) : this._createUrl(segment);\n    }\n\n    /**\n     * Sets url rewrite callback, used for custom url rewriting for every tile loading.\n     * @public\n     * @param {Function} ur - The callback that returns tile custom created url.\n     */\n    public setUrlRewriteCallback(ur: Function) {\n        this._urlRewriteCallback = ur;\n    }\n\n    public override applyMaterial(material: Material, forceLoading: boolean = false): NumberArray4 {\n        if (material.isReady) {\n            return material.texOffset;\n        } else if (material.segment.tileZoom < this.minNativeZoom) {\n            material.textureNotExists();\n        } else {\n\n            let segment = material.segment,\n                pn = segment.node,\n                notEmpty = false;\n\n            let mId = this.__id;\n            let psegm = material;\n            while (pn.parentNode) {\n                pn = pn.parentNode;\n                psegm = pn.segment.materials[mId];\n                if (psegm && psegm.textureExists) {\n                    notEmpty = true;\n                    break;\n                }\n            }\n\n            if (segment.passReady) {\n                let maxNativeZoom = (material.layer as XYZ).maxNativeZoom;\n                if (pn.segment.tileZoom === maxNativeZoom) {\n                    material.textureNotExists();\n                } else if (material.segment.tileZoom <= maxNativeZoom) {\n                    !material.isLoading && !material.isReady && this.loadMaterial(material, forceLoading);\n                } else {\n                    let pn = segment.node;\n                    while (pn.segment.tileZoom > (material.layer as XYZ).maxNativeZoom) {\n                        pn = pn.parentNode!;\n                    }\n                    let pnm = pn.segment.materials[material.layer.__id];\n                    if (pnm) {\n                        !pnm.isLoading && !pnm.isReady && this.loadMaterial(pnm, true);\n                    } else {\n                        pnm = pn.segment.materials[material.layer.__id] = material.layer.createMaterial(\n                            pn.segment\n                        );\n                        this.loadMaterial(pnm, true);\n                    }\n                }\n            }\n\n            if (notEmpty) {\n                material.appliedNode = pn;\n                material.appliedNodeId = pn.nodeId;\n                material.texture = psegm.texture;\n                let dZ2 = 1.0 / (2 << (segment.tileZoom - pn.segment.tileZoom - 1));\n                material.texOffset[0] = segment.tileX * dZ2 - pn.segment.tileX;\n                material.texOffset[1] = segment.tileY * dZ2 - pn.segment.tileY;\n                material.texOffset[2] = dZ2;\n                material.texOffset[3] = dZ2;\n            } else {\n                material.texture = segment.planet.transparentTexture;\n                material.texOffset[0] = 0.0;\n                material.texOffset[1] = 0.0;\n                material.texOffset[2] = 1.0;\n                material.texOffset[3] = 1.0;\n            }\n        }\n\n        return material.texOffset;\n    }\n\n    public override clearMaterial(material: Material) {\n        if (material.isReady && material.textureExists) {\n            !material.texture!.default && material.segment.handler.gl!.deleteTexture(material.texture!);\n            material.texture = null;\n        }\n\n        material.isReady = false;\n        material.textureExists = false;\n        material.isLoading = false;\n    }\n\n    /**\n     * @protected\n     */\n    protected override _correctFullExtent() {\n        let e = this._extent,\n            em = this._extentMerc;\n        let ENLARGE_MERCATOR_LON = mercator.POLE + 50000;\n        let ENLARGE_MERCATOR_LAT = mercator.POLE + 50000;\n        if (e.northEast.lat === 90.0) {\n            em.northEast.lat = ENLARGE_MERCATOR_LAT;\n        }\n        if (e.northEast.lon === 180.0) {\n            em.northEast.lon = ENLARGE_MERCATOR_LON;\n        }\n        if (e.southWest.lat === -90.0) {\n            em.southWest.lat = -ENLARGE_MERCATOR_LAT;\n        }\n        if (e.southWest.lon === -180.0) {\n            em.southWest.lon = -ENLARGE_MERCATOR_LON;\n        }\n\n        if (e.northEast.lat >= mercator.MAX_LAT) {\n            e.northEast.lat = mercator.MAX_LAT;\n        }\n\n        if (e.northEast.lat <= mercator.MIN_LAT) {\n            e.northEast.lat = mercator.MIN_LAT;\n        }\n    }\n}\n\nconst XYZ_EVENTS: XYZEventsList = [\n    /**\n     * Triggered when current tile image has loaded before rendering.\n     * @event #load\n     */\n    \"load\",\n\n    /**\n     * Triggered when all tiles have loaded or loading has stopped.\n     * @event #loadend\n     */\n    \"loadend\"\n];\n","import * as mercator from \"../mercator\";\nimport {Extent} from \"../Extent\";\nimport {LonLat} from \"../LonLat\";\nimport {Segment} from \"../segment/Segment\";\nimport {XYZ, IXYZParams} from \"./XYZ\";\n\ninterface IWMSParams extends IXYZParams {\n    extra?: any;\n    layers: string;\n    imageWidth?: number;\n    imageHeight?: number;\n    version?: string;\n}\n\n/**\n * Used to display WMS services as tile layers on the globe.\n * @class\n * @extends {XYZ}\n * @param {string} name - Layer name.\n * @param {Object} options - Options:\n * @param {number} [options.opacity=1.0] - Layer opacity.\n * @param {number} [options.minZoom=0] - Minimal visibility zoom level.\n * @param {number} [options.maxZoom=0] - Maximal visibility zoom level.\n * @param {string} [options.attribution] - Layer attribution that displayed in the attribution area on the screen.\n * @param {boolean} [options.isBaseLayer=false] - Base layer flag.\n * @param {boolean} [options.visibility=true] - Layer visibility.\n * @param {string} options.url - WMS url source.\n * @param {number} [options.width=256] - Tile width.\n * @param {number} [options.height=256] - Tile height.\n * @param {string} options.layers - WMS layers string.\n * @param {string} [options.version=\"1.1.1\"] - WMS version.\n * @param {Object} extra  - Extra parameters (by WMS reference or by WMS service vendors) to pass to WMS service.\n * @example:\n * new og.layer.WMS(\"USA States\", {\n *     isBaseLayer: false,\n *     url: \"http://openglobus.org/geoserver/\",\n *     layers: \"topp:states\",\n *     opacity: 0.5,\n *     zIndex: 50,\n *     attribution: 'USA states - geoserver WMS example',\n *     version: \"1.1.1\",\n *     visibility: false }, {\n *     transparent: true,\n *     sld: \"style.sld\"}\n * );\n */\nclass WMS extends XYZ {\n\n    protected _extra: string;\n\n    /**\n     * WMS layers string.\n     * @public\n     * @type {string}\n     */\n    public layers: string;\n\n    /**\n     * WMS tile width.\n     * @public\n     * @type {number}\n     */\n    public imageWidth: number;\n\n    /**\n     * WMS tile height.\n     * @public\n     * @type {number}\n     */\n    public imageHeight: number;\n\n    protected _getBbox: (extent: Extent) => string;\n\n    protected _version: string;\n\n    constructor(name: string | null, options: IWMSParams) {\n        super(name, options);\n\n        this._extra = new URLSearchParams(options.extra).toString();\n\n        if (!options.extent) {\n            this.setExtent(new Extent(new LonLat(-180.0, -90), new LonLat(180.0, 90)));\n        }\n\n        this.layers = options.layers;\n\n        /**\n         * WMS tile width.\n         * @public\n         * @type {number}\n         */\n        this.imageWidth = options.imageWidth || 256;\n\n        /**\n         * WMS tile height.\n         * @public\n         * @type {number}\n         */\n        this.imageHeight = options.imageHeight || 256;\n\n        this._getBbox = WMS.get_bbox_v1_1_1;\n\n        this._version = \"\";\n\n        this.setVersion(options.version);\n    }\n\n    static createRequestUrl(\n        url: string,\n        layers: string,\n        format: string = \"image/png\",\n        version: string = \"1.1.1\",\n        request: string = \"GetMap\",\n        srs: string,\n        bbox: string,\n        width: number = 256,\n        height: number = 256,\n        extra?: string\n    ): string {\n        return `${url}/?LAYERS=${layers}&FORMAT=${format}&SERVICE=WMS&VERSION=${version}&REQUEST=${request}&SRS=${srs}&BBOX=${bbox}&WIDTH=${width}&HEIGHT=${height}` + (extra ? `&${extra}` : \"\");\n    }\n\n    static get_bbox_v1_1_1(extent: Extent): string {\n        return `${extent.getWest()},${extent.getSouth()},${extent.getEast()},${extent.getNorth()}`;\n    }\n\n    static get_bbox_v1_3_0(extent: Extent): string {\n        return `${extent.getSouth()},${extent.getWest()},${extent.getNorth()},${extent.getEast()}`;\n    }\n\n    public override _checkSegment(segment: Segment) {\n        return true;\n    }\n\n    public override get instanceName(): string {\n        return \"WMS\";\n    }\n\n    protected override _createUrl(segment: Segment): string {\n        return WMS.createRequestUrl(\n            this.url,\n            this.layers,\n            \"image/png\",\n            this._version,\n            \"GetMap\",\n            segment._projection.code,\n            this._getBbox(segment.getExtent()),\n            this.imageWidth,\n            this.imageHeight,\n            this._extra\n        );\n    }\n\n    public setVersion(version?: string) {\n        if (version) {\n            this._version = version;\n        } else {\n            this._version = \"1.1.1\";\n        }\n\n        if (this._version === \"1.1.1\") {\n            this._getBbox = WMS.get_bbox_v1_1_1;\n        } else if (version === \"1.3.0\") {\n            this._getBbox = WMS.get_bbox_v1_3_0;\n        }\n    }\n\n    public override _correctFullExtent() {\n        const e = this._extent;\n        const em = this._extentMerc;\n\n        const ENLARGE_MERCATOR_LON = mercator.POLE + 50000;\n        const ENLARGE_MERCATOR_LAT = mercator.POLE + 50000;\n\n        if (e.northEast.lat === 90.0) {\n            em.northEast.lat = ENLARGE_MERCATOR_LAT;\n        }\n\n        if (e.northEast.lon === 180.0) {\n            em.northEast.lon = ENLARGE_MERCATOR_LON;\n        }\n\n        if (e.southWest.lat === -90.0) {\n            em.southWest.lat = -ENLARGE_MERCATOR_LAT;\n        }\n\n        if (e.southWest.lon === -180.0) {\n            em.southWest.lon = -ENLARGE_MERCATOR_LON;\n        }\n    }\n}\n\nexport {WMS};\n\n","import {getTileExtent} from \"../mercator\";\nimport {GlobusTerrain, IGlobusTerrainParams} from \"./GlobusTerrain\";\nimport {Layer} from \"../layer/Layer\";\nimport {WMS} from \"../layer/WMS\";\nimport {isPowerOfTwo, nextHighestPowerOfTwo} from \"../math\";\nimport {Segment} from \"../segment/Segment\";\nimport {Extent} from \"../Extent\";\nimport {TypedArray} from \"../utils/shared\";\n\ninterface IBilTerrainParams extends IGlobusTerrainParams {\n    layers?: string;\n    imageSize?: number;\n}\n\nclass BilTerrain extends GlobusTerrain {\n\n    protected _format: string;\n\n    protected _layers: string;\n\n    protected _imageSize: number;\n\n    constructor(options: IBilTerrainParams = {}) {\n        super(\"BilTerrain\", options);\n\n        this.equalizeVertices = true;\n\n        this.equalizeNormals = true;\n\n        this.minZoom = options.minZoom || 2;\n\n        this.maxZoom = options.maxZoom || 14;\n\n        this.noDataValues = options.noDataValues || [-9999, 32767];\n\n        this.url = options.url || \"\";\n\n        this._format = \"application/bil16\";\n\n        this._layers = options.layers || \"\";\n\n        this._imageSize = options.imageSize || 256;\n\n        this.plainGridSize = options.plainGridSize != undefined\n            ? options.plainGridSize\n            : isPowerOfTwo(this._imageSize) ? this._imageSize / 2 : nextHighestPowerOfTwo(this._imageSize) / 2;\n\n        this._dataType = \"arrayBuffer\";\n    }\n\n    public override isBlur(segment: Segment): boolean {\n        return segment.tileZoom >= 18;\n    }\n\n    protected override _createUrl(segment: Segment): string {\n        return WMS.createRequestUrl(\n            this.url,\n            this._layers,\n            this._format,\n            \"1.1.1\",\n            \"GetMap\",\n            segment._projection.code,\n            WMS.get_bbox_v1_1_1(segment.getExtent()),\n            this._imageSize,\n            this._imageSize\n        );\n    }\n\n    protected override _createHeights(data: number[], segment: Segment | null, tileGroup: number, tileX: number, tileY: number, tileZoom: number, extent: Extent, preventChildren: boolean): TypedArray | number[] {\n\n        let bil16 = new Int16Array(data);\n\n        //\n        //Non-power of two images\n        //\n        if (!isPowerOfTwo(this._imageSize)) {\n            let outCurrenElevations = new Float32Array(bil16.length);\n            //TODO: optimize\n            extractElevationTilesNonPowerOfTwo(bil16, outCurrenElevations);\n            return outCurrenElevations;\n        }\n\n        let elevationsSize = (this.plainGridSize + 1) * (this.plainGridSize + 1);\n\n        let d = 4;\n\n        let outChildrenElevations = new Array(d);\n\n        for (let i = 0; i < d; i++) {\n            outChildrenElevations[i] = [];\n            for (let j = 0; j < d; j++) {\n                outChildrenElevations[i][j] = new Float32Array(elevationsSize);\n            }\n        }\n\n        let outCurrenElevations = new Float32Array(elevationsSize);\n\n        extractElevationTiles(bil16, this.noDataValues, outCurrenElevations, outChildrenElevations);\n\n        let tileIndex = Layer.getTileIndex(tileX, tileY, tileZoom, tileGroup);\n\n        this.setElevationCache(tileIndex, {\n            heights: outCurrenElevations,\n            extent: extent\n        });\n\n        let dd = this._imageSize / this.plainGridSize;\n\n        for (let i = 0; i < dd; i++) {\n            for (let j = 0; j < dd; j++) {\n                let x = tileX * 2 + j,\n                    y = tileY * 2 + i,\n                    z = tileZoom + 1;\n                let tileIndex = Layer.getTileIndex(x, y, z, tileGroup);\n                this.setElevationCache(tileIndex, {\n                    heights: outChildrenElevations[i][j],\n                    extent: getTileExtent(x, y, z)\n                });\n            }\n        }\n\n        return outCurrenElevations;\n    }\n}\n\nfunction extractElevationTilesNonPowerOfTwo(data: number[] | TypedArray, outCurrenElevations: number[] | TypedArray) {\n    for (let i = 0, len = outCurrenElevations.length; i < len; i++) {\n        outCurrenElevations[i] = data[i];\n    }\n}\n\nfunction extractElevationTiles(data: number[] | TypedArray, noDataValues: number[] | TypedArray, outCurrenElevations: number[] | TypedArray, outChildrenElevations: number[][][] | TypedArray[][]) {\n    let destSize = Math.sqrt(outCurrenElevations.length) - 1;\n    let destSizeOne = destSize + 1;\n    let sourceSize = Math.sqrt(data.length);\n    let dt = sourceSize / destSize;\n\n    let rightHeight = 0,\n        bottomHeight = 0;\n\n    for (let k = 0, currIndex = 0, sourceDataLength = data.length; k < sourceDataLength; k++) {\n        let height = data[k];\n\n        let isNoDataCurrent = BilTerrain.checkNoDataValue(noDataValues, height),\n            isNoDataRight = false,\n            isNoDataBottom = false;\n\n        let i = Math.floor(k / sourceSize),\n            j = k % sourceSize;\n\n        let tileX = Math.floor(j / destSize),\n            tileY = Math.floor(i / destSize);\n\n        let destArr = outChildrenElevations[tileY][tileX];\n\n        let ii = i % destSize,\n            jj = j % destSize;\n\n        let destIndex = (ii + tileY) * destSizeOne + jj + tileX;\n\n        destArr[destIndex] = height;\n\n        if ((i + tileY) % dt === 0 && (j + tileX) % dt === 0) {\n            outCurrenElevations[currIndex++] = height;\n        }\n\n        if ((j + 1) % destSize === 0 && j !== sourceSize - 1) {\n            //current tile\n            rightHeight = data[k];\n\n            isNoDataRight = BilTerrain.checkNoDataValue(noDataValues, rightHeight);\n\n            let middleHeight = height;\n            if (!(isNoDataCurrent || isNoDataRight)) {\n                middleHeight = (height + rightHeight) * 0.5;\n            }\n\n            destIndex = (ii + tileY) * destSizeOne + jj + 1;\n            destArr[destIndex] = middleHeight;\n\n            if ((i + tileY) % dt === 0) {\n                outCurrenElevations[currIndex++] = middleHeight;\n            }\n\n            //next right tile\n            let rightindex = (ii + tileY) * destSizeOne + ((jj + 1) % destSize);\n            outChildrenElevations[tileY][tileX + 1][rightindex] = middleHeight;\n        }\n\n        if ((i + 1) % destSize === 0 && i !== sourceSize - 1) {\n            //current tile\n            bottomHeight = data[k + sourceSize];\n\n            isNoDataBottom = BilTerrain.checkNoDataValue(noDataValues, bottomHeight);\n\n            let middleHeight = height;\n\n            if (!(isNoDataCurrent || isNoDataBottom)) {\n                middleHeight = (height + bottomHeight) * 0.5;\n            }\n\n            destIndex = (ii + 1) * destSizeOne + jj + tileX;\n            destArr[destIndex] = middleHeight;\n\n            if ((j + tileX) % dt === 0) {\n                outCurrenElevations[currIndex++] = middleHeight;\n            }\n\n            //next bottom tile\n            let bottomindex = ((ii + 1) % destSize) * destSizeOne + jj + tileX;\n            outChildrenElevations[tileY + 1][tileX][bottomindex] = middleHeight;\n        }\n\n        if (\n            (j + 1) % destSize === 0 &&\n            j !== sourceSize - 1 &&\n            (i + 1) % destSize === 0 &&\n            i !== sourceSize - 1\n        ) {\n            //current tile\n            let rightBottomHeight = data[k + sourceSize + 1];\n\n            let isNoDataRightBottom = BilTerrain.checkNoDataValue(noDataValues, rightBottomHeight);\n\n            let middleHeight = height;\n\n            if (!(isNoDataCurrent || isNoDataRight || isNoDataBottom || isNoDataRightBottom)) {\n                middleHeight = (height + rightHeight + bottomHeight + rightBottomHeight) * 0.25;\n            }\n\n            destIndex = (ii + 1) * destSizeOne + (jj + 1);\n            destArr[destIndex] = middleHeight;\n\n            outCurrenElevations[currIndex++] = middleHeight;\n\n            //next right tile\n            let rightindex = (ii + 1) * destSizeOne;\n            outChildrenElevations[tileY][tileX + 1][rightindex] = middleHeight;\n\n            //next bottom tile\n            let bottomindex = destSize;\n            outChildrenElevations[tileY + 1][tileX][bottomindex] = middleHeight;\n\n            //next right bottom tile\n            let rightBottomindex = 0;\n            outChildrenElevations[tileY + 1][tileX + 1][rightBottomindex] = middleHeight;\n        }\n    }\n}\n\nexport {BilTerrain};\n","import {Extent} from \"../Extent\";\nimport {getTileExtent} from \"../mercator\";\nimport {GlobusTerrain, IGlobusTerrainParams} from \"./GlobusTerrain\";\nimport {isPowerOfTwo} from \"../math\";\nimport {Layer} from \"../layer/Layer\";\nimport {LonLat} from \"../LonLat\";\nimport {Segment} from \"../segment/Segment\";\nimport {binarySearchFast, TypedArray} from \"../utils/shared\";\nimport {IResponse} from \"../utils/Loader\";\n\nexport interface IRgbTerrainParams extends IGlobusTerrainParams {\n    equalizeNormals?: boolean;\n    key?: string;\n    imageSize?: number;\n    minHeight?: number;\n    resolution?: number;\n}\n\n/**\n * @class\n * @extends {GlobusTerrain}\n * @param {string} [name=\"\"] - Terrain provider name.\n * @param {IRgbTerrainParams} [options]:\n * @param {boolean} [equalizeNormals=true] - Make normal equalization on the edges of the tiles.\n * @param {string} [key=\"\"] - API key.\n * @param {number} [imageSize=256] - Image size.\n * @param {number} [minHeight=-10000] - Minimal height for rgb to height converter.\n * @param {number} [resolution=0.1] - Height converter resolution.\n */\nclass RgbTerrain extends GlobusTerrain {\n\n    protected _imageSize: number;\n\n    protected _ctx: CanvasRenderingContext2D;\n\n    protected _imageDataCache: Record<string, Uint8ClampedArray>;\n\n    protected _minHeight: number;\n\n    protected _resolution: number;\n\n    constructor(name: string | null, options: IRgbTerrainParams = {}) {\n        super(name || \"RgbTerrain\", {\n            equalizeVertices: options.equalizeVertices != undefined ? options.equalizeVertices : true,\n            maxZoom: options.maxZoom || 17,\n            noDataValues: options.noDataValues || [options.minHeight != undefined ? options.minHeight : -10000],\n            plainGridSize: options.plainGridSize || 128,\n            url: options.url != undefined\n                ? options.url\n                : `//api.mapbox.com/v4/mapbox.terrain-rgb/{z}/{x}/{y}.pngraw?access_token=${options.key || \"<key>\"}`,\n            gridSizeByZoom: options.gridSizeByZoom || [\n                64, 32, 16, 8, 8, 8, 16, 16, 16, 32, 32, 32, 32, 32, 32, 64, 64, 64, 32, 32, 16, 8\n            ],\n            ...options\n        });\n\n        this.equalizeNormals = options.equalizeNormals || false;\n\n        this._dataType = \"imageBitmap\";\n\n        this._imageSize = options.imageSize || 256;\n\n        this._ctx = this._createTemporalCanvas(this._imageSize);\n\n        this._imageDataCache = {};\n\n        this._minHeight = options.minHeight || -10000.0;\n        this._resolution = options.resolution || 0.1;\n    }\n\n    static override checkNoDataValue(noDataValues: number[] | TypedArray, value: number): boolean {\n        if (value > 50000) {\n            return true;\n        }\n        return binarySearchFast(noDataValues, value) !== -1;\n    }\n\n    public rgb2Height(r: number, g: number, b: number): number {\n        // Filter for \"yellowish\" pixels\n        if (r === 255) {\n            return this._minHeight;\n        }\n        return this._minHeight + this._resolution * (r * 256 * 256 + g * 256 + b);\n    }\n\n    public override isBlur(segment: Segment): boolean {\n        return segment.tileZoom >= 16;\n    }\n\n    protected _createTemporalCanvas(size: number): CanvasRenderingContext2D {\n        let canvas = document.createElement(\"canvas\");\n        canvas.width = size;\n        canvas.height = size;\n        return canvas.getContext(\"2d\", {\n            willReadFrequently: true\n        })!;\n    }\n\n    protected override _createHeights(data: HTMLImageElement | ImageBitmap, segment: Segment | null, tileGroup: number, tileX: number, tileY: number, tileZoom: number, extent: Extent, preventChildren: boolean): TypedArray | number[] {\n\n        this._ctx.clearRect(0, 0, this._imageSize, this._imageSize);\n        this._ctx.drawImage(data, 0, 0);\n        let rgbaData = this._ctx.getImageData(0, 0, this._imageSize, this._imageSize).data;\n\n        const SIZE = data.width;\n\n        let availableParentTileX = 0,\n            availableParentTileY = 0,\n            availableParentTileZoom = 0,\n            availableParentData: TypedArray | number[] | null = null,\n            skipPositiveHeights = false;\n\n        //\n        // Getting parent segment terrain data, for zero and nodata values for the current segment\n        //\n        if (segment) {\n            if (segment.tileZoom > this.maxNativeZoom) {\n                let pn = segment.node;\n                while (pn && !pn.segment.terrainExists) {\n                    pn = pn.parentNode!;\n                }\n                if (pn) {\n                    availableParentTileX = pn.segment.tileX;\n                    availableParentTileY = pn.segment.tileY;\n                    availableParentTileZoom = pn.segment.tileZoom;\n                    availableParentData = pn.segment.elevationData;\n                    // in this case maxNativeZoom means sea level\n                    skipPositiveHeights = availableParentTileZoom <= 8;\n                }\n            }\n        }\n\n        //\n        //Non-power of two images\n        //\n        if (!isPowerOfTwo(this._imageSize) && SIZE === this._imageSize) {\n            let outCurrenElevations = new Float32Array(SIZE * SIZE);\n            this.extractElevationTilesRgbNonPowerOfTwo(rgbaData, outCurrenElevations, this._heightFactor);\n            return outCurrenElevations;\n        }\n\n        //\n        // When image size equals grid size\n        //\n        if (this._imageSize === this.plainGridSize) {\n\n            let elevationsSize = (this.plainGridSize + 1) * (this.plainGridSize + 1);\n            let outCurrenElevations = new Float32Array(elevationsSize);\n\n            let [\n                availableParentOffsetX,\n                availableParentOffsetY,\n                availableZoomDiff\n            ] =\n                segment ? getTileOffset(\n                    segment.tileX, segment.tileY, segment.tileZoom,\n                    availableParentTileX, availableParentTileY, availableParentTileZoom\n                ) : [0, 0, 0];\n\n            this.extractElevationSimple(\n                rgbaData,\n                this.noDataValues,\n                availableParentData,\n                availableParentOffsetX,\n                availableParentOffsetY,\n                availableZoomDiff,\n                skipPositiveHeights,\n                outCurrenElevations,\n                this._heightFactor,\n                this._imageSize\n            );\n\n            return outCurrenElevations;\n        }\n\n        //\n        // Power of two images\n        //\n        let elevationsSize = (this.plainGridSize + 1) * (this.plainGridSize + 1);\n\n        let d = SIZE / this.plainGridSize;\n\n        let outCurrenElevations = new Float32Array(elevationsSize);\n        let outChildrenElevations = new Array(d);\n\n        for (let i = 0; i < d; i++) {\n            outChildrenElevations[i] = [];\n            for (let j = 0; j < d; j++) {\n                outChildrenElevations[i][j] = new Float32Array(elevationsSize);\n            }\n        }\n\n        if (!preventChildren) {\n            this.extractElevationTilesRgb(\n                rgbaData,\n                this._heightFactor,\n                this.noDataValues,\n                availableParentData,\n                availableParentTileX,\n                availableParentTileY,\n                availableParentTileZoom,\n                segment ? segment.tileX : 0,\n                segment ? segment.tileY : 0,\n                segment ? segment.tileZoom : 0,\n                skipPositiveHeights,\n                outCurrenElevations,\n                outChildrenElevations\n            );\n\n            // Save children data to cache\n            for (let i = 0; i < d; i++) {\n                for (let j = 0; j < d; j++) {\n                    let [x, y, z] = getChildTileIndex(tileX, tileY, tileZoom, j, i);\n                    let tileIndex = Layer.getTileIndex(x, y, z, tileGroup);\n                    this.setElevationCache(tileIndex, {\n                        heights: outChildrenElevations[i][j],\n                        //\n                        // @todo: must work for any grids\n                        //\n                        extent: getTileExtent(x, y, z)\n                    });\n                }\n            }\n        } else {\n            this.extractElevationTilesRgbNoChildren(\n                rgbaData,\n                this._heightFactor,\n                this.noDataValues,\n                availableParentData,\n                availableParentTileX,\n                availableParentTileY,\n                availableParentTileZoom,\n                segment ? segment.tileX : 0,\n                segment ? segment.tileY : 0,\n                segment ? segment.tileZoom : 0,\n                skipPositiveHeights,\n                outCurrenElevations\n            );\n        }\n\n        let tileIndex = Layer.getTileIndex(tileX, tileY, tileZoom, tileGroup);\n\n        // Save current data to cache\n        this.setElevationCache(tileIndex, {\n            heights: outCurrenElevations,\n            extent: extent\n        });\n\n        return outCurrenElevations;\n    }\n\n    public override getHeightAsync(lonLat: LonLat, callback: (h: number) => void, zoom?: number): boolean {\n\n        zoom = zoom != undefined ? zoom : this.maxZoom;\n\n        if (zoom === 0) {\n            callback(0);\n            return true;\n        }\n\n        const qts = this._planet!.quadTreeStrategy;\n        const [x, y, z, tileGroup] = qts.getTileXY(lonLat, zoom);\n        const [i, j] = qts.getLonLatTileOffset(lonLat, x, y, z, this._imageSize);\n        const index = (i * this._imageSize + j) * 4;\n        const tileIndex = Layer.getTileIndex(x, y, z, tileGroup);\n\n        if (this._imageDataCache[tileIndex]) {\n            let data = this._imageDataCache[tileIndex];\n            let height = this._heightFactor * this.rgb2Height(data[index], data[index + 1], data[index + 2]);\n            let isNoData = RgbTerrain.checkNoDataValue(this.noDataValues, height);\n            if (isNoData) {\n                return this.getHeightAsync(lonLat, callback, zoom - 1);\n            } else {\n                callback(this._heightFactor * this.rgb2Height(data[index], data[index + 1], data[index + 2]));\n                return true;\n            }\n        }\n\n        let def = this._fetchCache[tileIndex];\n        if (!def) {\n            def = this._loader.fetch({\n                src: this._urlRewriteCallback && this._urlRewriteCallback(x, y, z, tileGroup) || this.buildURL(x, y, z, tileGroup),\n                type: this._dataType\n            });\n            this._fetchCache[tileIndex] = def;\n        }\n\n        def!.then((response: IResponse) => {\n            if (response.status === \"ready\") {\n                this._ctx.clearRect(0, 0, this._imageSize, this._imageSize);\n                this._ctx.drawImage(response.data, 0, 0);\n                let data = this._ctx.getImageData(0, 0, 256, 256).data;\n                this._imageDataCache[tileIndex] = data;\n\n                let height = this._heightFactor * this.rgb2Height(data[index], data[index + 1], data[index + 2]);\n                let isNoData = RgbTerrain.checkNoDataValue(this.noDataValues, height);\n                if (isNoData) {\n                    return this.getHeightAsync(lonLat, callback, zoom! - 1);\n                } else {\n                    callback(this._heightFactor * this.rgb2Height(data[index], data[index + 1], data[index + 2]));\n                }\n            } else if (response.status === \"error\") {\n                return this.getHeightAsync(lonLat, callback, zoom! - 1);\n            } else {\n                //@ts-ignore\n                this._fetchCache[tileIndex] = null;\n                delete this._fetchCache[tileIndex];\n            }\n        });\n\n        return false;\n    }\n\n    public extractElevationSimple(\n        rgbaData: number[] | TypedArray,\n        noDataValues: number[] | TypedArray,\n        availableParentData: TypedArray | number[] | null = null,\n        availableParentOffsetX: number,\n        availableParentOffsetY: number,\n        availableZoomDiff: number,\n        skipPositiveHeights: boolean,\n        outCurrenElevations: number[] | TypedArray,\n        heightFactor: number = 1,\n        imageSize: number\n    ) {\n\n        for (let k = 0, len = imageSize * imageSize; k < len; k++) {\n            let j = k % imageSize,\n                i = Math.floor(k / imageSize);\n            let fromInd4 = k * 4;\n            let height = heightFactor * this.rgb2Height(rgbaData[fromInd4], rgbaData[fromInd4 + 1], rgbaData[fromInd4 + 2]);\n            let isNoData = RgbTerrain.checkNoDataValue(noDataValues, height);\n            if ((isNoData || height === 0) && availableParentData) {\n                height = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, i, j, skipPositiveHeights);\n            }\n            outCurrenElevations[i * (imageSize + 1) + j] = height;\n        }\n\n        for (let i = 0, len = imageSize; i < len; i++) {\n            let j = imageSize - 1;\n            let fromInd4 = (i * imageSize + j) * 4;\n            let height = heightFactor * this.rgb2Height(rgbaData[fromInd4], rgbaData[fromInd4 + 1], rgbaData[fromInd4 + 2]);\n            let isNoData = RgbTerrain.checkNoDataValue(noDataValues, height);\n            if ((isNoData || height === 0) && availableParentData) {\n                height = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, i, j, skipPositiveHeights);\n            }\n            outCurrenElevations[i * (imageSize + 1) + imageSize] = height;\n        }\n\n        for (let j = 0, len = imageSize; j < len; j++) {\n            let i = imageSize - 1;\n            let fromInd4 = (i * imageSize + j) * 4;\n            let height = heightFactor * this.rgb2Height(rgbaData[fromInd4], rgbaData[fromInd4 + 1], rgbaData[fromInd4 + 2]);\n            let isNoData = RgbTerrain.checkNoDataValue(noDataValues, height);\n            if ((isNoData || height === 0) && availableParentData) {\n                height = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, i, j, skipPositiveHeights);\n            }\n            outCurrenElevations[imageSize * (imageSize + 1) + j] = height;\n        }\n\n        let height = heightFactor * this.rgb2Height(rgbaData[rgbaData.length - 4], rgbaData[rgbaData.length - 3], rgbaData[rgbaData.length - 2]);\n        let isNoData = RgbTerrain.checkNoDataValue(noDataValues, height);\n        if ((isNoData || height === 0) && availableParentData) {\n            height = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, imageSize - 1, imageSize - 1, skipPositiveHeights);\n        }\n        outCurrenElevations[outCurrenElevations.length - 1] = height;\n    }\n\n    public extractElevationTilesRgbNonPowerOfTwo(rgbaData: number[] | TypedArray, outCurrenElevations: number[] | TypedArray, heightFactor: number = 1) {\n        for (let i = 0, len = outCurrenElevations.length; i < len; i++) {\n            let i4 = i * 4;\n            outCurrenElevations[i] = heightFactor * this.rgb2Height(rgbaData[i4], rgbaData[i4 + 1], rgbaData[i4 + 2]);\n        }\n    }\n\n    public extractElevationTilesRgb(\n        rgbaData: number[] | TypedArray,\n        heightFactor: number,\n        noDataValues: number[] | TypedArray,\n        availableParentData: TypedArray | number[] | null = null,\n        availableParentTileX: number,\n        availableParentTileY: number,\n        availableParentTileZoom: number,\n        currentTileX: number,\n        currentTileY: number,\n        currentTileZoom: number,\n        skipPositiveHeights: boolean,\n        outCurrenElevations: number[] | TypedArray,\n        outChildrenElevations: number[][][] | TypedArray[][]\n    ) {\n        let destSize = Math.sqrt(outCurrenElevations.length) - 1;\n        let destSizeOne = destSize + 1;\n        let sourceSize = Math.sqrt(rgbaData.length / 4);\n        let dt = sourceSize / destSize;\n\n        let rightHeight = 0,\n            bottomHeight = 0,\n            sourceSize4 = 0;\n\n        let [availableParentOffsetX, availableParentOffsetY, availableZoomDiff] = getTileOffset(\n            currentTileX, currentTileY, currentTileZoom,\n            availableParentTileX, availableParentTileY, availableParentTileZoom\n        );\n\n        for (\n            let k = 0, currIndex = 0, sourceDataLength = rgbaData.length / 4;\n            k < sourceDataLength;\n            k++\n        ) {\n            let k4 = k * 4;\n\n            let height = heightFactor * this.rgb2Height(rgbaData[k4], rgbaData[k4 + 1], rgbaData[k4 + 2]);\n\n            let isNoDataCurrent = RgbTerrain.checkNoDataValue(noDataValues, height),\n                isNoDataRight = false,\n                isNoDataBottom = false;\n\n            let i = Math.floor(k / sourceSize),\n                j = k % sourceSize;\n\n            //\n            // Try to get current height from the parent data\n            if ((isNoDataCurrent || height === 0) && availableParentData) {\n                height = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, Math.floor(i / dt), Math.floor(j / dt), skipPositiveHeights);\n            }\n\n            let tileX = Math.floor(j / destSize),\n                tileY = Math.floor(i / destSize);\n\n            let destArr = outChildrenElevations[tileY][tileX];\n\n            let ii = i % destSize,\n                jj = j % destSize;\n\n            let destIndex = (ii + tileY) * destSizeOne + jj + tileX;\n\n            destArr[destIndex] = height;\n\n            if ((i + tileY) % dt === 0 && (j + tileX) % dt === 0) {\n                outCurrenElevations[currIndex++] = height;\n            }\n\n            if ((j + 1) % destSize === 0 && j !== sourceSize - 1) {\n                //current tile\n                rightHeight = heightFactor * this.rgb2Height(rgbaData[k4 + 4], rgbaData[k4 + 5], rgbaData[k4 + 6]);\n                isNoDataRight = RgbTerrain.checkNoDataValue(noDataValues, rightHeight);\n\n                //\n                // Try to get right height from the parent data\n                if ((isNoDataRight || rightHeight === 0) && availableParentData) {\n                    rightHeight = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, Math.floor(i / dt), Math.floor((j + 1) / dt), skipPositiveHeights);\n                }\n\n                let middleHeight = height;\n\n                if (!(isNoDataCurrent || isNoDataRight)) {\n                    middleHeight = (height + rightHeight) * 0.5;\n                }\n\n                destIndex = (ii + tileY) * destSizeOne + jj + 1;\n                destArr[destIndex] = middleHeight;\n\n                if ((i + tileY) % dt === 0) {\n                    outCurrenElevations[currIndex++] = middleHeight;\n                }\n\n                //next right tile\n                let rightindex = (ii + tileY) * destSizeOne + ((jj + 1) % destSize);\n                outChildrenElevations[tileY][tileX + 1][rightindex] = middleHeight;\n            }\n\n            if ((i + 1) % destSize === 0 && i !== sourceSize - 1) {\n                //current tile\n                sourceSize4 = sourceSize * 4;\n\n                bottomHeight = heightFactor * this.rgb2Height(rgbaData[k4 + sourceSize4], rgbaData[k4 + sourceSize4 + 1], rgbaData[k4 + sourceSize4 + 2]);\n                isNoDataBottom = RgbTerrain.checkNoDataValue(noDataValues, bottomHeight);\n\n                //\n                // Try to get bottom height from the parent data\n                if ((isNoDataBottom || bottomHeight === 0) && availableParentData) {\n                    bottomHeight = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, Math.floor((i + 1) / dt), Math.floor(j / dt), skipPositiveHeights);\n                }\n\n                let middleHeight = (height + bottomHeight) * 0.5;\n\n                if (!(isNoDataCurrent || isNoDataBottom)) {\n                    middleHeight = (height + bottomHeight) * 0.5;\n                }\n\n                destIndex = (ii + 1) * destSizeOne + jj + tileX;\n                destArr[destIndex] = middleHeight;\n\n                if ((j + tileX) % dt === 0) {\n                    outCurrenElevations[currIndex++] = middleHeight;\n                }\n\n                //next bottom tile\n                let bottomindex = ((ii + 1) % destSize) * destSizeOne + jj + tileX;\n                outChildrenElevations[tileY + 1][tileX][bottomindex] = middleHeight;\n            }\n\n            if (\n                (j + 1) % destSize === 0 && j !== sourceSize - 1 &&\n                (i + 1) % destSize === 0 && i !== sourceSize - 1\n            ) {\n                //current tile\n                let rightBottomHeight = heightFactor * this.rgb2Height(rgbaData[k4 + sourceSize4 + 4], rgbaData[k4 + sourceSize4 + 5], rgbaData[k4 + sourceSize4 + 6]);\n                let isNoDataRightBottom = RgbTerrain.checkNoDataValue(noDataValues, rightBottomHeight);\n\n                //\n                // Try to get right bottom height from the parent data\n                if ((isNoDataRightBottom || rightBottomHeight === 0) && availableParentData) {\n                    rightBottomHeight = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, Math.floor((i + 1) / dt), Math.floor((j + 1) / dt), skipPositiveHeights);\n                }\n\n                let middleHeight = height;\n\n                if (!(isNoDataCurrent || isNoDataRight || isNoDataBottom || isNoDataRightBottom)) {\n                    middleHeight = (height + rightHeight + bottomHeight + rightBottomHeight) * 0.25;\n                }\n\n                destIndex = (ii + 1) * destSizeOne + (jj + 1);\n                destArr[destIndex] = middleHeight;\n\n                outCurrenElevations[currIndex++] = middleHeight;\n\n                //next right tile\n                let rightindex = (ii + 1) * destSizeOne;\n                outChildrenElevations[tileY][tileX + 1][rightindex] = middleHeight;\n\n                //next bottom tile\n                let bottomindex = destSize;\n                outChildrenElevations[tileY + 1][tileX][bottomindex] = middleHeight;\n\n                //next right bottom tile\n                let rightBottomindex = 0;\n                outChildrenElevations[tileY + 1][tileX + 1][rightBottomindex] = middleHeight;\n            }\n        }\n    }\n\n    public extractElevationTilesRgbNoChildren(\n        rgbaData: number[] | TypedArray,\n        heightFactor: number,\n        noDataValues: number[] | TypedArray,\n        availableParentData: TypedArray | number[] | null = null,\n        availableParentTileX: number,\n        availableParentTileY: number,\n        availableParentTileZoom: number,\n        currentTileX: number,\n        currentTileY: number,\n        currentTileZoom: number,\n        skipPositiveHeights: boolean,\n        outCurrenElevations: number[] | TypedArray\n    ) {\n        let destSize = Math.sqrt(outCurrenElevations.length) - 1;\n        let destSizeOne = destSize + 1;\n        let sourceSize = Math.sqrt(rgbaData.length / 4);\n        let dt = sourceSize / destSize;\n\n        let rightHeight = 0,\n            bottomHeight = 0,\n            sourceSize4 = 0;\n\n        let [availableParentOffsetX, availableParentOffsetY, availableZoomDiff] = getTileOffset(\n            currentTileX, currentTileY, currentTileZoom,\n            availableParentTileX, availableParentTileY, availableParentTileZoom\n        );\n\n        for (\n            let k = 0, currIndex = 0, sourceDataLength = rgbaData.length / 4;\n            k < sourceDataLength;\n            k++\n        ) {\n            let k4 = k * 4;\n\n            let height = heightFactor * this.rgb2Height(rgbaData[k4], rgbaData[k4 + 1], rgbaData[k4 + 2]);\n\n            let isNoDataCurrent = RgbTerrain.checkNoDataValue(noDataValues, height),\n                isNoDataRight = false,\n                isNoDataBottom = false;\n\n            let i = Math.floor(k / sourceSize),\n                j = k % sourceSize;\n\n            if ((isNoDataCurrent || height === 0) && availableParentData) {\n                height = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, Math.floor(currIndex / destSizeOne), currIndex % destSizeOne, skipPositiveHeights);\n            }\n\n            let tileX = Math.floor(j / destSize),\n                tileY = Math.floor(i / destSize);\n\n            if ((i + tileY) % dt === 0 && (j + tileX) % dt === 0) {\n                outCurrenElevations[currIndex++] = height;\n            }\n\n            if ((j + 1) % destSize === 0 && j !== sourceSize - 1) {\n                //current tile\n                rightHeight = heightFactor * this.rgb2Height(rgbaData[k4 + 4], rgbaData[k4 + 5], rgbaData[k4 + 6]);\n                isNoDataRight = RgbTerrain.checkNoDataValue(noDataValues, rightHeight);\n\n                if ((isNoDataRight || rightHeight === 0) && availableParentData) {\n                    rightHeight = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, Math.floor(currIndex / destSizeOne), currIndex % destSizeOne, skipPositiveHeights);\n                }\n\n                let middleHeight = height;\n\n                if (!(isNoDataCurrent || isNoDataRight)) {\n                    middleHeight = (height + rightHeight) * 0.5;\n                }\n\n                if ((i + tileY) % dt === 0) {\n                    outCurrenElevations[currIndex++] = middleHeight;\n                }\n            }\n\n            if ((i + 1) % destSize === 0 && i !== sourceSize - 1) {\n                //current tile\n                sourceSize4 = sourceSize * 4;\n\n                bottomHeight = heightFactor * this.rgb2Height(rgbaData[k4 + sourceSize4], rgbaData[k4 + sourceSize4 + 1], rgbaData[k4 + sourceSize4 + 2]);\n                isNoDataBottom = RgbTerrain.checkNoDataValue(noDataValues, bottomHeight);\n\n                if ((isNoDataBottom || bottomHeight === 0) && availableParentData) {\n                    bottomHeight = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, Math.floor(currIndex / destSizeOne), currIndex % destSizeOne, skipPositiveHeights);\n                }\n\n                let middleHeight = (height + bottomHeight) * 0.5;\n\n                if (!(isNoDataCurrent || isNoDataBottom)) {\n                    middleHeight = (height + bottomHeight) * 0.5;\n                }\n\n                if ((j + tileX) % dt === 0) {\n                    outCurrenElevations[currIndex++] = middleHeight;\n                }\n            }\n\n            if (\n                (j + 1) % destSize === 0 && j !== sourceSize - 1 &&\n                (i + 1) % destSize === 0 && i !== sourceSize - 1\n            ) {\n                //current tile\n                let rightBottomHeight = heightFactor * this.rgb2Height(rgbaData[k4 + sourceSize4 + 4], rgbaData[k4 + sourceSize4 + 5], rgbaData[k4 + sourceSize4 + 6]);\n                let isNoDataRightBottom = RgbTerrain.checkNoDataValue(noDataValues, rightBottomHeight);\n\n                if ((isNoDataRightBottom || rightBottomHeight === 0) && availableParentData) {\n                    rightBottomHeight = getParentHeight(availableZoomDiff, availableParentOffsetX, availableParentOffsetY, availableParentData, Math.floor(currIndex / destSizeOne), currIndex % destSizeOne, skipPositiveHeights);\n                }\n\n                let middleHeight = height;\n\n                if (!(isNoDataCurrent || isNoDataRight || isNoDataBottom || isNoDataRightBottom)) {\n                    middleHeight = (height + rightHeight + bottomHeight + rightBottomHeight) * 0.25;\n                }\n\n                outCurrenElevations[currIndex++] = middleHeight;\n            }\n        }\n    }\n}\n\nfunction getTileOffset(\n    currentTileX: number,\n    currentTileY: number,\n    currentTileZoom: number,\n    parentTileX: number,\n    parentTileY: number,\n    parentTileZoom: number\n): [number, number, number] {\n    let dz2 = 2 << (currentTileZoom - parentTileZoom - 1);\n    return [currentTileX - dz2 * parentTileX, currentTileY - dz2 * parentTileY, 1.0 / dz2];\n}\n\nfunction getChildTileIndex(\n    currentParentTileX: number,\n    currentParentTileY: number,\n    currentParentTileZoom: number,\n    childOffsetX: number,\n    childOffsetY: number\n): [number, number, number] {\n    return [currentParentTileX * 2 + childOffsetX, currentParentTileY * 2 + childOffsetY, currentParentTileZoom + 1];\n}\n\nfunction getParentHeight(oneByDz2: number, offsetX: number, offsetY: number, heights: TypedArray | number[], i: number, j: number, skipPositiveHeights?: boolean) {\n    let parentGridSize = Math.sqrt(heights.length);\n    let pi = Math.floor(offsetY * oneByDz2 * parentGridSize + i * oneByDz2),\n        pj = Math.floor(offsetX * oneByDz2 * parentGridSize + j * oneByDz2);\n    let h = heights[pi * parentGridSize + pj];\n    return skipPositiveHeights ? (h > 0 ? 0 : h) : h;\n}\n\nexport {RgbTerrain};\n","import {IRgbTerrainParams, RgbTerrain} from \"./RgbTerrain\";\nimport {Segment, TILEGROUP_NORTH, TILEGROUP_SOUTH} from \"../segment/Segment\";\n\nconst urlPref: Record<number, string> = {\n    [TILEGROUP_NORTH]: \"north\",\n    [TILEGROUP_SOUTH]: \"south\"\n}\n\nconst urlRewriteFunc = (tileX: number, tileY: number, tileZoom: number, tileGroup: number): string | undefined => {\n    let g = urlPref[tileGroup];\n    if (g) return `https://terrain.openglobus.org/poles/${g}/${tileZoom}/${tileX}/${tileY}.png`;\n}\n\nexport class GlobusRgbTerrain extends RgbTerrain {\n    constructor(name?: string | null, options?: IRgbTerrainParams) {\n        super(name || \"GlobusEarthRgb\", {\n            maxNativeZoom: 6,\n            maxZoom: 17,\n            url: \"https://{s}.terrain.openglobus.org/all/{z}/{x}/{y}.png\",\n            urlRewrite: urlRewriteFunc,\n            ...options\n        });\n    }\n\n    public override isReadyToLoad(segment: Segment): boolean {\n        return this._extent.overlaps(segment.getExtentLonLat());\n    }\n}","import {nextHighestPowerOfTwo} from \"../math\";\nimport {BaseGeoImage, IBaseGeoImageParams} from \"./BaseGeoImage\";\nimport {isImageLoaded} from \"../utils/shared\";\nimport {Material} from \"./Material\";\n\nexport interface IGeoImageParams extends IBaseGeoImageParams {\n    image?: HTMLImageElement | HTMLCanvasElement | ImageBitmap;\n    src?: string;\n}\n\n/**\n * Used to load and display a single image over specific corner coordinates on the globe.\n * @class\n * @extends {BaseGeoImage}\n */\nclass GeoImage extends BaseGeoImage {\n    /**\n     * Image object.\n     * @protected\n     * @type {HTMLImageElement | HTMLCanvasElement | ImageBitmap}\n     */\n    protected _image: HTMLImageElement | HTMLCanvasElement | ImageBitmap | null;\n\n    /**\n     * Image source url path.\n     * @protected\n     * @type {string}\n     */\n    protected _src: string | null;\n\n    protected _onLoad_: ((this: HTMLImageElement, ev: Event) => void) | null;\n\n    constructor(name: string | null, options: IGeoImageParams = {}) {\n        super(name, options);\n        this._image = options.image || null;\n        this._src = options.src || null;\n        this._onLoad_ = null;\n    }\n\n    public override get instanceName(): string {\n        return \"GeoImage\";\n    }\n\n    public override abortLoading() {\n        if (this._image instanceof HTMLImageElement) {\n            this._image.src = \"\";\n        }\n    }\n\n    /**\n     * Sets image source url path.\n     * @public\n     * @param {string} srs - Image url path.\n     */\n    public setSrc(src: string) {\n        this._planet && this._planet._geoImageCreator.remove(this);\n        this._src = src;\n        this._sourceReady = false;\n        this._sourceCreated = false;\n        this._image = new Image();\n        this._image.crossOrigin = \"Anonymous\";\n        this._onLoad_ = this._onLoad.bind(this);\n        this._image.addEventListener(\"load\", this._onLoad_);\n        this._image.src = src;\n    }\n\n    /**\n     * Sets image object.\n     * @public\n     * @param {Image} image - Image object.\n     */\n    public setImage(image: HTMLImageElement) {\n        this._planet && this._planet._geoImageCreator.remove(this);\n        this._sourceCreated = false;\n        this._sourceReady = false;\n        this._image = image;\n        this._image.crossOrigin = \"Anonymous\";\n        this._src = image.src;\n        if (isImageLoaded(this._image)) {\n            this._applyImage(this._image);\n        } else {\n            this._onLoad_ = this._onLoad.bind(this);\n            this._image.addEventListener(\"load\", this._onLoad_);\n        }\n    }\n\n    /**\n     * Creates source gl texture.\n     * @virtual\n     * @protected\n     */\n    protected override _createSourceTexture() {\n        if (!this._sourceCreated && this._image) {\n            this._sourceTexture = this._planet!.renderer!.handler.createTexture_l(this._image);\n            this._sourceCreated = true;\n        }\n    }\n\n    protected _onLoad(ev: Event) {\n        this._applyImage(this._image);\n        if (this._image instanceof HTMLImageElement) {\n            this._image.removeEventListener(\"load\", this._onLoad_!);\n        }\n        this._onLoad_ = null;\n    }\n\n    protected _applyImage(img: HTMLImageElement | HTMLCanvasElement | ImageBitmap | null) {\n        if (img) {\n            this._frameWidth = nextHighestPowerOfTwo(img.width * 2, 4096);\n            this._frameHeight = nextHighestPowerOfTwo(img.height * 3, 4096);\n            this._sourceReady = true;\n            if (this._planet) {\n                this._planet._geoImageCreator.add(this);\n            }\n        }\n    }\n\n\n    /**\n     * Loads planet segment material. In this case - GeoImage source image.\n     * @public\n     * @param {Material} material - GeoImage planet material.\n     */\n    public override loadMaterial(material: Material) {\n        material.isLoading = true;\n        this._creationProceeding = true;\n        if (!this._sourceReady && this._src) {\n            if (this._image) {\n                if (this._image instanceof HTMLImageElement) {\n                    if (isImageLoaded(this._image)) {\n                        this._applyImage(this._image);\n                    } else {\n                        this._onLoad_ = this._onLoad.bind(this);\n                        this._image.addEventListener(\"load\", this._onLoad_);\n                    }\n                }\n            } else {\n                this._image = new Image();\n                this._image.crossOrigin = \"Anonymous\";\n                this._onLoad_ = this._onLoad.bind(this);\n                this._image.addEventListener(\"load\", this._onLoad_);\n                this._image.src = this._src;\n            }\n        } else if (this._planet) {\n            this._planet._geoImageCreator.add(this);\n        }\n    }\n\n    /**\n     * @public\n     * @param {Material} material - GeoImage material.\n     */\n    public override abortMaterialLoading(material: Material) {\n        if (this._image && this._image instanceof HTMLImageElement) {\n            this._image.src = \"\";\n        }\n        this._creationProceeding = false;\n        material.isLoading = false;\n        material.isReady = false;\n    }\n}\n\nexport {GeoImage};\n","import {BaseGeoImage, IBaseGeoImageParams} from './BaseGeoImage';\nimport {Material} from \"../layer/Material\";\nimport {nextHighestPowerOfTwo} from '../math';\nimport {WebGLTextureExt} from \"../webgl/Handler\";\n\ninterface IGeoTexture2dParams extends IBaseGeoImageParams {\n    texture?: WebGLTextureExt;\n    frameWidth?: number;\n    frameHeight?: number;\n}\n\nclass GeoTexture2d extends BaseGeoImage {\n    constructor(name: string | null, options: IGeoTexture2dParams = {}) {\n        super(name, options);\n\n        this._sourceTexture = options.texture || null;\n\n        if (options.texture) {\n            this._sourceReady = true;\n            this._sourceCreated = true;\n        }\n\n        this._frameWidth = options.frameWidth != undefined ? nextHighestPowerOfTwo(options.frameWidth!) : 256;\n        this._frameHeight = options.frameHeight != undefined ? nextHighestPowerOfTwo(options.frameHeight!) : 256;\n\n        this._animate = true;\n    }\n\n    public override get instanceName(): string {\n        return \"GeoTexture2d\";\n    }\n\n    public override loadMaterial(material: Material) {\n        this._planet!._geoImageCreator.add(this);\n    }\n\n    public bindTexture(texture: WebGLTextureExt) {\n        this._sourceReady = true;\n        this._sourceCreated = true;\n        this._sourceTexture = texture;\n    }\n\n    public setSize(width: number, height: number) {\n        this._frameWidth = width;\n        this._frameHeight = height;\n        this._frameCreated = false;\n    }\n\n    public override abortMaterialLoading(material: Material) {\n        this._creationProceeding = false;\n        material.isLoading = false;\n        material.isReady = false;\n    }\n}\n\nexport {GeoTexture2d};\n","import {BaseGeoImage, IBaseGeoImageParams} from \"./BaseGeoImage\";\nimport {Material} from \"./Material\";\n\nexport interface IGeoVideoParams extends IBaseGeoImageParams {\n    videoElement?: HTMLVideoElement;\n    src?: string;\n}\n\n/**\n * Used to load and display a video stream by specific corners coordinates on the globe.\n * @class\n * @extends {BaseGeoImage}\n */\nclass GeoVideo extends BaseGeoImage {\n\n    /**\n     * HTML5 video element object.\n     * @protected\n     * @type {HTMLVideoElement}\n     */\n    protected _video: HTMLVideoElement | null;\n\n    /**\n     * Video source url path.\n     * @protected\n     * @type {string}\n     */\n    protected _src: string | null;\n\n    constructor(name: string | null, options: IGeoVideoParams = {}) {\n        super(name, options);\n\n        this._animate = true;\n\n        this._video = options.videoElement || null;\n\n        this._src = options.src || null;\n    }\n\n    public override get instanceName(): string {\n        return \"GeoVideo\";\n    }\n\n    /**\n     * Sets video source url path.\n     * @public\n     * @param {string} src - Video url path.\n     */\n    public setSrc(src: string) {\n        this._planet && this._planet._geoImageCreator.remove(this);\n        this._src = src;\n        this._sourceReady = false;\n    }\n\n    /**\n     * Sets HTML5 video object.\n     * @public\n     * @param {HTMLVideoElement} video - HTML5 video element object.\n     */\n    public setVideoElement(video: HTMLVideoElement) {\n        this._planet && this._planet._geoImageCreator.remove(this);\n        this._video = video;\n        this._src = video.src;\n        this._sourceReady = false;\n    }\n\n    /**\n     * Sets layer visibility.\n     * @public\n     * @param {boolean} visibility - Layer visibility.\n     */\n    public override setVisibility(visibility: boolean) {\n        if (visibility != this._visibility) {\n            super.setVisibility(visibility);\n            if (this._planet) {\n                if (visibility) {\n                    this._sourceReady && this._planet._geoImageCreator.add(this);\n                    this._video && this._video.play();\n                } else {\n                    this._sourceReady && this._planet._geoImageCreator.remove(this);\n                    this._video && this._video.pause();\n                }\n            }\n        }\n    }\n\n    /**\n     * Creates or refresh source video GL texture.\n     * @virtual\n     * @protected\n     */\n    protected override _createSourceTexture() {\n        let gl = this._planet!.renderer!.handler.gl!;\n        if (this._sourceCreated) {\n            gl.bindTexture(gl.TEXTURE_2D, this._sourceTexture!);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._video!);\n        } else {\n            this._sourceTexture = this._planet!.renderer!.handler.createTexture_n_webgl1(this._video!);\n            this._sourceCreated = true;\n        }\n    }\n\n    /**\n     * @private\n     */\n    protected _onCanPlay(video: HTMLVideoElement) {\n        this._frameWidth = video.videoWidth;\n        this._frameHeight = video.videoHeight;\n        video.width = video.videoWidth;\n        video.height = video.videoHeight;\n        video.play();\n        this._sourceReady = true;\n        this._planet!._geoImageCreator.add(this);\n    }\n\n    protected _onError(video: HTMLVideoElement) {\n        let err = \"unknown error\";\n        switch (video.error!.code) {\n            case 1:\n                err = \"video loading aborted\";\n                break;\n            case 2:\n                err = \"network loading error\";\n                break;\n            case 3:\n                err = \"video decoding failed / corrupted data or unsupported codec\";\n                break;\n            case 4:\n                err = \"video not supported\";\n                break;\n        }\n        console.warn(`Error: ${err} error-code=${video.error!.code})`);\n    }\n\n    /**\n     * Loads planet segment material. In this case - GeoImage source video.\n     * @public\n     * @param {Material} material - GeoImage planet material.\n     */\n    public override loadMaterial(material: Material) {\n        material.isLoading = true;\n        this._creationProceeding = true;\n        if (!this._sourceReady && this._src) {\n            if (this._video) {\n                if (this._video.readyState === this._video.HAVE_ENOUGH_DATA) {\n                    this._onCanPlay(this._video);\n                } else if (this._video.src) {\n                    let that = this;\n                    this._video.addEventListener(\"canplay\", function (e: Event) {\n                        that._onCanPlay(this);\n                    });\n                }\n            } else {\n                this._video = document.createElement(\"video\");\n                this._video.crossOrigin = \"Anonymous\";\n                let that = this;\n                this._video.addEventListener(\"canplay\", function () {\n                    that._onCanPlay(this);\n                });\n                this._video.addEventListener(\"error\", function () {\n                    that._onError(this);\n                });\n            }\n            this._video.autoplay = true;\n            this._video.loop = true;\n            this._video.src = this._src;\n            this._video.muted = true;\n            this._video.setAttribute(\"playsinline\", \"true\");\n            this._video.setAttribute(\"webkit-playsinline\", \"true\");\n        } else {\n            this._planet!._geoImageCreator.add(this);\n        }\n    }\n\n    /**\n     * @virtual\n     * @param {Material} material - GeoImage material.\n     */\n    public override abortMaterialLoading(material: Material) {\n        this._video && (this._video.src = \"\");\n        this._creationProceeding = false;\n        material.isLoading = false;\n        material.isReady = false;\n    }\n}\n\nexport {GeoVideo};\n","import {Billboard, IBillboardParams} from \"../entity/Billboard\";\nimport {Entity} from \"../entity/Entity\";\nimport {Extent} from \"../Extent\";\nimport {LonLat} from \"../LonLat\";\nimport {Vector, IVectorParams} from \"./Vector\";\nimport {NumberArray3} from \"../math/Vec3\";\n\ninterface IKMLParams extends IVectorParams {\n    color?: string;\n    billboard?: IBillboardParams;\n}\n\n/**\n * Layer to render KMLs files\n * @class\n * @extends {Vector}\n * @param {string} name\n * @param {*} [options]\n */\nexport class KML extends Vector {\n\n    protected _color: string;\n    protected _billboard: IBillboardParams;\n\n    constructor(name: string, options: IKMLParams = {}) {\n        super(name, options);\n        this._billboard = options.billboard || {\n            src: \"https://openglobus.org/examples/billboards/carrot.png\"\n        };\n\n        this._color = options.color || \"#6689db\";\n    }\n\n    public override get instanceName() {\n        return \"KML\";\n    }\n\n    protected _extractCoordonatesFromKml(xmlDoc: XMLDocument) {\n        const raw = Array.from(xmlDoc.getElementsByTagName(\"coordinates\"));\n        const rawText = raw.map(item => item.textContent!.trim());\n        const coordinates = rawText.map(item =>\n            item\n                .replace(/\\n/g, \" \")\n                .replace(/\\t/g, \" \")\n                .replace(/ +/g, \" \")\n                .split(\" \")\n                .map((co) => co.split(\",\").map(parseFloat))\n        );\n        return coordinates;\n    }\n\n    protected _AGBRtoRGBA(agbr: string): string | undefined {\n        if (!agbr || agbr.length != 8) return;\n\n        const a = parseInt(agbr.slice(0, 2), 16) / 255;\n        const b = parseInt(agbr.slice(2, 4), 16);\n        const g = parseInt(agbr.slice(4, 6), 16);\n        const r = parseInt(agbr.slice(6, 8), 16);\n\n        return `rgba(${r},${g},${b},${a})`;\n    }\n\n    /**\n     * @protected\n     returns array of longitude, latitude, altitude (altitude optional)\n     */\n    protected _parseKMLcoordinates(coords: Element): number[][] {\n        const coordinates = coords.innerHTML.trim()\n            .replace(/\\n/g, ' ')\n            .replace(/\\t/g, ' ')\n            .replace(/ +/g, ' ')\n            .split(\" \")\n            .map((co) => co.split(\",\").map(parseFloat))\n\n        return coordinates;\n    }\n\n    protected _kmlPlacemarkToEntity(placemark: Element | undefined | null, extent: Extent): Entity | undefined {\n        if (!placemark) return;\n\n        const nameTags: Element[] = Array.from(placemark.getElementsByTagName(\"name\"))\n        const name: string = nameTags && nameTags.length > 0 ? nameTags[0].innerHTML.trim() : '';\n\n        const {iconHeading, iconURL, iconColor, lineWidth, lineColor} = this._extractStyle(placemark);\n\n        // TODO handle MultiGeometry\n\n        const lonLats: LonLat[] = [];\n        for (const coord of placemark.getElementsByTagName(\"coordinates\")) {\n            const coordinates = this._parseKMLcoordinates(coord) || [[0, 0, 0]]\n\n            for (const lonlatalt of coordinates) {\n                const [lon, lat, alt] = lonlatalt\n\n                lonLats.push(new LonLat(lon, lat, alt));\n\n                if (lon < extent.southWest.lon) extent.southWest.lon = lon;\n                if (lat < extent.southWest.lat) extent.southWest.lat = lat;\n                if (lon > extent.northEast.lon) extent.northEast.lon = lon;\n                if (lat > extent.northEast.lat) extent.northEast.lat = lat;\n            }\n        }\n\n        if (lonLats.length === 1) {\n            const hdgrad = iconHeading * 0.01745329; // radians\n\n            return new Entity({\n                name,\n                lonlat: lonLats[0],\n                billboard: {\n                    src: iconURL,\n                    size: [24, 24],\n                    color: iconColor,\n                    rotation: hdgrad\n                },\n                properties: {\n                    color: iconColor,\n                    heading: iconHeading\n                }\n            });\n\n        } else {\n            return new Entity({\n                polyline: {\n                    pathLonLat: [lonLats],\n                    thickness: lineWidth,\n                    color: lineColor,\n                    isClosed: false\n                }\n            });\n        }\n    }\n\n    protected _extractStyle(placemark: Element): any {\n        let iconColor;\n        let iconHeading;\n        let iconURL;\n        let lineColor;\n        let lineWidth;\n\n        const style = placemark.getElementsByTagName(\"Style\")[0];\n        if (style) {\n            let iconstyle = style.getElementsByTagName(\"IconStyle\")[0];\n            if (iconstyle) {\n                let color = iconstyle.getElementsByTagName(\"color\")[0];\n                if (color)\n                    iconColor = this._AGBRtoRGBA(color.innerHTML.trim());\n\n                let heading = iconstyle.getElementsByTagName(\"heading\")[0];\n                if (heading) {\n                    const hdg = parseFloat(heading.innerHTML.trim());\n                    if (hdg >= 0 && hdg <= 360)\n                        iconHeading = hdg % 360;\n                }\n\n                let icon = iconstyle.getElementsByTagName(\"Icon\")[0];\n                if (icon) {\n                    let href = icon.getElementsByTagName(\"href\")[0];\n                    if (href) {\n                        iconURL = href.innerHTML.trim();\n                    }\n                }\n            }\n\n            let linestyle = style.getElementsByTagName(\"LineStyle\")[0];\n            if (linestyle) {\n                let color = linestyle.getElementsByTagName(\"color\")[0];\n                if (color)\n                    lineColor = this._AGBRtoRGBA(color.innerHTML.trim());\n                let width = linestyle.getElementsByTagName(\"width\")[0];\n                if (width !== undefined)\n                    lineWidth = parseFloat(width.innerHTML.trim());\n            }\n        }\n\n        if (!iconColor) iconColor = \"#FFFFFF\"\n        if (!iconHeading) iconHeading = 0\n        if (!iconURL) iconURL = \"https://openglobus.org/examples/billboards/carrot.png\"\n\n        if (!lineColor) lineColor = \"#FFFFFF\"\n        if (!lineWidth) lineWidth = 1\n\n        return {iconHeading, iconURL, iconColor, lineWidth, lineColor};\n    }\n\n    protected _parseKML(xml: XMLDocument, extent: Extent, entities?: Entity[]): Entity[] {\n        if (!entities)\n            entities = [];\n\n        if (xml.documentElement.nodeName !== \"kml\")\n            return entities;\n\n        for (const placemark of xml.getElementsByTagName(\"Placemark\")) {\n            const entity = this._kmlPlacemarkToEntity(placemark, extent);\n            if (entity) entities.push(entity);\n        }\n\n        return entities;\n    }\n\n    protected _convertKMLintoEntities(xml: XMLDocument): any {\n        const extent = new Extent(new LonLat(180.0, 90.0), new LonLat(-180.0, -90.0));\n        const entities = this._parseKML(xml, extent);\n\n        return {entities, extent}\n    }\n\n    /**\n     * Creates billboards or polylines from array of lonlat.\n     * @protected\n     * @param {Array} coordonates\n     * @param {string} color\n     * @returns {any}\n     */\n    protected _convertCoordonatesIntoEntities(coordinates: number[][][][], color: string, billboard?: IBillboardParams): any {\n        const extent = new Extent(new LonLat(180.0, 90.0), new LonLat(-180.0, -90.0));\n        const addToExtent = (c: number[]) => {\n            const lon = c[0],\n                lat = c[1];\n            if (lon < extent.southWest.lon) extent.southWest.lon = lon;\n            if (lat < extent.southWest.lat) extent.southWest.lat = lat;\n            if (lon > extent.northEast.lon) extent.northEast.lon = lon;\n            if (lat > extent.northEast.lat) extent.northEast.lat = lat;\n        };\n        const _pathes: number[][][] = [];\n\n        coordinates.forEach((kmlFile: number[][][]) => kmlFile.forEach((p: number[][]) => _pathes.push(p)));\n\n        const entities = _pathes.map((path) => {\n            if (path.length === 1) {\n                const lonlat = path[0] as NumberArray3;\n                const _entity = new Entity({lonlat, billboard});\n                addToExtent(lonlat);\n                return _entity;\n            } else if (path.length > 1) {\n                const pathLonLat = path.map((item: number[]) => {\n                    addToExtent(item);\n                    return new LonLat(item[0], item[1], item[2]);\n                });\n                const _entity = new Entity({\n                    polyline: {pathLonLat: [pathLonLat], thickness: 3, color, isClosed: false}\n                });\n                return _entity;\n            }\n        });\n        return {entities, extent};\n    }\n\n    /**\n     * @protected\n     * @returns {Document}\n     */\n    protected _getXmlContent(file: Blob): Promise<XMLDocument> {\n        return new Promise((resolve) => {\n            const fileReader = new FileReader();\n            fileReader.onload = async (i) =>\n                resolve(new DOMParser().parseFromString(i.target!.result as string, \"text/xml\"));\n            fileReader.readAsText(file);\n        });\n    }\n\n    protected _expandExtents(extent1: Extent | null | undefined, extent2: Extent): Extent {\n        if (!extent1) return extent2;\n        if (extent2.southWest.lon < extent1.southWest.lon)\n            extent1.southWest.lon = extent2.southWest.lon;\n        if (extent2.southWest.lat < extent1.southWest.lat)\n            extent1.southWest.lat = extent2.southWest.lat;\n        if (extent2.northEast.lon > extent1.northEast.lon)\n            extent1.northEast.lon = extent2.northEast.lon;\n        if (extent2.northEast.lat > extent1.northEast.lat)\n            extent1.northEast.lat = extent2.northEast.lat;\n        return extent1;\n    }\n\n    /**\n     * @public\n     * @param {File[]} kmls\n     * @param {string} [color]\n     * @param {Billboard} [billboard]\n     * @returns {Promise<{entities: Entity[], extent: Extent}>}\n     */\n    public async addKmlFromFiles(kmls: Blob[], color?: string, billboard?: IBillboardParams) {\n        if (!Array.isArray(kmls)) return null\n        const kmlObjs = await Promise.all(kmls.map(this._getXmlContent));\n        const coordonates = kmlObjs.map(this._extractCoordonatesFromKml);\n        const {entities, extent} = this._convertCoordonatesIntoEntities(\n            coordonates,\n            color || this._color,\n            billboard || this._billboard\n        );\n        this._extent = this._expandExtents(this._extent, extent);\n        entities.forEach(this.add.bind(this));\n        return {entities, extent};\n    }\n\n    /**\n     * @param {string} color\n     * @public\n     */\n    public setColor(color: string) {\n        this._color = color;\n        this._billboard.color = color;\n    }\n\n    protected _getKmlFromUrl(url: string): Promise<Document> {\n        return new Promise<Document>((resolve, reject) => {\n            const request = new XMLHttpRequest();\n            request.open(\"GET\", url, true);\n            request.responseType = \"document\";\n            request.overrideMimeType(\"text/xml\");\n            request.onload = () => {\n                if (request.readyState === request.DONE && request.status === 200) {\n                    resolve(request.responseXML!);\n                } else {\n                    reject(new Error(\"no valid kml file\"));\n                }\n            };\n            request.send();\n        });\n    }\n\n    /**\n     * @public\n     * @param {string} url - Url of the KML to display. './myFile.kml' or 'http://mySite/myFile.kml' for example.\n     * @param {string} [color]\n     * @param {Billboard} [billboard]\n     * @returns {Promise<{entities: Entity[], extent: Extent}>}\n     */\n    public async addKmlFromUrl(url: string, color?: string, billboard?: Billboard | IBillboardParams): Promise<any> {\n        const kml = await this._getKmlFromUrl(url);\n        /*\n                const coordonates = this._extractCoordonatesFromKml(kml);\n                const { entities, extent } = this._convertCoordonatesIntoEntities(\n                    [coordonates],\n                    color || this._color,\n                    billboard || this._billboard\n                );\n        */\n        const {entities, extent} = this._convertKMLintoEntities(kml);\n\n        this._extent = this._expandExtents(this._extent, extent);\n\n        entities.forEach(this.add.bind(this));\n\n        return {entities, extent};\n    }\n}\n","import {XYZ, IXYZParams} from \"./XYZ\";\n\nexport class OpenStreetMap extends XYZ {\n    constructor(name: string | null, options: IXYZParams = {}) {\n        super(name || \"OpenStreetMap\", {\n            iconSrc: \"https://tile.openstreetmap.org/8/138/95.png\",\n            url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n            attribution: 'Data @ OpenStreetMap contributors, ODbL',\n            isBaseLayer: true,\n            maxNativeZoom: 19,\n            defaultTextures: [{color: \"#AAD3DF\"}, {color: \"#F2EFE9\"}],\n            isSRGB: false,\n            shininess: 18,\n            specular: [0.00063, 0.00055, 0.00032],\n            ambient: [0.2, 0.2, 0.3],\n            diffuse: [0.9, 0.9, 0.7],\n            ...options\n        });\n    }\n}","import {XYZ, IXYZParams} from \"./XYZ\";\nimport {Segment} from \"../segment/Segment\";\nimport {stringTemplate} from \"../utils/shared\";\n\nfunction toQuadKey(x: number, y: number, z: number) {\n    var index = '';\n    for (let i = z; i > 0; i--) {\n        var b = 0;\n        var mask = 1 << (i - 1);\n        if ((x & mask) !== 0) b++;\n        if ((y & mask) !== 0) b += 2;\n        index += b.toString();\n    }\n    return index;\n}\n\nexport class Bing extends XYZ {\n    constructor(name: string | null, options: IXYZParams = {}) {\n        super(name || \"Bing\", {\n            iconSrc: \"https://ecn.t0.tiles.virtualearth.net/tiles/a120.jpeg?n=z&g=7146\",\n            subdomains: ['t0', 't1', 't2', 't3'],\n            url: \"https://ecn.{s}.tiles.virtualearth.net/tiles/a{quad}.jpeg?n=z&g=7146\",\n            isBaseLayer: true,\n            textureFilter: \"LINEAR\",\n            maxNativeZoom: 17,\n            defaultTextures: [{color: \"#001522\"}, {color: \"#E4E6F3\"}],\n            attribution: `<div style=\"transform: scale(0.8); margin-top:-2px;\"><a href=\"https://www.bing.com\" target=\"_blank\"><img style=\"position: relative; top: 2px;\" title=\"Bing Imagery\" src=\"https://sandcastle.cesium.com/CesiumUnminified/Assets/Images/bing_maps_credit.png\"></a> ¬© 2021 Microsoft Corporation</div>`,\n            urlRewrite: (s: Segment, u: string) => {\n                return stringTemplate(u, {\n                    's': this._getSubdomain(),\n                    'quad': toQuadKey(s.tileX, s.tileY, s.tileZoom)\n                });\n            },\n            specular: [0.00063, 0.00055, 0.00032],\n            ambient: \"rgb(90,90,90)\",\n            diffuse: \"rgb(350,350,350)\",\n            shininess: 20,\n            nightTextureCoefficient: 2.7,\n            ...options\n        });\n    }\n}","import * as jd from \"./astro/jd\";\nimport {EventsHandler, createEvents} from \"./Events\";\nimport {JulianDate} from \"./astro/jd\";\nimport {Handler} from \"./webgl/Handler\";\n\ntype ClockEventsList = [\"tick\", \"end\", \"start\", \"stop\"];\n\nconst CLOCK_EVENTS: ClockEventsList = [\"tick\", \"end\", \"start\", \"stop\"];\n\nexport interface IClockParams {\n    name?: string;\n    startDate?: JulianDate;\n    endDate?: JulianDate;\n    currentDate?: JulianDate;\n    multiplier?: number;\n}\n\n/**\n * Class represents application timer that stores custom current julian datetime, and time speed multiplier.\n * @class\n * @param {Object} [params] - Clock parameters:\n * @param {JulianDate} [params.startDate=0.0] - Julian start date.\n * @param {JulianDate} [params.endDate=0.0] - Julian end date.\n * @param {JulianDate} [params.currentDate] - Julian current date. Default: current date.\n * @param {number} [params.multiplier=1.0] - Time speed multiplier.\n */\nclass Clock {\n    static __counter__: number = 0;\n    protected __id: number;\n    public __handler: Handler | null = null;\n\n    /**\n     * Clock events.\n     * @public\n     * @type {EventsHandler<ClockEventsList>}\n     */\n    public events: EventsHandler<ClockEventsList>;\n\n    /**\n     * Clock name.\n     * @public\n     * @type {string}\n     */\n    public name: string;\n\n    /**\n     * Start julian date clock loop.\n     * @public\n     * @type {JulianDate}\n     */\n    public startDate: JulianDate;\n\n    /**\n     * End julian date clock loop.\n     * @public\n     * @type {JulianDate}\n     */\n    public endDate: JulianDate;\n\n    /**\n     * Current julian datetime.\n     * @public\n     * @type {JulianDate}\n     */\n    public currentDate: JulianDate;\n\n    /**\n     * Animation frame delta time.\n     * @public\n     * @readonly\n     * @type {number}\n     */\n    public deltaTicks: number;\n\n    /**\n     * Timer activity.\n     * @public\n     * @type {boolean}\n     */\n    public active: boolean = true;\n\n    /**\n     * Timer speed multiplier.\n     * @protected\n     * @type {number}\n     */\n    protected _multiplier: number;\n    protected _running: number;\n    protected _intervalDelay: number;\n    protected _intervalStart: number;\n    protected _intervalCallback: Function | null;\n\n\n    constructor(params: IClockParams = {}) {\n\n\n        this.__id = Clock.__counter__++;\n\n        this.events = createEvents<ClockEventsList>(CLOCK_EVENTS, this);\n\n        this.name = params.name || \"\";\n\n        this.startDate = params.startDate || 0;\n\n        this.endDate = params.endDate || 0;\n\n        let currentDate = params.currentDate || jd.DateToUTC(new Date());\n        if (params.startDate && currentDate < params.startDate) {\n            currentDate = params.startDate;\n        }\n        if (params.endDate && currentDate > params.endDate) {\n            currentDate = params.endDate;\n        }\n\n        this.currentDate = currentDate;\n\n        this._multiplier = params.multiplier !== undefined ? params.multiplier : 1.0;\n        this._running = 1;\n\n        this.deltaTicks = 0;\n\n        this.active = true;\n\n        this._intervalDelay = 0;\n        this._intervalStart = 0;\n        this._intervalCallback = null;\n    }\n\n    public clearInterval() {\n        this._intervalDelay = 0;\n        this._intervalStart = 0;\n        this._intervalCallback = null;\n    }\n\n    public setInterval(delay: number, callback: Function) {\n        this._intervalStart = this.currentDate;\n        this._intervalDelay = delay * jd.ONE_BY_MILLISECONDS_PER_DAY;\n        this._intervalCallback = callback;\n    }\n\n    /**\n     * Sets current clock datetime.\n     * @public\n     * @param {Object} date - JavaScript Date object.\n     */\n    public setDate(date: Date) {\n        let d = jd.DateToUTC(date);\n        if (this.startDate && d < this.startDate) {\n            d = this.startDate;\n        }\n        if (this.endDate && d > this.endDate) {\n            d = this.endDate;\n        }\n        this.currentDate = d;\n    }\n\n    /**\n     * Returns current application date.\n     * @public\n     * @returns {Date} - Current date.\n     */\n    public getDate(): Date {\n        return jd.UTCtoDate(this.currentDate);\n    }\n\n    public reset() {\n        if (this.startDate) {\n            this.currentDate = this.startDate;\n        }\n    }\n\n    public tick(dt: number) {\n        let m = this._multiplier * this._running;\n        this.deltaTicks = dt * m\n        if (this.active) {\n            let cd = jd.addMilliseconds(this.currentDate, this.deltaTicks);\n            if (m > 0) {\n                if (this.endDate && cd > this.endDate) {\n                    this.currentDate = this.startDate;\n                    this.events.dispatch(this.events.end, this);\n                } else {\n                    this.currentDate = cd;\n                }\n            } else {\n                if (this.startDate && cd < this.startDate) {\n                    this.currentDate = this.endDate;\n                    this.events.dispatch(this.events.end, this);\n                } else {\n                    this.currentDate = cd;\n                }\n            }\n\n            if (this._intervalCallback) {\n                if (this.currentDate - this._intervalStart >= this._intervalDelay) {\n                    this._intervalStart = this.currentDate;\n                    this._intervalCallback(this);\n                }\n            }\n\n            this.events.dispatch(this.events.tick, this);\n        }\n    }\n\n    /**\n     * @public\n     * @param {Clock} clock - Clock instance to compare.\n     * @returns {boolean} - Returns true if a clock is the same instance.\n     */\n    public isEqual(clock: Clock) {\n        return this.__id === clock.__id;\n    }\n\n    public start() {\n        if (this._running === 0) {\n            this._running = 1;\n            this.events.dispatch(this.events.start, this);\n        }\n    }\n\n    public get multiplier(): number {\n        return this._multiplier;\n    }\n\n    public set multiplier(value: number) {\n        this._multiplier = value;\n    }\n\n    public stop() {\n        if (this._running === 1) {\n            this._running = 0;\n            this.events.dispatch(this.events.stop, this);\n        }\n    }\n}\n\nexport {Clock};\n","import {Handler, WebGLBufferExt} from \"./Handler\";\nimport {Program} from \"./Program\";\n\n/**\n * This is shader program controller that used by handler object to access the shader\n * program capabilities, like switching program during the rendering.\n * Get access to the program from ...handler.programs.<program name> etc.\n * @class\n * @param {Handler} handler - Handler.\n * @param {Program} program - Shader program.\n */\nexport class ProgramController {\n\n    /**\n     * Handler.\n     * @protected\n     * @type {Handler}\n     */\n    protected _handler: Handler;\n\n    /**\n     * Shader program.\n     * @public\n     * @type {Program}\n     */\n    public _program: Program;\n\n    /**\n     * Program current frame activation flag.\n     * @public\n     * @type {boolean}\n     */\n    public _activated: boolean;\n\n    constructor(handler: Handler, program: Program) {\n        this._program = program;\n        this._handler = handler;\n        this._activated = false;\n    }\n\n    /**\n     * Lazy create program call.\n     * @public\n     */\n    public initialize() {\n        if (this._handler.gl) {\n            this._program.createProgram(this._handler.gl);\n        }\n    }\n\n    /**\n     * Returns controller's shader program.\n     * @public\n     * @return {Program} -\n     */\n    public getProgram(): Program {\n        return this._program;\n    }\n\n    /**\n     * Activates current shader program.\n     * @public\n     * @returns {ProgramController} -\n     */\n    public activate(): this {\n        if (!this._activated) {\n            this._handler.activeProgram!.deactivate();\n            this._handler.activeProgram = this;\n            let p = this._program;\n            this._activated = true;\n            p.enableAttribArrays();\n            p.use();\n        }\n        return this;\n    }\n\n    /**\n     * Remove program from handler\n     * @public\n     */\n    public remove() {\n        let p = this._handler.programs;\n        if (p[this._program.name]) {\n            if (this._activated) {\n                this.deactivate();\n            }\n            this._program.delete();\n            delete p[this._program.name];\n        }\n    }\n\n    /**\n     * Deactivate shader program. This is not necessary while activate function used.\n     * @public\n     */\n    public deactivate() {\n        this._program.disableAttribArrays();\n        this._activated = false;\n    }\n\n    /**\n     * Returns program activity.\n     * @public\n     * @return {boolean} -\n     */\n    public isActive(): boolean {\n        return this._activated;\n    }\n\n    /**\n     * Sets program uniforms and attributes values and return controller instance.\n     * @public\n     * @param {Record<string, any>} params - Object with variable name and value like { value: 12, someArray:[1,2,3], uSampler: texture,... }\n     * @return {ProgramController} -\n     */\n    public set(params: Record<string, any>) {\n        this.activate();\n        this._program.set(params);\n        return this;\n    }\n\n    /**\n     * Draw index buffer with this program.\n     * @public\n     * @param {number} mode - Gl draw mode\n     * @param {WebGLBuffer} buffer - Buffer to draw.\n     * @return {ProgramController} Returns current shader controller instance.\n     */\n    public drawIndexBuffer(mode: number, buffer: WebGLBufferExt): ProgramController {\n        this._program.drawIndexBuffer(mode, buffer);\n        return this;\n    }\n\n    /**\n     * Calls Gl drawArray function.\n     * @param {number} mode - Gl draw mode.\n     * @param {number} numItems - draw items count.\n     * @return {ProgramController} Returns current shader controller instance.\n     */\n    public drawArrays(mode: number, numItems: number): ProgramController {\n        this._program.drawArrays(mode, numItems);\n        return this;\n    }\n}\n","class Node<T> {\n\n    public next: Node<T> | null;\n    public prev: Node<T> | null;\n    public data: T | null;\n\n    constructor() {\n        this.next = null;\n        this.prev = null;\n        this.data = null;\n    }\n}\n\n/**\n * @class Stack<T>\n * @param {number} [size=256] - Stack size\n */\nclass Stack<T> {\n\n    protected _current: Node<T>;\n    protected _head: Node<T>;\n\n    constructor(size: number = 256) {\n        this._current = new Node<T>();\n        this._head = this._current;\n\n        for (let i = 0; i < size; i++) {\n            let n = new Node<T>();\n            n.prev = this._current;\n            this._current.next = n;\n            this._current = n;\n        }\n        this._current = this._head;\n    }\n\n    public current(): Node<T> {\n        return this._current;\n    }\n\n    public push(data: T) {\n        this._current = this._current.next!;\n        this._current.data = data;\n    }\n\n    public pop(): T | null {\n        let res = this._current.data;\n        //this._current.data = null;\n        this._current = this._current.prev!;\n        return res;\n    }\n\n    public popPrev(): T | null {\n        this._current = this._current.prev!;\n        return this._current.data;\n    }\n}\n\nexport {Stack};\n","import {BaseFramebuffer} from \"./BaseFramebuffer\";\nimport {Clock} from \"../Clock\";\nimport {cons} from \"../cons\";\nimport {EventsHandler, createEvents} from \"../Events\";\nimport {getUrlParam, isEmpty, TypedArray} from \"../utils/shared\";\nimport {ImageCanvas} from \"../ImageCanvas\";\nimport {NumberArray2, Vec2} from \"../math/Vec2\";\nimport {ProgramController} from \"./ProgramController\";\nimport {Program} from \"./Program\";\nimport {Stack} from \"../Stack\";\nimport {throttle} from \"../utils/shared\";\n\nexport type WebGLContextExt = { type: string } & WebGL2RenderingContext;\nexport type WebGLBufferExt = { numItems: number; itemSize: number } & WebGLBuffer;\nexport type WebGLTextureExt = { default?: boolean } & WebGLTexture;\nexport type ImageSource = HTMLCanvasElement | ImageBitmap | ImageData | HTMLImageElement | HTMLVideoElement;\ntype CreateTextureFunc = (image: ImageSource, internalFormat?: number, texture?: WebGLTextureExt) => WebGLTextureExt | null;\n\nexport interface IHandlerParameters {\n    anisotropy?: number;\n    width?: number;\n    height?: number;\n    pixelRatio?: number;\n    context?: {\n        stencil?: boolean;\n        alpha?: boolean;\n        antialias?: boolean;\n        premultipliedAlpha?: boolean;\n    },\n    extensions?: string[];\n    autoActivate?: boolean;\n}\n\nexport interface Texture3DParams {\n    nx: string,\n    px: string,\n    py: string,\n    ny: string,\n    pz: string,\n    nz: string\n}\n\nexport interface IDefaultTextureParams {\n    color?: string;\n    url?: string;\n}\n\nconst vendorPrefixes = [\"\", \"WEBKIT_\", \"MOZ_\"];\nconst CONTEXT_TYPE = [\"webgl2\", \"webgl\"];\n\n// Maximal mipmap levels\nconst MAX_LEVELS = 2;\n\n/**\n * A WebGL handler for accessing low-level WebGL capabilities.\n * @class\n * @param {string | HTMLCanvasElement} canvasTarget - Canvas element target.\n * or undefined creates hidden canvas and handler becomes hidden.\n * @param {Object} [params] - Handler options:\n * @param {number} [params.anisotropy] - Anisotropy filter degree. 8 is default.\n * @param {number} [params.width] - Hidden handler width. 256 is default.\n * @param {number} [params.height] - Hidden handler height. 256 is default.\n * @param {Array.<string>} [params.extensions] - Additional WebGL extension list. Available by default: EXT_texture_filter_anisotropic.\n */\nclass Handler {\n\n    protected _throttledDrawFrame: () => void\n\n    /**\n     * Events.\n     * @public\n     * @type {EventsHandler<[\"visibilitychange\", \"resize\"]>}\n     */\n    public events: EventsHandler<[\"visibilitychange\", \"resize\"]>;\n\n    /**\n     * Application default timer.\n     * @public\n     * @type {Clock}\n     */\n    public defaultClock: Clock;\n\n    /**\n     * Custom timers.\n     * @protected\n     * @type{Clock[]}\n     */\n    protected _clocks: Clock[];\n\n    /**\n     * Draw frame time in milliseconds.\n     * @public\n     * @type {number}\n     */\n    public deltaTime: number;\n\n    /**\n     * WebGL rendering canvas element.\n     * @public\n     * @type {HTMLCanvasElement | null}\n     */\n    public canvas: HTMLCanvasElement | null;\n\n    /**\n     * WebGL context.\n     * @public\n     * @type {WebGLContextExt | null}\n     */\n    public gl: WebGLContextExt | null;\n\n    /**\n     * Shader program controller list.\n     * @public\n     * @type {Record<string, ProgramController>}\n     */\n    public programs: Record<string, ProgramController>;\n\n    /**\n     * Current active shader program controller.\n     * @public\n     * @type {ProgramController}\n     */\n    public activeProgram: ProgramController | null;\n\n    /**\n     * Handler parameters.\n     * @private\n     * @type {Object}\n     */\n    protected _params: {\n        anisotropy: number;\n        width: number;\n        height: number;\n        pixelRatio: number;\n        context: {\n            stencil?: boolean;\n            alpha?: boolean;\n            antialias?: boolean;\n            premultipliedAlpha?: boolean;\n        };\n        extensions: string[];\n    };\n\n    public _oneByHeight: number;\n\n    /**\n     * Current WebGL extensions. Becomes here after context initialization.\n     * @public\n     * @type {Record<string, any>}\n     */\n    public extensions: Record<string, any>;\n\n    /**\n     * HTML Canvas target.\n     * @private\n     * @type {string | HTMLCanvasElement | undefined}\n     */\n    protected _canvasTarget: string | HTMLCanvasElement | undefined;\n\n    protected _lastAnimationFrameTime: number;\n\n    protected _initialized: boolean;\n\n    /**\n     * Animation frame function assigned from outside(Ex. from Renderer).\n     * @private\n     * @type {Function}\n     */\n    protected _frameCallback: Function;\n\n    protected _canvasSize: NumberArray2;\n\n    public transparentTexture: WebGLTextureExt | null;\n\n    public defaultTexture: WebGLTextureExt | null;\n\n    public framebufferStack = new Stack<BaseFramebuffer>();\n\n    public createTexture: Record<string, CreateTextureFunc>;\n\n    public createTextureDefault: CreateTextureFunc;\n\n    public ONCANVASRESIZE: Function | null;\n\n    public createTexture_n: CreateTextureFunc;\n    public createTexture_l: CreateTextureFunc;\n    public createTexture_mm: CreateTextureFunc;\n    public createTexture_a: CreateTextureFunc;\n\n    public intersectionObserver?: IntersectionObserver;\n    public resizeObserver?: ResizeObserver;\n\n    protected _requestAnimationFrameId: number = 0;\n\n    constructor(canvasTarget: string | HTMLCanvasElement | undefined, params: IHandlerParameters = {}) {\n\n        this.events = createEvents<[\"visibilitychange\", \"resize\"]>([\"visibilitychange\", \"resize\"]);\n\n        this._throttledDrawFrame = this.drawFrame;\n\n        this.defaultClock = new Clock();\n\n        this._clocks = [];\n\n        this.deltaTime = 0;\n\n        this.canvas = null;\n\n        this.gl = null;\n\n        this.programs = {};\n\n        this.activeProgram = null;\n\n        this._canvasSize = [0, 0];\n\n        this._params = {\n            anisotropy: params.anisotropy || 4,\n            width: params.width || 256,\n            height: params.height || 256,\n            pixelRatio: getUrlParam('og_dpi') || params.pixelRatio || 1.0,\n            extensions: params.extensions || [],\n            context: params.context || {}\n        }\n\n        this._oneByHeight = 1.0 / (this._params.height * this._params.pixelRatio);\n\n        this.extensions = {};\n\n        this._canvasTarget = canvasTarget;\n\n        this._lastAnimationFrameTime = 0;\n\n        this._initialized = false;\n\n        this._frameCallback = function () {\n        };\n\n        this.transparentTexture = null;\n\n        this.defaultTexture = null;\n\n        this.framebufferStack = new Stack();\n\n        this.createTexture_n = this.createTexture_n_webgl2.bind(this);\n        this.createTexture_l = this.createTexture_l_webgl2.bind(this);\n        this.createTexture_mm = this.createTexture_mm_webgl2.bind(this);\n        this.createTexture_a = this.createTexture_a_webgl2.bind(this);\n\n        this.createTexture = {\n            \"NEAREST\": this.createTexture_n,\n            \"LINEAR\": this.createTexture_l,\n            \"MIPMAP\": this.createTexture_mm,\n            \"ANISOTROPIC\": this.createTexture_a\n        };\n\n        this.createTextureDefault = this.createTexture_n;\n\n        this.ONCANVASRESIZE = null;\n\n        this._createCanvas();\n\n        if (params.autoActivate || isEmpty(params.autoActivate)) {\n            this.initialize();\n        }\n    }\n\n    public set frameDelay(delay: number) {\n        if (delay === 0) {\n            this._throttledDrawFrame = this.drawFrame;\n        } else {\n            this._throttledDrawFrame = throttle(this.drawFrame, delay);\n        }\n    }\n\n    public isInitialized(): boolean {\n        return this._initialized;\n    }\n\n    protected _createCanvas() {\n        if (this._canvasTarget) {\n            if (this._canvasTarget instanceof HTMLElement) {\n                this.canvas = this._canvasTarget;\n            } else {\n                this.canvas = (document.getElementById(this._canvasTarget) || document.querySelector(this._canvasTarget)) as HTMLCanvasElement;\n            }\n        } else {\n            this.canvas = document.createElement(\"canvas\");\n            this.canvas.width = this._params.width;\n            this.canvas.height = this._params.height;\n        }\n    }\n\n    /**\n     * The return value is null if the extension is not supported, or an extension object otherwise.\n     * @param {WebGLRenderingContext | WebGL2RenderingContext | null} gl - WebGl context pointer.\n     * @param {string} name - Extension name.\n     * @returns {any} -\n     */\n    static getExtension(gl: WebGLRenderingContext | WebGL2RenderingContext | null, name: string): any | undefined {\n\n        if (!gl) return;\n\n        let i, ext;\n        for (i in vendorPrefixes) {\n            ext = gl.getExtension(vendorPrefixes[i] + name);\n            if (ext) {\n                return ext;\n            }\n        }\n    }\n\n    /**\n     * Returns a drawing context on the canvas, or null if the context identifier is not supported.\n     * @param {HTMLCanvasElement} canvas - HTML canvas object.\n     * @param {any} [contextAttributes] - See canvas.getContext contextAttributes.\n     * @returns {WebGLContextExt | null} -\n     */\n    static getContext(canvas: HTMLCanvasElement, contextAttributes?: any): WebGLContextExt | null {\n        let ctx: WebGLContextExt | null = null;\n\n        try {\n            let urlParams = new URLSearchParams(location.search);\n            let ver = urlParams.get('og_ver');\n            if (ver) {\n                ctx = canvas.getContext(ver, contextAttributes) as WebGLContextExt;\n                if (ctx) {\n                    ctx.type = ver;\n                }\n            } else {\n                for (let i = 0; i < CONTEXT_TYPE.length; i++) {\n                    ctx = canvas.getContext(CONTEXT_TYPE[i], contextAttributes) as WebGLContextExt;\n                    if (ctx) {\n                        ctx.type = CONTEXT_TYPE[i];\n                        break;\n                    }\n                }\n            }\n        } catch (ex) {\n            cons.logErr(\"exception during the GL context initialization\");\n        }\n\n        if (!ctx) {\n            cons.logErr(\"could not initialise WebGL\");\n        }\n\n        return ctx;\n    }\n\n    /**\n     * Sets animation frame function.\n     * @public\n     * @param {Function} callback - Frame callback.\n     */\n    public setFrameCallback(callback: Function) {\n        callback && (this._frameCallback = callback);\n    }\n\n    /**\n     * Creates empty texture.\n     * @public\n     * @param {number} [width=1] - Specifies the width of the texture image.\n     * @param {number} [height=1] - Specifies the width of the texture image.\n     * @param {string} [filter=\"NEAREST\"] - Specifies GL_TEXTURE_MIN(MAX)_FILTER texture value.\n     * @param {string} [internalFormat=\"RGBA\"] - Specifies the color components in the texture.\n     * @param {string} [format=\"RGBA\"] - Specifies the format of the texel data.\n     * @param {string} [type=\"UNSIGNED_BYTE\"] - Specifies the data type of the texel data.\n     * @param {number} [level=0] - Specifies the level-of-detail number. Level 0 is the base image level. Level n is the nth mipmap reduction image.\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createEmptyTexture2DExt(\n        width: number = 1,\n        height: number = 1,\n        filter: string = \"NEAREST\",\n        internalFormat: string = \"RGBA\",\n        format: string = \"RGBA\",\n        type: string = \"UNSIGNED_BYTE\",\n        level: number = 0\n    ): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        let texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        gl.texImage2D(\n            gl.TEXTURE_2D,\n            level,\n            (gl as any)[internalFormat.toUpperCase()],\n            width,\n            height,\n            0,\n            (gl as any)[format.toUpperCase()],\n            (gl as any)[type.toUpperCase()],\n            null!\n        );\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, (gl as any)[filter.toUpperCase()]);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, (gl as any)[filter.toUpperCase()]);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates Empty NEAREST filtered texture.\n     * @public\n     * @param {number} width - Empty texture width.\n     * @param {number} height - Empty texture height.\n     * @param {number} [internalFormat]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createEmptyTexture_n(\n        width: number,\n        height: number,\n        internalFormat?: number): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        let texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        gl.texImage2D(\n            gl.TEXTURE_2D,\n            0,\n            internalFormat || gl.RGBA,\n            width,\n            height,\n            0,\n            gl.RGBA,\n            gl.UNSIGNED_BYTE,\n            null!\n        );\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates empty LINEAR filtered texture.\n     * @public\n     * @param {number} width - Empty texture width.\n     * @param {number} height - Empty texture height.\n     * @param {number} [internalFormat]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createEmptyTexture_l(\n        width: number,\n        height: number,\n        internalFormat?: number): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        let texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat || gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null!);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates NEAREST filter texture.\n     * @public\n     * @param {HTMLCanvasElement | Image} image - Image or Canvas object.\n     * @param {number} [internalFormat]\n     * @param {WebGLTexture | null} [texture=null]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createTexture_n_webgl1(\n        image: ImageSource,\n        internalFormat?: number,\n        texture: WebGLTexture | null = null): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        texture = texture || gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat || gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates LINEAR filter texture.\n     * @public\n     * @param {ImageSource} image - Image or Canvas object.\n     * @param {number} [internalFormat]\n     * @param {WebGLTexture | null} [texture]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createTexture_l_webgl1(\n        image: ImageSource,\n        internalFormat?: number,\n        texture: WebGLTexture | null = null): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        texture = texture || gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat || gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates MIPMAP filter texture.\n     * @public\n     * @param {ImageSource} image - Image or Canvas object.\n     * @param {number} [internalFormat]\n     * @param {WebGLTexture | null} [texture]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createTexture_mm_webgl1(\n        image: ImageSource,\n        internalFormat?: number,\n        texture: WebGLTexture | null = null): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        texture = texture || gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat || gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates ANISOTROPY filter texture.\n     * @public\n     * @param {ImageSource} image - Image or Canvas object.\n     * @param {number} [internalFormat]\n     * @param {WebGLTexture | null} [texture]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createTexture_a_webgl1(\n        image: ImageSource,\n        internalFormat?: number,\n        texture: WebGLTexture | null = null): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        texture = texture || gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat || gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n        gl.texParameterf(gl.TEXTURE_2D, this.extensions.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT, this._params.anisotropy);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates NEAREST filter texture.\n     * @public\n     * @param {ImageSource} image - Image or Canvas object.\n     * @param {number} [internalFormat]\n     * @param {WebGLTexture | null} [texture]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createTexture_n_webgl2(\n        image: ImageSource,\n        internalFormat?: number,\n        texture: WebGLTexture | null = null): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        texture = texture || gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        //gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n        gl.texStorage2D(gl.TEXTURE_2D, 1, internalFormat || gl.RGBA8, image.width, image.height);\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, image.width, image.height, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates LINEAR filter texture.\n     * @public\n     * @param {ImageSource} image - Image or Canvas object.\n     * @param {number} [internalFormat]\n     * @param {WebGLTexture | null} [texture]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createTexture_l_webgl2(\n        image: ImageSource,\n        internalFormat?: number,\n        texture: WebGLTexture | null = null): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        texture = texture || gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        //gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n        gl.texStorage2D(gl.TEXTURE_2D, 1, internalFormat || gl.RGBA8, image.width, image.height);\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, image.width, image.height, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates MIPMAP filter texture.\n     * @public\n     * @param {ImageSource} image - Image or Canvas object.\n     * @param {number} [internalFormat]\n     * @param {WebGLTexture | null} [texture]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createTexture_mm_webgl2(\n        image: ImageSource,\n        internalFormat?: number,\n        texture: WebGLTexture | null = null): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        texture = texture || gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n        gl.texStorage2D(gl.TEXTURE_2D, MAX_LEVELS, internalFormat || gl.RGBA8, image.width, image.height);\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, image.width, image.height, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n\n        return texture;\n    }\n\n    /**\n     * Creates ANISOTROPY filter texture.\n     * @public\n     * @param {ImageSource} image - Image or Canvas object.\n     * @param {number} [internalFormat]\n     * @param {WebGLTexture | null} [texture]\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public createTexture_a_webgl2(\n        image: ImageSource,\n        internalFormat?: number,\n        texture: WebGLTexture | null = null): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        texture = texture || gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        //gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n        gl.texStorage2D(gl.TEXTURE_2D, MAX_LEVELS, internalFormat || gl.RGBA8, image.width, image.height);\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, image.width, image.height, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n        gl.texParameterf(gl.TEXTURE_2D, this.extensions.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT, this._params.anisotropy);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null!);\n        return texture;\n    }\n\n    /**\n     * Creates cube texture.\n     * @public\n     * @param {Texture3DParams} params - Face image urls:\n     * @param {string} params.px - Positive X or right image url.\n     * @param {string} params.nx - Negative X or left image url.\n     * @param {string} params.py - Positive Y or up image url.\n     * @param {string} params.ny - Negative Y or bottom image url.\n     * @param {string} params.pz - Positive Z or face image url.\n     * @param {string} params.nz - Negative Z or back image url.\n     * @returns {WebGLTexture | null} - WebGL texture object.\n     */\n    public loadCubeMapTexture(params: Texture3DParams): WebGLTexture | null {\n\n        let gl = this.gl!;\n\n        let texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        let faces: [string, number][] = [\n            [params.px, gl.TEXTURE_CUBE_MAP_POSITIVE_X],\n            [params.nx, gl.TEXTURE_CUBE_MAP_NEGATIVE_X],\n            [params.py, gl.TEXTURE_CUBE_MAP_POSITIVE_Y],\n            [params.ny, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y],\n            [params.pz, gl.TEXTURE_CUBE_MAP_POSITIVE_Z],\n            [params.nz, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z]\n        ];\n\n        let imageCanvas = new ImageCanvas();\n        imageCanvas.fillEmpty();\n        let emptyImage = imageCanvas.getImage();\n\n        for (let i = 0; i < faces.length; i++) {\n            let face = faces[i][1];\n            gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n            //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n            gl.texImage2D(face, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, emptyImage);\n        }\n\n        for (let i = 0; i < faces.length; i++) {\n            let face = faces[i][1];\n            let image = new Image();\n            image.crossOrigin = \"\";\n            image.onload = (function (texture: WebGLTexture | null, face: number, image: HTMLImageElement) {\n                return function () {\n                    if (gl && texture) {\n                        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n                        //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n                        gl.texImage2D(face, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n                    }\n                };\n            })(texture, face, image);\n\n            image.src = faces[i][0];\n        }\n        return texture;\n    }\n\n    /**\n     * Adds shader program to the handler.\n     * @public\n     * @param {Program} program - Shader program.\n     * @param {boolean} [notActivate] - If it's true program will not compile.\n     * @return {Program} -\n     */\n    public addProgram(program: Program, notActivate: boolean = false): Program {\n        if (!this.programs[program.name]) {\n            let sc = new ProgramController(this, program);\n            this.programs[program.name] = sc;\n            this._initProgramController(sc);\n            if (notActivate) {\n                sc._activated = false;\n            }\n        } else {\n            console.warn(`Shader program: \"${program.name}\" already exists.`);\n        }\n        return program;\n    }\n\n    /**\n     * Removes shader program from handler.\n     * @public\n     * @param {string} name - Shader program name.\n     */\n    public removeProgram(name: string) {\n        this.programs[name] && this.programs[name].remove();\n    }\n\n    /**\n     * Adds shader programs to the handler.\n     * @public\n     * @param {Array.<Program>} programsArr - Shader program array.\n     */\n    public addPrograms(programsArr: Program[]) {\n        for (let i = 0; i < programsArr.length; i++) {\n            this.addProgram(programsArr[i]);\n        }\n    }\n\n    /**\n     * Used in addProgram\n     * @protected\n     * @param {ProgramController} sc - Program controller\n     */\n    protected _initProgramController(sc: ProgramController) {\n        if (this._initialized) {\n            sc.initialize();\n            if (!this.activeProgram) {\n                this.activeProgram = sc;\n                sc.activate();\n            } else {\n                sc.deactivate();\n                this.activeProgram._program.enableAttribArrays();\n                this.activeProgram._program.use();\n            }\n        }\n    }\n\n    /**\n     * Used in init function.\n     * @private\n     */\n    protected _initPrograms() {\n        for (let p in this.programs) {\n            this._initProgramController(this.programs[p]);\n        }\n    }\n\n    /**\n     * Initialize additional WebGL extensions.\n     * @public\n     * @param {string} extensionStr - Extension name.\n     * @param {boolean} showLog - Show logging.\n     * @return {any} -\n     */\n    public initializeExtension(extensionStr: string, showLog: boolean = false): any {\n        if (!(this.extensions && this.extensions[extensionStr])) {\n            let ext = Handler.getExtension(this.gl, extensionStr);\n            if (ext) {\n                this.extensions[extensionStr] = ext;\n            } else if (showLog) {\n                console.warn(\n                    \"og.webgl.Handler: extension '\" + extensionStr + \"' doesn't initialize.\"\n                );\n            }\n        }\n        return this.extensions && this.extensions[extensionStr];\n    }\n\n    /**\n     * Main function that initialize handler.\n     * @public\n     */\n    public initialize() {\n\n        if (this._initialized) return;\n\n        if (!this.canvas) return;\n\n        this.gl = Handler.getContext(this.canvas, this._params.context);\n\n        if (!this.gl) return;\n\n        this._initialized = true;\n\n        /** Sets default extensions */\n        this._params.extensions.push(\"EXT_texture_filter_anisotropic\");\n\n        if (this.gl.type === \"webgl\") {\n            this._params.extensions.push(\"OES_standard_derivatives\");\n            this._params.extensions.push(\"OES_element_index_uint\");\n            this._params.extensions.push(\"WEBGL_depth_texture\");\n            this._params.extensions.push(\"ANGLE_instanced_arrays\");\n            //this._params.extensions.push(\"WEBGL_draw_buffers\");\n            //this._params.extensions.push(\"EXT_frag_depth\");\n        } else {\n            this._params.extensions.push(\"EXT_color_buffer_float\");\n            this._params.extensions.push(\"OES_texture_float_linear\");\n            //this._params.extensions.push(\"WEBGL_draw_buffers\");\n        }\n\n        let i = this._params.extensions.length;\n        while (i--) {\n            this.initializeExtension(this._params.extensions[i], true);\n        }\n\n        if (this.gl.type === \"webgl\") {\n            this.createTexture_n = this.createTexture_n_webgl1.bind(this);\n            this.createTexture_l = this.createTexture_l_webgl1.bind(this);\n            this.createTexture_mm = this.createTexture_mm_webgl1.bind(this);\n            this.createTexture_a = this.createTexture_a_webgl1.bind(this);\n        } else {\n            this.createTexture_n = this.createTexture_n_webgl2.bind(this);\n            this.createTexture_l = this.createTexture_l_webgl2.bind(this);\n            this.createTexture_mm = this.createTexture_mm_webgl2.bind(this);\n            this.createTexture_a = this.createTexture_a_webgl2.bind(this);\n        }\n\n        this.createTexture[\"NEAREST\"] = this.createTexture_n;\n        this.createTexture[\"LINEAR\"] = this.createTexture_l;\n        this.createTexture[\"MIPMAP\"] = this.createTexture_mm;\n        this.createTexture[\"ANISOTROPIC\"] = this.createTexture_a;\n\n        if (!this.extensions.EXT_texture_filter_anisotropic) {\n            this.createTextureDefault = this.createTexture_mm;\n        } else {\n            this.createTextureDefault = this.createTexture_a;\n        }\n\n        /** Initializing shaders and rendering parameters*/\n        this._initPrograms();\n        this._setDefaults();\n\n        this.intersectionObserver = new IntersectionObserver((entries) => {\n            this._toggleVisibilityChange(entries[entries.length - 1].isIntersecting);\n        }, {threshold: 0});\n\n        this.intersectionObserver.observe(this.canvas);\n\n        this.resizeObserver = new ResizeObserver(entries => {\n            this._toggleVisibilityChange(entries[0].contentRect.width !== 0 && entries[0].contentRect.height !== 0);\n        });\n\n        this.resizeObserver.observe(this.canvas);\n\n        document.addEventListener(\"visibilitychange\", () => {\n            this._toggleVisibilityChange(document.visibilityState === 'visible');\n        });\n    }\n\n    protected _toggleVisibilityChange(visibility: boolean) {\n        if (visibility) {\n            this.start();\n            this.ONCANVASRESIZE && this.ONCANVASRESIZE();\n            this.events.dispatch(this.events.visibilitychange, true);\n        } else {\n            this.events.dispatch(this.events.visibilitychange, false);\n            this.stop();\n        }\n    }\n\n    /**\n     * Sets default gl render parameters. Used in init function.\n     * @protected\n     */\n    protected _setDefaults() {\n\n        let gl = this.gl;\n\n        if (!gl) return;\n        if (!this.canvas) return;\n\n        gl.depthFunc(gl.LESS);\n        gl.enable(gl.DEPTH_TEST);\n        this.setSize(\n            this.canvas.clientWidth || this._params.width,\n            this.canvas.clientHeight || this._params.height\n        );\n        gl.frontFace(gl.CCW);\n        gl.cullFace(gl.BACK);\n        gl.enable(gl.CULL_FACE);\n        gl.disable(gl.BLEND);\n        this.createDefaultTexture({color: \"rgba(0,0,0,0.0)\"}, (t: WebGLTextureExt) => {\n            this.transparentTexture = t;\n        });\n        this.createDefaultTexture({color: \"rgba(255, 255, 255, 1.0)\"}, (t: WebGLTextureExt) => {\n            this.defaultTexture = t;\n        });\n    }\n\n    public getCanvasSize(): NumberArray2 {\n        return this._canvasSize;\n    }\n\n    /**\n     * Creates STREAM_DRAW ARRAY buffer.\n     * @public\n     * @param {number} itemSize - Array item size.\n     * @param {number} numItems - Items quantity.\n     * @param {number} [usage=STATIC_DRAW] - Parameter of the bufferData call can be one of STATIC_DRAW, DYNAMIC_DRAW, or STREAM_DRAW.\n     * @param {number} [bytes=4] -\n     * @return {WebGLBufferExt} -\n     */\n    public createStreamArrayBuffer(itemSize: number, numItems: number, usage?: number, bytes: number = 4): WebGLBufferExt {\n        let gl = this.gl!;\n        let buffer: WebGLBufferExt = gl.createBuffer() as WebGLBufferExt;\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(\n            gl.ARRAY_BUFFER,\n            numItems * itemSize * bytes,\n            usage || gl.STREAM_DRAW\n        );\n        gl.bindBuffer(gl.ARRAY_BUFFER, null!);\n        buffer.itemSize = itemSize;\n        buffer.numItems = numItems;\n        return buffer;\n    }\n\n    /**\n     * Sets stream buffer.\n     * @public\n     * @param {WebGLBufferExt} buffer -\n     * @param {TypedArray} array -\n     * @param {number} [offset=0] -\n     * @return {WebGLBufferExt} -\n     */\n    public setStreamArrayBuffer(buffer: WebGLBufferExt, array: TypedArray, offset: number = 0): WebGLBufferExt {\n        let gl = this.gl!;\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferSubData(gl.ARRAY_BUFFER, offset, array);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null!);\n        return buffer;\n    }\n\n    /**\n     * Creates ARRAY buffer.\n     * @public\n     * @param {TypedArray} array - Input array.\n     * @param {number} itemSize - Array item size.\n     * @param {number} numItems - Items quantity.\n     * @param {number} [usage=STATIC_DRAW] - Parameter of the bufferData call can be one of STATIC_DRAW, DYNAMIC_DRAW, or STREAM_DRAW.\n     * @return {WebGLBufferExt} -\n     */\n    public createArrayBuffer(array: TypedArray, itemSize: number, numItems: number, usage?: number): WebGLBufferExt {\n        let gl = this.gl!;\n        let buffer: WebGLBufferExt = gl.createBuffer() as WebGLBufferExt;\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, array, usage || gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null!);\n        buffer.itemSize = itemSize;\n        buffer.numItems = numItems;\n        return buffer;\n    }\n\n    /**\n     * Creates ARRAY buffer specific length.\n     * @public\n     * @param {number} size -\n     * @param {number} [usage=STATIC_DRAW] - Parameter of the bufferData call can be one of STATIC_DRAW, DYNAMIC_DRAW, or STREAM_DRAW.\n     * @return {WebGLBufferExt} -\n     */\n    public createArrayBufferLength(size: number, usage?: number): WebGLBufferExt {\n        let gl = this.gl!;\n        let buffer: WebGLBufferExt = gl.createBuffer() as WebGLBufferExt;\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, size, usage || gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null!);\n        buffer.itemSize = 1;\n        buffer.numItems = size;\n        return buffer;\n    }\n\n    /**\n     * Creates ELEMENT ARRAY buffer.\n     * @public\n     * @param {TypedArray} array - Input array.\n     * @param {number} itemSize - Array item size.\n     * @param {number} numItems - Items quantity.\n     * @param {number} [usage=STATIC_DRAW] - Parameter of the bufferData call can be one of STATIC_DRAW, DYNAMIC_DRAW, or STREAM_DRAW.\n     * @return {Object} -\n     */\n    public createElementArrayBuffer(array: TypedArray, itemSize: number, numItems?: number, usage?: number): WebGLBufferExt {\n        let gl = this.gl!;\n        let buffer = gl.createBuffer() as WebGLBufferExt;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, array, usage || gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null!);\n        buffer.itemSize = itemSize;\n        buffer.numItems = numItems || array.length;\n        return buffer;\n    }\n\n    /**\n     * Sets handler canvas size.\n     * @public\n     * @param {number} w - Canvas width.\n     * @param {number} h - Canvas height.\n     */\n    public setSize(w: number, h: number) {\n        this._params.width = w;\n        this._params.height = h;\n        if (this.canvas) {\n            this.canvas.width = w * this._params.pixelRatio;\n            this.canvas.height = h * this._params.pixelRatio;\n\n            this._canvasSize[0] = this.canvas.width;\n            this._canvasSize[1] = this.canvas.height;\n\n            this._oneByHeight = 1.0 / this.canvas.height;\n\n            this.gl && this.gl.viewport(0, 0, w, h);\n            this.ONCANVASRESIZE && this.ONCANVASRESIZE(this.canvas);\n            this.events.dispatch(this.events.resize, this);\n        }\n    }\n\n    public get pixelRatio(): number {\n        return this._params.pixelRatio;\n    }\n\n    public set pixelRatio(pr: number) {\n        this._params.pixelRatio = pr;\n        this.setSize(this._params.width, this._params.height);\n    }\n\n    /**\n     * Returns context screen width.\n     * @public\n     * @returns {number} -\n     */\n    public getWidth(): number {\n        return this.canvas ? this.canvas.width : 0;\n    }\n\n    /**\n     * Returns context screen height.\n     * @public\n     * @returns {number} -\n     */\n    public getHeight(): number {\n        return this.canvas ? this.canvas.height : 0;\n    }\n\n    /**\n     * Returns canvas aspect ratio.\n     * @public\n     * @returns {number} -\n     */\n    public getClientAspect(): number {\n        return this.canvas ? this.canvas.clientWidth / this.canvas.clientHeight : 0;\n    }\n\n    /**\n     * Returns canvas center coordinates.\n     * @public\n     * @returns {number} -\n     */\n    public getCenter(): Vec2 {\n        let c = this.canvas;\n        return c ? new Vec2(Math.round(c.width * 0.5), Math.round(c.height * 0.5)) : new Vec2();\n    }\n\n    /**\n     * Draw single frame.\n     * @public\n     */\n    public drawFrame = () => {\n        /** Calculating frame time */\n        let now = window.performance.now();\n        this.deltaTime = now - this._lastAnimationFrameTime;\n        this._lastAnimationFrameTime = now;\n\n        this.defaultClock.tick(this.deltaTime);\n\n        for (let i = 0; i < this._clocks.length; i++) {\n            this._clocks[i].tick(this.deltaTime);\n        }\n\n        /** Canvas resize checking */\n        let canvas = this.canvas!;\n\n        if (Math.floor(canvas.clientWidth * this._params.pixelRatio) !== canvas.width || Math.floor(canvas.clientHeight * this._params.pixelRatio) !== canvas.height) {\n            if (canvas.clientWidth === 0 || canvas.clientHeight === 0) {\n                this.stop();\n            } else if (!document.hidden) {\n                this.start();\n                this.setSize(canvas.clientWidth, canvas.clientHeight);\n            }\n        }\n\n        /** Draw frame */\n        this._frameCallback();\n    }\n\n    /**\n     * Clearing gl frame.\n     * @public\n     */\n    public clearFrame() {\n        let gl = this.gl!;\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    }\n\n    /**\n     * Starts animation loop.\n     * @public\n     */\n    public start() {\n        if (!this._requestAnimationFrameId && this._initialized) {\n            this._animationFrameCallback();\n        }\n    }\n\n    public stop() {\n        if (this._requestAnimationFrameId) {\n            window.cancelAnimationFrame(this._requestAnimationFrameId);\n            this._requestAnimationFrameId = 0;\n        }\n    }\n\n    public isStopped(): boolean {\n        return !this._requestAnimationFrameId;\n    }\n\n    /**\n     * Check is gl context type equals webgl2\n     * @public\n     */\n    public isWebGl2(): boolean {\n        return this.gl ? this.gl.type === \"webgl2\" : false;\n    }\n\n    /**\n     * Make animation.\n     * @protected\n     */\n    protected _animationFrameCallback() {\n        this._requestAnimationFrameId = window.requestAnimationFrame(() => {\n            this._throttledDrawFrame();\n            this._requestAnimationFrameId && this._animationFrameCallback();\n        });\n    }\n\n    /**\n     * Creates default texture object\n     * @public\n     * @param {IDefaultTextureParams | null} params - Texture parameters:\n     * @param {(texture: WebGLTextureExt) => void} [success] - Creation callback\n     */\n    public createDefaultTexture(params: IDefaultTextureParams | null, success: (texture: WebGLTextureExt) => void) {\n\n        let imgCnv;\n        let texture;\n\n        if (params && params.color) {\n            imgCnv = new ImageCanvas(2, 2);\n            imgCnv.fillColor(params.color);\n            texture = this.createTexture_n(imgCnv.getCanvas())!;\n            texture.default = true;\n            success(texture);\n        } else if (params && params.url) {\n            let img = new Image();\n            let that = this;\n            img.onload = function () {\n                texture = that.createTextureDefault(img)!;\n                texture.default = true;\n                success(texture);\n            };\n            img.src = params.url;\n        } else {\n            imgCnv = new ImageCanvas(2, 2);\n            imgCnv.fillColor(\"#C5C5C5\");\n            texture = this.createTexture_n(imgCnv.getCanvas())!;\n            texture.default = true;\n            success(texture);\n        }\n    }\n\n    public deleteTexture(texture: WebGLTextureExt | null | undefined) {\n        if (texture && !texture.default) {\n            this.gl!.deleteTexture(texture);\n        }\n    }\n\n    /**\n     * @public\n     */\n    public destroy() {\n\n        this.resizeObserver?.disconnect();\n        this.intersectionObserver?.disconnect();\n\n        this.stop();\n\n        //\n        // Dispose shaders\n        //\n        for (let p in this.programs) {\n            this.removeProgram(p);\n        }\n\n        //\n        // Clear WebGL context\n        //\n        let gl = this.gl;\n\n        if (gl) {\n            gl.deleteTexture(this.transparentTexture as WebGLTexture);\n            this.transparentTexture = null;\n\n            gl.deleteTexture(this.defaultTexture as WebGLTexture);\n            this.defaultTexture = null;\n\n            this.framebufferStack = new Stack();\n\n            //\n            // Clear attrib pointers\n            //\n            let numAttribs = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n            let tmp = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, tmp);\n            for (let ii = 0; ii < numAttribs; ++ii) {\n                gl.disableVertexAttribArray(ii);\n                gl.vertexAttribPointer(ii, 4, gl.FLOAT, false, 0, 0);\n                gl.vertexAttrib1f(ii, 0);\n            }\n            gl.deleteBuffer(tmp);\n\n            //\n            // Clear all possible textures\n            //\n            let numTextureUnits = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n            for (let ii = 0; ii < numTextureUnits; ++ii) {\n                gl.activeTexture(gl.TEXTURE0 + ii);\n                gl.bindTexture(gl.TEXTURE_CUBE_MAP, null!);\n                gl.bindTexture(gl.TEXTURE_2D, null!);\n            }\n\n            //\n            // Hard reset\n            //\n            gl.activeTexture(gl.TEXTURE0);\n            gl.useProgram(null!);\n            gl.bindBuffer(gl.ARRAY_BUFFER, null!);\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null!);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null!);\n            gl.bindRenderbuffer(gl.RENDERBUFFER, null!);\n            gl.disable(gl.BLEND);\n            gl.disable(gl.CULL_FACE);\n            gl.disable(gl.DEPTH_TEST);\n            gl.disable(gl.DITHER);\n            gl.disable(gl.SCISSOR_TEST);\n            gl.blendColor(0, 0, 0, 0);\n            gl.blendEquation(gl.FUNC_ADD);\n            gl.blendFunc(gl.ONE, gl.ZERO);\n            gl.clearColor(0, 0, 0, 0);\n            gl.clearDepth(1);\n            gl.clearStencil(-1);\n        }\n\n        //\n        // Destroy canvas\n        //\n        if (this.canvas) {\n            if (this.canvas.parentNode) {\n                this.canvas.parentNode.removeChild(this.canvas);\n            }\n            this.canvas.width = 1;\n            this.canvas.height = 1;\n            this.canvas = null;\n        }\n\n        this.gl = null;\n\n        this._initialized = false;\n    }\n\n    public addClock(clock: Clock) {\n        if (!clock.__handler) {\n            clock.__handler = this;\n            this._clocks.push(clock);\n        }\n    }\n\n    public addClocks(clockArr: Clock[]) {\n        for (let i = 0; i < clockArr.length; i++) {\n            this.addClock(clockArr[i]);\n        }\n    }\n\n    public removeClock(clock: Clock) {\n        if (clock.__handler) {\n            let c = this._clocks;\n            let i = c.length;\n            while (i--) {\n                if (c[i].isEqual(clock)) {\n                    clock.__handler = null;\n                    c.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }\n\n    // var loadTextureData = function(textureName, callback) {\n    //     const xhr = new XMLHttpRequest();\n    //     xhr.open('GET', textureName);\n    //     xhr.responseType = 'arraybuffer';\n    //     xhr.onload = (event) => {\n    //         const data = new DataView(xhr.response);\n    //         const array =\n    //             new Float32Array(data.byteLength / Float32Array.BYTES_PER_ELEMENT);\n    //         for (let i = 0; i < array.length; ++i) {\n    //             array[i] = data.getFloat32(i * Float32Array.BYTES_PER_ELEMENT, true);\n    //         }\n    //         callback(array);\n    //     };\n    //     xhr.send();\n    // }\n\n    // loadTextureData('transmittance.dat', (data) => {\n    //\n    //     let gl = this.renderer.handler.gl;\n    //\n    //     const texture = gl.createTexture();\n    //     gl.activeTexture(gl.TEXTURE0);\n    //     gl.bindTexture(gl.TEXTURE_2D, texture);\n    //     gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    //     gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    //     gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    //     gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    //     gl.texImage2D(gl.TEXTURE_2D, 0, gl.getExtension('OES_texture_float_linear') ? gl.RGBA32F : gl.RGBA16F,\n    //         TRANSMITTANCE_TEXTURE_WIDTH, TRANSMITTANCE_TEXTURE_HEIGHT, 0, gl.RGBA,\n    //         gl.FLOAT, data);\n    //\n    //     this.transmittanceTextureBrn = texture;\n    // });\n}\n\nexport {Handler};\n","import {BaseFramebuffer, IBaseFramebufferParams} from \"./BaseFramebuffer\";\nimport {Handler} from \"./Handler\";\n\ninterface IMultisampleParams extends IBaseFramebufferParams {\n    msaa?: number;\n    internalFormat?: string;\n}\n\n/**\n * Class represents multisample framebuffer.\n * @class\n * @param {Handler} handler - WebGL handler.\n * @param {Object} [options] - Framebuffer options:\n */\nexport class Multisample extends BaseFramebuffer {\n    protected _internalFormat: string;\n\n    protected _msaa: number;\n\n    protected _glFilter: number;\n\n    public renderbuffers: WebGLRenderbuffer[];\n\n    constructor(handler: Handler, options: IMultisampleParams = {}) {\n\n        super(handler, options);\n\n        this._internalFormat = options.internalFormat ? options.internalFormat.toUpperCase() : \"RGBA8\";\n\n        this._msaa = options.msaa != undefined ? options.msaa : 4;\n\n        this._glFilter = 0;\n\n        this.renderbuffers = new Array(this._size);\n    }\n\n    public override destroy() {\n        let gl = this.handler.gl;\n\n        if (!gl) return;\n\n        for (let i = 0; i < this.renderbuffers.length; i++) {\n            gl.deleteRenderbuffer(this.renderbuffers[i]);\n        }\n        this.renderbuffers = new Array(this._size);\n\n        gl.deleteFramebuffer(this._fbo);\n        gl.deleteRenderbuffer(this._depthRenderbuffer);\n\n        this._depthRenderbuffer = null;\n        this._fbo = null;\n\n        this._active = false;\n    }\n\n    /**\n     * Framebuffer initialization.\n     * @public\n     */\n    public override init() {\n        let gl = this.handler.gl;\n\n        if (!gl) return;\n\n        this._glFilter = (gl as any)[this._filter];\n\n        this._fbo = gl.createFramebuffer();\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._fbo);\n\n        let colorAttachments = [];\n        for (let i = 0; i < this.renderbuffers.length; i++) {\n            let rb = gl.createRenderbuffer();\n            gl.bindRenderbuffer(gl.RENDERBUFFER, rb);\n\n            if (this._msaa > 0) {\n                gl.renderbufferStorageMultisample(\n                    gl.RENDERBUFFER,\n                    this._msaa,\n                    (gl as any)[this._internalFormat],\n                    this._width,\n                    this._height\n                );\n            } else {\n                gl.renderbufferStorage(\n                    gl.RENDERBUFFER,\n                    (gl as any)[this._internalFormat],\n                    this._width,\n                    this._height\n                );\n            }\n\n            gl.framebufferRenderbuffer(\n                gl.FRAMEBUFFER,\n                gl.COLOR_ATTACHMENT0 + i,\n                gl.RENDERBUFFER,\n                rb\n            );\n            colorAttachments.push(gl.COLOR_ATTACHMENT0 + i);\n            this.renderbuffers[i] = rb!;\n            gl.bindRenderbuffer(gl.RENDERBUFFER, null!);\n        }\n        gl.drawBuffers(colorAttachments);\n\n        if (this._useDepth) {\n            this._depthRenderbuffer = gl.createRenderbuffer();\n            gl.bindRenderbuffer(gl.RENDERBUFFER, this._depthRenderbuffer);\n            gl.renderbufferStorageMultisample(\n                gl.RENDERBUFFER,\n                this._msaa,\n                (gl as any)[this._depthComponent],\n                this._width,\n                this._height\n            );\n            gl.framebufferRenderbuffer(\n                gl.FRAMEBUFFER,\n                gl.DEPTH_ATTACHMENT,\n                gl.RENDERBUFFER,\n                this._depthRenderbuffer\n            );\n            gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        }\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n\n    public blitTo(framebuffer: BaseFramebuffer, attachmentIndex: number = 0) {\n        let gl = this.handler.gl!;\n\n        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this._fbo);\n        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, framebuffer._fbo);\n        gl.readBuffer(gl.COLOR_ATTACHMENT0 + attachmentIndex);\n\n        gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 1.0]);\n\n        gl.blitFramebuffer(\n            0,\n            0,\n            this._width,\n            this._height,\n            0,\n            0,\n            framebuffer._width,\n            framebuffer._height,\n            gl.COLOR_BUFFER_BIT,\n            this._glFilter\n        );\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);\n        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);\n    }\n}\n","import {input} from './input';\nimport {stamp} from \"../utils/shared\";\nimport {EventCallback, EventCallbackStamp} from \"../Events\";\n\nconst STAMP_SPACER = \"_\";\n\ninterface ICallbackHandler {\n    callback: EventCallbackStamp,\n    sender: any,\n    priority: number\n}\n\nconst _sortByPriority = function (a: ICallbackHandler, b: ICallbackHandler): number {\n    return Number(a.priority < b.priority);\n};\n\nclass KeyboardHandler {\n    protected _currentlyPressedKeys: Record<number, boolean>;\n    protected _pressedKeysCallbacks: Record<number, ICallbackHandler[]>;\n    protected _unpressedKeysCallbacks: Record<number, ICallbackHandler[]>;\n    protected _charkeysCallbacks: Record<number, ICallbackHandler[]>;\n    protected _anykeyCallback: any;\n    protected _event: KeyboardEvent | null;\n    protected _active: boolean;\n    protected _stampCache: Record<string, number>;\n\n    constructor() {\n        this._currentlyPressedKeys = {};\n        this._pressedKeysCallbacks = {};\n        this._unpressedKeysCallbacks = {};\n        this._charkeysCallbacks = {};\n        this._anykeyCallback = null;\n        this._event = null;\n        this._active = true;\n        this._stampCache = {};\n\n        document.onkeydown = (event: KeyboardEvent) => {\n            this._event = event;\n            this._active && this.handleKeyDown();\n        };\n\n        document.onkeyup = (event: KeyboardEvent) => {\n            this._event = event;\n            this._active && this.handleKeyUp();\n        };\n    }\n\n    public getcurrentlyPressedKeys(): Record<number, boolean> {\n        return this._currentlyPressedKeys;\n    }\n\n    public getPressedKeysCallbacks() {\n        return this._pressedKeysCallbacks;\n    }\n\n    public getUnpressedKeysCallbacks() {\n        return this._unpressedKeysCallbacks;\n    }\n\n    public getCharkeysCallbacks() {\n        return this._charkeysCallbacks;\n    }\n\n    public removeEvent(event: string, keyCode: number, callback: EventCallback) {\n        let st = this._getStamp(event, keyCode, (callback as EventCallbackStamp)._openglobus_id!);\n        if ((callback as EventCallbackStamp)._openglobus_id && this._stampCache[st]) {\n            //this._stampCache[st] = null;\n            delete this._stampCache[st];\n\n            if (event === \"keypress\") {\n                this._removeCallback(this._pressedKeysCallbacks[keyCode], callback);\n            } else if (event === \"keyfree\") {\n                this._removeCallback(this._unpressedKeysCallbacks[keyCode], callback);\n            } else if (event === \"charkeypress\") {\n                this._removeCallback(this._charkeysCallbacks[keyCode], callback);\n            }\n        }\n    }\n\n    protected _removeCallback(handlers: ICallbackHandler[], callback: EventCallbackStamp) {\n        for (let i = 0; i < handlers.length; i++) {\n            if (handlers[i].callback._openglobus_id === callback._openglobus_id) {\n                handlers.splice(i, 1);\n            }\n        }\n    }\n\n    protected _getStamp(name: string, keyCode: number, ogid: number) {\n        return `${name}${STAMP_SPACER}${keyCode}${STAMP_SPACER}${ogid}`;\n    }\n\n    protected _stamp(name: string, keyCode: number, obj: any) {\n        const ogid = stamp(obj);\n        const st = this._getStamp(name, keyCode, ogid);\n        if (!this._stampCache[st]) {\n            this._stampCache[st] = ogid;\n            return true;\n        }\n        return false;\n    }\n\n    public setActivity(activity: boolean) {\n        this._active = activity;\n    }\n\n    public releaseKeys() {\n        this._currentlyPressedKeys = {};\n    }\n\n    public addEvent(event: string, keyCode: number, callback: EventCallback, sender?: any, priority?: number) {\n\n        // Event is already bound with the callback\n        if (!this._stamp(event, keyCode, callback)) return;\n\n        if (priority === undefined) {\n            priority = 1600;\n        }\n        switch (event) {\n            case \"keyfree\":\n                if (!this._unpressedKeysCallbacks[keyCode]) {\n                    this._unpressedKeysCallbacks[keyCode] = [];\n                }\n                this._unpressedKeysCallbacks[keyCode].push({callback: callback, sender: sender, priority: priority});\n                this._unpressedKeysCallbacks[keyCode].sort(_sortByPriority);\n                break;\n\n            case \"keypress\":\n                if (keyCode == null) {\n                    this._anykeyCallback = {callback: callback, sender: sender || this};\n                } else {\n                    if (!this._pressedKeysCallbacks[keyCode]) {\n                        this._pressedKeysCallbacks[keyCode] = [];\n                    }\n                    this._pressedKeysCallbacks[keyCode].push({callback: callback, sender: sender, priority: priority});\n                    this._pressedKeysCallbacks[keyCode].sort(_sortByPriority);\n                }\n                break;\n\n            case \"charkeypress\":\n                if (!this._charkeysCallbacks[keyCode]) {\n                    this._charkeysCallbacks[keyCode] = [];\n                }\n                this._charkeysCallbacks[keyCode].push({callback: callback, sender: sender, priority: priority});\n                this._charkeysCallbacks[keyCode].sort(_sortByPriority);\n                break;\n        }\n    }\n\n    public isKeyPressed(keyCode: number) {\n        return this._currentlyPressedKeys[keyCode];\n    }\n\n    public handleKeyDown() {\n        // If you want to get a key code just uncomment and check console\n        //console.log(this._event!.keyCode);\n        this._anykeyCallback && this._anykeyCallback.callback.call(this._anykeyCallback.sender, this._event);\n        this._currentlyPressedKeys[this._event!.keyCode] = true;\n        for (let ch in this._charkeysCallbacks) {\n            if (String.fromCharCode(this._event!.keyCode) === String.fromCharCode(Number(ch))) {\n                let ccl = this._charkeysCallbacks[ch];\n                for (let i = 0; i < ccl.length; i++) {\n                    (ccl[i].callback as Function).call(ccl[i].sender, this._event);\n                }\n            }\n        }\n\n        if (this._event!.keyCode == input.KEY_ALT || this._event!.keyCode == input.KEY_SHIFT) {\n            this._event!.preventDefault();\n        }\n    }\n\n    public handleKeyUp() {\n        if (this._currentlyPressedKeys[this._event!.keyCode] || this._event!.keyCode === input.KEY_PRINTSCREEN) {\n            for (let pk in this._unpressedKeysCallbacks) {\n                if (this._currentlyPressedKeys[pk] || this._event!.keyCode === input.KEY_PRINTSCREEN && Number(pk) === input.KEY_PRINTSCREEN) {\n                    let cpk = this._unpressedKeysCallbacks[pk];\n                    for (let i = 0; i < cpk.length; i++) {\n                        (cpk[i].callback as Function).call(cpk[i].sender, this._event);\n                    }\n                }\n            }\n        }\n        this._currentlyPressedKeys[this._event!.keyCode] = false;\n    }\n\n    public handleEvents() {\n        for (let pk in this._pressedKeysCallbacks) {\n            if (this._currentlyPressedKeys[pk]) {\n                let cpk = this._pressedKeysCallbacks[pk];\n                for (let i = 0; i < cpk.length; i++) {\n                    (cpk[i].callback as Function).call(cpk[i].sender, this._event);\n                }\n            }\n        }\n    }\n}\n\nexport {KeyboardHandler};\n","export type MouseEventExt = MouseEvent & { wheelDelta?: number; deltaY?: number };\n\nexport interface MouseHandlerEvent {\n    button?: number;\n    clientX: number;\n    clientY: number;\n}\n\ntype MouseHandlerEventCallback = (sys: MouseEvent, event?: MouseHandlerEvent) => void;\n\nclass MouseHandler {\n\n    protected _htmlObject: HTMLElement;\n\n    constructor(htmlObject: HTMLElement) {\n        this._htmlObject = htmlObject;\n    }\n\n    public setEvent(event: string, sender: any, callback: MouseHandlerEventCallback) {\n        switch (event) {\n            case \"mousewheel\":\n                // this._htmlObject.addEventListener('mousewheel', function (event: WheelEventExt) {\n                //     let delta = event.deltaY || event.detail || event.wheelDelta || 0;\n                //     if (event.wheelDelta == undefined) {\n                //         event.wheelDelta = delta * (-120);\n                //     }\n                //     callback.call(sender, event);\n                //     event.preventDefault();\n                // }, false);\n\n                this._htmlObject.addEventListener('wheel', function (event: MouseEventExt) {\n                    let delta = event.deltaY || event.detail || event.wheelDelta || 0;\n\n                    if (event.wheelDelta == undefined) {\n                        event.wheelDelta = delta * (-120);\n                    }\n                    callback.call(sender, event);\n                    event.preventDefault();\n                }, false);\n                break;\n\n            case \"mousedown\":\n                this._htmlObject.addEventListener('mousedown', function (event: MouseEventExt) {\n                    let rect = this.getBoundingClientRect();\n                    callback.call(sender, event, {\n                        button: event.button,\n                        clientX: event.clientX - rect.left,\n                        clientY: event.clientY - rect.top\n                    });\n                });\n                this._htmlObject.addEventListener('contextmenu', function (event: MouseEventExt) {\n                    event.preventDefault();\n                    return false;\n                });\n                break;\n\n            case \"mouseup\":\n                this._htmlObject.addEventListener('mouseup', function (event: MouseEventExt) {\n                    let rect = this.getBoundingClientRect();\n                    callback.call(sender, event, {\n                        button: event.button,\n                        clientX: event.clientX - rect.left,\n                        clientY: event.clientY - rect.top\n                    });\n                });\n                break;\n\n            case \"mousemove\":\n                this._htmlObject.addEventListener('mousemove', function (event: MouseEventExt) {\n                    let rect = this.getBoundingClientRect();\n                    callback.call(sender, event, {\n                        clientX: event.clientX - rect.left,\n                        clientY: event.clientY - rect.top\n                    });\n                });\n                break;\n\n            case \"mouseleave\":\n                this._htmlObject.addEventListener('mouseleave', function (event: MouseEventExt) {\n                    callback.call(sender, event);\n                });\n                break;\n\n            case \"mouseout\":\n                this._htmlObject.addEventListener('mouseout', function (event: MouseEventExt) {\n                    callback.call(sender, event);\n                });\n                break;\n\n            case \"mouseover\":\n                this._htmlObject.addEventListener('mouseover', function (event: MouseEventExt) {\n                    callback.call(sender, event);\n                });\n                break;\n\n            case \"mouseenter\":\n                this._htmlObject.addEventListener('mouseenter', function (event: MouseEventExt) {\n                    callback.call(sender, event);\n                });\n                break;\n        }\n    }\n}\n\nexport {MouseHandler};\n","export type TouchEventExt = TouchEvent & { offsetLeft: number; offsetTop: number };\ntype TouchHandlerEventCallback = (sys: TouchEventExt) => void;\n\nclass TouchHandler {\n\n    protected _htmlObject: HTMLElement;\n\n    constructor(htmlObject: HTMLElement) {\n        this._htmlObject = htmlObject;\n    }\n\n    public setEvent(event: string, sender: any, callback: TouchHandlerEventCallback) {\n        switch (event) {\n            case \"touchcancel\":\n                this._htmlObject.addEventListener('touchcancel', function (event: TouchEvent) {\n                    event.preventDefault();\n                    const rect = this.getBoundingClientRect();\n                    const eventExt: TouchEventExt = Object.assign(event, { offsetLeft: rect.left, offsetTop: rect.top });\n                    callback.call(sender, eventExt);\n                });\n                break;\n\n            case \"touchstart\":\n                this._htmlObject.addEventListener('touchstart', function (event: TouchEvent) {\n                    event.preventDefault();\n                    const rect = this.getBoundingClientRect();\n                    const eventExt: TouchEventExt = Object.assign(event, { offsetLeft: rect.left, offsetTop: rect.top });\n                    callback.call(sender, eventExt);\n                });\n                break;\n\n            case \"touchend\":\n                this._htmlObject.addEventListener('touchend', function (event: TouchEvent) {\n                    event.preventDefault();\n                    const rect = this.getBoundingClientRect();\n                    const eventExt: TouchEventExt = Object.assign(event, { offsetLeft: rect.left, offsetTop: rect.top });\n                    callback.call(sender, eventExt);\n                });\n                break;\n\n            case \"touchmove\":\n                this._htmlObject.addEventListener('touchmove', function (event: TouchEvent) {\n                    event.preventDefault();\n                    const rect = this.getBoundingClientRect();\n                    const eventExt: TouchEventExt = Object.assign(event, { offsetLeft: rect.left, offsetTop: rect.top });\n                    callback.call(sender, eventExt);\n                });\n                break;\n        }\n    }\n}\n\nexport {TouchHandler};\n\n","import {Events, EventsHandler, EventCallback} from \"../Events\";\nimport {input} from \"../input/input\";\nimport {KeyboardHandler} from \"../input/KeyboardHandler\";\nimport {MouseHandler, MouseHandlerEvent, MouseEventExt} from \"../input/MouseHandler\";\nimport {Renderer} from \"./Renderer\";\nimport {TouchEventExt, TouchHandler} from \"../input/TouchHandler\";\nimport {Vec2} from \"../math/Vec2\";\nimport {NumberArray3, Vec3} from \"../math/Vec3\";\n\nexport type RendererEventsHandler = RendererEvents & EventsHandler<RendererEventsType>;\n\nexport function createRendererEvents(renderer: Renderer) {\n    return new RendererEvents(renderer);\n}\n\nexport type RendererEventsType = [\n    \"draw\",\n    \"drawtransparent\",\n    \"postdraw\",\n    \"resize\",\n    \"resizeend\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"mousemove\",\n    \"mousestop\",\n    \"lclick\",\n    \"rclick\",\n    \"mclick\",\n    \"ldblclick\",\n    \"rdblclick\",\n    \"mdblclick\",\n    \"lup\",\n    \"rup\",\n    \"mup\",\n    \"ldown\",\n    \"rdown\",\n    \"mdown\",\n    \"lhold\",\n    \"rhold\",\n    \"mhold\",\n    \"mousewheel\",\n    \"touchstart\",\n    \"touchend\",\n    \"touchcancel\",\n    \"touchmove\",\n    \"doubletouch\",\n    \"touchleave\",\n    \"touchenter\"\n];\n\nexport interface IBaseInputState {\n    /** Current screen mouse X position. */\n    clientX: number;\n    /** Current screen mouse Y position. */\n    clientY: number;\n    /** Current screen mouse position. */\n    pos: Vec2;\n    /** Current touch X - coordinate. */\n    x: number;\n    /** Current touch Y - coordinate. */\n    y: number;\n    /** Current touch X - coordinate from 0 to 1 */\n    nx: number;\n    /** Current touch Y - coordinate from 0 to 1 */\n    ny: number;\n    /** Previous touch X coordinate. */\n    prev_x: number;\n    /** Previous touch Y coordinate. */\n    prev_y: number,\n    /** Screen touch position world direction. */\n    direction: Vec3;\n    /** Current touched(picking) object. */\n    pickingObject: any | null;\n    /** Renderer instance. */\n    renderer: Renderer;\n    /** Touching is moving now. */\n    moving: boolean;\n}\n\nexport interface IMouseState extends IBaseInputState {\n    /** Left mouse button has stopped pushing down right now.*/\n    leftButtonUp: boolean;\n    /** Right mouse button has stopped pushing down right now.*/\n    rightButtonUp: boolean;\n    /** Middle mouse button has stopped pushing down right now.*/\n    middleButtonUp: boolean;\n    /** Left mouse button has pushed now.*/\n    leftButtonDown: boolean;\n    /** Right mouse button has pushed now.*/\n    rightButtonDown: boolean;\n    /** Middle mouse button has pushed now.*/\n    middleButtonDown: boolean;\n    /** Left mouse button is pushing.*/\n    leftButtonHold: boolean;\n    /** Right mouse button is pushing.*/\n    rightButtonHold: boolean;\n    /** Middle mouse button is pushing.*/\n    middleButtonHold: boolean;\n    /** Left mouse button has clicked twice now.*/\n    leftButtonDoubleClick: boolean;\n    /** Right mouse button has clicked twice now.*/\n    rightButtonDoubleClick: boolean;\n    /** Middle mouse button has clicked twice now.*/\n    middleButtonDoubleClick: boolean;\n    /** Left mouse button has clicked now. */\n    leftButtonClick: boolean;\n    /** Right mouse button has clicked now. */\n    rightButtonClick: boolean;\n    /** Middle mouse button has clicked now. */\n    middleButtonClick: boolean;\n    /** Mouse has just stopped now. */\n    justStopped: boolean;\n    /** Mose double click delay response time.*/\n    doubleClickDelay: number;\n    /** Mose click delay response time.*/\n    clickDelay: number;\n    /** Mouse wheel. */\n    wheelDelta: number;\n    /** JavaScript mouse system event message. */\n    sys: MouseEvent | null;\n}\n\nexport interface ITouchState extends IBaseInputState {\n    /** Touch has ended right now.*/\n    touchEnd: boolean;\n    /** Touch has started right now.*/\n    touchStart: boolean;\n    /** Touch canceled.*/\n    touchCancel: boolean;\n    /** Touched twice.*/\n    doubleTouch: boolean;\n    /** Double touching responce delay.*/\n    doubleTouchDelay: number;\n    /** Double touching responce radius in screen pixels.*/\n    doubleTouchRadius: number;\n    /** JavaScript mouse system event message. */\n    sys: TouchEventExt | null;\n}\n\nconst LB_M = 0b0001;\nconst RB_M = 0b0010;\nconst MB_M = 0b0100;\n\nconst ISBLACK = (c: NumberArray3 | Uint8Array): boolean => !(c[0] || c[1] || c[2]);\nconst NOTBLACK = (c: NumberArray3 | Uint8Array): boolean => !!(c[0] || c[1] || c[2]);\n\n/**\n * Stores current picking rgb color.\n * @type {Array.<number>} - (exactly 3 entries)\n */\nlet _currPickingColor = new Uint8Array(4);\nlet _tempCurrPickingColor = new Uint8Array(4);\n\n/**\n * Stores previous picked rgb color.\n * @type {Array.<number>} - (exactly 3 entries)\n */\nlet _prevPickingColor = new Uint8Array(4);\n\n/**\n * Renderer events handler.\n * @class\n * @param {Renderer} renderer - Renderer object, events that works for.\n */\nclass RendererEvents extends Events<RendererEventsType> implements RendererEventsHandler {\n    /**\n     * Assigned renderer.\n     * @public\n     * @type {Renderer}\n     */\n    public renderer: Renderer;\n\n    /**\n     * Low level touch events handler.\n     * @protected\n     * @type {TouchHandler}\n     */\n    protected _touchHandler: TouchHandler;\n\n    /**\n     * Low level mouse events handler.\n     * @protected\n     * @type {MouseHandler}\n     */\n    protected _mouseHandler: MouseHandler;\n\n    /**\n     * Low level keyboard events handler.\n     * @protected\n     * @type {KeyboardHandler}\n     */\n    protected _keyboardHandler: KeyboardHandler;\n\n    protected _active: boolean;\n\n    public clickRadius: number;\n\n    /**\n     * Current mouse state.\n     * @public\n     * @type {IMouseState}\n     */\n    public mouseState: IMouseState;\n\n    /**\n     * Current touch state.\n     * @public\n     * @type {ITouchState}\n     */\n    public touchState: ITouchState;\n\n    protected _dblTchCoords: Vec2;\n    protected _oneTouchStart: boolean;\n    protected _dblTchBegins: number;\n    protected _mousestopThread: any | null;\n    protected _ldblClkBegins: number;\n    protected _rdblClkBegins: number;\n    protected _mdblClkBegins: number;\n    protected _lClkBegins: number;\n    protected _rClkBegins: number;\n    protected _mClkBegins: number;\n    protected _lclickX: number;\n    protected _lclickY: number;\n    protected _rclickX: number;\n    protected _rclickY: number;\n    protected _mclickX: number;\n    protected _mclickY: number;\n\n    protected _isMouseInside: boolean;\n    protected _entityPickingEventsActive: boolean;\n\n    constructor(renderer: Renderer) {\n\n        super(RENDERER_EVENTS);\n\n        this.renderer = renderer;\n\n        this._touchHandler = new TouchHandler(renderer.handler.canvas!);\n\n        this._mouseHandler = new MouseHandler(renderer.handler.canvas!);\n\n        this._keyboardHandler = new KeyboardHandler();\n\n        this._active = true;\n\n        this.clickRadius = 15;\n\n        this.mouseState = {\n            clientX: 0,\n            clientY: 0,\n            pos: new Vec2(),\n            x: 0,\n            y: 0,\n            nx: 0,\n            ny: 0,\n            prev_x: 0,\n            prev_y: 0,\n            direction: new Vec3(),\n            leftButtonUp: false,\n            rightButtonUp: false,\n            middleButtonUp: false,\n            leftButtonDown: false,\n            rightButtonDown: false,\n            middleButtonDown: false,\n            leftButtonHold: false,\n            rightButtonHold: false,\n            middleButtonHold: false,\n            leftButtonDoubleClick: false,\n            rightButtonDoubleClick: false,\n            middleButtonDoubleClick: false,\n            leftButtonClick: false,\n            rightButtonClick: false,\n            middleButtonClick: false,\n            moving: false,\n            justStopped: false,\n            doubleClickDelay: 500,\n            clickDelay: 200,\n            wheelDelta: 0,\n            sys: null,\n            pickingObject: null,\n            renderer: renderer\n        };\n\n        this.touchState = {\n            moving: false,\n            touchEnd: false,\n            touchStart: false,\n            touchCancel: false,\n            doubleTouch: false,\n            doubleTouchDelay: 550,\n            doubleTouchRadius: 10,\n            clientX: 0,\n            clientY: 0,\n            pos: new Vec2(),\n            x: 0,\n            y: 0,\n            nx: 0,\n            ny: 0,\n            prev_x: 0,\n            prev_y: 0,\n            direction: new Vec3(),\n            sys: null,\n            pickingObject: null,\n            renderer: renderer\n        };\n\n        this._isMouseInside = false;\n        this._entityPickingEventsActive = true;\n\n        this._dblTchCoords = new Vec2();\n        this._oneTouchStart = false;\n        this._dblTchBegins = 0;\n        this._mousestopThread = null;\n        this._ldblClkBegins = 0;\n        this._rdblClkBegins = 0;\n        this._mdblClkBegins = 0;\n        this._lClkBegins = 0;\n        this._rClkBegins = 0;\n        this._mClkBegins = 0;\n        this._lclickX = 0;\n        this._lclickY = 0;\n        this._rclickX = 0;\n        this._rclickY = 0;\n        this._mclickX = 0;\n        this._mclickY = 0;\n    }\n\n    public pointerEvent(): boolean {\n        let ms = this.mouseState,\n            ts = this.touchState;\n        return (\n            ms.moving ||\n            ms.justStopped ||\n            ts.moving ||\n            ts.touchStart ||\n            ts.touchEnd ||\n            ms.wheelDelta !== 0\n        )\n    }\n\n    public get active(): boolean {\n        return this._active;\n    }\n\n    public set active(isActive: boolean) {\n        this._active = isActive;\n        this._keyboardHandler.setActivity(isActive);\n    }\n\n    /**\n     * Used in render node frame.\n     * @public\n     */\n    public handleEvents() {\n        if (this._active) {\n            this.mouseState.direction = this.renderer.activeCamera!.unproject(\n                this.mouseState.x,\n                this.mouseState.y\n            );\n            //\n            // TODO: Replace in some other place with a thought that we do\n            // not need to make unproject when we do not make touching\n            this.touchState.direction = this.renderer.activeCamera!.unproject(\n                this.touchState.x,\n                this.touchState.y\n            );\n\n            this._keyboardHandler.handleEvents();\n            this.handleMouseEvents();\n            this.handleTouchEvents();\n            this.entityPickingEvents();\n        }\n    }\n\n    public override on(name: string, p0: EventCallback | number, p1?: number | EventCallback, p2?: any, keyPriority?: number) {\n        if (name === \"keypress\" || name === \"charkeypress\" || name === \"keyfree\") {\n            this._keyboardHandler.addEvent(name, p0 as number, p1 as EventCallback, p2, keyPriority);\n        } else {\n            super.on(name, p0 as EventCallback, p1, p2);\n        }\n    }\n\n    public override off(name: string, p1?: EventCallback | number | null, p2?: EventCallback) {\n        if (name === \"keypress\" || name === \"charkeypress\" || name === \"keyfree\") {\n            this._keyboardHandler.removeEvent(name, p1 as number, p2 as EventCallback);\n        } else {\n            super.off(name, p1 as EventCallback);\n        }\n    }\n\n    /**\n     * Check key is pressed.\n     * @public\n     * @param {number} keyCode - Key code\n     * @return {boolean}\n     */\n    public isKeyPressed(keyCode: number): boolean {\n        return this._keyboardHandler.isKeyPressed(keyCode);\n    }\n\n    public releaseKeys() {\n        this._keyboardHandler.releaseKeys();\n    }\n\n    /**\n     * Renderer events initialization.\n     * @public\n     */\n    public initialize() {\n        this._mouseHandler.setEvent(\"mouseup\", this, this.onMouseUp);\n        this._mouseHandler.setEvent(\"mousemove\", this, this.onMouseMove);\n        this._mouseHandler.setEvent(\"mousedown\", this, this.onMouseDown);\n        this._mouseHandler.setEvent(\"mousewheel\", this, this.onMouseWheel);\n        this._mouseHandler.setEvent(\"mouseleave\", this, this.onMouseLeave);\n        this._mouseHandler.setEvent(\"mouseenter\", this, this.onMouseEnter);\n\n        this._touchHandler.setEvent(\"touchstart\", this, this.onTouchStart);\n        this._touchHandler.setEvent(\"touchend\", this, this.onTouchEnd);\n        this._touchHandler.setEvent(\"touchcancel\", this, this.onTouchCancel);\n        this._touchHandler.setEvent(\"touchmove\", this, this.onTouchMove);\n    }\n\n    /**\n     * @protected\n     */\n    protected onMouseWheel(event: MouseEventExt) {\n        this.mouseState.sys = event;\n        this.mouseState.wheelDelta = event.wheelDelta || 0;\n    }\n\n    public updateButtonsStates(buttons: number) {\n        let ms = this.mouseState;\n        if ((buttons & LB_M) && ms.leftButtonDown) {\n            ms.leftButtonDown = true;\n        } else {\n            ms.leftButtonHold = false;\n            ms.leftButtonDown = false;\n        }\n\n        if ((buttons & RB_M) && ms.rightButtonDown) {\n            ms.rightButtonDown = true;\n        } else {\n            ms.rightButtonHold = false;\n            ms.rightButtonDown = false;\n        }\n\n        if ((buttons & MB_M) && ms.middleButtonDown) {\n            ms.middleButtonDown = true;\n        } else {\n            ms.middleButtonHold = false;\n            ms.middleButtonDown = false;\n        }\n    }\n\n    protected onMouseMove(sys: MouseEvent, event?: MouseHandlerEvent) {\n\n        let ms = this.mouseState;\n        this.updateButtonsStates(sys.buttons);\n        ms.sys = sys;\n\n        let ex = event!.clientX,\n            ey = event!.clientY,\n            r = this.clickRadius;\n\n        if (Math.abs(this._lclickX - ex) >= r && Math.abs(this._lclickY - ey) >= r) {\n            this._ldblClkBegins = 0;\n            this._lClkBegins = 0;\n        }\n\n        if (Math.abs(this._rclickX - ex) >= r && Math.abs(this._rclickY - ey) >= r) {\n            this._rdblClkBegins = 0;\n            this._rClkBegins = 0;\n        }\n\n        if (Math.abs(this._mclickX - ex) >= r && Math.abs(this._mclickY - ey) >= r) {\n            this._mdblClkBegins = 0;\n            this._mClkBegins = 0;\n        }\n\n        if (ms.clientX === event!.clientX && ms.clientY === event!.clientY) {\n            return;\n        }\n\n        ms.clientX = event!.clientX;\n        ms.clientY = event!.clientY;\n\n        let h = this.renderer.handler;\n\n        ms.pos.x = ms.x = event!.clientX * h.pixelRatio;\n        ms.pos.y = ms.y = event!.clientY * h.pixelRatio;\n\n        ms.nx = ms.x / h.canvas!.width;\n        ms.ny = ms.y / h.canvas!.height;\n\n        ms.moving = true;\n\n        //dispatch stop mouse event\n        clearTimeout(this._mousestopThread);\n        this._mousestopThread = setTimeout(function () {\n            ms.justStopped = true;\n        }, 100);\n    }\n\n    protected onMouseLeave(sys: MouseEvent) {\n        this._isMouseInside = false;\n        this.mouseState.sys = sys;\n        this.dispatch((this as RendererEventsHandler).mouseleave, this.mouseState);\n    }\n\n    protected onMouseEnter(sys: MouseEvent) {\n        this._isMouseInside = true;\n        this.mouseState.sys = sys;\n        this.dispatch((this as RendererEventsHandler).mouseenter, this.mouseState);\n    }\n\n    protected onMouseDown(sys: MouseEvent, event?: MouseHandlerEvent) {\n        if (event!.button === input.MB_LEFT) {\n            this._lClkBegins = window.performance.now();\n            this._lclickX = event!.clientX;\n            this._lclickY = event!.clientY;\n            this.mouseState.sys = sys;\n            this.mouseState.leftButtonDown = true;\n        } else if (event!.button === input.MB_RIGHT) {\n            this._rClkBegins = window.performance.now();\n            this._rclickX = event!.clientX;\n            this._rclickY = event!.clientY;\n            this.mouseState.sys = sys;\n            this.mouseState.rightButtonDown = true;\n        } else if (event!.button === input.MB_MIDDLE) {\n            this._mClkBegins = window.performance.now();\n            this._mclickX = event!.clientX;\n            this._mclickY = event!.clientY;\n            this.mouseState.sys = sys;\n            this.mouseState.middleButtonDown = true;\n        }\n    }\n\n    protected onMouseUp(sys: MouseEvent, event?: MouseHandlerEvent) {\n        let ms = this.mouseState;\n        ms.sys = sys;\n        let t = window.performance.now();\n\n        if (event!.button === input.MB_LEFT) {\n            ms.leftButtonDown = false;\n            ms.leftButtonUp = true;\n\n            if (\n                Math.abs(this._lclickX - event!.clientX) < this.clickRadius &&\n                Math.abs(this._lclickY - event!.clientY) < this.clickRadius &&\n                t - this._lClkBegins <= ms.clickDelay\n            ) {\n                if (this._ldblClkBegins) {\n                    let deltatime = window.performance.now() - this._ldblClkBegins;\n                    if (deltatime <= ms.doubleClickDelay) {\n                        ms.leftButtonDoubleClick = true;\n                    }\n                    this._ldblClkBegins = 0;\n                } else {\n                    this._ldblClkBegins = window.performance.now();\n                }\n\n                ms.leftButtonClick = true;\n                this._lClkBegins = 0;\n            }\n        } else if (event!.button === input.MB_RIGHT) {\n            ms.rightButtonDown = false;\n            ms.rightButtonUp = true;\n\n            if (\n                Math.abs(this._rclickX - event!.clientX) < this.clickRadius &&\n                Math.abs(this._rclickY - event!.clientY) < this.clickRadius &&\n                t - this._rClkBegins <= ms.clickDelay\n            ) {\n                if (this._rdblClkBegins) {\n                    let deltatime = window.performance.now() - this._rdblClkBegins;\n                    if (deltatime <= ms.doubleClickDelay) {\n                        ms.rightButtonDoubleClick = true;\n                    }\n                    this._rdblClkBegins = 0;\n                } else {\n                    this._rdblClkBegins = window.performance.now();\n                }\n\n                ms.rightButtonClick = true;\n                this._rClkBegins = 0;\n            }\n        } else if (event!.button === input.MB_MIDDLE) {\n            ms.middleButtonDown = false;\n            ms.middleButtonUp = true;\n\n            if (\n                Math.abs(this._mclickX - event!.clientX) < this.clickRadius &&\n                Math.abs(this._mclickY - event!.clientY) < this.clickRadius &&\n                t - this._mClkBegins <= ms.clickDelay\n            ) {\n                if (this._mdblClkBegins) {\n                    let deltatime = window.performance.now() - this._mdblClkBegins;\n                    if (deltatime <= ms.doubleClickDelay) {\n                        ms.middleButtonDoubleClick = true;\n                    }\n                    this._mdblClkBegins = 0;\n                } else {\n                    this._mdblClkBegins = window.performance.now();\n                }\n\n                ms.middleButtonClick = true;\n                this._mClkBegins = 0;\n            }\n        }\n    }\n\n    protected onTouchStart(event: TouchEventExt) {\n        let ts = this.touchState;\n        ts.sys = event;\n\n        ts.clientX = event.touches.item(0)!.clientX - event.offsetLeft;\n        ts.clientY = event.touches.item(0)!.clientY - event.offsetTop;\n\n        let h = this.renderer.handler;\n\n        ts.pos.x = ts.x = ts.clientX * h.pixelRatio;\n        ts.pos.y = ts.y = ts.clientY * h.pixelRatio;\n\n        ts.nx = ts.x / h.canvas!.width;\n        ts.ny = ts.y / h.canvas!.height;\n        ts.prev_x = ts.x;\n        ts.prev_y = ts.y;\n        ts.touchStart = true;\n\n        if (event.touches.length === 1) {\n            this._dblTchCoords.x = ts.x;\n            this._dblTchCoords.y = ts.y;\n            this._oneTouchStart = true;\n        } else {\n            this._oneTouchStart = false;\n        }\n    }\n\n    /**\n     * @protected\n     */\n    protected onTouchEnd(event: TouchEventExt) {\n        let ts = this.touchState;\n        ts.sys = event;\n        ts.touchEnd = true;\n\n        if (event.touches.length === 0) {\n            ts.prev_x = ts.x;\n            ts.prev_y = ts.y;\n\n            if (this._oneTouchStart) {\n                if (this._dblTchBegins) {\n                    let deltatime = window.performance.now() - this._dblTchBegins;\n                    if (deltatime <= ts.doubleTouchDelay) {\n                        ts.doubleTouch = true;\n                    }\n                    this._dblTchBegins = 0;\n                }\n                this._dblTchBegins = window.performance.now();\n                this._oneTouchStart = false;\n            }\n        }\n    }\n\n    protected onTouchCancel(event: TouchEventExt) {\n        let ts = this.touchState;\n        ts.sys = event;\n        ts.touchCancel = true;\n    }\n\n    protected onTouchMove(event: TouchEventExt) {\n        let ts = this.touchState;\n\n        ts.clientX = event.touches.item(0)!.clientX - event.offsetLeft;\n        ts.clientY = event.touches.item(0)!.clientY - event.offsetTop;\n\n        let h = this.renderer.handler;\n\n        ts.x = ts.clientX * h.pixelRatio;\n        ts.y = ts.clientY * h.pixelRatio;\n\n        ts.nx = ts.x / h.canvas!.width;\n        ts.ny = ts.y / h.canvas!.height;\n\n        ts.sys = event;\n        ts.moving = true;\n\n        let dX = ts.x - ts.prev_x\n        let dY = ts.y - ts.prev_y\n        if (Math.abs(dX) > 9 || Math.abs(dY) > 9) {\n            this._dblTchBegins = 0;\n            this._oneTouchStart = false;\n        }\n    }\n\n    protected entityPickingEvents() {\n        let ts = this.touchState,\n            ms = this.mouseState;\n\n        // Triggers mouseleave when mouse goes outside the viewport\n        if (this._isMouseInside !== this._entityPickingEventsActive) {\n            this._entityPickingEventsActive = this._isMouseInside;\n            if (!this._entityPickingEventsActive) {\n                let r = this.renderer;\n                let c = _currPickingColor;\n                let co = r.getPickingObjectArr<any>(c);\n                if (co) {\n                    let pe = co.rendererEvents;\n                    ms.pickingObject = co;\n                    pe && pe.dispatch(pe.mouseleave, ms);\n                    ts.pickingObject = co;\n                    pe && pe.dispatch(pe.touchleave, ts);\n                }\n                _currPickingColor[0] = _currPickingColor[1] = _currPickingColor[2] = _currPickingColor[3] =\n                    _prevPickingColor[0] = _prevPickingColor[1] = _prevPickingColor[2] = _prevPickingColor[3] =\n                        _tempCurrPickingColor[0] = _tempCurrPickingColor[1] = _tempCurrPickingColor[2] = _tempCurrPickingColor[3] = 0.0;\n            }\n        }\n\n        if (this._isMouseInside && !(ms.leftButtonHold || ms.rightButtonHold || ms.middleButtonHold)) {\n\n            let r = this.renderer;\n            let c = _currPickingColor,\n                p = _prevPickingColor,\n                t = _tempCurrPickingColor;\n\n            if (ts.x || ts.y) {\n                r.readPickingColor(ts.nx, 1 - ts.ny, t);\n            } else {\n                r.readPickingColor(ms.nx, 1 - ms.ny, t);\n            }\n\n            p[0] = c[0];\n            p[1] = c[1];\n            p[2] = c[2];\n\n            c[0] = t[0];\n            c[1] = t[1];\n            c[2] = t[2];\n\n            ms.pickingObject = null;\n            ts.pickingObject = null;\n\n            let co = r.getPickingObjectArr<any>(c);\n\n            ms.pickingObject = co;\n            ts.pickingObject = co;\n\n            //object is changed\n            if (c[0] !== p[0] || c[1] !== p[1] || c[2] !== p[2]) {\n\n                //current is black\n                if (ISBLACK(c)) {\n                    let po = r.getPickingObjectArr<any>(p);\n                    if (po) {\n                        let pe = po.rendererEvents;\n                        ms.pickingObject = po;\n                        pe && pe.dispatch(pe.mouseleave, ms);\n                        ts.pickingObject = po;\n                        pe && pe.dispatch(pe.touchleave, ts);\n                    }\n                } else {\n                    //current ia not black\n\n                    //previous is not black\n                    if (NOTBLACK(p)) {\n                        let po = r.getPickingObjectArr<any>(p);\n                        if (po) {\n                            let pe = po.rendererEvents;\n                            ms.pickingObject = po;\n                            pe && pe.dispatch(pe.mouseleave, ms);\n                            ts.pickingObject = po;\n                            pe && pe.dispatch(pe.touchleave, ts);\n                        }\n                    }\n\n                    if (co) {\n                        let ce = co.rendererEvents;\n                        ms.pickingObject = co;\n                        ce && ce.dispatch(ce.mouseenter, ms);\n                        ts.pickingObject = co;\n                        ce && ce.dispatch(ce.touchenter, ts);\n                    }\n                }\n            }\n        }\n    }\n\n    protected handleMouseEvents() {\n        let _this = this as RendererEventsHandler;\n        let ms = this.mouseState;\n        let po = ms.pickingObject,\n            pe = null;\n\n        if (ms.leftButtonClick) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.lclick, ms);\n            }\n            this.dispatch(_this.lclick, ms);\n            ms.leftButtonClick = false;\n        }\n\n        if (ms.rightButtonClick) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.rclick, ms);\n            }\n            this.dispatch(_this.rclick, ms);\n            ms.rightButtonClick = false;\n        }\n\n        if (ms.middleButtonClick) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.mclick, ms);\n            }\n            this.dispatch(_this.mclick, ms);\n            ms.middleButtonClick = false;\n        }\n\n        if (ms.leftButtonDown) {\n            if (ms.leftButtonHold) {\n                if (po) {\n                    pe = po.rendererEvents;\n                    pe && pe.dispatch(pe.lhold, ms);\n                }\n                this.dispatch(_this.lhold, ms);\n            } else {\n                ms.leftButtonHold = true;\n                if (po) {\n                    pe = po.rendererEvents;\n                    pe && pe.dispatch(pe.ldown, ms);\n                }\n                this.dispatch(_this.ldown, ms);\n            }\n        }\n\n        if (ms.rightButtonDown) {\n            if (ms.rightButtonHold) {\n                if (po) {\n                    pe = po.rendererEvents;\n                    pe && pe.dispatch(pe.rhold, ms);\n                }\n                this.dispatch(_this.rhold, ms);\n            } else {\n                ms.rightButtonHold = true;\n                if (po) {\n                    pe = po.rendererEvents;\n                    pe && pe.dispatch(pe.rdown, ms);\n                }\n                this.dispatch(_this.rdown, ms);\n            }\n        }\n\n        if (ms.middleButtonDown) {\n            if (ms.middleButtonHold) {\n                if (po) {\n                    pe = po.rendererEvents;\n                    pe && pe.dispatch(pe.mhold, ms);\n                }\n                this.dispatch(_this.mhold, ms);\n            } else {\n                ms.middleButtonHold = true;\n                if (po) {\n                    pe = po.rendererEvents;\n                    pe && pe.dispatch(pe.mdown, ms);\n                }\n                this.dispatch(_this.mdown, ms);\n            }\n        }\n\n        if (ms.leftButtonUp) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.lup, ms);\n            }\n            this.dispatch(_this.lup, ms);\n            ms.leftButtonUp = false;\n            ms.leftButtonHold = false;\n        }\n\n        if (ms.rightButtonUp) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.rup, ms);\n            }\n            this.dispatch(_this.rup, ms);\n            ms.rightButtonUp = false;\n            ms.rightButtonHold = false;\n        }\n\n        if (ms.middleButtonUp) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.mup, ms);\n            }\n            this.dispatch(_this.mup, ms);\n            ms.middleButtonUp = false;\n            ms.middleButtonHold = false;\n        }\n\n        if (ms.leftButtonDoubleClick) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.ldblclick, ms);\n            }\n            this.dispatch(_this.ldblclick, ms);\n            ms.leftButtonDoubleClick = false;\n        }\n\n        if (ms.rightButtonDoubleClick) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.rdblclick, ms);\n            }\n            this.dispatch(_this.rdblclick, ms);\n            ms.rightButtonDoubleClick = false;\n        }\n\n        if (ms.middleButtonDoubleClick) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.mdblclick, ms);\n            }\n            this.dispatch(_this.mdblclick, ms);\n            ms.middleButtonDoubleClick = false;\n        }\n\n        if (ms.wheelDelta) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.mousewheel, ms);\n            }\n            this.dispatch(_this.mousewheel, ms);\n        }\n\n        if (ms.moving) {\n            if (po) {\n                pe = po.rendererEvents;\n                pe && pe.dispatch(pe.mousemove, ms);\n            }\n            this.dispatch(_this.mousemove, ms);\n            ms.prev_x = ms.x;\n            ms.prev_y = ms.y;\n        }\n\n        if (ms.justStopped) {\n            this.dispatch(_this.mousestop, ms);\n        }\n    }\n\n    /**\n     * @protected\n     */\n    protected handleTouchEvents() {\n        let _this = this as RendererEventsHandler;\n\n        let ts = this.touchState;\n\n        let tpo = ts.pickingObject,\n            tpe = null;\n\n        if (ts.touchCancel) {\n            this.dispatch(_this.touchcancel, ts);\n            ts.touchCancel = false;\n        }\n\n        if (ts.touchStart) {\n            let r = this.renderer;\n\n            r.readPickingColor(ts.nx, 1 - ts.ny, _currPickingColor);\n\n            let co = r.getPickingObjectArr<any>(_currPickingColor);\n            tpo = ts.pickingObject = co;\n            if (tpo) {\n                tpe = tpo.rendererEvents;\n                tpe && tpe.dispatch(tpe.touchstart, ts);\n            }\n            this.dispatch(_this.touchstart, ts);\n            ts.touchStart = false;\n        }\n\n        if (ts.doubleTouch) {\n            if (tpo) {\n                tpe = tpo.rendererEvents;\n                tpe && tpe.dispatch(tpe.doubletouch, ts);\n            }\n            this.dispatch(_this.doubletouch, ts);\n            ts.doubleTouch = false;\n        }\n\n        if (ts.touchEnd) {\n            if (tpo) {\n                tpe = tpo.rendererEvents;\n                tpe && tpe.dispatch(tpe.touchend, ts);\n            }\n            this.dispatch(_this.touchend, ts);\n            ts.x = 0;\n            ts.y = 0;\n            ts.touchEnd = false;\n        }\n\n        if (ts.moving) {\n            if (tpo) {\n                tpe = tpo.rendererEvents;\n                tpe && tpe.dispatch(tpe.touchmove, ts);\n            }\n            this.dispatch(_this.touchmove, ts);\n            ts.prev_x = ts.x;\n            ts.prev_y = ts.y;\n        }\n    }\n}\n\nconst RENDERER_EVENTS: RendererEventsType = [\n    /**\n     * Triggered before scene frame is rendered(before render nodes).\n     * @event og.RendererEvents#draw\n     */\n    \"draw\",\n\n    /**\n     * Triggered after all transparent object are drawn\n     * @event og.RendererEvents#drawtransparent\n     */\n    \"drawtransparent\",\n\n    /**\n     * Triggered after scene frame is rendered(after render nodes).\n     * @event og.RendererEvents#postdraw\n     */\n    \"postdraw\",\n\n    /**\n     * Triggered when screen is resized.\n     * @event og.RendererEvents#resize\n     */\n    \"resize\",\n\n    /**\n     * Triggered when screen is resized.\n     * @event og.RendererEvents#resizeend\n     */\n    \"resizeend\",\n\n    /**\n     * Mouse enters the work screen\n     * @event og.RendererEvents#mouseenter\n     */\n    \"mouseenter\",\n\n    /**\n     * Mouse leaves the work screen\n     * @event og.RendererEvents#mouseleave\n     */\n    \"mouseleave\",\n\n    /**\n     * Mouse is moving.\n     * @event og.RendererEvents#mousemove\n     */\n    \"mousemove\",\n\n    /**\n     * Mouse is just stopped.\n     * @event og.RendererEvents#mousestop\n     */\n    \"mousestop\",\n\n    /**\n     * Mouse left button clicked.\n     * @event og.RendererEvents#lclick\n     */\n    \"lclick\",\n\n    /**\n     * Mouse right button clicked.\n     * @event og.RendererEvents#rclick\n     */\n    \"rclick\",\n\n    /**\n     * Mouse middle button clicked.\n     * @event og.RendererEvents#mclick\n     */\n    \"mclick\",\n\n    /**\n     * Mouse left button double click.\n     * @event og.RendererEvents#ldblclick\n     */\n    \"ldblclick\",\n\n    /**\n     * Mouse right button double click.\n     * @event og.RendererEvents#rdblclick\n     */\n    \"rdblclick\",\n\n    /**\n     * Mouse middle button double click.\n     * @event og.RendererEvents#mdblclick\n     */\n    \"mdblclick\",\n\n    /**\n     * Mouse left button up(stop pressing).\n     * @event og.RendererEvents#lup\n     */\n    \"lup\",\n\n    /**\n     * Mouse right button up(stop pressing).\n     * @event og.RendererEvents#rup\n     */\n    \"rup\",\n\n    /**\n     * Mouse middle button up(stop pressing).\n     * @event og.RendererEvents#mup\n     */\n    \"mup\",\n\n    /**\n     * Mouse left button is just pressed down(start pressing).\n     * @event og.RendererEvents#ldown\n     */\n    \"ldown\",\n\n    /**\n     * Mouse right button is just pressed down(start pressing).\n     * @event og.RendererEvents#rdown\n     */\n    \"rdown\",\n\n    /**\n     * Mouse middle button is just pressed down(start pressing).\n     * @event og.RendererEvents#mdown\n     */\n    \"mdown\",\n\n    /**\n     * Mouse left button is pressing.\n     * @event og.RendererEvents#lhold\n     */\n    \"lhold\",\n\n    /**\n     * Mouse right button is pressing.\n     * @event og.RendererEvents#rhold\n     */\n    \"rhold\",\n\n    /**\n     * Mouse middle button is pressing.\n     * @event og.RendererEvents#mhold\n     */\n    \"mhold\",\n\n    /**\n     * Mouse wheel is rotated.\n     * @event og.RendererEvents#mousewheel\n     */\n    \"mousewheel\",\n\n    /**\n     * Triggered when touching starts.\n     * @event og.RendererEvents#touchstart\n     */\n    \"touchstart\",\n\n    /**\n     * Triggered when touching ends.\n     * @event og.RendererEvents#touchend\n     */\n    \"touchend\",\n\n    /**\n     * Triggered when touching cancel.\n     * @event og.RendererEvents#touchcancel\n     */\n    \"touchcancel\",\n\n    /**\n     * Triggered when touch is move.\n     * @event og.RendererEvents#touchmove\n     */\n    \"touchmove\",\n\n    /**\n     * Triggered when double touch.\n     * @event og.RendererEvents#doubletouch\n     */\n    \"doubletouch\",\n\n    /**\n     * Triggered when touch leaves picked object.\n     * @event og.RendererEvents#touchleave\n     */\n    \"touchleave\",\n\n    /**\n     * Triggered when touch enter picking object.\n     * @event og.RendererEvents#touchenter\n     */\n    \"touchenter\"\n];\n\nexport {RendererEvents};\n","import { Program } from '../webgl/Program';\n\nexport function depth() {\n    return new Program(\"depth\", {\n        uniforms: {\n            depthTexture: \"sampler2d\"\n        },\n        attributes: {\n            corners: \"vec2\"\n        },\n        vertexShader:\n            `#version 300 es\n            \n            in vec2 corners;\n            \n            out vec2 tc;\n\n            void main(void) {\n                gl_Position = vec4(corners, 0.0, 1.0);\n                tc = corners * 0.5 + 0.5;\n            }`,\n        fragmentShader:\n            `#version 300 es\n\n            precision highp float;\n\n            #define MAX_FRUSTUMS 4\n\n            uniform sampler2D depthTexture;\n           \n            in vec2 tc;\n\n            layout(location = 0) out vec4 fragColor;\n\n            float LinearizeDepth(in vec2 uv)\n            {\n                float depth = texture(depthTexture, tc).x;\n                return depth;//(2.0 * zNear) / (zFar + zNear - depth * (zFar - zNear));\n            }\n            \n            void main(void) {\n                float c = LinearizeDepth(tc);\n                fragColor = vec4(c, c, c, 1.0);\n            }`\n    });\n}","/**\n * 2D Rectangle class.\n * @class\n * @param {number} [left] - Left coordinate. 0 - default.\n * @param {number} [top] - Top coordinate. 0 - default.\n * @param {number} [right] - Right coordinate. 0 - default.\n * @param {number} [bottom] - Bottom coordinate. 0 - default.\n */\nclass Rectangle {\n    /**\n     * Left coordinate.\n     * @public\n     * @type {number}\n     */\n    public left: number;\n\n    /**\n     * Right coordinate.\n     * @public\n     * @type {number}\n     */\n    public right: number;\n\n    /**\n     * Top coordinate.\n     * @public\n     * @type {number}\n     */\n    public top: number;\n\n    /**\n     * Top coordinate.\n     * @public\n     * @type {number}\n     */\n    public bottom: number;\n\n    constructor(left: number = 0, top: number = 0, right: number = 0, bottom: number = 0) {\n        this.left = left;\n        this.right = right;\n        this.top = top;\n        this.bottom = bottom;\n    }\n\n    public set(left: number = 0, top: number = 0, right: number = 0, bottom: number = 0) {\n        this.left = left;\n        this.right = right;\n        this.top = top;\n        this.bottom = bottom;\n    }\n\n    /**\n     * Clone rectangle object.\n     * @public\n     * @returns {Rectangle}\n     */\n    public clone(): Rectangle {\n        return new Rectangle(this.left, this.top, this.right, this.bottom);\n    }\n\n    /**\n     * Returns rectangle width.\n     * @public\n     * @type {number}\n     */\n    public getWidth(): number {\n        return Math.abs(this.right - this.left);\n    }\n\n    /**\n     * Returns rectangle height.\n     * @public\n     * @type {number}\n     */\n    public getHeight(): number {\n        return Math.abs(this.bottom - this.top);\n    }\n\n    /**\n     * Returns rectangle area.\n     * @public\n     * @type {number}\n     */\n    public getSquare(): number {\n        return this.getHeight() * this.getWidth();\n    }\n\n    /**\n     * Returns rectangle diagonal size.\n     * @public\n     * @type {number}\n     */\n    public getDiagonal(): number {\n        let w = this.getWidth(),\n            h = this.getHeight();\n        return Math.sqrt(h * h + w * w);\n    }\n\n    /**\n     * Returns true if rectangle fits their size in width and height.\n     * @public\n     * @param {number} width - Width.\n     * @param {number} height - Height.\n     * @type {boolean}\n     */\n    public fit(width: number, height: number): boolean {\n        return this.getWidth() === width && this.getHeight() === height;\n    }\n\n    public isInside(x: number, y: number): boolean {\n        return x >= this.left && x <= this.right && y >= this.top && y <= this.bottom;\n    }\n}\n\nexport {Rectangle};\n","import {QueueArray} from '../QueueArray';\n\nexport type HTMLImageElementExt =\n    HTMLImageElement\n    & { __nodeIndex?: number; atlasWidth?: number; atlasHeight?: number };\nexport type ImagesCacheManagerCallback = (image: HTMLImageElementExt) => void;\n\ninterface IImagesCacheRequest {\n    \"src\": string;\n    \"success\": ImagesCacheManagerCallback;\n}\n\nclass ImagesCacheManager {\n\n    public imagesCache: Record<string, HTMLImageElementExt>;\n\n    protected _counter: number;\n    protected _pendingsQueue: QueueArray<IImagesCacheRequest>;\n    protected _imageIndexCounter: number;\n\n    constructor() {\n        this.imagesCache = {};\n\n        this._counter = 0;\n        this._pendingsQueue = new QueueArray<IImagesCacheRequest>();\n        this._imageIndexCounter = 0;\n    }\n\n    public load(src: string, success: ImagesCacheManagerCallback) {\n        if (this.imagesCache[src]) {\n            success(this.imagesCache[src]);\n        } else {\n            let req = {\"src\": src, \"success\": success};\n            if (this._counter >= 1) {\n                this._pendingsQueue.unshift(req);\n            } else {\n                this._exec(req);\n            }\n        }\n    }\n\n    protected _exec(req: IImagesCacheRequest) {\n        this._counter++;\n        const that = this;\n\n        let img: HTMLImageElementExt = new Image();\n        img.crossOrigin = '';\n        img.onload = function () {\n            that.imagesCache[req.src] = img;\n            img.__nodeIndex = that._imageIndexCounter++;\n            req.success(img);\n            that._dequeueRequest();\n        };\n\n        img.onerror = function () {\n            that._dequeueRequest();\n        };\n\n        img.src = req.src;\n    }\n\n    protected _dequeueRequest() {\n        this._counter--;\n        if (this._pendingsQueue.length && this._counter < 1) {\n            while (this._pendingsQueue.length) {\n                let req = this._pendingsQueue.pop();\n                if (req) {\n                    if (this.imagesCache[req.src]) {\n                        if (this._counter <= 0) {\n                            this._counter = 0;\n                        } else {\n                            this._counter--;\n                        }\n                        req.success(this.imagesCache[req.src]);\n                    } else {\n                        this._exec(req);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport {ImagesCacheManager};","import {ImageCanvas} from \"../ImageCanvas\";\nimport {Rectangle} from \"../Rectangle\";\nimport {ImagesCacheManager, HTMLImageElementExt, ImagesCacheManagerCallback} from \"./ImagesCacheManager\";\nimport {Handler, WebGLTextureExt} from \"../webgl/Handler\";\n\n/**\n * Texture atlas stores images in one texture. Each image has its own\n * atlas texture coordinates.\n * @class\n * @param {number} [width=1024] - Texture atlas width, if it hasn't 1024 default.\n * @param {number} [height=1024] - Texture atlas height, if it hasn't 1024 default.\n */\nclass TextureAtlas {\n    /**\n     * Atlas nodes where input images store. It can be accessed by image.__nodeIndex.\n     * @public\n     * @type {Map<number, TextureAtlasNode>}\n     */\n    public nodes: Map<number, TextureAtlasNode>;\n\n    /**\n     * Created gl texture.\n     * @public\n     */\n    public texture: WebGLTextureExt | null;\n\n    /**\n     * Atlas canvas.\n     * @public\n     * @type {ImageCanvas}\n     */\n    public canvas: ImageCanvas;\n\n    public borderSize: number;\n\n    protected _handler: Handler | null;\n    protected _images: HTMLImageElementExt[];\n    protected _btree: TextureAtlasNode | null;\n    protected _imagesCacheManager: ImagesCacheManager;\n\n    constructor(width: number = 1024, height: number = 1024) {\n\n        this.nodes = new Map<number, TextureAtlasNode>();\n\n        this.texture = null;\n\n        this.canvas = new ImageCanvas(width, height);\n\n        this.clearCanvas();\n\n        this._handler = null;\n\n        this._images = [];\n\n        this._btree = null;\n\n        this._imagesCacheManager = new ImagesCacheManager();\n\n        this.borderSize = 4;\n    }\n\n    /**\n     * Returns atlas javascript image object.\n     * @public\n     * @returns {HTMLImageElement} -\n     */\n    public getImage() {\n        return this.canvas.getImage();\n    }\n\n    /**\n     * Returns canvas object.\n     * @public\n     * @returns {HTMLCanvasElement} -\n     */\n    public getCanvas(): HTMLCanvasElement {\n        return this.canvas.getCanvas();\n    }\n\n    /**\n     * Clear atlas with black.\n     * @public\n     */\n    public clearCanvas() {\n        this.canvas.fillEmpty();\n    }\n\n    /**\n     * Sets openglobus gl handler that creates gl texture.\n     * @public\n     * @param {Handler} handler - WebGL handler.\n     */\n    public assignHandler(handler: Handler) {\n        this._handler = handler;\n        this.createTexture();\n    }\n\n    /**\n     * Returns image diagonal size.\n     * @param {HTMLImageElementExt} image - Image object.\n     * @returns {number} -\n     */\n    public getDiagonal(image: HTMLImageElementExt): number {\n        let w = image.atlasWidth || image.width,\n            h = image.atlasHeight || image.height;\n        return Math.sqrt(w * w + h * h);\n    }\n\n    /**\n     * Adds image to the atlas and returns created node with texture coordinates of the stored image.\n     * @public\n     * @param {HTMLImageElementExt} image - Input javascript image object.\n     * @param {boolean} [fastInsert] - If it's true atlas doesn't restore all images again\n     * and store image in the current atlas scheme.\n     * @returns {TextureAtlasNode | undefined} -\n     */\n    public addImage(image: HTMLImageElementExt, fastInsert: boolean = false): TextureAtlasNode | undefined {\n        if (!(image.width && image.height)) {\n            return;\n        }\n\n        this._images.push(image);\n\n        this._makeAtlas(fastInsert);\n\n        if (image.__nodeIndex != undefined) {\n            return this.get(image.__nodeIndex);\n        }\n    }\n\n    protected _completeNode(nodes: Map<number, TextureAtlasNode>, node?: TextureAtlasNode | null) {\n        if (node) {\n\n            let w = this.canvas.getWidth(),\n                h = this.canvas.getHeight();\n\n            let im = node.image!;\n            let r = node.rect;\n            let bs = Math.round(this.borderSize * 0.5);\n            this.canvas.drawImage(im, r.left + bs, r.top + bs, im.atlasWidth || 0, im.atlasHeight || 0);\n\n            let tc = node.texCoords;\n\n            tc[0] = (r.left + bs) / w;\n            tc[1] = (r.top + bs) / h;\n\n            tc[2] = (r.left + bs) / w;\n            tc[3] = (r.bottom - bs) / h;\n\n            tc[4] = (r.right - bs) / w;\n            tc[5] = (r.bottom - bs) / h;\n\n            tc[6] = (r.right - bs) / w;\n            tc[7] = (r.bottom - bs) / h;\n\n            tc[8] = (r.right - bs) / w;\n            tc[9] = (r.top + bs) / h;\n\n            tc[10] = (r.left + bs) / w;\n            tc[11] = (r.top + bs) / h;\n\n            nodes.set(im.__nodeIndex!, node);\n        }\n    }\n\n    /**\n     * Main atlas making function.\n     * @protected\n     * @param {boolean} [fastInsert] - If it's true atlas doesn't restore all images again\n     * and store image in the current atlas scheme.\n     */\n    protected _makeAtlas(fastInsert: boolean = false) {\n        if (fastInsert && this._btree) {\n            let im = this._images[this._images.length - 1];\n            this._completeNode(this.nodes, this._btree.insert(im));\n        } else {\n            let im = this._images.slice(0);\n\n            im.sort(function (b: HTMLImageElementExt, a: HTMLImageElementExt) {\n                return (\n                    (a.atlasWidth || a.width) - (b.atlasWidth || b.width) ||\n                    (a.atlasHeight || a.height) - (b.atlasHeight || b.height)\n                );\n            });\n\n            this._btree = new TextureAtlasNode(\n                new Rectangle(0, 0, this.canvas.getWidth(), this.canvas.getHeight())\n            );\n            this._btree.atlas = this;\n\n            this.clearCanvas();\n\n            let newNodes = new Map<number, TextureAtlasNode>();\n            for (let i = 0; i < im.length; i++) {\n                this._completeNode(newNodes, this._btree.insert(im[i]));\n            }\n            //@ts-ignore\n            this.nodes = null;\n            this.nodes = newNodes;\n        }\n    }\n\n    public get(key: number): TextureAtlasNode | undefined {\n        return this.nodes.get(key);\n    }\n\n    public set(key: number, value: TextureAtlasNode) {\n        this.nodes.set(key, value);\n    }\n\n    /**\n     * Creates atlas gl texture.\n     * @public\n     */\n    public createTexture(img?: HTMLImageElement | null, internalFormat?: number) {\n        if (this._handler) {\n            this._handler.gl!.deleteTexture(this.texture!);\n            if (img) {\n                this.canvas.resize(img.width, img.height);\n                this.canvas.drawImage(img, 0, 0, img.width, img.height);\n            }\n            this.texture = this._handler.createTexture_l(this.canvas.getCanvas(), internalFormat)!;\n        }\n    }\n\n    /**\n     * Asynchronous function that loads and creates image to the image cache, and call success callback when it's done.\n     * @public\n     * @param {string} src - Image object src string.\n     * @param {ImagesCacheManagerCallback} success - The callback that handles the image loads done.\n     */\n    public loadImage(src: string, success: ImagesCacheManagerCallback) {\n        this._imagesCacheManager.load(src, success);\n    }\n\n    public getImageTexCoordinates(img: HTMLImageElementExt): number[] | undefined {\n        if (img.__nodeIndex != null) {\n            let n = this.get(img.__nodeIndex);\n            if (n) {\n                return n.texCoords;\n            }\n        }\n    }\n}\n\n/**\n * Atlas binary tree node.\n * @class\n * @param {Rectangle} rect - Node image rectangle.\n * @param {number[]} texCoords - Node image rectangle.\n */\nclass TextureAtlasNode {\n    public childNodes: TextureAtlasNode[] | null;\n    public image: HTMLImageElementExt | null;\n    public rect: Rectangle;\n    public texCoords: number[];\n    public atlas: TextureAtlas | null;\n\n    constructor(rect?: Rectangle, texCoords?: number[]) {\n        this.childNodes = null;\n        this.image = null;\n        this.rect = rect || new Rectangle();\n        this.texCoords = texCoords || [];\n        this.atlas = null;\n    }\n\n    public insert(img: HTMLImageElementExt): TextureAtlasNode | undefined {\n        if (this.childNodes) {\n            let newNode = this.childNodes[0].insert(img);\n\n            if (newNode) {\n                return newNode;\n            }\n\n            return this.childNodes[1].insert(img);\n        } else {\n            if (this.image != null) {\n                return;\n            }\n\n            let rc = this.rect;\n            const w = (img.atlasWidth || img.width) + this.atlas!.borderSize;\n            const h = (img.atlasHeight || img.height) + this.atlas!.borderSize;\n\n            if (w > rc.getWidth() || h > rc.getHeight()) {\n                return;\n            }\n\n            if (rc.fit(w, h)) {\n                this.image = img;\n                return this;\n            }\n\n            this.childNodes = new Array(2);\n            this.childNodes[0] = new TextureAtlasNode();\n            this.childNodes[0].atlas = this.atlas;\n            this.childNodes[1] = new TextureAtlasNode();\n            this.childNodes[1].atlas = this.atlas;\n\n            const dw = rc.getWidth() - w;\n            const dh = rc.getHeight() - h;\n\n            if (dw > dh) {\n                // this.childNodes[0].rect = new Rectangle(rc.left, rc.top, rc.left + w, rc.bottom);\n                // this.childNodes[1].rect = new Rectangle(rc.left + w, rc.top, rc.right, rc.bottom);\n                this.childNodes[0].rect.set(rc.left, rc.top, rc.left + w, rc.bottom);\n                this.childNodes[1].rect.set(rc.left + w, rc.top, rc.right, rc.bottom);\n\n            } else {\n                // this.childNodes[0].rect = new Rectangle(rc.left, rc.top, rc.right, rc.top + h);\n                // this.childNodes[1].rect = new Rectangle(rc.left, rc.top + h, rc.right, rc.bottom);\n                this.childNodes[0].rect.set(rc.left, rc.top, rc.right, rc.top + h);\n                this.childNodes[1].rect.set(rc.left, rc.top + h, rc.right, rc.bottom);\n\n            }\n\n            return this.childNodes[0].insert(img);\n        }\n    }\n}\n\nexport {TextureAtlas, TextureAtlasNode};\n","import {Deferred} from '../Deferred';\nimport {Rectangle} from '../Rectangle';\nimport {TextureAtlas, TextureAtlasNode} from './TextureAtlas';\nimport {Handler} from \"../webgl/Handler\";\nimport {HTMLImageElementExt} from \"./ImagesCacheManager\";\n\n//@todo: get the value from shader module\nconst MAX_SIZE = 11;\n\ninterface IChar {\n    id: number;\n    char: string;\n    width: number;\n    height: number;\n    x: number;\n    y: number;\n    chnl: number;\n    index: number;\n    page: number;\n    xadvance: number;\n    xoffset: number;\n    yoffset: number;\n}\n\ninterface IKerning {\n    first: number;\n    second: number;\n    amount: number;\n}\n\nexport interface IFontParams {\n    common: {\n        scaleH: number;\n        scaleW: number;\n    };\n    info: {\n        size: number;\n    };\n    distanceField: {\n        distanceRange: number;\n    }\n    chars: IChar[];\n    kernings: IKerning[];\n    pages: string[];\n}\n\nclass FontTextureAtlas extends TextureAtlas {\n    public width: number;\n    public height: number;\n    public gliphSize: number;\n    public distanceRange: number;\n    public override nodes: Map<number, FontTextureAtlasNode>;\n    public kernings: Record<number, Record<number, number>>;\n\n    constructor(width?: number, height?: number) {\n        super(width, height);\n        this.width = 0;\n        this.height = 0;\n        this.gliphSize = 0;\n        this.distanceRange = 0;\n        this.nodes = new Map<number, FontTextureAtlasNode>();\n        this.kernings = {};\n    }\n\n    public override get(key: number): FontTextureAtlasNode | undefined {\n        return this.nodes.get(key);\n    }\n}\n\ninterface IMetrics extends IChar {\n    nChar: string;\n    nCode: number;\n    nWidth: number;\n    nHeight: number\n    nAdvance: number;\n    nXOffset: number;\n    nYOffset: number;\n}\n\nclass FontTextureAtlasNode extends TextureAtlasNode {\n    public metrics: IMetrics;\n    public emptySize: number;\n\n    constructor(rect: Rectangle, texCoords: number[]) {\n        super(rect, texCoords);\n        this.emptySize = 1;\n        this.metrics = {\n            id: 0,\n            char: \"\",\n            width: 0,\n            height: 0,\n            x: 0,\n            y: 0,\n            chnl: 0,\n            index: 0,\n            page: 0,\n            xadvance: 0,\n            xoffset: 0,\n            yoffset: 0,\n\n            nChar: \"\",\n            nCode: 0,\n            nWidth: 0,\n            nHeight: 0,\n            nAdvance: 0,\n            nXOffset: 0,\n            nYOffset: 0\n        }\n    }\n}\n\nclass FontAtlas {\n    public atlasesArr: FontTextureAtlas[];\n    public samplerArr: Uint32Array;\n    public sdfParamsArr: Float32Array;\n    public catalogSrc: string;\n\n    protected atlasIndexes: Record<string, number>;\n    protected atlasIndexesDeferred: Record<string, Deferred<number>>;\n    protected tokenImageSize: number;\n    protected _handler: Handler | null;\n\n    constructor(catalogSrc?: string) {\n        this.atlasesArr = [];\n        this.atlasIndexes = {};\n        this.atlasIndexesDeferred = {};\n        this.tokenImageSize = 64;\n        this.samplerArr = new Uint32Array(MAX_SIZE);\n        this.sdfParamsArr = new Float32Array(MAX_SIZE * 4);\n        this._handler = null;\n        this.catalogSrc = catalogSrc || \"./\";\n    }\n\n    public assignHandler(handler: Handler) {\n        this._handler = handler;\n    }\n\n    public getFontIndex(face: string): Promise<number> {\n        let fullName = this.getFullIndex(face);\n\n        // Try to load font from the directory\n        if (!this.atlasIndexes[fullName]) {\n            this.loadFont(face, this.catalogSrc, `${face}.json`);\n        }\n\n        if (!this.atlasIndexesDeferred[fullName]) {\n            this.atlasIndexesDeferred[fullName] = new Deferred<number>();\n        }\n        return this.atlasIndexesDeferred[fullName].promise;\n    }\n\n    public getFullIndex(face: string): string {\n        return face.trim().toLowerCase();\n    }\n\n    protected _applyFontDataToAtlas(atlas: FontTextureAtlas, data: IFontParams, index: number = 0) {\n        let chars = data.chars;\n\n        atlas.height = data.common.scaleH;\n        atlas.width = data.common.scaleW;\n        atlas.gliphSize = data.info.size;\n        atlas.distanceRange = data.distanceField.distanceRange;\n\n        let w = atlas.width,\n            h = atlas.height,\n            s = atlas.gliphSize;\n\n        this.sdfParamsArr[index * 4] = w;\n        this.sdfParamsArr[index * 4 + 1] = h;\n        this.sdfParamsArr[index * 4 + 2] = s;\n        this.sdfParamsArr[index * 4 + 3] = atlas.distanceRange;\n\n        let idToChar: Record<number, string> = {};\n\n        for (let i = 0; i < chars.length; i++) {\n            let ci = chars[i];\n            let ti = ci.char;\n\n            idToChar[ci.id] = ti;\n\n            let r = new Rectangle(ci.x, ci.y, ci.x + ci.width, ci.y + ci.height);\n\n            let tc = new Array(12);\n\n            tc[0] = r.left / w;\n            tc[1] = r.top / h;\n\n            tc[2] = r.left / w;\n            tc[3] = r.bottom / h;\n\n            tc[4] = r.right / w;\n            tc[5] = r.bottom / h;\n\n            tc[6] = r.right / w;\n            tc[7] = r.bottom / h;\n\n            tc[8] = r.right / w;\n            tc[9] = r.top / h;\n\n            tc[10] = r.left / w;\n            tc[11] = r.top / h;\n\n            let taNode = new FontTextureAtlasNode(r, tc);\n            let ciNorm = ci.char.normalize('NFKC');\n            let ciCode = ciNorm.charCodeAt(0);\n\n            //taNode.metrics = ci;\n\n            let m = taNode.metrics;\n\n            m.id = ci.id;\n            m.char = ci.char;\n            m.width = ci.width;\n            m.height = ci.height;\n            m.x = ci.x;\n            m.y = ci.y;\n            m.chnl = ci.chnl;\n            m.index = ci.index;\n            m.page = ci.page;\n            m.xadvance = ci.xadvance;\n            m.xoffset = ci.xoffset;\n            m.yoffset = ci.yoffset;\n\n            m.nChar = ciNorm;\n            m.nCode = ciCode;\n            m.nWidth = taNode.metrics.width / s;\n            m.nHeight = taNode.metrics.height / s;\n            m.nAdvance = taNode.metrics.xadvance / s;\n            m.nXOffset = taNode.metrics.xoffset / s;\n            m.nYOffset = 1.0 - taNode.metrics.yoffset / s;\n\n            taNode.emptySize = 1;\n\n            atlas.nodes.set(ciNorm.charCodeAt(0), taNode);\n        }\n\n        atlas.kernings = {};\n\n        for (let i = 0; i < data.kernings.length; i++) {\n            let ki = data.kernings[i];\n\n            let first = ki.first,\n                second = ki.second;\n\n            //let charFirst = idToChar[first],\n            //    charSecond = idToChar[second];\n\n            // if (!atlas.kernings[charFirst]) {\n            //     atlas.kernings[charFirst] = {};\n            // }\n            //\n            // atlas.kernings[charFirst][charSecond] = ki.amount / s;\n\n            if (!atlas.kernings[first]) {\n                atlas.kernings[first] = {};\n            }\n\n            atlas.kernings[first][second] = ki.amount / s;\n        }\n    }\n\n    public initFont(faceName: string, dataJson: IFontParams, imageBase64: string) {\n        let index = this.atlasesArr.length;\n        let fullName = this.getFullIndex(faceName);\n\n        this.atlasIndexes[fullName] = index;\n\n        let def = this.atlasIndexesDeferred[fullName];\n        if (!def) {\n            def = this.atlasIndexesDeferred[fullName] = new Deferred<number>();\n        }\n\n        this.samplerArr[this.atlasesArr.length] = index;\n\n        // TODO: FontTextureAtlas();\n        let atlas = new FontTextureAtlas();\n\n        atlas.height = 0;\n        atlas.width = 0;\n        atlas.gliphSize = 0;\n        atlas.distanceRange = 0;\n        atlas.kernings = {};\n\n        atlas.assignHandler(this._handler!);\n\n        this.atlasesArr[index] = atlas;\n\n        this._applyFontDataToAtlas(atlas, dataJson, index);\n\n        let img = new Image();\n        img.onload = () => {\n            this._createTexture(atlas, img);\n            def.resolve(index);\n        };\n        img.src = imageBase64;\n    }\n\n    protected _createTexture(atlas: FontTextureAtlas, img: HTMLImageElementExt) {\n        atlas.createTexture(img);\n    }\n\n    public loadFont(faceName: string, srcDir: string, atlasUrl: string) {\n\n        let index = this.atlasesArr.length;\n        let fullName = this.getFullIndex(faceName);\n\n        this.atlasIndexes[fullName] = index;\n\n        let def = this.atlasIndexesDeferred[fullName];\n        if (!def) {\n            def = this.atlasIndexesDeferred[fullName] = new Deferred<number>();\n        }\n\n        this.samplerArr[this.atlasesArr.length] = index;\n\n        // TODO: FontTextureAtlas();\n        let atlas = new FontTextureAtlas();\n\n        atlas.height = 0;\n        atlas.width = 0;\n        atlas.gliphSize = 0;\n        atlas.distanceRange = 0;\n        atlas.kernings = {};\n\n        atlas.assignHandler(this._handler!);\n        this.atlasesArr[index] = atlas;\n\n        fetch(`${srcDir}/${atlasUrl}`)\n            .then((response: Response) => {\n                if (!response.ok) {\n                    throw Error(`Unable to load \"${srcDir}/${atlasUrl}\"`);\n                }\n                //return response.json(response);\n                return response.json();\n            })\n            .then((data: IFontParams) => {\n\n                this._applyFontDataToAtlas(atlas, data, index);\n\n                let img = new Image();\n                img.onload = () => {\n                    this._createTexture(atlas, img);\n                    def.resolve(index);\n                };\n\n                img.src = `${srcDir}/${data.pages[0]}`;\n                img.crossOrigin = \"Anonymous\";\n            })\n            .catch(err => {\n                def.reject();\n                return {'status': \"error\", 'msg': err.toString()};\n            });\n    }\n}\n\nexport {FontAtlas};\n","import {Program} from '../webgl/Program';\n\nexport function screenFrame(): Program {\n    return new Program(\"screenFrame\", {\n        uniforms: {\n            texture: \"sampler2d\"\n        },\n        attributes: {\n            corners: \"vec3\"\n        },\n        vertexShader:\n            `attribute vec2 corners;\n            \n            varying vec2 tc;\n            void main(void) {\n                gl_Position = vec4(corners, 0.0, 1.0);\n                tc = corners * 0.5 + 0.5;\n            }`,\n        fragmentShader:\n            `precision highp float;\n            uniform sampler2D texture;\n            \n            varying vec2 tc;\n            \n            void main(void) {\n                gl_FragColor = texture2D( texture, tc );\n            }`\n    });\n}","import {Program} from '../webgl/Program';\n\nexport function toneMapping(): Program {\n    return new Program(\"toneMapping\", {\n        uniforms: {\n            hdrBuffer: \"sampler2d\",\n            exposure: \"float\",\n            gamma: \"float\",\n            whitepoint: \"float\"\n        },\n        attributes: {\n            corners: \"vec3\"\n        },\n        vertexShader:\n            `#version 300 es\n            \n            in vec2 corners;\n            \n            out vec2 tc;\n\n            void main(void) {\n                gl_Position = vec4(corners, 0.0, 1.0);\n                tc = corners * 0.5 + 0.5;\n            }`,\n        fragmentShader:\n            `#version 300 es\n\n            precision highp float;\n\n            #ifndef saturate\n                #define saturate(a) clamp(a, 0.0, 1.0)\n            #endif\n\n            uniform sampler2D hdrBuffer;\n\n            uniform float whitepoint;\n            uniform float exposure;\n            uniform float gamma;\n\n            vec3 LinearToneMapping(vec3 color) {\n                return exposure * color;\n            }\n\n            vec3 ReinhardToneMapping2(vec3 color) {\n                return vec3(1.0) - exp(-color * exposure);\n            }\n\n            vec3 ReinhardToneMapping(vec3 color) {\n                color *= exposure;\n                return saturate(color / (vec3(1.0) + color));\n            }\n\n            #define Uncharted2Helper(x) max(((x * (0.15 * x + 0.10 * 0.50) + 0.20 * 0.02) / (x * (0.15 * x + 0.50) + 0.20 * 0.30)) - 0.02 / 0.30, vec3(0.0))\n\n            vec3 Uncharted2ToneMapping(vec3 color) {\n                color *= exposure;\n                return saturate(Uncharted2Helper(color) / Uncharted2Helper(vec3(whitepoint)));\n            }\n\n            vec3 OptimizedCineonToneMapping(vec3 color) {\n                color *= exposure;\n                color = max(vec3(0.0), color - 0.004);\n                return pow((color * (6.2 * color + 0.5)) / (color * (6.2 * color + 1.7) + 0.06), vec3(2.2));\n            }\n\n            vec3 ACESFilmicToneMapping(vec3 color) {\n                color *= exposure;\n                return saturate((color * (2.51 * color + 0.03)) / (color * (2.43 * color + 0.59) + 0.14));\n            }\n\n            in vec2 tc;\n\n            layout(location = 0) out vec4 fragColor;\n            \n            void main(void) {\n                vec4 hdrColor = texture(hdrBuffer, tc).rgba;\n                \n                float oneByGamma = gamma / gamma;\n                float oneByWhitePoint = whitepoint / whitepoint;\n                vec3 mapped = ReinhardToneMapping2(hdrColor.rgb) * oneByGamma * oneByWhitePoint;\n                //vec3 mapped = ACESFilmicToneMapping(hdrColor.rgb) * oneByGamma * oneByWhitePoint;\n\n                mapped = pow(mapped, vec3(1.0 / gamma));\n        \n                fragColor = vec4(mapped, hdrColor.a);\n            }`\n    });\n}","import {Camera} from \"../camera/Camera\";\nimport {Control} from \"../control/Control\";\nimport {cons} from \"../cons\";\nimport {createRendererEvents, RendererEvents, RendererEventsHandler} from \"./RendererEvents\";\nimport {depth} from \"../shaders/depth\";\nimport {EntityCollection} from \"../entity/EntityCollection\";\nimport {Framebuffer, Multisample} from \"../webgl/index\";\nimport {FontAtlas} from \"../utils/FontAtlas\";\nimport {Handler, WebGLBufferExt} from \"../webgl/Handler\";\nimport {input} from \"../input/input\";\nimport {isEmpty} from \"../utils/shared\";\nimport {LabelWorker} from \"../entity/LabelWorker\";\nimport {randomi} from \"../math\";\nimport {RenderNode} from \"../scene/RenderNode\";\nimport {screenFrame} from \"../shaders/screenFrame\";\nimport {toneMapping} from \"../shaders/toneMapping\";\nimport {TextureAtlas} from \"../utils/TextureAtlas\";\nimport {Vec2} from \"../math/Vec2\";\nimport {NumberArray3, Vec3} from \"../math/Vec3\";\nimport {Vec4} from \"../math/Vec4\";\n\ninterface IRendererParams {\n    controls?: Control[];\n    msaa?: number;\n    autoActivate?: boolean;\n    fontsSrc?: string;\n    gamma?: number;\n    exposure?: number;\n}\n\ninterface IPickingObject {\n    _pickingColor?: Vec3;\n    _pickingColorU?: Float32Array;\n}\n\ninterface IFrameCallbackHandler {\n    id: number;\n    callback: Function;\n    sender: any;\n}\n\nconst MSAA_DEFAULT = 0;\n\nlet __pickingCallbackCounter__ = 0;\n\nlet __depthCallbackCounter__ = 0;\n\nlet __distanceCallbackCounter__ = 0;\n\nfunction clientWaitAsync(gl: WebGL2RenderingContext, sync: WebGLSync, flags: number): Promise<void> {\n    return new Promise<void>((resolve, reject) => {\n        function check() {\n            const res = gl.clientWaitSync(sync, flags, 0);\n            if (res == gl.WAIT_FAILED) {\n                reject();\n            } else if (res == gl.TIMEOUT_EXPIRED) {\n                requestAnimationFrame(check);\n            } else {\n                resolve();\n            }\n        }\n\n        check();\n    });\n}\n\n/**\n * Represents high level WebGL context interface that starts WebGL handler working in real time.\n * @class\n * @param {Handler} handler - WebGL handler context.\n * @param {Object} [params] - Renderer parameters:\n * @fires EventsHandler<RendererEventsType>#draw\n * @fires EventsHandler<RendererEventsType>#resize\n * @fires EventsHandler<RendererEventsType>#mousemove\n * @fires EventsHandler<RendererEventsType>#mousestop\n * @fires EventsHandler<RendererEventsType>#lclick\n * @fires EventsHandler<RendererEventsType>#rclick\n * @fires EventsHandler<RendererEventsType>#mclick\n * @fires EventsHandler<RendererEventsType>#ldblclick\n * @fires EventsHandler<RendererEventsType>#rdblclick\n * @fires EventsHandler<RendererEventsType>#mdblclick\n * @fires EventsHandler<RendererEventsType>#lup\n * @fires EventsHandler<RendererEventsType>#rup\n * @fires EventsHandler<RendererEventsType>#mup\n * @fires EventsHandler<RendererEventsType>#ldown\n * @fires EventsHandler<RendererEventsType>#rdown\n * @fires EventsHandler<RendererEventsType>#mdown\n * @fires EventsHandler<RendererEventsType>#lhold\n * @fires EventsHandler<RendererEventsType>#rhold\n * @fires EventsHandler<RendererEventsType>#mhold\n * @fires EventsHandler<RendererEventsType>#mousewheel\n * @fires EventsHandler<RendererEventsType>#touchstart\n * @fires EventsHandler<RendererEventsType>#touchend\n * @fires EventsHandler<RendererEventsType>#touchcancel\n * @fires EventsHandler<RendererEventsType>#touchmove\n * @fires EventsHandler<RendererEventsType>#doubletouch\n * @fires EventsHandler<RendererEventsType>#touchleave\n * @fires EventsHandler<RendererEventsType>#touchenter\n */\n\nlet __resizeTimeout: any;\n\nexport interface HTMLDivElementExt extends HTMLDivElement {\n    attributions?: HTMLElement;\n}\n\nclass Renderer {\n\n    /**\n     * Div element with WebGL canvas. Assigned in Globe class.\n     * @public\n     * @type {HTMLElement | null}\n     */\n    public div: HTMLDivElementExt | null;\n\n    /**\n     * WebGL handler context.\n     * @public\n     * @type {Handler}\n     */\n    public handler: Handler;\n    public exposure: number;\n    public gamma: number;\n    public whitepoint: number;\n    public brightThreshold: number;\n\n    /**\n     * Render nodes drawing queue.\n     * @public\n     * @type {Array.<RenderNode>}\n     */\n    public _renderNodesArr: RenderNode[];\n\n    /**\n     * Render nodes store for the comfortable access by the node name.\n     * @public\n     * @type {Object.<RenderNode>}\n     */\n    public renderNodes: Record<string, RenderNode>;\n\n    /**\n     * Current active camera.\n     * @public\n     * @type {Camera}\n     */\n    public activeCamera: Camera | null;\n\n    /**\n     * Renderer events. Represents interface for setting events like mousemove, draw, keypress etc.\n     * @public\n     * @type {RendererEvents}\n     */\n    public events: RendererEventsHandler;\n\n    /**\n     * Controls array.\n     * @public\n     * @type {Object}\n     */\n    public controls: Record<string, Control>;\n\n    /**\n     * Provides exchange between controls.\n     * @public\n     * @type {any}\n     */\n    public controlsBag: any;\n\n    /**\n     * Hash table for drawing objects.\n     * @public\n     * @type {Map<string, any>}\n     */\n    public colorObjects: Map<string, any>;\n\n    /**\n     * Color picking objects rendering queue.\n     * @type {Function[]}\n     */\n    protected _pickingCallbacks: IFrameCallbackHandler[];\n\n    /**\n     * Picking objects(labels and billboards) framebuffer.\n     * @public\n     * @type {Framebuffer}\n     */\n    public pickingFramebuffer: Framebuffer | null;\n\n    protected _tempPickingPix_: Uint8Array;\n\n    /**\n     * @public\n     * @type {Framebuffer}\n     */\n    public distanceFramebuffer: Framebuffer | null;\n\n    /**\n     * @type {Function[]}\n     */\n    protected _distanceCallbacks: IFrameCallbackHandler[];\n\n    protected _tempDistancePix_: Uint8Array;\n\n    /**\n     * Depth objects rendering queue.\n     * @type {Function[]}\n     */\n    protected _depthCallbacks: IFrameCallbackHandler[];\n\n    public depthFramebuffer: Framebuffer | null;\n\n    protected _msaa: number;\n\n    protected _internalFormat: string;\n    protected _format: string;\n    protected _type: string;\n\n    public sceneFramebuffer: Framebuffer | Multisample | null;\n\n    protected blitFramebuffer: Framebuffer | null;\n\n    protected toneMappingFramebuffer: Framebuffer | null;\n\n    protected _initialized: boolean;\n\n    /**\n     * Texture atlas for the billboards images. One atlas per node.\n     * @public\n     * @type {TextureAtlas}\n     */\n    public billboardsTextureAtlas: TextureAtlas;\n\n    /**\n     * Texture atlas for the billboards images. One atlas per node.\n     * @public\n     * @type {TextureAtlas}\n     */\n    public geoObjectsTextureAtlas: TextureAtlas;\n\n    /**\n     * Texture font atlas for the font families and styles. One atlas per node.\n     * @public\n     * @type {FontAtlas}\n     */\n    public fontAtlas: FontAtlas;\n\n    protected _entityCollections: EntityCollection[];\n\n    protected _currentOutput: string;\n\n    protected _fnScreenFrame: Function | null;\n\n    public labelWorker: LabelWorker;\n\n    public __useDistanceFramebuffer__: boolean;\n\n    public screenDepthFramebuffer: Framebuffer | null;\n\n    public screenFramePositionBuffer: WebGLBufferExt | null;\n\n    public screenTexture: Record<string, WebGLTexture>;\n\n    public outputTexture: WebGLTexture | null;\n\n    protected _skipDistanceFrame: boolean;\n\n    protected _distancePixelBuffer: WebGLBuffer | null;\n\n    protected _skipPickingFrame: boolean;\n\n    protected _pickingPixelBuffer: WebGLBuffer | null;\n\n    protected _readDistanceBuffer: () => void;\n\n    protected _readPickingBuffer: () => void;\n\n    constructor(handler: Handler, params: IRendererParams = {}) {\n\n        this.div = null;\n\n        this.handler = handler;\n\n        this.exposure = params.exposure || 3.01;\n\n        this.gamma = params.gamma || 0.47;\n\n        this.whitepoint = 1.0;\n\n        this.brightThreshold = 0.9;\n\n        this._renderNodesArr = [];\n\n        this.renderNodes = {};\n\n        this.activeCamera = null;\n\n        this.events = createRendererEvents(this);\n\n        this.controls = {};\n\n        if (params.controls) {\n            for (let i in params.controls) {\n                this.controls[params.controls[i].name] = params.controls[i];\n            }\n        }\n\n        this.controlsBag = {};\n\n        this.colorObjects = new Map<string, any>();\n\n        this._pickingCallbacks = [];\n\n        this.pickingFramebuffer = null;\n\n        this._tempPickingPix_ = new Uint8Array([]);\n\n        this.distanceFramebuffer = null;\n\n        this._distanceCallbacks = [];\n\n        this._tempDistancePix_ = new Uint8Array([]);\n\n        this._depthCallbacks = [];\n\n        this.depthFramebuffer = null;\n\n        let urlParams = new URLSearchParams(location.search);\n        let msaaParam = urlParams.get('og_msaa');\n        if (msaaParam) {\n            this._msaa = Number(urlParams.get('og_msaa'));\n        } else {\n            this._msaa = params.msaa != undefined ? params.msaa : MSAA_DEFAULT;\n        }\n\n        this._internalFormat = \"RGBA16F\";\n        this._format = \"RGBA\";\n        this._type = \"FLOAT\";\n\n        this.sceneFramebuffer = null;\n\n        this.blitFramebuffer = null;\n\n        this.toneMappingFramebuffer = null;\n\n        this._initialized = false;\n\n        /**\n         * Texture atlas for the billboards images. One atlas per node.\n         * @public\n         * @type {TextureAtlas}\n         */\n        this.billboardsTextureAtlas = new TextureAtlas();\n\n        /**\n         * Texture atlas for the billboards images. One atlas per node.\n         * @public\n         * @type {TextureAtlas}\n         */\n        this.geoObjectsTextureAtlas = new TextureAtlas();\n\n        /**\n         * Texture font atlas for the font families and styles. One atlas per node.\n         * @public\n         * @type {FontAtlas}\n         */\n        this.fontAtlas = new FontAtlas(params.fontsSrc);\n\n        this._entityCollections = [];\n\n        this._currentOutput = \"screen\";\n\n        this._fnScreenFrame = null;\n\n        this.labelWorker = new LabelWorker(4);\n\n        this.__useDistanceFramebuffer__ = true;\n\n        this.screenDepthFramebuffer = null;\n\n        this.screenFramePositionBuffer = null;\n\n        this.screenTexture = {};\n\n        this.outputTexture = null;\n\n        this._skipDistanceFrame = false;\n\n        this._distancePixelBuffer = null;\n\n        this._skipPickingFrame = false;\n\n        this._pickingPixelBuffer = null;\n\n        this._readDistanceBuffer = this._readDistanceBuffer_webgl2;\n\n        this._readPickingBuffer = this._readPickingBuffer_webgl2;\n\n        if (params.autoActivate || isEmpty(params.autoActivate)) {\n            this.start();\n        }\n    }\n\n    public enableBlendOneSrcAlpha() {\n        let gl = this.handler.gl!;\n        gl.enable(gl.BLEND);\n        gl.blendEquation(gl.FUNC_ADD);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    }\n\n    public enableBlendDefault() {\n        let gl = this.handler.gl!;\n        gl.enable(gl.BLEND);\n        gl.blendEquation(gl.FUNC_ADD);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE);\n    }\n\n    /**\n     * Sets renderer events activity.\n     * @param {Boolean} activity - Events activity.\n     */\n    public setEventsActivity(activity: boolean) {\n        this.events.active = activity;\n    }\n\n    public addDepthCallback(sender: any, callback: Function) {\n        let id = __depthCallbackCounter__++;\n        this._depthCallbacks.push({\n            id: id, callback: callback, sender: sender\n        });\n        return id;\n    }\n\n    public removeDepthCallback(id: number) {\n        for (let i = 0; i < this._depthCallbacks.length; i++) {\n            if (id === this._depthCallbacks[i].id) {\n                this._depthCallbacks.splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    public addDistanceCallback(sender: any, callback: Function) {\n        let id = __distanceCallbackCounter__++;\n        this._distanceCallbacks.push({\n            id: id, callback: callback, sender: sender\n        });\n        return id;\n    }\n\n    public removeDistanceCallback(id: number) {\n        for (let i = 0; i < this._distanceCallbacks.length; i++) {\n            if (id === this._distanceCallbacks[i].id) {\n                this._distanceCallbacks.splice(i, 1);\n                break;\n            }\n        }\n    }\n\n\n    /**\n     * Adds picking rendering callback function.\n     * @param {object} sender - Callback context.\n     * @param {Function} callback - Rendering callback.\n     * @returns {Number} Handler id\n     */\n    public addPickingCallback(sender: any, callback: Function) {\n        let id = __pickingCallbackCounter__++;\n        this._pickingCallbacks.push({\n            id: id, callback: callback, sender: sender\n        });\n        return id;\n    }\n\n    /**\n     * Removes picking rendering callback function.\n     * @param {Number} id - Handler id to remove.\n     */\n    public removePickingCallback(id: number) {\n        for (let i = 0; i < this._pickingCallbacks.length; i++) {\n            if (id === this._pickingCallbacks[i].id) {\n                this._pickingCallbacks.splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    public getPickingObject<T>(r: number, g: number, b: number): T {\n        return this.colorObjects.get(`${r}_${g}_${b}`);\n    }\n\n    public getPickingObjectArr<T>(arr: NumberArray3 | Uint8Array): T {\n        return this.colorObjects.get(`${arr[0]}_${arr[1]}_${arr[2]}`);\n    }\n\n    public getPickingObject3v<T>(vec: Vec3 | Vec4): T {\n        return this.colorObjects.get(`${vec.x}_${vec.y}_${vec.z}`);\n    }\n\n    /**\n     * Assign picking color to the object.\n     * @public\n     * @param {Object} obj - Object that presume to be picked.\n     */\n    public assignPickingColor<T>(obj: T & IPickingObject) {\n        if (!obj._pickingColor || obj._pickingColor.isZero()) {\n            let r = 0, g = 0, b = 0;\n            let str = \"0_0_0\";\n            while (!(r || g || b) || this.colorObjects.has(str)) {\n                r = randomi(1, 255);\n                g = randomi(1, 255);\n                b = randomi(1, 255);\n                str = `${r}_${g}_${b}`;\n            }\n\n            if (!obj._pickingColor) {\n                obj._pickingColor = new Vec3(r, g, b);\n            } else {\n                obj._pickingColor.set(r, g, b);\n            }\n\n            obj._pickingColorU = new Float32Array([r / 255, g / 255, b / 255]);\n\n            this.colorObjects.set(str, obj);\n        }\n    }\n\n    /**\n     * Removes picking color from object.\n     * @public\n     * @param {Object} obj - Object to remove picking color.\n     */\n    public clearPickingColor<T>(obj: T & IPickingObject) {\n        if (obj._pickingColor && !obj._pickingColor.isZero()) {\n            let c = obj._pickingColor;\n            if (!c.isZero()) {\n                this.colorObjects.delete(`${c.x}_${c.y}_${c.z}`);\n                c.x = c.y = c.z = 0;\n            }\n        }\n    }\n\n    /**\n     * Get the client width.\n     * @public\n     * @returns {number} -\n     */\n    public getWidth(): number {\n        return this.handler.canvas!.clientWidth;\n    }\n\n    /**\n     * Get the client height.\n     * @public\n     * @returns {number} -\n     */\n    public getHeight(): number {\n        return this.handler.canvas!.clientHeight;\n    }\n\n    /**\n     * Get center of the canvas\n     * @public\n     * @returns {Vec2} -\n     */\n    public getCenter(): Vec2 {\n        let cnv = this.handler.canvas!;\n        return new Vec2(Math.round(cnv.width * 0.5), Math.round(cnv.height * 0.5));\n    }\n\n    /**\n     * Get center of the screen viewport\n     * @public\n     * @returns {Vec2} -\n     */\n    public getClientCenter(): Vec2 {\n        let cnv = this.handler.canvas!;\n        return new Vec2(Math.round(cnv.clientWidth * 0.5), Math.round(cnv.clientHeight * 0.5));\n    }\n\n    /**\n     * Add the given control to the renderer.\n     * @param {Control} control - Control.\n     */\n    public addControl(control: Control) {\n        control.addTo(this);\n    }\n\n    /**\n     * Add the given controls array to the planet node.\n     * @param {Array.<Control>} cArr - Control array.\n     */\n    public addControls(cArr: Control[]) {\n        for (let i = 0; i < cArr.length; i++) {\n            cArr[i].addTo(this);\n        }\n    }\n\n    /**\n     * Remove control from the renderer.\n     * @param {Control} control  - Control.\n     */\n    public removeControl(control: Control) {\n        control.remove();\n    }\n\n    public isInitialized(): boolean {\n        return this._initialized;\n    }\n\n    /**\n     * Renderer initialization.\n     * @public\n     */\n    public initialize() {\n\n        if (this._initialized) {\n            return;\n        } else {\n            this._initialized = true;\n        }\n\n        this.handler.initialize();\n\n        this.billboardsTextureAtlas.assignHandler(this.handler);\n        this.geoObjectsTextureAtlas.assignHandler(this.handler);\n\n        this.fontAtlas.assignHandler(this.handler);\n\n        this.handler.setFrameCallback(() => {\n            this.draw();\n        });\n\n        this.activeCamera = new Camera(this, {\n            eye: new Vec3(0, 0, 0), look: new Vec3(0, 0, -1), up: new Vec3(0, 1, 0)\n        });\n\n        this.events.initialize();\n\n        // Bind console key\n        this.events.on(\"charkeypress\", input.KEY_APOSTROPHE, function () {\n            cons.setVisibility(!cons.getVisibility());\n        });\n\n        this.handler.addProgram(screenFrame());\n\n        this.pickingFramebuffer = new Framebuffer(this.handler, {\n            width: 640, height: 480\n        });\n        this.pickingFramebuffer.init();\n\n        this._tempPickingPix_ = new Uint8Array(this.pickingFramebuffer.width * this.pickingFramebuffer.height * 4);\n\n        this.distanceFramebuffer = new Framebuffer(this.handler, {\n            width: 320, height: 240\n        });\n        this.distanceFramebuffer.init();\n\n        this._tempDistancePix_ = new Uint8Array(this.distanceFramebuffer.width * this.distanceFramebuffer.height * 4);\n        //this._tempDistancePix_ = new Uint8Array(4);\n\n        this.depthFramebuffer = new Framebuffer(this.handler, {\n            size: 2,\n            internalFormat: [\"RGBA\", \"DEPTH_COMPONENT24\"],\n            format: [\"RGBA\", \"DEPTH_COMPONENT\"],\n            type: [\"UNSIGNED_BYTE\", \"UNSIGNED_INT\"],\n            attachment: [\"COLOR_ATTACHMENT\", \"DEPTH_ATTACHMENT\"],\n            useDepth: false\n        });\n        this.depthFramebuffer.init();\n\n        this.screenDepthFramebuffer = new Framebuffer(this.handler, {\n            useDepth: false\n        });\n        this.screenDepthFramebuffer.init();\n\n        if (this.handler.gl!.type === \"webgl\") {\n            this._readDistanceBuffer = this._readDistanceBuffer_webgl1;\n            this._readPickingBuffer = this._readPickingBuffer_webgl1;\n\n            this.sceneFramebuffer = new Framebuffer(this.handler);\n            this.sceneFramebuffer.init();\n\n            this._fnScreenFrame = this._screenFrameNoMSAA;\n\n            this.screenTexture = {\n                screen: this.sceneFramebuffer!.textures[0],\n                picking: this.pickingFramebuffer!.textures[0],\n                distance: this.distanceFramebuffer!.textures[0],\n                depth: this.screenDepthFramebuffer!.textures[0]\n            };\n        } else {\n            let _maxMSAA = this.getMaxMSAA(this._internalFormat);\n\n            if (this._msaa > _maxMSAA) {\n                this._msaa = _maxMSAA;\n            }\n\n            this.handler.addPrograms([toneMapping()]);\n\n            this.handler.addPrograms([depth()]);\n\n            this.sceneFramebuffer = new Multisample(this.handler, {\n                size: 1,\n                msaa: this._msaa,\n                internalFormat: this._internalFormat,\n                filter: \"LINEAR\"\n            });\n\n            this.sceneFramebuffer.init();\n\n            this.blitFramebuffer = new Framebuffer(this.handler, {\n                size: 1,\n                useDepth: false,\n                internalFormat: this._internalFormat,\n                format: this._format,\n                type: this._type,\n                filter: \"NEAREST\"\n            });\n\n            this.blitFramebuffer.init();\n\n            this.toneMappingFramebuffer = new Framebuffer(this.handler, {\n                useDepth: false\n            });\n\n            this.toneMappingFramebuffer.init();\n\n            this._fnScreenFrame = this._screenFrameMSAA;\n\n            this.screenTexture = {\n                screen: this.toneMappingFramebuffer!.textures[0],\n                picking: this.pickingFramebuffer!.textures[0],\n                distance: this.distanceFramebuffer!.textures[0],\n                depth: this.screenDepthFramebuffer!.textures[0],\n                frustum: this.depthFramebuffer!.textures[0]\n            };\n\n            this._initReadPixelsBuffers();\n        }\n\n        this.handler.ONCANVASRESIZE = () => {\n            this._resizeStart();\n            this.events.dispatch(this.events.resize, this.handler.canvas);\n            this._resizeEnd();\n            //clearTimeout(__resizeTimeout);\n            // __resizeTimeout = setTimeout(() => {\n            //     this._resizeEnd();\n            //     this.events.dispatch(this.events.resizeend, this.handler.canvas);\n            // }, 320);\n            this.events.dispatch(this.events.resizeend, this.handler.canvas);\n        };\n\n        this.screenFramePositionBuffer = this.handler.createArrayBuffer(new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), 2, 4);\n\n        this.outputTexture = this.screenTexture.screen;\n\n        this._initializeRenderNodes();\n\n        this._initializeControls();\n    }\n\n    _initReadPixelsBuffers() {\n        let gl = this.handler.gl!;\n\n        this._distancePixelBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.PIXEL_PACK_BUFFER, this._distancePixelBuffer);\n        gl.bufferData(gl.PIXEL_PACK_BUFFER, this.distanceFramebuffer!.width * this.distanceFramebuffer!.height * 4, gl.STREAM_READ);\n        gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);\n\n        this._pickingPixelBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.PIXEL_PACK_BUFFER, this._pickingPixelBuffer);\n        gl.bufferData(gl.PIXEL_PACK_BUFFER, this.pickingFramebuffer!.width * this.pickingFramebuffer!.height * 4, gl.STREAM_READ);\n        gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);\n    }\n\n    public _initializeControls() {\n        let temp = this.controls;\n        this.controls = {};\n        for (let i in temp) {\n            this.addControl(temp[i]);\n        }\n    }\n\n    public resize() {\n        this._resizeEnd();\n    }\n\n    public setCurrentScreen(screenName: string) {\n        this._currentOutput = screenName;\n        if (this.screenTexture[screenName]) {\n            this.outputTexture = this.screenTexture[screenName];\n        }\n    }\n\n    public _resizeStart() {\n        let c = this.handler.canvas!;\n\n        this.activeCamera!.setAspectRatio(c.width / c.height);\n        this.sceneFramebuffer!.setSize(c.width * 0.5, c.height * 0.5);\n        this.blitFramebuffer && this.blitFramebuffer.setSize(c.width * 0.5, c.height * 0.5, true);\n    }\n\n    public _resizeEnd() {\n        let c = this.handler.canvas!;\n\n        this.activeCamera!.setAspectRatio(c.width / c.height);\n        this.sceneFramebuffer!.setSize(c.width, c.height);\n        this.blitFramebuffer && this.blitFramebuffer.setSize(c.width, c.height, true);\n\n        this.toneMappingFramebuffer && this.toneMappingFramebuffer.setSize(c.width, c.height, true);\n        this.depthFramebuffer && this.depthFramebuffer.setSize(c.clientWidth, c.clientHeight, true);\n        this.screenDepthFramebuffer && this.screenDepthFramebuffer.setSize(c.clientWidth, c.clientHeight, true);\n\n        if (this.handler.gl!.type === \"webgl\") {\n            this.screenTexture.screen = (this.sceneFramebuffer as Framebuffer)!.textures[0];\n            this.screenTexture.picking = this.pickingFramebuffer!.textures[0];\n            this.screenTexture.distance = this.distanceFramebuffer!.textures[0];\n            this.screenTexture.depth = this.screenDepthFramebuffer!.textures[0];\n            this.screenTexture.frustum = this.depthFramebuffer!.textures[0];\n        } else {\n            this.screenTexture.screen = this.toneMappingFramebuffer!.textures[0];\n            this.screenTexture.picking = this.pickingFramebuffer!.textures[0];\n            this.screenTexture.distance = this.distanceFramebuffer!.textures[0];\n            this.screenTexture.depth = this.screenDepthFramebuffer!.textures[0];\n            this.screenTexture.frustum = this.depthFramebuffer!.textures[0];\n        }\n\n        this.setCurrentScreen(this._currentOutput);\n    }\n\n    public removeNode(renderNode: RenderNode) {\n        // TODO: replace from RenderNode to this method\n        renderNode.remove();\n    }\n\n    /**\n     * Adds render node to the renderer.\n     * @public\n     * @param {RenderNode} renderNode - Render node.\n     */\n    public addNode(renderNode: RenderNode) {\n        if (!this.renderNodes[renderNode.name]) {\n            renderNode.assign(this);\n            this._renderNodesArr.unshift(renderNode);\n            this.renderNodes[renderNode.name] = renderNode;\n        } else {\n            cons.logWrn(`Node name ${renderNode.name} already exists.`);\n        }\n    }\n\n    protected _initializeRenderNodes() {\n        for (let i = 0; i < this._renderNodesArr.length; i++) {\n            this._renderNodesArr[i].initialize();\n        }\n    }\n\n    /**\n     * Adds render node to the renderer before specific node.\n     * @public\n     * @param {RenderNode} renderNode - Render node.\n     * @param {RenderNode} renderNodeBefore - Insert before the renderNodeBefore node.\n     */\n    public addNodeBefore(renderNode: RenderNode, renderNodeBefore: RenderNode) {\n        if (!this.renderNodes[renderNode.name]) {\n            renderNode.assign(this);\n            this.renderNodes[renderNode.name] = renderNode;\n            for (let i = 0; i < this._renderNodesArr.length; i++) {\n                if (this._renderNodesArr[i].isEqual(renderNodeBefore)) {\n                    this._renderNodesArr.splice(i, 0, renderNode);\n                    break;\n                }\n            }\n            this._renderNodesArr.unshift(renderNode);\n        } else {\n            cons.logWrn(`Node name ${renderNode.name} already exists.`);\n        }\n    }\n\n    /**\n     * Adds render nodes array to the renderer.\n     * @public\n     * @param {Array.<RenderNode>} nodesArr - Render nodes array.\n     */\n    public addNodes(nodesArr: RenderNode[]) {\n        for (let i = 0; i < nodesArr.length; i++) {\n            this.addNode(nodesArr[i]);\n        }\n    }\n\n    public getMaxMSAA(internalFormat: string) {\n        let gl = this.handler.gl!;\n        let samples = gl.getInternalformatParameter(gl.RENDERBUFFER, (gl as any)[internalFormat], gl.SAMPLES);\n        return samples[0];\n    }\n\n    public getMSAA(): number {\n        return this._msaa;\n    }\n\n    /**\n     * TODO: replace with cache friendly linked list by BillboardHandler, LabelHandler etc.\n     */\n    public enqueueEntityCollectionsToDraw(ecArr: EntityCollection[]) {\n        this._entityCollections.push.apply(this._entityCollections, ecArr);\n    }\n\n    /**\n     * Draws opaque items entity collections.\n     * @protected\n     */\n    protected _drawOpaqueEntityCollections() {\n        let ec = this._entityCollections;\n\n        if (ec.length) {\n\n            this.enableBlendDefault();\n\n            // pointClouds pass\n            let i = ec.length;\n            while (i--) {\n                ec[i]._fadingOpacity && ec[i].pointCloudHandler.draw();\n            }\n        }\n    }\n\n\n    /**\n     * Draws transparent items entity collections.\n     * @protected\n     */\n    protected _drawTransparentEntityCollections() {\n        let ec = this._entityCollections;\n\n        if (ec.length) {\n            let gl = this.handler.gl!;\n\n            this.enableBlendDefault();\n\n            // GeoObjects\n            let i = ec.length;\n            while (i--) {\n                let eci = ec[i];\n                if (ec[i]._fadingOpacity) {\n                    eci.events.dispatch(eci.events.draw, eci);\n                    ec[i].geoObjectHandler.draw();\n                }\n            }\n\n            // billboards pass\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, this.billboardsTextureAtlas.texture!);\n\n            i = ec.length;\n            while (i--) {\n                let eci = ec[i];\n                eci._fadingOpacity && eci.billboardHandler.draw();\n            }\n\n            // labels pass\n            let fa = this.fontAtlas.atlasesArr;\n            for (i = 0; i < fa.length; i++) {\n                gl.activeTexture(gl.TEXTURE0 + i);\n                gl.bindTexture(gl.TEXTURE_2D, fa[i].texture!);\n            }\n\n            i = ec.length;\n            while (i--) {\n                ec[i]._fadingOpacity && ec[i].labelHandler.draw();\n            }\n\n            // rays\n            i = ec.length;\n            while (i--) {\n                ec[i]._fadingOpacity && ec[i].rayHandler.draw();\n            }\n\n            // polyline pass\n            i = ec.length;\n            while (i--) {\n                ec[i]._fadingOpacity && ec[i].polylineHandler.draw();\n            }\n\n            // Strip pass\n            i = ec.length;\n            while (i--) {\n                ec[i]._fadingOpacity && ec[i].stripHandler.draw();\n            }\n        }\n    }\n\n    protected _clearEntityCollectionQueue() {\n        this._entityCollections.length = 0;\n        this._entityCollections = [];\n    }\n\n    /**\n     * Draw nodes.\n     * @public\n     */\n    public draw() {\n        this.activeCamera!.checkMoveEnd();\n\n        let e = this.events;\n        e.handleEvents();\n\n        let sceneFramebuffer = this.sceneFramebuffer!;\n        sceneFramebuffer.activate();\n\n        let h = this.handler,\n            gl = h.gl!;\n\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        this.enableBlendDefault();\n\n        e.dispatch(e.draw, this);\n\n        let frustums = this.activeCamera!.frustums;\n\n        let pointerEvent = e.pointerEvent();\n        let mouseHold = e.mouseState.leftButtonDown || e.mouseState.rightButtonDown;\n\n        // Rendering scene nodes and entityCollections\n        let rn = this._renderNodesArr;\n        let k = frustums.length;\n\n        while (k--) {\n            this.activeCamera!.setCurrentFrustum(k);\n            gl.clear(gl.DEPTH_BUFFER_BIT);\n\n            let i = rn.length;\n            while (i--) {\n                rn[i].preDrawNode();\n            }\n\n            this._drawOpaqueEntityCollections();\n\n            i = rn.length;\n            while (i--) {\n                this.enableBlendDefault();\n                rn[i].drawNode();\n            }\n\n            this._drawTransparentEntityCollections();\n            this._clearEntityCollectionQueue();\n\n            e.dispatch(e.drawtransparent, this);\n\n            if (pointerEvent && !mouseHold) {\n                this._drawPickingBuffer();\n            }\n            this.__useDistanceFramebuffer__ && this._drawDistanceBuffer();\n        }\n\n        sceneFramebuffer.deactivate();\n\n        this.blitFramebuffer && (sceneFramebuffer as Multisample).blitTo(this.blitFramebuffer, 0);\n\n        if (pointerEvent) {\n            if (h.isWebGl2()) {\n                // It works ONLY for 0 (closest) frustum\n                this._drawDepthBuffer();\n            }\n            this._readPickingBuffer();\n        }\n\n        this.__useDistanceFramebuffer__ && this._readDistanceBuffer();\n\n        // Tone mapping followed by rendering on the screen\n        this._fnScreenFrame!();\n\n        e.dispatch(e.postdraw, this);\n\n        e.mouseState.wheelDelta = 0;\n        e.mouseState.justStopped = false;\n        e.mouseState.moving = false;\n        e.touchState.moving = false;\n    }\n\n    protected _screenFrameMSAA() {\n        let h = this.handler;\n\n        let sh = h.programs.toneMapping,\n            p = sh._program,\n            gl = h.gl!;\n\n        gl.disable(gl.DEPTH_TEST);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.screenFramePositionBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(p.attributes.corners, 2, gl.FLOAT, false, 0, 0);\n\n        this.toneMappingFramebuffer!.activate();\n\n        sh.activate();\n\n        // screen texture\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.blitFramebuffer!.textures[0]);\n        gl.uniform1i(p.uniforms.hdrBuffer, 0);\n\n        gl.uniform1f(p.uniforms.gamma, this.gamma);\n        gl.uniform1f(p.uniforms.exposure, this.exposure);\n        gl.uniform1f(p.uniforms.whitepoint, this.whitepoint);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n        this.toneMappingFramebuffer!.deactivate();\n\n        // SCREEN PASS\n        sh = h.programs.screenFrame;\n        p = sh._program;\n        sh.activate();\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.outputTexture);\n        gl.uniform1i(p.uniforms.texture, 0);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n        gl.enable(gl.DEPTH_TEST);\n    }\n\n    protected _screenFrameNoMSAA() {\n\n        let h = this.handler;\n        let sh = h.programs.screenFrame,\n            p = sh._program,\n            gl = h.gl!;\n\n        gl.disable(gl.DEPTH_TEST);\n        sh.activate();\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.outputTexture);\n        gl.uniform1i(p.uniforms.texture, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.screenFramePositionBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(p.attributes.corners, 2, gl.FLOAT, false, 0, 0);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        gl.enable(gl.DEPTH_TEST);\n    }\n\n    /**\n     * Draw picking objects framebuffer.\n     * @private\n     */\n    protected _drawPickingBuffer() {\n        this.pickingFramebuffer!.activate();\n\n        let h = this.handler;\n        let gl = h.gl!;\n\n        if (this.activeCamera!.isFirstPass) {\n            gl.clearColor(0.0, 0.0, 0.0, 1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        } else {\n            gl.clear(gl.DEPTH_BUFFER_BIT);\n        }\n\n        let dp = this._pickingCallbacks;\n        for (let i = 0, len = dp.length; i < len; i++) {\n            //\n            // draw picking scenes, usually we don't need blending,\n            // but sometimes set it manually in the callbacks\n            //\n            gl.disable(gl.BLEND);\n\n            /**\n             * This callback renders picking frame.\n             */\n            dp[i].callback.call(dp[i].sender);\n            gl.enable(gl.BLEND);\n        }\n\n        this.pickingFramebuffer!.deactivate();\n    }\n\n    /**\n     * Draw picking objects framebuffer.\n     * @protected\n     */\n    protected _drawDistanceBuffer() {\n        this.distanceFramebuffer!.activate();\n\n        let h = this.handler;\n        let gl = h.gl!;\n\n        if (this.activeCamera!.isFirstPass) {\n            gl.clearColor(0.0, 0.0, 0.0, 1.0);\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        } else {\n            gl.clear(gl.DEPTH_BUFFER_BIT);\n        }\n\n        gl.disable(gl.BLEND);\n\n        let dp = this._distanceCallbacks;\n        let i = dp.length;\n        while (i--) {\n            /**\n             * This callback renders distance frame.\n             */\n            dp[i].callback.call(dp[i].sender);\n        }\n\n        gl.enable(gl.BLEND);\n\n        this.distanceFramebuffer!.deactivate();\n    }\n\n    protected _drawDepthBuffer() {\n        this.depthFramebuffer!.activate();\n\n        let h = this.handler;\n        let gl = h.gl!;\n\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        gl.enable(gl.DEPTH_TEST);\n\n        let dp = this._depthCallbacks;\n        let i = dp.length;\n        while (i--) {\n            /**\n             * This callback renders depth frame.\n             */\n            dp[i].callback.call(dp[i].sender);\n        }\n\n        this.depthFramebuffer!.deactivate();\n\n        //\n        // PASS to depth visualization\n        this.screenDepthFramebuffer!.activate();\n        let sh = h.programs.depth, p = sh._program;\n\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.screenFramePositionBuffer as WebGLBuffer);\n        gl.vertexAttribPointer(p.attributes.corners, 2, gl.FLOAT, false, 0, 0);\n\n        sh.activate();\n\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthFramebuffer!.textures[1]);\n        gl.uniform1i(p.uniforms.depthTexture, 0);\n\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n        this.screenDepthFramebuffer!.deactivate();\n    }\n\n    protected _readPickingBuffer_webgl1 = () => {\n        this.pickingFramebuffer!.activate();\n        this.pickingFramebuffer!.readAllPixels(this._tempPickingPix_);\n        this.pickingFramebuffer!.deactivate();\n    }\n\n    protected _readPickingBuffer_webgl2 = () => {\n\n        const gl = this.handler.gl!;\n        const buf = this._pickingPixelBuffer;\n\n        if (!this._skipPickingFrame) {\n\n            this._skipPickingFrame = true;\n\n            let dest = this._tempPickingPix_;\n\n            let w = this.pickingFramebuffer!.width,\n                h = this.pickingFramebuffer!.height;\n\n            this.pickingFramebuffer!.activate();\n            gl.bindBuffer(gl.PIXEL_PACK_BUFFER, buf);\n            gl.bufferData(gl.PIXEL_PACK_BUFFER, dest.byteLength, gl.STREAM_READ);\n            gl.readPixels(0, 0, w, h, gl.RGBA, gl.UNSIGNED_BYTE, 0);\n            gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);\n            this.pickingFramebuffer!.deactivate();\n\n            const sync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0)!;\n            gl.flush();\n\n            clientWaitAsync(gl, sync, 0).then(() => {\n                this._skipPickingFrame = false;\n                gl.deleteSync(sync);\n                gl.bindBuffer(gl.PIXEL_PACK_BUFFER, buf);\n                gl.getBufferSubData(gl.PIXEL_PACK_BUFFER, 0, dest);\n                gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);\n            });\n        }\n    }\n\n    protected _readDistanceBuffer_webgl1 = () => {\n        this.distanceFramebuffer!.activate();\n        this.distanceFramebuffer!.readAllPixels(this._tempDistancePix_);\n        this.distanceFramebuffer!.deactivate();\n    }\n\n    protected _readDistanceBuffer_webgl2 = () => {\n\n        const gl = this.handler.gl!;\n        const buf = this._distancePixelBuffer;\n\n        if (!this._skipDistanceFrame) {\n\n            this._skipDistanceFrame = true;\n\n            let dest = this._tempDistancePix_;\n\n            let w = this.distanceFramebuffer!.width,\n                h = this.distanceFramebuffer!.height;\n\n            this.distanceFramebuffer!.activate();\n            gl.bindBuffer(gl.PIXEL_PACK_BUFFER, buf);\n            gl.bufferData(gl.PIXEL_PACK_BUFFER, dest.byteLength, gl.STREAM_READ);\n            gl.readPixels(0, 0, w, h, gl.RGBA, gl.UNSIGNED_BYTE, 0);\n            gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);\n            this.distanceFramebuffer!.deactivate();\n\n            const sync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0)!;\n            gl.flush();\n\n            clientWaitAsync(gl, sync, 0).then(() => {\n                this._skipDistanceFrame = false;\n                gl.deleteSync(sync);\n                gl.bindBuffer(gl.PIXEL_PACK_BUFFER, buf);\n                gl.getBufferSubData(gl.PIXEL_PACK_BUFFER, 0, dest);\n                gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);\n            });\n        }\n    }\n\n    public readPickingColor(x: number, y: number, outColor: NumberArray3 | Uint8Array) {\n        let w = this.pickingFramebuffer!.width;\n        let h = this.pickingFramebuffer!.height;\n\n        x = Math.round(x * w);\n        y = Math.round(y * h);\n\n        let ind = (y * w + x) * 4;\n\n        outColor[0] = this._tempPickingPix_[ind];\n        outColor[1] = this._tempPickingPix_[ind + 1];\n        outColor[2] = this._tempPickingPix_[ind + 2];\n    }\n\n    public readDistanceColor(x: number, y: number, outColor: NumberArray3 | Uint8Array) {\n\n        let w = this.distanceFramebuffer!.width;\n        let h = this.distanceFramebuffer!.height;\n\n        x = Math.round(x * w);\n        y = Math.round(y * h);\n\n        let ind = (y * w + x) * 4;\n\n        outColor[0] = this._tempDistancePix_[ind];\n        outColor[1] = this._tempDistancePix_[ind + 1];\n        outColor[2] = this._tempDistancePix_[ind + 2];\n    }\n\n    /**\n     * Function starts renderer\n     * @public\n     */\n    public start() {\n        if (!this._initialized) {\n            this.initialize();\n        }\n        this.handler.start();\n    }\n\n    public destroy() {\n        for (let i in this.controls) {\n            this.controls[i].remove();\n        }\n\n        for (let i = 0; i < this._renderNodesArr.length; i++) {\n            this._renderNodesArr[i].remove();\n        }\n\n        this.div = null;\n\n        this._renderNodesArr = [];\n\n        this.renderNodes = {};\n\n        this.activeCamera = null;\n\n        this.controls = {};\n\n        this.controlsBag = {};\n\n        this.colorObjects.clear();\n\n        // @ts-ignore\n        this.colorObjects = null;\n\n        this._pickingCallbacks = [];\n\n        this.pickingFramebuffer = null;\n\n        //@ts-ignore\n        this._tempPickingPix_ = null;\n\n        this.distanceFramebuffer = null;\n\n        this._distanceCallbacks = [];\n\n        //@ts-ignore\n        this._tempDistancePix_ = null;\n\n        this._depthCallbacks = [];\n\n        this.depthFramebuffer = null;\n\n        this.sceneFramebuffer = null;\n\n        this.blitFramebuffer = null;\n\n        this.toneMappingFramebuffer = null;\n\n        // todo\n        //this.billboardsTextureAtlas.clear();\n        //this.geoObjectsTextureAtlas.clear()\n        //this.fontAtlas.clear();\n\n        this._entityCollections = [];\n\n        this.handler.ONCANVASRESIZE = null;\n        this.handler.destroy();\n\n        // @ts-ignore\n        this.handler = null;\n\n        this._initialized = false;\n    }\n\n}\n\nexport {Renderer};\n","// #StandWithUkraine\n\nimport {CompassButton} from \"./control/CompassButton\";\nimport {Control} from \"./control/Control\";\nimport {EarthCoordinates} from \"./control/EarthCoordinates\";\nimport {EarthNavigation} from \"./control/EarthNavigation\";\nimport {Ellipsoid} from \"./ellipsoid/Ellipsoid\";\nimport {EmptyTerrain} from \"./terrain/EmptyTerrain\";\nimport {Handler} from \"./webgl/Handler\";\nimport {isEmpty} from \"./utils/shared\";\nimport {Layer} from \"./layer/Layer\";\nimport {MouseNavigation} from \"./control/MouseNavigation\";\nimport {NumberArray2} from \"./math/Vec2\";\nimport {NumberArray4} from \"./math/Vec4\";\nimport {Planet} from \"./scene/Planet\";\nimport {ScaleControl} from \"./control/ScaleControl\";\nimport {Sun} from \"./control/Sun\";\nimport {TouchNavigation} from \"./control/TouchNavigation\";\nimport {HTMLDivElementExt, Renderer} from \"./renderer/Renderer\";\nimport {RenderNode} from \"./scene/RenderNode\";\nimport {ZoomControl} from \"./control/ZoomControl\";\nimport {Extent} from \"./Extent\";\nimport {IAtmosphereParams} from \"./control/Atmosphere\";\n\nexport interface IGlobeParams {\n    attributionContainer?: HTMLElement;\n    target?: string | HTMLElement;\n    skybox?: RenderNode;\n    dpi?: number;\n    msaa?: number;\n    name?: string;\n    frustums?: NumberArray2[];\n    ellipsoid?: Ellipsoid;\n    maxGridSize?: number;\n    nightTextureSrc?: string | null;\n    specularTextureSrc?: string | null;\n    minAltitude?: number;\n    maxAltitude?: number;\n    maxEqualZoomAltitude?: number;\n    minEqualZoomAltitude?: number;\n    minEqualZoomCameraSlope?: number;\n    quadTreeStrategyPrototype?: any;\n    maxLoadingRequests?: number;\n    atmosphereEnabled?: boolean;\n    transitionOpacityEnabled?: boolean;\n    terrain?: EmptyTerrain;\n    controls?: Control[];\n    useEarthNavigation?: boolean;\n    minSlope?: number;\n    sun?: {\n        active?: boolean;\n        stopped?: boolean\n    };\n    layers?: Layer[];\n    viewExtent?: Extent | NumberArray4;\n    autoActivate?: boolean;\n\n    fontsSrc?: string;\n    resourcesSrc?: string;\n    atmosphereParameters?: IAtmosphereParams;\n    gamma?: number;\n    exposure?: number;\n}\n\nconst DEFAULT_NIGHT_SRC = `/night.png`;\nconst DEFAULT_SPEC_SRC = `/spec.png`;\nconst DEFAULT_RESOURCES_SRC = '/res';\n\n/** @const {string} */\nconst PLANET_NAME_PREFIX = \"globus_planet_\";\n\n/**\n * Creates a WebGL context with globe.\n * @class\n *\n * @example <caption>Basic initialization</caption>\n * globus = new Globe({\n *     'atmosphere': false,\n *     'target': 'globus',\n *     'name': 'Earth',\n *     'controls': [\n *          new control.MouseNavigation({ autoActivate: true }),\n *          new control.KeyboardNavigation({ autoActivate: true }),\n *          new control.EarthCoordinates({ autoActivate: true, center: false }),\n *          new control.LayerSwitcher({ autoActivate: true }),\n *          new control.ZoomControl({ autoActivate: true }),\n *          new control.TouchNavigation({ autoActivate: true }),\n *          new control.Sun({ autoActivate: true })\n *      ],\n *     'terrain': new GlobusTerrain(),\n *     'layers': [\n *          new XYZ(\"OpenStreetMap\", { isBaseLayer: true, url: \"http://b.tile.openstreetmap.org/{z}/{x}/{y}.png\", visibility: true, attribution: 'Data @ <a href=\"http://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"http://www.openstreetmap.org/copyright\">ODbL</a>' })\n *      ],\n *     'autoActivate': true\n * });\n *\n * @param {IGlobeParams} options - Options:\n * @param {string|HTMLElement} options.target - HTML element id where planet canvas have to be created.\n * @param {string} [options.name] - Planet name. Default is uniq identifier.\n * @param {EmptyTerrain} [options.terrain] - Terrain provider. Default no terrain - og.terrain.EmptyTerrain.\n * @param {Array.<Control>} [options.controls] - Renderer controls array.\n * @param {Array.<Layer>} [options.layers] - Planet layers.\n * @param {Extent| [[number, number],[number, number]]} [options.viewExtent] - Viewable starting extent.\n * @param {boolean} [options.autoActivate=true] - Globe rendering auto activation flag. True is default.\n * @param {HTMLElement} [options.attributionContainer] - Container for attribution list.\n * @param {number} [options.maxGridSize=128] = Maximal segment grid size. 128 is default\n * @param {string} [options.fontsSrc] -  Fonts collection url.\n * @param {string} [options.resourcesSrc] - Resources root src.\n * @param {string} [options.nightTextureSrc] - Night glowing image sources\n * @param {string} [options.specularTextureSrc] - Specular water mask image sourcr\n * @param {number} [options.maxAltitude=15000000.0] - Maximal camera altitude above terrain\n * @param {number} [options.minAltitude=1.0] - Minimal camera altitude above terrain\n * @param {number} [options.maxEqualZoomAltitude=15000000.0] - Maximal altitude since segments on the screen became the same zoom level\n * @param {number} [options.minEqualZoomAltitude=10000.0] - Minimal altitude since segments on the screen became the same zoom level\n * @param {number} [options.minEqualZoomCameraSlope=0.8] - Minimal camera slope above te globe where segments on the screen became the same zoom level\n * @param {number} [options.loadingBatchSize=12] -\n * @param {number} [options.quadTreeStrategyPrototype] - Prototype of quadTree. QuadTreeStrategy for Earth is default.\n * @param {number} [options.msaa=0] - MSAA antialiasing parameter: 2,4,8,16. Default is 0.\n * @param {number} [options.dpi] - Device pixel ratio. Default is current screen DPI.\n * @param {boolean} [options.atmosphereEnabled] - Enables atmosphere effect.\n * @param {boolean} [options.transtitionOpacityEnabled] - Enables terrain smooth opacity transition effect.\n * @param {IAtmosphereParams} [options.atmosphereParameters] - Atmosphere model parameters.\n * @param {number} [options.gamma] - Gamma\n * @param {number} [options.exposure] - Exposure\n */\n\nclass Globe {\n\n    static __counter__: number = 0;\n\n    public $target: HTMLElement | null;\n\n    protected _instanceID: string;\n\n    protected _canvas: HTMLCanvasElement;\n\n    public $inner: HTMLDivElementExt;\n\n    /**\n     * Interface for the renderer context(events, input states, renderer nodes etc.)\n     * @public\n     * @type {Renderer}\n     */\n    public renderer: Renderer;\n\n    /**\n     * Planet node name. Access with this.renderer.<name>\n     * @private\n     * @type {String}\n     */\n    protected _planetName: string;\n\n    public planet: Planet;\n\n    public sun: Sun;\n\n    constructor(options: IGlobeParams) {\n\n        this.$target = null;\n\n        this._instanceID = `__globus${Globe.__counter__++ ? Globe.__counter__ : \"\"}__`;\n        (window as any)[this._instanceID] = this;\n\n        //\n        // Canvas creation\n        //\n        this._canvas = document.createElement(\"canvas\");\n        this._canvas.id = `canvas${this._instanceID}`;\n        this._canvas.style.width = \"100%\";\n        this._canvas.style.height = \"100%\";\n        this._canvas.style.display = \"block\";\n        this._canvas.style.opacity = \"0.0\";\n        this._canvas.style.transition = \"opacity 150ms\";\n\n        /**\n         * Dom element where WebGL canvas creates\n         * @public\n         * @type {Element}\n         */\n        this.$inner = document.createElement('div');\n        this.$inner.classList.add(\"og-inner\");\n        this.$inner.appendChild(this._canvas);\n\n        this.$inner.attributions = document.createElement('div');\n        if (options.attributionContainer) {\n            options.attributionContainer.appendChild(this.$inner.attributions);\n        } else {\n            this.$inner.attributions.classList.add(\"og-attribution\");\n            this.$inner.appendChild(this.$inner.attributions);\n        }\n\n        if (options.target) {\n            this.attachTo(options.target);\n        }\n\n        const _disableWheel = (e: Event) => {\n            e.preventDefault();\n        }\n\n        this._canvas.onmouseenter = function () {\n            document.addEventListener(\"mousewheel\", _disableWheel, {\n                capture: false,\n                passive: false\n            });\n        };\n        this._canvas.onmouseleave = function () {\n            document.removeEventListener(\"mousewheel\", _disableWheel);\n        };\n\n        this.renderer = new Renderer(\n            new Handler(this._canvas, {\n                autoActivate: false,\n                pixelRatio: options.dpi || (window.devicePixelRatio + 0.15),\n                context: {\n                    //alpha: false,\n                    antialias: false,\n                    premultipliedAlpha: false\n                }\n            }), {\n                autoActivate: false,\n                msaa: options.msaa,\n                fontsSrc: options.fontsSrc,\n                gamma: options.gamma,\n                exposure: options.exposure,\n            }\n        );\n\n        this.renderer.div = this.$inner;\n\n        // Skybox\n        if (options.skybox) {\n            this.renderer.addNode(options.skybox);\n        }\n\n        this._planetName = options.name ? options.name : PLANET_NAME_PREFIX + Globe.__counter__;\n\n        this.planet = new Planet({\n            name: this._planetName,\n            frustums: options.frustums,\n            ellipsoid: options.ellipsoid,\n            maxGridSize: options.maxGridSize,\n            nightTextureSrc: options.nightTextureSrc === null ? null : `${options.resourcesSrc || DEFAULT_RESOURCES_SRC}${DEFAULT_NIGHT_SRC}`,\n            specularTextureSrc: options.specularTextureSrc === null ? null : `${options.resourcesSrc || DEFAULT_RESOURCES_SRC}${DEFAULT_SPEC_SRC}`,\n            minAltitude: options.minAltitude,\n            maxAltitude: options.maxAltitude || 15000000,\n            maxEqualZoomAltitude: options.maxEqualZoomAltitude,\n            minEqualZoomAltitude: options.minEqualZoomAltitude,\n            minEqualZoomCameraSlope: options.minEqualZoomCameraSlope,\n            quadTreeStrategyPrototype: options.quadTreeStrategyPrototype,\n            maxLoadingRequests: options.maxLoadingRequests,\n            atmosphereEnabled: options.atmosphereEnabled,\n            transitionOpacityEnabled: options.transitionOpacityEnabled,\n            atmosphereParameters: options.atmosphereParameters,\n        });\n\n        // Attach terrain provider (can be one object or array)\n        if (options.terrain) {\n            //@todo: refactoring\n            if (Array.isArray(options.terrain)) {\n                this.planet.setTerrain(options.terrain[0]); // If array get the terrain from 1st element\n            } else {\n                this.planet.setTerrain(options.terrain);\n            }\n        } else {\n            this.planet.setTerrain(new EmptyTerrain());\n        }\n\n        this.renderer.addNode(this.planet);\n\n        // Add controls\n        if (options.controls) {\n            this.planet.addControls(options.controls);\n        } else {\n            this.planet.addControls([\n                new ZoomControl(),\n                options.useEarthNavigation ? new EarthNavigation() : new MouseNavigation({minSlope: options.minSlope}),\n                new TouchNavigation(),\n                new EarthCoordinates(),\n                new ScaleControl(),\n                new CompassButton()\n            ]);\n        }\n\n        const _controls = this.renderer.controls;\n        let sun;\n        for (let i in _controls) {\n            if (_controls[i] instanceof Sun) {\n                sun = _controls[i] as Sun;\n                break;\n            }\n        }\n\n        if (!sun) {\n            this.sun = new Sun();\n            this.planet.addControl(this.sun);\n        } else {\n            this.sun = sun;\n        }\n\n        if (options.sun) {\n            if (options.sun.active !== undefined && !options.sun.active) {\n                this.sun.deactivate();\n            }\n            if (options.sun.stopped === true) {\n                this.sun.stop();\n            }\n        }\n\n        if (options.layers) {\n            this.planet.addLayers(options.layers);\n        }\n\n        // TODO: view center, altitude, extent\n        let ve = options.viewExtent;\n        if (ve) {\n            if (ve instanceof Array) {\n                this.planet.viewExtentArr(ve);\n            } else {\n                this.planet.viewExtent(ve as Extent);\n            }\n        }\n\n        // Run!\n        if (options.autoActivate || isEmpty(options.autoActivate)) {\n            this.start();\n        }\n    }\n\n    public start() {\n        this.renderer.start();\n        this.fadeIn();\n    }\n\n    /**\n     * Starts screen brightness fading in effect by the duration time.\n     * @public\n     */\n    public fadeIn() {\n        this._canvas.style.opacity = \"1.0\";\n    }\n\n    /**\n     * Starts screen brightness fading out effect by the duration time.\n     * @public\n     */\n    public fadeOut() {\n        this._canvas.style.opacity = \"0\";\n    }\n\n    public attachTo(target: HTMLElement | string, isFirst?: boolean) {\n\n        this.detach();\n\n        let t;\n        if (target instanceof HTMLElement) {\n            t = target;\n        } else {\n            t = document.getElementById(target) || document.querySelector(target);\n        }\n\n        if (t) {\n            this.$target = t as HTMLElement;\n            if (isFirst && this.$target.firstChild) {\n                this.$target.insertBefore(this.$inner, this.$target.firstChild);\n            } else {\n                t.appendChild(this.$inner);\n            }\n        }\n    }\n\n    public detach() {\n        if (this.$target) {\n            // Remember that when container is zero\n            // sized(display none etc.) renderer frame will be stopped\n            this.$target.removeChild(this.$inner);\n            this.$target = null;\n        }\n    }\n\n    public destroy() {\n        this.detach();\n        this.planet.layers.forEach(l => l.remove());\n        this.planet.destroy();\n        this.renderer.destroy();\n        (window as any)[this._instanceID] = null;\n    }\n}\n\nexport {Globe};\n","import {Ellipsoid} from \"./Ellipsoid\";\n\n/**\n * Mars ellipsoid object.\n * @type {Ellipsoid}\n */\nexport const mars = new Ellipsoid(3396200.0, 3389508.0);\n","import {Ellipsoid} from \"./Ellipsoid\";\n\n/**\n * Moon ellipsoid object.\n * @type {Ellipsoid}\n */\nexport const moon = new Ellipsoid(1737400.0, 1737400.0); // Equitorial Radius (m), Polar Radius (m)\n","import {CLOSE_ICON} from './ui/icons';\nimport {createLonLat, stringTemplate} from \"./utils/shared\";\nimport {EventsHandler} from \"./Events\";\nimport {LonLat} from \"./LonLat\";\nimport {Planet} from \"./scene/Planet\";\nimport {NumberArray2, Vec2} from \"./math/Vec2\";\nimport {NumberArray3, Vec3} from \"./math/Vec3\";\nimport {View, IViewParams, ViewEventsList} from './ui/View';\n\nconst TEMPLATE = `<div class=\"og-popup {className}\">\n      <div class=\"og-popup-content-wrapper\">\n        <div class=\"og-popup-content\"></div>\n      </div>\n      <div class=\"og-popup-tip-container\">\n        <div class=\"og-popup-tip\"></div>\n      </div>\n      <div class=\"og-popup-toolbar\">\n        <div class=\"og-popup-btn og-popup-close\">${CLOSE_ICON}</div>\n      </div>\n      <div class=\"og-popup-title\">{title}</div>\n    </div>`;\n\ninterface IPopupParams extends IViewParams {\n    planet: Planet;\n    title?: string;\n    className?: string;\n    visibility?: boolean;\n    content?: string;\n    offset?: NumberArray2;\n    lonLat?: LonLat | NumberArray2 | NumberArray3;\n}\n\ntype PopupEventsList = [\"open\", \"close\"];\nconst POPUP_EVENTS: PopupEventsList = [\"open\", \"close\"];\n\nclass Popup extends View<null> {\n\n    public override events: EventsHandler<PopupEventsList> & EventsHandler<ViewEventsList>;\n\n    public $content: HTMLElement | null;\n    public $tip: HTMLElement | null;\n    public $title: HTMLElement | null;\n\n    protected _content: string | HTMLElement | null;\n\n    protected _planet: Planet;\n\n    protected _offset: NumberArray2;\n\n    protected _lonLat: LonLat;\n\n    protected _cartPos: Vec3;\n\n    protected _visibility: boolean;\n\n    constructor(options: IPopupParams) {\n        super({\n            template: stringTemplate(TEMPLATE, {\n                title: options.title || \"\"\n            }),\n            classList: options.className ? [options.className] : [],\n            ...options\n        });\n\n        //@ts-ignore\n        this.events = this.events.registerNames(POPUP_EVENTS);\n\n        this._content = options.content || \"\";\n\n        this.$content = null;\n        this.$tip = null;\n        this.$title = null;\n\n        this._planet = options.planet;\n\n        this._offset = options.offset || [0, 0];\n\n        this._lonLat = createLonLat(options.lonLat);\n\n        this._cartPos = new Vec3();\n\n        this._visibility = options.visibility || false;\n\n        this.render();\n    }\n\n    _updatePosition() {\n        this.setCartesian3v(this._cartPos);\n    }\n\n    public setScreen(p: Vec2) {\n        if (this._planet) {\n            let r = this._planet.renderer!.handler.pixelRatio;\n            this.el!.style.transform =\n                `translate(${p.x / r - this.clientWidth * 0.5}px, ${p.y / r - this._planet.renderer!.handler.canvas!.clientHeight - this.$tip!.clientHeight}px)`;\n        }\n    }\n\n    public get clientWidth(): number {\n        return this.el ? this.el.clientWidth : 0;\n    }\n\n    public get clientHeight(): number {\n        return this.el ? this.el.clientHeight : 0;\n    }\n\n    public setOffset(x: number = 0, y: number = 0): this {\n        this._offset[0] = x;\n        this._offset[1] = y;\n        if (this.el) {\n            this.el.style.left = `${x}px`;\n            this.el.style.bottom = `${y}px`;\n        }\n        return this;\n    }\n\n    public override render(params?: any): this {\n        super.render(params);\n\n        this.$content = this.select(\".og-popup-content\")!;\n        this.$title = this.select(\".og-popup-title\")!;\n        this.$tip = this.select(\".og-popup-tip-container\")!;\n\n        this.setOffset(this._offset[0], this._offset[1]);\n        this.setContent(this._content);\n        this.setLonLat(this._lonLat);\n        this.setVisibility(this._visibility);\n        this.select(\".og-popup-close\")!.addEventListener(\"click\", () => {\n            this.hide();\n        });\n\n        return this;\n    }\n\n    public setVisibility(visibility: boolean): this {\n        if (visibility) {\n            this.show();\n        } else {\n            this.hide();\n        }\n        return this;\n    }\n\n    public getContainer(): HTMLElement | null {\n        return this.$content;\n    }\n\n    public getToolbarContainer(): HTMLElement {\n        return this.select(\".og-popup-toolbar\")!;\n    }\n\n    public show(): this {\n        this._visibility = true;\n        if (this._planet) {\n            this._planet.events.on(\"draw\", this._updatePosition, this);\n            this.appendTo(this._planet.renderer!.div as HTMLElement);\n            this.events.dispatch(this.events.open, this);\n        }\n        return this;\n    }\n\n    public hide(): this {\n        this._visibility = false;\n        if (this.el && this.el.parentNode) {\n            this._planet.events.off(\"draw\", this._updatePosition);\n            this.el.parentNode.removeChild(this.el);\n            this.events.dispatch(this.events.close, this);\n        }\n        return this;\n    }\n\n    public setCartesian3v(cart: Vec3, height: number = 0): this {\n        this._cartPos = cart;\n\n        if (this._planet) {\n            let cam = this._planet.camera;\n            let f = this._planet.ellipsoid.equatorialSize + height,\n                g = cam._lonLat.height;\n\n            let look = cart.sub(cam.eye),\n                v = Math.sqrt((f + g) * (f + g) - f * f);\n\n            if (v > look.length() && cam.getForward().dot(look.normalize()) > 0.0) {\n                this.el!.style.display = \"block\";\n                this.setScreen(cam.project(cart));\n            } else {\n                this.el!.style.display = \"none\";\n            }\n        }\n        return this;\n    }\n\n    public setTitle(html: string) {\n        if (this.$title) {\n            this.$title.innerHTML = html;\n        }\n    }\n\n    public setLonLat(lonLat: LonLat) {\n        this._lonLat = lonLat;\n        if (this._planet) {\n            this.setCartesian3v(this._planet.ellipsoid.lonLatToCartesian(lonLat), lonLat.height);\n        }\n    }\n\n    public setContent(content?: string | HTMLElement | null) {\n        if (content) {\n            this.clear();\n            this._content = content;\n            if (this.$content) {\n                if (typeof content === \"string\") {\n                    this.$content.innerHTML = content;\n                } else {\n                    this.$content.appendChild(content);\n                }\n            }\n        }\n    }\n\n    public clear() {\n        this._content = null;\n        if (this.$content) {\n            this.$content.innerHTML = \"\";\n        }\n    }\n}\n\nexport {Popup};\n","import {Extent} from \"../Extent\";\nimport {Node} from \"../quadTree/Node\";\nimport {Planet} from \"../scene/Planet\";\nimport {SegmentLonLat} from \"./SegmentLonLat\";\nimport {getTileCellIndex, TILEGROUP_COMMON, TILEGROUP_NORTH} from \"./Segment\";\nimport {equi} from \"../proj/equi\";\n\nexport class SegmentLonLatEqui extends SegmentLonLat {\n    constructor(node: Node, planet: Planet, tileZoom: number, extent: Extent) {\n        super(node, planet, tileZoom, extent);\n        this._projection = equi;\n        this.isPole = false;\n        this._tileGroup = TILEGROUP_COMMON;\n    }\n\n    protected override _getMaxZoom(): number {\n        return 150;\n    }\n\n    protected override _assignTileYIndexes(extent: Extent) {\n        const lat = extent.getCenter().lat;\n        this.tileY = getTileCellIndex(lat, extent.getHeight(), 90.0);\n        this.tileYN = this.tileY - 1;\n        this.tileYS = this.tileY + 1;\n    }\n\n    protected override _assignTileXIndexes(extent: Extent) {\n        let lon = extent.getCenter().lon;\n        this.tileX = getTileCellIndex(lon, extent.getWidth(), -180);\n        let p2 = (1 << this.tileZoom) * 2;\n        this.tileXE = (this.tileX + 1) % p2;\n        this.tileXW = (p2 + this.tileX - 1) % p2;\n    }\n}","import {EntityCollectionsTreeStrategy} from \"../EntityCollectionsTreeStrategy\";\nimport {Extent} from \"../../Extent\";\nimport {Planet} from \"../../scene/Planet\";\nimport {LonLat} from \"../../LonLat\";\nimport {NE, NW, SE, SW} from \"../quadTree\";\nimport {Entity} from \"../../entity/Entity\";\nimport {EntityCollection} from \"../../entity/EntityCollection\";\nimport {EntityCollectionNode, NodesDict} from \"../EntityCollectionNode\";\nimport {EquiEntityCollectionsTreeStrategy} from \"./EquiEntityCollectionsTreeStrategy\";\n\nexport class EquiEntityCollectionNodeLonLat extends EntityCollectionNode {\n\n    public override strategy: EquiEntityCollectionsTreeStrategy;\n\n    constructor(strategy: EquiEntityCollectionsTreeStrategy, partId: number, parent: EquiEntityCollectionNodeLonLat | null, extent: Extent, planet: Planet, zoom: number) {\n        super(strategy, partId, parent, extent, planet, zoom);\n        this.strategy = strategy;\n    }\n\n    public override createChildrenNodes() {\n        const s = this.strategy;\n        const ext = this.extent;\n        const size_x = ext.getWidth() * 0.5;\n        const size_y = ext.getHeight() * 0.5;\n        const ne = ext.northEast;\n        const sw = ext.southWest;\n        const c = new LonLat(sw.lon + size_x, sw.lat + size_y);\n        const nd = this.childrenNodes;\n        const p = this.layer._planet!;\n        const z = this.zoom + 1;\n\n        nd[NW] = new EquiEntityCollectionNodeLonLat(s, NW, this, new Extent(new LonLat(sw.lon, sw.lat + size_y), new LonLat(sw.lon + size_x, ne.lat)), p, z);\n        nd[NE] = new EquiEntityCollectionNodeLonLat(s, NE, this, new Extent(c, new LonLat(ne.lon, ne.lat)), p, z);\n        nd[SW] = new EquiEntityCollectionNodeLonLat(s, SW, this, new Extent(new LonLat(sw.lon, sw.lat), c), p, z);\n        nd[SE] = new EquiEntityCollectionNodeLonLat(s, SE, this, new Extent(new LonLat(sw.lon + size_x, sw.lat), new LonLat(ne.lon, sw.lat + size_y)), p, z);\n    }\n\n    protected override _setExtentBounds() {\n        this.bsphere.setFromExtent(this.layer._planet!.ellipsoid, this.extent);\n    }\n\n    public override __setLonLat__(entity: Entity): LonLat {\n        if (entity._lonLat.isZero()) {\n            entity._lonLat = this.layer._planet!.ellipsoid.cartesianToLonLat(entity._cartesian);\n        }\n        return entity._lonLat;\n    }\n\n    public override isVisible(): boolean {\n        if (this.strategy._renderingNodesWest[this.nodeId]) {\n            return true;\n        } else if (this.strategy._renderingNodesEast[this.nodeId]) {\n            return true;\n        }\n        return false;\n    }\n\n    public override isInside(entity: Entity): boolean {\n        return this.extent.isInside(entity._lonLat);\n    }\n\n    public override renderCollection(outArr: EntityCollection[], visibleNodes: NodesDict, renderingNode: number) {\n\n        if (this.extent.southWest.lon < 0) {\n            this.strategy._renderingNodesWest[this.nodeId] = true;\n        } else {\n            this.strategy._renderingNodesEast[this.nodeId] = true;\n        }\n\n        if (this.deferredEntities.length && !this._inTheQueue) {\n            if (this.layer.async) {\n                this.strategy._queueDeferredNode(this);\n            } else {\n                this.applyCollection();\n            }\n        }\n\n        const ec = this.entityCollection!;\n\n        ec._fadingOpacity = this.layer._fadingOpacity;\n        ec.scaleByDistance = this.layer.scaleByDistance;\n        ec.pickingScale = this.layer.pickingScale;\n\n        if (!ec.isEmpty()) {\n            outArr.push(ec);\n        }\n    }\n}\n","import {Vector} from \"../../layer/Vector\";\nimport * as quadTree from \"../quadTree\";\nimport {Extent} from \"../../Extent\";\nimport {Entity} from \"../../entity/Entity\";\nimport {EntityCollection} from \"../../entity/EntityCollection\";\nimport {EquiQuadTreeStrategy} from \"./EquiQuadTreeStrategy\";\nimport {EntityCollectionsTreeStrategy} from \"../EntityCollectionsTreeStrategy\";\nimport {EquiEntityCollectionNodeLonLat} from \"./EquiEntityCollectionNodeLonLat\";\n\nexport class EquiEntityCollectionsTreeStrategy extends EntityCollectionsTreeStrategy {\n\n    protected _entityCollectionsTreeWest: EquiEntityCollectionNodeLonLat;\n    protected _entityCollectionsTreeEast: EquiEntityCollectionNodeLonLat;\n\n    public _renderingNodesWest: Record<number, boolean>;\n    public _renderingNodesEast: Record<number, boolean>;\n\n    constructor(layer: Vector, nodeCapacity: number) {\n        super(layer, nodeCapacity);\n\n        let planet = layer._planet!;\n\n        this._entityCollectionsTreeWest = new EquiEntityCollectionNodeLonLat(\n            this,\n            quadTree.NW,\n            null,\n            Extent.createFromArray([-180, -90, 0, 90]),\n            planet,\n            0\n        );\n\n        this._entityCollectionsTreeEast = new EquiEntityCollectionNodeLonLat(\n            this,\n            quadTree.NW,\n            null,\n            Extent.createFromArray([0, -90, 180, 90]),\n            planet,\n            0\n        );\n\n        this._renderingNodesWest = {};\n        this._renderingNodesEast = {};\n    }\n\n    public override insertEntity(entity: Entity, rightNow: boolean = false) {\n        if (entity._lonLat.lon < 0) {\n            this._entityCollectionsTreeWest!.__setLonLat__(entity);\n            this._entityCollectionsTreeWest!.insertEntity(entity, rightNow);\n        } else {\n            this._entityCollectionsTreeEast!.__setLonLat__(entity);\n            this._entityCollectionsTreeEast!.insertEntity(entity, rightNow);\n        }\n    }\n\n    public override setPickingEnabled(pickingEnabled: boolean) {\n        this._entityCollectionsTreeWest.traverseTree((node: EquiEntityCollectionNodeLonLat) => {\n            node.entityCollection!.setPickingEnabled(pickingEnabled);\n        });\n\n        this._entityCollectionsTreeEast.traverseTree((node: EquiEntityCollectionNodeLonLat) => {\n            node.entityCollection!.setPickingEnabled(pickingEnabled);\n        });\n    }\n\n    public override dispose() {\n        //@ts-ignore\n        this._entityCollectionsTreeWest = null;\n        //@ts-ignore\n        this._entityCollectionsTreeEast = null;\n\n        this._renderingNodesWest = {};\n        this._renderingNodesEast = {};\n    }\n\n    public override insertEntities(entitiesForTree: Entity[]) {\n        let westEntities: Entity[] = [],\n            eastEntities: Entity[] = [];\n        for (let i = 0, len = entitiesForTree.length; i < len; i++) {\n            let entity = entitiesForTree[i];\n            if (entity._lonLat.lon < 0) {\n                westEntities.push(entity);\n                this._entityCollectionsTreeWest.__setLonLat__(entity);\n            } else {\n                eastEntities.push(entity);\n                this._entityCollectionsTreeEast.__setLonLat__(entity);\n            }\n        }\n\n        this._entityCollectionsTreeWest.buildTree(westEntities);\n        this._entityCollectionsTreeEast.buildTree(eastEntities);\n    }\n\n    public override collectVisibleEntityCollections(outArr: EntityCollection[]) {\n        this._renderingNodesWest = {};\n        this._renderingNodesEast = {};\n\n        let pqs = this._layer._planet!.quadTreeStrategy as EquiQuadTreeStrategy;\n\n        // Wset\n        this._secondPASS = [];\n        this._entityCollectionsTreeWest.collectRenderCollectionsPASS1(pqs._visibleNodesWest, outArr);\n        let i = this._secondPASS.length;\n        while (i--) {\n            this._secondPASS[i].collectRenderCollectionsPASS2(pqs._visibleNodesWest, outArr, this._secondPASS[i].nodeId);\n        }\n\n        // East\n        this._secondPASS = [];\n        this._entityCollectionsTreeEast.collectRenderCollectionsPASS1(pqs._visibleNodesEast, outArr);\n        i = this._secondPASS.length;\n        while (i--) {\n            this._secondPASS[i].collectRenderCollectionsPASS2(pqs._visibleNodesEast, outArr, this._secondPASS[i].nodeId);\n        }\n    }\n}","import * as quadTree from \"../quadTree\";\nimport {Extent} from \"../../Extent\";\nimport {equi} from \"../../proj/equi\";\nimport {Node} from \"../Node\";\nimport {Planet} from \"../../scene/Planet\";\nimport {SegmentLonLatEqui} from \"../../segment/SegmentLonLatEqui\";\nimport {QuadTreeStrategy} from \"../QuadTreeStrategy\";\nimport {LonLat} from \"../../LonLat\";\nimport {\n    getTileCellExtent,\n    getTileCellIndex,\n    TILEGROUP_COMMON\n} from \"../../segment/Segment\";\nimport {Vector} from \"../../layer/Vector\";\nimport {EntityCollectionsTreeStrategy} from \"../EntityCollectionsTreeStrategy\";\nimport {EquiEntityCollectionsTreeStrategy} from \"./EquiEntityCollectionsTreeStrategy\";\n\nexport class EquiQuadTreeStrategy extends QuadTreeStrategy {\n\n    private _westExtent: Extent;\n    private _eastExtent: Extent;\n\n    public _visibleNodesWest: Record<number, Node>;\n    public _visibleNodesEast: Record<number, Node>;\n\n    constructor(planet: Planet) {\n        super(planet, \"Mars\", equi);\n        this._westExtent = Extent.createFromArray([-180, -90, 0, 90]);\n        this._eastExtent = Extent.createFromArray([0, -90, 180, 90]);\n\n        this._visibleNodesWest = {};\n        this._visibleNodesEast = {};\n    }\n\n    public override init() {\n        this._quadTreeList = [\n            new Node(\n                SegmentLonLatEqui,\n                this.planet,\n                0,\n                null,\n                0,\n                this._westExtent\n            ),\n            new Node(\n                SegmentLonLatEqui,\n                this.planet,\n                0,\n                null,\n                0,\n                this._eastExtent\n            )\n        ];\n    }\n\n    public override getTileXY(lonLat: LonLat, zoom: number): [number, number, number, number] {\n        let z = zoom,\n            x = -1,\n            y = -1,\n            pz = (1 << z);\n\n        if (lonLat.lon > 0) {\n            x = getTileCellIndex(lonLat.lon, 180 / pz, 0) + pz;\n        } else {\n            x = getTileCellIndex(lonLat.lon, 180 / pz, -180);\n        }\n\n        y = getTileCellIndex(lonLat.lat, 180 / pz, 90);\n\n        return [x, y, z, TILEGROUP_COMMON];\n    }\n\n    public override getLonLatTileOffset(lonLat: LonLat, x: number, y: number, z: number, gridSize: number): [number, number] {\n        let coords = lonLat;\n        let extent = new Extent();\n\n        if (lonLat.lon > 0) {\n            extent = getTileCellExtent(x - (1 << z), y, z, this._eastExtent);\n        } else {\n            extent = getTileCellExtent(x, y, z, this._westExtent);\n        }\n\n        let sizeImgW = extent.getWidth() / (gridSize - 1),\n            sizeImgH = extent.getHeight() / (gridSize - 1);\n\n        let i = gridSize - Math.ceil((coords.lat - extent.southWest.lat) / sizeImgH) - 1,\n            j = Math.floor((coords.lon - extent.southWest.lon) / sizeImgW);\n\n        return [i, j];\n    }\n\n    public override createEntitiCollectionsTreeStrategy(layer: Vector, nodeCapacity: number): EntityCollectionsTreeStrategy {\n        return new EquiEntityCollectionsTreeStrategy(layer, nodeCapacity);\n    }\n\n    public override collectVisibleNode(node: Node) {\n        let ext = node.segment.getExtent();\n        if (ext.southWest.lon < 0) {\n            this._visibleNodesWest[node.nodeId] = node;\n        } else {\n            this._visibleNodesEast[node.nodeId] = node;\n        }\n    }\n\n    protected override _clearVisibleNodes() {\n        this._visibleNodesWest = {};\n        this._visibleNodesEast = {};\n    }\n}","import * as quadTree from \"../quadTree\";\nimport {Extent} from \"../../Extent\";\nimport {EPSG4326} from \"../../proj/EPSG4326\";\nimport {Node} from \"../Node\";\nimport {Planet} from \"../../scene/Planet\";\nimport {QuadTreeStrategy} from \"../QuadTreeStrategy\";\nimport {SegmentLonLatEqui} from \"../../segment/SegmentLonLatEqui\";\n\nexport class EPSG4326QuadTreeStrategy extends QuadTreeStrategy {\n    constructor(planet: Planet) {\n        super(planet, \"EPSG4326\", EPSG4326);\n    }\n\n    public override init() {\n        this._quadTreeList = [\n            new Node(\n                SegmentLonLatEqui,\n                this.planet,\n                0,\n                null,\n                0,\n                Extent.createFromArray([-180, -90, 0, 90])\n            ),\n            new Node(\n                SegmentLonLatEqui,\n                this.planet,\n                0,\n                null,\n                0,\n                Extent.createFromArray([0, -90, 180, 90])\n            )\n        ];\n    }\n}","import * as quadTree from \"../quadTree\";\nimport {Extent} from \"../../Extent\";\nimport {EPSG4326} from \"../../proj/EPSG4326\";\nimport {Node} from \"../Node\";\nimport {Planet} from \"../../scene/Planet\";\nimport {SegmentLonLatEqui} from \"../../segment/SegmentLonLatEqui\";\nimport {QuadTreeStrategy} from \"../QuadTreeStrategy\";\n\nexport class Wgs84QuadTreeStrategy extends QuadTreeStrategy {\n    constructor(planet: Planet) {\n        super(planet, \"wgs84\", EPSG4326);\n    }\n\n    public override init() {\n        this._quadTreeList = [\n            new Node(\n                SegmentLonLatEqui,\n                this.planet,\n                0, null,\n                0,\n                Extent.createFromArray([-180, -90, 180, 90])\n            )\n        ];\n    }\n}","import {EarthQuadTreeStrategy} from \"./earth/EarthQuadTreeStrategy\";\nimport {EquiQuadTreeStrategy} from \"./equi/EquiQuadTreeStrategy\";\nimport {EPSG4326QuadTreeStrategy} from \"./EPSG4326/EPSG4326QuadTreeStrategy\";\nimport {QuadTreeStrategy} from \"./QuadTreeStrategy\";\nimport {Wgs84QuadTreeStrategy} from \"./wgs84/Wgs84QuadTreeStrategy\";\n\nconst quadTreeStrategyType = {\n    epsg4326: EPSG4326QuadTreeStrategy,\n    earth: EarthQuadTreeStrategy,\n    equi: EquiQuadTreeStrategy,\n    wgs84: Wgs84QuadTreeStrategy\n}\n\nexport {\n    quadTreeStrategyType,\n    QuadTreeStrategy,\n    Wgs84QuadTreeStrategy,\n    EquiQuadTreeStrategy,\n    EarthQuadTreeStrategy\n};\n"],"names":["W","HALF_PI","INV_PI_BY_180","PI_BY_360","mercator.POLE_BY_180","mercator.POLE_BY_PI","mercator.INV_POLE_BY_180","mercator.PI_BY_POLE","math.MAX","math.MIN","mercator.POLE_DOUBLE","math.RADIANS_HALF","extractElevationTiles","distanceFormat","addSeconds","addHours","TEMPLATE","ICON_BUTTON_SVG","utils.createExtent","utils.createColorRGB","mercator.MIN_LAT","mercator.MAX_LAT","quadTree.RENDERING","utils.createVector3","utils.createColorRGBA","utils.htmlColorToRgba","utils.defaultString","INDEX_BUFFER","_tempHigh","_tempLow","utils.createLonLat","PROJECT","ROTATE2D","PICKINGCOLOR_BUFFER","POSITION_BUFFER","SIZE_BUFFER","OFFSET_BUFFER","RGBA_BUFFER","ROTATION_BUFFER","TEXCOORD_BUFFER","VERTEX_BUFFER","shaders.billboard_screen","shaders.billboardPicking","shaders.geo_object","shaders.geo_object_picking","shaders.label_webgl2","shaders.label_screen","shaders.labelPicking","shaders.pointCloud","shaders.polyline_screen","shaders.polyline_picking","shaders.rayScreen","math.MAX32","math.step","math.mod","math.exp2","Node","mercator.forward_lon","mercator.forward_lat","units.toString","units.convertExt","units.m","TouchExt","Ray","math.RADIANS","OUTLINE_COUNT","obj3d","LABEL_OPTIONS","RULER_CORNER_OPTIONS","jd.J2000","math.rev","astro.J2000_OBLIQUITY","math.DEGREES","math.TWO_PI","astro.AU_TO_METERS","EVENT_NAMES","mercator.POLE","mercator.ONE_BY_POLE_DOUBLE","segmentHelper.getInstance","quadTree.NW","mercator.forward","mercator.POLE2","mercator.getTileExtent","utils.getLinesIntersectionLonLat","quadTree.NOTRENDERING","quadTree.N","quadTree.S","quadTree.W","quadTree.E","math.SQRT_HALF","shaders.drawnode_screen_wl_webgl2Atmos","shaders.drawnode_screen_wl_webgl1NoAtmos","shaders.drawnode_screen_wl_webgl2NoAtmos","shaders.drawnode_screen_nl","shaders.drawnode_colorPicking","shaders.drawnode_depth","shaders.drawnode_heightPicking","math.lerp","shaders.skybox","jd.DateToUTC","jd.ONE_BY_MILLISECONDS_PER_DAY","jd.UTCtoDate","jd.addMilliseconds"],"mappings":"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AC,CAAC,EACd,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EACd,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EACd,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EACd,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EACd,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EACd,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EACf,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EACf,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EACf,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EACf,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EACf,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EACf,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAE5D,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACxC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACzC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACxC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACzC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACzC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACxC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACzC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACxC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACxC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,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AC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CA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AAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;SACrB;KACJ;AAEM,IAAA,cAAc,CAAC,MAAc,EAAE,KAAa,EAAE,YAAoB,EAAA;QACrE,IAAI,IAAI,CAAC,WAAW,IAAK,IAAI,CAAC,WAAsB,CAAC,SAAS,EAAE;YAC5D,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,EACpB,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC;YAE7B,CAAC,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC;YAChC,CAAC,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,eAAe,EAAE,CAAC;;;;AAKlD,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;YAC1B,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAClC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC;AACpC,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/B,gBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAa,CAAC;AAC1B,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChC,oBAAA,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,EACf,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;oBACpB,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE;AAC5B,wBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;qBAC9B;oBACD,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE;AAC5B,wBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;qBAC9B;oBACD,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE;AAC5B,wBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;qBAC9B;oBACD,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE;AAC5B,wBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;qBAC9B;iBACJ;aACJ;YAED,IAAI,CAAC,UAAU,CACV,IAAI,CAAC,WAAsB,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAChE,KAAK,EACL,YAAY,EACZ,IAAI,CACP,CAAC;SACL;aAAM;YACH,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAa,CAAC;YACtD,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;YAC7B,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;YAC7B,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;SACtC;KACJ;AAED;;;;;;AAMG;IACI,UAAU,CAAC,WAAiB,EAAE,KAAgB,GAAA,CAAC,EAAE,YAAuB,GAAA,CAAC,EAAE,UAAA,GAAsB,KAAK,EAAA;AAEzG,QAAA,IAAI,IAAI,CAAC,WAAW,EAAE;YAClB,IAAI,MAAM,GAAG,IAAI,IAAI,EAAE,EACnB,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;AAEvB,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,aAAa,EACvB,EAAE,GAAG,IAAI,CAAC,YAAY,EACtB,CAAC,GAAG,IAAI,CAAC,WAAW,EACpB,CAAC,GAAG,IAAI,CAAC,eAAe,EACxB,CAAC,GAAG,CAAC,EACL,EAAE,GAAG,CAAC,CAAC;;;;AAKX,YAAA,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,YAAY,CAAC;YAE9D,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAW,CAAC;YAEhD,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;YAE9B,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC;YAExD,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE;AAC5B,gBAAA,IAAI,IAAI,CAAC;gBACT,IAAI,WAAW,EAAE;oBACb,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;iBAChC;qBAAM;AACH,oBAAA,IAAI,GAAG,IAAI,IAAI,CACX,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EACjC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EACjC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CACpC,CAAC;iBACL;gBAED,CAAC,GAAG,EAAE,CAAC;gBAEP,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;AAE5C,gBAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACjB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACtB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;AAEtB,gBAAA,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBAChB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;aACxB;YAED,IAAI,CAAC,UAAU,IAAK,IAAI,CAAC,WAAsB,CAAC,SAAS,EAAE;AACvD,gBAAA,IAAI,MAAM,GAAI,IAAI,CAAC,WAAsB,CAAC,SAAS,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;gBACnF,CAAC,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC;gBAChC,CAAC,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,eAAe,EAAE,CAAC;;;;AAKlD,gBAAA,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;gBAC1B,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;gBAClC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC;AACpC,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/B,oBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAa,CAAC;AAC1B,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChC,wBAAA,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,EACf,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;wBACpB,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE;AAC5B,4BAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;yBAC9B;wBACD,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE;AAC5B,4BAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;yBAC9B;wBACD,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE;AAC5B,4BAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;yBAC9B;wBACD,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE;AAC5B,4BAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;yBAC9B;qBACJ;iBACJ;aACJ;YAED,CAAC,GAAG,EAAE,GAAG,KAAK,GAAG,EAAE,GAAG,EAAE,CAAC;YAEzB,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;AAEnD,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACtB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;AAEtB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YAChB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAErB,YAAA,IAAI,KAAK,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,KAAK,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;AACxD,gBAAA,IAAI,KAAK,CAAC;gBACV,IAAI,WAAW,EAAE;AACb,oBAAA,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;iBACnB;qBAAM;AACH,oBAAA,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AACzB,oBAAA,KAAK,GAAG,IAAI,IAAI,CACZ,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,EACxC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,EACxC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAC3C,CAAC;iBACL;gBAED,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC;gBAE/B,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;AAE7C,gBAAA,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACjB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;gBACtB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;AAEtB,gBAAA,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBAChB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBACrB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;aACxB;AAED,YAAA,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;SAChD;aAAM;YACH,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAW,CAAC;YAChD,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;SACjC;KACJ;IAES,kBAAkB,CAAC,QAAgB,CAAC,EAAA;AAC1C,QAAA,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACzB,KAAK,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE;YAC9D,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC;SAChF;KACJ;AAED;;;AAGG;AACI,IAAA,aAAa,CAAC,KAAa,EAAA;QAC9B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC9B,QAAA,IAAI,CAAC,SAAS,CAAE,EAAyB,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;KACnE;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,KAAa,EAAE,cAAA,GAAyB,CAAC,EAAA;AACxD,QAAA,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAC9C,IAAI,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;YAC3C,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;SAC1C;AACD,QAAA,IAAI,CAAC,SAAS,CAAE,EAAyB,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;KACnE;AAED;;;;;;AAMG;IACI,aAAa,CAAC,OAAa,EAAE,KAAA,GAAgB,CAAC,EAAE,KAAoB,EAAE,cAAA,GAAyB,CAAC,EAAA;AACnG,QAAA,IAAI,CAAC,GAAI,EAAyB,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,EACnD,EAAE,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC;QAC3B,IAAI,EAAE,EAAE;YACJ,IAAI,CAAC,GAAI,EAAyB,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAE5D,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;YAE7B,IAAI,KAAK,EAAE;AACP,gBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC;gBAC3B,IAAI,CAAC,EAAE,EAAE;oBACL,EAAE,GAAG,IAAI,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;iBAC7B;gBACD,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;aAC9B;AAED,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACxB;aAAM;AACH,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;SAC5C;KACJ;AAED;;;;;;AAMG;AACI,IAAA,aAAa,CAAC,OAAa,EAAE,KAAoB,EAAE,aAAuB,EAAA;AAC7E,QAAA,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;AAChD,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,aAA6B,CAAC,CAAC,CAAC;AACrE,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;SAC5B;aAAM;;;;YAIH,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YACnD,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACjD,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACvC,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACvC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEzC,YAAA,QAAQ,CAAC,aAAa,CAClB,IAAI,CAAC,OAAO,EACZ,OAAO,EACP,IAAI,CAAC,WAAW,EAChB,KAAK,IAAI,IAAI,CAAC,aAA6B,EAC3C,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,QAAQ,EACb,CAAC,aAAa,GAAI,IAAI,CAAC,WAAsB,CAAC,SAAS,GAAG,IAAI,EAC9D,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,eAAe,EACpB,IAAI,CAAC,OAAO,CACf,CAAC;YAEF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAE5C,YAAA,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;AAC7C,YAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;AAC3C,YAAA,IAAI,CAAC,eAAe,CAACA,cAAY,CAAC,GAAG,IAAI,CAAC;SAC7C;KACJ;AAED;;;;;AAKG;AACI,IAAA,UAAU,CAAC,OAAa,EAAE,cAAA,GAAyB,CAAC,EAAA;;;;QAIvD,IAAI,cAAc,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;AACvC,YAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SACzB;QACD,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAC3C,QAAA,IAAI,CAAC,SAAS,CAAE,EAAyB,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;KACnE;AAED;;;;;AAKG;AACI,IAAA,cAAc,CAAC,MAAc,EAAE,cAAA,GAAyB,CAAC,EAAA;;;;QAI5D,IAAI,cAAc,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;AAC3C,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAC7B;QACD,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC9C,QAAA,IAAI,CAAC,aAAa,CAAE,EAA6B,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;KAC/E;AAED;;;AAGG;IACI,KAAK,GAAA;QACR,IAAI,CAAC,UAAU,EAAE,CAAC;KACrB;AAED;;;;;AAKG;AACI,IAAA,aAAa,CAAC,KAAmB,EAAE,QAAgB,CAAC,EAAE,eAAuB,CAAC,EAAA;AACjF,QAAA,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,EAAE;YAC/D,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;YAE5C,IAAI,CAAC,MAAM,EAAE;AACT,gBAAA,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,EAAE;AACzE,oBAAA,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,CAAC;iBACjF;qBAAM;oBACH,OAAO;iBACV;aACJ;AAED,YAAA,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;gBAChB,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;aACnE;iBAAM;gBACH,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC5B,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC5B,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AAC5B,gBAAA,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC;aACtC;AAED,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;;;;;AAOrB,YAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,YAAY,CAAC;AAE9E,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AAClD,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACtD,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACvD,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC;AAE9D,YAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;SAC9C;aAAM;YACH,IAAI,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;AAChD,YAAA,UAAU,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;SAC7B;KACJ;AAED;;;;AAIG;AACI,IAAA,UAAU,CAAC,OAAe,EAAA;AAC7B,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;KAC3B;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,QAAgB,EAAA;AAC/B,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;KAC5B;AAED;;;;AAIG;AACI,IAAA,YAAY,CAAC,SAAiB,EAAA;AACjC,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;KAC9B;AAED;;;;AAIG;IACI,YAAY,GAAA;QACf,OAAO,IAAI,CAAC,SAAS,CAAC;KACzB;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,UAAmB,EAAA;AACpC,QAAA,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;KAChC;AAED;;;;AAIG;IACI,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,UAAU,CAAC;KAC1B;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,UAAsB,EAAA;QACvC,IAAI,UAAU,EAAE;AACZ,YAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;AAC9B,YAAA,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;AACzB,gBAAA,IAAI,CAAC,iBAAiB,CAAE,EAA6B,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;aACnF;iBAAM;AACH,gBAAA,IAAI,CAAC,aAAa,CAAE,EAAyB,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;aACvE;YACD,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,UAAU,CAAC,QAAQ,IAAI,UAAU,CAAC,QAAQ,CAAC,aAAa,EAAE,EAAE;gBAC5D,IAAI,CAAC,OAAO,EAAE,CAAC;aAClB;SACJ;KACJ;IAES,UAAU,GAAA;;AAEhB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;AAE1B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;AAEzB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;AAEpB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;;AAErB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAElB,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;AAEhC,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;KAC7B;AAES,IAAA,aAAa,CAAC,MAA0B,EAAA;QAC9C,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,QAAQ,CAAC,gBAAgB,CACrB,MAAM,EACN,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,aAA6B,EAClC,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,aAAyB,EAC9B,IAAI,CAAC,YAAwB,EAC7B,IAAI,CAAC,OAAmB,EACxB,IAAI,CAAC,QAAoB,EACxB,IAAI,CAAC,WAAsB,CAAC,SAAS,EACtC,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,eAAe,EACpB,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,OAAmB,CAC3B,CAAC;AACF,QAAA,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;KAC9B;AAES,IAAA,iBAAiB,CAAC,UAAkC,EAAA;QAC1D,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,QAAQ,CAAC,oBAAoB,CACzB,UAAU,EACV,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,aAA6B,EAClC,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,aAAyB,EAC9B,IAAI,CAAC,YAAwB,EAC7B,IAAI,CAAC,OAAmB,EACxB,IAAI,CAAC,QAAoB,EACxB,IAAI,CAAC,WAAsB,CAAC,SAAS,EACtC,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,eAAe,EACpB,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,OAAmB,CAC3B,CAAC;AACF,QAAA,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;KAC9B;AAED;;;AAGG;IACI,MAAM,GAAA;AACT,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;;AAGtB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;AAE1B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;AAEzB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;AAEpB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;;AAErB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAElB,IAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;KAC/C;AAEM,IAAA,iBAAiB,CAAC,KAAW,EAAA;QAChC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC;KAC3C;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;KAC/B;AAED;;;AAGG;IACI,SAAS,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAED;;;AAGG;IACI,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;IAEM,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED;;;AAGG;AACH,IAAA,aAAa,CAAC,UAA8B,EAAA;QACxC,IAAI,UAAU,EAAE;AACZ,YAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,WAAW,GAAI,EAAyB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;AACjE,YAAA,QAAQ,CAAC,aAAa,CAClB,IAAI,CAAC,WAAW,EAChB,UAAU,EACV,IAAI,CAAC,aAA6B,EAClC,IAAI,CAAC,OAAO,CACf,CAAC;;AAEF,YAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;SAC9C;KACJ;AAED;;;AAGG;AACI,IAAA,YAAY,CAAC,SAAiB,EAAA;AACjC,QAAA,IAAI,CAAC,aAAa,GAAG,uBAAuB,CAAC,SAAS,CAAC,CAAC;AAExD,QAAA,IAAI,KAAK,GAAG,eAAe,CAAC,SAAS,CAAC,EAClC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AAEzB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1C,YAAA,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACb,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;gBAC5C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;gBAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;aACrB;SACJ;AAED,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACrB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE;AAC7C,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACf,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;SACtB;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;KAC9C;AAED;;;;;AAKG;AACI,IAAA,aAAa,CAAC,UAAkC,EAAE,UAAA,GAAsB,KAAK,EAAA;QAChF,IAAI,IAAI,CAAC,WAAW,IAAK,IAAI,CAAC,WAAsB,CAAC,SAAS,EAAE;YAC5D,IAAI,UAAU,EAAE;AACZ,gBAAA,IAAI,CAAC,mBAAmB,CAAC,UAAiC,CAAC,CAAC;AAC5D,gBAAA,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;AAC7C,gBAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;aAC9C;iBAAM;AACH,gBAAA,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;AACnC,gBAAA,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;AAC7C,gBAAA,IAAI,CAAC,eAAe,CAACA,cAAY,CAAC,GAAG,IAAI,CAAC;AAC1C,gBAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;aAC9C;SACJ;aAAM;YACH,IAAI,CAAC,WAAW,GAAI,EAA6B,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;SACxE;KACJ;AAED;;;;;;AAMG;AACI,IAAA,SAAS,CAAC,MAA0B,EAAE,UAA+B,EAAE,aAAsB,KAAK,EAAA;QACrG,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,WAAW,GAAI,EAAyB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;SACpE;AAED,QAAA,IAAI,IAAI,CAAC,WAAW,EAAE;YAClB,IAAI,UAAU,EAAE;AACZ,gBAAA,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;AAC7B,gBAAA,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;AAC7C,gBAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;aAC9C;iBAAM;AACH,gBAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AAC3B,gBAAA,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;AAC7C,gBAAA,IAAI,CAAC,eAAe,CAACA,cAAY,CAAC,GAAG,IAAI,CAAC;AAC1C,gBAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;aAC9C;SACJ;aAAM;YACH,IAAI,CAAC,OAAO,GAAI,EAAyB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;SAC5D;KACJ;IAEM,IAAI,GAAA;QACP,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YACxC,IAAI,CAAC,OAAO,EAAE,CAAC;AAEf,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,WAAY,CAAC;AAC3B,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,QAAS,CAAC;YACrB,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,CAAC;AAC5C,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;AACpB,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,EAAG,EAClB,GAAG,GAAG,CAAC,CAAC,UAAU,EAClB,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC;AAErB,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,iBAAiB,CAAC;YAE1C,EAAE,CAAC,QAAQ,EAAE,CAAC;AAEd,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;YAEzB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,CAAC,kBAAkB,CAAC,CAAC;AAErD,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAC5E,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;;AAItE,YAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC5D,YAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;;YAG1D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,EAAE,CAAC,CAAC,OAAO,CAAC,MAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACjF,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;AAClD,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,cAAc,CAAC,CAAC;YAE7D,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAA4B,CAAC,CAAC;YAClE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvF,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAoB,CAAC;YAClC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;YACzE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAC7E,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1E,YAAA,CAAC,GAAG,IAAI,CAAC,kBAAmB,CAAC;YAC7B,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;YACxE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAC5E,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAEzE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAA4B,CAAC,CAAC;YAClE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEvF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,cAA6B,CAAC,CAAC;AAC3E,YAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;AAEtF,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;SAC3B;KACJ;IAEM,WAAW,GAAA;QACd,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;AACxC,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,WAAY,CAAC;AAC3B,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,QAAS,CAAC;YACrB,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,gBAAgB,CAAC;AAC7C,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;AACpB,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,EAAG,EAClB,GAAG,GAAG,CAAC,CAAC,UAAU,EAClB,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC;YAErB,EAAE,CAAC,QAAQ,EAAE,CAAC;AAEd,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAEzB,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,QAAS,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC;AAEnF,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAC5E,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAEtE,YAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,EAAE;AACrB,gBAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;AACrB,gBAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;AACrB,gBAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACrB,GAAG;AACN,aAAA,CAAC,CAAC;AAEH,YAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC5D,YAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;YAE1D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,YAAY,EAAE,CAAE,EAAa,CAAC,cAAc,IAAI,GAAG,EAAE,CAAC,CAAC,YAAa,CAAC,6BAA6B,CAAC,CAAC,CAAC;;YAEvH,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,EAAE,CAAC,CAAC,OAAO,CAAC,MAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACjF,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;AAElD,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAoB,CAAC;YAClC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;YACzE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAC7E,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1E,YAAA,CAAC,GAAG,IAAI,CAAC,kBAAmB,CAAC;YAC7B,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;YACxE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAC5E,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAEzE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAA4B,CAAC,CAAC;YAClE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEvF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,cAA6B,CAAC,CAAC;AAC3E,YAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;AAEtF,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;SAC3B;KACJ;AAED;;;AAGG;IACO,QAAQ,GAAA;AACd,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;QACpC,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAClC;KACJ;AAED;;;AAGG;IACO,OAAO,GAAA;AACb,QAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YACpC,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE;oBACzB,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3C,oBAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;iBACnC;aACJ;SACJ;KACJ;AAED;;;AAGG;IACI,cAAc,GAAA;AACjB,QAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,QAAS,EAC9B,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,EAAG,CAAC;AAEvB,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAkC,CAAC,CAAC;AACzD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAiC,CAAC,CAAC;AACxD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;AACnD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,cAA6B,CAAC,CAAC;AACpD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;AAEnD,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,YAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;SAC7B;KACJ;AAED;;;AAGG;IACO,qBAAqB,GAAA;QAC3B,IAAI,CAAC,GAAG,IAAI,CAAC,WAAY,CAAC,QAAS,CAAC,OAAO,CAAC;QAE5C,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC;AAE7C,QAAA,IAAI,CAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,CAAC,QAAQ,KAAK,QAAQ,EAAE;YAC7E,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAkC,CAAC,CAAC;YAC5D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAiC,CAAC,CAAC;YAC3D,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;YAClE,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SACpE;QAED,IAAI,CAAC,aAAa,GAAG,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACxD,IAAI,CAAC,YAAY,GAAG,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAEtD,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,mBAAoB,EAAE,IAAI,CAAC,aAA6B,CAAC,CAAC;QACtF,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,kBAAmB,EAAE,IAAI,CAAC,YAA4B,CAAC,CAAC;KACvF;AAED;;;AAGG;IACO,kBAAkB,GAAA;QACxB,IAAI,CAAC,GAAG,IAAI,CAAC,WAAY,CAAC,QAAS,CAAC,OAAO,CAAC;QAC5C,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;QACtD,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,cAA6B,CAAC,CAAC;QAEvD,IAAI,CAAC,OAAO,GAAG,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5C,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAqB,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAEjG,IAAI,CAAC,QAAQ,GAAG,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,wBAAwB,CAAC,IAAI,CAAC,QAAuB,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;KAC3G;IAES,mBAAmB,GAAA;QACzB,IAAI,CAAC,GAAG,IAAI,CAAC,WAAY,CAAC,QAAS,CAAC,OAAO,CAAC;QAC5C,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;QAEtD,IAAI,CAAC,OAAO,GAAG,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5C,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KACxG;;AA5oEM,QAAW,CAAA,WAAA,GAAW,CAAC;;ACtDlC;;;;;;;;;AASG;AACH,MAAM,GAAG,CAAA;AAoDL,IAAA,WAAA,CAAY,UAAsB,EAAE,EAAA;AAEhC,QAAA,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QAE9B,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,SAAS,IAAI,GAAG,CAAC;QAE3C,IAAI,CAAC,cAAc,GAAGJ,aAAmB,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;AACjE,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,IAAI,EAAE,CAAC;AACrC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,IAAI,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,iBAAiB,CAClB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,iBAAiB,CACzB,CAAC;QAEF,IAAI,CAAC,YAAY,GAAGA,aAAmB,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;AAC7D,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,IAAI,EAAE,CAAC;AACnC,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,IAAI,EAAE,CAAC;AAClC,QAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAEvF,IAAI,CAAC,WAAW,GAAGC,eAAqB,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QAC7D,IAAI,CAAC,SAAS,GAAGA,eAAqB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;AAEzD,QAAA,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,IAAI,SAAS,GAAG,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC;AAE/E,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAErB,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;KAC3B;AAED;;;;;;AAMG;AACI,IAAA,gBAAgB,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;AACnD,QAAA,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC;AAC1B,QAAA,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC;AAC1B,QAAA,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC;AAC1B,QAAA,IAAI,CAAC,iBAAiB,CAClB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,iBAAiB,CACzB,CAAC;AACF,QAAA,IAAI,CAAC,QAAQ;AACb,YAAA,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAC7B,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,iBAAiB,CACzB,CAAC;KACL;IAEM,SAAS,GAAA;QACZ,OAAO,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;KAC1D;AAED;;;;AAIG;AACI,IAAA,kBAAkB,CAAC,QAAc,EAAA;QACpC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACnC,QAAA,IAAI,CAAC,iBAAiB,CAClB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,iBAAiB,CACzB,CAAC;AACF,QAAA,IAAI,CAAC,QAAQ;AACb,YAAA,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAC7B,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,iBAAiB,CACzB,CAAC;KACL;AAED;;;;;;AAMG;AACI,IAAA,cAAc,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;AACjD,QAAA,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;AACvF,QAAA,IAAI,CAAC,QAAQ;AACb,YAAA,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAC3B,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,gBAAgB,EACrB,IAAI,CAAC,eAAe,CACvB,CAAC;KACL;AAED;;;;AAIG;AACI,IAAA,gBAAgB,CAAC,QAAc,EAAA;QAClC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;QACjC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;QACjC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;AACvF,QAAA,IAAI,CAAC,QAAQ;AACb,YAAA,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAC3B,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,gBAAgB,EACrB,IAAI,CAAC,eAAe,CACvB,CAAC;KACL;AAEM,IAAA,YAAY,CAAC,SAAiB,EAAA;AACjC,QAAA,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;AAC5B,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;KACjF;IAEM,WAAW,CAAC,UAAiB,EAAE,QAAe,EAAA;QACjD,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC;SACrC;QAED,IAAI,QAAQ,EAAE;YACV,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;SACjC;AAED,QAAA,IAAI,CAAC,QAAQ;AACb,YAAA,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;KAClF;IAEM,aAAa,CAAC,UAAmB,EAAE,QAAiB,EAAA;QACvD,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,WAAW,GAAGC,eAAqB,CAAC,UAAU,CAAC,CAAC;SACxD;QAED,IAAI,QAAQ,EAAE;YACV,IAAI,CAAC,SAAS,GAAGA,eAAqB,CAAC,QAAQ,CAAC,CAAC;SACpD;QAED,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;KACnG;AAED;;;;AAIG;IACI,gBAAgB,GAAA;QACnB,OAAO,IAAI,CAAC,cAAc,CAAC;KAC9B;AAED;;;;AAIG;IACI,cAAc,GAAA;QACjB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,UAAmB,EAAA;AACpC,QAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;AAC9B,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;KAChF;AAED;;;;AAIG;IACI,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED;;;AAGG;IACI,MAAM,GAAA;AACT,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;KAC/C;AAED;;;;AAIG;AACI,IAAA,iBAAiB,CAAC,KAAW,EAAA;AAChC,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;KAChF;;AAnQM,GAAW,CAAA,WAAA,GAAW,CAAC;;ACLlC,IAAIG,WAAS,GAAG,IAAI,IAAI,EAAE,EACtBC,UAAQ,GAAG,IAAI,IAAI,EAAE,CAAC;AAE1B;;;;;;;;;;;;;;;AAeG;AACH,MAAM,KAAK,CAAA;AAgDP,IAAA,WAAA,CAAY,UAAwB,EAAE,EAAA;AAElC,QAAA,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;AAEhC,QAAA,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,SAAS,GAAG,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC;AAE9E,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAEpD,QAAA,IAAI,OAAO,CAAC,KAAK,EAAE;YACf,IAAI,KAAK,GAAGL,eAAqB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACjD,YAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;SACrD;AAED,QAAA,IAAI,OAAO,CAAC,OAAO,EAAE;AACjB,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;SACpC;AAED;;;;AAIG;AACH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AAExB;;;;AAIG;AACH,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAE/B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAEzB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AAEvB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEnB,QAAA,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAEhB,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAEzC,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AAEnB;;;;AAIG;AACH,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AAExB,QAAA,IAAI,OAAO,CAAC,IAAI,EAAE;AACd,YAAA,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAC9B;KACJ;AAED;;;;AAIG;AACI,IAAA,iBAAiB,CAAC,KAAW,EAAA;QAChC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC;AACxC,QAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;KAC/B;AAED;;;AAGG;IACI,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;AACtB,QAAA,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;AAEhB,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC;AAC9B,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AAExB,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AAEvB,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;AACzB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QAEnB,IAAI,CAAC,cAAc,EAAE,CAAC;KACzB;AAED;;;;AAIG;AACI,IAAA,UAAU,CAAC,KAAW,EAAA;AACzB,QAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;KACrD;AAED;;;;AAIG;AACI,IAAA,YAAY,CAAC,KAAa,EAAA;QAC7B,IAAI,CAAC,UAAU,CAACC,eAAqB,CAAC,KAAK,CAAC,CAAC,CAAC;KACjD;AAEM,IAAA,QAAQ,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,CAAU,EAAA;QACvD,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACvB,QAAA,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;KACrB;AAED;;;;AAIG;AACI,IAAA,UAAU,CAAC,OAAe,EAAA;QAC7B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,OAAO,IAAI,CAAC,CAAC;KAChC;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,UAAmB,EAAA;AACpC,QAAA,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;KAChC;AAED;;AAEG;IACI,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,UAAU,CAAC;KAC1B;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,UAAsB,EAAA;AACvC,QAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,IAAI,CAAC,cAAc,EAAE,CAAC;KACzB;AAED;;;AAGG;IACI,MAAM,GAAA;AACT,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;KAC/C;IAEM,IAAI,GAAA;QACP,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;AAC9C,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAY,CAAC,QAAS,CAAC;AAEpC,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,EAAG,CAAC;YAEvB,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAC7B,CAAC,GAAG,EAAE,CAAC,QAAQ,EACf,GAAG,GAAG,CAAC,CAAC,UAAU,EAClB,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC;YAErB,EAAE,CAAC,QAAQ,EAAE,CAAC;AAEd,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAEzB,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAC5E,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAExF,YAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC5D,YAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;YAE1D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;AAEtC,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAQ,CAAC,iBAAkB,CAAC,cAAc,CAAC,CAAC;YAC5E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAkC,CAAC,CAAC;YACxE,EAAE,CAAC,mBAAmB,CAClB,GAAG,CAAC,mBAAmB,EACvB,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAClC,EAAE,CAAC,KAAK,EACR,KAAK,EACL,CAAC,EACD,CAAC,CACJ,CAAC;YACF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAiC,CAAC,CAAC;YACvE,EAAE,CAAC,mBAAmB,CAClB,GAAG,CAAC,kBAAkB,EACtB,IAAI,CAAC,kBAAmB,CAAC,QAAQ,EACjC,EAAE,CAAC,KAAK,EACR,KAAK,EACL,CAAC,EACD,CAAC,CACJ,CAAC;YACF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,YAA2B,CAAC,CAAC;YACzE,EAAE,CAAC,YAAY,CACX,CAAC,CAAC,OAAO,CAAC,EAAG,CAAC,cAAc,EAC5B,IAAI,CAAC,YAAa,CAAC,QAAQ,EAC3B,EAAE,CAAC,YAAY,EACf,CAAC,CACJ,CAAC;AAEF,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;SAC3B;KACJ;IAED,WAAW,GAAA;QACP,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;AAC9C,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAY,CAAC,QAAS,CAAC;AAEpC,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,EAAG,CAAC;YAEvB,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAC7B,CAAC,GAAG,EAAE,CAAC,QAAQ,EACf,GAAG,GAAG,CAAC,CAAC,UAAU,EAClB,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC;YAErB,EAAE,CAAC,QAAQ,EAAE,CAAC;AAEd,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAEzB,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAC5E,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAExF,YAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC5D,YAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;YAE1D,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAQ,CAAC,iBAAkB,CAAC,cAAc,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAEzF,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC9C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAkC,CAAC,CAAC;YACxE,EAAE,CAAC,mBAAmB,CAClB,GAAG,CAAC,mBAAmB,EACvB,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAClC,EAAE,CAAC,KAAK,EACR,KAAK,EACL,CAAC,EACD,CAAC,CACJ,CAAC;YACF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAiC,CAAC,CAAC;YACvE,EAAE,CAAC,mBAAmB,CAClB,GAAG,CAAC,kBAAkB,EACtB,IAAI,CAAC,kBAAmB,CAAC,QAAQ,EACjC,EAAE,CAAC,KAAK,EACR,KAAK,EACL,CAAC,EACD,CAAC,CACJ,CAAC;YACF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,YAA2B,CAAC,CAAC;YACzE,EAAE,CAAC,YAAY,CACX,CAAC,CAAC,OAAO,CAAC,EAAG,CAAC,cAAc,EAC5B,IAAI,CAAC,YAAa,CAAC,QAAQ,EAC3B,EAAE,CAAC,YAAY,EACf,CAAC,CACJ,CAAC;AAEF,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;SAC3B;KACJ;AAED;;;AAGG;IACI,cAAc,GAAA;QACjB,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE;AAC/C,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,EAC7B,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,EAAG,CAAC;AAEvB,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,YAAa,CAAC,CAAC;AACpC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAoB,CAAC,CAAC;AAC3C,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;SAC7C;AACD,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC5B;IAES,cAAc,GAAA;AACpB,QAAA,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,EAAE,EAAE;YAC5F,IAAI,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAG,CAAC;AAE/C,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,YAA2B,CAAC,CAAC;AAClD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAkC,CAAC,CAAC;AACzD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAiC,CAAC,CAAC;AAExD,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,iBAAiB,CAC1E,IAAI,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,EACpC,CAAC,EACD,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAChC,CAAC;AACF,YAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,iBAAiB,CACzE,IAAI,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,EACnC,CAAC,EACD,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAC/B,CAAC;AACF,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,wBAAwB,CAC1E,IAAI,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,EAC9B,CAAC,EACD,IAAI,CAAC,QAAQ,CAAC,MAAM,CACvB,CAAC;SACL;KACJ;IAEM,SAAS,CAAC,EAAQ,EAAE,EAAQ,EAAA;AAC/B,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;AAE/B,QAAA,IAAI,MAAM,KAAK,CAAC,EAAE;AACd,YAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;SAC7C;aAAM;YACH,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAC9B,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAEnC,YAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAE1C,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,EAC1B,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC;YAE7B,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,EACnB,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC;AAEjB,YAAA,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;AAEnB,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,EACpC,GAAG,GAAG,IAAI,CAAC;AAEf,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AAE/D,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1B,gBAAA,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;gBAChB,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1B,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1B,oBAAA,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;oBAChB,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1B,oBAAA,IAAI,CAAC,KAAK,GAAG,EAAE;AACX,wBAAA,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;qBAC1D;yBAAM;wBACH,CAAC,GAAG,GAAG,CAAC;qBACX;oBAED,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;oBAEzB,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAEG,WAAS,EAAEC,UAAQ,CAAC,CAAC;AAE/C,oBAAA,IAAI,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC;AAEnB,oBAAA,KAAK,CAAC,IAAI,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;oBAC1B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;oBAC9B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;AAE9B,oBAAA,IAAI,CAAC,IAAI,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;oBACxB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;AAE5B,oBAAA,IAAI,CAAC,GAAG,EAAE,EAAE;wBACR,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC;qBACtC;iBACJ;AAED,gBAAA,IAAI,CAAC,GAAG,EAAE,EAAE;AACR,oBAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;iBAC1C;aACJ;YAED,IAAI,CAAC,cAAc,EAAE,CAAC;SACzB;KACJ;AAEM,IAAA,SAAS,CAAC,EAAQ,EAAE,EAAQ,EAAE,KAAa,EAAA;QAC9C,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;AAC7B,YAAA,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;YACvB,OAAO;SACV;AACD,QAAA,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;YACnB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;YAE1B,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBACvB,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,EACnB,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC;AAEjB,gBAAA,IAAI,KAAK,GAAG,GAAG,GAAG,GAAG,CAAC;AAEtB,gBAAA,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;gBAEnB,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,EAC1B,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC;gBAE7B,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;oBACjC,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAC7B,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAElC,oBAAA,IAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,GAAG,KAAK,EAC5C,GAAG,GAAG,IAAI,CAAC;AAEf,oBAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AAE/D,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1B,wBAAA,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;wBAChB,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1B,wBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1B,4BAAA,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;4BAChB,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1B,4BAAA,IAAI,CAAC,KAAK,GAAG,EAAE;AACX,gCAAA,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;6BAC1D;iCAAM;gCACH,CAAC,GAAG,GAAG,CAAC;6BACX;4BAED,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;4BAEzB,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAED,WAAS,EAAEC,UAAQ,CAAC,CAAC;AAE/C,4BAAA,IAAI,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC;AAEnB,4BAAA,KAAK,CAAC,IAAI,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;4BAC1B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;4BAC9B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;AAE9B,4BAAA,IAAI,CAAC,IAAI,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;4BACxB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;4BAC5B,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;yBAC/B;qBACJ;iBACJ;AAAM,qBAAA,IAAI,KAAK,KAAK,CAAC,EAAE;oBACpB,IAAI,GAAG,GAAG,CAAC,CAAC;AAEZ,oBAAA,IAAI,EAAE,GAAG,EAAE,EACP,EAAE,GAAG,EAAE,CAAC;oBAEZ,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACtB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAEtB,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1B,wBAAA,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;wBAChB,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1B,wBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1B,4BAAA,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;4BAChB,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1B,4BAAA,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvD,4BAAA,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;4BAElB,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAED,WAAS,EAAEC,UAAQ,CAAC,CAAC;AAE/C,4BAAA,IAAI,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC;AAEnB,4BAAA,KAAK,CAAC,IAAI,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;4BAC1B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;4BAC9B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;AAE9B,4BAAA,IAAI,CAAC,IAAI,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;4BACxB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;4BAC5B,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;yBAC/B;qBACJ;iBACJ;AAAM,qBAAA,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;oBAC/C,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAC7B,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAElC,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAC7B,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAElC,oBAAA,IAAI,IAAI,GAAG,KAAK,GAAG,KAAK,EACpB,IAAI,GAAG,CAAC,KAAK,GAAG,CAAC,IAAI,KAAK,EAC1B,GAAG,GAAG,IAAI,CAAC;AAEf,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1B,wBAAA,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAChB,wBAAA,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1B,wBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1B,4BAAA,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;4BAChB,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EACrB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;;AAG1B,4BAAA,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvD,4BAAA,IAAI,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AAErB,4BAAA,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;4BAEhB,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAED,WAAS,EAAEC,UAAQ,CAAC,CAAC;AAE/C,4BAAA,IAAI,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC;AAEnB,4BAAA,KAAK,CAAC,IAAI,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;4BAC1B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;4BAC9B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;AAE9B,4BAAA,IAAI,CAAC,IAAI,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;4BACxB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;4BAC5B,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;;4BAG5B,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;4BAE1B,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAEtB,4BAAA,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvD,4BAAA,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;4BAEhB,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAED,WAAS,EAAEC,UAAQ,CAAC,CAAC;AAE/C,4BAAA,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC;AAEf,4BAAA,KAAK,CAAC,IAAI,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;4BAC1B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;4BAC9B,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,WAAS,CAAC,CAAC,CAAC;AAE9B,4BAAA,IAAI,CAAC,IAAI,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;4BACxB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;4BAC5B,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGA,UAAQ,CAAC,CAAC,CAAC;yBAC/B;qBACJ;iBACJ;gBAED,IAAI,CAAC,cAAc,EAAE,CAAC;aACzB;SACJ;aAAM;AACH,YAAA,OAAO,CAAC,IAAI,CAAC,eAAe,KAAK,CAAA,gBAAA,CAAkB,CAAC,CAAC;SACxD;KACJ;AAEM,IAAA,UAAU,CAAC,KAAa,EAAA;QAC3B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,OAAO,CAAE,EAAe,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;KACrD;AAEM,IAAA,WAAW,CAAC,QAAgB,EAAA;AAC/B,QAAA,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;AAC1B,QAAA,IAAI,CAAC,OAAO,CAAE,EAAe,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;KACrD;IAEM,OAAO,GAAA;QACV,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;AAEM,IAAA,OAAO,CAAC,IAA4B,EAAA;AACvC,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;AAEhB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAClC,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACf,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAEpB,YAAA,IAAI,EAAE,YAAY,KAAK,EAAE;AACrB,gBAAA,EAAE,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;aACtC;AAED,YAAA,IAAI,EAAE,YAAY,KAAK,EAAE;AACrB,gBAAA,EAAE,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;aACtC;AAED,YAAA,IAAI,CAAC,SAAS,CAAC,EAAU,EAAE,EAAU,CAAC,CAAC;SAC1C;KACJ;AAEM,IAAA,YAAY,CAAC,EAAQ,EAAE,EAAQ,EAAE,KAAa,EAAA;QACjD,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YAC3B,IAAI,CAAC,GAAc,EAAe,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACtD,YAAA,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;AAC7B,YAAA,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;SACnB;aAAM,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;AACpC,YAAA,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;SAC1B;KACJ;;AAjoBM,KAAW,CAAA,WAAA,GAAW,CAAC;;ACPlC;;;;;;;;;;;;;;;;;;AAkBG;AACH,MAAM,MAAM,CAAA;AAqKR,IAAA,WAAA,CAAY,UAAyB,EAAE,EAAA;QAEnC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,EAAE,CAAC;AAE9C,QAAA,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;QAEjC,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,EAAE,CAAC;QAE3C,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,EAAE,CAAC;AAErF,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AAExB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAEnB,IAAI,CAAC,UAAU,GAAGN,aAAmB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAEzD,IAAI,CAAC,OAAO,GAAGO,YAAkB,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAElD,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,EAAE,CAAC;QAEhC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,QAAQ,IAAI,GAAG,CAAC;AAEzC,QAAA,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,IAAI,SAAS,GAAG,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC;AAE/E,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAE9B,QAAA,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC,CAAC;AAEjC,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AAEnB,QAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;AAEtB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEvC,IAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC,kBAAkB,IAAI,KAAK,CAAC;QAE/D,IAAI,CAAC,wBAAwB,GAAG;AAC5B,YAAA,SAAS,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC;AACzC,YAAA,KAAK,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC;AAC7B,YAAA,QAAQ,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC;AACtC,YAAA,UAAU,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC;AAC5C,YAAA,QAAQ,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC;AACtC,YAAA,SAAS,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC;AACzC,YAAA,KAAK,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC;AAC7B,YAAA,GAAG,EAAE,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC;SAC1B,CAAC;AAEF,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAA8B,WAAW,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;AAExG,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,oBAAoB,CAAsB,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;AAEpF,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAA4B,UAAU,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;AAEnG,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAkB,KAAK,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AAE1E,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAA8B,YAAY,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC;AAE3G,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAA4B,UAAU,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;AAEnG,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAA8B,WAAW,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;AAExG,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,oBAAoB,CAAsB,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;KACvF;AAED,IAAA,IAAW,EAAE,GAAA;QACT,OAAO,IAAI,CAAC,IAAI,CAAC;KACpB;AAEM,IAAA,OAAO,CAAC,MAAc,EAAA;AACzB,QAAA,OAAO,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC,IAAI,CAAC;KACpC;AAED,IAAA,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED,IAAA,IAAW,YAAY,GAAA;AACnB,QAAA,OAAO,QAAQ,CAAC;KACnB;IAES,oBAAoB,CAC1B,WAAmB,EACnB,OAAe,EAAA;QAEf,IAAI,OAAO,EAAE;YACT,IAAI,CAAC,GAAG,IAAI,CAAC,wBAAwB,CAAC,WAAW,CAAC,CAAC;AACnD,YAAA,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAM,CAAC;SAClD;AACD,QAAA,OAAO,IAAI,CAAC;KACf;IAEM,kBAAkB,GAAA;QACrB,OAAO,IAAI,CAAC,sBAAsB,CAAC;KACtC;AAED;;;;;;AAMG;AACI,IAAA,KAAK,CAAC,UAAqC,EAAE,QAAA,GAAoB,KAAK,EAAA;AACzE,QAAA,UAAU,CAAC,GAAG,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AAC/B,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;AAGG;IACI,MAAM,GAAA;QACT,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;KACvE;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,UAAmB,EAAA;AACpC,QAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;;QAG9B,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;;QAG3D,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;;QAG3D,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;;QAGnD,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;;QAGzD,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;;QAG/C,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAEzD,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;SACnD;KACJ;AAED;;;;AAIG;IACI,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED;;;;AAIG;AACI,IAAA,cAAc,CAAC,SAAe,EAAA;AACjC,QAAA,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;KAC5D;AAED;;;;;;AAMG;AACI,IAAA,YAAY,CAAC,CAAU,EAAE,CAAU,EAAE,CAAU,EAAA;AAClD,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;AAExB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC;;QAGf,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;;QAGlD,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;;QAGlD,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAE1C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChD,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SAC/C;AAED,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAEhC,QAAA,IAAI,EAAE,IAAI,EAAE,CAAC,UAAU,IAAK,EAAE,CAAC,UAAqB,CAAC,SAAS,EAAE;AAC5D,YAAA,IAAI,CAAC,OAAO,GAAI,EAAE,CAAC,UAAqB,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;AAExE,YAAA,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAGT,OAAgB,EAAE;gBAC/C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;aACrD;iBAAM;AACH,gBAAA,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;aAC7E;SACJ;;KAGJ;AAED;;;;;AAKG;AACI,IAAA,qBAAqB,CAAC,SAAe,EAAE,UAAA,GAAsB,KAAK,EAAA;AACrE,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,IAAI,GAAG,CAAC;QACzB,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,IAAI,GAAG,CAAC;QACzB,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,IAAI,GAAG,CAAC;;QAGzB,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;;QAGlD,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;;QAGlD,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAE1C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;SACrD;AAED,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAEhC,QAAA,IAAI,CAAC,UAAU,IAAI,EAAE,IAAI,EAAE,CAAC,UAAU,IAAK,EAAE,CAAC,UAAqB,CAAC,SAAS,EAAE;AAC3E,YAAA,IAAI,CAAC,OAAO,GAAI,EAAE,CAAC,UAAqB,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;AAExE,YAAA,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAGA,OAAgB,EAAE;gBAC/C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;aAGrD;SACJ;KACJ;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;KAC/B;AAED;;;;AAIG;AACI,IAAA,SAAS,CAAC,MAAc,EAAA;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AAErB,QAAA,CAAC,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AACnB,QAAA,CAAC,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AACnB,QAAA,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;AAEzB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAChC,QAAA,IAAI,EAAE,IAAI,EAAE,CAAC,UAAU,IAAK,EAAE,CAAC,UAAqB,CAAC,SAAS,EAAE;AAC5D,YAAA,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGA,OAAgB,EAAE;AACpC,gBAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,eAAe,EAAE,CAAC;aAG1C;AAEA,YAAA,EAAE,CAAC,UAAqB,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAC7E,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SACxC;KACJ;AAED;;;;;;AAMG;AACI,IAAA,UAAU,CAAC,GAAW,EAAE,GAAW,EAAE,MAAe,EAAA;AACvD,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AAErB,QAAA,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC;AACZ,QAAA,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC;AACZ,QAAA,CAAC,CAAC,MAAM,GAAG,MAAM,IAAI,SAAS,GAAG,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;AAEnD,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAChC,QAAA,IAAI,EAAE,IAAI,EAAE,CAAC,UAAU,IAAK,EAAE,CAAC,UAAqB,CAAC,SAAS,EAAE;AAC5D,YAAA,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGA,OAAgB,EAAE;AACpC,gBAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,eAAe,EAAE,CAAC;aAC1C;iBAAM;AACH,gBAAA,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;aAC7E;AAEA,YAAA,EAAE,CAAC,UAAqB,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAC7E,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SACxC;KACJ;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,QAAgB,EAAA;AAC/B,QAAA,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;KAC7B;AAED;;;;AAIG;IACI,WAAW,GAAA;QACd,OAAO,IAAI,CAAC,SAAS,CAAC;KACzB;AAED;;;;AAIG;IACI,YAAY,GAAA;AACf,QAAA,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;KAClC;AAED;;;;;AAKG;AACI,IAAA,YAAY,CAAC,SAAoB,EAAA;AACpC,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,YAAA,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;SAC3B;AACD,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAA,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9C,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC/C,QAAA,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AACjF,QAAA,OAAO,SAAS,CAAC;KACpB;AAED;;;;;AAKG;AACI,IAAA,QAAQ,CAAC,KAAY,EAAA;AACxB,QAAA,IAAI,IAAI,CAAC,KAAK,EAAE;AACZ,YAAA,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;SACvB;AACD,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC1C,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC3C,QAAA,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACzE,QAAA,OAAO,KAAK,CAAC;KAChB;AAED;;;;;AAKG;AACI,IAAA,MAAM,CAAC,GAAQ,EAAA;AAClB,QAAA,IAAI,IAAI,CAAC,GAAG,EAAE;AACV,YAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;SACrB;AACD,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,QAAA,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AACzC,QAAA,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACrE,QAAA,OAAO,GAAG,CAAC;KACd;AAED;;;;;AAKG;AACI,IAAA,WAAW,CAAC,QAAkB,EAAA;AACjC,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;SAC1B;AACD,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC9C,QAAA,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC/E,QAAA,OAAO,QAAQ,CAAC;KACnB;AAED;;;;;AAKG;AACI,IAAA,aAAa,CAAC,UAAsB,EAAA;AACvC,QAAA,IAAI,IAAI,CAAC,UAAU,EAAE;AACjB,YAAA,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;SAC5B;AACD,QAAA,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;AAC7B,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAChD,QAAA,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AACnF,QAAA,OAAO,UAAU,CAAC;KACrB;AAED;;;;;AAKG;AACI,IAAA,WAAW,CAAC,QAAkB,EAAA;AACjC,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;SAC1B;AACD,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC9C,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACxB,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;SAClC;AACD,QAAA,KAAK,IAAI,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACzB,QAAA,OAAO,QAAQ,CAAC;KACnB;AAED;;;;;AAKG;AACI,IAAA,YAAY,CAAC,SAAoB,EAAA;AACpC,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,YAAA,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;SAC3B;AACD,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAA,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9C,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC/C,QAAA,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AACjF,QAAA,OAAO,SAAS,CAAC;KACpB;AAED;;;;;AAKG;AACI,IAAA,QAAQ,CAAC,KAAY,EAAA;AACxB,QAAA,IAAI,IAAI,CAAC,KAAK,EAAE;AACZ,YAAA,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;SACvB;AACD,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC3C,QAAA,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACzE,QAAA,OAAO,KAAK,CAAC;KAChB;AAED,IAAA,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;AAED,IAAA,IAAW,cAAc,GAAA;AACrB,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;SAC7B;AAAM,aAAA,IAAI,IAAI,CAAC,iBAAiB,EAAE;AAC/B,YAAA,OAAO,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;SACxC;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,MAAc,EAAA;AAC7B,QAAA,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAClD,QAAA,IAAI,CAAC,MAAM,CAAC,mBAAmB,EAAE;AAC7B,YAAA,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;SAC7C;AACD,QAAA,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAChC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;KAC9E;AAED;;;AAGG;IACI,eAAe,GAAA;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;QAE3B,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;QAEtD,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;QAE9C,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;QAEpD,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;QAE1C,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;QAE9C,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;AAEtD,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC;SAC3C;KACJ;AAED;;;;AAIG;IACI,SAAS,GAAA;AAEZ,QAAA,IAAI,GAAG,CAAC;AACR,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;QAErB,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,EAAE;AAC9B,YAAA,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;SACxE;aAAM;YACH,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;SACxE;QAED,IAAI,EAAE,GAAG,GAAG,CAAC,SAAS,EAClB,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;AAEvB,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;YAClC,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;YACvD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;YACvD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;YACvD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;SAC1D;AAED,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;YAClC,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;YACvD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;YACvD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;YACvD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;SAC1D;AAED,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;YAC1C,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;YACvD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;YACvD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;YACvD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG;gBAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;SAC1D;AAED,QAAA,OAAO,GAAG,CAAC;KACd;;AAhuBM,MAAW,CAAA,WAAA,GAAW,CAAC;;AC1DlC;;;;AAIG;AACH,MAAM,QAAQ,CAAA;AAoCV,IAAA,WAAA,CAAY,IAAa,EAAA;AAErB,QAAA,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC;QAEnC,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,cAAc,IAAI,CAAC,IAAI,CAAA,CAAE,CAAC;AAE/C,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;AAEpC,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AAErB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;KAC1B;AAED,IAAA,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;AAED;;;;AAIG;AACI,IAAA,OAAO,CAAC,IAAc,EAAA;AACzB,QAAA,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,EAAE;AACzB,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACvB;aAAM;AACH,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;SAC/B;AACD,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;AAC5C,QAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;KAC9C;AAED;;;AAGG;IACI,OAAO,GAAA;AACV,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;SAChC;QACD,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED;;;;;AAKG;AACI,IAAA,aAAa,CAAC,IAAY,EAAA;AAC7B,QAAA,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KACjC;AAED;;;AAGG;IACO,MAAM,GAAA;AACZ,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;KAC9B;AAEM,IAAA,OAAO,CAAC,IAAc,EAAA;AACzB,QAAA,OAAO,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC;KAClC;;AAxGM,QAAW,CAAA,WAAA,GAAW,CAAC;;ACFlC;;;;;;;;;AASG;AAEH,MAAM,UAAW,SAAQ,QAAQ,CAAA;AA+C7B,IAAA,WAAA,CAAY,IAAa,EAAA;QACrB,KAAK,CAAC,IAAI,CAAC,CAAC;AAEZ,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AAErB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAErB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAElB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAEjB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAE1B,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAC3B,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AACzB,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AAEzB,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;KACxB;AAED;;;;AAIG;AACa,IAAA,OAAO,CAAC,IAAgB,EAAA;AACpC,QAAA,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACpB,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KAC/C;AAED;;;;AAIG;AACI,IAAA,MAAM,CAAC,QAAkB,EAAA;AAC5B,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAA,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,kBAAkB,CAAC,IAAI,EAAE,IAAI,CAAC,gCAAgC,CAAC,CAAC;QAC3F,IAAI,CAAC,UAAU,EAAE,CAAC;KACrB;IAEM,UAAU,GAAA;QACb,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,EAAE;AAChD,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACpD,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;aAClD;YACD,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;KACJ;IAEM,IAAI,GAAA;;KAEV;IAEM,QAAQ,GAAA;;KAEd;IAEM,MAAM,GAAA;QACT,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,EACjB,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;QAElB,IAAI,CAAC,EAAE;;AAEH,YAAA,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;;AAEpD,gBAAA,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AACxB,gBAAA,OAAO,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;aAC3B;AAED,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/C,gBAAA,IAAI,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;oBACpC,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC/B,MAAM;iBACT;aACJ;AACD,YAAA,CAAC,CAAC,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AACzC,YAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AACrB,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;SACpC;KACJ;AAED;;;;;;AAMG;IACI,mBAAmB,CAAC,gBAAkC,EAAE,QAAkB,EAAA;AAC7E,QAAA,gBAAgB,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACvC,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;AAIG;AACI,IAAA,sBAAsB,CAAC,gBAAkC,EAAA;QAC5D,gBAAgB,CAAC,MAAM,EAAE,CAAC;KAC7B;AAED;;;;;AAKG;AACI,IAAA,QAAQ,CAAC,KAAkB,EAAA;AAC9B,QAAA,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAClB,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;AAKG;AACI,IAAA,cAAc,CAAC,IAAY,EAAA;QAC9B,IAAI,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AACzC,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;KAC3B;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,KAAkB,EAAA;QACjC,KAAK,CAAC,MAAM,EAAE,CAAC;KAClB;AAED;;;AAGG;IACI,WAAW,GAAA;AACd,QAAA,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;KAC1C;AAGD;;;AAGG;IACI,QAAQ,GAAA;AACX,QAAA,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;KACvC;AAED;;;;AAIG;IACI,QAAQ,GAAA;QACX,OAAO,IAAI,CAAC,SAAS,CAAC;KACzB;AAED;;;;AAIG;AACI,IAAA,SAAS,CAAC,QAAiB,EAAA;AAC9B,QAAA,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;AAE1B,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,CAAC,EAAE;;;AAG1C,gBAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAC9C,IAAI,EACJ,IAAI,CAAC,gCAAgC,CACxC,CAAC;aACL;AAAM,iBAAA,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,CAAC,EAAE;gBAClD,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AACrD,gBAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;aACxB;SACJ;AAED,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;SAC1C;KACJ;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,IAAY,EAAA;AAC3B,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;SACxC;KACJ;AAED;;;AAGG;IACI,eAAe,GAAA;AAClB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC1C,YAAA,IAAI,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;AACf,YAAA,IAAI,EAAE,CAAC;YACP,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAC/B,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,gBAAgB,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,gBAAgB,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;SACxC;;;;;;;;;;;;;;;KAgBJ;IAEM,yBAAyB,GAAA;AAC5B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACpD,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,CAAC;SACpE;KACJ;;;;;;IAQM,KAAK,GAAA;;KAEX;IAEM,QAAQ,GAAA;;KAEd;IAES,aAAa,GAAA;AACnB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE;gBAC9B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,aAAa,EAAE,CAAC;aACtC;SACJ;AAED,QAAA,IAAI,IAAI,CAAC,IAAI,EAAE;;YAEX,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,YAAA,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;SACtD;KACJ;IAES,UAAU,GAAA;AAChB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE;gBAC9B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;aACnC;SACJ;AAED,QAAA,IAAI,IAAI,CAAC,IAAI,EAAE;YACX,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;KACJ;AAEM,IAAA,qBAAqB,CAAC,EAAsB,EAAA;AAC/C,QAAA,IAAI,CAAC,QAAS,CAAC,8BAA8B,CAAC,EAAE,CAAC,CAAC;KACrD;AAED;;;;AAIG;AACI,IAAA,4BAA4B,CAAC,EAAsB,EAAA;AACtD,QAAA,IAAI,EAAE,CAAC,MAAM,EAAE;;AAGX,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YAClB,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC;aAChE;;AAGD,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC;aAChE;;AAGD,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;aAC5D;;AAGD,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;aAC1D;;AAGD,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC;aAC5D;;AAGD,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;aACzD;;;;;;SAOJ;KACJ;IAES,gCAAgC,GAAA;AACtC,QAAA,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;KAC7D;AACJ;;ACnZD;;;AAGG;MACU,IAAI,CAAA;AAKb,IAAA,WAAA,GAAA;QACI,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAChD,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC3C,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AACvC,QAAA,IAAI,QAAQ,CAAC,IAAI,EAAE;YACf,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC9C;AAED,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;KAC5B;IAEM,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAEM,IAAA,aAAa,CAAC,UAAmB,EAAA;AACpC,QAAA,IAAI,IAAI,CAAC,WAAW,IAAI,UAAU,EAAE;AAChC,YAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;AAC9B,YAAA,IAAI,IAAI,CAAC,WAAW,EAAE;gBAClB,IAAI,CAAC,IAAI,EAAE,CAAC;aACf;iBAAM;gBACH,IAAI,CAAC,IAAI,EAAE,CAAC;aACf;SACJ;KACJ;AAED;;;AAGG;IACI,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE;AAC7B,YAAA,IAAI,QAAQ,CAAC,IAAI,EAAE;gBACf,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aAC9C;SACJ;QACD,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;AACxC,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;KAC3B;AAED;;;AAGG;IACI,IAAI,GAAA;QACP,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AACvC,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;KAC5B;AAED;;;;AAIG;AACI,IAAA,MAAM,CAAC,GAAW,EAAA;QACrB,IAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACtC,QAAA,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;AAClC,QAAA,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;AACnC,QAAA,CAAC,CAAC,SAAS,GAAG,SAAS,GAAG,GAAG,CAAC;AAC9B,QAAA,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;AAC3B,QAAA,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;AAED;;;;AAIG;AACI,IAAA,MAAM,CAAC,GAAW,EAAA;QACrB,IAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACtC,QAAA,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;AAClC,QAAA,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;AACrC,QAAA,CAAC,CAAC,SAAS,GAAG,WAAW,GAAG,GAAG,CAAC;AAChC,QAAA,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;AAC3B,QAAA,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;AAED;;;;AAIG;AACI,IAAA,GAAG,CAAC,GAAW,EAAA;QAClB,IAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACtC,QAAA,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;AAClC,QAAA,CAAC,CAAC,SAAS,GAAG,GAAG,CAAC;AAClB,QAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACnB,QAAA,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;AACJ,CAAA;AAEM,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE;;ACvG9B;;AAEG;AAEH,IAAI,aAAa,GAAa;AAC1B,IAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM;AACxC,IAAA,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO;AAC/B,IAAA,OAAO,EAAE,OAAO;IAChB,OAAO,EAAE,OAAO,EAAE,OAAO;IACzB,OAAO,EAAE,OAAO,EAAE,OAAO;IACzB,OAAO,EAAE,OAAO,EAAE,OAAO;IACzB,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO;AACjD,IAAA,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ;AAChD,IAAA,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS;AACpD,IAAA,SAAS,EAAE,SAAS;AACpB,IAAA,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,aAAa,EAAE,iBAAiB;IACvE,gBAAgB;AAChB,IAAA,OAAO,EAAE,SAAS;CAAC,CAAC;AAEjB,MAAM,KAAK,GAA6B,EAAE,CAAC;AAElD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IAC3C,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAChC,CAAC;AAEM,MAAM,OAAO,GAA6B,EAAE,CAAC;AACpD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC3C,IAAA,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,GAAG,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;AACtE;;AC5BA;;AAEG;AAqBH;;AAE4B;AACrB,MAAM,gBAAgB,GAAoB;AAC7C,IAAA,CAAC,EAAE,EAAE;AACL,IAAA,CAAC,EAAE,EAAE;CACR,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AAClF,IAAA,OAAO,CAAC,EAAG,CAAC,gBAAgB,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAqB,CAAC,CAAC;AACzF,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AAClF,IAAA,OAAO,CAAC,EAAG,CAAC,gBAAgB,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAqB,CAAC,CAAC;AACzF,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AACnF,IAAA,OAAO,CAAC,EAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,KAAe,CAAC,CAAC;AACrE,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AACjF,IAAA,OAAO,CAAC,EAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,KAAe,CAAC,CAAC;AACrE,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AAClF,IAAA,OAAO,CAAC,EAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,KAAqB,CAAC,CAAC;AAC5E,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AAClF,IAAA,OAAO,CAAC,EAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,KAAqB,CAAC,CAAC;AAC5E,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AAClF,IAAA,OAAO,CAAC,EAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,KAAqB,CAAC,CAAC;AAC5E,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AACvF,IAAA,IAAI,GAAG,GAAG,OAAO,CAAC,EAAG,CAAC;IACtB,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;IACrD,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;IAChD,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC;IACnD,OAAO,CAAC,UAAU,EAAE,CAAC;AACzB,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AACzF,IAAA,IAAI,GAAG,GAAG,OAAO,CAAC,EAAG,CAAC;IACtB,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;IACrD,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,gBAAgB,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;IACtD,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC;IACnD,OAAO,CAAC,UAAU,EAAE,CAAC;AACzB,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AAC5F,IAAA,IAAI,KAAK,GAAG,QAAQ,CAAC,KAAmB,CAAC;IACzC,IAAI,GAAG,GAAG,OAAO,CAAC,EAAG,EACjB,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC;AACxB,IAAA,IAAI,UAAU,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;AACtC,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;AAC3B,QAAA,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AACzD,QAAA,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1C,QAAA,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;KACrB;IACD,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AAChD,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AACnF,IAAA,OAAO,CAAC,EAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,KAAmB,CAAC,CAAC;AAC1E,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AACrF,IAAA,OAAO,CAAC,EAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,KAAqB,CAAC,CAAC;AAC5E,CAAC,CAAC;AAEF;;AAE2B;AAC3B,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AACnF,IAAA,OAAO,CAAC,EAAG,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAgB,EAAE,QAAQ,CAAC,KAAe,CAAC,CAAC;AACpF,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AAClF,IAAA,OAAO,CAAC,EAAG,CAAC,eAAe,CAAC,QAAQ,CAAC,MAAgB,EAAE,QAAQ,CAAC,KAAqB,CAAC,CAAC;AAC3F,CAAC,CAAC;AAEF,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,UAAU,OAAgB,EAAE,QAAyB,EAAA;AAClF,IAAA,OAAO,CAAC,EAAG,CAAC,eAAe,CAAC,QAAQ,CAAC,MAAgB,EAAE,QAAQ,CAAC,KAAqB,CAAC,CAAC;AAC3F,CAAC,CAAC;AAEF;AACA;AACA;;AC5GA,MAAM,SAAS,GAAa,CAAC,MAAM,EAAE,OAAO,EAAE,eAAe,EAAE,gBAAgB,EAAE,OAAO,EAAE,YAAY,CAAC,CAAC;AAWxG;;;;;;;;;AASG;AACH,MAAM,OAAO,CAAA;IAiET,WAAY,CAAA,IAAY,EAAE,QAAyB,EAAA;AAE/C,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAEjB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,KAAK,IAAI,CAAC,IAAI,QAAQ,CAAC,UAAU,EAAE;YAC/B,IACI,OAAO,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,QAAQ;gBAC1C,OAAO,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,QAAQ,EAC5C;AACE,gBAAA,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,EAAC,IAAI,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,EAAoB,CAAC;aAC3E;iBAAM;AACH,gBAAA,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aAChD;SACJ;AAED,QAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACpB,QAAA,KAAK,IAAI,CAAC,IAAI,QAAQ,CAAC,QAAQ,EAAE;YAC7B,IACI,OAAO,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,QAAQ;gBACxC,OAAO,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,QAAQ,EAC1C;AACE,gBAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,EAAC,IAAI,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAoB,CAAC;aACvE;iBAAM;AACH,gBAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;aAC5C;SACJ;AAED,QAAA,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,YAAY,CAAC;AAE1C,QAAA,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC;AAE9C,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;AAEf,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AAErB,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;AAEf,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AAEpB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AAExB,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AAEzB,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AAErB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEnB,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;KACrC;AAED;;;;;AAKG;AACH,IAAA,OAAO,UAAU,CAAC,OAAgB,EAAE,QAAyB,EAAA;AACzD,QAAA,IAAI,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC;QACpB,IAAI,EAAE,EAAE;YACJ,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC/C,EAAE,CAAC,mBAAmB,CAClB,QAAQ,CAAC,MAAgB,EACxB,QAAQ,CAAC,KAAwB,CAAC,QAAQ,EAC3C,QAAQ,CAAC,QAAkB,EAC3B,QAAQ,CAAC,UAAU,EACnB,CAAC,EACD,CAAC,CACJ,CAAC;SACL;KACJ;AAED;;;AAGG;IACI,GAAG,GAAA;AACN,QAAA,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC;KAC3C;AAED;;;;AAIG;AACI,IAAA,GAAG,CAAC,QAA6B,EAAA;AACpC,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,KAAK,IAAI,CAAC,IAAI,QAAQ,EAAE;AACpB,YAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;AACvC,YAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;SACrD;KACJ;AAED;;;AAGG;IACI,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;AACxB,QAAA,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE;AACb,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACzB;KACJ;AAED;;;;;AAKG;IACI,eAAe,CAAC,IAAY,EAAE,MAAsB,EAAA;AACvD,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;QAClB,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;AAC/C,QAAA,EAAE,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;KAChE;AAED;;;;;AAKG;IACI,UAAU,CAAC,IAAY,EAAE,QAAgB,EAAA;QAC5C,IAAI,CAAC,EAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;KAC1C;AAED;;;;;;AAMG;IACO,uBAAuB,CAAC,MAAmB,EAAE,GAAW,EAAA;QAE9D,IAAI,CAAC,IAAI,CAAC,EAAE;AAAE,YAAA,OAAO,KAAK,CAAC;QAE3B,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AAClC,QAAA,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AAC9B,QAAA,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,kBAAkB,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC,cAAc,CAAC,EAAE;AAC7D,YAAA,IAAI,CAAC,MAAM,CACP,mBAAmB,IAAI,CAAC,IAAI,CAAK,EAAA,EAAA,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAA,CAAA,CAAG,CACvE,CAAC;AACF,YAAA,OAAO,KAAK,CAAC;SAChB;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;AAKG;AACO,IAAA,mBAAmB,CAAC,GAAW,EAAA;QACrC,IAAI,CAAC,IAAI,CAAC,EAAE;YAAE,OAAO;AACrB,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC;QACzD,IAAI,MAAM,IAAI,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;AACrD,YAAA,OAAO,MAAM,CAAC;SACjB;KACJ;AAED;;;;;AAKG;AACO,IAAA,qBAAqB,CAAC,GAAW,EAAA;QACvC,IAAI,CAAC,IAAI,CAAC,EAAE;YAAE,OAAO;AACrB,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC;QAC3D,IAAI,MAAM,IAAI,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;AACrD,YAAA,OAAO,MAAM,CAAC;SACjB;KACJ;AAED;;;AAGG;IACI,mBAAmB,GAAA;AACtB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;AAC3B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1C,EAAE,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,mBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACtC;KACJ;AAED;;;AAGG;IACI,kBAAkB,GAAA;AACrB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;AAC5B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1C,EAAE,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjC,YAAA,IAAI,CAAC,mBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACzC;KACJ;;;;;;;AASD;;;AAGG;IACI,MAAM,GAAA;AACT,QAAA,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC;KAC9C;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,EAA0B,EAAA;AAC3C,QAAA,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QAEb,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,EAAqB,CAAC;QAErD,IAAI,CAAC,IAAI,CAAC,EAAE;YAAE,OAAO;QAErB,IAAI,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACzD,IAAI,EAAE,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAErD,QAAA,IAAI,CAAC,EAAE,IAAI,CAAC,EAAE;YAAE,OAAO;QAEvB,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC7B,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAE7B,QAAA,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAGxB,QAAA,IAAI,CAAC,IAAI,CAAC,qBAAqB,EAAE;AAC7B,YAAA,IAAI,EAAE,CAAC,qBAAqB,EAAE;gBAC1B,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC,qBAAqB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAClE;iBAAM;gBACH,IAAI,GAAG,GAAG,EAAE,CAAC,YAAY,CAAC,wBAAwB,CAAC,CAAC;gBACpD,IAAI,GAAG,EAAE;oBACL,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC,0BAA0B,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBACzE;aACJ;;;;;SAKJ;AAED,QAAA,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;AAC3B,YAAA,IAAI,EAAE,CAAC,mBAAmB,EAAE;gBACxB,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAC9D;iBAAM;gBACH,IAAI,GAAG,GAAG,EAAE,CAAC,YAAY,CAAC,wBAAwB,CAAC,CAAC;gBACpD,IAAI,GAAG,EAAE;oBACL,IAAI,CAAC,mBAAmB,GAAG,GAAG,CAAC,wBAAwB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBACrE;aACJ;;;;;SAKJ;AAGD,QAAA,IAAI,CAAC,EAAE,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,WAAW,CAAC,EAAE;AAClD,YAAA,IAAI,CAAC,MAAM,CAAC,mBAAmB,IAAI,CAAC,IAAI,CAA6B,0BAAA,EAAA,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA,CAAA,CAAG,CAAC,CAAC;AACvG,YAAA,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAC1B,OAAO;SACV;QAED,IAAI,CAAC,GAAG,EAAE,CAAC;AAEX,QAAA,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,EAAE;;AAE5B,YAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,OAAO,CAAC,UAAU,CAAC;YAE9C,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,QAAkB,CAAC;AAC/C,YAAA,IAAI,WAAW,GAAW,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,GAAG,OAAO,CAAC;YAE/D,IAAI,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE;gBACtC,IAAI,CAAC,MAAM,CAAC,CAAA,gBAAA,EAAmB,IAAI,CAAC,IAAI,iBAAiB,CAAC,CAAA,cAAA,EAAiB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAA,aAAA,CAAe,CAAC,CAAC;gBACxH,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC,KAAK,CAAC;aAC3C;iBAAM;AACH,gBAAA,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAI,EAAU,CAAC,WAAW,CAAC,CAAC;aAC3D;AAED,YAAA,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,UAAU,IAAI,KAAK,CAAC;AACzE,YAAA,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC;AAE/D,YAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;YAE9C,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,SAAS,EAAE;gBACzB,IAAI,CAAC,MAAM,CAAC,CAAmB,gBAAA,EAAA,IAAI,CAAC,IAAI,CAAkB,eAAA,EAAA,CAAC,CAAe,aAAA,CAAA,CAAC,CAAC;AAC5E,gBAAA,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC1B,OAAO;aACV;YAED,IAAI,IAAI,GAAoB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AACrD,YAAA,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;gBAC1B,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC;aAC7C;YAED,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;AACpC,YAAA,IAAI,IAAI,KAAK,KAAK,CAAC,IAAI,EAAE;gBACrB,IAAI,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAW,CAAC;AAC/B,gBAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;AACxD,gBAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;aACxC;iBAAM;AACH,gBAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAW,CAAC,CAAC;AAC9C,gBAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAC/B;YAED,EAAE,CAAC,uBAAuB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAW,CAAC,CAAC;AAEjD,YAAA,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACxC,YAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAW,CAAC;SAC7C;AAED,QAAA,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,SAAS,EAAE;AAE1B,YAAA,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAC5C,IAAI,CAAC,GAAW,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAc,CAAC;gBACjD,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;aAChF;iBAAM;gBACH,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAc,CAAC,CAAC;aACjF;AAED,YAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACvC,YAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAE,CAAC;YAEhD,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,SAAS,EAAE;gBACzB,IAAI,CAAC,MAAM,CAAC,CAAmB,gBAAA,EAAA,IAAI,CAAC,IAAI,CAAe,YAAA,EAAA,CAAC,CAAe,aAAA,CAAA,CAAC,CAAC;AACzE,gBAAA,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC1B,OAAO;aACV;AAED,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACtC,YAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;SACjC;QAED,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,EAAkB,EAAE,EAAE,CAAC,CAAC;QAC7C,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,EAAkB,EAAE,EAAE,CAAC,CAAC;AAE7C,QAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;AACpB,QAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;KACvB;AACJ;;AC9bD,MAAMU,SAAO,GAAG,CAAA;;kBAEE,CAAC;AAEnB,MAAMC,UAAQ,GACV,CAAA;;;OAGG,CAAC;SAEQ,gBAAgB,GAAA;AAC5B,IAAA,OAAO,IAAI,OAAO,CAAC,kBAAkB,EAAE;AACnC,QAAA,QAAQ,EAAE;AACN,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,YAAY,EAAE,OAAO;AACrB,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,OAAO,EAAE,OAAO;AAChB,YAAA,WAAW,EAAE,OAAO;AACvB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,UAAU,EAAE,OAAO;AACnB,YAAA,MAAM,EAAE,MAAM;AACjB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;cAuBED,SAAO,CAAA;;cAEPC,UAAQ,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CR,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;AAIE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;SAEe,gBAAgB,GAAA;AAC5B,IAAA,OAAO,IAAI,OAAO,CAAC,WAAW,EAAE;AAC5B,QAAA,QAAQ,EAAE;AACN,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,SAAS,EAAE,WAAW;AACtB,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,YAAY,EAAE,OAAO;AACrB,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,OAAO,EAAE,OAAO;AAChB,YAAA,WAAW,EAAE,OAAO;AACvB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,UAAU,EAAE,OAAO;AACnB,YAAA,MAAM,EAAE,MAAM;AACjB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;cAyBED,SAAO,CAAA;;cAEPC,UAAQ,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CR,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;;;;;;AASE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;ACnNA,MAAMC,qBAAmB,GAAG,CAAC,CAAC;AAC9B,MAAMC,iBAAe,GAAG,CAAC,CAAC;AAC1B,MAAMC,aAAW,GAAG,CAAC,CAAC;AACtB,MAAMC,eAAa,GAAG,CAAC,CAAC;AACxB,MAAMC,aAAW,GAAG,CAAC,CAAC;AACtB,MAAMC,iBAAe,GAAG,CAAC,CAAC;AAC1B,MAAMC,iBAAe,GAAG,CAAC,CAAC;AAC1B,MAAMC,eAAa,GAAG,CAAC,CAAC;AAExB;;AAEG;AACH,MAAM,oBAAoB,CAAA;AA4CtB,IAAA,WAAA,CAAY,gBAAkC,EAAA;AAE1C,QAAA,IAAI,CAAC,IAAI,GAAG,oBAAoB,CAAC,WAAW,EAAE,CAAC;AAE/C,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;AAE1C,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAEhC,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACvC,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,eAAe,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACrC,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACrC,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACzC,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;AAE7C,QAAA,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,uBAAuB,CAACP,qBAAmB,CAAC,GAAG,IAAI,CAAC,wBAAwB,CAAC;QAClF,IAAI,CAAC,uBAAuB,CAACC,iBAAe,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAC1E,IAAI,CAAC,uBAAuB,CAACC,aAAW,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAClE,IAAI,CAAC,uBAAuB,CAACC,eAAa,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACtE,IAAI,CAAC,uBAAuB,CAACC,aAAW,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAClE,IAAI,CAAC,uBAAuB,CAACC,iBAAe,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAC1E,IAAI,CAAC,uBAAuB,CAACC,iBAAe,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAC1E,IAAI,CAAC,uBAAuB,CAACC,eAAa,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAEtE,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;KACzE;AAEM,IAAA,OAAO,CAAC,OAA6B,EAAA;QACxC,OAAO,OAAO,KAAK,OAAO,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC;KAClD;AAED,IAAA,OAAO,OAAO,CAAC,IAAc,EAAE,IAAc,EAAA;AACzC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SACtB;KACJ;IAEM,WAAW,GAAA;QACd,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YAC1C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAE;AAC5C,gBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAACC,gBAAwB,EAAE,CAAC,CAAC;aACjE;YAED,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,gBAAgB,EAAE;AACnD,gBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAACC,gBAAwB,EAAE,CAAC,CAAC;aACjE;SACJ;KACJ;AAEM,IAAA,WAAW,CAAC,QAAkB,EAAA;AACjC,QAAA,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;IAEM,OAAO,GAAA;AACV,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;QACpC,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAClC;KACJ;IAES,iBAAiB,GAAA;AACvB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAChC,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AAC7B,YAAA,EAAE,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AACtB,YAAA,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC;AACnB,YAAA,EAAE,CAAC,QAAQ,GAAG,KAAK,CAAC;AACpB,YAAA,EAAE,CAAC,OAAO,GAAG,SAAS,CAAC;SAC1B;AACD,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;KACzB;IAEM,KAAK,GAAA;;AAER,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;AAEzB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;;AAEvB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;;AAE7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;;AAE5B,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;;AAErB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;;AAEvB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;;AAErB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;AAEzB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACvC,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,eAAe,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACrC,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACrC,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACzC,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAE7C,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,OAAO,EAAE,CAAC;KAClB;IAES,cAAc,GAAA;AACpB,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAG,CAAC;AACpC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAkC,CAAC,CAAC;AACzD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAiC,CAAC,CAAC;AACxD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,WAA0B,CAAC,CAAC;AACjD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;AACnD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,WAA0B,CAAC,CAAC;AACjD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,eAA8B,CAAC,CAAC;AACrD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;AACnD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,eAA8B,CAAC,CAAC;AACrD,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAkC,CAAC,CAAC;SAC5D;AAED,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;KACnC;IAEM,MAAM,GAAA;AACT,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YACpC,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE;oBACzB,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3C,oBAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;iBACnC;aACJ;SACJ;KACJ;AAEM,IAAA,GAAG,CAAC,SAAwB,EAAA;AAC/B,QAAA,IAAI,SAAS,CAAC,aAAa,IAAI,CAAC,CAAC,EAAE;AAC/B,YAAA,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC1B,YAAA,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC1B,SAAS,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;AAClD,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACpC;KACJ;IAES,YAAY,GAAA;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC;AACxB,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;AAClB,QAAA,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QAChC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC;QACvC,IAAI,GAAG,GAAG,EAAE,CAAC,UAAU,EACnB,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;QAEtB,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,EACV,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAEhC,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAEzB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,CAAC,kBAAkB,CAAC,CAAC;QAErD,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAE/B,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAC5E,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAExF,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC5D,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;QAE1D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,gBAAgB,EAAE,EAAE,CAAC,eAAe,CAAC,CAAC;QAExD,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC;QAE7C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAA8B,CAAC,CAAC;QACpE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAA4B,CAAC,CAAC;QAClE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE5F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAkC,CAAC,CAAC;QACxE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEvG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAiC,CAAC,CAAC;QACvE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAErG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,WAA0B,CAAC,CAAC;QAChE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEtF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,WAA0B,CAAC,CAAC;QAChE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEtF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAA4B,CAAC,CAAC;QAClE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE1F,QAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAG,EAAE,CAAC,UAAqB,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC;QAE9E,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,MAAO,CAAC,WAAW,EAAE,CAAC,CAAC,MAAO,CAAC,YAAY,CAAC,CAAC,CAAC;QAE7E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAA8B,CAAC,CAAC;QACpE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE9F,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,CAAC,CAAC;AAE7D,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;KAC3B;IAES,YAAY,GAAA;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC;AACxB,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;AAClB,QAAA,CAAC,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;QACvC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC;QAC9C,IAAI,GAAG,GAAG,EAAE,CAAC,UAAU,EACnB,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;QAEtB,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,EACV,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAEhC,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAEzB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,CAAC,kBAAkB,CAAC,CAAC;AAErD,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAC5E,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAExF,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC5D,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;QAE1D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,gBAAgB,EAAE,EAAE,CAAC,eAAe,CAAC,CAAC;QAExD,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC;QAE7C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAA4B,CAAC,CAAC;QAClE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE5F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAkC,CAAC,CAAC;QACxE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEvG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAiC,CAAC,CAAC;QACvE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAErG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAkC,CAAC,CAAC;QACxE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC9F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,WAA0B,CAAC,CAAC;QAChE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEtF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAA4B,CAAC,CAAC;QAClE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE1F,QAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAG,EAAE,CAAC,UAAqB,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC;QAE9E,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,MAAO,CAAC,WAAW,EAAE,CAAC,CAAC,MAAO,CAAC,YAAY,CAAC,CAAC,CAAC;QAE7E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAA8B,CAAC,CAAC;QACpE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE9F,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,CAAC,CAAC;AAE7D,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;KAC3B;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YACzB,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;KACJ;IAEM,WAAW,GAAA;QACd,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,EAAE;YAChD,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;KACJ;AAEM,IAAA,sBAAsB,CAAC,UAAkB,EAAA;AAC5C,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACzB,QAAA,KAAK,IAAI,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACxC,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC;SAC1B;KACJ;AAES,IAAA,gBAAgB,CAAC,SAAwB,EAAA;AAE/C,QAAA,IAAI,EAAE,GAAG,SAAS,CAAC,aAAa,CAAC;QAEjC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;AAE/B,QAAA,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AAChB,QAAA,IAAI,CAAC,QAAQ,GAAG,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAiB,CAAC;AAEvE,QAAA,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AACZ,QAAA,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,CAAiB,CAAC;AACvF,QAAA,IAAI,CAAC,eAAe,GAAG,gBAAgB,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,EAAE,EAAE,CAAiB,CAAC;AACrF,QAAA,IAAI,CAAC,UAAU,GAAG,gBAAgB,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,CAAiB,CAAC;;AAE3E,QAAA,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,CAAiB,CAAC;AAEvF,QAAA,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AACZ,QAAA,IAAI,CAAC,UAAU,GAAG,gBAAgB,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,CAAiB,CAAC;AAC3E,QAAA,IAAI,CAAC,QAAQ,GAAG,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAiB,CAAC;AACvE,QAAA,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,EAAE,CAAiB,CAAC;AAE/E,QAAA,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACX,QAAA,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,CAAiB,CAAC;AAE9E,QAAA,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAChC,IAAI,CAAC,OAAO,EAAE,CAAC;AAEf,QAAA,SAAS,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AAC7B,QAAA,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC1B,QAAA,SAAS,CAAC,QAAQ,GAAG,KAAK,CAAC;AAC3B,QAAA,SAAS,CAAC,OAAO,GAAG,SAAS,CAAC;KACjC;IAEM,iBAAiB,CAAC,KAAa,EAAE,WAAiB,EAAA;;KAExD;AAEM,IAAA,MAAM,CAAC,SAAwB,EAAA;AAClC,QAAA,IAAI,SAAS,CAAC,QAAQ,EAAE;AACpB,YAAA,IAAI,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE;AAC7D,gBAAA,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;aACpC;iBAAM;AACH,gBAAA,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;aAC7B;SACJ;KACJ;AAEM,IAAA,cAAc,CAAC,KAAa,EAAE,YAAkB,EAAE,WAAiB,EAAA;AACtE,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;;QAGnB,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,EACzB,CAAC,GAAG,YAAY,CAAC,CAAC,EAClB,CAAC,GAAG,YAAY,CAAC,CAAC,EAClB,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC;AAEvB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;;AAGd,QAAA,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC;AACzB,QAAA,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAClB,QAAA,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAClB,QAAA,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAElB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,IAAI,CAAC,eAAe,CAACR,iBAAe,CAAC,GAAG,IAAI,CAAC;KAChD;IAEM,kBAAkB,CAAC,KAAa,EAAE,KAAW,EAAA;AAChD,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,EACzB,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,EACjB,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,EACjB,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;AAEtB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,IAAI,CAAC,eAAe,CAACD,qBAAmB,CAAC,GAAG,IAAI,CAAC;KACpD;AAEM,IAAA,UAAU,CAAC,KAAa,EAAE,KAAa,EAAE,MAAc,EAAA;AAC1D,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,EACjB,CAAC,GAAG,KAAK,EACT,CAAC,GAAG,MAAM,CAAC;AAEf,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,IAAI,CAAC,eAAe,CAACE,aAAW,CAAC,GAAG,IAAI,CAAC;KAC5C;IAEM,YAAY,CAAC,KAAa,EAAE,MAAY,EAAA;AAC3C,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,EACnB,CAAC,GAAG,MAAM,CAAC,CAAC,EACZ,CAAC,GAAG,MAAM,CAAC,CAAC,EACZ,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;AAEjB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,IAAI,CAAC,eAAe,CAACC,eAAa,CAAC,GAAG,IAAI,CAAC;KAC9C;IAEM,UAAU,CAAC,KAAa,EAAE,IAAU,EAAA;AACvC,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,EACjB,CAAC,GAAG,IAAI,CAAC,CAAC,EACV,CAAC,GAAG,IAAI,CAAC,CAAC,EACV,CAAC,GAAG,IAAI,CAAC,CAAC,EACV,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAEf,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,IAAI,CAAC,eAAe,CAACC,aAAW,CAAC,GAAG,IAAI,CAAC;KAC5C;IAEM,cAAc,CAAC,KAAa,EAAE,QAAgB,EAAA;AACjD,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;AAE1B,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC;AAChB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;AACpB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;AACpB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;AACpB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;AACpB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;AAEpB,QAAA,IAAI,CAAC,eAAe,CAACC,iBAAe,CAAC,GAAG,IAAI,CAAC;KAChD;IAEM,cAAc,CAAC,KAAa,EAAE,SAAgC,EAAA;AACjE,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;QAE1B,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;AAE1B,QAAA,IAAI,CAAC,eAAe,CAACC,iBAAe,CAAC,GAAG,IAAI,CAAC;KAChD;IAEM,aAAa,CAAC,KAAa,EAAE,UAAmB,EAAA;AACnD,QAAA,IAAI,IAAc,CAAC;QACnB,IAAI,UAAU,EAAE;AACZ,YAAA,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;SAC7E;aAAM;YACH,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SAC/C;AACD,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;KAClC;IAEM,YAAY,CAAC,KAAa,EAAE,SAAkC,EAAA;AACjE,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;QAExB,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;AAE1B,QAAA,IAAI,CAAC,eAAe,CAACC,eAAa,CAAC,GAAG,IAAI,CAAC;KAC9C;IAEM,oBAAoB,GAAA;AACvB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,EAC3B,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC;AAEhD,QAAA,IAAI,CAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,CAAC,QAAQ,KAAK,QAAQ,EAAE;YAC7E,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAkC,CAAC,CAAC;YAC5D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAiC,CAAC,CAAC;YAC3D,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;YAClE,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SACpE;QAED,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,mBAAoB,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACzE,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,kBAAmB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;KAC1E;IAEM,gBAAgB,GAAA;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,WAA0B,CAAC,CAAC;QACpD,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KACtF;IAEM,kBAAkB,GAAA;AACrB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;QACtD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC5F;IAED,gBAAgB,GAAA;AACZ,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,WAA0B,CAAC,CAAC;QACpD,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KACtF;IAEM,oBAAoB,GAAA;AACvB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;AAEhC,QAAA,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;YACrF,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,eAA8B,CAAC,CAAC;AACxD,YAAA,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;SACjF;QAED,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;KACnE;IAEM,kBAAkB,GAAA;AACrB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;QACtD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC5F;IAEM,oBAAoB,GAAA;AACvB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,eAA8B,CAAC,CAAC;QACxD,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAClG;;;;;;;;;;IAYM,wBAAwB,GAAA;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAkC,CAAC,CAAC;QAC5D,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC9G;IAEM,mBAAmB,GAAA;KACzB;;AAvuBM,oBAAW,CAAA,WAAA,GAAW,CAAC;;ACpBlC;;AAEG;AACH,MAAM,gBAAiB,SAAQ,oBAAoB,CAAA;AAI/C,IAAA,WAAA,CAAY,KAAuB,EAAA;QAC/B,KAAK,CAAC,KAAK,CAAC,CAAC;AAEb,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;KACzB;AAEe,IAAA,GAAG,CAAC,SAAoB,EAAA;AACpC,QAAA,IAAI,SAAS,CAAC,aAAa,IAAI,CAAC,CAAC,EAAE;AAC/B,YAAA,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AAErB,YAAA,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;YACtC,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,GAAG,GAAG,SAAS,CAAC,MAAM,EAAE,KAAK,SAAS,CAAC,QAAQ,EAAE,IAAI,SAAS,CAAC,QAAQ,EAAG,CAAC,GAAG,CAAC,CAAC;YACpF,IAAI,GAAG,EAAE;AACL,gBAAA,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;aACzB;SACJ;KACJ;AAES,IAAA,qBAAqB,CAAC,SAAoB,EAAA;AAChD,QAAA,IAAI,SAAS,CAAC,aAAa,EAAE,EAAE;AAC3B,YAAA,IAAI,CAAC,UAAU,GAAG,iBAAiB,CAC/B,IAAI,CAAC,UAAU,EACf,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CACrD,CAAC;SACrB;aAAM;AACH,YAAA,IAAI,CAAC,UAAU,GAAG,iBAAiB,CAC/B,IAAI,CAAC,UAAU,EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CACvB,CAAC;SACrB;AAED,QAAA,IAAI,CAAC,YAAY,GAAG,iBAAiB,CACjC,IAAI,CAAC,YAAY,EACjB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CACvB,CAAC;QAElB,IAAI,CAAC,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,EAC7B,CAAC,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,EAC7B,CAAC,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,EAC7B,CAAC,CAAC;QACN,IAAI,CAAC,gBAAgB,GAAG,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,EAAE;YAC7D,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,SAAA,CAAiB,CAAC;AAEnB,QAAA,CAAC,GAAG,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;AAC7B,QAAA,CAAC,GAAG,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;AAC7B,QAAA,CAAC,GAAG,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;QAC7B,IAAI,CAAC,eAAe,GAAG,iBAAiB,CAAC,IAAI,CAAC,eAAe,EAAE;YAC3D,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,SAAA,CAAiB,CAAC;AAEnB,QAAA,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC;AACrB,QAAA,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC;AACtB,QAAA,IAAI,CAAC,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAiB,CAAC;AAEvG,QAAA,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;AACxB,QAAA,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;AACxB,QAAA,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,iBAAiB,CAAC,IAAI,CAAC,UAAU,EAAE;YACjD,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;YACP,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,SAAA,CAAiB,CAAC;AAEnB,QAAA,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;AACvB,QAAA,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;AACvB,QAAA,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;AACvB,QAAA,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;QACvB,IAAI,CAAC,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE;AAC7C,YAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,YAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,YAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,YAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,YAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,YAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACb,SAAA,CAAiB,CAAC;AAEnB,QAAA,CAAC,GAAG,SAAS,CAAC,SAAS,CAAC;QACxB,IAAI,CAAC,YAAY,GAAG,iBAAiB,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAiB,CAAC;QAE7F,CAAC,GAAG,SAAS,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;QAC7C,CAAC,GAAG,SAAS,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;QAC7C,CAAC,GAAG,SAAS,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;QAC7C,IAAI,CAAC,gBAAgB,GAAG,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAiB,CAAC;KAC5I;AAED,IAAA,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,WAAW,CAAA;KAC1B;IAEe,mBAAmB,GAAA;AAC/B,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAChC,QAAA,IAAI,EAAE,IAAI,IAAI,CAAC,SAAS,EAAE;AACtB,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,sBAAsB,CAAC;AAC/C,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC9C,IAAI,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AAC7B,gBAAA,IAAI,GAAG,GAAG,EAAE,CAAC,QAAQ,EAAE,CAAC;gBACxB,IAAI,GAAG,EAAE;oBACL,IAAI,SAAS,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,WAAY,CAAC,CAAC;oBACzC,IAAI,SAAS,EAAE;wBACX,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,aAAa,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC;qBAC9D;iBACJ;aACJ;SACJ;KACJ;AACJ;;AClID,MAAM,IAAI,GAAG,CAAA;;EAEX,CAAC;AAEI,MAAM,UAAU,GAAG,MACtB,IAAI,OAAO,CAAC,YAAY,EAAE;AACtB,IAAA,QAAQ,EAAE;AACN,QAAA,UAAU,EAAE,MAAM;AAClB,QAAA,gBAAgB,EAAE,MAAM;AAExB,QAAA,gBAAgB,EAAE,MAAM;AAExB,QAAA,eAAe,EAAE,MAAM;AACvB,QAAA,cAAc,EAAE,MAAM;AAEtB,QAAA,eAAe,EAAE,MAAM;AACvB,QAAA,aAAa,EAAE,MAAM;AACrB,QAAA,aAAa,EAAE,OAAO;AAEtB,QAAA,QAAQ,EAAE,WAAW;AACrB,QAAA,WAAW,EAAE,OAAO;AACpB,QAAA,WAAW,EAAE,OAAO;AACvB,KAAA;AACD,IAAA,UAAU,EAAE;AACR,QAAA,eAAe,EAAE,MAAM;AACvB,QAAA,aAAa,EAAE,MAAM;AACrB,QAAA,SAAS,EAAE,MAAM;QAEjB,aAAa,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QACzC,YAAY,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QACxC,MAAM,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QAClC,MAAM,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QAClC,UAAU,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QACtC,QAAQ,EAAE,EAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,EAAC;QACrC,IAAI,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;AACnC,KAAA;AACD,IAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;cA4BE,IAAI,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CJ,aAAA,CAAA;AAEN,IAAA,cAAc,EAAE,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCN,iBAAA,CAAA;AACb,CAAA,CAAC,CAAC;AAEA,MAAM,kBAAkB,GAAG,MAC9B,IAAI,OAAO,CAAC,oBAAoB,EAAE;AAC9B,IAAA,QAAQ,EAAE;AACN,QAAA,UAAU,EAAE,MAAM;AAClB,QAAA,gBAAgB,EAAE,MAAM;AACxB,QAAA,gBAAgB,EAAE,MAAM;AACxB,QAAA,eAAe,EAAE,MAAM;AACvB,QAAA,cAAc,EAAE,MAAM;AACtB,QAAA,YAAY,EAAE,MAAM;AACvB,KAAA;AACD,IAAA,UAAU,EAAE;AACR,QAAA,eAAe,EAAE,MAAM;QACvB,aAAa,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QACzC,YAAY,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QACxC,aAAa,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QACzC,MAAM,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QAClC,UAAU,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;QACtC,QAAQ,EAAE,EAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,EAAC;QACrC,IAAI,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAC;AACnC,KAAA;AACD,IAAA,YAAY,EAAE,CAAA;;;;;;;;;;;;;;;;;;;;cAoBR,IAAI,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CJ,aAAA,CAAA;AACN,IAAA,cAAc,EACV,CAAA;;;;AAIE,aAAA,CAAA;AACT,CAAA,CAAC;;ACxON,MAAMA,eAAa,GAAG,CAAC,CAAC;AACxB,MAAMN,iBAAe,GAAG,CAAC,CAAC;AAC1B,MAAMG,aAAW,GAAG,CAAC,CAAC;AACtB,MAAM,cAAc,GAAG,CAAC,CAAC;AACzB,MAAM,YAAY,GAAG,CAAC,CAAC;AACvB,MAAM,WAAW,GAAG,CAAC,CAAC;AACtB,MAAMF,aAAW,GAAG,CAAC,CAAC;AACtB,MAAMF,qBAAmB,GAAG,CAAC,CAAC;AAC9B,MAAM,cAAc,GAAG,CAAC,CAAC;AACzB,MAAMM,iBAAe,GAAG,CAAC,CAAC;AAC1B,MAAM,gBAAgB,GAAG,EAAE,CAAC;AAE5B,SAAS,oBAAoB,CAAC,GAA0B,EAAE,QAAgB,CAAC,EAAE,MAAiB,GAAA,CAAC,EAAE,QAAA,GAAmB,CAAC,EAAE,GAAG,MAAgB,EAAA;AACtI,IAAA,MAAM,SAAS,GAAG,KAAK,GAAG,MAAM,CAAC;AACjC,IAAA,KAAK,IAAI,CAAC,GAAG,SAAS,EAAE,GAAG,GAAG,SAAS,GAAG,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;QAC5D,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;KACjC;AACD,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAM,YAAY,CAAA;AA4Cd,IAAA,WAAA,CAAY,gBAAkC,EAAA;AAE1C,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AAEnB,QAAA,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;AAE1C,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AAErB,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;AAEtB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AAExB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAC3B,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAC3B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AAEvB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAE5B,QAAA,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,uBAAuB,CAACN,qBAAmB,CAAC,GAAG,IAAI,CAAC,wBAAwB,CAAC;QAClF,IAAI,CAAC,uBAAuB,CAACC,iBAAe,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAC1E,IAAI,CAAC,uBAAuB,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC;QACxE,IAAI,CAAC,uBAAuB,CAACG,aAAW,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAClE,IAAI,CAAC,uBAAuB,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC;QACtE,IAAI,CAAC,uBAAuB,CAACG,eAAa,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACtE,IAAI,CAAC,uBAAuB,CAACL,aAAW,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAClE,IAAI,CAAC,uBAAuB,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC;QACxE,IAAI,CAAC,uBAAuB,CAACI,iBAAe,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAC1E,IAAI,CAAC,uBAAuB,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAClE,IAAI,CAAC,uBAAuB,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC,qBAAqB,CAAC;AAE5E,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;KACzE;AAEM,IAAA,aAAa,CAAC,KAAqE,EAAA;QACtF,IAAI,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;AAC1D,YAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,QAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;SAChG;KACJ;IAEM,KAAK,GAAA;AAER,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;AAEtB,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AAErB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAC3B,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAC3B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QAEvB,IAAI,CAAC,cAAc,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;KAGvB;IAEM,cAAc,GAAA;AAEjB,QAAA,IAAI,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,OAAO,IAAI,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,QAAQ,EAAE;AAErG,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,EACnD,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEf,YAAA,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC/B,YAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAErB,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAiB,CAAC,CAAC;AACxC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,aAAc,CAAC,CAAC;AACrC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAoB,CAAC,CAAC;AAC3C,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;AAC1C,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,cAAe,CAAC,CAAC;AACtC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,cAAe,CAAC,CAAC;AACtC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAoB,CAAC,CAAC;AAC3C,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,cAAe,CAAC,CAAC;AACtC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,eAAgB,CAAC,CAAC;SAC1C;AAED,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;KAC/B;IAEM,kBAAkB,GAAA;QACrB,MAAM,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,CAAC;QAC5D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,aAAc,CAAC,CAAC;QACxC,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAClD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAA0B,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC5G;IAEM,mBAAmB,GAAA;AAEtB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,EACvD,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;AAEvC,QAAA,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,KAAK,QAAQ,EAAE;YACnE,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,cAAe,CAAC,CAAC;YACzC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SAChE;QAED,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAEpD,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,WAAyB,CAAC,CAAC;KAC/E;IAEM,gBAAgB,GAAA;QACnB,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,EACrD,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;AAExC,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,KAAK,QAAQ,EAAE;YAC7D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;YACtC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SAC7D;QAED,IAAI,CAAC,QAAQ,GAAG,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAE9C,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,QAAwB,CAAC,CAAC;KAC3E;IAEM,qBAAqB,GAAA;QACxB,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,EACrD,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC;AAE7C,QAAA,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,QAAQ,KAAK,QAAQ,EAAE;YACvE,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAiB,CAAC,CAAC;YAC3C,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SAClE;QAED,IAAI,CAAC,aAAa,GAAG,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAExD,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,aAA6B,CAAC,CAAC;KACrF;IAEM,oBAAoB,GAAA;QACvB,MAAM,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,CAAC;QAC5D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,eAAgB,CAAC,CAAC;QAC1C,IAAI,CAAC,YAAY,GAAG,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACtD,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAA0B,EAAE,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAChH;IAEM,oBAAoB,GAAA;QACvB,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,EACrD,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC;AAEhD,QAAA,IAAI,CAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,CAAC,QAAQ,KAAK,QAAQ,EAAE;YAC7E,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAoB,CAAC,CAAC;YAC9C,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;YAC7C,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;YAClE,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SACpE;QAED,IAAI,CAAC,gBAAgB,GAAG,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC9D,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAE5D,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,mBAAoB,EAAE,IAAI,CAAC,gBAAgC,CAAC,CAAC;QACzF,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,kBAAmB,EAAE,IAAI,CAAC,eAA+B,CAAC,CAAC;KAC1F;IAEM,gBAAgB,GAAA;QACnB,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,EACrD,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;AAExC,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,KAAK,QAAQ,EAAE;YAC7D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;YACtC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SAC7D;QAED,IAAI,CAAC,QAAQ,GAAG,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAE9C,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,QAAsB,CAAC,CAAC;KACzE;IAEM,gBAAgB,GAAA;QACnB,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,EACrD,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;AAExC,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,KAAK,QAAQ,EAAE;YAC7D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;YACtC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SAC7D;QAED,IAAI,CAAC,QAAQ,GAAG,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAE9C,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,QAAwB,CAAC,CAAC;KAC3E;IAEM,mBAAmB,GAAA;QACtB,MAAM,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,CAAC;QAC5D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,cAAe,CAAC,CAAC;QACzC,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACpD,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAyB,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC7G;IAEM,mBAAmB,GAAA;QACtB,MAAM,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,CAAC;QAC5D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,cAAe,CAAC,CAAC;QACzC,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;AACjE,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,wBAAwB,CAAC,IAAI,CAAC,WAA0B,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KACjH;IAEM,wBAAwB,GAAA;QAC3B,MAAM,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,CAAC;QAC5D,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAoB,CAAC,CAAC;QAC9C,IAAI,CAAC,gBAAgB,GAAG,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC9D,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAA8B,EAAE,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC5H;IAEM,OAAO,GAAA;AACV,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;QACpC,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAClC;KACJ;IAEM,MAAM,GAAA;AACT,QAAA,IAAI,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE;AAChC,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YACpC,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE;oBACzB,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3C,oBAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;iBACnC;aACJ;AACD,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACtB;KACJ;AACJ,CAAA;AAED,MAAM,gBAAgB,CAAA;AAsBlB,IAAA,WAAA,CAAY,gBAAkC,EAAA;AAE1C,QAAA,IAAI,CAAC,IAAI,GAAG,gBAAgB,CAAC,WAAW,EAAE,CAAC;AAE3C,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;AAE1C,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,GAAG,EAAwB,CAAC;AACxD,QAAA,IAAI,CAAC,sBAAsB,GAAG,EAAE,CAAC;AAEjC,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;KACjC;IAEM,WAAW,GAAA;QACd,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;AACvC,YAAA,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE;AACpD,gBAAA,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAACI,UAAkB,EAAE,CAAC,CAAC;aAClE;AACD,YAAA,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,kBAAkB,EAAE;AAC5D,gBAAA,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAACC,kBAA0B,EAAE,CAAC,CAAC;aAC1E;SACJ;KACJ;AAEM,IAAA,aAAa,CAAC,UAAkB,EAAA;AAEnC,QAAA,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;QAE1B,IAAI,CAAC,WAAW,EAAE,CAAC;;;AAInB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACzD,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5D;AAED,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC9C,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC;SACxC;QAED,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;IAEM,aAAa,CAAC,GAAW,EAAE,GAAW,EAAA;QACzC,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC/C,IAAI,OAAO,EAAE;AACT,YAAA,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC;YAE1B,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;AACxC,YAAA,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;SACrC;KACJ;IAEM,YAAY,CAAC,GAAW,EAAE,GAAW,EAAA;QACxC,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC/C,IAAI,GAAG,EAAE;YACL,IAAI,OAAO,IAAI,OAAO,CAAC,UAAU,KAAK,GAAG,EAAE;AACvC,gBAAA,OAAO,CAAC,UAAU,GAAG,GAAG,CAAC;gBAEzB,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAI;oBACpC,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AAC/C,iBAAC,CAAC,CAAA;aACL;SACJ;KACJ;IAEM,mBAAmB,CAAC,MAAgB,EAAE,GAAW,EAAA;QACpD,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC/C,IAAI,OAAO,EAAE;AACT,YAAA,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,KAAK,OAAO,CAAC,UAAU,CAAC,MAAM,EAAE;AACtD,gBAAA,OAAO,CAAC,UAAU,GAAG,MAAM,CAAC,QAAQ,CAAC;AACrC,gBAAA,OAAO,CAAC,eAAe,CAACJ,eAAa,CAAC,GAAG,IAAI,CAAC;aACjD;AACD,YAAA,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE;AACtD,gBAAA,OAAO,CAAC,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC;AACrC,gBAAA,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC;aAClD;AACD,YAAA,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE;AACtD,gBAAA,OAAO,CAAC,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC;AACrC,gBAAA,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;aAChD;AACD,YAAA,IAAI,MAAM,CAAC,SAAS,CAAC,MAAM,KAAK,OAAO,CAAC,YAAY,CAAC,MAAM,EAAE;AACzD,gBAAA,OAAO,CAAC,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC;AACxC,gBAAA,OAAO,CAAC,eAAe,CAACD,iBAAe,CAAC,GAAG,IAAI,CAAC;aACnD;AAED,YAAA,OAAO,CAAC,WAAW,GAAG,MAAM,CAAC,GAAG,CAAC;AAEjC,YAAA,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;AAElC,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AACzB,YAAA,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,CAAC;SAC5E;KACJ;AAES,IAAA,oBAAoB,CAAC,SAAoB,EAAA;AAC/C,QAAA,MAAM,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;QAE1B,IAAI,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAE7C,IAAI,CAAC,OAAO,EAAE;AACV,YAAA,OAAO,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC;YACjC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;AACxC,YAAA,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,CAAC;;;AAIzE,YAAA,OAAO,CAAC,UAAU,GAAG,SAAS,CAAC,QAAQ,CAAA;AACvC,YAAA,OAAO,CAAC,WAAW,GAAG,SAAS,CAAC,OAAO,CAAC;AACxC,YAAA,OAAO,CAAC,WAAW,GAAG,SAAS,CAAC,OAAO,CAAC;AACxC,YAAA,OAAO,CAAC,YAAY,GAAG,SAAS,CAAC,SAAS,CAAC;YAC3C,OAAO,CAAC,WAAW,GAAG,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC;AAE7C,YAAA,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;SACrC;AAED,QAAA,SAAS,CAAC,aAAa,GAAG,OAAO,CAAC,YAAY,EAAE,CAAC;AACjD,QAAA,SAAS,CAAC,QAAQ,GAAG,OAAO,CAAC;AAC7B,QAAA,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAEnC,IAAI,QAAQ,GAAG,CAAC,CAAC;AAEjB,QAAA,OAAO,CAAC,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,oBAAoB,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,aAAa,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAE9H,IAAI,CAAC,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,EAC7B,CAAC,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,EAC7B,CAAC,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,EAC7B,CAAC,CAAC;QAEN,OAAO,CAAC,gBAAgB,GAAG,YAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,oBAAoB,CAAC,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAE5H,QAAA,CAAC,GAAG,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;AAC7B,QAAA,CAAC,GAAG,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;AAC7B,QAAA,CAAC,GAAG,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;QAC7B,OAAO,CAAC,eAAe,GAAG,YAAY,CAAC,OAAO,CAAC,eAAe,EAAE,oBAAoB,CAAC,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAE1H,CAAC,GAAG,SAAS,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;QAC7C,CAAC,GAAG,SAAS,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;QAC7C,CAAC,GAAG,SAAS,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;QAC7C,OAAO,CAAC,gBAAgB,GAAG,YAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,oBAAoB,CAAC,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAE5H,QAAQ,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AACtB,QAAA,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AACtB,QAAA,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AACtB,QAAA,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AACtB,QAAA,OAAO,CAAC,QAAQ,GAAG,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,oBAAoB,CAAC,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAE/G,QAAA,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;AACvB,QAAA,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;AACvB,QAAA,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;AACvB,QAAA,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;AACvB,QAAA,OAAO,CAAC,QAAQ,GAAG,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,oBAAoB,CAAC,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAE/G,QAAQ,GAAG,CAAC,CAAC;AACb,QAAA,IAAI,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;AACjC,QAAA,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AACZ,QAAA,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AACZ,QAAA,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;QACZ,OAAO,CAAC,QAAQ,GAAG,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,oBAAoB,CAAC,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAE5G,QAAA,IAAI,SAAS,GAAG,SAAS,CAAC,YAAY,EAAE,CAAC;AACzC,QAAA,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;AAChB,QAAA,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;AAChB,QAAA,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;QAChB,OAAO,CAAC,aAAa,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,oBAAoB,CAAC,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KACzH;IAEM,YAAY,GAAA;QACf,IAAI,CAAC,GAAG,IAAI,CAAC,OAAQ,CAAC,QAAS,EAC3B,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,EAClC,CAAC,GAAG,EAAE,CAAC,QAAQ,EACf,CAAC,GAAG,CAAC,CAAC,QAAQ,EACd,CAAC,GAAG,CAAC,CAAC,UAAU,EAChB,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,EAAG,EAClB,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAEhC,EAAE,CAAC,QAAQ,EAAE,CAAC;;;;;QAOd,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,gBAAgB,EAAE,EAAE,CAAC,eAAe,CAAC,CAAC;QACtD,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,WAAW,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC;AAE7C,QAAA,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC1D,QAAA,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;AAExD,QAAA,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AACtF,QAAA,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAE1E,QAAA,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,eAAe,EAAE,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,CAAC;AACjE,QAAA,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,aAAa,EAAE,IAAI,CAAC,OAAQ,CAAC,cAAc,CAAC,CAAC;AAC7D,QAAA,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,aAAa,EAAE,IAAI,CAAC,OAAQ,CAAC,cAAc,CAAC,CAAC;AAG7D,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACzD,IAAI,OAAO,GAAG,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;;;;YAK7C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,WAAY,CAAC,CAAC;YACrD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAErF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,WAAY,CAAC,CAAC;YACrD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEvF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,gBAAiB,CAAC,CAAC;YAC1D,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC,gBAAiB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEhG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,WAAY,CAAC,CAAC;YACrD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEvF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,cAAe,CAAC,CAAC;YACxD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE5F,YAAA,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,WAAW,EAAE,OAAO,CAAC,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;;;;YAKtD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,mBAAoB,CAAC,CAAC;YAC7D,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,aAAa,EAAE,OAAO,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEtG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,kBAAmB,CAAC,CAAC;YAC5D,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,YAAY,EAAE,OAAO,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEpG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,cAAe,CAAC,CAAC;YACxD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,aAAa,EAAE,OAAO,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEjG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,aAAc,CAAC,CAAC;YACvD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,eAAe,EAAE,OAAO,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAElG,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAC9B,YAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,GAAG,OAAO,CAAC,QAAQ,IAAI,CAAC,CAAC,OAAO,CAAC,cAAc,EAAG,CAAC;YAC/E,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;YAE5B,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,eAAgB,CAAC,CAAC;YACzD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,SAAS,EAAE,OAAO,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE9F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,OAAO,CAAC,cAAe,CAAC,CAAC;YAChE,CAAC,CAAC,qBAAsB,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC;SACtH;KACJ;IAEM,WAAW,GAAA;QACd,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,EAAE;YAChD,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;KACJ;IAES,YAAY,GAAA;QAClB,IAAI,CAAC,GAAG,IAAI,CAAC,OAAQ,CAAC,QAAS,EAC3B,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,kBAAkB,EAC1C,CAAC,GAAG,EAAE,CAAC,QAAQ,EACf,CAAC,GAAG,CAAC,CAAC,QAAQ,EACd,CAAC,GAAG,CAAC,CAAC,UAAU,EAChB,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,EAAG,EAClB,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAEhC,EAAE,CAAC,QAAQ,EAAE,CAAC;QAEd,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,gBAAgB,EAAE,EAAE,CAAC,eAAe,CAAC,CAAC;QAEtD,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,YAAY,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC;AAE/C,QAAA,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC1D,QAAA,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;AAExD,QAAA,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AACtF,QAAA,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAE1E,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACzD,IAAI,OAAO,GAAG,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;;;;YAK7C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,WAAY,CAAC,CAAC;YACrD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAErF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,WAAY,CAAC,CAAC;YACrD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEvF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,gBAAiB,CAAC,CAAC;YAC1D,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC,gBAAiB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEhG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,mBAAoB,CAAC,CAAC;YAC7D,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,aAAa,EAAE,OAAO,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEtG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,mBAAoB,CAAC,CAAC;YAC7D,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,aAAa,EAAE,OAAO,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEtG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,kBAAmB,CAAC,CAAC;YAC5D,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,YAAY,EAAE,OAAO,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEpG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,cAAe,CAAC,CAAC;YACxD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;;;YAK5F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,aAAc,CAAC,CAAC;YACvD,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,eAAe,EAAE,OAAO,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAElG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,OAAO,CAAC,cAAe,CAAC,CAAC;YAChE,CAAC,CAAC,qBAAsB,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC;SACtH;KACJ;IAED,MAAM,mBAAmB,CAAC,OAAqB,EAAA;QAC3C,IAAI,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,WAAW,EAAE;YACrC,MAAM,KAAK,GAAG,MAAM,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;AACnD,YAAA,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;SAChC;KACJ;AAEM,IAAA,UAAU,CAAC,OAAqB,EAAE,YAAoB,EAAE,IAAU,EAAA;QACrE,oBAAoB,CAAC,OAAO,CAAC,QAAQ,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;AAC3F,QAAA,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC;AAC5C,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KAC5B;AAEM,IAAA,aAAa,CAAC,OAAqB,EAAE,YAAoB,EAAE,UAAmB,EAAA;QACjF,oBAAoB,CAAC,OAAO,CAAC,WAAW,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAClF,QAAA,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC;AAC/C,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KAC5B;AAEM,IAAA,cAAc,CAAC,OAAqB,EAAE,YAAoB,EAAE,YAAkB,EAAE,WAAiB,EAAA;QACpG,oBAAoB,CAAC,OAAO,CAAC,gBAAgB,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC;QACnH,oBAAoB,CAAC,OAAO,CAAC,eAAe,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;AAC/G,QAAA,OAAO,CAAC,eAAe,CAACL,iBAAe,CAAC,GAAG,IAAI,CAAC;AAChD,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KAC5B;AAEM,IAAA,UAAU,CAAC,OAAqB,EAAE,YAAoB,EAAE,IAAU,EAAA;QACrE,oBAAoB,CAAC,OAAO,CAAC,QAAQ,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;AAC3F,QAAA,OAAO,CAAC,eAAe,CAACG,aAAW,CAAC,GAAG,IAAI,CAAC;AAC5C,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KAC5B;AAEM,IAAA,kBAAkB,CAAC,OAAqB,EAAE,YAAoB,EAAE,KAAW,EAAA;AAC9E,QAAA,oBAAoB,CAAC,OAAO,CAAC,gBAAgB,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,GAAG,EAAE,KAAK,CAAC,CAAC,GAAG,GAAG,EAAE,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;AAChH,QAAA,OAAO,CAAC,eAAe,CAACJ,qBAAmB,CAAC,GAAG,IAAI,CAAC;AACpD,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KAC5B;;;;;;AAQM,IAAA,WAAW,CAAC,OAAqB,EAAE,YAAoB,EAAE,KAAW,EAAA;QACvE,oBAAoB,CAAC,OAAO,CAAC,QAAQ,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AACtF,QAAA,OAAO,CAAC,eAAe,CAACE,aAAW,CAAC,GAAG,IAAI,CAAC;AAC5C,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KAC5B;AAEM,IAAA,eAAe,CAAC,OAAqB,EAAE,YAAoB,EAAE,SAAe,EAAA;QAC/E,oBAAoB,CAAC,OAAO,CAAC,aAAa,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;AACvG,QAAA,OAAO,CAAC,eAAe,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC;AACjD,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KAC5B;AAES,IAAA,UAAU,CAAC,OAAqB,EAAA;AACtC,QAAA,IAAI,OAAO,CAAC,MAAM,EAAE;AAChB,YAAA,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;AACvB,YAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC1C;KACJ;IAEM,MAAM,GAAA;QAET,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACjE,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;SACxC;AACD,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;KACjC;IAEM,UAAU,GAAA;AACb,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAChC,OAAO,CAAC,EAAE,EAAE;YACR,MAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AAE/B,YAAA,EAAE,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AACtB,YAAA,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC;AAEnB,YAAA,EAAE,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AACtB,YAAA,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC;SACtB;AACD,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACzD,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;SAC1C;AAED,QAAA,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,sBAAsB,GAAG,EAAE,CAAC;KACpC;IAEM,KAAK,GAAA;QACR,IAAI,CAAC,UAAU,EAAE,CAAC;KACrB;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YACzB,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;KACJ;AAEM,IAAA,GAAG,CAAC,SAAoB,EAAA;AAE3B,QAAA,IAAI,SAAS,CAAC,aAAa,KAAK,CAAC,CAAC,EAAE;AAEhC,YAAA,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC1B,SAAS,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;AAElD,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACjC,YAAA,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;YAErC,SAAS,CAAC,cAAc,EAAE,CAAC;AAE3B,YAAA,SAAS,CAAC,QAAS,CAAC,OAAO,EAAE,CAAC;AAE9B,YAAA,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,QAAS,CAAC,CAAC;AACrC,YAAA,SAAS,CAAC,YAAY,CAAC,SAAS,CAAC,UAAW,CAAC,CAAC;SACjD;KACJ;AAEM,IAAA,MAAM,CAAC,SAAoB,EAAA;AAC9B,QAAA,IAAI,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,IAAI,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE;AAC5D,YAAA,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;SACpC;KACJ;IAEM,kBAAkB,GAAA;AACrB,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;KACjC;AAGM,IAAA,gBAAgB,CAAC,SAAoB,EAAA;AAExC,QAAA,IAAI,OAAO,GAAG,SAAS,CAAC,QAAS,CAAC;AAClC,QAAA,IAAI,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;QAExB,OAAO,CAAC,YAAY,EAAE,CAAC;QAEvB,IAAI,OAAO,GAAG,KAAK,CAAC;;AAEpB,QAAA,IAAI,OAAO,CAAC,YAAY,KAAK,CAAC,EAAE;YAC5B,OAAO,CAAC,KAAK,EAAE,CAAC;AAChB,YAAA,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAClC,YAAA,IAAI,CAAC,sBAAsB,GAAG,EAAE,CAAC;YACjC,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,OAAO,GAAG,IAAI,CAAC;SAClB;QAED,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;QACpD,KAAK,IAAI,CAAC,GAAG,SAAS,CAAC,aAAa,EAAE,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC/E,IAAI,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC,aAAa,GAAG,CAAC,CAAC;SAC3C;AAED,QAAA,IAAI,GAAG,GAAG,SAAS,CAAC,aAAa,CAAC;QAClC,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAElC,KAAK,IAAI,CAAC,GAAG,SAAS,CAAC,aAAa,EAAE,GAAG,GAAG,OAAO,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACjF,IAAI,EAAE,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC/B,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC,aAAa,GAAG,CAAC,CAAC;SAC3C;AAED,QAAA,OAAO,CAAC,QAAQ,GAAG,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7D,QAAA,OAAO,CAAC,gBAAgB,GAAG,WAAW,CAAC,OAAO,CAAC,gBAAgB,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7E,QAAA,OAAO,CAAC,eAAe,GAAG,WAAW,CAAC,OAAO,CAAC,eAAe,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AAC3E,QAAA,OAAO,CAAC,QAAQ,GAAG,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7D,QAAA,OAAO,CAAC,gBAAgB,GAAG,WAAW,CAAC,OAAO,CAAC,gBAAgB,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7E,QAAA,OAAO,CAAC,QAAQ,GAAG,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7D,QAAA,OAAO,CAAC,aAAa,GAAG,WAAW,CAAC,OAAO,CAAC,aAAa,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;AACvE,QAAA,OAAO,CAAC,WAAW,GAAG,WAAW,CAAC,OAAO,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;AAE/D,QAAA,SAAS,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AAC7B,QAAA,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;AAE1B,QAAA,SAAS,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AAC7B,QAAA,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;QAE1B,IAAI,CAAC,OAAO,EAAE;YACV,OAAO,CAAC,OAAO,EAAE,CAAC;AAClB,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;SAC5B;KACJ;;AA7gBM,gBAAW,CAAA,WAAA,GAAG,CAAC;;AChW1B,MAAM,MAAM,GAAG,CAAA;;gBAEC,CAAC;AAEjB,MAAM,OAAO,GAAG,CAAA;;kBAEE,CAAC;AAEnB,MAAM,QAAQ,GACV,CAAA;;;OAGG,CAAC;SAEQ,YAAY,GAAA;AACxB,IAAA,OAAO,IAAI,OAAO,CAAC,OAAO,EAAE;AACxB,QAAA,QAAQ,EAAE;AACN,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,cAAc,EAAE,gBAAgB;AAChC,YAAA,YAAY,EAAE,MAAM;AACpB,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,YAAY,EAAE,OAAO;AACrB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,OAAO,EAAE,OAAO;AAChB,YAAA,aAAa,EAAE,KAAK;AACpB,YAAA,WAAW,EAAE,OAAO;AACvB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,SAAS,EAAE,OAAO;AAClB,YAAA,YAAY,EAAE,MAAM;AACpB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,MAAM,EAAE,OAAO;AACf,YAAA,UAAU,EAAE,OAAO;AACnB,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,WAAW,EAAE,OAAO;AACvB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;cAEE,MAAM,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cAgCN,OAAO,CAAA;;cAEP,QAAQ,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DR,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;SAEe,YAAY,GAAA;AACxB,IAAA,OAAO,IAAI,OAAO,CAAC,OAAO,EAAE;AACxB,QAAA,QAAQ,EAAE;AACN,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,cAAc,EAAE,gBAAgB;AAChC,YAAA,YAAY,EAAE,MAAM;AACpB,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,YAAY,EAAE,OAAO;AACrB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,OAAO,EAAE,OAAO;AAChB,YAAA,aAAa,EAAE,KAAK;AACpB,YAAA,WAAW,EAAE,OAAO;AACvB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,SAAS,EAAE,OAAO;AAClB,YAAA,YAAY,EAAE,MAAM;AACpB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,MAAM,EAAE,OAAO;AACf,YAAA,UAAU,EAAE,OAAO;AACnB,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,WAAW,EAAE,OAAO;AACvB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;cACE,MAAM,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cA+BN,OAAO,CAAA;;cAEP,QAAQ,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DR,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;SAEe,YAAY,GAAA;AACxB,IAAA,OAAO,IAAI,OAAO,CAAC,cAAc,EAAE;AAC/B,QAAA,QAAQ,EAAE;AACN,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,YAAY,EAAE,OAAO;AACrB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,OAAO,EAAE,OAAO;AAChB,YAAA,WAAW,EAAE,OAAO;AACvB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,YAAY,EAAE,MAAM;AACpB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,MAAM,EAAE,OAAO;AACf,YAAA,UAAU,EAAE,OAAO;AACnB,YAAA,MAAM,EAAE,MAAM;AACjB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;cAEE,MAAM,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;cA0BN,OAAO,CAAA;;cAEP,QAAQ,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDR,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;;;;;;;;;;;AAcE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;AC9jBA,MAAMF,qBAAmB,GAAG,CAAC,CAAC;AAC9B,MAAM,eAAe,GAAG,CAAC,CAAC;AAC1B,MAAM,WAAW,GAAG,CAAC,CAAC;AACtB,MAAM,aAAa,GAAG,CAAC,CAAC;AACxB,MAAMI,aAAW,GAAG,CAAC,CAAC;AACtB,MAAM,eAAe,GAAG,CAAC,CAAC;AAC1B,MAAM,eAAe,GAAG,CAAC,CAAC;AAC1B,MAAMG,eAAa,GAAG,CAAC,CAAC;AACxB,MAAM,gBAAgB,GAAG,CAAC,CAAC;AAC3B,MAAM,cAAc,GAAG,CAAC,CAAC;AACzB,MAAM,mBAAmB,GAAG,EAAE,CAAC;AAE/B,MAAM,KAAK,GAAG,CAAC,GAAG,CAAC;AACnB,MAAM,GAAG,GAAG,GAAG,CAAC;AAEhB,MAAM,YAAa,SAAQ,oBAAoB,CAAA;IAgB3C,WAAY,CAAA,gBAAkC,EAAE,UAAA,GAAqB,EAAE,EAAA;QACnE,KAAK,CAAC,gBAAgB,CAAC,CAAC;AAExB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAEhC,IAAI,CAAC,cAAc,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC3C,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC1C,IAAI,CAAC,WAAW,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACxC,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAE7C,IAAI,CAAC,uBAAuB,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAC5E,IAAI,CAAC,uBAAuB,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC;QACxE,IAAI,CAAC,uBAAuB,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC,wBAAwB,CAAC;AAElF,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;AAEtE,QAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;KACjC;IAEe,WAAW,GAAA;AACvB,QAAA,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,EAAE;YACvE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE;AACxC,gBAAA,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC7C,oBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAACK,YAAoB,EAAE,CAAC,CAAC;iBAC7D;qBAAM;AACH,oBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAACC,YAAoB,EAAE,CAAC,CAAC;iBAC7D;aACJ;YAED,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,YAAY,EAAE;AAC/C,gBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAACC,YAAoB,EAAE,CAAC,CAAC;aAC7D;SACJ;KACJ;AAED,IAAA,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAEe,IAAA,GAAG,CAAC,KAAY,EAAA;AAC5B,QAAA,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;AACjB,YAAA,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,YAAA,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;YAC5B,IAAI,CAAC,OAAO,EAAE,CAAC;SAClB;KACJ;IAEM,WAAW,GAAA;QACd,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;AAC9B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC/B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9B;KACJ;AAES,IAAA,iBAAiB,CAAC,KAAY,EAAA;QACpC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC;KACpF;AAEM,IAAA,eAAe,CAAC,KAAY,EAAA;QAC/B,IAAI,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,SAAS,EAAE;YAC1C,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;AAChD,YAAA,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;SACjC;aAAM;AACH,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAChC;KACJ;IAEM,cAAc,CAAC,IAA6B,EAAE,KAAY,EAAA;AAC7D,QAAA,IAAI,KAAK,CAAC,OAAO,KAAK,SAAS,IAAI,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;AAC/E,YAAA,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,YAAA,KAAK,CAAC,OAAO,GAAG,SAAS,CAAC;YAC1B,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;AAE9C,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAE7B,YAAA,IAAI,CAAC,UAAU,GAAG,iBAAiB,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAiB,CAAC;AACrF,YAAA,IAAI,CAAC,YAAY,GAAG,iBAAiB,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAiB,CAAC;AAC3F,YAAA,IAAI,CAAC,cAAc,GAAG,iBAAiB,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,aAAa,CAAiB,CAAC;AACjG,YAAA,IAAI,CAAC,gBAAgB,GAAG,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,CAAiB,CAAC;AACvG,YAAA,IAAI,CAAC,eAAe,GAAG,iBAAiB,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,cAAc,CAAiB,CAAC;AACpG,YAAA,IAAI,CAAC,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAiB,CAAC;AAC/E,YAAA,IAAI,CAAC,UAAU,GAAG,iBAAiB,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAiB,CAAC;AACrF,YAAA,IAAI,CAAC,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAiB,CAAC;AAC/E,YAAA,IAAI,CAAC,YAAY,GAAG,iBAAiB,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAiB,CAAC;AAC3F,YAAA,IAAI,CAAC,aAAa,GAAG,iBAAiB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,YAAY,CAAiB,CAAC;AAC9F,YAAA,IAAI,CAAC,WAAW,GAAG,iBAAiB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,CAAiB,CAAC;AACxF,YAAA,IAAI,CAAC,gBAAgB,GAAG,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,CAAiB,CAAC;AACvG,YAAA,IAAI,CAAC,gBAAgB,GAAG,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,CAAiB,CAAC;YAEvG,KAAK,CAAC,MAAM,EAAE,CAAC;YAEf,IAAI,CAAC,OAAO,EAAE,CAAC;SAClB;KACJ;IAEe,KAAK,GAAA;;AAEjB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;AAEzB,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;;AAE3B,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;;AAEvB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;;AAE7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;;AAE5B,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;;AAErB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;;AAEvB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;;AAErB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;AAEzB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;AAE1B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;;AAExB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACzC,IAAI,CAAC,cAAc,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC3C,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACvC,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,eAAe,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACrC,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACrC,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACzC,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC1C,IAAI,CAAC,WAAW,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACxC,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAE7C,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,OAAO,EAAE,CAAC;KAClB;IAEkB,cAAc,GAAA;AAC7B,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAG,CAAC;AACpC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAkB,CAAC,CAAC;AACzC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAiB,CAAC,CAAC;AACxC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,eAAgB,CAAC,CAAC;AACvC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,cAAe,CAAC,CAAC;AACtC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAoB,CAAC,CAAC;AAC3C,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAoB,CAAC,CAAC;AAC3C,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;AAC1C,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,aAAc,CAAC,CAAC;AACrC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,eAAgB,CAAC,CAAC;AACvC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,aAAc,CAAC,CAAC;AACrC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,eAAgB,CAAC,CAAC;AACvC,YAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAoB,CAAC,CAAC;AAE3C,YAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,YAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;SACnC;KACJ;IAEe,YAAY,GAAA;AACxB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC;AACxB,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;AAClB,QAAA,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QAC5B,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC;QACnC,IAAI,GAAG,GAAG,EAAE,CAAC,UAAU,EACnB,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;QAEtB,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,EACV,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAEhC,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAEzB,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;AAC1D,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;AAC1D,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAC5E,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AACxF,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC5D,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;QAC1D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,EAAE,CAAC,eAAe,CAAC,CAAC;QACvD,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC;AAC7C,QAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAG,EAAE,CAAC,UAAqB,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC;QAC9E,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,MAAO,CAAC,WAAW,EAAE,CAAC,CAAC,MAAO,CAAC,YAAY,CAAC,CAAC,CAAC;QAE7E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAAgB,CAAC,CAAC;QACtD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,iBAAkB,CAAC,CAAC;QACxD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,iBAAkB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAElG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAAc,CAAC,CAAC;QACpD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE5F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAoB,CAAC,CAAC;QAC1D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEvG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAmB,CAAC,CAAC;QACzD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAErG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,WAAY,CAAC,CAAC;QAClD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEtF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAAgB,CAAC,CAAC;QACtD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAAc,CAAC,CAAC;QACpD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE1F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAiB,CAAC,CAAC;QACvD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,gBAAiB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;;QAIhG,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;QACnC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,CAAC,kBAAkB,CAAC,CAAC;QAErD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAoB,CAAC,CAAC;QAC1D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,cAAe,CAAC,CAAC;QACrD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE5F,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,CAAC,CAAC;;;AAI7D,QAAA,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QACvB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;QACnC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,CAAC,kBAAkB,CAAC,CAAC;QAErD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,WAAY,CAAC,CAAC;QAClD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEtF,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,CAAC,CAAC;AAE7D,QAAA,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AAEtB,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;KAC3B;IAEkB,YAAY,GAAA;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC;AACxB,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;AAClB,QAAA,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;QACnC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC;QAC1C,IAAI,GAAG,GAAG,EAAE,CAAC,UAAU,EACnB,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;QAEtB,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,EACV,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAEhC,QAAA,IAAI,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;AAEvB,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAEzB,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAC5E,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AACxF,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC5D,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;QAC1D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,EAAE,CAAC,eAAe,CAAC,CAAC;QACvD,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC;AAC7C,QAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAG,EAAa,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC;QACnE,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,MAAO,CAAC,WAAW,EAAE,CAAC,CAAC,MAAO,CAAC,YAAY,CAAC,CAAC,CAAC;QAE7E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAAgB,CAAC,CAAC;QACtD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,iBAAkB,CAAC,CAAC;QACxD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,iBAAkB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAElG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAAc,CAAC,CAAC;QACpD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE5F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAoB,CAAC,CAAC;QAC1D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEvG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAmB,CAAC,CAAC;QACzD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAErG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,WAAY,CAAC,CAAC;QAClD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEtF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAAgB,CAAC,CAAC;QACtD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAAc,CAAC,CAAC;QACpD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE1F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAoB,CAAC,CAAC;QAC1D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9F,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,CAAC,kBAAkB,CAAC,CAAC;AAErD,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,CAAC,CAAC;AAE7D,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;KAC3B;AAEkB,IAAA,gBAAgB,CAAC,KAAY,EAAA;AAE5C,QAAA,IAAI,EAAE,GAAG,KAAK,CAAC,aAAa,CAAC;QAE7B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;AAE/B,QAAA,IAAI,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AAC/B,QAAA,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AAChB,QAAA,IAAI,CAAC,QAAQ,GAAG,gBAAgB,CAAe,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AACrE,QAAA,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAe,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AACrF,QAAA,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAe,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAC7E,QAAA,IAAI,CAAC,cAAc,GAAG,gBAAgB,CAAe,IAAI,CAAC,cAAc,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAEjF,QAAA,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AAC3B,QAAA,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AACZ,QAAA,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAe,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AACrF,QAAA,IAAI,CAAC,eAAe,GAAG,gBAAgB,CAAe,IAAI,CAAC,eAAe,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AACnF,QAAA,IAAI,CAAC,UAAU,GAAG,gBAAgB,CAAe,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AACzE,QAAA,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAe,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAErF,QAAA,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AAC3B,QAAA,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AACZ,QAAA,IAAI,CAAC,UAAU,GAAG,gBAAgB,CAAe,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAEzE,QAAA,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AAC1B,QAAA,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AACZ,QAAA,IAAI,CAAC,QAAQ,GAAG,gBAAgB,CAAe,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AACrE,QAAA,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAe,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAC7E,QAAA,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAe,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAC/E,QAAA,IAAI,CAAC,WAAW,GAAG,gBAAgB,CAAe,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAE3E,QAAA,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAChC,IAAI,CAAC,OAAO,EAAE,CAAC;AAEf,QAAA,KAAK,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AACzB,QAAA,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,QAAA,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;KAC1B;AAEM,IAAA,OAAO,CAAC,KAAa,EAAE,IAAY,EAAE,SAAiB,EAAE,KAAa,EAAE,aAAA,GAAwB,CAAC,EAAE,QAAiB,KAAK,EAAA;AAE3H,QAAA,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AAE9B,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,SAAU,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;AAEzD,QAAA,IAAI,CAAC,EAAE;YAAE,OAAO;QAEhB,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;QACtC,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,EACrB,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;QAE5B,IAAI,CAAC,GAAG,CAAC,CAAC;AAEV,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAClD,IAAI,KAAK,GAAG,GAAG,CAAC;QAChB,IAAI,KAAK,EAAE;YACP,KAAK,GAAG,GAAG,CAAC;SACf;QAED,IAAI,MAAM,GAAG,GAAG,CAAC;AACjB,QAAA,IAAI,IAAI,GAAG,EAAE,CAAC,QAAQ,CAAC;QAEvB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACtB,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AACnB,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAE,CAAC;AACjE,YAAA,IAAI,CAAC,CAAC;gBAAE,SAAS;AACjB,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC;AAErB,YAAA,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;YAElB,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;YACb,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AACjB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;YAEjB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;YACjB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AACjB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;YAEjB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;YACjB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AACjB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC;YAElB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC;YAElB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC;YAElB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC;;;;AAKlB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YAChB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;YACrB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YACtB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YAEtB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YACpB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;YACrB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YACtB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YAEtB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YACpB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;YACrB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YACvB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YAEvB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YACrB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;YACtB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YACvB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YAEvB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YACrB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;YACtB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YACvB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YAEvB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YACrB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;YACtB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YACvB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YAEvB,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;AAClB,gBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;gBACtC,IAAI,EAAE,EAAE;oBACJ,MAAM,IAAI,CAAC,CAAC,QAAQ,GAAG,EAAE,GAAG,aAAa,CAAC;iBAC7C;qBAAM;AACH,oBAAA,MAAM,IAAI,CAAC,CAAC,QAAQ,GAAG,aAAa,CAAC;iBACxC;aACJ;iBAAM;AACH,gBAAA,MAAM,IAAI,CAAC,CAAC,QAAQ,GAAG,aAAa,CAAC;aACxC;SACJ;;AAGD,QAAA,IAAI,KAAK,KAAK,KAAK,CAAC,MAAM,EAAE;YACxB,MAAM,IAAI,CAAC,GAAG,CAAC;YACf,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACtB,gBAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AACnB,gBAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,MAAM,CAAC;AACnB,gBAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,MAAM,CAAC;AACnB,gBAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,MAAM,CAAC;AACpB,gBAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,MAAM,CAAC;AACpB,gBAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,MAAM,CAAC;AACpB,gBAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,MAAM,CAAC;aACvB;SACJ;QAED,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AAC9B,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;AACjB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;AACjB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC;SACrB;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;KAChD;AAEe,IAAA,cAAc,CAAC,KAAa,EAAE,YAAkB,EAAE,WAAiB,EAAA;QAC/E,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;QACtC,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,EACzB,CAAC,GAAG,YAAY,CAAC,CAAC,EAClB,CAAC,GAAG,YAAY,CAAC,CAAC,EAClB,CAAC,GAAG,YAAY,CAAC,CAAC,EAClB,CAAC,GAAG,IAAI,CAAC,eAAe,EACxB,EAAE,GAAG,WAAW,CAAC,CAAC,EAClB,EAAE,GAAG,WAAW,CAAC,CAAC,EAClB,EAAE,GAAG,WAAW,CAAC,CAAC,CAAC;AAEvB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;;AAGd,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACV,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AAEf,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AAEf,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;SAClB;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;KAChD;IAEe,kBAAkB,CAAC,KAAa,EAAE,KAAW,EAAA;QACzD,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AACtC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,EACzB,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,EACjB,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,EACjB,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;AAEtB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;SACjB;AAED,QAAA,IAAI,CAAC,eAAe,CAACd,qBAAmB,CAAC,GAAG,IAAI,CAAC;KACpD;IAEe,UAAU,CAAC,KAAa,EAAE,IAAY,EAAA;QAClD,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACrC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;AAEtB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AACZ,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;AAChB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;AAChB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;AAChB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;AAChB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;SACnB;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC;KAC5C;IAEe,YAAY,CAAC,KAAa,EAAE,MAAY,EAAA;QACpD,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;QACtC,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,EACnB,CAAC,GAAG,MAAM,CAAC,CAAC,EACZ,CAAC,GAAG,MAAM,CAAC,CAAC,EACZ,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;AAEjB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;SACjB;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;KAC9C;IAEe,UAAU,CAAC,KAAa,EAAE,IAAU,EAAA;QAChD,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AACtC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,EACjB,CAAC,GAAG,IAAI,CAAC,CAAC,EACV,CAAC,GAAG,IAAI,CAAC,CAAC,EACV,CAAC,GAAG,IAAI,CAAC,CAAC,EACV,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAEf,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AAEnB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;SACjB;AAED,QAAA,IAAI,CAAC,eAAe,CAACI,aAAW,CAAC,GAAG,IAAI,CAAC;KAC5C;IAEM,kBAAkB,CAAC,KAAa,EAAE,IAAU,EAAA;QAC/C,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AACtC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,EACzB,CAAC,GAAG,IAAI,CAAC,CAAC,EACV,CAAC,GAAG,IAAI,CAAC,CAAC,EACV,CAAC,GAAG,IAAI,CAAC,CAAC,EACV,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAEf,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AAEnB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;SACjB;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC;KACpD;IAEM,aAAa,CAAC,KAAa,EAAE,OAAe,EAAA;QAC/C,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACrC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AAEzB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;AACf,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;AACnB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;SACtB;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC;KAC/C;IAEe,cAAc,CAAC,KAAa,EAAE,QAAgB,EAAA;QAC1D,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACrC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;AAE1B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC;AAChB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;AACpB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;AACpB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;AACpB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;AACpB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;SACvB;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;KAChD;IAEe,aAAa,CAAC,KAAa,EAAE,UAAmB,EAAA;AAC5D,QAAA,IAAI,IAAI,CAAC;QACT,IAAI,UAAU,EAAE;AACZ,YAAA,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SAClD;aAAM;YACH,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SAC/C;AACD,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;KAClC;IAEe,YAAY,CAAC,KAAa,EAAE,SAAkC,EAAA;QAC1E,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AACtC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;AAExB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;YAEnB,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YACpB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAExB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;YAC1B,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;SAC7B;AAED,QAAA,IAAI,CAAC,eAAe,CAACG,eAAa,CAAC,GAAG,IAAI,CAAC;KAC9C;IAEM,eAAe,CAAC,KAAa,EAAE,SAAiB,EAAA;QACnD,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACrC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;AAE3B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;AACvC,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAClB,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;AACjB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;AACrB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;AACrB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;AACrB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;AACrB,YAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;SACxB;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC;KACjD;IAEe,gBAAgB,GAAA;AAC5B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,WAA0B,CAAC,CAAC;AACpD,QAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;KAClF;IAEM,qBAAqB,GAAA;AACxB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,gBAA+B,CAAC,CAAC;AACzD,QAAA,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;KACjG;IAEe,oBAAoB,GAAA;AAChC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,eAA8B,CAAC,CAAC;QACxD,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAE/F,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAgC,CAAC,CAAC;QAC1D,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KACxG;IAEM,mBAAmB,GAAA;AACtB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,cAA6B,CAAC,CAAC;AACvD,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KAC3F;IAEM,wBAAwB,GAAA;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAkC,CAAC,CAAC;QAC5D,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC9G;AAEM,IAAA,aAAa,CAAC,CAAS,EAAA;AAC1B,QAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;;KAExB;AACJ;;AC55BD;SACgB,UAAU,GAAA;AACtB,IAAA,OAAO,IAAI,OAAO,CAAC,YAAY,EAAE;AAC7B,QAAA,QAAQ,EAAE;AACN,YAAA,oBAAoB,EAAE,MAAM;AAC5B,YAAA,OAAO,EAAE,OAAO;AAChB,YAAA,SAAS,EAAE,OAAO;AACrB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,WAAW,EAAE,MAAM;AACnB,YAAA,MAAM,EAAE,MAAM;AACjB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;AAWE,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;AAIE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;AC5BA,MAAM,iBAAiB,CAAA;AAgCnB,IAAA,WAAA,CAAY,gBAAkC,EAAA;AA5B9C;;;;AAIG;QACI,IAAc,CAAA,cAAA,GAAG,IAAI,CAAC;AAyBzB,QAAA,IAAI,CAAC,IAAI,GAAG,iBAAiB,CAAC,WAAW,EAAE,CAAC;AAE5C,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;AAC1C,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;KAC1B;IAES,YAAY,GAAA;QAClB,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YAC1C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE;AAC7C,gBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAACQ,UAAkB,EAAE,CAAC,CAAC;aAC3D;SACJ;KACJ;AAEM,IAAA,aAAa,CAAC,UAAsB,EAAA;AACvC,QAAA,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC;QACrC,IAAI,CAAC,YAAY,EAAE,CAAC;AACpB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC/C,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;SAClD;KACJ;AAEM,IAAA,GAAG,CAAC,UAAsB,EAAA;AAC7B,QAAA,IAAI,UAAU,CAAC,aAAa,KAAK,CAAC,CAAC,EAAE;AACjC,YAAA,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC3B,UAAU,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;AACpD,YAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AACnC,YAAA,IAAI,CAAC,iBAAiB;gBACtB,IAAI,CAAC,iBAAiB,CAAC,UAAU;gBACjC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;SAC/D;KACJ;AAEM,IAAA,MAAM,CAAC,UAAsB,EAAA;AAEhC,QAAA,IAAI,KAAK,GAAG,UAAU,CAAC,aAAa,CAAC;AACrC,QAAA,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YAEd,UAAU,CAAC,cAAc,EAAE,CAAC;AAE5B,YAAA,UAAU,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AAC9B,YAAA,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AACnC,YAAA,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC;SACvC;KACJ;AAES,IAAA,uBAAuB,CAAC,UAAkB,EAAA;AAChD,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;AAC3B,QAAA,KAAK,IAAI,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,YAAA,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC;SAC3B;KACJ;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;QACjC,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;SAC/B;KACJ;IAEM,WAAW,GAAA;AACd,QAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;YACjC,OAAO,CAAC,EAAE,EAAE;gBACR,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;aACtC;SACJ;KACJ;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;QACjC,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC;YACtC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;SAC3C;AACD,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;KAC1B;;AAlHM,iBAAW,CAAA,WAAA,GAAW,CAAX;;SCLN,eAAe,GAAA;AAC3B,IAAA,OAAO,IAAI,OAAO,CAAC,iBAAiB,EAAE;AAClC,QAAA,QAAQ,EAAE;AACN,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,IAAI,EAAE,MAAM;AACZ,YAAA,IAAI,EAAE,MAAM;AACZ,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;;AAEtB,YAAA,SAAS,EAAE,OAAO;AAClB,YAAA,OAAO,EAAE,OAAO;AAChB,YAAA,WAAW,EAAE,OAAO;AACvB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,WAAW,EAAE,MAAM;AACnB,YAAA,QAAQ,EAAE,MAAM;AAEhB,YAAA,OAAO,EAAE,MAAM;AACf,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,OAAO,EAAE,MAAM;AAEf,YAAA,KAAK,EAAE,OAAO;AAEd,YAAA,KAAK,EAAE,MAAM;AAChB,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIM,iBAAA,CAAA;AAEV,QAAA,cAAc,EACV,CAAA;;;;;;;;;;;AAWM,iBAAA,CAAA;AACb,KAAA,CAAC,CAAC;AACP,CAAC;SAEe,gBAAgB,GAAA;AAC5B,IAAA,OAAO,IAAI,OAAO,CAAC,kBAAkB,EAAE;AACnC,QAAA,QAAQ,EAAE;AACN,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,IAAI,EAAE,MAAM;AACZ,YAAA,IAAI,EAAE,MAAM;AACZ,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;;AAEtB,YAAA,KAAK,EAAE,MAAM;AACb,YAAA,SAAS,EAAE,OAAO;AAClB,YAAA,WAAW,EAAE,OAAO;AACvB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,WAAW,EAAE,MAAM;AACnB,YAAA,QAAQ,EAAE,MAAM;AAEhB,YAAA,OAAO,EAAE,MAAM;AACf,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,OAAO,EAAE,MAAM;AAEf,YAAA,KAAK,EAAE,OAAO;AACjB,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIM,iBAAA,CAAA;AAEV,QAAA,cAAc,EACV,CAAA;;;;;;;;;;;AAWM,iBAAA,CAAA;AACb,KAAA,CAAC,CAAC;AACP;;ACnWA,MAAM,eAAe,CAAA;AAQjB,IAAA,WAAA,CAAY,gBAAkC,EAAA;AAE1C,QAAA,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC,WAAW,EAAE,CAAC;AAE1C,QAAA,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;AAE1C,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AAErB,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;KAC9B;IAES,YAAY,GAAA;QAClB,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YAC1C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,EAAE;AAClD,gBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAACC,eAAuB,EAAE,CAAC,CAAC;aAChE;YACD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,gBAAgB,EAAE;AACnD,gBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAACC,gBAAwB,EAAE,CAAC,CAAC;aACjE;SACJ;KACJ;AAEM,IAAA,aAAa,CAAC,UAAsB,EAAA;AACvC,QAAA,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC;QACrC,IAAI,CAAC,YAAY,EAAE,CAAC;AACpB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;SAChD;KACJ;AAEM,IAAA,GAAG,CAAC,QAAkB,EAAA;AACzB,QAAA,IAAI,QAAQ,CAAC,aAAa,KAAK,CAAC,CAAC,EAAE;AAC/B,YAAA,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;YACzB,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;AAChD,YAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC/B,YAAA,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,UAAU;gBAC3D,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;SAC7D;KACJ;AAEM,IAAA,MAAM,CAAC,QAAkB,EAAA;AAC5B,QAAA,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC;AACnC,QAAA,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YACd,QAAQ,CAAC,cAAc,EAAE,CAAC;AAC1B,YAAA,QAAQ,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AAC5B,YAAA,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AACjC,YAAA,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;SACpC;KACJ;AAEM,IAAA,oBAAoB,CAAC,UAAkB,EAAA;AAC1C,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;AACzB,QAAA,KAAK,IAAI,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,YAAA,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC;SAC3B;KACJ;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;QAC/B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;SAC7B;KACJ;IAEM,WAAW,GAAA;AACd,QAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YAC/B,OAAO,CAAC,EAAE,EAAE;gBACR,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;aACpC;SACJ;KACJ;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;QAC/B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC;YACpC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;YACnC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;SACzC;AACD,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;AAC3B,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;KACxB;;AA5FM,eAAW,CAAA,WAAA,GAAW,CAAC;;SCLlB,SAAS,GAAA;AACrB,IAAA,OAAO,IAAI,OAAO,CAAC,WAAW,EAAE;AAC5B,QAAA,QAAQ,EAAE;AACN,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,UAAU,EAAE,OAAO;AACnB,YAAA,QAAQ,EAAE,OAAO;AACpB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,aAAa,EAAE,MAAM;AACrB,YAAA,YAAY,EAAE,MAAM;AACpB,YAAA,WAAW,EAAE,MAAM;AACnB,YAAA,WAAW,EAAE,OAAO;AACpB,YAAA,MAAM,EAAE,MAAM;AACjB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDE,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;AAIE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;ACzEA,MAAM,mBAAmB,GAAG,CAAC,CAAC;AAC9B,MAAM,qBAAqB,GAAG,CAAC,CAAC;AAChC,MAAM,mBAAmB,GAAG,CAAC,CAAC;AAC9B,MAAM,WAAW,GAAG,CAAC,CAAC;AACtB,MAAM,gBAAgB,GAAG,CAAC,CAAC;AAC3B,MAAM,aAAa,GAAG,CAAC,CAAC;AAExB;;;;AAIG;AACH,MAAM,UAAU,CAAA;AAwCZ,IAAA,WAAA,CAAY,gBAAkC,EAAA;AAE1C,QAAA,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,WAAW,EAAE,CAAC;AAErC;;;;AAIG;AACH,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;AAE1C,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;AAEhB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AACrC,QAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;AACpC,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;AACnC,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AAClC,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAEhC,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;AAChC,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAE3B,QAAA,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,uBAAuB,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACtE,IAAI,CAAC,uBAAuB,CAAC,qBAAqB,CAAC,GAAG,IAAI,CAAC,yBAAyB,CAAC;QACrF,IAAI,CAAC,uBAAuB,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC;QACjF,IAAI,CAAC,uBAAuB,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAC5E,IAAI,CAAC,uBAAuB,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAClE,IAAI,CAAC,uBAAuB,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC,wBAAwB,CAAC;AAElF,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;KACzE;AAED,IAAA,OAAO,OAAO,CAAC,IAAc,EAAE,IAAc,EAAA;AACzC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SACtB;KACJ;IAEM,WAAW,GAAA;QACd,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YAC1C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAE;AAC5C,gBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAACC,SAAiB,EAAE,CAAC,CAAC;aAC1D;;;;;SAMJ;KACJ;AAEM,IAAA,WAAW,CAAC,QAAkB,EAAA;AACjC,QAAA,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;IAEM,OAAO,GAAA;AACV,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;QACpC,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAClC;KACJ;IAES,WAAW,GAAA;AACjB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAC1B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACvB,YAAA,EAAE,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AACtB,YAAA,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC;SACtB;AACD,QAAA,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;AACtB,QAAA,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;KACnB;IAEM,KAAK,GAAA;;AAER,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;;AAEvB,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;;AAElC,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;;AAEjC,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;;AAEhC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;;AAE/B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;AAE1B,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACvC,IAAI,CAAC,qBAAqB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAClD,IAAI,CAAC,oBAAoB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QACjD,IAAI,CAAC,mBAAmB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAChD,IAAI,CAAC,kBAAkB,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,EAAE,CAAC,CAAC;QAErC,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,OAAO,EAAE,CAAC;KAClB;IAES,cAAc,GAAA;AACpB,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC;YAEnC,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAuC,CAAC,CAAC;AAC9D,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAsC,CAAC,CAAC;AAC7D,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,sBAAqC,CAAC,CAAC;AAC5D,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,qBAAoC,CAAC,CAAC;AAC3D,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,gBAA+B,CAAC,CAAC;AACtD,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,WAA0B,CAAC,CAAC;AACjD,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;aACtD;AAED,YAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AACrC,YAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;AACpC,YAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;AACnC,YAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AAClC,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;SAC7B;KACJ;IAEM,MAAM,GAAA;AACT,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YACpC,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE;oBACzB,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3C,oBAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;iBACnC;aACJ;SACJ;KACJ;AAEM,IAAA,GAAG,CAAC,GAAQ,EAAA;AACf,QAAA,IAAI,GAAG,CAAC,aAAa,IAAI,CAAC,CAAC,EAAE;AACzB,YAAA,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC;YACpB,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;AACtC,YAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACrB,YAAA,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC1B,IAAI,CAAC,OAAO,EAAE,CAAC;SAClB;KACJ;AAES,IAAA,eAAe,CAAC,GAAQ,EAAA;AAC9B,QAAA,IAAI,GAAG,CAAC,aAAa,EAAE,EAAE;AACrB,YAAA,IAAI,CAAC,UAAU,GAAG,YAAY,CAC1B,IAAI,CAAC,UAAU,EACf,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAClE,CAAC;SACL;aAAM;AACH,YAAA,IAAI,CAAC,UAAU,GAAG,YAAY,CAC1B,IAAI,CAAC,UAAU,EACf,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAC/D,CAAC;SACL;QAED,IAAI,CAAC,GAAG,GAAG,CAAC,kBAAkB,CAAC,CAAC,EAC5B,CAAC,GAAG,GAAG,CAAC,kBAAkB,CAAC,CAAC,EAC5B,CAAC,GAAG,GAAG,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACjC,IAAI,CAAC,qBAAqB,GAAG,YAAY,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAE9H,QAAA,CAAC,GAAG,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC;AAC5B,QAAA,CAAC,GAAG,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC;AAC5B,QAAA,CAAC,GAAG,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC;QAC5B,IAAI,CAAC,oBAAoB,GAAG,YAAY,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAE5H,QAAA,CAAC,GAAG,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAC3B,QAAA,CAAC,GAAG,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC;AAC3B,QAAA,CAAC,GAAG,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAC3B,IAAI,CAAC,mBAAmB,GAAG,YAAY,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAE1H,QAAA,CAAC,GAAG,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC;AAC1B,QAAA,CAAC,GAAG,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC;AAC1B,QAAA,CAAC,GAAG,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,kBAAkB,GAAG,YAAY,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAExH,QAAA,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC;QACnB,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAE1E,QAAA,IAAI,EAAE,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC,EACtB,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EACpB,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EACpB,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EACpB,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE;AACxC,YAAA,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AACd,YAAA,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AACd,YAAA,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AACd,YAAA,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AACd,YAAA,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AACd,YAAA,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AACjB,SAAA,CAAC,CAAC;QAEH,CAAC,GAAG,GAAG,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;QACvC,CAAC,GAAG,GAAG,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;QACvC,CAAC,GAAG,GAAG,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;QACvC,IAAI,CAAC,gBAAgB,GAAG,YAAY,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KACvH;IAES,YAAY,GAAA;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC;AACxB,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;AAClB,QAAA,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QAChC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC;QACvC,IAAI,GAAG,GAAG,EAAE,CAAC,UAAU,EACnB,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;QAEtB,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,EACV,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;;AAIhC,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAEzB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC;AAE9C,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;AAC5E,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAExF,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,CAAC;AAC5D,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,YAAa,CAAC,MAAM,CAAC,CAAC;AAE1D,QAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC,YAAa,CAAC,6BAA6B,CAAC,CAAC;QAE5E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,wBAAyB,CAAC,CAAC;QAC/D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,wBAAyB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE3G,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,uBAAwB,CAAC,CAAC;QAC9D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,uBAAwB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEzG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,sBAAuB,CAAC,CAAC;QAC7D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,sBAAuB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEvG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,qBAAsB,CAAC,CAAC;QAC5D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,qBAAsB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAErG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,WAAY,CAAC,CAAC;QAClD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEtF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAiB,CAAC,CAAC;QACvD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,gBAAiB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEhG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAAc,CAAC,CAAC;QACpD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE5F,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,EAAE,IAAI,CAAC,aAAc,CAAC,QAAQ,CAAC,CAAC;AAE7D,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;KAC3B;IAES,YAAY,GAAA;;KAErB;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YACnB,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;KACJ;IAEM,WAAW,GAAA;QACd,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,EAAE;YAC1C,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;KACJ;AAEM,IAAA,gBAAgB,CAAC,UAAkB,EAAA;AACtC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;AACnB,QAAA,KAAK,IAAI,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACxC,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC;SAC1B;KACJ;AAES,IAAA,UAAU,CAAC,GAAQ,EAAA;AAEzB,QAAA,IAAI,EAAE,GAAG,GAAG,CAAC,aAAa,CAAC;QAE3B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;AAEzB,QAAA,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AAChB,QAAA,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAElD,QAAA,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AACZ,QAAA,IAAI,CAAC,qBAAqB,GAAG,WAAW,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAC5E,QAAA,IAAI,CAAC,oBAAoB,GAAG,WAAW,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAC1E,QAAA,IAAI,CAAC,mBAAmB,GAAG,WAAW,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AACxE,QAAA,IAAI,CAAC,kBAAkB,GAAG,WAAW,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AACtE,QAAA,IAAI,CAAC,gBAAgB,GAAG,WAAW,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAElE,QAAA,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AACZ,QAAA,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAEtD,QAAA,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACX,QAAA,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE3D,QAAA,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC;QAC1B,IAAI,CAAC,OAAO,EAAE,CAAC;AAEf,QAAA,GAAG,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AACvB,QAAA,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC;KACvB;AAEM,IAAA,MAAM,CAAC,GAAQ,EAAA;AAClB,QAAA,IAAI,GAAG,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,KAAK,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE;AACjD,YAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;SACxB;KACJ;AAEM,IAAA,mBAAmB,CAAC,KAAa,EAAE,YAAkB,EAAE,WAAiB,EAAA;AAC3E,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;;QAGnB,IAAI,CAAC,GAAG,IAAI,CAAC,qBAAqB,EAC9B,CAAC,GAAG,YAAY,CAAC,CAAC,EAClB,CAAC,GAAG,YAAY,CAAC,CAAC,EAClB,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC;AAEvB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;;AAGd,QAAA,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;AAC9B,QAAA,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAClB,QAAA,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAClB,QAAA,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAElB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC,GAAG,IAAI,CAAC;KACtD;AAEM,IAAA,iBAAiB,CAAC,KAAa,EAAE,YAAkB,EAAE,WAAiB,EAAA;AACzE,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;;QAGnB,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAmB,EAC5B,CAAC,GAAG,YAAY,CAAC,CAAC,EAClB,CAAC,GAAG,YAAY,CAAC,CAAC,EAClB,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC;AAEvB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;;AAGd,QAAA,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAC5B,QAAA,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAClB,QAAA,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAClB,QAAA,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAElB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC;KACpD;IAEM,kBAAkB,CAAC,KAAa,EAAE,KAAW,EAAA;AAChD,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,EACzB,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,EACjB,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,EACjB,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;AAEtB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEb,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACb,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AAEd,QAAA,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC;KACpD;AAEM,IAAA,UAAU,CAAC,KAAa,EAAE,UAAgB,EAAE,QAAc,EAAA;AAC7D,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,EACjB,EAAE,GAAG,UAAU,CAAC,CAAC,EACjB,EAAE,GAAG,UAAU,CAAC,CAAC,EACjB,EAAE,GAAG,UAAU,CAAC,CAAC,EACjB,EAAE,GAAG,UAAU,CAAC,CAAC,EACjB,EAAE,GAAG,QAAQ,CAAC,CAAC,EACf,EAAE,GAAG,QAAQ,CAAC,CAAC,EACf,EAAE,GAAG,QAAQ,CAAC,CAAC,EACf,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC;AAEpB,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACV,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AAEd,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACd,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AAEf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AAEf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AAEf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AACf,QAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;AAEf,QAAA,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC;KAC5C;IAEM,eAAe,CAAC,KAAa,EAAE,SAAiB,EAAA;AACnD,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;AAE3B,QAAA,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;AACjB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;AACrB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;AACrB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;AACrB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;AACrB,QAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;AAErB,QAAA,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC;KACjD;IAEM,aAAa,CAAC,KAAa,EAAE,UAAmB,EAAA;AACnD,QAAA,IAAI,IAAc,CAAC;QACnB,IAAI,UAAU,EAAE;AACZ,YAAA,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;SAC1E;aAAM;YACH,IAAI,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;SACvE;AACD,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;KAClC;IAEM,YAAY,CAAC,KAAa,EAAE,SAAmB,EAAA;AAClD,QAAA,IAAI,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;QAExB,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAExB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;AAE1B,QAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;KAC9C;IAEM,yBAAyB,GAAA;AAC5B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAuC,CAAC,CAAC;QACjE,IAAI,CAAC,qBAAqB,GAAG,cAAc,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACxE,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC,iBAAiB,CAC/C,IAAI,CAAC,qBAAqC,EAC1C,CAAC,EACD,IAAI,CAAC,qBAAqB,CAAC,MAAM,GAAG,CAAC,EACrC,CAAC,CAAC,EAAG,CAAC,YAAY,CACrB,CAAC;QACF,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAsC,CAAC,CAAC;QAChE,IAAI,CAAC,oBAAoB,GAAG,cAAc,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAEtE,IAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC,iBAAiB,CAC9C,IAAI,CAAC,oBAAoC,EACzC,CAAC,EACD,IAAI,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,EACpC,CAAC,CAAC,EAAG,CAAC,YAAY,CACrB,CAAC;KACL;IAEM,uBAAuB,GAAA;AAC1B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,sBAAqC,CAAC,CAAC;QAC/D,IAAI,CAAC,mBAAmB,GAAG,cAAc,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACpE,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC,iBAAiB,CAC7C,IAAI,CAAC,mBAAmC,EACxC,CAAC,EACD,IAAI,CAAC,mBAAmB,CAAC,MAAM,GAAG,CAAC,EACnC,CAAC,CAAC,EAAG,CAAC,YAAY,CACrB,CAAC;QACF,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,qBAAoC,CAAC,CAAC;QAC9D,IAAI,CAAC,kBAAkB,GAAG,cAAc,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAClE,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC,iBAAiB,CAC5C,IAAI,CAAC,kBAAkC,EACvC,CAAC,EACD,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAClC,CAAC,CAAC,EAAG,CAAC,YAAY,CACrB,CAAC;KACL;IAEM,gBAAgB,GAAA;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,WAA0B,CAAC,CAAC;QACpD,IAAI,CAAC,QAAQ,GAAG,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9C,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAwB,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KACtG;IAEM,qBAAqB,GAAA;AACxB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,gBAA+B,CAAC,CAAC;QACzD,IAAI,CAAC,aAAa,GAAG,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACxD,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,iBAAiB,CACvC,IAAI,CAAC,aAA6B,EAClC,CAAC,EACD,IAAI,CAAC,aAAa,CAAC,MAAM,EACzB,CAAC,CAAC,EAAG,CAAC,YAAY,CACrB,CAAC;KACL;IAEM,kBAAkB,GAAA;AACrB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,aAA4B,CAAC,CAAC;QACtD,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAClD,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,iBAAiB,CACpC,IAAI,CAAC,UAA0B,EAC/B,CAAC,EACD,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAC1B,CAAC,CAAC,EAAG,CAAC,YAAY,CACrB,CAAC;KACL;IAEM,wBAAwB,GAAA;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,OAAO,CAAC;QAChC,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAkC,CAAC,CAAC;QAC5D,IAAI,CAAC,gBAAgB,GAAG,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC9D,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,iBAAiB,CAC1C,IAAI,CAAC,gBAAgC,EACrC,CAAC,EACD,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CACnC,CAAC;KACL;;AArsBM,UAAW,CAAA,WAAA,GAAW,CAAC;;ACjBlC,MAAM,YAAY,CAAA;AAiCd,IAAA,WAAA,CAAY,gBAAkC,EAAA;AAE1C,QAAA,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC;AAEvC,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;AAE1C,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;KACrB;IAES,YAAY,GAAA;QAClB,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YAC1C,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK;gBACtC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAC7B,IAAI,OAAO,CAAC,OAAO,EAAE;AACjB,oBAAA,QAAQ,EAAE;AACN,wBAAA,gBAAgB,EAAE,EAAC,IAAI,EAAE,MAAM,EAAC;AAChC,wBAAA,UAAU,EAAE,EAAC,IAAI,EAAE,MAAM,EAAC;AAC1B,wBAAA,eAAe,EAAE,MAAM;AACvB,wBAAA,cAAc,EAAE,MAAM;AACtB,wBAAA,MAAM,EAAE,EAAC,IAAI,EAAE,MAAM,EAAC;AACtB,wBAAA,QAAQ,EAAE,EAAC,IAAI,EAAE,OAAO,EAAC;AAC5B,qBAAA;AACD,oBAAA,UAAU,EAAE;AACR,wBAAA,mBAAmB,EAAE,EAAC,IAAI,EAAE,MAAM,EAAC;AACnC,wBAAA,kBAAkB,EAAE,EAAC,IAAI,EAAE,MAAM,EAAC;AACrC,qBAAA;AACD,oBAAA,YAAY,EAAE,CAAA;;;;;;;;;;;;;;;AAeR,yBAAA,CAAA;AACN,oBAAA,cAAc,EAAE,CAAA;;;;;AAKV,yBAAA,CAAA;AACT,iBAAA,CAAC,CACL,CAAC;SACL;KACJ;AAEM,IAAA,aAAa,CAAC,UAAsB,EAAA;AACvC,QAAA,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC;QACrC,IAAI,CAAC,YAAY,EAAE,CAAC;AACpB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;SAC7C;KACJ;AAEM,IAAA,GAAG,CAAC,KAAY,EAAA;AACnB,QAAA,IAAI,KAAK,CAAC,aAAa,KAAK,CAAC,CAAC,EAAE;AAC5B,YAAA,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;YACtB,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;AAC1C,YAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACzB,YAAA,IAAI,CAAC,iBAAiB;gBACtB,IAAI,CAAC,iBAAiB,CAAC,UAAU;gBACjC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;SAC1D;KACJ;AAEM,IAAA,MAAM,CAAC,KAAY,EAAA;AACtB,QAAA,IAAI,KAAK,GAAG,KAAK,CAAC,aAAa,CAAC;AAChC,QAAA,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YACd,KAAK,CAAC,cAAc,EAAE,CAAC;AACvB,YAAA,KAAK,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AACzB,YAAA,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC9B,YAAA,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;SACjC;KACJ;AAEM,IAAA,iBAAiB,CAAC,UAAkB,EAAA;AACvC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;AACtB,QAAA,KAAK,IAAI,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,YAAA,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC;SAC3B;KACJ;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QAC5B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;SAC1B;KACJ;IAEM,WAAW,GAAA;AACd,QAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;YAC5B,OAAO,CAAC,EAAE,EAAE;gBACR,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;aACjC;SACJ;KACJ;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QAC5B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC;YACjC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;YAChC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;SACtC;AACD,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;KACrB;;AAtJM,YAAW,CAAA,WAAA,GAAW,CAAC;;ACwBlC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CG;AACH,MAAM,gBAAgB,CAAA;AAyIlB,IAAA,WAAA,CAAY,UAAmC,EAAE,EAAA;AAE7C,QAAA,IAAI,CAAC,IAAI,GAAG,gBAAgB,CAAC,WAAW,EAAE,CAAC;AAE3C,QAAA,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC;AAE3B,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AAEvB,QAAA,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,IAAI,SAAS,GAAG,IAAI,GAAG,OAAO,CAAC,UAAU,CAAC;AAE/E,QAAA,IAAI,CAAC,kBAAkB;AACnB,YAAA,OAAO,CAAC,kBAAkB,IAAI,SAAS,GAAG,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;QAE/E,IAAI,CAAC,gBAAgB,GAAG,IAAI,gBAAgB,CAAC,IAAI,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,IAAI,EAAE,OAAO,CAAC,eAAe,CAAC,CAAC;QAEpE,IAAI,CAAC,eAAe,GAAG,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QAEjD,IAAI,CAAC,UAAU,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;QAEvC,IAAI,CAAC,iBAAiB,GAAG,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAErD,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC;QAE3C,IAAI,CAAC,gBAAgB,GAAG,IAAI,gBAAgB,CAAC,IAAI,CAAC,CAAC;AAEnD,QAAA,IAAI,OAAO,CAAC,cAAc,IAAI,SAAS,EAAE;AACrC,YAAA,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;SAClD;AAED,QAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,IAAI,CAACC,KAAU,EAAEA,KAAU,EAAEA,KAAU,CAAC,CAAC;AAEvF,QAAA,IAAI,YAAY,GAAiB,IAAI,YAAY,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AACnE,QAAA,IAAI,OAAO,CAAC,YAAY,KAAK,SAAS,EAAE;AACpC,YAAA,IAAI,OAAO,CAAC,YAAY,YAAY,KAAK,EAAE;AACvC,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAC7D,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAC7D,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;aAChE;AAAM,iBAAA,IAAI,OAAO,OAAO,CAAC,YAAY,KAAK,QAAQ,EAAE;AACjD,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;AACvC,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;AACvC,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;aAC1C;SACJ;AAED,QAAA,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;AAEjC,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,OAAO,IAAI,SAAS,GAAG,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC;AAErE,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC;AAEpC,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,GAAG,YAAY,CAA4B,uBAAuB,EAAE,IAAI,CAAC,CAAC;AAE3G,QAAA,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,WAAW,IAAI,SAAS,IAAI,OAAO,CAAC,WAAW,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,CAAC;;AAG/F,QAAA,IAAI,OAAO,CAAC,QAAQ,EAAE;AAClB,YAAA,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SACtC;KACJ;IAEM,OAAO,GAAA;AACV,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC,CAAC;KACrC;AAED,IAAA,IAAI,EAAE,GAAA;QACF,OAAO,IAAI,CAAC,IAAI,CAAC;KACpB;AAED,IAAA,IAAW,WAAW,GAAA;AAClB,QAAA,OAAO,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;KACpC;IAED,IAAW,WAAW,CAAC,CAAU,EAAA;AAC7B,QAAA,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;KACjC;AAEM,IAAA,OAAO,CAAC,EAAoB,EAAA;AAC/B,QAAA,OAAO,IAAI,CAAC,IAAI,KAAK,EAAE,CAAC,IAAI,CAAC;KAChC;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,UAAmB,EAAA;AACpC,QAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;AAC9B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,IAAI,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;KAC5D;AAED;;;;AAIG;IACI,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED;;;;AAIG;AACI,IAAA,UAAU,CAAC,OAAe,EAAA;AAC7B,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;KAC3B;AAED;;;;AAIG;AACI,IAAA,iBAAiB,CAAC,MAAe,EAAA;AACpC,QAAA,IAAI,CAAC,gBAAgB,CAAC,cAAc,GAAG,MAAM,CAAC;AAC9C,QAAA,IAAI,CAAC,YAAY,CAAC,cAAc,GAAG,MAAM,CAAC;AAC1C,QAAA,IAAI,CAAC,eAAe,CAAC,cAAc,GAAG,MAAM,CAAC;AAC7C,QAAA,IAAI,CAAC,UAAU,CAAC,cAAc,GAAG,MAAM,CAAC;AACxC,QAAA,IAAI,CAAC,iBAAiB,CAAC,cAAc,GAAG,MAAM,CAAC;AAC/C,QAAA,IAAI,CAAC,YAAY,CAAC,cAAc,GAAG,MAAM,CAAC;AAC1C,QAAA,IAAI,CAAC,gBAAgB,CAAC,cAAc,GAAG,MAAM,CAAC;KACjD;AAED;;;;AAIG;IACI,UAAU,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;AAED;;;;;;AAMG;AACI,IAAA,kBAAkB,CAAC,IAAY,EAAE,GAAW,EAAE,YAAqB,EAAA;AACtE,QAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;QAC9B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,YAAY,IAAIA,KAAU,CAAC;KACxD;AAEM,IAAA,iBAAiB,CAAC,MAAc,EAAA;AACnC,QAAA,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;KAChC;AAES,IAAA,eAAe,CAAC,MAAc,EAAA;;AAEpC,QAAA,MAAM,CAAC,SAAS,IAAI,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;;AAGhE,QAAA,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;AAGpD,QAAA,MAAM,CAAC,QAAQ,IAAI,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;;AAG7D,QAAA,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;;AAG9C,QAAA,MAAM,CAAC,UAAU,IAAI,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;AAGnE,QAAA,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;AAGpD,QAAA,MAAM,CAAC,SAAS,IAAI,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;AAEhE,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;AAEpD,QAAA,IAAI,EAAE,GAAsB,IAAI,CAAC,UAAU,CAAC;AAC5C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClD,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,iBAAiB,GAAG,IAAI,CAAC;YACjD,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,sBAAsB,GAAG,MAAM,CAAC,sBAAsB,CAAC;YAC/E,IAAI,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,mBAAmB,EAAE;gBAC7C,IAAI,EAAE,EAAE;AACJ,oBAAA,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC,QAAQ,CAAC,kBAAkB,CAAS,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;iBAClF;aACJ;iBAAM;gBACH,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;aAChE;YACD,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;SACjD;KACJ;AAED;;;;;AAKG;AACI,IAAA,GAAG,CAAC,MAAc,EAAA;AACrB,QAAA,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE;AAC3B,YAAA,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAChC,MAAM,CAAC,sBAAsB,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AACtD,YAAA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC5B,YAAA,IAAI,EAAE,GAAsB,IAAI,CAAC,UAAU,CAAC;YAC5C,IAAI,EAAE,EAAE;gBACJ,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC,QAAQ,CAAC,kBAAkB,CAAS,MAAM,CAAC,CAAC;gBAC9D,IAAK,EAAa,CAAC,SAAS,IAAI,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE;AACxD,oBAAA,MAAM,CAAC,cAAc,CAAE,EAAa,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;iBACrF;aACJ;AACD,YAAA,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;YAC7B,MAAM,CAAC,eAAe,EAAE,CAAC;SAC5B;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;AAKG;AACI,IAAA,WAAW,CAAC,QAAkB,EAAA;AACjC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACjD,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SACzB;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;AAKG;AACI,IAAA,OAAO,CAAC,MAAc,EAAA;AACzB,QAAA,OAAO,MAAM,CAAC,iBAAiB,IAAI,IAAI,CAAC,gBAAgB,KAAK,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC;KAC1G;AAES,IAAA,kBAAkB,CAAC,MAAc,EAAA;AACvC,QAAA,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAChC,QAAA,MAAM,CAAC,sBAAsB,GAAG,CAAC,CAAC,CAAC;;AAGnC,QAAA,MAAM,CAAC,SAAS,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;;AAGnE,QAAA,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;AAGvD,QAAA,MAAM,CAAC,QAAQ,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;;AAGhE,QAAA,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;;AAGjD,QAAA,MAAM,CAAC,UAAU,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;AAGtE,QAAA,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;AAGvD,QAAA,MAAM,CAAC,SAAS,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;AAEnE,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClD,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;SACpD;KACJ;AAED;;;;AAIG;AACI,IAAA,YAAY,CAAC,MAAc,EAAA;QAC9B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC;AACxD,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;;QAGzD,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE;YAC7C,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;AACnD,YAAA,MAAM,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;SAChC;AAED,QAAA,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;AACtB,YAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;SACnC;AAED,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;KAC1D;AAEM,IAAA,mBAAmB,CAAC,MAAc,EAAA;QACrC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC;AACxD,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;;QAGzD,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE;YAC7C,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;AACnD,YAAA,MAAM,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;SAChC;AAED,QAAA,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;AACtB,YAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;SACnC;KACJ;AAED;;;AAGG;IACI,mBAAmB,GAAA;QACtB,IAAI,EAAE,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;YAAE,OAAO;AAC3D,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACvB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC/B,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE;AACd,gBAAA,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,kBAAkB,CAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1D,gBAAA,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC;aAC1B;SACJ;KACJ;AAED;;;;AAIG;AACI,IAAA,oBAAoB,CAAC,UAAkB,EAAA;AAC1C,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACvB,QAAA,KAAK,IAAI,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACxC,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,sBAAsB,GAAG,CAAC,CAAC;SACnC;KACJ;AAED;;;;;;AAMG;AACI,IAAA,KAAK,CAAC,UAAsB,EAAE,QAAA,GAAoB,KAAK,EAAA;AAC1D,QAAA,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;AAClB,YAAA,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;YAE7B,IAAI,CAAC,QAAQ,EAAE;gBACX,IAAI,CAAC,gBAAgB,GAAG,UAAU,CAAC,iBAAiB,CAAC,MAAM,CAAC;AAC5D,gBAAA,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAC3C;YAEA,UAAqB,CAAC,SAAS,IAAI,IAAI,CAAC,0BAA0B,CAAE,UAAqB,CAAC,SAAS,CAAC,CAAC;AAEtG,YAAA,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;AAEhC,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;SAC/C;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;AAIG;AACI,IAAA,cAAc,CAAC,UAAsB,EAAA;QACxC,IAAI,UAAU,CAAC,QAAQ,IAAI,UAAU,CAAC,QAAQ,CAAC,aAAa,EAAE,EAAE;YAE5D,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;YACvD,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;YACnD,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;AAEjD,YAAA,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,UAAoB,CAAC,CAAC;AAC1D,YAAA,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAC/C,YAAA,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AACjD,YAAA,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;YAE5C,IAAI,CAAC,4BAA4B,EAAE,CAAC;YACpC,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC9B;KACJ;AAED;;;;AAIG;AACO,IAAA,0BAA0B,CAAC,SAAoB,EAAA;AACrD,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACvB,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;QACjB,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACd,YAAA,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC,cAAc,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;SAC5E;KACJ;AAED;;;AAGG;IACI,4BAA4B,GAAA;AAC/B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC;AACzC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/B,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;SAC9B;KACJ;AAED;;;AAGG;IACI,qBAAqB,GAAA;AACxB,QAAA,IAAI,IAAI,CAAC,UAAU,EAAE;;;;;;AAMjB,YAAA,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;SACnC;KACJ;AAED;;;AAGG;IACI,MAAM,GAAA;AACT,QAAA,IAAI,IAAI,CAAC,UAAU,EAAE;AACjB,YAAA,IAAI,IAAI,CAAC,gBAAgB,KAAK,CAAC,CAAC,EAAE;AAC9B,gBAAA,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;;gBAEnE,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACnF,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,gBAAgB,GAAG,CAAC,CAAC;iBAC7D;aACJ;AACD,YAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,YAAA,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC;AAC3B,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SAClD;KACJ;AAED;;;;AAIG;IACI,WAAW,GAAA;QACd,OAAQ,EAAe,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KAClD;AAED;;;;AAIG;AACI,IAAA,IAAI,CAAC,QAAkB,EAAA;AAC1B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QAC9B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAC3B,YAAA,EAAE,IAAI,QAAQ,CAAC,EAAE,CAAC,CAAC;SACtB;KACJ;AAED;;;AAGG;IACI,KAAK,GAAA;;;AAGR,QAAA,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QAC9B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC3B,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE;gBAC7C,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;AAC/C,gBAAA,EAAE,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;aAC5B;AACD,YAAA,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;SACzB;AACD,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;AAC1B,QAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;KACvB;AAED;;;;AAIG;AACO,IAAA,YAAY,CAAC,MAAc,EAAA;AACjC,QAAA,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAChC,QAAA,MAAM,CAAC,sBAAsB,GAAG,CAAC,CAAC,CAAC;AACnC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClD,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9C;KACJ;;AA7nBM,gBAAW,CAAA,WAAA,GAAW,CAAC,CAAC;AAoqBnC,MAAM,uBAAuB,GAA8B;;;;;;AAOvD;;;AAGG;IACH,MAAM;AAEN;;;AAGG;IACH,SAAS;AAET;;;AAGG;IACH,KAAK;AAEL;;;AAGG;IACH,QAAQ;AAER;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,cAAc;AAEd;;;AAGG;IACH,kBAAkB;AAElB;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,QAAQ;AAER;;;AAGG;IACH,QAAQ;AAER;;;AAGG;IACH,QAAQ;AAER;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,KAAK;AAEL;;;AAGG;IACH,KAAK;AAEL;;;AAGG;IACH,KAAK;AAEL;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,UAAU;AAEV;;;AAGG;IACH,aAAa;AAEb;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,YAAY;CACf;;AC57BD;;AAEG;AAgCH;;;;;;AAMG;SACa,sBAAsB,CAAC,GAA6C,EAAE,QAAiB,KAAK,EAAA;AACxG,IAAA,IAAI,CAAC,GAAG,GAAG,GAAGC,IAAS,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAC7C,IAAA,IAAI,CAAC,GAAG,GAAG,GAAGC,GAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,GAAGD,IAAS,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;AACzE,IAAA,IAAI,CAAC,GAAGC,GAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,SAAS,CAAC;AACvG,IAAA,OAAO,CAAC,GAAGC,IAAS,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,qBAAqB,CAAC,CAAC;AAC1D,CAAC;AAsBD;;;;;;AAMG;AACa,SAAA,kBAAkB,CAAC,KAAa,EAAE,UAAuC,EAAA;AACrF,IAAA,IAAI,KAAK,IAAI,GAAG,EAAE;AACd,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;QACvD,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;AACxC,QAAA,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC;KACnD;SAAM;AACH,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;QACxD,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,CAAC;AACzC,QAAA,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC;KACnD;AACD,IAAA,OAAO,UAAU,CAAC;AACtB,CAAC;AAED;;;;;;AAMG;AACa,SAAA,mBAAmB,CAAC,KAAa,EAAE,UAAgB,EAAA;AAC/D,IAAA,IAAI,KAAK,IAAI,GAAG,EAAE;AACd,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;QACvD,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACvC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC;KAClD;SAAM;AACH,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;QACxD,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,CAAC;QACxC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC;KAClD;AACD,IAAA,OAAO,UAAU,CAAC;AACtB;;AC1GA;AAEA;AACA;AACA;AACA;AAEA;;AAEG;AAIH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,MAAM,CAAC,IAAI,EAAE,WAAW,EAAE,GAAG,EAAA;AAElC,IAAA,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;IAEf,IAAI,QAAQ,GAAG,WAAW,IAAI,WAAW,CAAC,MAAM,EAC5C,QAAQ,GAAG,QAAQ,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,EACxD,SAAS,GAAG,UAAU,CAAC,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC,EACpD,SAAS,GAAG,EAAE,CAAC;AAEnB,IAAA,IAAI,CAAC,SAAS;AAAE,QAAA,OAAO,SAAS,CAAC;AAEjC,IAAA,IAAI,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;AAEvC,IAAA,IAAI,QAAQ;QAAE,SAAS,GAAG,cAAc,CAAC,IAAI,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;;IAG5E,IAAI,IAAI,CAAC,MAAM,GAAG,EAAE,GAAG,GAAG,EAAE;AACxB,QAAA,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AACtB,QAAA,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAEtB,QAAA,KAAK,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,IAAI,GAAG,EAAE;AACtC,YAAA,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AACZ,YAAA,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,GAAG,IAAI;gBAAE,IAAI,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,GAAG,IAAI;gBAAE,IAAI,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,GAAG,IAAI;gBAAE,IAAI,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,GAAG,IAAI;gBAAE,IAAI,GAAG,CAAC,CAAC;SAC1B;;AAGD,QAAA,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;KAC7C;AAED,IAAA,YAAY,CAAC,SAAS,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;AAE1D,IAAA,OAAO,SAAS,CAAC;AACrB,CAAC;AAED;AACA,SAAS,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,SAAS,EAAA;IAChD,IAAI,CAAC,EAAE,IAAI,CAAC;AAEZ,IAAA,IAAI,SAAS,MAAM,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;QACvD,KAAK,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,GAAG;AAAE,YAAA,IAAI,GAAG,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;KACvF;SAAM;AACH,QAAA,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,IAAI,GAAG;AAAE,YAAA,IAAI,GAAG,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;KAC9F;IAED,IAAI,IAAI,IAAI,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;QACjC,UAAU,CAAC,IAAI,CAAC,CAAC;AACjB,QAAA,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;KACpB;AAED,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED;AACA,SAAS,YAAY,CAAC,KAAK,EAAE,GAAG,EAAA;AAC5B,IAAA,IAAI,CAAC,KAAK;AAAE,QAAA,OAAO,KAAK,CAAC;AACzB,IAAA,IAAI,CAAC,GAAG;QAAE,GAAG,GAAG,KAAK,CAAC;AAEtB,IAAA,IAAI,CAAC,GAAG,KAAK,EACT,KAAK,CAAC;AACV,IAAA,GAAG;QACC,KAAK,GAAG,KAAK,CAAC;AAEd,QAAA,IAAI,CAAC,CAAC,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;YACpE,UAAU,CAAC,CAAC,CAAC,CAAC;AACd,YAAA,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC;AACjB,YAAA,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI;AAAE,gBAAA,OAAO,IAAI,CAAC;YAC9B,KAAK,GAAG,IAAI,CAAC;SAEhB;aAAM;AACH,YAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;SACd;AACL,KAAC,QAAQ,KAAK,IAAI,CAAC,KAAK,GAAG,EAAE;AAE7B,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;AAED;AACA,SAAS,YAAY,CAAC,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAA;AAC7D,IAAA,IAAI,CAAC,GAAG;QAAE,OAAO;;IAGjB,IAAI,CAAC,IAAI,IAAI,IAAI;QAAE,UAAU,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;AAErD,IAAA,IAAI,IAAI,GAAG,GAAG,EACV,IAAI,EAAE,IAAI,CAAC;;IAGf,OAAO,GAAG,CAAC,IAAI,KAAK,GAAG,CAAC,IAAI,EAAE;AAC1B,QAAA,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;AAChB,QAAA,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;QAEhB,IAAI,IAAI,GAAG,WAAW,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE;;YAExD,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAC7B,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAC5B,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAE7B,UAAU,CAAC,GAAG,CAAC,CAAC;;AAGhB,YAAA,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;AAChB,YAAA,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YAEjB,SAAS;SACZ;QAED,GAAG,GAAG,IAAI,CAAC;;AAGX,QAAA,IAAI,GAAG,KAAK,IAAI,EAAE;;YAEd,IAAI,CAAC,IAAI,EAAE;AACP,gBAAA,YAAY,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;;aAGxE;AAAM,iBAAA,IAAI,IAAI,KAAK,CAAC,EAAE;gBACnB,GAAG,GAAG,sBAAsB,CAAC,GAAG,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;AAClD,gBAAA,YAAY,CAAC,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;;aAG1D;AAAM,iBAAA,IAAI,IAAI,KAAK,CAAC,EAAE;AACnB,gBAAA,WAAW,CAAC,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;aACtD;YAED,MAAM;SACT;KACJ;AACL,CAAC;AAED;AACA,SAAS,KAAK,CAAC,GAAG,EAAA;AACd,IAAA,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,EACZ,CAAC,GAAG,GAAG,EACP,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC;IAEjB,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;QAAE,OAAO,KAAK,CAAC;;AAGrC,IAAA,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;AAEtB,IAAA,OAAO,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE;AACnB,QAAA,IAAI,eAAe,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACvD,YAAA,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;AAC/C,QAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;KACd;AAED,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED,SAAS,WAAW,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAA;AACtC,IAAA,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,EACZ,CAAC,GAAG,GAAG,EACP,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC;IAEjB,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;QAAE,OAAO,KAAK,CAAC;;IAGrC,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACrE,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACrE,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACrE,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;AAG1E,IAAA,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC7C,IAAI,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;;AAGlD,IAAA,IAAI,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC;IAElB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE;QACrB,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI;AAChC,YAAA,eAAe,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACvD,YAAA,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;AAC/C,QAAA,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;KACf;;AAGD,IAAA,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC;IAEd,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE;QACrB,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI;AAChC,YAAA,eAAe,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACvD,YAAA,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;AAC/C,QAAA,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;KACf;AAED,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED;AACA,SAAS,sBAAsB,CAAC,KAAK,EAAE,SAAS,EAAE,GAAG,EAAA;IACjD,IAAI,CAAC,GAAG,KAAK,CAAC;AACd,IAAA,GAAG;AACC,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EACV,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;YAE5F,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAC1B,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAC1B,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;;YAG1B,UAAU,CAAC,CAAC,CAAC,CAAC;AACd,YAAA,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AAEnB,YAAA,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;SACjB;AACD,QAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AACf,KAAC,QAAQ,CAAC,KAAK,KAAK,EAAE;AAEtB,IAAA,OAAO,CAAC,CAAC;AACb,CAAC;AAED;AACA,SAAS,WAAW,CAAC,KAAK,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAA;;IAExD,IAAI,CAAC,GAAG,KAAK,CAAC;AACd,IAAA,GAAG;AACC,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;AACpB,QAAA,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE;AACjB,YAAA,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;;gBAEtC,IAAI,CAAC,GAAG,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;gBAG3B,CAAC,GAAG,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;gBAC5B,CAAC,GAAG,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;;AAG5B,gBAAA,YAAY,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;AAClD,gBAAA,YAAY,CAAC,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;gBAClD,OAAO;aACV;AACD,YAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;SACd;AACD,QAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AACf,KAAC,QAAQ,CAAC,KAAK,KAAK,EAAE;AAC1B,CAAC;AAED;AACA,SAAS,cAAc,CAAC,IAAI,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,EAAA;AACrD,IAAA,IAAI,KAAK,GAAG,EAAE,EACV,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC;AAE7B,IAAA,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAChD,QAAA,KAAK,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;QAC7B,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;AAC3D,QAAA,IAAI,GAAG,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;AAChD,QAAA,IAAI,IAAI,KAAK,IAAI,CAAC,IAAI;AAAE,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAC5C,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;KACjC;AAED,IAAA,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;;AAGrB,IAAA,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC/B,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;QACnC,SAAS,GAAG,YAAY,CAAC,SAAS,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC;KACvD;AAED,IAAA,OAAO,SAAS,CAAC;AACrB,CAAC;AAED,SAAS,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAA;AAClB,IAAA,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACrB,CAAC;AAED;AACA,SAAS,aAAa,CAAC,IAAI,EAAE,SAAS,EAAA;AAClC,IAAA,SAAS,GAAG,cAAc,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IAC5C,IAAI,SAAS,EAAE;QACX,IAAI,CAAC,GAAG,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACtC,QAAA,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;KAC3B;AACL,CAAC;AAED;AACA,SAAS,cAAc,CAAC,IAAI,EAAE,SAAS,EAAA;IACnC,IAAI,CAAC,GAAG,SAAS,EACb,EAAE,GAAG,IAAI,CAAC,CAAC,EACX,EAAE,GAAG,IAAI,CAAC,CAAC,EACX,EAAE,GAAG,CAAC,QAAQ,EACd,CAAC,CAAC;;;AAIN,IAAA,GAAG;QACC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;AACjD,YAAA,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/D,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE;gBACnB,EAAE,GAAG,CAAC,CAAC;AACP,gBAAA,IAAI,CAAC,KAAK,EAAE,EAAE;AACV,oBAAA,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AAAE,wBAAA,OAAO,CAAC,CAAC;AACzB,oBAAA,IAAI,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC;wBAAE,OAAO,CAAC,CAAC,IAAI,CAAC;iBACtC;gBACD,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;aACnC;SACJ;AACD,QAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AACf,KAAC,QAAQ,CAAC,KAAK,SAAS,EAAE;AAE1B,IAAA,IAAI,CAAC,CAAC;AAAE,QAAA,OAAO,IAAI,CAAC;IAEpB,IAAI,EAAE,KAAK,EAAE;AAAE,QAAA,OAAO,CAAC,CAAC,IAAI,CAAC;;;;IAM7B,IAAI,IAAI,GAAG,CAAC,EACR,EAAE,GAAG,CAAC,CAAC,CAAC,EACR,EAAE,GAAG,CAAC,CAAC,CAAC,EACR,MAAM,GAAG,QAAQ,EACjB,GAAG,CAAC;AAER,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AAEX,IAAA,OAAO,CAAC,KAAK,IAAI,EAAE;AACf,QAAA,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AACpC,YAAA,eAAe,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE;YAEjF,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAEtC,IAAI,CAAC,GAAG,GAAG,MAAM,KAAK,GAAG,KAAK,MAAM,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,aAAa,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE;gBAC3E,CAAC,GAAG,CAAC,CAAC;gBACN,MAAM,GAAG,GAAG,CAAC;aAChB;SACJ;AAED,QAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;KACd;AAED,IAAA,OAAO,CAAC,CAAC;AACb,CAAC;AAED;AACA,SAAS,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAA;IACvC,IAAI,CAAC,GAAG,KAAK,CAAC;AACd,IAAA,GAAG;AACC,QAAA,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI;AAAE,YAAA,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;AAC3D,QAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC;AACjB,QAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC;AACjB,QAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AACf,KAAC,QAAQ,CAAC,KAAK,KAAK,EAAE;AAEtB,IAAA,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;AACrB,IAAA,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;IAEf,UAAU,CAAC,CAAC,CAAC,CAAC;AAClB,CAAC;AAED;AACA;AACA,SAAS,UAAU,CAAC,IAAI,EAAA;AACpB,IAAA,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EACzC,MAAM,GAAG,CAAC,CAAC;AAEf,IAAA,GAAG;QACC,CAAC,GAAG,IAAI,CAAC;QACT,IAAI,GAAG,IAAI,CAAC;QACZ,IAAI,GAAG,IAAI,CAAC;QACZ,SAAS,GAAG,CAAC,CAAC;QAEd,OAAO,CAAC,EAAE;AACN,YAAA,SAAS,EAAE,CAAC;YACZ,CAAC,GAAG,CAAC,CAAC;YACN,KAAK,GAAG,CAAC,CAAC;YACV,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;AACzB,gBAAA,KAAK,EAAE,CAAC;AACR,gBAAA,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;AACZ,gBAAA,IAAI,CAAC,CAAC;oBAAE,MAAM;aACjB;YACD,KAAK,GAAG,MAAM,CAAC;AAEf,YAAA,OAAO,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE;gBAElC,IAAI,KAAK,KAAK,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;oBAClD,CAAC,GAAG,CAAC,CAAC;AACN,oBAAA,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;AACZ,oBAAA,KAAK,EAAE,CAAC;iBACX;qBAAM;oBACH,CAAC,GAAG,CAAC,CAAC;AACN,oBAAA,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;AACZ,oBAAA,KAAK,EAAE,CAAC;iBACX;AAED,gBAAA,IAAI,IAAI;AAAE,oBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;;oBACpB,IAAI,GAAG,CAAC,CAAC;AAEd,gBAAA,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;gBACf,IAAI,GAAG,CAAC,CAAC;aACZ;YAED,CAAC,GAAG,CAAC,CAAC;SACT;AAED,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,MAAM,IAAI,CAAC,CAAC;AAEhB,KAAC,QAAQ,SAAS,GAAG,CAAC,EAAE;AAExB,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED;AACA,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAA;;IAElC,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IAC9B,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;AAE9B,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,UAAU,CAAC;AAChC,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,UAAU,CAAC;AAChC,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,UAAU,CAAC;AAChC,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,UAAU,CAAC;AAEhC,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,UAAU,CAAC;AAChC,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,UAAU,CAAC;AAChC,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,UAAU,CAAC;AAChC,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,UAAU,CAAC;AAEhC,IAAA,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACxB,CAAC;AAED;AACA,SAAS,WAAW,CAAC,KAAK,EAAA;AACtB,IAAA,IAAI,CAAC,GAAG,KAAK,EACT,QAAQ,GAAG,KAAK,CAAC;AACrB,IAAA,GAAG;AACC,QAAA,IAAI,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;YAAE,QAAQ,GAAG,CAAC,CAAC;AACnC,QAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AACf,KAAC,QAAQ,CAAC,KAAK,KAAK,EAAE;AAEtB,IAAA,OAAO,QAAQ,CAAC;AACpB,CAAC;AAED;AACA,SAAS,eAAe,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAA;IACnD,OAAO,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC;QACrD,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC;QAClD,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC;AAC3D,CAAC;AAED;AACA,SAAS,eAAe,CAAC,CAAC,EAAE,CAAC,EAAA;IACzB,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC;AACnE,QAAA,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACzE,CAAC;AAED;AACA,SAAS,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAA;AACjB,IAAA,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACjE,CAAC;AAED;AACA,SAAS,MAAM,CAAC,EAAE,EAAE,EAAE,EAAA;AAClB,IAAA,OAAO,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC1C,CAAC;AAED;AACA,SAAS,UAAU,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAA;AAC9B,IAAA,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,IAAI,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC;AACjC,SAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,IAAI,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAAE,QAAA,OAAO,IAAI,CAAC;IACpD,OAAO,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,CAAC;QAChD,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;AACtD,CAAC;AAED;AACA,SAAS,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAA;IAC3B,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,IAAA,GAAG;AACC,QAAA,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YAClE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;AAAE,YAAA,OAAO,IAAI,CAAC;AAC7C,QAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AACf,KAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;AAElB,IAAA,OAAO,KAAK,CAAC;AACjB,CAAC;AAED;AACA,SAAS,aAAa,CAAC,CAAC,EAAE,CAAC,EAAA;AACvB,IAAA,OAAO,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;QAC9B,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC;QAClD,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;AACzD,CAAC;AAED;AACA,SAAS,YAAY,CAAC,CAAC,EAAE,CAAC,EAAA;AACtB,IAAA,IAAI,CAAC,GAAG,CAAC,EACL,MAAM,GAAG,KAAK,EACd,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EACpB,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACzB,IAAA,GAAG;AACC,QAAA,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;AACpD,aAAC,EAAE,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC7D,MAAM,GAAG,CAAC,MAAM,CAAC;AACrB,QAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AACf,KAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;AAElB,IAAA,OAAO,MAAM,CAAC;AAClB,CAAC;AAED;AACA;AACA,SAAS,YAAY,CAAC,CAAC,EAAE,CAAC,EAAA;IACtB,IAAI,EAAE,GAAG,IAAIC,MAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAC5B,EAAE,GAAG,IAAIA,MAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAC5B,EAAE,GAAG,CAAC,CAAC,IAAI,EACX,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC;AAEhB,IAAA,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;AACX,IAAA,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;AAEX,IAAA,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC;AACb,IAAA,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC;AAEb,IAAA,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC;AACb,IAAA,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC;AAEb,IAAA,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC;AACb,IAAA,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC;AAEb,IAAA,OAAO,EAAE,CAAC;AACd,CAAC;AAED;AACA,SAAS,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAA;IAC7B,IAAI,CAAC,GAAG,IAAIA,MAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAE1B,IAAI,CAAC,IAAI,EAAE;AACP,QAAA,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;AACX,QAAA,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;KAEd;SAAM;AACH,QAAA,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACnB,QAAA,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;AACd,QAAA,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACnB,QAAA,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;KACjB;AACD,IAAA,OAAO,CAAC,CAAC;AACb,CAAC;AAED,SAAS,UAAU,CAAC,CAAC,EAAA;IACjB,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;IACrB,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;IAErB,IAAI,CAAC,CAAC,KAAK;QAAE,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;IACrC,IAAI,CAAC,CAAC,KAAK;QAAE,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;AACzC,CAAC;AAED,SAASA,MAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAA;;AAEjB,IAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;;AAGX,IAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,IAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;;AAGX,IAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,IAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;AAGjB,IAAA,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;;AAGd,IAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,IAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;;AAGlB,IAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,CAAC;AA+BD,SAAS,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAA;IACrC,IAAI,GAAG,GAAG,CAAC,CAAC;AACZ,IAAA,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,GAAG,EAAE;AAClD,QAAA,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACzD,CAAC,GAAG,CAAC,CAAC;KACT;AACD,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;AAED;AACA,SAAS,OAAO,CAAC,IAAI,EAAA;AACjB,IAAA,IAAI,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EACvB,MAAM,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,UAAU,EAAE,GAAG,EAAE,EACrD,SAAS,GAAG,CAAC,CAAC;AAElB,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAClC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE;AAAE,gBAAA,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACrE;AACD,QAAA,IAAI,CAAC,GAAG,CAAC,EAAE;YACP,SAAS,IAAI,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC;AAChC,YAAA,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAChC;KACJ;AACD,IAAA,OAAO,MAAM,CAAC;AAClB;;AC/nBA,MAAM,mBAAmB,GAAG,CAAC,CAAC;AAC9B,MAAM,kBAAkB,GAAG,CAAC,CAAC;AAC7B,MAAM,iBAAiB,GAAG,CAAC,CAAC;AAC5B,MAAM,mBAAmB,GAAG,CAAC,CAAC;AAC9B,MAAM,kBAAkB,GAAG,CAAC,CAAC;AAC7B,MAAM,iBAAiB,GAAG,CAAC,CAAC;AAC5B,MAAM,iBAAiB,GAAG,CAAC,CAAC;AAC5B,MAAM,oBAAoB,GAAG,CAAC,CAAC;AAC/B,MAAM,kBAAkB,GAAG,CAAC,CAAC;AAC7B,MAAM,uBAAuB,GAAG,CAAC,CAAC;AAClC,MAAM,wBAAwB,GAAG,EAAE,CAAC;AACpC,MAAM,wBAAwB,GAAG,EAAE,CAAC;AAEpC,SAAS,iBAAiB,CAAC,CAAe,EAAE,IAAU,EAAE,GAAS,EAAA;AAC7D,IAAA,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACR,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAEb,IAAA,IAAI,CAAC,IAAI,GAAG,EAAE;AACV,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;QACnD,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACjC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC;KACvC;SAAM;AACH,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;QACpD,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,CAAC;QAClC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC;KACvC;AAED,IAAA,IAAI,CAAC,IAAI,GAAG,EAAE;AACV,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;QACnD,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACjC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC;KACvC;SAAM;AACH,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;QACpD,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,CAAC;QAClC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC;KACvC;AACL,CAAC;AAED,IAAI,QAAQ,GAAG,IAAI,IAAI,EAAE,EACrB,OAAO,GAAG,IAAI,IAAI,EAAE,EACpB,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;AAE7B,MAAM,eAAe,CAAA;AAyDjB,IAAA,WAAA,CAAY,KAAa,EAAA;AACrB,QAAA,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC,WAAW,EAAE,CAAC;AAE1C,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AAEpB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAErB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAE3B,QAAA,IAAI,CAAC,wBAAwB,GAAG,EAAE,CAAC;AACnC,QAAA,IAAI,CAAC,sBAAsB,GAAG,EAAE,CAAC;;AAGjC,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;AAChC,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;;AAGvB,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;AAChC,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AACzB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;;AAG5B,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;AACxC,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;AACvC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AACrC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAE/B,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;AACxC,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;AACvC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AACrC,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;AACpC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAE/B,QAAA,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,uBAAuB,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC,wBAAwB,CAAC;QAClF,IAAI,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAChF,IAAI,CAAC,uBAAuB,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC;QAC9E,IAAI,CAAC,uBAAuB,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC,wBAAwB,CAAC;QAClF,IAAI,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAChF,IAAI,CAAC,uBAAuB,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC;QAC9E,IAAI,CAAC,uBAAuB,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC;QAC9E,IAAI,CAAC,uBAAuB,CAAC,oBAAoB,CAAC,GAAG,IAAI,CAAC,yBAAyB,CAAC;QACpF,IAAI,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAChF,IAAI,CAAC,uBAAuB,CAAC,uBAAuB,CAAC,GAAG,IAAI,CAAC,4BAA4B,CAAC;QAC1F,IAAI,CAAC,uBAAuB,CAAC,wBAAwB,CAAC,GAAG,IAAI,CAAC,6BAA6B,CAAC;QAC5F,IAAI,CAAC,uBAAuB,CAAC,wBAAwB,CAAC,GAAG,IAAI,CAAC,6BAA6B,CAAC;AAE5F,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;KACzE;AAED,IAAA,OAAO,cAAc,CACjB,OAA4B,EAC5B,QAAiB,EACjB,KAAW,EACX,YAAkB,EAClB,SAAiB,EACjB,WAAiB,EACjB,UAAkB,EAClB,eAAyB,EACzB,cAAwB,EACxB,SAAmB,EACnB,UAAoB,EACpB,SAAmB,EACnB,gBAA0B,EAC1B,YAAsB,EACtB,eAAyB,EACzB,UAAoB,EACpB,gBAA0B,EAC1B,eAAyB,EAAA;QAEzB,IAAI,KAAK,GAAG,CAAC,CAAC;AAEd,QAAA,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YACvB,KAAK,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAC9C,YAAA,UAAU,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SACjC;aAAM;AACH,YAAA,UAAU,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACzB;AAED,QAAA,IAAI,CAAC,GAAG,SAAS,EACb,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EACxC,CAAC,GAAG,UAAU,EACd,EAAE,GAAG,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,EACjE,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AAE9D,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,YAAA,IAAI,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAEtB,YAAA,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;gBACnB,SAAS;aACZ;YAED,IAAI,UAAU,GAAG,KAAK,CAAC;AACvB,YAAA,IAAI,IAAqB,CAAC;YAC1B,IAAI,QAAQ,EAAE;gBACV,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;aAChC;iBAAM;AACH,gBAAA,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,EACZ,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBAEjB,IAAI,CAAC,EAAE,EAAE;oBACL,EAAE,GAAG,EAAE,CAAC;iBACX;AAED,gBAAA,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;aACzD;AAED,YAAA,iBAAiB,CAAC,IAAoB,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;AAE3D,YAAA,eAAe,CAAC,IAAI,CAChB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CACzB,CAAC;AACF,YAAA,cAAc,CAAC,IAAI,CACf,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CACvB,CAAC;AAEF,YAAA,gBAAgB,CAAC,IAAI,CACjB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CACzB,CAAC;AACF,YAAA,eAAe,CAAC,IAAI,CAChB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CACvB,CAAC;AAEF,YAAA,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAE7B,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC9B,UAAU,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC5B,YAAA,SAAS,CAAC,IAAI,CACV,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CACzB,CAAC;AACF,YAAA,eAAe,CAAC,IAAI,CAChB,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAC7B,CAAC;AACF,YAAA,gBAAgB,CAAC,IAAI,CACjB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CACzB,CAAC;AAEF,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAClC,gBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAElB,gBAAA,iBAAiB,CAAC,GAAmB,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;AAE1D,gBAAA,eAAe,CAAC,IAAI,CAChB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CACzB,CAAC;AACF,gBAAA,cAAc,CAAC,IAAI,CACf,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CACvB,CAAC;AAEF,gBAAA,gBAAgB,CAAC,IAAI,CACjB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CACzB,CAAC;AACF,gBAAA,eAAe,CAAC,IAAI,CAChB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CACvB,CAAC;AAEF,gBAAA,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBAC7B,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC9B,UAAU,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC5B,gBAAA,SAAS,CAAC,IAAI,CACV,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CACzB,CAAC;AACF,gBAAA,eAAe,CAAC,IAAI,CAChB,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAC7B,CAAC;AACF,gBAAA,gBAAgB,CAAC,IAAI,CACjB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CACzB,CAAC;AACF,gBAAA,UAAU,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;aACvD;AAED,YAAA,IAAI,KAAsB,CAAC;YAC3B,IAAI,QAAQ,EAAE;AACV,gBAAA,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAChB,gBAAA,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,GAAG,CAAC,EAAE,UAAU,GAAG,CAAC,EAAE,UAAU,GAAG,CAAC,CAAC,CAAC;aAC/E;iBAAM;gBACH,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,EAC1B,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAE/B,IAAI,CAAC,EAAE,EAAE;oBACL,EAAE,GAAG,EAAE,CAAC;iBACX;AAED,gBAAA,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACvD,gBAAA,UAAU,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;aAC/D;AAED,YAAA,iBAAiB,CAAC,KAAqB,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;AAE5D,YAAA,eAAe,CAAC,IAAI,CAChB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CACzB,CAAC;AACF,YAAA,cAAc,CAAC,IAAI,CACf,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CACvB,CAAC;AAEF,YAAA,gBAAgB,CAAC,IAAI,CACjB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EACtB,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CACzB,CAAC;AACF,YAAA,eAAe,CAAC,IAAI,CAChB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EACpB,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CACvB,CAAC;AAEF,YAAA,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC7B,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC9B,UAAU,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC5B,YAAA,SAAS,CAAC,IAAI,CACV,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CACzB,CAAC;AACF,YAAA,eAAe,CAAC,IAAI,CAChB,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAC7B,CAAC;AACF,YAAA,gBAAgB,CAAC,IAAI,CACjB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CACzB,CAAC;YAEF,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;gBACxB,KAAK,IAAI,CAAC,CAAC;AACX,gBAAA,UAAU,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;aACjC;SACJ;KACJ;AAEM,IAAA,aAAa,CAAC,OAAgB,EAAA;AACjC,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,OAAO,EAAE,CAAC;AACf,QAAA,IAAI,OAAO,CAAC,aAAa,EAAE,EAAE;YACzB,IAAI,CAAC,MAAM,EAAE,CAAC;SACjB;KACJ;AAED;;;AAGG;AACI,IAAA,GAAG,CAAC,QAAkB,EAAA;;;AAGzB,QAAA,IAAI,QAAQ,CAAC,aAAa,KAAK,CAAC,CAAC,EAAE;AAC/B,YAAA,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;YACzB,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;AAEjD,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEhC,YAAA,IAAI,YAAY,GAAG,QAAQ,CAAC,OAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;AAEpE,YAAA,QAAQ,CAAC,qBAAqB,GAAG,EAAE,CAAC;AACpC,YAAA,QAAQ,CAAC,oBAAoB,GAAG,EAAE,CAAC;AACnC,YAAA,QAAQ,CAAC,qBAAqB,GAAG,EAAE,CAAC;AACpC,YAAA,QAAQ,CAAC,oBAAoB,GAAG,EAAE,CAAC;YAEnC,IAAK,QAAQ,CAAC,YAAoC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE;gBAC1D,IAAI,QAAQ,CAAC,IAAI,KAAK,gBAAgB,CAAC,OAAO,EAAE;AAC5C,oBAAA,IAAI,WAAW,GAAG,QAAQ,CAAC,YAAmC,CAAC;oBAC/D,IAAI,EAAE,GAAwB,EAAE,CAAC;AACjC,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,wBAAA,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACX,wBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC5C,4BAAA,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAACC,WAAoB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEC,WAAoB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBACvG;qBACJ;AAED,oBAAA,IAAI,IAAI,GAAG,OAAO,CAAC,EAAE,CAAC,CAAC;AACvB,oBAAA,IAAI,OAAO,GAAa,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBAE7D,QAAQ,CAAC,yBAAyB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;oBACvE,QAAQ,CAAC,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;AAE7D,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,wBAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,yBAAyB,GAAG,GAAG,CAAC,CAAC;qBACjF;AAED,oBAAA,IAAI,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC;AAEtC,oBAAA,IAAI,YAAY,GAAG,EAAE,EACjB,WAAW,GAAG,EAAE,CAAC;AAErB,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;wBACjD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAC1D,wBAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;qBACrF;AAED,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBAC3C,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;AACnD,wBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAChC,wBAAA,WAAW,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;qBAClC;AAED,oBAAA,QAAQ,CAAC,qBAAqB,GAAG,YAAY,CAAC;AAC9C,oBAAA,QAAQ,CAAC,oBAAoB,GAAG,WAAW,CAAC;AAE5C,oBAAA,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,qBAAqB,EAAE,YAAY,CAAC,CAAC;AAChF,oBAAA,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,oBAAoB,EAAE,WAAW,CAAC,CAAC;oBAE7E,QAAQ,CAAC,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;AACpD,oBAAA,QAAQ,CAAC,kBAAkB,GAAG,OAAO,CAAC,MAAM,CAAC;;oBAG7C,QAAQ,CAAC,yBAAyB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;oBACvE,QAAQ,CAAC,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3D,QAAQ,CAAC,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;oBAC7D,QAAQ,CAAC,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3D,QAAQ,CAAC,0BAA0B,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;AAEjE,oBAAA,eAAe,CAAC,cAAc,CAC1B,EAAE,EACF,IAAI,EACJ,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzB,YAAY,EACZ,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzB,QAAQ,CAAC,MAAM,CAAC,WAAW,EAC3B,QAAQ,CAAC,MAAM,CAAC,WAAW,EAC3B,IAAI,CAAC,qBAAqB,EAC1B,IAAI,CAAC,oBAAoB,EACzB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,iBAAiB,EACtB,IAAI,CAAC,YAAY,EACjB,QAAQ,CAAC,qBAAqB,EAC9B,QAAQ,CAAC,oBAAoB,CAChC,CAAC;AAEF,oBAAA,QAAQ,CAAC,mBAAmB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,GAAG,QAAQ,CAAC,yBAAyB,CAAC;AACtG,oBAAA,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,QAAQ,CAAC,uBAAuB,CAAC;AACxF,oBAAA,QAAQ,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,QAAQ,CAAC,wBAAwB,CAAC;AAC3F,oBAAA,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,QAAQ,CAAC,uBAAuB,CAAC;AACxF,oBAAA,QAAQ,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,QAAQ,CAAC,0BAA0B,CAAC;iBAEpG;qBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,gBAAgB,CAAC,YAAY,EAAE;AAExD,oBAAA,IAAI,WAAW,GAAG,QAAQ,CAAC,YAAwC,CAAC;AACpE,oBAAA,IAAI,QAAQ,GAAa,EAAE,EACvB,OAAO,GAAa,EAAE,CAAC;;oBAG3B,QAAQ,CAAC,yBAAyB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;oBACvE,QAAQ,CAAC,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3D,QAAQ,CAAC,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;oBAC7D,QAAQ,CAAC,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3D,QAAQ,CAAC,0BAA0B,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;AAEjE,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,wBAAA,IAAI,GAAG,GAAwB,WAAW,CAAC,CAAC,CAAC,CAAC;wBAC9C,IAAI,EAAE,GAAwB,EAAE,CAAC;AACjC,wBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACjC,4BAAA,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;4BACX,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/C,gCAAA,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAACD,WAAoB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEC,WAAoB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;6BACvF;yBACJ;AACD,wBAAA,IAAI,IAAI,GAAG,OAAO,CAAC,EAAE,CAAC,CAAC;AACvB,wBAAA,IAAI,WAAW,GAAa,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAEjE,wBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,4BAAA,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;yBACxD;wBAED,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;AAE7C,wBAAA,eAAe,CAAC,cAAc,CAC1B,EAAE,EACF,IAAI,EACJ,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzB,YAAY,EACZ,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzB,QAAQ,CAAC,MAAM,CAAC,WAAW,EAC3B,QAAQ,CAAC,MAAM,CAAC,WAAW,EAC3B,IAAI,CAAC,qBAAqB,EAC1B,IAAI,CAAC,oBAAoB,EACzB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,iBAAiB,EACtB,IAAI,CAAC,YAAY,EACjB,QAAQ,CAAC,qBAAqB,EAC9B,QAAQ,CAAC,oBAAoB,CAChC,CAAC;qBACL;oBAED,QAAQ,CAAC,yBAAyB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;oBACvE,QAAQ,CAAC,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;AAE7D,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,wBAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,yBAAyB,GAAG,GAAG,CAAC,CAAC;qBACjF;AAED,oBAAA,IAAI,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC;AAEtC,oBAAA,IAAI,YAAY,GAAG,EAAE,EACjB,WAAW,GAAG,EAAE,CAAC;AAErB,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;wBAC5C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAC1D,wBAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CACxB,YAAY,CAAC,CAAC,EACd,YAAY,CAAC,CAAC,EACd,YAAY,CAAC,CAAC,EACd,GAAG,CACN,CAAC;qBACL;AAED,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBACtC,mBAAmB,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;AAC9C,wBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAChC,wBAAA,WAAW,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;qBAClC;AAED,oBAAA,QAAQ,CAAC,qBAAqB,GAAG,YAAY,CAAC;AAC9C,oBAAA,QAAQ,CAAC,oBAAoB,GAAG,WAAW,CAAC;AAE5C,oBAAA,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,qBAAqB,EAAE,YAAY,CAAC,CAAC;AAChF,oBAAA,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,oBAAoB,EAAE,WAAW,CAAC,CAAC;AAE7E,oBAAA,QAAQ,CAAC,mBAAmB,GAAG,QAAQ,CAAC,MAAM,CAAC;AAC/C,oBAAA,QAAQ,CAAC,kBAAkB,GAAG,OAAO,CAAC,MAAM,CAAC;AAE7C,oBAAA,QAAQ,CAAC,mBAAmB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,GAAG,QAAQ,CAAC,yBAAyB,CAAC;AACtG,oBAAA,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,QAAQ,CAAC,uBAAuB,CAAC;AACxF,oBAAA,QAAQ,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,QAAQ,CAAC,wBAAwB,CAAC;AAC3F,oBAAA,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,QAAQ,CAAC,uBAAuB,CAAC;AACxF,oBAAA,QAAQ,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,QAAQ,CAAC,0BAA0B,CAAC;iBAEpG;qBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,gBAAgB,CAAC,UAAU,EAAE;AAEtD,oBAAA,IAAI,WAAW,GAA2B,QAAQ,CAAC,YAAsC,CAAC;oBAC1F,IAAI,EAAE,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AACvC,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,wBAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAACD,WAAoB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEC,WAAoB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBAC9F;;oBAGD,QAAQ,CAAC,yBAAyB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;oBACvE,QAAQ,CAAC,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3D,QAAQ,CAAC,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;oBAC7D,QAAQ,CAAC,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3D,QAAQ,CAAC,0BAA0B,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;AAEjE,oBAAA,eAAe,CAAC,cAAc,CAC1B,CAAC,EAAE,CAAC,EACJ,KAAK,EACL,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzB,YAAY,EACZ,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzB,QAAQ,CAAC,MAAM,CAAC,WAAW,EAC3B,QAAQ,CAAC,MAAM,CAAC,WAAW,EAC3B,IAAI,CAAC,qBAAqB,EAC1B,IAAI,CAAC,oBAAoB,EACzB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,iBAAiB,EACtB,IAAI,CAAC,YAAY,EACjB,QAAQ,CAAC,qBAAqB,EAC9B,QAAQ,CAAC,oBAAoB,CAChC,CAAC;AAEF,oBAAA,QAAQ,CAAC,mBAAmB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,GAAG,QAAQ,CAAC,yBAAyB,CAAC;AACtG,oBAAA,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,QAAQ,CAAC,uBAAuB,CAAC;AACxF,oBAAA,QAAQ,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,QAAQ,CAAC,wBAAwB,CAAC;AAC3F,oBAAA,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,QAAQ,CAAC,uBAAuB,CAAC;AACxF,oBAAA,QAAQ,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,QAAQ,CAAC,0BAA0B,CAAC;iBAEpG;qBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,gBAAgB,CAAC,eAAe,EAAE;AAE3D,oBAAA,IAAI,WAAW,GAAG,QAAQ,CAAC,YAA2C,CAAC;oBACvE,IAAI,EAAE,GAAgC,EAAE,CAAC;AACzC,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,wBAAA,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACX,wBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC5C,4BAAA,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAACD,WAAoB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEC,WAAoB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBACvG;qBACJ;;oBAGD,QAAQ,CAAC,yBAAyB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;oBACvE,QAAQ,CAAC,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3D,QAAQ,CAAC,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;oBAC7D,QAAQ,CAAC,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC3D,QAAQ,CAAC,0BAA0B,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;AAEjE,oBAAA,eAAe,CAAC,cAAc,CAC1B,EAAE,EACF,KAAK,EACL,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzB,YAAY,EACZ,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzB,QAAQ,CAAC,MAAM,CAAC,WAAW,EAC3B,QAAQ,CAAC,MAAM,CAAC,WAAW,EAC3B,IAAI,CAAC,qBAAqB,EAC1B,IAAI,CAAC,oBAAoB,EACzB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,iBAAiB,EACtB,IAAI,CAAC,YAAY,EACjB,QAAQ,CAAC,qBAAqB,EAC9B,QAAQ,CAAC,oBAAoB,CAChC,CAAC;AAEF,oBAAA,QAAQ,CAAC,mBAAmB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,GAAG,QAAQ,CAAC,yBAAyB,CAAC;AACtG,oBAAA,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,QAAQ,CAAC,uBAAuB,CAAC;AACxF,oBAAA,QAAQ,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,QAAQ,CAAC,wBAAwB,CAAC;AAC3F,oBAAA,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,QAAQ,CAAC,uBAAuB,CAAC;AACxF,oBAAA,QAAQ,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,QAAQ,CAAC,0BAA0B,CAAC;iBACpG;aACJ;;AAGD,YAAA,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAC;AAErC,YAAA,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACjF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;YAC5C,IAAI,CAAC,OAAO,EAAE,CAAC;SAClB;KACJ;AAEM,IAAA,MAAM,CAAC,QAAkB,EAAA;AAE5B,QAAA,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC;AACrC,QAAA,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YACd,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;;;AAKlC,YAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,QAAQ,CAAC,yBAAyB,EAAE,QAAQ,CAAC,mBAAmB,CAAC,CAAC;AACpG,YAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,QAAQ,CAAC,yBAAyB,EAAE,QAAQ,CAAC,mBAAmB,CAAC,CAAC;AAEnG,YAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,yBAAyB,GAAG,CAAC,EAAE,QAAQ,CAAC,mBAAmB,GAAG,CAAC,CAAC,CAAC;AAClG,YAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,yBAAyB,GAAG,CAAC,EAAE,QAAQ,CAAC,mBAAmB,GAAG,CAAC,CAAC,CAAC;AACzG,YAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,wBAAwB,EAAE,QAAQ,CAAC,kBAAkB,CAAC,CAAC;AAEzF,YAAA,IAAI,EAAE,GAAG,QAAQ,CAAC,mBAAmB,GAAG,GAAG,CAAC;AAC5C,YAAA,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,wBAAwB,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/E,gBAAA,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;aAC9B;;;AAKD,YAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,QAAQ,CAAC,yBAAyB,EAAE,QAAQ,CAAC,mBAAmB,CAAC,CAAC;AACpG,YAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,QAAQ,CAAC,yBAAyB,EAAE,QAAQ,CAAC,mBAAmB,CAAC,CAAC;AAEnG,YAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,uBAAuB,EAAE,QAAQ,CAAC,iBAAiB,CAAC,CAAC;AACtF,YAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,uBAAuB,EAAE,QAAQ,CAAC,iBAAiB,CAAC,CAAC;AACtF,YAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,uBAAuB,EAAE,QAAQ,CAAC,iBAAiB,CAAC,CAAC;AAC7F,YAAA,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,uBAAuB,EAAE,QAAQ,CAAC,iBAAiB,CAAC,CAAC;AAC5F,YAAA,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,0BAA0B,EAAE,QAAQ,CAAC,oBAAoB,CAAC,CAAC;AAC/F,YAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,0BAA0B,EAAE,QAAQ,CAAC,oBAAoB,CAAC,CAAC;AAC7F,YAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,wBAAwB,EAAE,QAAQ,CAAC,kBAAkB,CAAC,CAAC;AAEzF,YAAA,EAAE,GAAG,QAAQ,CAAC,mBAAmB,GAAG,GAAG,CAAC;AACxC,YAAA,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,wBAAwB,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/E,gBAAA,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;aAC9B;;AAGD,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACzB,YAAA,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnC,gBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAEd,gBAAA,EAAE,CAAC,aAAa,GAAG,CAAC,CAAC;AACrB,gBAAA,EAAE,CAAC,yBAAyB,IAAI,QAAQ,CAAC,mBAAmB,CAAC;AAC7D,gBAAA,EAAE,CAAC,wBAAwB,IAAI,QAAQ,CAAC,kBAAkB,CAAC;AAE3D,gBAAA,EAAE,CAAC,yBAAyB,IAAI,QAAQ,CAAC,mBAAmB,CAAC;AAC7D,gBAAA,EAAE,CAAC,uBAAuB,IAAI,QAAQ,CAAC,iBAAiB,CAAC;AACzD,gBAAA,EAAE,CAAC,uBAAuB,IAAI,QAAQ,CAAC,iBAAiB,CAAC;AACzD,gBAAA,EAAE,CAAC,0BAA0B,IAAI,QAAQ,CAAC,oBAAoB,CAAC;AAC/D,gBAAA,EAAE,CAAC,wBAAwB,IAAI,QAAQ,CAAC,kBAAkB,CAAC;aAC9D;AAGD,YAAA,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC;AAE/B,YAAA,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;AACzB,YAAA,QAAQ,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AAE5B,YAAA,QAAQ,CAAC,qBAAqB,GAAG,EAAE,CAAC;AACpC,YAAA,QAAQ,CAAC,oBAAoB,GAAG,EAAE,CAAC;AACnC,YAAA,QAAQ,CAAC,mBAAmB,GAAG,CAAC,CAAC,CAAC;AAClC,YAAA,QAAQ,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;AACjC,YAAA,QAAQ,CAAC,yBAAyB,GAAG,CAAC,CAAC,CAAC;AACxC,YAAA,QAAQ,CAAC,wBAAwB,GAAG,CAAC,CAAC,CAAC;AAEvC,YAAA,QAAQ,CAAC,qBAAqB,GAAG,EAAE,CAAC;AACpC,YAAA,QAAQ,CAAC,oBAAoB,GAAG,EAAE,CAAC;AACnC,YAAA,QAAQ,CAAC,mBAAmB,GAAG,CAAC,CAAC,CAAC;AAClC,YAAA,QAAQ,CAAC,iBAAiB,GAAG,CAAC,CAAC,CAAC;AAChC,YAAA,QAAQ,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;AACjC,YAAA,QAAQ,CAAC,iBAAiB,GAAG,CAAC,CAAC,CAAC;AAChC,YAAA,QAAQ,CAAC,oBAAoB,GAAG,CAAC,CAAC,CAAC;AACnC,YAAA,QAAQ,CAAC,yBAAyB,GAAG,CAAC,CAAC,CAAC;AACxC,YAAA,QAAQ,CAAC,uBAAuB,GAAG,CAAC,CAAC,CAAC;AACtC,YAAA,QAAQ,CAAC,wBAAwB,GAAG,CAAC,CAAC,CAAC;AACvC,YAAA,QAAQ,CAAC,0BAA0B,GAAG,CAAC,CAAC,CAAC;AACzC,YAAA,QAAQ,CAAC,uBAAuB,GAAG,CAAC,CAAC,CAAC;YAEtC,CAAC,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,CAAC;YACxG,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;YAElD,IAAI,CAAC,OAAO,EAAE,CAAC;SAClB;KACJ;IAES,mBAAmB,CAAC,QAAkB,EAAE,QAAc,EAAA;AAC5D,QAAA,IAAI,QAAQ,CAAC,KAAK,EAAE;AAChB,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;AAC1B,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC5C,IAAI,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC3B,gBAAA,IAAI,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,EAAE;AACjD,oBAAA,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;oBACvC,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAClC,oBAAA,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE;AAChB,wBAAA,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAKpC,SAAkB,EAAE;AAClD,4BAAA,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;yBAC5B;6BAAM;4BACH,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC,YAAY,IAAI,QAAQ,CAAC,aAAa,CAAC;AAC1D,4BAAA,CAAC,CAAC,OAAO,GAAG,KAAK,CAAC;AAClB,4BAAA,CAAC,CAAC,cAAc,GAAG,CAAC,CAAC,OAAO,CAAC;AAC7B,4BAAA,CAAC,CAAC,kBAAkB,GAAG,CAAC,CAAC,WAAW,CAAC;yBACxC;AAED,wBAAA,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC;qBACjC;iBACJ;aACJ;SACJ;KACJ;IAES,sBAAsB,CAAC,MAAc,EAAE,QAAc,EAAA;AAC3D,QAAA,IAAI,QAAQ,CAAC,KAAK,EAAE;AAChB,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;AAC3B,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC5C,IAAI,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC3B,gBAAA,IAAI,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,EAAE;AAC/C,oBAAA,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;oBACxC,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAClC,oBAAA,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE;AAChB,wBAAA,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;;;;;qBAK5B;iBACJ;aACJ;SACJ;KACJ;AAES,IAAA,kBAAkB,CAAC,QAAc,EAAA;AACvC,QAAA,IAAI,CAAC,CAAC;AAEN,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,wBAAwB,CAAC;AACtC,QAAA,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC3B,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SAC/C;AAED,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC;AACjC,QAAA,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC3B,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SAC5C;KACJ;IAES,aAAa,GAAA;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;QAC5B,IAAI,CAAC,EAAE;AACH,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,gBAAgB,CAAC,YAAY,CAAC;AACzC,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAChC,IAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;aAClC;;;;SAIJ;AACD,QAAA,IAAI,CAAC,mBAAmB,CAAC,MAAM,GAAG,CAAC,CAAC;AACpC,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAE3B,QAAA,IAAI,CAAC,wBAAwB,CAAC,MAAM,GAAG,CAAC,CAAC;AACzC,QAAA,IAAI,CAAC,wBAAwB,GAAG,EAAE,CAAC;AACnC,QAAA,IAAI,CAAC,sBAAsB,GAAG,EAAE,CAAC;KACpC;IAES,OAAO,GAAA;AACb,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;QACpC,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;SAClC;KACJ;IAEM,MAAM,GAAA;AACT,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,UAAU,GAAG,KAAK,CAAC;AACvB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YACpC,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE;oBACzB,UAAU,GAAG,IAAI,CAAC;oBAClB,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3C,oBAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;iBACnC;aACJ;AACD,YAAA,UAAU,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;SACtC;KACJ;AAEM,IAAA,qBAAqB,CAAC,QAAkB,EAAA;AAC3C,QAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC;QAE7C,IAAI,CAAC,GAAG,IAAI,CAAC,qBAAqB,EAC9B,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;AAElC,QAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,mBAAmB,CAAC;AACrC,QAAA,IAAI,GAAG,GAAG,QAAQ,CAAC,yBAAyB,CAAC;AAC7C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACnD,YAAA,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;SACrD;AAED,QAAA,CAAC,GAAG,IAAI,CAAC,qBAAqB,CAAC;AAC/B,QAAA,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;AAE9B,QAAA,CAAC,GAAG,QAAQ,CAAC,mBAAmB,CAAC;AACjC,QAAA,GAAG,GAAG,QAAQ,CAAC,yBAAyB,CAAC;AACzC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACnD,YAAA,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;SACrD;AAED,QAAA,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC;AACjD,QAAA,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC;AAEjD,QAAA,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;KAC/C;IAEM,eAAe,CAAC,QAAkB,EAAE,KAAW,EAAA;QAClD,IAAI,KAAK,GAAG,QAAQ,CAAC,yBAAyB,GAAG,CAAC;QAC9C,IAAI,GAAG,KAAK,GAAG,QAAQ,CAAC,mBAAmB,GAAG,CAAC,CAAC;AACpD,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACzB,QAAA,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,EAAE;AAClC,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACf,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;SACtB;AACD,QAAA,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC;AAC/C,QAAA,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;KAC/C;IAEM,qBAAqB,CAAC,QAAkB,EAAE,KAAW,EAAA;AACxD,QAAA,IAAI,KAAK,GAAG,QAAQ,CAAC,uBAAuB,EACxC,IAAI,GAAG,KAAK,GAAG,QAAQ,CAAC,iBAAiB,CAAC;AAC9C,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAC/B,QAAA,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,EAAE;AAClC,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACf,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;SACtB;AACD,QAAA,IAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,GAAG,IAAI,CAAC;AACrD,QAAA,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;KAC/C;IAEM,eAAe,CAAC,QAAkB,EAAE,KAAW,EAAA;AAClD,QAAA,IAAI,KAAK,GAAG,QAAQ,CAAC,uBAAuB,EACxC,IAAI,GAAG,KAAK,GAAG,QAAQ,CAAC,iBAAiB,CAAC;AAC9C,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACzB,QAAA,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,EAAE;AAClC,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACf,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;SACtB;AACD,QAAA,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC;AAC/C,QAAA,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;KAC/C;IAEM,gBAAgB,CAAC,QAAkB,EAAE,KAAa,EAAA;;;;;;;;;;KAUxD;IAEM,mBAAmB,CAAC,QAAkB,EAAE,KAAa,EAAA;AACxD,QAAA,IAAI,KAAK,GAAG,QAAQ,CAAC,0BAA0B,EAC3C,IAAI,GAAG,KAAK,GAAG,QAAQ,CAAC,oBAAoB,CAAC;AACjD,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;AAC5B,QAAA,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;AAC/B,YAAA,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;SAChB;AACD,QAAA,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,GAAG,IAAI,CAAC;AAClD,QAAA,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;KAC/C;AAEM,IAAA,YAAY,CAAC,QAAkB,EAAA;AAClC,QAAA,IAAI,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,wBAAwB,EAAE,QAAQ,CAAC,kBAAkB,CAAC,CAAC;AAC3G,QAAA,IAAI,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,wBAAwB,EAAE,QAAQ,CAAC,kBAAkB,CAAC,CAAC;QAE3G,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACzB,QAAA,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpD,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACd,YAAA,EAAE,CAAC,aAAa,GAAG,CAAC,CAAC;AACrB,YAAA,EAAE,CAAC,wBAAwB,IAAI,QAAQ,CAAC,kBAAkB,CAAC;AAC3D,YAAA,EAAE,CAAC,wBAAwB,IAAI,QAAQ,CAAC,kBAAkB,CAAC;SAC9D;QAED,QAAQ,CAAC,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;QAC7D,QAAQ,CAAC,wBAAwB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;QAE7D,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;AACjD,QAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEhC,QAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;AAC7D,QAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;AAE7D,QAAA,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC;AAChD,QAAA,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC;AAEhD,QAAA,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;KAC/C;IAEM,wBAAwB,GAAA;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,2BAA4B,CAAC,CAAC;QACtD,IAAI,CAAC,2BAA2B,GAAG,CAAC,CAAC,iBAAiB,CAClD,IAAI,YAAY,CAAC,IAAI,CAAC,qBAAqB,CAAC,EAC5C,CAAC,EACD,IAAI,CAAC,qBAAqB,CAAC,MAAM,GAAG,CAAC,CACxC,CAAC;QAEF,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,0BAA2B,CAAC,CAAC;QACrD,IAAI,CAAC,0BAA0B,GAAG,CAAC,CAAC,iBAAiB,CACjD,IAAI,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAC3C,CAAC,EACD,IAAI,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,CACvC,CAAC;KACL;IAEM,uBAAuB,GAAA;AAC1B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;QAC7C,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,wBAAwB,CAChD,IAAI,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,EAClC,CAAC,EACD,IAAI,CAAC,YAAY,CAAC,MAAM,CAC3B,CAAC;KACL;IAEM,sBAAsB,GAAA;AACzB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAkB,CAAC,CAAC;QAC5C,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,iBAAiB,CACxC,IAAI,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,EAClC,CAAC,EACD,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAC9B,CAAC;KACL;IAEM,6BAA6B,GAAA;AAChC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAyB,CAAC,CAAC;QACnD,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC,iBAAiB,CAC/C,IAAI,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,EACzC,CAAC,EACD,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CACrC,CAAC;KACL;IAEM,wBAAwB,GAAA;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,2BAA4B,CAAC,CAAC;QACtD,IAAI,CAAC,2BAA2B,GAAG,CAAC,CAAC,iBAAiB,CAClD,IAAI,YAAY,CAAC,IAAI,CAAC,qBAAqB,CAAC,EAC5C,CAAC,EACD,IAAI,CAAC,qBAAqB,CAAC,MAAM,GAAG,CAAC,CACxC,CAAC;QAEF,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,0BAA2B,CAAC,CAAC;QACrD,IAAI,CAAC,0BAA0B,GAAG,CAAC,CAAC,iBAAiB,CACjD,IAAI,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAC3C,CAAC,EACD,IAAI,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,CACvC,CAAC;KACL;IAEM,uBAAuB,GAAA;AAC1B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;QAC7C,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,wBAAwB,CAChD,IAAI,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,EAClC,CAAC,EACD,IAAI,CAAC,YAAY,CAAC,MAAM,CAC3B,CAAC;KACL;IAEM,sBAAsB,GAAA;AACzB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAkB,CAAC,CAAC;QAC5C,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,iBAAiB,CACxC,IAAI,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,EAClC,CAAC,EACD,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAC9B,CAAC;KACL;IAEM,sBAAsB,GAAA;AACzB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAkB,CAAC,CAAC;QAC5C,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,iBAAiB,CACxC,IAAI,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,EAClC,CAAC,EACD,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAC9B,CAAC;KACL;IAEM,6BAA6B,GAAA;AAChC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAyB,CAAC,CAAC;QACnD,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC,iBAAiB,CAC/C,IAAI,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,EACzC,CAAC,EACD,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CACrC,CAAC;KACL;IAEM,yBAAyB,GAAA;AAC5B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,oBAAqB,CAAC,CAAC;QAC/C,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC,iBAAiB,CAC3C,IAAI,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,EACrC,CAAC,EACD,IAAI,CAAC,cAAc,CAAC,MAAM,CAC7B,CAAC;KACL;IAEM,uBAAuB,GAAA;AAC1B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;QAC7C,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,iBAAiB,CACzC,IAAI,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,EACnC,CAAC,EACD,IAAI,CAAC,YAAY,CAAC,MAAM,CAC3B,CAAC;KACL;IAEM,4BAA4B,GAAA;AAC/B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QACvB,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAwB,CAAC,CAAC;QAClD,IAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC,iBAAiB,CAC9C,IAAI,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,EACxC,CAAC,EACD,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CACpC,CAAC;KACL;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;AAChC,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAE7B,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;AAChC,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AACzB,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAC5B,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QAEvB,IAAI,CAAC,cAAc,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;AACxC,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;AACvC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AAErC,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;AACxC,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;AACvC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AACrC,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;AACpC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAE/B,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAE3B,QAAA,IAAI,CAAC,wBAAwB,GAAG,EAAE,CAAC;AACnC,QAAA,IAAI,CAAC,sBAAsB,GAAG,EAAE,CAAC;QAEjC,IAAI,CAAC,OAAO,EAAE,CAAC;KAClB;IAEM,cAAc,GAAA;AACjB,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE;AAErD,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,EACxC,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;YAEf,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,2BAA4B,CAAC,CAAC;AACnD,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,0BAA2B,CAAC,CAAC;AAClD,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;AAC1C,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAkB,CAAC,CAAC;AACzC,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAyB,CAAC,CAAC;AAEhD,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;AAClD,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;AACjD,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;AACzC,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;AACxC,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;AACxC,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;AAC/C,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;AAC3C,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;AAC9C,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;aAC5C;SACJ;KACJ;;AA9pCM,eAAW,CAAA,WAAA,GAAW,CAAC;;AC9BlC;;;;AAIG;AACH,SAAS,oBAAoB,CAAC,QAAoC,EAAA;IAC9D,IAAI,GAAG,GAAa,EAAE,CAAC;AACvB,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACtC,QAAA,IAAI,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;AACrB,QAAA,IAAK,EAAa,CAAC,YAAY,KAAK,QAAQ,EAAE;AAC1C,YAAA,GAAG,CAAC,IAAI,CAAC,EAAY,CAAC,CAAC;SAC1B;aAAM;YACH,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,EAAmB,CAAC,CAAC,CAAC;SAC7C;KACJ;AACD,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCG;AACH,MAAM,MAAO,SAAQ,KAAK,CAAA;IAsEtB,WAAY,CAAA,IAAoB,EAAE,OAAA,GAAyB,EAAE,EAAA;AACzD,QAAA,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;;QAGrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;AAEvD,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAErB,QAAA,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAE9B,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,IAAI,CAAC8B,KAAU,EAAEA,KAAU,EAAEA,KAAU,CAAC,CAAC;AAEvF,QAAA,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,WAAW,KAAK,SAAS,GAAG,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;AAGnF,QAAA,IAAI,YAAY,GAAiB,IAAI,YAAY,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AACnE,QAAA,IAAI,OAAO,CAAC,YAAY,KAAK,SAAS,EAAE;AACpC,YAAA,IAAI,OAAO,CAAC,YAAY,YAAY,KAAK,EAAE;AACvC,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAC7D,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAC7D,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;aAChE;AAAM,iBAAA,IAAI,OAAO,OAAO,CAAC,YAAY,KAAK,QAAQ,EAAE;AACjD,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;AACvC,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;AACvC,gBAAA,YAAY,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC;aAC1C;SACJ;AAED,QAAA,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;AAEjC,QAAA,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,KAAK,SAAS,GAAG,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;QAEhE,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,KAAK,CAAC;QAEpD,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,IAAI,KAAK,CAAC;QAE1D,IAAI,CAAC,SAAS,GAAG,oBAAoB,CAAC,OAAO,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC;QAE9D,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,eAAe,IAAI,EAAE,CAAC;AAEtD,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,gBAAgB,CAAC;YAC/C,cAAc,EAAE,IAAI,CAAC,cAAc;AACtC,SAAA,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;AAErD,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,gBAAgB,CAAC;YAClD,cAAc,EAAE,IAAI,CAAC,cAAc;AACtC,SAAA,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;AAExD,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,gBAAgB,CAAC;YACnD,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,WAAW,EAAE,IAAI,CAAC,YAAY;AACjC,SAAA,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QAEzD,IAAI,CAAC,gBAAgB,GAAG,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QAElD,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,YAAY,IAAI,EAAE,CAAC;AAEhD,QAAA,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC;AAE3C,QAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAEjC,QAAA,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,IAAI,SAAS,GAAG,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;AAErG,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC;KAC9C;AAED,IAAA,IAAW,WAAW,GAAA;QAClB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;IAED,IAAW,WAAW,CAAC,CAAU,EAAA;AAC7B,QAAA,IAAI,CAAC,KAAK,IAAI,CAAC,YAAY,EAAE;AACzB,YAAA,IAAI,CAAC,0BAA0B,CAAC,WAAW,GAAG,CAAC,CAAC;AAChD,YAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;SACzB;KACJ;AAED,IAAA,IAAW,eAAe,GAAA;QACtB,OAAO,IAAI,CAAC,gBAAgB,CAAC;KAChC;AAED,IAAA,IAAoB,YAAY,GAAA;AAC5B,QAAA,OAAO,QAAQ,CAAC;KACnB;IAEkB,YAAY,GAAA;AAC3B,QAAA,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;KAC9B;AAED;;;;;AAKG;AACa,IAAA,KAAK,CAAC,MAAc,EAAA;AAChC,QAAA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACf,YAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC3B,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,MAAM,CAAC,QAAS,CAAC,OAAO,CAAC,CAAC;YAC9D,IAAI,CAAC,yBAAyB,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YACnD,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAChD,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AACpD,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACpC;KACJ;IAEe,MAAM,GAAA;QAClB,KAAK,CAAC,MAAM,EAAE,CAAC;AACf,QAAA,IAAI,CAAC,yBAAyB,CAAC,MAAM,EAAE,CAAC;AACxC,QAAA,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,CAAC;AACrC,QAAA,IAAI,CAAC,0BAA0B,CAAC,MAAM,EAAE,CAAC;AACzC,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;AAIG;IACI,WAAW,GAAA;QACd,OAAQ,EAAe,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KAClD;AAED;;;;;;AAMG;AACI,IAAA,GAAG,CAAC,MAAc,EAAE,QAAA,GAAoB,KAAK,EAAA;QAChD,IAAI,EAAE,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,iBAAiB,CAAC,EAAE;AAC9C,YAAA,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;YACrB,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;;AAE3C,YAAA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC5B,YAAA,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;SACzC;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;;;AAOG;AACI,IAAA,MAAM,CAAC,MAAc,EAAE,KAAa,EAAE,WAAoB,KAAK,EAAA;QAClE,IAAI,EAAE,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,iBAAiB,CAAC,EAAE;AAC9C,YAAA,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;AACrB,YAAA,MAAM,CAAC,WAAW,GAAG,KAAK,CAAC;;YAE3B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;YACxC,KAAK,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC/D,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC;aACrC;AAED,YAAA,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;SACzC;AAED,QAAA,OAAO,IAAI,CAAC;KACf;AAES,IAAA,cAAc,CAAC,MAAc,EAAE,QAAA,GAAoB,KAAK,EAAA;AAC9D,QAAA,IAAI,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAEjC,IAAI,OAAO,GAAG,EAAE,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC;AAEtG,QAAA,IAAI,MAAM,CAAC,KAAK,EAAE;AACd,YAAA,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;SAC3C;QAED,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,GAAG,EAAE;AAC/B,YAAA,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;SAC9C;AAED,QAAA,IAAI,MAAM,CAAC,SAAS,IAAI,OAAO,EAAE;AAC7B,YAAA,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;SAC/C;AAED,QAAA,IAAI,MAAM,CAAC,QAAQ,EAAE;AACjB,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,YAAA,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,kBAAkB,CAAS,MAAM,CAAC,CAAC;gBAC1D,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;aAC9C;SACJ;AAED,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,SAAS,IAAI,OAAO,EAAE;AACjE,gBAAA,IAAI,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE;AACxD,oBAAA,MAAM,CAAC,qBAAqB,CACxB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,OAAO,CAAC,CAC3D,CAAC;iBACL;qBAAM;AACH,oBAAA,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;AAG7E,oBAAA,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG/B,OAAgB,EAAE;wBACjD,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;qBACzD;yBAAM;AACH,wBAAA,MAAM,CAAC,WAAW,CAAC,GAAG,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,GAAG,MAAM,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;qBACnF;iBACJ;aACJ;YAED,IAAI,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,KAAK,EAAE;AAClC,gBAAA,IAAI,CAAC,8BAA8B,EAAE,YAAY,CAAC,MAAM,CAAC,CAAC;aAC7D;SACJ;QAED,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,gBAAgB,KAAK,IAAI,EAAE;AAChD,YAAA,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;SACtC;AAED,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;KACvD;AAED;;;;;;AAMG;AACI,IAAA,WAAW,CAAC,QAAkB,EAAE,QAAA,GAAoB,KAAK,EAAA;AAC5D,QAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC;QACxB,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;SACnC;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;;AAMG;AACI,IAAA,YAAY,CAAC,MAAc,EAAA;AAE9B,QAAA,IAAI,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;YAE9C,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;AAE7C,YAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;AAE/C,YAAA,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;AAErB,YAAA,MAAM,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;AAExB,YAAA,IAAI,MAAM,CAAC,iBAAiB,EAAE;AAE1B,gBAAA,MAAM,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;AAErD,gBAAA,IAAI,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC;gBAE3B,OAAO,IAAI,EAAE;oBACT,IAAI,CAAC,KAAK,EAAE,CAAC;AACb,oBAAA,IAAI,GAAG,IAAI,CAAC,UAAW,CAAC;iBAC3B;gBAED,IACI,MAAM,CAAC,QAAQ;AACf,oBAAA,MAAM,CAAC,QAAQ,CAAC,KAAK,KAAK,CAAC;oBAC3B,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC,MAAM,KAAK,CAAC,EAC/C;AACE,oBAAA,MAAM,CAAC,QAAQ,CAAC,gBAAgB,GAAG,IAAI,CAAC;;;;iBAI3C;aACJ;AAAM,iBAAA,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC,MAAM,EAAE;AACnE,gBAAA,IAAI,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC;AACnD,gBAAA,IAAI,CAAC,GAAG,WAAW,CAAC,MAAM,CAAC;gBAC3B,OAAO,CAAC,EAAE,EAAE;oBACR,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,EAAE,EAAE;AACjC,wBAAA,WAAW,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACzB,wBAAA,IAAI,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC;wBAC3B,OAAO,IAAI,EAAE;4BACT,IAAI,CAAC,KAAK,EAAE,CAAC;AACb,4BAAA,IAAI,GAAG,IAAI,CAAC,UAAW,CAAC;yBAC3B;wBACD,MAAM;qBACT;iBACJ;aACJ;YAED,IAAI,IAAI,CAAC,OAAO,IAAI,MAAM,CAAC,QAAQ,EAAE;gBACjC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBAC9C,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;aACpD;AAED,YAAA,MAAM,CAAC,QAAQ,GAAG,SAAS,CAAC;AAE5B,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;SAC1D;AAED,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;AAIG;IACH,IAAoB,cAAc,CAAC,OAAgB,EAAA;AAC/C,QAAA,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;AAC/B,QAAA,IAAI,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;AACvD,QAAA,IAAI,CAAC,yBAAyB,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;AAC1D,QAAA,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,8BAA8B,EAAE,iBAAiB,CAAC,OAAO,CAAC,CAAC;KACnE;AAED;;;;AAIG;AACO,IAAA,qBAAqB,CAAC,UAAkB,EAAA;AAC9C,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACzB,QAAA,KAAK,IAAI,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACxC,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC;SACxB;KACJ;AAED;;;;;AAKG;AACI,IAAA,cAAc,CAAC,QAAkB,EAAA;AACpC,QAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC;QACxB,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SAClC;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;AAGG;IACa,KAAK,GAAA;QACjB,KAAK,CAAC,KAAK,EAAE,CAAC;QACd,IAAI,IAAI,GAAa,IAAI,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AAEtD,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;SAC/B;AAED,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QAC9B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;SAC9B;AAED,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;AAC1B,QAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACpB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;SAC/B;AAED,QAAA,IAAI,CAAC,8BAA8B,EAAE,OAAO,EAAE,CAAC;AAC/C,QAAA,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC;AAC3C,QAAA,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAA;KAChC;AAED;;;;AAIG;AACI,IAAA,IAAI,CAAC,QAAkD,EAAA;AAC1D,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACvB,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;QACjB,OAAO,CAAC,EAAE,EAAE;YACR,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACrB;KACJ;AAED;;;;;AAKG;AACI,IAAA,WAAW,CAAC,QAAkB,EAAA;QAEjC,IAAI,IAAI,GAAa,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AAEhD,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACjD,IAAI,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;SACzB;QAED,IAAI,CAAC,KAAK,EAAE,CAAC;QAEb,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAExC,IAAI,eAAe,GAAG,EAAE,CAAC;AAEzB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAClC,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAEjB,YAAA,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC;AACjB,YAAA,EAAE,CAAC,WAAW,GAAG,CAAC,CAAC;AAEnB,YAAA,IAAI,OAAO,GAAG,EAAE,EAAE,CAAC,KAAK,IAAI,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,SAAS,IAAI,EAAE,CAAC,SAAS,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC;AAE/F,YAAA,IAAI,EAAE,CAAC,KAAK,EAAE;AACV,gBAAA,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;aACvC;iBAAM,IAAI,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,EAAE;AAC9B,gBAAA,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;aAC1C;AAAM,iBAAA,IAAI,EAAE,CAAC,SAAS,IAAI,OAAO,EAAE;AAChC,gBAAA,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;aAC3C;iBAAM,IAAI,EAAE,CAAC,SAAS,IAAI,EAAE,CAAC,KAAK,EAAE;AACjC,gBAAA,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAC5B;AAED,YAAA,IAAI,EAAE,CAAC,QAAQ,EAAE;AACb,gBAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,gBAAA,IAAI,IAAI,CAAC,OAAO,EAAE;oBACd,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,kBAAkB,CAAS,EAAE,CAAC,CAAC;oBACtD,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;iBAC1C;aACJ;AAED,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;SAC1B;AAED,QAAA,IAAI,CAAC,4BAA4B,CAAC,eAAe,CAAC,CAAC;AAEnD,QAAA,OAAO,IAAI,CAAC;KACf;AAES,IAAA,4BAA4B,CAAC,eAAyB,EAAA;AAC5D,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,mCAAmC,CAAC,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;AAClI,YAAA,IAAI,CAAC,8BAA8B,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;SACvE;KACJ;AAED;;;AAGG;AACI,IAAA,kBAAkB,CAAC,gBAAkC,EAAA;AAExD,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;;;;;;;QAQrB,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAc,KAAI;YACvD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AACjC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAc,KAAI;YACxD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AAClC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAc,KAAI;YACxD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AAClC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAc,KAAI;YACpD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AAC9B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAc,KAAI;YACpD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AAC9B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAc,KAAI;YACpD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AAC9B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAc,KAAI;YACvD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AACjC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAc,KAAI;YACvD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AACjC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAc,KAAI;YACvD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AACjC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAc,KAAI;YACjD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AAC3B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAc,KAAI;YACjD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AAC3B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAc,KAAI;YACjD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AAC3B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAc,KAAI;YACnD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC7B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAc,KAAI;YACnD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC7B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAc,KAAI;YACnD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC7B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAc,KAAI;YACnD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC7B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAc,KAAI;YACnD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC7B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAc,KAAI;YACnD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC7B,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAc,KAAI;YACxD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AAClC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAc,KAAI;YACvD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AACjC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAc,KAAI;YACxD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AAClC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAc,KAAI;YACtD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;AAChC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC,CAAc,KAAI;YACzD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;AACnC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAc,KAAI;YACxD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AAClC,SAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAc,KAAI;YACxD,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AAClC,SAAC,CAAC,CAAC;KACN;AAES,IAAA,2BAA2B,CAAC,MAA0B,EAAA;AAC5D,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,sBAAsB,CAAC;AAErC,QAAA,EAAE,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;AACxC,QAAA,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;AAC1C,QAAA,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;AACpC,QAAA,EAAE,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAEhD,QAAA,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KACnB;AAES,IAAA,8BAA8B,CAAC,MAA0B,EAAA;AAC/D,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,yBAAyB,CAAC;AAExC,QAAA,EAAE,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;AACxC,QAAA,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;AAC1C,QAAA,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;AACpC,QAAA,EAAE,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAEhD,QAAA,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAEhB,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAC7C,IAAI,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAExC,YAAA,MAAM,KAAK,GAAG,IAAI,CAAC,OAAQ,CAAC,cAAc,CAAC;YAC3C,MAAM,aAAa,GAAG,IAAI,CAAC,OAAQ,CAAC,aAAa,EAAE,CAAC;AACpD,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,SAAS,CAAC;AACrB,YAAA,IAAI,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC;AACnB,YAAA,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;YAErB,OAAO,GAAG,EAAE,EAAE;gBACV,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,QAAS,CAAC;gBACzB,IAAI,CAAC,IAAI,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE;;;oBAGxC,IAAI,MAAM,GAAG,CAAC,CAAC,eAAe,EAC1B,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;oBACxB,OAAO,GAAG,EAAE,EAAE;wBACV,IAAI,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;wBAC/B,OAAO,KAAK,EAAE,EAAE;AACZ,4BAAA,IAAI,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,EACvB,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC;4BACvB,OAAO,GAAG,EAAE,EAAE;gCACV,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;gCAC7B,IAAI,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE;oCAC1B,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,KAAK,CAAS,CAAC;oCACzC,GAAG,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;oCACnC,IAAI,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC,QAAQ,KAAK,GAAG,CAAC;oCACrC,IAAI,GAAG,EAAE;AACL,wCAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;wCACxD,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;qCAC1D;yCAAM;wCACH,CAAC,CAAC,UAAU,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;qCACvC;oCACD,MAAM;iCACT;6BACJ;yBACJ;qBACJ;iBACJ;aACJ;SACJ;KACJ;AAES,IAAA,+BAA+B,CAAC,MAA0B,EAAA;AAChE,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,0BAA0B,CAAC;AAEzC,QAAA,EAAE,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;AACxC,QAAA,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;AAC1C,QAAA,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;AACpC,QAAA,EAAE,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAEhD,QAAA,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KA0CnB;AAEM,IAAA,yBAAyB,CAAC,MAA0B,EAAA;AACvD,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAQ,CAAC;QAEtB,IACI,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,cAAc,GAAG,GAAG;AAC1C,aAAC,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,CAAC,EAClE;;AAEE,YAAA,IAAI,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC;AACzC,YAAA,IAAI,CAAC,8BAA8B,CAAC,MAAM,CAAC,CAAC;AAC5C,YAAA,IAAI,CAAC,+BAA+B,CAAC,MAAM,CAAC,CAAC;AAE7C,YAAA,IAAI,IAAI,CAAC,8BAA8B,EAAE;AACrC,gBAAA,IAAI,CAAC,8BAA8B,CAAC,+BAA+B,CAAC,MAAM,CAAC,CAAC;aAC/E;SACJ;KACJ;AAED;;;;;AAKG;AACa,IAAA,YAAY,CAAC,QAAkB,EAAA;AAC3C,QAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC;AAE7B,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,QAAQ,CAAC,OAAO,GAAG,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,eAAe,GAAG,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC;SAC7F;aAAM;YACH,QAAQ,CAAC,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,kBAAkB,CAAC;SACpD;QAED,IAAI,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE;AAClC,YAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,YAAA,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,OAAQ,CAAC,kBAAkB,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;SAClD;KACJ;AAED;;;;;AAKG;AACa,IAAA,oBAAoB,CAAC,QAAkB,EAAA;AACnD,QAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;AAC3B,QAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;KAC5B;AAEe,IAAA,aAAa,CAAC,QAAkB,EAAE,QAAA,GAAoB,KAAK,EAAA;AACvE,QAAA,IAAI,QAAQ,CAAC,OAAO,EAAE;YAClB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SACvB;aAAM;YACH,CAAC,QAAQ,CAAC,SAAS,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;AAEnD,YAAA,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC;YACjC,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,EACjB,QAAQ,GAAG,KAAK,CAAC;AAErB,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;YACpB,IAAI,KAAK,GAAG,QAAQ,CAAC;AAErB,YAAA,OAAO,EAAE,CAAC,UAAU,EAAE;AAClB,gBAAA,IAAI,KAAK,IAAI,KAAK,CAAC,OAAO,EAAE;oBACxB,QAAQ,GAAG,IAAI,CAAC;oBAChB,MAAM;iBACT;AACD,gBAAA,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;gBACnB,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;aACrC;YAED,IAAI,QAAQ,EAAE;AACV,gBAAA,QAAQ,CAAC,aAAa,GAAG,EAAE,CAAC,MAAM,CAAC;AACnC,gBAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;AACjC,gBAAA,QAAQ,CAAC,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC;gBACzC,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,OAAO,CAAC,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;gBACtE,OAAO;oBACH,OAAO,CAAC,KAAK,GAAG,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK;oBACtC,OAAO,CAAC,KAAK,GAAG,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK;oBACtC,GAAG;oBACH,GAAG;iBACN,CAAC;aACL;iBAAM;gBACH,IAAI,QAAQ,CAAC,aAAa,IAAI,QAAQ,CAAC,cAAc,EAAE;AACnD,oBAAA,QAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC;AAC3C,oBAAA,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC,kBAAkB,CAAC;iBACtD;qBAAM;oBACH,QAAQ,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,kBAAkB,CAAC;oBACrD,QAAQ,CAAC,WAAW,GAAG,OAAO,CAAC,MAAM,CAAC,kBAAkB,CAAC;iBAC5D;AACD,gBAAA,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC;gBAC7B,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;aACvB;SACJ;KACJ;AAEe,IAAA,aAAa,CAAC,QAAkB,EAAA;AAC5C,QAAA,IAAI,QAAQ,CAAC,OAAO,EAAE;YAClB,MAAM,EAAE,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAG,CAAC;AAExC,YAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,YAAA,QAAQ,CAAC,YAAY,GAAG,KAAK,CAAC;AAE9B,YAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC;AACzB,YAAA,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;AACxB,YAAA,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,IAAI,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAEvC,YAAA,CAAC,GAAG,QAAQ,CAAC,WAAW,CAAC;AACzB,YAAA,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;AAC5B,YAAA,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,IAAI,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAEvC,YAAA,CAAC,GAAG,QAAQ,CAAC,cAAc,CAAC;AAC5B,YAAA,QAAQ,CAAC,cAAc,GAAG,IAAI,CAAC;AAC/B,YAAA,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,IAAI,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAEvC,YAAA,CAAC,GAAG,QAAQ,CAAC,kBAAkB,CAAC;AAChC,YAAA,QAAQ,CAAC,kBAAkB,GAAG,IAAI,CAAC;AACnC,YAAA,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,IAAI,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;SAC1C;AAED,QAAA,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;AAEpC,QAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;AAC3B,QAAA,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC;KAClC;IAEM,MAAM,GAAA;AACT,QAAA,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KAChD;AACJ,CAAA;AAED,MAAM,aAAa,GAAqB;;;;;;AAOpC;;;AAGG;IACH,MAAM;AAEN;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,cAAc;CACjB;;ACz7BD,MAAM,0BAA0B,GAAkC,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;AAO3F,MAAM,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AAElF,MAAM,YAAY,GAAG,GAAG,CAAC;AACzB,MAAM,WAAW,GAAG,GAAG,CAAC;AACxB,MAAM,iBAAiB,GAAG,kBAAkB,CAAC;AAC7C,MAAM,YAAY,GAAG,iBAAiB,CAAC;AACvC,MAAM,aAAa,GAAG,iBAAiB,CAAC;AACxC,MAAM,iBAAiB,GAAG,GAAG,CAAC;AAE9B,MAAM,cAAc,GAAG;AAC1B,IAAA,KAAK,EAAE,GAAG;AACV,IAAA,SAAS,EAAE,IAAI;AACf,IAAA,GAAG,EAAE,SAAS;AACd,IAAA,KAAK,EAAE,iBAAiB;AACxB,IAAA,QAAQ,EAAE,aAAa;CAC1B,CAAC;AAEK,MAAM,cAAc,GAAG;AAC1B,IAAA,KAAK,EAAE,GAAG;AACV,IAAA,SAAS,EAAE,IAAI;AACf,IAAA,GAAG,EAAE,SAAS;AACd,IAAA,KAAK,EAAE,YAAY;AACnB,IAAA,QAAQ,EAAE,aAAa;CAC1B,CAAC;AAEK,MAAM,eAAe,GAAG;AAC3B,IAAA,SAAS,EAAE,iBAAiB;AAC5B,IAAA,KAAK,EAAE,aAAa;CACvB,CAAA;AAED,MAAM,mBAAoB,SAAQ,UAAU,CAAA;AAmBxC,IAAA,WAAA,CAAY,OAAmC,EAAA;AAC3C,QAAA,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAHd,IAAe,CAAA,eAAA,GAAG,KAAK,CAAC;AAuHxB,QAAA,IAAA,CAAA,SAAS,GAAG,CAAC,CAAsB,KAAI;AAC7C,YAAA,IAAI,CAAC,CAAC,YAAY,KAAK,SAAS,EAAE;AAC9B,gBAAA,IAAI,MAAM,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;AACnC,gBAAA,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACpB,oBAAA,UAAU,EAAE;wBACR,MAAM,EAAE,CAAC,CAAC,YAAY;wBACtB,aAAa,EAAE,CAAC,MAAM,CAAC;AACvB,wBAAA,OAAO,EAAE;AACL,4BAAA,WAAW,EAAE,qBAAqB;AACrC,yBAAA;AACJ,qBAAA;AACJ,iBAAA,CAAC,CAAC;AACH,gBAAA,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;AAC5B,gBAAA,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;aACnC;AACL,SAAC,CAAA;AA8ES,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,CAAc,KAAI;AAC/C,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;YACpD,IAAI,CAAC,gBAAgB,EAAE,CAAC;AAC5B,SAAC,CAAA;AAED,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,CAAc,KAAI;AACrC,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;YACpD,IAAI,CAAC,gBAAgB,EAAE,CAAC;AAC5B,SAAC,CAAA;AAED,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,CAAc,KAAI;AACrC,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;YACpD,IAAI,CAAC,gBAAgB,EAAE,CAAC;AAC5B,SAAC,CAAA;AAED,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,CAAc,KAAI;AACrC,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;YACpD,IAAI,EAAE,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,EAAE;gBAC7C,IAAI,CAAC,gBAAgB,EAAE,CAAC;aAC3B;AACL,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,MAAM,GAAG,CAAC,CAAc,KAAI;YACjC,IAAI,CAAC,OAAQ,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAmC,CAAC,QAAQ,EAAE,CAAC;YACjF,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,EAAE;AAC1C,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAC/C,gBAAA,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,OAAQ,CAAC,4BAA4B,CAAC,CAAC,CAAE,CAAC,CAAC;gBAC7E,IAAI,CAAC,gBAAgB,EAAE,CAAC;AACxB,gBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,gBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC7B;AACL,SAAC,CAAA;AAUS,QAAA,IAAA,CAAA,cAAc,GAAG,CAAC,CAAc,KAAI;YAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAC3C,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,cAAc,GAAG,CAAC,CAAc,KAAI;YAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAC3C,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,YAAY,GAAG,CAAC,CAAc,KAAI;AACxC,YAAA,IAAI,IAAI,CAAC,aAAa,EAAE;gBACpB,IAAI,CAAC,gBAAgB,EAAE,CAAC;aAC3B;AAAM,iBAAA,IAAI,IAAI,CAAC,aAAa,EAAE;AAC3B,gBAAA,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,GAAI,CAAC,CAAC;aACjC;iBAAM;AACH,gBAAA,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,OAAQ,CAAC,4BAA4B,CAAC,CAAC,CAAC,GAAG,CAAE,CAAC,CAAC;aACpF;AACL,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,kBAAkB,GAAG,CAAC,CAAc,KAAI;AAC9C,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;YACnC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AAC7C,YAAA,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;AAChC,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,gBAAgB,GAAG,CAAC,CAAc,KAAI;AAE5C,YAAA,IAAI,IAAI,CAAC,eAAe,EAAE;AACtB,gBAAA,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,OAAO;aACV;AAED,YAAA,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;gBACzB,OAAO;aACV;YAED,IAAI,IAAI,GAAG,IAAI,CAAC,OAAQ,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC;YACzD,IAAI,IAAI,EAAE;AACN,gBAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AACnB,gBAAA,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE;AACnE,oBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;iBACtD;AACD,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;aAClD;AACL,SAAC,CAAA;AArSG,QAAA,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,0BAA0B,CAAC,CAAC;AAEvD,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,WAAW,IAAI,EAAE,CAAC;AAElD,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,MAAM,EAAE,CAAC;;;;AAKnC,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE;AACtC,YAAA,YAAY,EAAE,CAAC;AACf,YAAA,cAAc,EAAE,IAAI;YACpB,kBAAkB,EAAE,CAAC,CAAC;AACtB,YAAA,gBAAgB,EAAE,IAAI;AACtB,YAAA,eAAe,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,CAAC;AACvC,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE;AACtC,YAAA,YAAY,EAAE,CAAC;AACf,YAAA,cAAc,EAAE,IAAI;YACpB,kBAAkB,EAAE,CAAC,CAAC;AACtB,YAAA,gBAAgB,EAAE,IAAI;AACtB,YAAA,eAAe,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,CAAC;AACvC,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE;AACvC,YAAA,QAAQ,EAAE,CAAC,IAAI,MAAM,CAAC;AAClB,oBAAA,QAAQ,EAAE;AACN,wBAAA,MAAM,EAAE,EAAE;AACV,wBAAA,QAAQ,EAAE,KAAK;AACf,wBAAA,GAAG,eAAe;AACrB,qBAAA;AACJ,iBAAA,CAAC,CAAC;AACH,YAAA,cAAc,EAAE,KAAK;YACrB,kBAAkB,EAAE,CAAC,CAAC;AACtB,YAAA,gBAAgB,EAAE,IAAI;AACzB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC,QAAQ,GAAG,WAAW,CAAC;;;;AAKrE,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,CAAC;AAC3B,YAAA,SAAS,EAAE,cAAc;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,MAAM,CAAC,eAAe,EAAE;AAClD,YAAA,cAAc,EAAE,KAAK;YACrB,kBAAkB,EAAE,CAAC,CAAC;AACtB,YAAA,gBAAgB,EAAE,IAAI;AACtB,YAAA,eAAe,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,CAAC;AACpC,YAAA,OAAO,EAAE,GAAG;AACf,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;AAE/B,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAE3B,QAAA,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;KAChC;AAED,IAAA,IAAW,YAAY,GAAA;AACnB,QAAA,OAAO,SAAS,CAAC;KACpB;IAEM,cAAc,GAAA;QACjB,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAC9C,QAAA,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;AACpB,YAAA,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,CAAS,KAAI;AAC7B,gBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC;AACvB,gBAAA,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AACvC,aAAC,CAAC,CAAC;SACN;aAAM;YACH,OAAO,IAAI,CAAC,gBAAgB,CAAC;SAChC;KACJ;AAEM,IAAA,UAAU,CAAC,MAAc,EAAA;AAC5B,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;KACzB;IAEe,IAAI,GAAA;QAEhB,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,IAAI,CAAC,sBAAsB,EAAE,CAAC;AAE9B,QAAA,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE;AAC9B,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SAC9C;QAED,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC1C,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAE1C,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,aAAa,EAAE,CAAC;QAEpB,IAAI,CAAC,OAAQ,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAmC,CAAC,yBAAyB,EAAE,CAAC;QAElG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,CAAC,OAAQ,CAAC,CAAC;AAEzC,QAAA,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;KAClD;IAmBQ,QAAQ,GAAA;QACb,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,KAAK,EAAE,CAAC;AACb,QAAA,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC;KAChC;IAEM,KAAK,GAAA;AAER,QAAA,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;QAE5B,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAE9C,QAAA,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC;QACvB,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;SACvB;QAED,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAC9C,QAAA,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC;QACnB,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;SACvB;QAED,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;AAChD,QAAA,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC;QACpB,OAAO,CAAC,EAAE,EAAE;YACR,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC,KAAK,EAAE,CAAC;AAC9B,YAAA,IAAI,CAAC,GAAG,CAAC,EAAE;AACP,gBAAA,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;aACxB;SACJ;QAED,IAAI,CAAC,kBAAkB,EAAE,CAAC;KAC7B;AAEM,IAAA,cAAc,CAAC,MAAyB,EAAA;QAC3C,IAAI,CAAC,KAAK,EAAE,CAAC;AACb,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpC,YAAA,IAAI,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACnB,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACtF,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;SAC1B;AACD,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;KAClD;IAEM,YAAY,GAAA;AACf,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;SAChE;KACJ;IAEM,aAAa,GAAA;AAChB,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;KACtE;IAEM,gBAAgB,GAAA;AACnB,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAChD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC;KACpE;IAEM,gBAAgB,GAAA;AACnB,QAAA,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;AAC/B,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC;AACjC,QAAA,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;KAChC;AAEM,IAAA,uBAAuB,CAAC,SAAe,EAAA;QAC1C,IAAI,SAAS,EAAE;AACX,YAAA,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;AAC5C,YAAA,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC;SAC9C;KACJ;AAmCS,IAAA,SAAS,CAAC,CAAc,EAAA;QAC7B,IAAI,CAAC,OAAQ,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAmC,CAAC,UAAU,EAAE,CAAC;AACnF,QAAA,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,MAAM,GAAG,CAAC,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC;QAC5C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAQ,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;QAC7D,OAAO,CAAC,CAAC,aAAa,CAAC;KAC1B;IAiDS,WAAW,GAAA;AAEjB,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;AACxE,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;AAChE,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;AAEhE,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AACnD,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAE/D,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AAC1E,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AAC1E,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AAC1E,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;KAC7E;IAES,YAAY,GAAA;AAClB,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;AACnE,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AAE3D,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AAC9C,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AAE1D,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACrE,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACrE,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACrE,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;KACxE;IAES,YAAY,GAAA;QAClB,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAC9C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,YAAA,IAAI,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AACpB,YAAA,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;SACnC;KACJ;IAES,YAAY,GAAA;QAClB,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAC9C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,YAAA,IAAI,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AACpB,YAAA,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;SACnC;KACJ;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,IAAI,CAAC,iBAAiB,EAAE;AACxB,YAAA,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAClD;KACJ;IAEe,KAAK,GAAA;QACjB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,gBAAgB,EAAE,CAAC;KAC3B;AAES,IAAA,sBAAsB,CAAC,MAAc,EAAA;AAC3C,QAAA,IAAI,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC;AAChC,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,OAAQ,CAAC,cAAc,CAAC;AACzC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnC,IAAI,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;AAC3B,YAAA,IAAI,GAAG,IAAI,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE;AACvD,gBAAA,GAAG,CAAC,qBAAqB,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;AAClD,gBAAA,MAAM,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;gBACtC,MAAM;aACT;SACJ;KACJ;IAES,gBAAgB,GAAA;QACtB,IAAI,MAAM,GAAG,IAAI,CAAC,cAAc,EAAE,EAC9B,KAAK,GAAG,IAAI,CAAC,aAAc,CAAC,UAAU,GAAG,CAAC,EAC1C,EAAE,GAAG,IAAI,CAAC,aAAc,CAAC,SAAS,EAAE,CAAC;AACzC,QAAA,IAAI,SAAS,GAAoB,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;QAE7D,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC;AAEnC,QAAA,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;AAE5B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC;KAC/D;AAES,IAAA,OAAO,CAAC,IAAU,EAAA;AACxB,QAAA,IAAI,IAAI,CAAC,kBAAkB,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE;AAC9E,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;SAC1B;aAAM;AACH,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,EAC5B,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC;AACpC,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;AACzD,YAAA,IAAI,SAAS,GAAoB,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;YAC7D,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC;YACjC,IAAI,CAAC,KAAK,EAAE,CAAC;AACb,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;SAC7B;KACJ;AAES,IAAA,WAAW,CAAC,IAAU,EAAA;QAC5B,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAE9C,QAAA,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;AAChC,QAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAE/B,QAAA,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACpB,YAAA,SAAS,EAAE,cAAc;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;AAC5B,QAAA,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAChC,QAAA,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;QAEpC,IAAI,QAAQ,EAAE;AAEV,YAAA,IAAI,SAAS,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,EACrC,QAAQ,GAAG,QAAQ,CAAC,YAAY,EAAE,CAAC;YAEvC,IAAI,OAAO,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,EAC7C,QAAQ,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AAEpD,YAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,EAAE,EAC3B,SAAS,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC;YAElC,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,QAAQ,CAAC,SAAS,EAAE,CAAC;AAErB,YAAA,IAAI,QAAQ,GAAG,EAAE,EACb,SAAS,GAAG,EAAE,CAAC;AAEnB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE;AACpC,gBAAA,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,GAAG,YAAY,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpE,gBAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAEjB,gBAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,SAAS,GAAG,YAAY,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACvE,gBAAA,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACrB;AAED,YAAA,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;AAErE,YAAA,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACpB,gBAAA,QAAQ,EAAE;oBACN,MAAM,EAAE,CAAC,QAAQ,CAAC;AAClB,oBAAA,QAAQ,EAAE,KAAK;AACf,oBAAA,GAAG,eAAe;AACrB,iBAAA;AACJ,aAAA,CAAC,CAAC;AACH,YAAA,MAAM,CAAC,QAAS,CAAC,QAAQ,GAAG,WAAW,CAAC;AACxC,YAAA,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAE/B,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;YAC9C,IAAI,WAAW,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAE9C,YAAA,IAAI,cAAc,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAC/D,eAAe,GAAG,QAAQ,CAAC,OAAO,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAExE,YAAA,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACpB,gBAAA,SAAS,EAAE,cAAc;AAC5B,aAAA,CAAC,CAAC;AACH,YAAA,MAAM,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;AACtC,YAAA,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAChC,YAAA,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;;YAGpC,WAAW,CAAC,MAAM,EAAE,CAAC;AACrB,YAAA,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAErC,YAAA,WAAW,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;SAE/C;aAAM;AACH,YAAA,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACpB,gBAAA,SAAS,EAAE,cAAc;AAC5B,aAAA,CAAC,CAAC;AACH,YAAA,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SACnC;KACJ;IAES,kBAAkB,GAAA;AACxB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC;QAClC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC,KAAK,EAAE,CAAC;QACrC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC,KAAK,EAAE,CAAC;KACxC;AAES,IAAA,gBAAgB,CAAC,CAAO,EAAA;AAC9B,QAAA,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,EAC5C,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAE/B,IAAI,YAAY,GAAG,IAAI,CAAC,OAAQ,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC;QAEjE,IAAI,YAAY,EAAE;AAEd,YAAA,IAAI,CAAC,aAAc,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YAEjD,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAE9C,YAAA,IAAI,OAAO,CAAC,MAAM,EAAE;AAChB,gBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,aAAc,CAAC,UAAU,CAAC;AACzC,gBAAA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;AAE1B,gBAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,GAAG,KAAK,CAAC,IAAI,IAAI,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,EACrE,QAAQ,GAAG,OAAO,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,YAAY,EAAE,CAAC;gBAExD,IAAI,OAAO,GAAG,IAAI,CAAC,aAAc,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,EAC1D,OAAO,GAAG,IAAI,CAAC,aAAc,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAE/D,gBAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,EAAE,EAC3B,QAAQ,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;gBAEhC,OAAO,CAAC,SAAS,EAAE,CAAC;gBACpB,OAAO,CAAC,SAAS,EAAE,CAAC;AAEpB,gBAAA,IAAI,QAAQ,GAAG,EAAE,EACb,QAAQ,GAAG,EAAE,CAAC;AAElB,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE;AACpC,oBAAA,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,GAAG,YAAY,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpE,oBAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAEjB,oBAAA,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,GAAG,YAAY,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpE,oBAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACpB;gBAED,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;gBAEhD,IAAI,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,QAAQ,EACrC,YAAY,GAAG,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,QAAQ,CAAC;AAEvD,gBAAA,YAAY,EAAE,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;AACpC,gBAAA,YAAY,EAAE,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;;;gBAIpC,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAC9C,gBAAA,IAAI,UAAU,GAAG,OAAO,CAAC,GAAG,KAAK,CAAC,IAAI,IAAI,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,EACxD,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;AAE9B,gBAAA,IAAI,cAAc,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAC/D,cAAc,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEpE,gBAAA,UAAU,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;AAC1C,gBAAA,IAAI,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAC;AAExC,gBAAA,UAAU,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;AAC1C,gBAAA,IAAI,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAC;aAC3C;SACJ;KACJ;AAES,IAAA,0BAA0B,CAAC,SAAe,EAAA;QAEhD,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAC9C,QAAA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;AAE1B,QAAA,IAAI,IAAI,GAAG,CAAC,EAAE;YAEV,IAAI,GAAG,GAAG,CAAC,CAAC;AAEZ,YAAA,IAAI,OAAO,GAAGb,GAAQ,CAAC;AAEvB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;AAC3B,gBAAA,IAAI,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,IAAI,GAAG,EAAE,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;AACjD,gBAAA,IAAI,IAAI,GAAG,OAAO,EAAE;oBAChB,OAAO,GAAG,IAAI,CAAC;oBACf,GAAG,GAAG,CAAC,CAAC;iBACX;aACJ;YAED,IAAI,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,EACnC,KAAK,GAAG,OAAO,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,YAAY,EAAE,EAChD,KAAK,GAAG,OAAO,CAAC,GAAG,KAAK,CAAC,IAAI,IAAI,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC;AAEvE,YAAA,IAAI,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,EACpC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,EACpC,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,CAAC;YAE/C,IAAI,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,CAAC;AAE1C,YAAA,IAAI,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,EAC7B,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAE5B,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE;AACnB,gBAAA,GAAG,EAAE,CAAC;AACN,gBAAA,IAAI,GAAG,GAAG,CAAC,EAAE;AACT,oBAAA,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC;iBAClB;aACJ;AAED,YAAA,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AAEtB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;gBAC3B,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,YAAY,EAAE,CAAC,CAAC;gBACxF,IAAI,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;gBACtD,IAAI,CAAC,EAAE;oBACH,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;AACpC,oBAAA,IAAI,IAAI,GAAG,OAAO,EAAE;wBAChB,OAAO,GAAG,IAAI,CAAC;wBACf,GAAG,GAAG,CAAC,CAAC;qBACX;iBACJ;aACJ;YAED,IAAI,CAAC,kBAAkB,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,IAAI,CAAC;YAE3C,IAAI,QAAQ,GAAG,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,YAAY,EAAE,EAC7C,QAAQ,GAAG,OAAO,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,YAAY,EAAE,CAAC;YAExD,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,EACxD,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAE7D,YAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,EAAE,EAC3B,QAAQ,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;YAEhC,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,OAAO,CAAC,SAAS,EAAE,CAAC;AAEpB,YAAA,IAAI,QAAQ,GAAG,EAAE,EACb,QAAQ,GAAG,EAAE,CAAC;AAElB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE;AACpC,gBAAA,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,GAAG,YAAY,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpE,gBAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAEjB,gBAAA,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,GAAG,YAAY,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpE,gBAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACpB;YAED,IAAI,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC;AAErD,YAAA,IAAI,YAAY,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,EACnC,YAAY,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;AAExC,YAAA,YAAY,EAAE,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;AACpC,YAAA,YAAY,EAAE,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;SACvC;KACJ;IAES,sBAAsB,GAAA;AAC5B,QAAA,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC;AAChC,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,QAAQ,EAAE;AACN,oBAAA,MAAM,EAAE,EAAE;AACV,oBAAA,QAAQ,EAAE,KAAK;AACf,oBAAA,GAAG,eAAe;AACrB,iBAAA;aACJ,CAAC,EAAE,IAAI,MAAM,CAAC;AACX,gBAAA,QAAQ,EAAE;AACN,oBAAA,MAAM,EAAE,EAAE;AACV,oBAAA,QAAQ,EAAE,KAAK;AACf,oBAAA,GAAG,eAAe;AACrB,iBAAA;aACJ,CAAC;AACF,YAAA,IAAI,CAAC,YAAY;AACpB,SAAA,CAAC,CAAC;AAEH,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC;QAClC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC,QAAQ,GAAG,WAAW,CAAC;KAC/F;AACJ;;AC5sBD,MAAM,sBAAuB,SAAQ,mBAAmB,CAAA;AACpD,IAAA,WAAA,CAAY,KAAiC,EAAA;QACzC,KAAK,CAAC,KAAK,CAAC,CAAC;KAChB;AAED,IAAA,IAAoB,YAAY,GAAA;AAC5B,QAAA,OAAO,YAAY,CAAC;KACvB;AAEkB,IAAA,OAAO,CAAC,IAAU,EAAA;AACjC,QAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KAC1B;AAEkB,IAAA,WAAW,CAAC,IAAU,EAAA;QACrC,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAE9C,QAAA,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;AAChC,QAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAE/B,QAAA,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACpB,YAAA,SAAS,EAAE,cAAc;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;AAC5B,QAAA,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAChC,QAAA,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;QAEpC,IAAI,QAAQ,EAAE;AAEV,YAAA,IAAI,QAAQ,GAAG,QAAQ,CAAC,YAAY,EAAE,CAAC;YAEvC,IAAI,OAAO,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAElD,YAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;YAEhC,OAAO,CAAC,SAAS,EAAE,CAAC;YAEpB,IAAI,QAAQ,GAAG,EAAE,CAAC;AAElB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE;AACpC,gBAAA,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,GAAG,YAAY,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpE,gBAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACpB;AAED,YAAA,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACpB,gBAAA,QAAQ,EAAE;oBACN,MAAM,EAAE,CAAC,QAAQ,CAAC;AAClB,oBAAA,QAAQ,EAAE,KAAK;AACf,oBAAA,GAAG,eAAe;AACrB,iBAAA;AACJ,aAAA,CAAC,CAAC;AACH,YAAA,MAAM,CAAC,QAAS,CAAC,QAAQ,GAAG,WAAW,CAAC;AACxC,YAAA,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AAE/B,YAAA,IAAI,cAAc,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEpE,YAAA,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACpB,gBAAA,SAAS,EAAE,cAAc;AAC5B,aAAA,CAAC,CAAC;AACH,YAAA,MAAM,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;AACtC,YAAA,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAChC,YAAA,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;SAEvC;KACJ;IAEkB,kBAAkB,GAAA;AACjC,QAAA,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC,KAAK,EAAE,CAAC;KAC9D;AAES,IAAA,WAAW,CAAC,YAAoB,EAAE,SAAiB,EAAE,WAAmB,EAAA;QAC9E,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAC9C,QAAA,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC;YAAE,OAAO;AAChC,QAAA,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;AACrB,YAAA,YAAY,GAAG,SAAS,GAAG,WAAW,GAAG,CAAC,CAAC;SAC9C;QACD,IAAI,QAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,YAAY,EAAE,CAAC;AACpD,QAAA,IAAI,OAAO,GAAG,IAAI,CAAC,aAAc,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC/D,QAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;QAChC,OAAO,CAAC,SAAS,EAAE,CAAC;QAEpB,IAAI,IAAI,GAAG,EAAE,CAAC;AACd,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE;AACpC,YAAA,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,GAAG,YAAY,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpE,YAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAChB;QAED,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;QAEhD,IAAI,YAAY,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC;AAEhD,QAAA,YAAY,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;;;QAIhC,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAC9C,QAAA,IAAI,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;QAElC,IAAI,MAAM,EAAE;AACR,YAAA,IAAI,UAAU,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAChE,YAAA,MAAM,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;AAClC,YAAA,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;SACvC;KACJ;AAEkB,IAAA,gBAAgB,CAAC,CAAO,EAAA;AACvC,QAAA,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,EAC5C,CAAC,GAAG,IAAI,CAAC,SAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAE/B,IAAI,YAAY,GAAG,IAAI,CAAC,OAAQ,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC;QAEjE,IAAI,YAAY,EAAE;AAEd,YAAA,IAAI,CAAC,aAAc,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YAEjD,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAE9C,YAAA,IAAI,OAAO,CAAC,MAAM,EAAE;AAChB,gBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,aAAc,CAAC,UAAU,CAAC;AAEzC,gBAAA,IAAI,GAAG,KAAK,CAAC,EAAE;AACX,oBAAA,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;iBAC3C;qBAAM,IAAI,GAAG,KAAK,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;AACnC,oBAAA,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;iBAC3C;qBAAM;AACH,oBAAA,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;AACxC,oBAAA,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;iBAC3C;aACJ;SACJ;KACJ;AAEe,IAAA,0BAA0B,CAAC,SAAe,EAAA;QAEtD,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;AAC9C,QAAA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;AAE1B,QAAA,IAAI,IAAI,GAAG,CAAC,EAAE;AAEV,YAAA,IAAI,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC;AAEnB,YAAA,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;YAE9B,IAAI,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,CAAC;AAE3C,YAAA,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAE7D,YAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;YAEhC,OAAO,CAAC,SAAS,EAAE,CAAC;YAEpB,IAAI,QAAQ,GAAG,EAAE,CAAC;AAElB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE;AACpC,gBAAA,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,GAAG,YAAY,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpE,gBAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACpB;YAED,IAAI,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC;YAErD,IAAI,YAAY,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC;AAEzC,YAAA,YAAY,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;SACtC;KACJ;IAEkB,sBAAsB,GAAA;AACrC,QAAA,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC;AAChC,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,QAAQ,EAAE;AACN,oBAAA,MAAM,EAAE,EAAE;AACV,oBAAA,QAAQ,EAAE,KAAK;AACf,oBAAA,GAAG,eAAe;AACrB,iBAAA;aACJ,CAAC;AACF,YAAA,IAAI,CAAC,YAAY;AACpB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,QAAS,CAAC,QAAQ,GAAG,WAAW,CAAC;KAC7E;AACJ;;AC7LD,MAAM,cAAe,SAAQ,OAAO,CAAA;AAGhC,IAAA,WAAA,CAAY,UAA0B,EAAE,EAAA;QACpC,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,sBAAsB,CAAC;AAC5C,YAAA,IAAI,EAAE,CAAA,aAAA,EAAgB,IAAI,CAAC,IAAI,CAAE,CAAA;AACpC,SAAA,CAAC,CAAC;KACN;IAEM,sBAAsB,GAAA;QACzB,IAAI,CAAC,UAAU,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,mBAAmB,CAAC;AACzC,YAAA,IAAI,EAAE,CAAA,oBAAA,EAAuB,IAAI,CAAC,IAAI,CAAE,CAAA;AAC3C,SAAA,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,EAAE,CAAC;KACnB;IAEM,yBAAyB,GAAA;QAC5B,IAAI,CAAC,UAAU,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,sBAAsB,CAAC;AAC5C,YAAA,IAAI,EAAE,CAAA,uBAAA,EAA0B,IAAI,CAAC,IAAI,CAAE,CAAA;AAC9C,SAAA,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,EAAE,CAAC;KACnB;IAEe,MAAM,GAAA;KACrB;IAEe,UAAU,GAAA;AACtB,QAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC1D,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;KAC9D;IAEe,YAAY,GAAA;AACxB,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;KACjE;AACJ;;ACrCD,MAAM,gBAAgB,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;OA2BlB,CAAC;AAER,MAAM,mBAAmB,GAAG,CAAA;0RAC8P,CAAC;AAE3R,MAAM,gBAAgB,GAAG,CAAA,8KAAA,CAAgL,CAAC;AAE1M;;AAEG;AACG,MAAO,eAAgB,SAAQ,OAAO,CAAA;IAGxC,WAAY,CAAA,OAAO,GAAG,EAAE,EAAA;AACpB,QAAA,KAAK,CAAC;AACF,YAAA,IAAI,EAAE,iBAAiB;AACvB,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC;KAC9C;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,MAAO,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;IAEe,UAAU,GAAA;AACtB,QAAA,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC;KAClC;IAEe,YAAY,GAAA;AACxB,QAAA,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;KACpC;IAES,WAAW,GAAA;AAEjB,QAAA,IAAI,UAAU,GAAG,IAAI,YAAY,CAAC;AAC9B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,2BAA2B,CAAC;AACzD,YAAA,IAAI,EAAE,gBAAgB;AACtB,YAAA,IAAI,EAAE,SAAS;AACf,YAAA,QAAQ,EAAE,IAAI;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,OAAO,GAAG,IAAI,YAAY,CAAC;AAC3B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,2BAA2B,CAAC;AACzD,YAAA,IAAI,EAAE,gBAAgB;AACtB,YAAA,IAAI,EAAE,SAAS;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,OAAO,GAAG,IAAI,YAAY,CAAC;AAC3B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,8BAA8B,CAAC;AAC5D,YAAA,IAAI,EAAE,mBAAmB;AACzB,YAAA,IAAI,EAAE,YAAY;AACrB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,OAAO,GAAG,IAAI,WAAW,CAAC;AAC1B,YAAA,OAAO,EAAE;gBACL,UAAU,EAAE,OAAO,EAAE,OAAO;AAC/B,aAAA;AACJ,SAAA,CAAC,CAAC;QAEH,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAiB,KAAI;AAC9C,YAAA,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;AACjC,YAAA,QAAQ,GAAG,CAAC,IAAI;AACZ,gBAAA,KAAK,SAAS;AACV,oBAAA,IAAI,CAAC,cAAc,CAAC,sBAAsB,EAAE,CAAC;oBAC7C,MAAM;AACV,gBAAA,KAAK,YAAY;AACb,oBAAA,IAAI,CAAC,cAAc,CAAC,yBAAyB,EAAE,CAAC;oBAChD,MAAM;aACb;AACL,SAAC,CAAC,CAAC;QAEH,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAA;QACxC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;QACtC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;KACzC;AACJ;;AC9GM,MAAM,GAAG,GAAG,CAAC,CAAC;AACd,MAAM,GAAG,GAAG,CAAC,CAAC;AACd,MAAM,GAAG,GAAG,CAAC,CAAC;AAEd,MAAM,UAAU,GAA2B;AAC9C,IAAA,KAAK,EAAE,GAAG;AACV,IAAA,KAAK,EAAE,GAAG;AACV,IAAA,KAAK,EAAE,GAAG;CACb,CAAC;AAEF,MAAM,OAAO,GAAG,MAAM,CAAC;AACvB,MAAM,OAAO,GAAG,GAAG,GAAG,OAAO,CAAC;AAC9B,MAAM,OAAO,GAAG,MAAM,CAAC;AACvB,MAAM,OAAO,GAAG,GAAG,GAAG,OAAO,CAAC;AAC9B,MAAM,SAAS,GAAG,GAAG,CAAC;AACtB,MAAM,SAAS,GAAG,GAAG,GAAG,SAAS,CAAC;AAClC,MAAM,SAAS,GAAG,OAAO,CAAC;AAC1B,MAAM,QAAQ,GAAG,OAAO,GAAG,OAAO,CAAC;AACnC,MAAM,QAAQ,GAAG,GAAG,GAAG,QAAQ,CAAC;AAEzB,MAAM,CAAC,GAAG,CAAC,CAAC;AACZ,MAAM,EAAE,GAAG,CAAC,CAAC;AACb,MAAM,EAAE,GAAG,CAAC,CAAC;AACb,MAAM,CAAC,GAAG,CAAC,CAAC;AACZ,MAAM,CAAC,GAAG,CAAC,CAAC;AACZ,MAAM,EAAE,GAAG,CAAC,CAAC;AACb,MAAM,GAAG,GAAG,CAAC,CAAC;AACd,MAAM,GAAG,GAAG,CAAC,CAAC;AAErB,MAAM,WAAW,GAAG,IAAI,CAAC;AAEzB,MAAM,KAAK,GAAa,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;AAEpE,MAAM,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAG/C,IAAI,OAAO,GAAgC,EAAE,CAAC;AAE9C,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AAChB,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,CAAC;AACzC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,GAAG,OAAO,CAAC;AACpD,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,GAAG,OAAO,CAAC;AAEpD,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;AACjB,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,GAAG,OAAO,CAAC;AACpD,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,GAAG,QAAQ,CAAC;AACtD,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,CAAC;AAE3C,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;AACjB,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,GAAG,OAAO,CAAC;AACpD,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,CAAC;AAC3C,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,GAAG,QAAQ,CAAC;AAEtD,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;AACjB,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,CAAC;AAC3C,OAAO,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,GAAG,SAAS,CAAC;AACxD,OAAO,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,GAAG,SAAS,CAAC;AAExD,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AAClB,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,GAAG,SAAS,CAAC;AACxD,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAS,KAAa,CAAC,CAAC;AAE7C;SAEgB,OAAO,CAAC,IAAY,EAAE,EAAU,EAAE,GAAW,EAAA;IACzD,OAAO,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;AAClC,CAAC;AAEK,SAAU,UAAU,CAAC,QAAiB,EAAE,QAAgB,EAAE,MAAc,EAAE,GAAW,EAAE,KAAc,EAAA;IACvG,IAAI,QAAQ,EAAE;AACV,QAAA,OAAO,OAAO,CAAC,QAAQ,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;KAC1E;AACD,IAAA,OAAO,WAAW,CAAC;AACvB,CAAC;AAEK,SAAU,QAAQ,CAAC,CAAS,EAAA;AAC9B,IAAA,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC;AACpB;;;;;;;;;;;;;;;;;;;;;;AC/DA,MAAM,gBAAgB,GAClB,CAAA;;;wCAGoC,CAAC;AAEzC,MAAM,eAAe,GACjB,CAAA;;;wCAGoC,CAAC;AAEzC,MAAM,UAAU,GAAG,oIAAoI,CAAC;AAExJ,MAAM,SAAS,GAAG,CAAC,gBAAgB,EAAE,eAAe,CAAC,CAAC;AAEtD;;;;AAIG;AACG,MAAO,gBAAiB,SAAQ,OAAO,CAAA;AAiBzC,IAAA,WAAA,CAAY,UAAmC,EAAE,EAAA;QAC7C,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,IAAI,CAAC,CAAC;AAE/B,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AAE1D,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;AAChB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,YAAY,IAAI,GAAG,CAAC;QAC/C,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,UAAU,IAAI,KAAK,CAAC;QAElD,IAAI,CAAC,QAAQ,GAAI,KAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,IAAI,SAAS,GAAG,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC;KAClF;AAES,IAAA,aAAa,CAAC,EAAkB,EAAA;QACtC,IAAI,EAAE,EAAE;YACJ,IAAI,GAAG,GAAG,EAAE,CAAC,GAAG,EACZ,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC;AAEjB,YAAA,IAAI,GAAG,IAAI,CAAC,EAAE;AACV,gBAAA,IAAI,CAAC,UAAW,CAAC,SAAS,GAAG,GAAG,CAAC;aACpC;iBAAM;AACH,gBAAA,IAAI,CAAC,UAAW,CAAC,SAAS,GAAG,GAAG,CAAC;aACpC;AAED,YAAA,IAAI,GAAG,IAAI,CAAC,EAAE;AACV,gBAAA,IAAI,CAAC,UAAW,CAAC,SAAS,GAAG,GAAG,CAAC;aACpC;iBAAM;AACH,gBAAA,IAAI,CAAC,UAAW,CAAC,SAAS,GAAG,GAAG,CAAC;aACpC;AAED,YAAA,IAAI,CAAC,SAAU,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAC3D,YAAA,IAAI,CAAC,SAAU,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;SAC9D;KACJ;AAES,IAAA,YAAY,CAAC,EAAkB,EAAA;QACrC,IAAI,EAAE,EAAE;YACJ,IAAI,GAAG,GAAG,EAAE,CAAC,GAAG,EACZ,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC;AAEjB,YAAA,IAAI,GAAG,IAAI,CAAC,EAAE;AACV,gBAAA,IAAI,CAAC,UAAW,CAAC,SAAS,GAAG,GAAG,CAAC;aACpC;iBAAM;AACH,gBAAA,IAAI,CAAC,UAAW,CAAC,SAAS,GAAG,GAAG,CAAC;aACpC;AAED,YAAA,IAAI,GAAG,IAAI,CAAC,EAAE;AACV,gBAAA,IAAI,CAAC,UAAW,CAAC,SAAS,GAAG,GAAG,CAAC;aACpC;iBAAM;AACH,gBAAA,IAAI,CAAC,UAAW,CAAC,SAAS,GAAG,GAAG,CAAC;aACpC;YAED,IAAI,CAAC,GAAG,CAAC,CAAC;YAEV,IAAI,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrD,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AACrD,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,IAAI,CAAC,GAAG,KAAK,CAAC;YAC/C,IAAI,CAAC,SAAU,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YAEnF,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACjD,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AACjD,YAAA,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,IAAI,CAAC,GAAG,KAAK,CAAC;YAC3C,IAAI,CAAC,SAAU,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;SACtF;KACJ;IAES,eAAe,GAAA;QACrB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACvC,QAAA,EAAE,CAAC,SAAS,GAAG,gBAAgB,CAAC;AAChC,QAAA,EAAE,CAAC,SAAS,GAAG,UAAU,CAAC;AAC1B,QAAA,OAAO,EAAE,CAAC;KACb;IAES,YAAY,GAAA;QAClB,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACnD,IAAI,CAAC,QAAQ,GAAI,KAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AACjD,QAAA,IAAI,CAAC,GAAI,CAAC,aAAa,CAAC,kBAAkB,CAAE,CAAC,SAAS,GAAGmD,QAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACvF,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;IAES,mBAAmB,GAAA;QAEzB,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;AACtC,YAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;SAClB;AAED,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,GAAI,CAAC;QAEnB,EAAE,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAErC,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;QACnD,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;QACnD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;QAEhD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC3C,QAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC9B;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACzC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAEzC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAE1C,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;YACpC,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,WAAW,EAAE,CAAC;AACvB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,YAAA,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;AACxD,YAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;AACtE,YAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC,MAAM,IAAI,CAAC,WAAW,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;SACjG;aAAM;AACH,YAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;YACnE,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,QAAQ,CAAC,MAAM,IAAI,CAAC,WAAW,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;SAC9F;QAED,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAE3B,IAAI,CAAC,YAAY,EAAE,CAAC;KACvB;AAES,IAAA,gBAAgB,CAAC,CAAc,EAAA;AACrC,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC;AACf,QAAA,IAAI,KAAK,CAAC;AACV,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;AACtB,QAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,YAAA,KAAK,GAAG,CAAE,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;SAClC;aAAM;YACH,KAAK,GAAG,EAAE,CAAC;SACd;AACD,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAO,CAAC,yBAAyB,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;AACrE,QAAA,IAAI,CAAC,OAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC/B;AAES,IAAA,MAAM,WAAW,GAAA;QACvB,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,MAAM,EAAE;YAC7B,IAAI,GAAG,GAAG,CAAC,CAAC;YACZ,IAAI,CAAC,SAAU,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;YACtC,IAAI,IAAI,CAAC,WAAW,KAAK,UAAU,CAAC,GAAG,EAAE;AACrC,gBAAA,GAAG,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACxD,GAAG,GAAG,MAAM,CAACC,UAAgB,CAAC,IAAI,EAAEC,CAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;aACrE;iBAAM,IAAI,IAAI,CAAC,WAAW,KAAK,UAAU,CAAC,GAAG,EAAE;AAC5C,gBAAA,GAAG,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACvD,GAAG,GAAG,MAAM,CAACD,UAAgB,CAAC,IAAI,EAAEC,CAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;aACrE;YACD,IAAI,CAAC,SAAU,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;YACtC,IAAI,CAAC,SAAU,CAAC,SAAS,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;SAC9C;KACJ;AACJ;;iBC/MD,MAAM,QAAQ,CAAA;AAQV,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,MAAM,EAAE,CAAC;KACvC;IAEM,EAAE,GAAA;AACL,QAAA,OAAO,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;KAC/B;IAEM,EAAE,GAAA;AACL,QAAA,OAAO,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;KAC/B;AACJ,EAAA;AAEK,MAAO,eAAgB,SAAQ,OAAO,CAAA;AAaxC,IAAA,WAAA,CAAY,UAAkC,EAAE,EAAA;QAC5C,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,IAAI,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,MAAM,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;AACd,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QAEnB,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,EAAC,CAAC,EAAE,kBAAkB,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,EAAC;AAC9C,YAAA,EAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,EAAC;AACnC,YAAA,EAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,EAAC;AACnC,YAAA,EAAC,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,EAAC;AACnC,YAAA,EAAC,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,EAAC;SACrC,CAAC;AAEF,QAAA,IAAI,CAAC,OAAO,GAAG,CAAC,IAAIC,UAAQ,EAAE,EAAE,IAAIA,UAAQ,EAAE,CAAC,CAAC;KACnD;AAEM,IAAA,eAAe,CAAC,UAAkB,EAAA;QACrC,IAAI,CAAC,YAAY,EAAE,CAAC;AAEpB,QAAA,IAAI,UAAU,GAAG,CAAC,EAAE;YAChB,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;aAAM;YACH,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;AAED,QAAA,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC;AAAE,YAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QAE5C,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;YAC7C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC;SAClD;AAED,QAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;QAE1B,MAAM,EAAE,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,OAAO,CAAC;AAEvC,QAAA,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KAC5F;AAES,IAAA,YAAY,CAAC,KAAkB,EAAA;AACrC,QAAA,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;KAC1C;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;KACnB;IAEe,UAAU,GAAA;AAEtB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AAEvB,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AACnD,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;AACvD,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC;AACxD,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AAEnD,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AACnD,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAC/C,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;AAEjD,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;KAC1C;AAES,IAAA,YAAY,CAAC,CAAc,EAAA;QACjC,IAAI,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;YAC5B,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAE1B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAI,CAAC,UAAU,CAAC;YACxD,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAI,CAAC,SAAS,CAAC;YACvD,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAI,CAAC,UAAU,CAAC;YAC7D,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAI,CAAC,SAAS,CAAC;;YAG5D,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAEvF,YAAA,IAAI,CAAC,CAAC,YAAY,EAAE;gBAChB,CAAC,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;gBACnD,IAAI,CAAC,YAAY,EAAE,CAAC;aACvB;SACJ;KACJ;AAES,IAAA,UAAU,CAAC,CAAc,EAAA;QAC/B,IAAI,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;AAC5B,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;YAElB,IACI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC;gBACxD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC;gBAExD,IAAI,CAAC,YAAY,EAAE,CAAC;SAC3B;KACJ;AAES,IAAA,WAAW,CAAC,CAAc,EAAA;QAChC,IAAI,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;AAC5B,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;YAE9B,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AAExB,YAAA,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AACf,YAAA,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAEf,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAI,CAAC,UAAU,CAAC;YACxD,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAI,CAAC,SAAS,CAAC;YAEvD,IAAI,CAAC,CAAC,CAAC,YAAY;gBAAE,OAAO;AAE5B,YAAA,IAAI,SAAS,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACxC,YAAA,IAAI,WAAW,GAAG,IAAIC,KAAG,CAAC,GAAG,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC;YAE3E,IAAI,WAAW,EAAE;AACb,gBAAA,IAAI,CAAC,EAAE;AACH,oBAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC;AACtD,wBAAA,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;AACxD,gBAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;gBACnD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,yBAAyB,CACvC,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,GAAG,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,EACpD,IAAI,IAAI,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAC7D,CAAC;AAEF,gBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAErC,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAE/C,IAAI,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAExD,gBAAA,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,EAAE;oBACpC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;iBACtC;gBAED,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;gBACrD,GAAG,CAAC,MAAM,EAAE,CAAC;aAChB;SACJ;KACJ;AAES,IAAA,sBAAsB,CAAC,CAAc,EAAA;AAC3C,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QACjE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,EAAE,IAAI,IAAI,CAAC;QACxE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;AAClC,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;YACzD,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;KACJ;IAEM,YAAY,GAAA;AACf,QAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;AACpB,QAAA,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;AACd,QAAA,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;KACtB;AAES,IAAA,mBAAmB,CAAC,CAAc,EAAA;AACxC,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC,SAAS,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;AACpE,QAAA,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC;YAAE,IAAI,CAAC,YAAY,EAAE,CAAC;KACzF;AAES,IAAA,qBAAqB,CAAC,CAAc,EAAA;AAC1C,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;QAE9B,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,GAAG,CAAC,QAAQ,EAAE;YAAE,OAAO;QAEjD,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE;YACzC,IAAI,WAAW,GAAG,IAAIA,KAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAEhF,IAAI,WAAW,EAAE;AAEb,gBAAA,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;AAClE,oBAAA,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;AAE3D,gBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;gBAE7D,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBAEnE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,yBAAyB,CACvC,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,GAAG,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,EACpD,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CACnE,CAAC;AAEF,gBAAA,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC;gBAEjB,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBACnE,GAAG,CAAC,MAAM,EAAE,CAAC;aAChB;SACJ;aAAM;AACH,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACrB;KACJ;IAES,MAAM,GAAA;AACZ,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACvB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAE9B,QAAA,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,GAAG,CAAC,QAAQ,EAAE;YAAE,OAAO;AAEnF,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC;AAC9B,QAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AACpB,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACrB;aAAM;AACH,YAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;AAEnD,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAErC,IAAI,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAExD,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAE/C,YAAA,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,EAAE;gBACpC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;aACtC;YAED,CAAC,CAAC,WAAW,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACvC,YAAA,GAAG,GAAG,GAAG;AACJ,iBAAA,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACvE,iBAAA,SAAS,EAAE,CAAC;AACjB,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE;AAC5B,gBAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;aACrB;YAED,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACrD,GAAG,CAAC,MAAM,EAAE,CAAC;SAChB;KACJ;AACJ;;AC1QD,MAAM,mBAAmB,GAA2B;AAChD;;;AAGG;IACH,SAAS;CACZ,CAAC;AAIF;;;;;;AAMG;AACH,MAAM,YAAa,SAAQ,KAAK,CAAA;IA6C5B,WAAY,CAAA,IAAmB,EAAE,OAAA,GAA+B,EAAE,EAAA;AAC9D,QAAA,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;;QAGrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;AAE7D,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AAEnB,QAAA,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;AACvB,QAAA,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;AAExB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAE5B,IAAI,CAAC,sBAAsB,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,qBAAqB,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;QAEjD,IAAI,CAAC,qBAAqB,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;QACjD,IAAI,CAAC,oBAAoB,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAEhD,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAE5B,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;AACtB,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,QAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;AACjC,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAE1B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,EAAE,CAAC;AACjC,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AAEvB,QAAA,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC;AAEhD;;AAEG;QACH,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAErD,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAExB,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACvD;AAED,IAAA,IAAoB,MAAM,GAAA;AACtB,QAAA,OAAO,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC;KACtC;AAEe,IAAA,KAAK,CAAC,MAAc,EAAA;QAChC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC9C,QAAA,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;AAClD,QAAA,OAAO,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;KAC9B;IAES,UAAU,GAAA;AAChB,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;SACxE;KACJ;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AAC7C,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,OAAO,KAAK,CAAC,MAAM,EAAE,CAAC;KACzB;AAED,IAAA,IAAoB,YAAY,GAAA;AAC5B,QAAA,OAAO,cAAc,CAAC;KACzB;AAED;;;;AAIG;IACI,gBAAgB,GAAA;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;QAC3B,OAAO;AACH,YAAA,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AAC9B,YAAA,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AAC9B,YAAA,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AAC9B,YAAA,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;SACjC,CAAC;KACL;AAED;;;;AAIG;IACI,UAAU,GAAA;AACb,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;QAC3B,OAAO;AACH,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AACpB,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AACpB,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AACpB,YAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;SACvB,CAAC;KACL;AAED;;;;;;AAMG;AACI,IAAA,UAAU,CAAC,OAAuB,EAAA;QACrC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;KAC/C;AAED;;;;;;AAMG;AACI,IAAA,gBAAgB,CAAC,OAAiB,EAAA;AACrC,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE;AAClB,YAAA,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE;AAClB,YAAA,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE;AAClB,YAAA,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE;SACrB,CAAC;AAEF,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,EAAE;gBACnC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC;aACpC;AACD,YAAA,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE;gBACpC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC;aACrC;SACJ;QACD,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AAElD,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;QACtB,IAAI,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG1C,OAAgB,IAAI,EAAE,CAAC,SAAS,CAAC,GAAG,GAAGD,OAAgB,EAAE;AAC5E,YAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AACnB,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC;SAC7C;aAAM;AACH,YAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AACnB,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC;SAC7C;QAED,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;YAC1C,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SAC5C;KACJ;AAED;;;AAGG;IACO,YAAY,GAAA;QAClB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QAEzC,IAAI,CAAC,YAAY,GAAG;AAChB,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,oBAAoB,EAAE;AAC5C,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,oBAAoB,EAAE;AAC5C,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,oBAAoB,EAAE;AAC5C,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,oBAAoB,EAAE;SAC/C,CAAC;QAEF,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CACzB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,oBAAoB,EAAE,EAClD,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,oBAAoB,EAAE,CACrD,CAAC;AAEF,QAAA,IAAI,OAAO,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAElC,QAAA,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC,EAAE;YAEtB,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;YAC7D,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAE3C,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;YAC7D,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAE3C,YAAA,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;AACpE,YAAA,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC;SAExE;aAAM;YAEH,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;YAC5D,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAE1C,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;YAC5D,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAE1C,YAAA,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;AAClE,YAAA,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;SACtE;;AAGD,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,EAChB,CAAC,GAAG,CAAC,CAAC,QAAS,CAAC,OAAO,EACvB,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEf,YAAA,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,gBAAgC,CAAC,CAAC;AACxD,YAAA,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAEpF,IAAI,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,SAAS,KAAK,CAAC,CAAC,CAAC;AAE7G,YAAA,IAAI,CAAC,eAAe,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;AACxC,YAAA,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;AAEvC,YAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC9B;KACJ;AAED;;;;AAIG;AACa,IAAA,oBAAoB,CAAC,QAAkB,EAAA;AACnD,QAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;AACjC,QAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;AAC3B,QAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;KAC5B;AAED;;;;AAIG;IACa,KAAK,GAAA;AACjB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;QAErB,IAAI,CAAC,EAAE;YACH,IAAI,EAAE,GAAG,CAAC,CAAC,QAAS,CAAC,OAAO,CAAC,EAAE,CAAC;YAChC,IAAI,CAAC,mBAAmB,IAAI,CAAC,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC5D,YAAA,CAAC,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;YAE5B,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,eAA8B,CAAC,CAAC;AACrD,gBAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,cAA6B,CAAC,CAAC;AACpD,gBAAA,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,cAA8B,CAAC,CAAC;AACtD,gBAAA,IAAI,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,IAAI,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;aACtG;SACJ;AAED,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAE5B,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,QAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;KACpC;AAED;;;;;AAKG;AACa,IAAA,aAAa,CAAC,UAAmB,EAAA;AAC7C,QAAA,IAAI,UAAU,KAAK,IAAI,CAAC,WAAW,EAAE;AACjC,YAAA,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;;YAGhC,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,YAAY,EAAE;gBACnC,IAAI,UAAU,EAAE;oBACZ,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;iBAC3C;qBAAM;oBACH,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;iBAC9C;aACJ;SACJ;KACJ;AAED;;;AAGG;AACa,IAAA,aAAa,CAAC,QAAkB,EAAA;AAC5C,QAAA,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;AACxB,QAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;AAC3B,QAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;KAC5B;AAED;;;;AAIG;AACa,IAAA,aAAa,CAAC,QAAkB,EAAA;AAC5C,QAAA,IAAI,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC;AAE/B,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SAChD;aAAM;YACH,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,OAAQ,CAAC,kBAAkB,CAAC;YACpD,CAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;SAC5D;QAED,IAAI,GAAG,EAAE,GAAG,CAAC;AACb,QAAA,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC,EAAE;AACtB,YAAA,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC;AACxB,YAAA,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC;SACzB;aAAM;AACH,YAAA,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC;AACvB,YAAA,GAAG,GAAG,OAAO,CAAC,aAAa,EAAE,CAAC;SACjC;AAED,QAAA,IAAI,OAAO,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;AACpD,QAAA,IAAI,OAAO,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;AACpD,QAAA,IAAI,MAAM,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;AAC/D,QAAA,IAAI,MAAM,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;AAC/D,QAAA,IAAI,OAAO,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;AAChE,QAAA,IAAI,OAAO,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;QAEhE,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;KAC7C;AAED;;;;AAIG;AACH,IAAA,IAAW,aAAa,GAAA;QACpB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED;;;;AAIG;AACH,IAAA,IAAW,cAAc,GAAA;QACrB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;AAED;;;AAGG;IACO,oBAAoB,GAAA;;KAE7B;IAEM,mBAAmB,GAAA;QACtB,IAAI,CAAC,GAAG,IAAI,CAAC,OAAQ,EACjB,CAAC,GAAG,CAAC,CAAC,QAAS,CAAC,OAAO,EACvB,EAAE,GAAG,CAAC,CAAC,EAAG,EACV,OAAO,GAAG,CAAC,CAAC,gBAAgB,CAAC;AAEjC,QAAA,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;QAC1C,IAAI,CAAC,oBAAoB,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,GAAG,OAAO,CAAC,YAAa,CAAC;QAC9B,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC/C,CAAC,CAAC,QAAQ,EAAE,CAAC;AAEb,QAAA,CAAC,CAAC,QAAQ,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;QACxC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,iBAAiB,CAAC,QAAQ,CAAC;QAC/C,IAAI,GAAG,GAAG,EAAE,CAAC,UAAU,EACnB,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AAEtB,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAEzB,QAAA,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAAgC,CAAC,CAAC;QAC3D,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAClC,QAAA,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;QAE9B,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAEnD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,gBAA+B,CAAC,CAAC;AAExE,QAAA,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAExE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAA8B,CAAC,CAAC;QACpE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE/F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,cAA6B,CAAC,CAAC;QACnE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE7F,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;QAChE,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;AAE9D,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAC9B,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,cAA8B,CAAC,CAAC;QACnE,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;QACnC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,OAAO,CAAC,YAA2B,CAAC,CAAC;AAC5E,QAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,OAAO,CAAC,YAAa,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;QACvF,CAAC,CAAC,UAAU,EAAE,CAAC;AAEf,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAExB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AAEnB,QAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;KACpC;IAES,mBAAmB,GAAA;QACzB,IAAI,CAAC,GAAG,IAAI,CAAC,OAAQ,EACjB,CAAC,GAAG,CAAC,CAAC,QAAS,CAAC,OAAO,EACvB,EAAE,GAAG,CAAC,CAAC,EAAG,EACV,OAAO,GAAG,CAAC,CAAC,gBAAgB,CAAC;AAEjC,QAAA,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;QAC1C,IAAI,CAAC,oBAAoB,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,GAAG,OAAO,CAAC,YAAa,CAAC;QAC9B,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC/C,CAAC,CAAC,QAAQ,EAAE,CAAC;AAEb,QAAA,CAAC,CAAC,QAAQ,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;QACxC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,iBAAiB,CAAC,QAAQ,CAAC;QAC/C,IAAI,GAAG,GAAG,EAAE,CAAC,UAAU,EACnB,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AAEtB,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAEzB,QAAA,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAAgC,CAAC,CAAC;QAC3D,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAClC,QAAA,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;QAC9B,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,OAAO,CAAC,gBAA+B,CAAC,CAAC;AAExE,QAAA,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAExE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAA8B,CAAC,CAAC;QACpE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE/F,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,cAA6B,CAAC,CAAC;QACnE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE7F,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;QACjE,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AAE/D,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAC9B,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,cAA8B,CAAC,CAAC;QACnE,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;QAEnC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,OAAO,CAAC,YAA2B,CAAC,CAAC;AAC5E,QAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,OAAO,CAAC,YAAa,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;QACvF,CAAC,CAAC,UAAU,EAAE,CAAC;AAEf,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAExB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AAEnB,QAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;KACpC;AACJ;;AC1hBD,MAAMH,iBAAe,GAAG,CAAA,8aAAA,CAAgb,CAAC;AAMnc,MAAO,mBAAoB,SAAQ,OAAO,CAAA;AAK5C,IAAA,WAAA,CAAY,UAAsC,EAAE,EAAA;QAChD,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;AACvB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAE1B,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC;AAC/B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,wBAAwB,CAAC;AACtD,YAAA,IAAI,EAAEA,iBAAe;AACxB,SAAA,CAAC,CAAC;KACN;IAEQ,MAAM,GAAA;QACX,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;AAE9C,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAQ,KAAI;AAC5C,YAAA,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;AACjB,gBAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aACtB;SACJ,EAAE,IAAI,CAAC,CAAC;AAET,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;YACtD,IAAI,QAAQ,EAAE;gBACV,IAAI,CAAC,QAAQ,EAAE,CAAC;aACnB;iBAAM;gBACH,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;AACL,SAAC,CAAC,CAAC;KACN;IAEQ,UAAU,GAAA;QACf,KAAK,CAAC,UAAU,EAAE,CAAC;AAEnB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC;AACvB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SAChC;KACJ;IAEQ,YAAY,GAAA;QACjB,KAAK,CAAC,YAAY,EAAE,CAAC;AACrB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC;AACvB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SAClC;KACJ;AAED,IAAA,UAAU,CAAC,KAAY,EAAA;AACnB,QAAA,IAAI,KAAK,YAAY,YAAY,EAAE;AAC/B,YAAA,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AACtD,YAAA,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;AACxD,YAAA,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AAC9C,YAAA,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SAC7C;KACJ;AAES,IAAA,YAAY,CAAC,KAAY,EAAA;AAC/B,QAAA,IAAI,KAAK,YAAY,YAAY,EAAE;YAC/B,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACjD,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YACnD,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SACxC;KACJ;AAES,IAAA,MAAM,CAAC,EAAe,EAAA;AAC5B,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;KACnD;AAES,IAAA,QAAQ,CAAC,EAAe,EAAA;AAC9B,QAAA,IAAI,IAAI,CAAC,YAAY,KAAK,CAAC,CAAC,EAAE;AAC1B,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,UAAU,EAAE,CAAC;SACrD;KACJ;IAES,aAAa,GAAA;QACnB,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;KACvC;AAES,IAAA,YAAY,CAAC,EAAe,EAAA;AAClC,QAAA,IAAI,KAAK,GAAG,EAAE,CAAC,aAAa,CAAC;AAC7B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC;AACvB,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,YAAA,IAAI,OAAO,GAAG,KAAK,CAAC,gBAAgB,EAAE,CAAC;;AAEvC,YAAA,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC;AAC7D,YAAA,KAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;SACnC;AAAM,aAAA;AACH,YAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;AACvB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;gBAEjD,IAAI,MAAM,GAAG,CAAC,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC;;;gBAG7C,IAAI,MAAM,IAAI,CAAC,CAAC,SAAS,CAAC,sBAAsB,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,oBAAoB,CAAC,EAAE,CAAC,IAAI,IAAI,EAAE;AACnH,oBAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;oBACtB,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;oBACpC,MAAM;;iBAET;qBAAM;oBACH,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;iBACvC;aACJ;SACJ;KACJ;AACJ;;AC5HY,MAAA,KAAK,GAA6B;AAC3C,IAAA,OAAO,EAAE,CAAC;AACV,IAAA,QAAQ,EAAE,CAAC;AACX,IAAA,SAAS,EAAE,CAAC;AACZ,IAAA,QAAQ,EAAE,EAAE;AACZ,IAAA,OAAO,EAAE,EAAE;AACX,IAAA,SAAS,EAAE,EAAE;AACb,IAAA,SAAS,EAAE,EAAE;AACb,IAAA,QAAQ,EAAE,EAAE;AACZ,IAAA,QAAQ,EAAE,EAAE;AACZ,IAAA,QAAQ,EAAE,EAAE;AACZ,IAAA,MAAM,EAAE,EAAE;AACV,IAAA,SAAS,EAAE,EAAE;AACb,IAAA,QAAQ,EAAE,EAAE;AACZ,IAAA,eAAe,EAAE,EAAE;AACnB,IAAA,UAAU,EAAE,EAAE;AACd,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,QAAQ,EAAE,GAAG;AACb,IAAA,MAAM,EAAE,GAAG;AACX,IAAA,SAAS,EAAE,GAAG;AACd,IAAA,cAAc,EAAE,GAAG;AACnB,IAAA,cAAc,EAAE,GAAG;AACnB,IAAA,QAAQ,EAAE,GAAG;AACb,IAAA,SAAS,EAAE,GAAG;AACd,IAAA,QAAQ,EAAE,GAAG;AACb,IAAA,uBAAuB,EAAE,GAAG;AAC5B,IAAA,wBAAwB,EAAE,GAAG;AAC7B,IAAA,gBAAgB,EAAE,GAAG;;;ACpCzB;;AAEG;AAEG,MAAO,kBAAmB,SAAQ,OAAO,CAAA;AAG3C,IAAA,WAAA,CAAY,UAAqC,EAAE,EAAA;AAC/C,QAAA,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;QACxB,KAAK,CAAC,EAAC,IAAI,EAAE,oBAAoB,EAAE,GAAG,OAAO,EAAC,CAAC,CAAC;QAChD,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,IAAI,GAAG,CAAC;KACnC;IAEe,UAAU,GAAA;AACtB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACvB,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AACxE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;AACzE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AACxE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AAC1E,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;AAC1E,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;AACtE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;AACpE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;AACjE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;AACvE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;AAClE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;AACnE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;KACtE;IAEe,YAAY,GAAA;AACxB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACvB,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACnE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;AACpE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACnE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAChE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;AACjE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;AAC/D,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAChE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AAC5D,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAChE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAChE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;AAClE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAC7D,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;AAC9D,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;KACjE;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;KACnB;IAES,mBAAmB,GAAA;AACzB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;KACnD;IAES,oBAAoB,GAAA;AAC1B,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAO,CAAC;AAC/B,QAAA,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;KAClD;IAES,kBAAkB,GAAA;AACxB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KACnD;IAES,mBAAmB,GAAA;AACzB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KAClD;IAES,cAAc,GAAA;AACpB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;AACrD,YAAA,GAAG,CAAC,KAAK,CAAC,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SACpD;aAAM;YACH,GAAG,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,OAAO,IAAI+C,OAAY,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SAC/E;KACJ;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;AACrD,YAAA,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SACrD;aAAM;YACH,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,OAAO,IAAIA,OAAY,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SAChF;KACJ;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;AACrD,YAAA,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SACnD;aAAM;AACH,YAAA,GAAG,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,OAAO,IAAIA,OAAY,CAAC,CAAC;SACtE;KACJ;IAES,iBAAiB,GAAA;AACvB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;AACrD,YAAA,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SACpD;aAAM;AACH,YAAA,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,OAAO,IAAIA,OAAY,CAAC,CAAC;SACvE;KACJ;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;AACrD,YAAA,GAAG,CAAC,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SAClD;aAAM;AACH,YAAA,GAAG,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,OAAO,IAAIA,OAAY,CAAC,CAAC;SACtE;KACJ;IAES,iBAAiB,GAAA;AACvB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;AACrD,YAAA,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SACnD;aAAM;YACH,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,OAAO,IAAIA,OAAY,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SACzF;KACJ;;IAGS,iBAAiB,GAAA;AACvB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAAC,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC;QACtF,IAAI,CAAC,EAAE;AACH,YAAA,IAAI,CAAC,MAAO,CAAC,YAAY,CACrB,CAAC,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EACpE,IAAI,EACJ,IAAI,EACJ,CAAC,EACD,IAAI,EACJ,IAAI,EACJ,MAAK;AACD,gBAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,IAAI,CAAC;AAC7B,aAAC,CACJ,CAAC;SACL;aAAM;AACH,YAAA,IAAI,CAAC,MAAO,CAAC,YAAY,CAAC,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SACtD;KACJ;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;KACpE;IAES,iBAAiB,GAAA;AACvB,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;KACnE;AACJ;;ACjKD,MAAM,qBAAqB,GAA6B,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AAU9F,MAAO,cAAe,SAAQ,OAAO,CAAA;AAavC,IAAA,WAAA,CAAY,UAAiC,EAAE,EAAA;QAC3C,KAAK,CAAC,OAAO,CAAC,CAAC;QAHT,IAAiB,CAAA,iBAAA,GAAW,CAAC,CAAC;QAiB9B,IAAa,CAAA,aAAA,GAAG,MAAK;AAC3B,YAAA,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;AAC3C,SAAC,CAAA;AAoES,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,SAAkB,KAAI;YACnD,IAAI,CAAC,SAAS,EAAE;gBACZ,IAAI,CAAC,KAAK,EAAE,CAAC;aAChB;AACL,SAAC,CAAA;AAgID;;;AAGG;AACK,QAAA,IAAA,CAAA,eAAe,GAAG,CAAC,KAAY,KAAI;YAEvC,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAEpD,IAAI,SAAS,IAAI,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;;gBAGvC,IAAI,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AACxD,gBAAA,IAAI,IAAI,GAAG,SAAS,GAAG,IAAI,CAAC,UAAU,EAClC,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC;AAC5B,gBAAA,KAAK,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;oBAC5B,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAC5B,oBAAA,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC;AACf,oBAAA,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBAC3B;;AAGD,gBAAA,SAAS,CAAC,OAAO,GAAG,GAAG,CAAC;gBAExB,IAAI,gBAAgB,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBAC/D,IAAI,gBAAgB,EAAE;AAClB,oBAAA,gBAAgB,CAAC,OAAO,GAAG,GAAG,CAAC;AAC/B,oBAAA,gBAAgB,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;;oBAGtC,IAAI,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;oBAC5D,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,SAAS,EAAE;AACvD,wBAAA,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;qBAC1C;iBACJ;AAED,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;aACrD;AACL,SAAC,CAAA;AA5PG,QAAA,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,qBAAqB,CAAC,CAAC;AAClD,QAAA,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,IAAI,CAAA,eAAA,EAAkB,IAAI,CAAC,IAAI,CAAA,CAAE,CAAC;QAC3D,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,GAAI,EAAc,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;AAC/E,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;QACxB,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,YAAY,IAAI,GAAG,CAAC;AACjD,QAAA,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC,CAAC;AAC/B,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,SAAS,IAAI,EAAE,CAAC;AAC1C,QAAA,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,SAAS,GAAG,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;QAClE,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,IAAI,CAAC;AAC/C,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;KAC1B;IAMS,aAAa,GAAA;AACnB,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;KAC9D;AAES,IAAA,SAAS,CAAC,UAAkB,EAAA;AAClC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACtD,YAAA,IAAI,CAAC,KAAK,UAAU,EAAE;AAClB,gBAAA,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;aAClC;iBAAM;AACH,gBAAA,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;aAChC;SACJ;KACJ;AAES,IAAA,cAAc,CAAC,UAAkB,EAAA;QACvC,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;KACnD;AAES,IAAA,oBAAoB,CAAC,UAAkB,EAAA;AAC7C,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,QAAQ,GAAG,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AAC5C,YAAA,IAAI,QAAQ,GAAG,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC;AAC1C,YAAA,KAAK,IAAI,CAAC,GAAG,QAAQ,EAAE,GAAG,GAAG,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,QAAQ,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC9G,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;aAC5C;SACJ;KACJ;AAES,IAAA,sBAAsB,CAAC,UAAkB,EAAA;AAC/C,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,QAAQ,GAAG,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AAC5C,YAAA,IAAI,QAAQ,GAAG,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC;AAC1C,YAAA,KAAK,IAAI,CAAC,GAAG,QAAQ,EAAE,GAAG,GAAG,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,QAAQ,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC9G,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC;gBAClC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;gBAC5B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;aAC3C;SACJ;KACJ;IAEe,MAAM,GAAA;QAClB,KAAK,CAAC,MAAM,EAAE,CAAC;QACf,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,WAAW,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAC7D,IAAI,CAAC,qBAAqB,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;KAC9C;IAEe,UAAU,GAAA;QACtB,KAAK,CAAC,UAAU,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;AAChE,QAAA,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;KAC1F;IAEe,YAAY,GAAA;QACxB,KAAK,CAAC,YAAY,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;AAEjE,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;SAC3C;AAED,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;AAC9D,QAAA,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;KAC3F;IAQM,KAAK,GAAA;QACR,IAAI,CAAC,IAAI,EAAE,CAAC;AACZ,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC;AACrC,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC5C,YAAA,cAAc,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;SAC9B;KACJ;IAES,WAAW,GAAA;AACjB,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBACxD,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAC5B,gBAAA,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACxB,gBAAA,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;AACvB,gBAAA,EAAE,CAAC,OAAO,GAAG,GAAG,CAAC;aACpB;AACD,YAAA,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;SAChC;KACJ;AAEM,IAAA,SAAS,CAAC,MAAe,EAAA;QAC5B,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,MAAM,CAAC,MAAa,CAAC,CAAC;QAC3C,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;AAEM,IAAA,WAAW,CAAC,KAAY,EAAA;AAC3B,QAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC5B,QAAA,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAC3B,QAAA,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;AAC1B,QAAA,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC;;AAEpB,QAAA,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;KAChC;AAED;;;AAGG;AACH,IAAA,IAAW,MAAM,GAAA;QACb,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACpD,OAAO,SAAS,IAAI,SAAS,CAAC,MAAM,IAAI,CAAC,SAAS,CAAC;KACtD;AAED,IAAA,IAAW,YAAY,GAAA;QACnB,OAAO,IAAI,CAAC,aAAa,CAAC;KAC7B;IAED,IAAW,YAAY,CAAC,GAAW,EAAA;AAC/B,QAAA,IAAI,GAAG,KAAK,IAAI,CAAC,aAAa,EAAE;AAC5B,YAAA,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;AACzB,YAAA,IAAI,IAAI,CAAC,SAAS,EAAE;gBAChB,IAAI,CAAC,KAAK,EAAE,CAAC;gBACb,IAAI,CAAC,IAAI,EAAE,CAAC;aACf;SACJ;KACJ;AAED,IAAA,IAAW,SAAS,GAAA;AAChB,QAAA,OAAO,IAAI,CAAC,oBAAoB,KAAK,CAAC,CAAC,CAAC;KAC3C;AAED,IAAA,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,UAAU,CAAC;KAC1B;IAES,SAAS,GAAA;QACf,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;AAC1C,YAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,gBAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;aACvB;iBAAM;gBACH,IAAI,CAAC,KAAK,EAAE,CAAC;aAChB;SACJ;KACJ;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;AAEjB,YAAA,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;gBAClD,IAAI,CAAC,IAAI,EAAE,CAAC;aACf;AAED,YAAA,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;AAEvC,YAAA,IAAI,CAAC,oBAAoB,GAAG,WAAW,CAAC,MAAK;gBACzC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACjB,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;gBAE1D,qBAAqB,CAAC,MAAK;AACvB,oBAAA,IAAI,IAAI,CAAC,MAAM,KAAK,WAAW,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE;wBAC5E,IAAI,CAAC,UAAU,EAAE,CAAC;AAClB,wBAAA,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;qBAC1C;AACL,iBAAC,CAAC,CAAC;AAEP,aAAC,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAEvB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAC1C;KACJ;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;YACrB,IAAI,CAAC,cAAc,EAAE,CAAC;AACtB,YAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,YAAA,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAC1C;KACJ;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAC3C;KACJ;IAES,cAAc,GAAA;AACpB,QAAA,aAAa,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;AACzC,QAAA,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC,CAAC;KAClC;AA0CD;;;;AAIG;AACH,IAAA,eAAe,CAAC,KAAa,EAAE,eAAe,GAAG,KAAK,EAAA;QAClD,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;KAC5D;AAED;;;;AAIG;AACO,IAAA,qBAAqB,CAAC,KAAa,EAAE,kBAA2B,KAAK,EAAE,kBAA2B,KAAK,EAAA;AAE7G,QAAA,IAAI,KAAK,IAAI,IAAI,CAAC,aAAa,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;AAE7E,YAAA,IAAI,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;AACvC,YAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,YAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YAExB,IAAI,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;YACvD,IAAI,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AAExD,YAAA,IAAI,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,EAC9C,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;AAEvC,YAAA,IAAI,YAAY,GAAG,SAAS,IAAI,aAAa,CAAC;YAC9C,IAAI,YAAY,EAAE;AACd,gBAAA,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;aACxC;YAED,IAAI,aAAa,EAAE;AACf,gBAAA,IAAI,aAAa,CAAC,MAAM,EAAE;AACtB,oBAAA,IAAI,CAAC,iBAAiB,GAAG,aAAa,CAAC;iBAC1C;qBAAM;AACH,oBAAA,aAAa,CAAC,OAAO,GAAG,CAAC,CAAC;AAC1B,oBAAA,aAAa,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBACtC;aACJ;YAED,IAAI,SAAS,EAAE;AAEX,gBAAA,SAAS,CAAC,OAAO,GAAG,GAAG,CAAC;AACxB,gBAAA,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;gBAE9B,qBAAqB,CAAC,MAAK;AACvB,oBAAA,IAAI,SAAS,CAAC,MAAM,IAAI,eAAe,EAAE;AAErC,wBAAA,SAAS,CAAC,OAAO,GAAG,GAAG,CAAC;;wBAGxB,IAAI,YAAY,EAAE;AACd,4BAAA,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,CAAC;yBAC9C;wBAED,IAAI,aAAa,EAAE;AACf,4BAAA,aAAa,CAAC,OAAO,GAAG,GAAG,CAAC;AAC5B,4BAAA,aAAa,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;yBACtC;wBAED,IAAI,gBAAgB,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;wBAC/D,IAAI,gBAAgB,EAAE;AAClB,4BAAA,gBAAgB,CAAC,OAAO,GAAG,GAAG,CAAC;AAC/B,4BAAA,gBAAgB,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;yBACzC;qBACJ;AACL,iBAAC,CAAC,CAAC;gBAEH,IAAI,CAAC,eAAe,EAAE;AAClB,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;iBAC/E;aACJ;SACJ;KACJ;AACJ;;AC/VD,MAAM/C,iBAAe,GAAG,CAAA;;;;;;OAMjB,CAAC;AAGR,MAAMD,UAAQ,GACV,CAAA;;;;;;;WAOO,CAAC;AAEZ,MAAM,qBAAqB,GACvB,CAAA,2HAAA,CAA6H,CAAC;AAElI,MAAM,eAAgB,SAAQ,IAAW,CAAA;AACrC,IAAA,WAAA,CAAY,MAAmB,EAAA;AAC3B,QAAA,KAAK,CAAC;AACF,YAAA,QAAQ,EAAE,cAAc,CAAC,qBAAqB,EAAE;AAC5C,gBAAA,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI;AACxB,gBAAA,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI;AACvB,gBAAA,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,aAAa,MAAM,CAAC,KAAK,CAAC,OAAO,MAAM,GAAG,EAAE;aAC5E,CAAC;AACF,YAAA,GAAG,MAAM;AACZ,SAAA,CAAC,CAAC;AAYG,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,KAAY,KAAI;AAC7C,YAAA,IAAI,IAAI,CAAC,EAAE,EAAE;AACT,gBAAA,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,EAAE;oBAC5B,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;iBACtD;qBAAM;oBACH,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,2BAA2B,CAAC,CAAC;iBACzD;aACJ;AACL,SAAC,CAAA;QAES,IAAQ,CAAA,QAAA,GAAG,MAAK;AACtB,YAAA,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE;AAC1B,gBAAA,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;aAClC;iBAAM;AACH,gBAAA,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC,CAAC;aACzD;AACL,SAAC,CAAA;QAES,IAAW,CAAA,WAAA,GAAG,MAAK;AACzB,YAAA,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;AAC3B,SAAC,CAAA;KA/BA;AAEe,IAAA,MAAM,CAAC,MAAY,EAAA;AAC/B,QAAA,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AACrB,QAAA,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACnE,QAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,EAAG,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAClD,IAAI,CAAC,EAAG,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AACxD,QAAA,OAAO,IAAI,CAAC;KACf;IAwBe,MAAM,GAAA;QAClB,KAAK,CAAC,MAAM,EAAE,CAAC;AACf,QAAA,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;KACvE;AACJ,CAAA;AAED;;;AAGG;AACG,MAAO,aAAc,SAAQ,OAAO,CAAA;AAUtC,IAAA,WAAA,CAAY,UAAgC,EAAE,EAAA;AAC1C,QAAA,KAAK,CAAC;AACF,YAAA,IAAI,EAAE,eAAe;AACrB,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;AAgEA,QAAA,IAAA,CAAA,QAAQ,GAAG,CAAC,KAAY,KAAI;AAC/B,YAAA,IAAI,CAAC,KAAK,CAAC,mBAAmB,EAAE;gBAC5B,IAAI,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;AAC/C,gBAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACjC,gBAAA,IAAI,KAAK,CAAC,WAAW,EAAE,EAAE;AACrB,oBAAA,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;iBACzC;qBAAM;AACH,oBAAA,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;iBACvC;aACJ;AACL,SAAC,CAAA;AAEM,QAAA,IAAA,CAAA,WAAW,GAAG,CAAC,KAAY,KAAI;AAClC,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC9C,IAAI,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;gBAC7B,IAAI,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;oBACzB,EAAE,CAAC,MAAM,EAAE,CAAC;oBACZ,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC9B,MAAM;iBACT;aACJ;AACL,SAAC,CAAA;AAnFG,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CAAC;AACtB,YAAA,KAAK,EAAE,gBAAgB;AACvB,YAAA,GAAG,EAAE,EAAE;AACP,YAAA,OAAO,EAAE,IAAI;AACb,YAAA,OAAO,EAAE,KAAK;AACd,YAAA,KAAK,EAAE,GAAG;AACV,YAAA,SAAS,EAAE,GAAG;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC;AACnB,YAAA,QAAQ,EAAEA,UAAQ;AACrB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC;AAC/B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,yBAAyB,CAAC;AACvD,YAAA,IAAI,EAAEC,iBAAe;AACxB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;KACzB;IAEQ,MAAM,GAAA;QAEX,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;AAC9C,QAAA,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;QACnD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,SAAU,CAAC,CAAC;AAE9C,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,EAAG,CAAC,aAAa,CAAC,+BAA+B,CAAC,CAAC;AAClF,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,EAAG,CAAC,aAAa,CAAC,6BAA6B,CAAC,CAAC;QAE9E,IAAI,CAAC,OAAO,CAAC,WAAW,CAAE,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,GAAI,CAAC,WAAsB,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;AAEvG,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAU,KAAI;AAChD,YAAA,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACjC,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;AACtD,YAAA,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AACzC,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACxD,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAE9D,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;IAES,WAAW,GAAA;AACjB,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AACjC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACpC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B;KACJ;AAES,IAAA,kBAAkB,CAAC,KAAY,EAAA;QACrC,OAAO,IAAI,eAAe,CAAC;AACvB,YAAA,KAAK,EAAE,KAAK;AACf,SAAA,CAAC,CAAC;KACN;IAyBQ,UAAU,GAAA;KAElB;IAEQ,YAAY,GAAA;AACjB,QAAA,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;KACvB;AAEJ;;ACrLD,MAAM,aAAa,GAAqB,CAAC,QAAQ,CAAC,CAAC;AAEnD,MAAMD,UAAQ,GAAG,CAAA;;;;;;;WAON,CAAC;AAEZ,MAAM,MAAO,SAAQ,IAAU,CAAA;AAkB3B,IAAA,WAAA,CAAY,UAAyB,EAAE,EAAA;AACnC,QAAA,KAAK,CAAC;AACF,YAAA,QAAQ,EAAE,cAAc,CAACA,UAAQ,EAAE;AAC/B,gBAAA,KAAK,EAAE,OAAO,CAAC,KAAK,IAAI,EAAE;aAC7B,CAAC;AACL,SAAA,CAAC,CAAC;QAyCG,IAAS,CAAA,SAAA,GAAG,MAAK;AACvB,YAAA,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAO,CAAC,WAAW,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACpG,SAAC,CAAA;AA+BS,QAAA,IAAA,CAAA,aAAa,GAAG,CAAC,CAAa,KAAI;;AAExC,YAAA,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC;YACtB,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,CAAC,CAAC,eAAe,EAAE,CAAC;;YAEpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;AACzF,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,eAAe,GAAG,CAAC,CAAa,KAAI;AAC1C,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAC1B,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,QAAQ,GAAG,CAAC,CAAQ,KAAI;;AAE9B,YAAA,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC;YACtB,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,CAAC,CAAC,eAAe,EAAE,CAAC;;YAEpB,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AAC5C,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,YAAY,GAAG,CAAC,CAAa,KAAI;;AAEvC,YAAA,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC;YACtB,CAAC,CAAC,cAAc,EAAE,CAAC;AAEnB,YAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC;AAE5B,YAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,KAAK,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,CAAC;YAE1F,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAC1D,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAC1D,SAAC,CAAA;AAQS,QAAA,IAAA,CAAA,YAAY,GAAG,CAAC,CAAa,KAAI;;AAEvC,YAAA,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC;YACtB,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,CAAC,CAAC,eAAe,EAAE,CAAC;YAEpB,IAAI,IAAI,GAAG,IAAI,CAAC,MAAO,CAAC,qBAAqB,EAAE,CAAC;AAChD,YAAA,IAAI,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;AACtD,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC;AACnC,YAAA,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC;YAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,GAAG,EAAE,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC;AACvF,SAAC,CAAA;QAES,IAAU,CAAA,UAAA,GAAG,MAAK;YACxB,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;YACzD,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AACjE,SAAC,CAAA;;QAhIG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;QAEvD,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,IAAI,GAAG,CAAC;QACnC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC;QAC/B,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC;;QAG/B,IAAI,CAAC,eAAe,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAE1D,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AAEpB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;KACtB;AAEe,IAAA,MAAM,CAAC,MAAW,EAAA;AAE9B,QAAA,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAErB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAE,CAAC;QAC/C,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,KAAK,EAAE,EAAE;YAC9B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;SACtC;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;QAClD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACpD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;QAC9C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAmB,OAAO,CAAC,CAAC;QAErD,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC;QAEvC,IAAI,CAAC,WAAW,EAAE,CAAC;AAEnB,QAAA,OAAO,IAAI,CAAC;KACf;IAMD,IAAW,KAAK,CAAC,GAAW,EAAA;AACxB,QAAA,IAAI,GAAG,KAAK,IAAI,CAAC,MAAM,EAAE;AACrB,YAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAC/C,IAAI,CAAC,MAAO,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;AAC5C,YAAA,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAO,CAAC,WAAW,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAChG,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SAC/D;KACJ;AAED,IAAA,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;IAES,WAAW,GAAA;QACjB,IAAI,CAAC,MAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;;QAE9D,IAAI,CAAC,MAAO,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAChE,IAAI,CAAC,MAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAC7D,IAAI,CAAC,MAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KACzD;IAES,YAAY,GAAA;QAClB,IAAI,CAAC,MAAO,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;;QAEjE,IAAI,CAAC,MAAO,CAAC,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACnE,IAAI,CAAC,MAAO,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAChE,IAAI,CAAC,MAAO,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KAC5D;AAqCS,IAAA,UAAU,CAAC,CAAS,EAAA;AAC1B,QAAA,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAO,CAAC,WAAW,EAAE;YACzC,IAAI,CAAC,QAAS,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,SAAU,CAAC,KAAK,CAAC,KAAK,GAAG,CAAA,EAAG,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,WAAW,CAAA,CAAA,CAAG,CAAC;SACtG;KACJ;IAoBe,MAAM,GAAA;QAClB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,KAAK,CAAC,MAAM,EAAE,CAAC;KAClB;AACJ;;AC7KD,MAAM,YAAY,GAAoB,CAAC,OAAO,CAAC,CAAC;AAEhD,MAAMA,UAAQ,GACV,CAAA;;;WAGO,CAAC;AAEZ,IAAI,gBAAgB,GAAG,CAAC,CAAC;AAEzB,MAAM,KAAM,SAAQ,IAAU,CAAA;AAQ1B,IAAA,WAAA,CAAY,UAAwB,EAAE,EAAA;AAClC,QAAA,KAAK,CAAC;AACF,YAAA,QAAQ,EAAE,cAAc,CAACA,UAAQ,EAAE;AAC/B,gBAAA,EAAE,EAAE,CAAA,MAAA,EAAS,gBAAgB,EAAE,CAAE,CAAA;AACjC,gBAAA,KAAK,EAAE,OAAO,CAAC,KAAK,IAAI,EAAE;aAC7B,CAAC;AACL,SAAA,CAAC,CAAC;AA8CG,QAAA,IAAA,CAAA,QAAQ,GAAG,CAAC,CAAQ,KAAI;;YAE9B,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;AAChC,SAAC,CAAA;;QA9CG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;QAEtD,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,IAAI,MAAM,CAAC;AAEtC,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;KACtB;AAEe,IAAA,MAAM,CAAC,MAAW,EAAA;AAE9B,QAAA,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAErB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAE,CAAC;QAC9C,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,KAAK,EAAE,EAAE;YAC9B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;SACtC;QACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAmB,OAAO,CAAC,CAAC;QAErD,IAAI,CAAC,WAAW,EAAE,CAAC;AAEnB,QAAA,OAAO,IAAI,CAAC;KACf;IAED,IAAW,KAAK,CAAC,GAAW,EAAA;AACxB,QAAA,IAAI,GAAG,KAAK,IAAI,CAAC,MAAM,EAAE;AACrB,YAAA,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;YAClB,IAAI,CAAC,MAAO,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACjC,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SAC9D;KACJ;AAED,IAAA,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;IAES,WAAW,GAAA;QACjB,IAAI,CAAC,MAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KACzD;IAES,YAAY,GAAA;QAClB,IAAI,CAAC,MAAO,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KAC5D;IAOe,MAAM,GAAA;QAClB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,KAAK,CAAC,MAAM,EAAE,CAAC;KAClB;AACJ;;AC5ED,MAAM,iBAAiB,GAAG,CAAA,giEAAA,CAAkiE,CAAC;AAC7jE,MAAM,mBAAmB,GAAG,CAAA;;;;CAI3B,CAAC;AACF,MAAM,yBAAyB,GAAG,CAAA;;;;;;;;;;;;;;;OAe3B,CAAC;AACR,MAAM,mBAAmB,GAAG,CAAA;g3BACo1B,CAAC;AAGj3B,MAAMA,UAAQ,GACV,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WA2CO,CAAC;AAEZ,MAAMC,iBAAe,GAAG,CAAA;;;;;;;;;;;;;;;OAejB,CAAC;AAER,MAAM,SAAS,GAAG,CAAC,CAAC;AAEpB;;AAEG;AACG,MAAO,QAAS,SAAQ,OAAO,CAAA;AAsCjC,IAAA,WAAA,CAAY,UAA2B,EAAE,EAAA;QACrC,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC;AAC/B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAClD,YAAA,IAAI,EAAEA,iBAAe;AACxB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CAAC;AACtB,YAAA,KAAK,EAAE,qBAAqB;AAC5B,YAAA,OAAO,EAAE,KAAK;AACd,YAAA,OAAO,EAAE,IAAI;AACb,YAAA,GAAG,EAAE,EAAE;AACP,YAAA,IAAI,EAAE,EAAE;AACR,YAAA,KAAK,EAAE,GAAG;AACb,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAU,KAAI;AAChD,YAAA,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACjC,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC;AACnB,YAAA,QAAQ,EAAED,UAAQ;AACrB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AAEjC,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,MAAM,CAAC;AACpC,YAAA,KAAK,EAAE,aAAa;AACpB,YAAA,GAAG,EAAE,CAAC;AACT,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,MAAM,CAAC;AACpC,YAAA,KAAK,EAAE,aAAa;AACpB,YAAA,GAAG,EAAE,CAAC;AACT,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,KAAK,CAAC;AAC1C,YAAA,KAAK,EAAE,WAAW;AACrB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,KAAK,CAAC;AAC1C,YAAA,KAAK,EAAE,WAAW;AACrB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC;AACrB,YAAA,KAAK,EAAE,OAAO;AACd,YAAA,GAAG,EAAE,CAAC;AACT,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,MAAM,CAAC;AACxB,YAAA,KAAK,EAAE,UAAU;AACjB,YAAA,GAAG,EAAE,CAAC;AACT,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC;AACrB,YAAA,KAAK,EAAE,YAAY;AACnB,YAAA,GAAG,EAAE,CAAC;AACT,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,MAAM,CAAC;AACvB,YAAA,KAAK,EAAE,SAAS;AAChB,YAAA,GAAG,EAAE,CAAC;AACT,SAAA,CAAC,CAAC;;;;AAKH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC;AACzB,YAAA,KAAK,EAAE,WAAW;AAClB,YAAA,GAAG,EAAE,SAAS;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC;AACzB,YAAA,KAAK,EAAE,WAAW;AAClB,YAAA,GAAG,EAAE,SAAS;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC;AACzB,YAAA,KAAK,EAAE,WAAW;AAClB,YAAA,GAAG,EAAE,SAAS;AACjB,SAAA,CAAC,CAAC;;;;AAKH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC;AACzB,YAAA,KAAK,EAAE,WAAW;AAClB,YAAA,GAAG,EAAE,SAAS;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC;AACzB,YAAA,KAAK,EAAE,WAAW;AAClB,YAAA,GAAG,EAAE,SAAS;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC;AACzB,YAAA,KAAK,EAAE,WAAW;AAClB,YAAA,GAAG,EAAE,SAAS;AACjB,SAAA,CAAC,CAAC;;;;AAKH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC;AAC1B,YAAA,KAAK,EAAE,YAAY;AACnB,YAAA,GAAG,EAAE,GAAG;AACX,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC;AAC1B,YAAA,KAAK,EAAE,YAAY;AACnB,YAAA,GAAG,EAAE,GAAG;AACX,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC;AAC1B,YAAA,KAAK,EAAE,YAAY;AACnB,YAAA,GAAG,EAAE,GAAG;AACX,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC;AACzB,YAAA,KAAK,EAAE,WAAW;AAClB,YAAA,GAAG,EAAE,GAAG;AACX,SAAA,CAAC,CAAC;KACN;AAEM,IAAA,SAAS,CAAC,KAAY,EAAA;AACzB,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC;QACpC,IAAI,CAAC,OAAO,EAAE,CAAC;KAClB;IAEe,MAAM,GAAA;QAElB,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,SAAU,CAAC,CAAC;AAE9C,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE;AAChB,YAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,wBAAwB,CAAC,CAAC;AACjF,YAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,yBAAyB,CAAC,CAAC;AACpF,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,qBAAqB,CAAC,CAAC;AAClE,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,wBAAwB,CAAC,CAAC;AACxE,YAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC;AACtE,YAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC;AACtE,YAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC;AACtE,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,wBAAwB,CAAC,CAAC;AACxE,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,qBAAqB,CAAC,CAAC;SACrE;AAED,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;AACtD,YAAA,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AACzC,SAAC,CAAC,CAAC;QAEH,IAAI,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,CAAE,CAAC;AAEzD,QAAA,IAAI,UAAU,GAAG,IAAI,YAAY,CAAC;YAC9B,SAAS,EAAE,CAAC,sBAAsB,CAAC;AACnC,YAAA,QAAQ,EAAE,IAAI;AACd,YAAA,IAAI,EAAE,iBAAiB;AACvB,YAAA,KAAK,EAAE,6CAA6C;AACvD,SAAA,CAAC,CAAC;AACH,QAAA,UAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAEjC,QAAA,IAAI,YAAY,GAAG,IAAI,YAAY,CAAC;YAChC,SAAS,EAAE,CAAC,sBAAsB,CAAC;AACnC,YAAA,QAAQ,EAAE,IAAI;AACd,YAAA,IAAI,EAAE,mBAAmB;AACzB,YAAA,KAAK,EAAE,sDAAsD;AAChE,SAAA,CAAC,CAAC;AACH,QAAA,YAAY,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QAEnC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;YACjD,MAAM,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,QAAQ,CAAC,GAAU,CAAC;YACvD,IAAI,QAAQ,EAAE;gBACV,GAAG,CAAC,KAAK,EAAE,CAAC;aACf;iBAAM;gBACH,GAAG,CAAC,IAAI,EAAE,CAAC;aACd;AACL,SAAC,CAAC,CAAC;QAEH,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;YACnD,MAAM,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,QAAQ,CAAC,GAAG,CAAC;YAChD,IAAI,QAAQ,EAAE;gBACV,GAAG,CAAC,QAAQ,EAAE,CAAC;aAClB;iBAAM;gBACH,GAAG,CAAC,UAAU,EAAE,CAAC;aACpB;AACL,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,kBAAkB,GAAG,IAAI,YAAY,CAAC;YACtC,SAAS,EAAE,CAAC,sBAAsB,CAAC;AACnC,YAAA,QAAQ,EAAE,IAAI,CAAC,MAAO,CAAC,YAAY;AACnC,YAAA,IAAI,EAAE,yBAAyB;AAC/B,YAAA,KAAK,EAAE,gCAAgC;AAC1C,SAAA,CAAC,CAAC;AACH,QAAA,kBAAkB,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QAEzC,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;AACzD,YAAA,IAAI,CAAC,MAAO,CAAC,YAAY,GAAG,QAAQ,CAAC;AACzC,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,oBAAoB,GAAG,IAAI,YAAY,CAAC;YACxC,SAAS,EAAE,CAAC,sBAAsB,CAAC;AACnC,YAAA,QAAQ,EAAE,IAAI,CAAC,MAAO,CAAC,iBAAiB;AACxC,YAAA,IAAI,EAAE,mBAAmB;AACzB,YAAA,KAAK,EAAE,sCAAsC;AAChD,SAAA,CAAC,CAAC;AACH,QAAA,oBAAoB,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAE3C,QAAA,IAAI,IAAI,CAAC,MAAO,CAAC,iBAAiB,EAAE;YAChC,IAAI,CAAC,kBAAmB,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;YACjD,IAAI,CAAC,oBAAqB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;SACrD;aAAM;YACH,IAAI,CAAC,kBAAmB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;YAChD,IAAI,CAAC,oBAAqB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;SACrD;QAED,oBAAoB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;AAC3D,YAAA,IAAI,CAAC,MAAO,CAAC,iBAAiB,GAAG,QAAQ,CAAC;AAC1C,YAAA,IAAI,IAAI,CAAC,MAAO,CAAC,iBAAiB,EAAE;gBAChC,IAAI,CAAC,kBAAmB,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;gBACjD,IAAI,CAAC,oBAAqB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;aACrD;iBAAM;gBACH,IAAI,CAAC,kBAAmB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;gBAChD,IAAI,CAAC,oBAAqB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;aACrD;AACL,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;QAC9D,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;QAE9D,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAqB,CAAC,CAAC;QACvE,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAqB,CAAC,CAAC;QAEvE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAO,CAAC,CAAC;QACnC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;QAEzC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAO,CAAC,CAAC;QACnC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;QAEvC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;QAEzC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;QAEzC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;;;;AAK1C,QAAA,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,KAAK,CAAC;AACjD,QAAA,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAC5C,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,KAAK,GAAG,GAAG,CAAC;AACvC,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,QAAQ,CAAC;AACvD,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAC/C,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,QAAQ,GAAG,GAAG,CAAC;AAC1C,SAAC,CAAC,CAAC;;;;QAKH,IAAI,CAAC,qBAAqB,CAAC,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,oBAAoB,CAAC;AACrE,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AAC3D,YAAA,IAAI,CAAC,MAAO,CAAC,oBAAoB,GAAG,GAAG,CAAC;AAC5C,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,oBAAoB,CAAC;AACrE,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AAC3D,YAAA,IAAI,CAAC,MAAO,CAAC,oBAAoB,GAAG,GAAG,CAAC;YACxC,IAAI,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,QAAQ,CAAC,UAAwB,CAAC;AACrE,YAAA,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC;AACxB,SAAC,CAAC,CAAC;;;;QAKH,IAAI,0BAA0B,GAAG,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,QAAQ,CAAC,mBAA0C,CAAC;QAC5G,IAAI,0BAA0B,EAAE;YAC5B,IAAI,CAAC,4BAA4B,CAAC,KAAK,GAAG,0BAA0B,CAAC,QAAQ,CAAC;YAC9E,IAAI,CAAC,4BAA4B,CAAC,KAAK,GAAG,0BAA0B,CAAC,QAAQ,CAAC;SACjF;AAED,QAAA,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,GAAW,KAAI;YACjE,IAAI,0BAA0B,GAAG,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,QAAQ,CAAC,mBAA0C,CAAC;YAC5G,IAAI,0BAA0B,EAAE;AAC5B,gBAAA,0BAA0B,CAAC,QAAQ,GAAG,GAAG,CAAC;aAC7C;AACL,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,GAAW,KAAI;YACjE,IAAI,0BAA0B,GAAG,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,QAAQ,CAAC,mBAA0C,CAAC;YAC5G,IAAI,0BAA0B,EAAE;AAC5B,gBAAA,0BAA0B,CAAC,QAAQ,GAAG,GAAG,CAAC;aAC7C;AACL,SAAC,CAAC,CAAC;;;;AAKH,QAAA,IAAI,CAAC,MAAM,CAAC,EAAG,CAAC,aAAa,CAAoB,SAAS,CAAE,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,CAAQ,KAAI;AACjG,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC,cAAc,CAAE,CAAC,CAAC,MAA4B,CAAC,KAAK,CAAC,CAAC;YAC7E,IAAI,CAAC,EAAE;AACH,gBAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;aACrB;AACL,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AAC5C,YAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,gBAAA,IAAI,CAAC,cAAc,CAAC,uBAAuB,GAAG,GAAG,CAAC;aACrD;AACL,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAC9C,IAAI,IAAI,CAAC,cAAc;AACnB,gBAAA,IAAI,CAAC,cAAc,CAAC,OAAO,GAAG,GAAG,CAAC;AAC1C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAChD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ;gBACnD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC7C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAChD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ;gBACnD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC7C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAChD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ;gBACnD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC7C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAChD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ;gBACnD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC7C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAChD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ;gBACnD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC7C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAChD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ;gBACnD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC7C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YACjD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS;gBACpD,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC9C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YACjD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS;gBACpD,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC9C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YACjD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS;gBACpD,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC9C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAChD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS;gBACpD,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;AAC9C,SAAC,CAAC,CAAC;AAGH,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;AAC3D,YAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;SACpE;QAED,IAAI,CAAC,YAAY,EAAE,CAAC;KACvB;IAES,OAAO,GAAA;AACb,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;QAE5B,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,GAAG,GAAG,CAAC;QAEvD,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,uBAAuB,GAAG,CAAC,CAAC,uBAAuB,GAAG,IAAI,CAAC,MAAO,CAAC,uBAAuB,CAAC;QAEtH,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAO,CAAC,QAAQ,CAAC;QAC7D,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAE7B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAO,CAAC,QAAQ,CAAC;QAC7D,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAE7B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC;QAChE,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;KAChC;IAES,YAAY,GAAA;AAClB,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChD,gBAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;aAC3C;SACJ;KACJ;AAES,IAAA,WAAW,CAAC,CAAQ,EAAA;AAC1B,QAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QAClB,IAAI,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAC3C,QAAA,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC;AACnB,QAAA,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,MAAM,CAAC,EAAG,CAAC,aAAa,CAAC,SAAS,CAAE,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,MAAM,CAAC,EAAG,CAAC,aAAa,CAAoB,SAAS,CAAE,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC;KAC/E;AAES,IAAA,cAAc,CAAC,CAAQ,EAAA;KAChC;AACJ;;ACxkBD,MAAM,IAAI,CAAA;AAIN,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;KAClB;AAEM,IAAA,IAAI,CAAC,GAAQ,EAAA;QAChB,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC;KAC/B;AAEM,IAAA,IAAI,CAAC,GAAQ,EAAA;QAChB,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC;KAChC;IAEM,MAAM,GAAA;AACT,QAAA,OAAO,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC;KAC3B;IAEM,QAAQ,GAAA;AACX,QAAA,OAAO,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC;KAC3B;AACJ,CAAA;AAED,MAAM,GAAG,CAAA;AAML,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;KACjC;AAED,IAAA,IAAW,EAAE,GAAA;QACT,OAAO,IAAI,CAAC,IAAI,CAAC;KACpB;;AAVM,GAAW,CAAA,WAAA,GAAW,CAAC;;ACDlC;;AAEG;AACG,MAAO,eAAgB,SAAQ,OAAO,CAAA;AAoBxC,IAAA,WAAA,CAAY,UAAkC,EAAE,EAAA;QAC5C,KAAK,CAAC,OAAO,CAAC,CAAC;QAJT,IAAW,CAAA,WAAA,GAAG,KAAK,CAAC;QACpB,IAAU,CAAA,UAAA,GAAG,KAAK,CAAC;AAKzB,QAAA,IAAI,CAAC,KAAK,GAAG,iBAAiB,CAAC;AAE/B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,MAAM,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;AAEpB,QAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;AACpB,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AAEnB,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAElC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,GAAG,CAAC;AAExC,QAAA,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC;AAE1B,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;KAC7B;AAED,IAAA,OAAO,6BAA6B,CAAC,GAAiB,EAAE,MAAc,EAAE,UAAkB,EAAE,KAAa,EAAE,KAAW,EAAE,OAAgB,EAAE,GAAiB,EAAA;QACvJ,MAAM,KAAK,GAAmB,EAAE,CAAC;AAEjC,QAAA,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,EACrB,CAAC,GAAG,GAAG,CAAC,EAAE,CAAC,KAAK,EAAE,EAClB,CAAC,GAAG,GAAG,CAAC,EAAE,CAAC,KAAK,EAAE,EAClB,CAAC,GAAG,GAAG,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QAEvB,IAAI,CAAC,GAAG,MAAM,CAAC,4BAA4B,CAAC,KAAK,CAAC,CAAC;QAEnD,IAAI,CAAC,CAAC,EAAE;AACJ,YAAA,CAAC,GAAG,MAAM,CAAC,4BAA4B,CAAC,MAAM,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC;SACjF;QAED,IAAI,CAAC,EAAE;YACH,IAAI,CAAC,GAAG,EAAE;AACN,gBAAA,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC;aAC1C;AAED,YAAA,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC;YAEnD,IAAI,OAAO,EAAE;AACT,gBAAA,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC;aACjB;iBAAM;gBACH,CAAC,IAAI,CAAC,CAAC;aACV;YAED,MAAM,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AAE9B,YAAA,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC;AAEjD,YAAA,IAAI,KAAK,IAAI,GAAG,EAAE;AACd,gBAAA,MAAM,eAAe,GAAG,IAAI,MAAM,EAAE,CAAC;AACrC,gBAAA,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;AAEpC,gBAAA,IAAI,MAAM,GAAG,EAAE,EACX,MAAM,GAAG,EAAE,CAAC;gBAEhB,IAAI,OAAO,GAAG,KAAK,CAAC;AACpB,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;AACjC,oBAAA,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACnB,oBAAA,MAAM,CAAC,GAAG,IAAI+C,KAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;oBACvD,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,KAAK,EAAE,CAAC;oBACxB,IAAI,CAAC,EAAE;wBACH,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC,oBAAoB,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;qBACvE;yBAAM;wBACH,OAAO,GAAG,IAAI,CAAC;wBACf,MAAM;qBACT;iBACJ;gBAED,IAAI,CAAC,OAAO,EAAE;AACV,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;AACjC,wBAAA,IAAI,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;wBACpB,KAAK,CAAC,CAAC,CAAC,GAAG;4BACP,GAAG,EAAE,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC3B,4BAAA,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;AACjB,4BAAA,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;AACjB,4BAAA,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;yBACpB,CAAC;qBACL;iBACJ;qBAAM;AACH,oBAAA,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;AACtB,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;wBACjC,KAAK,CAAC,CAAC,CAAC,GAAG;4BACP,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE;AAC/B,4BAAA,CAAC,EAAE,CAAC;AACJ,4BAAA,CAAC,EAAE,CAAC;AACJ,4BAAA,CAAC,EAAE,CAAC;yBACP,CAAC;qBACL;iBACJ;aACJ;iBAAM;AACH,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;oBACjC,KAAK,CAAC,CAAC,CAAC,GAAG;AACP,wBAAA,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE;AACtC,wBAAA,CAAC,EAAE,CAAC;AACJ,wBAAA,CAAC,EAAE,CAAC;AACJ,wBAAA,CAAC,EAAE,CAAC;qBACP,CAAC;iBACL;aACJ;AAED,YAAA,OAAO,KAAK,CAAC;SAChB;KACJ;IAEe,UAAU,GAAA;AACtB,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAC/D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;AACnE,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC;AACpE,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC;AACpE,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AAC/D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC;AACrE,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC;AAC1D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;AAC7D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAC/D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAE/D,YAAA,IAAI,IAAI,CAAC,qBAAqB,EAAE;AAC5B,gBAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,4BAA4B,EAAE,IAAI,CAAC,CAAC;aACjF;SACJ;KACJ;IAEe,YAAY,GAAA;AACxB,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AAC1D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AAC9D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;AAC/D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;AAC/D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAC1D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;AAChE,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AAC9C,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,4BAA4B,CAAC,CAAC;AACzE,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AAC1D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;SAC7D;KACJ;IAEM,uBAAuB,GAAA;AAC1B,QAAA,IAAI,CAAC,IAAI,CAAC,qBAAqB,EAAE;AAC7B,YAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AAClC,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,4BAA4B,EAAE,IAAI,CAAC,CAAC;SAClG;KACJ;IAEM,yBAAyB,GAAA;AAC5B,QAAA,IAAI,IAAI,CAAC,qBAAqB,EAAE;AAC5B,YAAA,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;AACnC,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,4BAA4B,CAAC,CAAC;SAC7F;KACJ;AAES,IAAA,YAAY,CAAC,CAAc,EAAA;AACjC,QAAA,MAAM,YAAY,GAAG,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC;QAC3C,IAAI,YAAY,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;YAC1C,YAAY,CAAC,WAAW,EAAE,CAAC;SAC9B;QAED,YAAY,CAAC,mBAAmB,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,CAAC;AACjD,QAAA,IAAI,YAAY,CAAC,UAAU,CAAC,cAAc,EAAE;AACxC,YAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;SACpE;aAAM;AACH,YAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC,SAAS,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;SACvE;KACJ;IAES,YAAY,GAAA;QAClB,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE;AACjD,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACrB;AACD,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC,SAAS,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;KACvE;AAES,IAAA,YAAY,CAAC,CAAc,EAAA;AACjC,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO;SACV;AAED,QAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;QAE1B,IAAI,CAAC,YAAY,EAAE,CAAC;AAEpB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AAExB,QAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AAEtB,QAAA,IAAI,CAAC,YAAY,GAAG,eAAe,CAAC,6BAA6B,CAC7D,IAAI,CAAC,MAAO,CAAC,MAAM,EACnB,IAAI,CAAC,MAAO,EACZ,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,QAAQ,EACb,CAAC,CAAC,GAAG,EACL,CAAC,CAAC,UAAU,GAAG,CAAC,EAChB,CAAC,CAAC,SAAS,CACd,IAAI,IAAI,CAAC;AAEV,QAAA,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,UAAU,CAAC;AAEpC,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;SACpC;KACJ;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;AAC1E,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;SACrF;KACJ;AAES,IAAA,4BAA4B,CAAC,CAAc,EAAA;AACjD,QAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;QAC1B,IAAI,CAAC,YAAY,EAAE,CAAC;AACpB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAC3D,IAAI,CAAC,EAAE;AACH,YAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAChC,YAAA,IAAI,MAAM,GAAG,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,SAAS,CAAC;AAChE,YAAA,IAAI,MAAM,GAAG,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,SAAS,CAAC;YAChE,MAAM,MAAM,GAAG,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;AAChC,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YACtD,IAAI,MAAM,GAAG,MAAM,IAAI,MAAM,GAAG,MAAM,EAAE;AACpC,gBAAA,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;gBAChD,OAAO;aACV;AAED,YAAA,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;AACnD,gBAAA,IAAI,CAAC,MAAO,CAAC,SAAS,CAClB,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CACtD,CAAC;aACL;iBAAM;AACH,gBAAA,IAAI,CAAC,MAAO,CAAC,SAAS,CAClB,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CACvD,CAAC;aACL;SACJ;KACJ;IAES,sBAAsB,GAAA;AAC5B,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;YACjE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,EAAG,CAAC;AACjE,YAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,gBAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACzC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;gBACzD,IAAI,CAAC,YAAY,EAAE,CAAC;aACvB;SACJ;KACJ;IAEM,YAAY,GAAA;AACf,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QAClB,IAAI,CAAC,UAAU,EAAE,CAAC;KACrB;AAES,IAAA,mBAAmB,CAAC,CAAc,EAAA;AACxC,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC,SAAS,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;AACpE,QAAA,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE;AACtC,YAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;SACvB;KACJ;AAES,IAAA,qBAAqB,CAAC,CAAc,EAAA;AAC1C,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,OAAO;aACV;AAED,YAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;AAE1B,YAAA,IAAI,CAAC,CAAC,MAAM,EAAE;AACV,gBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAE9B,gBAAA,IAAI,GAAG,CAAC,KAAK,GAAG,GAAG,EAAE;oBACjB,MAAM,WAAW,GAAG,IAAIA,KAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;oBAClF,IAAI,WAAW,EAAE;AACb,wBAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;AACpB,wBAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,yBAAyB,CACtC,WAAW,CAAC,MAAM,EAAE,EACpB,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAC7B,CAAC;AACF,wBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;wBACpB,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;wBAC/B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;wBAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;wBAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;qBAChC;iBACJ;qBAAM;AACH,oBAAA,IAAI,EAAE,GAAG,IAAI,CAAC,YAAY,EACtB,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,EACzB,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC;AAEnC,oBAAA,IAAI,EAAE,GAAG,IAAI,IAAI,EAAE,CAAC;oBACpB,IAAI,IAAIA,KAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,KAAKA,KAAG,CAAC,MAAM,EAAE;AACvE,wBAAA,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;qBACnD;iBACJ;aACJ;SACJ;KACJ;AAES,IAAA,uBAAuB,CAAC,CAAc,EAAA;QAC5C,IAAI,CAAC,YAAY,EAAE,CAAC;AACpB,QAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,GAAG,CAAE,CAAC;AACtE,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;SAC7C;KACJ;AAES,IAAA,sBAAsB,CAAC,CAAc,EAAA;AAC3C,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;QAEhC,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC,MAAM,EAAE;YAC/B,IAAI,CAAC,QAAS,CAAC,WAAW,CAAC,QAAQ,GAAG,GAAG,CAAC;YAC1C,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC,MAAM,GAAGC,OAAY,CAAC;AACxF,YAAA,IAAI,CAAC,GAAG,KAAK,EAAE;gBACX,CAAC,GAAG,KAAK,CAAC;aACb;AAAM,iBAAA,IAAI,CAAC,GAAG,KAAK,EAAE;gBAClB,CAAC,GAAG,KAAK,CAAC;aACb;YACD,GAAG,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YACnF,GAAG,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC9E;KACJ;IAEM,WAAW,GAAA;AACd,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;KAC3B;AAES,IAAA,WAAW,CAAC,CAAc,EAAA;AAChC,QAAA,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;AACnE,YAAA,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;AAClB,gBAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,gBAAA,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;aACnC;AAED,YAAA,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;SAClC;KACJ;IAES,MAAM,GAAA;AACZ,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACzB,YAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;YAChC,IAAI,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;AAE9B,YAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,gBAAA,CAAC,CAAC,WAAW,CAAC,QAAQ,GAAG,GAAG,CAAC;AAC7B,gBAAA,MAAM,EAAE,GAAG,IAAI,CAAC,YAAa,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;AAClE,gBAAA,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC;AACjB,gBAAA,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;AACd,gBAAA,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;AACd,gBAAA,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;aACjB;iBAAM;AACH,gBAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,oBAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oBACzB,IAAI,CAAC,UAAU,EAAE,CAAC;iBACrB;aACJ;AAED,YAAA,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBACtD,OAAO;aACV;AAED,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC;AAC9B,YAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,GAAG,EAAE;AACtB,gBAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;aACvB;iBAAM;gBACH,CAAC,CAAC,WAAW,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACvC,gBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI;AACd,qBAAA,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACzE,qBAAA,SAAS,EAAE,CAAC;AACjB,gBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE;AAC5B,oBAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;iBACvB;gBACD,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBAC/B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;aAChC;AAED,YAAA,IAAI,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,WAAW,EAAE,GAAG,IAAI,EAAE;gBACtD,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;iBAAM;gBACH,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;SACJ;KACJ;AAEM,IAAA,UAAU,CAAC,WAAqB,EAAA;QACnC,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC3C,QAAA,CAAC,WAAW,IAAI,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7D,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACtD;IAEM,UAAU,GAAA;QACb,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACtD;AACJ;;AClcK,MAAO,qBAAsB,SAAQ,OAAO,CAAA;AAmB9C,IAAA,WAAA,CAAY,UAAkC,EAAE,EAAA;QAC5C,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,KAAK,GAAG,uBAAuB,CAAC;AAErC,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,MAAM,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;AAEpB,QAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;AACpB,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AAEnB,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAElC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,GAAG,CAAC;AAExC,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;AAE1B,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AAEzB,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;KAClB;IAEe,MAAM,GAAA;QAClB,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,EACvC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,EAC5C,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAElD,QAAA,OAAO,CAAC,SAAS,GAAG,eAAe,CAAC;AACpC,QAAA,SAAS,CAAC,SAAS,GAAG,uBAAuB,CAAC;AAC9C,QAAA,UAAU,CAAC,SAAS,GAAG,wBAAwB,CAAC;AAEhD,QAAA,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;AAC/B,QAAA,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;QAEhC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;AAEzC,QAAA,SAAS,CAAC,gBAAgB,CAAC,WAAW,EAAE,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;AAC7D,QAAA,SAAS,CAAC,gBAAgB,CAAC,SAAS,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AAE7D,QAAA,UAAU,CAAC,gBAAgB,CAAC,WAAW,EAAE,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;AAC/D,QAAA,UAAU,CAAC,gBAAgB,CAAC,SAAS,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;QAE9D,SAAS,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,CAAa,KAAI;YACvD,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,CAAC,MAAM,EAAE,CAAC;AAClB,SAAC,CAAC,CAAC;QACH,SAAS,CAAC,gBAAgB,CAAC,UAAU,EAAE,CAAC,CAAa,KAAI;YACrD,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,CAAC,QAAQ,EAAE,CAAC;AACpB,SAAC,CAAC,CAAC;QACH,SAAS,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,CAAa,KAAI;YACxD,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,CAAC,QAAQ,EAAE,CAAC;AACpB,SAAC,CAAC,CAAC;QAEH,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,CAAa,KAAI;YACxD,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;QACH,UAAU,CAAC,gBAAgB,CAAC,UAAU,EAAE,CAAC,CAAa,KAAI;YACtD,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,CAAC,QAAQ,EAAE,CAAC;AACpB,SAAC,CAAC,CAAC;QACH,UAAU,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,CAAa,KAAI;YACzD,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,CAAC,QAAQ,EAAE,CAAC;AACpB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;KACtD;AAED;;;AAGG;IACI,MAAM,GAAA;AACT,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO;SACV;AAED,QAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;QAE1B,IAAI,CAAC,YAAY,EAAE,CAAC;AAEpB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAExB,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,YAAY,GAAG,eAAe,CAAC,6BAA6B,CAC7D,IAAI,CAAC,MAAO,CAAC,MAAM,EACnB,IAAI,CAAC,MAAO,EACZ,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,EAAE,EAClC,IAAI,EACJ,IAAI,CACP,IAAI,IAAI,CAAC;AAEV,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;SACpC;KACJ;AAED;;;AAGG;IACI,OAAO,GAAA;AACV,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO;SACV;AAED,QAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;QAE1B,IAAI,CAAC,YAAY,EAAE,CAAC;AAEpB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAExB,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,YAAY,GAAG,eAAe,CAAC,6BAA6B,CAC7D,IAAI,CAAC,MAAO,CAAC,MAAM,EACnB,IAAI,CAAC,MAAO,EACZ,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,EAAE,EAClC,KAAK,EACL,IAAI,CACP,IAAI,IAAI,CAAC;AAEV,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;SACpC;KACJ;IAEM,YAAY,GAAA;AACf,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QAClB,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACtD;IAEM,QAAQ,GAAA;AACX,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAEf,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACtD;IAES,KAAK,GAAA;AACX,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACvB,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;YAC9B,IAAI,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;AAE9B,YAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,gBAAA,CAAC,CAAC,WAAW,CAAC,QAAQ,GAAG,GAAG,CAAC;AAC7B,gBAAA,IAAI,EAAE,GAAG,IAAI,CAAC,YAAa,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;AAEhE,gBAAA,IAAI,MAAM,GAAG,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,cAAc,CAAC;AACrE,gBAAA,IAAI,MAAM,GAAG,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,cAAc,CAAC;gBACrE,MAAM,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;gBAC/B,IAAI,MAAM,GAAG,MAAM,IAAI,MAAM,GAAG,MAAM,EAAE;oBACpC,OAAO;iBACV;AAED,gBAAA,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC;AACjB,gBAAA,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;AACd,gBAAA,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;AACd,gBAAA,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;gBAEd,GAAG,CAAC,qBAAqB,EAAE,CAAC;gBAE5B,GAAG,CAAC,MAAM,EAAE,CAAC;aAChB;iBAAM;AACH,gBAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,oBAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oBAEzB,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBACtD;aACJ;AAED,YAAA,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBACtD,OAAO;aACV;AAED,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC;AAC9B,YAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,GAAG,EAAE;AACtB,gBAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;aACvB;iBAAM;gBAEH,CAAC,CAAC,WAAW,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAEvC,gBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI;AACd,qBAAA,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACzE,qBAAA,SAAS,EAAE,CAAC;AAEjB,gBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE;AAC5B,oBAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;iBACvB;gBAED,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBAC/B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBAE7B,GAAG,CAAC,qBAAqB,EAAE,CAAC;gBAE5B,GAAG,CAAC,MAAM,EAAE,CAAC;aAChB;AAED,YAAA,IAAI,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,WAAW,EAAE,GAAG,IAAI,EAAE;gBACtD,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACtD;iBAAM;gBACH,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACtD;SACJ;KACJ;AACJ;;AC/PD,MAAMC,eAAa,GAAG,GAAG,CAAC;AAQnB,MAAMpD,gBAAc,GAAG,CAAC,CAAS,KAAY;AAChD,IAAA,IAAI,CAAC,GAAG,IAAI,EAAE;AACV,QAAA,OAAO,CAAG,EAAA,CAAC,CAAC,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAA,GAAA,CAAK,CAAC;KACxC;AAAM,SAAA,IAAI,CAAC,GAAG,CAAC,EAAE;QACd,OAAO,CAAA,EAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;KAC/B;SAAM;QACH,OAAO,CAAA,EAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC;KAC9B;AACL,CAAC,CAAA;AAED,IAAIqD,OAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE9E,MAAMC,eAAa,GAAiB;AAChC,IAAA,IAAI,EAAE,EAAE;AACR,IAAA,IAAI,EAAE,EAAE;AACR,IAAA,KAAK,EAAE,uBAAuB;AAC9B,IAAA,YAAY,EAAE,kBAAkB;AAChC,IAAA,OAAO,EAAE,IAAI;AACb,IAAA,KAAK,EAAE,QAAQ;AACf,IAAA,MAAM,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;CACrB,CAAC;AACF,MAAMC,sBAAoB,GAAG;AACzB,IAAA,KAAK,EAAE,CAAC;AACR,IAAA,SAAS,EAAE,IAAI;AACf,IAAA,GAAG,EAAE,OAAO;AACZ,IAAA,KAAK,EAAE,cAAc;AACrB,IAAA,QAAQ,EAAEF,OAAK;CAClB,CAAC;AAgCF,MAAM,UAAW,SAAQ,UAAU,CAAA;AAoB/B,IAAA,WAAA,CAAY,UAA6B,EAAE,EAAA;AACvC,QAAA,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AA8Id,QAAA,IAAA,CAAA,cAAc,GAAG,CAAC,CAAc,KAAI;AAC1C,YAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,eAAe,EAAE,UAAU,EAAE,CAAC;AACtD,gBAAA,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/B,IAAI,MAAM,GAAG,CAAC,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC;gBAC5C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAQ,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;AAC7D,gBAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,aAAa,CAAC;gBACrC,IAAI,CAAC,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,IAAI,OAAO,EAAE;AAC5C,oBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,CAAC;iBAClE;qBAAM;AACH,oBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,CAAC;iBAClE;aACJ;AACL,SAAC,CAAA;QAES,IAAM,CAAA,MAAA,GAAG,MAAK;AACpB,YAAA,IAAI,IAAI,CAAC,aAAa,EAAE;gBACpB,IAAI,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAe,EAAE,QAAQ,EAAE,CAAC;AACpD,gBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,gBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC7B;AACL,SAAC,CAAA;QAES,IAAY,CAAA,YAAA,GAAG,MAAK;YAC1B,IAAI,CAAC,MAAM,EAAE,CAAC;AAClB,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,cAAc,GAAG,CAAC,CAAc,KAAI;AAC1C,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;AACxD,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,cAAc,GAAG,CAAC,CAAc,KAAI;AAC1C,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;AACxD,SAAC,CAAA;QAES,IAAY,CAAA,YAAA,GAAG,MAAK;AAC1B,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC9B,SAAC,CAAA;AAQS,QAAA,IAAA,CAAA,SAAS,GAAG,CAAC,CAAc,KAAI;AACrC,YAAA,IAAI,WAAW,GAAG,IAAI,CAAC,OAAQ,CAAC,yBAAyB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACjE,YAAA,IAAI,CAAC,WAAW;gBAAE,OAAO;AACzB,YAAA,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,MAAK;AAC5B,gBAAA,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;AACrB,oBAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AACpB,wBAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AACzB,wBAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,wBAAA,IAAI,CAAC,YAAY,GAAG,WAAY,CAAC;qBACpC;yBAAM;AACH,wBAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;qBAC5B;iBACJ;AACD,gBAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,gBAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,gBAAA,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC/B,EAAE,GAAG,CAAC,CAAC;AAER,YAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,gBAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;aAC5B;AACL,SAAC,CAAA;AAiCS,QAAA,IAAA,CAAA,YAAY,GAAG,CAAC,CAAc,KAAI;YACxC,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACzC,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AAC5C,gBAAA,IAAI,SAAS,GAAG,IAAI,CAAC,OAAQ,CAAC,yBAAyB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAC/D,gBAAA,IAAI,CAAC,SAAS;oBAAE,OAAO;gBACvB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;aAChD;AAAM,iBAAA,IAAI,IAAI,CAAC,aAAa,EAAE;AAC3B,gBAAA,IAAI,SAAS,GAAG,IAAI,CAAC,OAAQ,CAAC,yBAAyB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBAC/D,IAAI,SAAS,EAAE;oBACX,IAAI,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,KAAK,OAAO,EAAE;wBAChD,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,aAAc,CAAC,CAAC;qBAClD;yBAAM;wBACH,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAc,EAAE,SAAS,CAAC,CAAC;qBAClD;iBACJ;aACJ;AACL,SAAC,CAAA;AA/PG,QAAA,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,iBAAiB,CAAC,CAAC;AAE9C,QAAA,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,aAAa,IAAI,SAAS,GAAG,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC;QAExF,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC;AAEtC,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAE1B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAElB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC,OAAO,EAAE;AACnC,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,cAAc,EAAE,KAAK;YACrB,kBAAkB,EAAE,CAAC,GAAG;AACxB,YAAA,gBAAgB,EAAE,IAAI;AACtB,YAAA,mBAAmB,EAAE,IAAI;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC,aAAa,EAAE;AACzC,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,cAAc,EAAE,KAAK;YACrB,kBAAkB,EAAE,CAAC,KAAK;AAC1B,YAAA,gBAAgB,EAAE,IAAI;AACtB,YAAA,mBAAmB,EAAE,IAAI;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE;AACvC,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,cAAc,EAAE,IAAI;AACpB,YAAA,mBAAmB,EAAE,IAAI;AACzB,YAAA,eAAe,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,CAAC;AACpC,YAAA,YAAY,EAAE,CAAC;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC;AAC1B,YAAA,IAAI,EAAE,YAAY;AAClB,YAAA,KAAK,EAAEC,eAAa;AACvB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,CAAC;AAC3B,YAAA,QAAQ,EAAE;AACN,gBAAA,MAAM,EAAE,EAAE;AACV,gBAAA,SAAS,EAAE,GAAG;AACd,gBAAA,KAAK,EAAE,gBAAgB;AACvB,gBAAA,QAAQ,EAAE,KAAK;AAClB,aAAA;AACJ,SAAA,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,QAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;QAE5C,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,SAAS,EAAEC,sBAAoB;AAC/B,gBAAA,UAAU,EAAE;AACR,oBAAA,IAAI,EAAE,OAAO;AAChB,iBAAA;aACJ,CAAC;AACF,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,SAAS,EAAEA,sBAAoB;AAC/B,gBAAA,UAAU,EAAE;AACR,oBAAA,IAAI,EAAE,KAAK;AACd,iBAAA;aACJ,CAAC;SACL,CAAC;KACL;IAED,IAAW,aAAa,CAAC,CAAU,EAAA;AAC/B,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;KAI3B;AAEM,IAAA,UAAU,CAAC,MAAc,EAAA;AAC5B,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;KACzB;IAES,cAAc,GAAA;QACpB,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAA;KACrD;IAEe,IAAI,GAAA;QAChB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;QACjD,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACzC,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACzC,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC3C,IAAI,CAAC,SAAS,EAAE,CAAC;KACpB;IAEe,QAAQ,GAAA;QACpB,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;IAEM,SAAS,GAAA;QAEZ,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAC7C,QAAA,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAE1B,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACzD,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAC/D,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAC/D,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;AACtE,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;AACtE,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;AACjE,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;KAEhE;IAES,WAAW,GAAA;AACjB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;;AAI1B,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AACpD,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AAC1D,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AAE9C,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AACjE,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AACjE,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AAC5D,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAExD,IAAI,CAAC,KAAK,EAAE,CAAC;KAChB;AAyCM,IAAA,aAAa,CAAC,UAAmB,EAAA;AACpC,QAAA,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAC7C,QAAA,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAC3C,QAAA,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;KAC9C;AAyBS,IAAA,SAAS,CAAC,WAAmB,EAAE,SAAiB,EAAE,QAAe,EAAA;QAEvE,IAAI,CAAC,QAAQ,EAAE;YACX,QAAQ,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;SACrE;AAED,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;AAElE,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;AAClE,QAAA,IAAI,MAAM,GAAG,GAAG,CAAC,QAAQ,CAAC;AAC1B,QAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,cAAc,CAAC;QAEnC,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,IAAI,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC/B,QAAA,IAAI,IAAI,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC;QACxB,GAAG,CAAC,SAAS,EAAE,CAAC;AAEhB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAGH,eAAa,EAAE,CAAC,EAAE,EAAE;AACpC,YAAA,IAAI,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,GAAGA,eAAa,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC7D,YAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAChB;AACD,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAElB,IAAI,CAAC,YAAY,CAAC,QAAS,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AAE9C,QAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,YAAA,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,OAAO,CAAC,CAAG,EAAApD,gBAAc,CAAC,MAAM,CAAC,CAAK,EAAA,EAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAM,IAAA,CAAA,CAAC,CAAC;SAClG;KACJ;IAoBM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;QAC3B,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;QAC/B,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;QAC1B,IAAI,CAAC,OAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;KACjD;IAEM,wBAAwB,GAAA;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,QAAS,CAAC,SAAS,EAAE,CAAC,CAAC,CAAW,CAAC;QAC7D,IAAI,CAAC,EAAE;YACH,MAAM,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,EACzB,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;AACrC,YAAA,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC;AACvD,gBAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;SACzD;AACD,QAAA,OAAO,KAAK,CAAA;KACf;IAEe,KAAK,GAAA;AACjB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,QAAS,CAAC,SAAS,EAAE,CAAC,CAAC,CAAW,CAAC;QAC7D,IAAI,CAAC,EAAE;YACH,MAAM,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,EACzB,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;AAErC,YAAA,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE,EAAE;gBAClC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;gBAC/C,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;AAC7C,gBAAA,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;oBACtB,IAAI,GAAG,GAAG,CAAC,CAAC;oBACZ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC9C,wBAAA,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBAClC;AACD,oBAAA,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC7D,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,OAAO,CAAC,CAAG,EAAAA,gBAAc,CAAC,GAAG,CAAC,CAAK,EAAA,EAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAM,IAAA,CAAA,CAAC,CAAC;iBAC/F;aACJ;SACJ;KACJ;AAED,IAAA,IAAW,SAAS,GAAA;AAChB,QAAA,OAAO,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;KACvD;AACJ,CAAA;AAED,MAAM,iBAAiB,GAAyB;IAC5C,KAAK;IACL,QAAQ;IACR,WAAW;IACX,YAAY;IACZ,YAAY;IACZ,QAAQ;IACR,QAAQ;IACR,QAAQ;IACR,WAAW;IACX,WAAW;IACX,WAAW;IACX,KAAK;IACL,KAAK;IACL,KAAK;IACL,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,UAAU;IACV,aAAa;IACb,YAAY;IACZ,YAAY;CACf;;AC3aK,MAAO,KAAM,SAAQ,OAAO,CAAA;AAG9B,IAAA,WAAA,CAAY,UAAwB,EAAE,EAAA;QAClC,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,UAAU,CAAC;AAC9B,YAAA,IAAI,EAAE,CAAA,WAAA,EAAc,IAAI,CAAC,IAAI,CAAE,CAAA;YAC/B,aAAa,EAAE,OAAO,CAAC,aAAa;AACvC,SAAA,CAAC,CAAC;KACN;IAED,IAAW,aAAa,CAAC,CAAU,EAAA;AAC/B,QAAA,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,CAAC,CAAC;KACtC;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,MAAO,CAAC,CAAC;KAC7C;IAEe,UAAU,GAAA;AACtB,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;KAC5D;IAEe,YAAY,GAAA;AACxB,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;KAC/D;AACJ;;ACzBD,IAAI,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE1E,MAAM,YAAY,GAAe;AAC7B,IAAA,UAAU,EAAE,gBAAgB;AAC5B,IAAA,QAAQ,EAAE,gBAAgB;AAC1B,IAAA,SAAS,EAAE,CAAC;CACf,CAAA;AACD,MAAMsD,eAAa,GAAiB;AAChC,IAAA,IAAI,EAAE,EAAE;AACR,IAAA,IAAI,EAAE,EAAE;AACR,IAAA,KAAK,EAAE,uBAAuB;AAC9B,IAAA,YAAY,EAAE,kBAAkB;AAChC,IAAA,OAAO,EAAE,IAAI;AACb,IAAA,KAAK,EAAE,QAAQ;AACf,IAAA,MAAM,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;CACrB,CAAC;AAEF,MAAM,oBAAoB,GAAG;AACzB,IAAA,KAAK,EAAE,CAAC;AACR,IAAA,SAAS,EAAE,IAAI;AACf,IAAA,GAAG,EAAE,cAAc;AACnB,IAAA,KAAK,EAAE,gBAAgB;AACvB,IAAA,QAAQ,EAAE,KAAK;CAClB,CAAC;AAMF,MAAM,gBAAiB,SAAQ,UAAU,CAAA;AAMrC,IAAA,WAAA,CAAY,UAAmC,EAAE,EAAA;QAC7C,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,MAAM,CAAC,gBAAgB,EAAE;AAC/C,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,cAAc,EAAE,KAAK;YACrB,kBAAkB,EAAE,CAAC,GAAG;AACxB,YAAA,gBAAgB,EAAE,KAAK;AACvB,YAAA,mBAAmB,EAAE,IAAI;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,MAAM,CAAC;AACpB,YAAA,IAAI,EAAE,aAAa;AACnB,YAAA,GAAG,EAAE,YAAY;AACpB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,MAAM,CAAC;AACpB,YAAA,IAAI,EAAE,WAAW;AACjB,YAAA,GAAG,EAAE,YAAY;AACpB,SAAA,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,IAAI,EAAE,kBAAkB;AACxB,gBAAA,KAAK,EAAE;AACH,oBAAA,GAAGA,eAAa;AACnB,iBAAA;aACJ,CAAC;AACF,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,IAAI,EAAE,gBAAgB;AACtB,gBAAA,KAAK,EAAE;AACH,oBAAA,GAAGA,eAAa;AACnB,iBAAA;aACJ,CAAC;AACF,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,IAAI,EAAE,YAAY;AAClB,gBAAA,KAAK,EAAE;AACH,oBAAA,GAAGA,eAAa;AACnB,iBAAA;aACJ,CAAC;SACL,CAAC;KACL;AAEe,IAAA,aAAa,CAAC,UAAmB,EAAA;AAC7C,QAAA,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAChC,QAAA,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;KACjD;AAED,IAAA,IAAW,UAAU,GAAA;AACjB,QAAA,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;KAChC;AAED,IAAA,IAAW,UAAU,GAAA;AACjB,QAAA,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAA;KAC/B;AAED,IAAA,IAAW,QAAQ,GAAA;AACf,QAAA,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAA;KAC/B;AAED,IAAA,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,aAAa,CAAC;KAC7B;AAED,IAAA,IAAW,WAAW,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;KAC1B;AAED,IAAA,IAAW,SAAS,GAAA;AAChB,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;KAC1B;AAED,IAAA,IAAW,iBAAiB,GAAA;AACxB,QAAA,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;KACvC;AAED,IAAA,IAAW,iBAAiB,GAAA;AACxB,QAAA,OAAO,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;KACxC;AAED,IAAA,IAAW,eAAe,GAAA;AACtB,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;KACrC;AAED,IAAA,IAAW,eAAe,GAAA;AACtB,QAAA,OAAO,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;KACtC;AAED,IAAA,IAAW,qBAAqB,GAAA;QAC5B,IAAI,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,eAAe,EAAE;YAChD,OAAO,IAAI,CAAC,eAAe,CAAC;SAC/B;aAAM;YACH,OAAO,IAAI,CAAC,iBAAiB,CAAC;SACjC;KACJ;AAED,IAAA,IAAW,qBAAqB,GAAA;QAC5B,IAAI,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,eAAe,EAAE;YAC/C,OAAO,IAAI,CAAC,eAAe,CAAC;SAC/B;aAAM;YACH,OAAO,IAAI,CAAC,iBAAiB,CAAC;SACjC;KACJ;AAED,IAAA,IAAW,WAAW,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC;KAClE;AAEe,IAAA,SAAS,CAAC,WAAmB,EAAE,SAAiB,EAAE,QAAe,EAAA;QAC7E,KAAK,CAAC,SAAS,CAAC,WAAW,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;QAClD,IAAI,CAAC,0BAA0B,EAAE,CAAC;KACrC;AAES,IAAA,MAAM,0BAA0B,GAAA;QACtC,MAAM,YAAY,GAAG,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,CAAC;QACxD,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;QAExD,IAAI,CAAC,KAAK,CAAC,GAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAA;AACzG,QAAA,IAAI,CAAC,KAAK,CAAC,GAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC,CAAA;QACzF,IAAI,CAAC,KAAK,CAAC,GAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;AAC1G,QAAA,IAAI,CAAC,KAAK,CAAC,GAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC,CAAC;AAE1F,QAAA,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;AAE/E,QAAA,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;QACxC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAClD,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAE9C,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAC5E,SAAS,GAAG,MAAM,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;QAE1E,IAAI,CAAC,UAAU,CAAC,KAAM,CAAC,OAAO,CAAC,CAAU,OAAA,EAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAI,EAAA,CAAA,CAAC,CAAC;AAC3F,QAAA,IAAI,CAAC,UAAU,CAAC,KAAM,CAAC,OAAO,CAAC,CAAA,GAAA,EAAM,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,CAAI,CAAC,CAAA;AAChE,QAAA,IAAI,CAAC,QAAQ,CAAC,KAAM,CAAC,OAAO,CAAC,CAAA,GAAA,EAAM,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,CAAI,CAAC,CAAA;KAC/D;IAEe,KAAK,GAAA;AACjB,QAAA,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;AACpB,QAAA,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;AACpB,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;AACzB,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;QACzB,KAAK,CAAC,KAAK,EAAE,CAAC;;;QAKd,IAAI,CAAC,OAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;KAClD;IAEe,cAAc,GAAA;QAC1B,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,SAAS,EAAE,oBAAoB;AAC/B,gBAAA,UAAU,EAAE;AACR,oBAAA,IAAI,EAAE,OAAO;AAChB,iBAAA;aACJ,CAAC;AACF,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,SAAS,EAAE,oBAAoB;AAC/B,gBAAA,UAAU,EAAE;AACR,oBAAA,IAAI,EAAE,KAAK;AACd,iBAAA;aACJ,CAAC;SACL,CAAC;QAEF,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;KACtD;IAEe,IAAI,GAAA;QAChB,KAAK,CAAC,IAAI,EAAE,CAAC;QACb,IAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AACjD,QAAA,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAE1D,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;KAC/C;IAEe,KAAK,GAAA;QACjB,KAAK,CAAC,KAAK,EAAE,CAAA;QACb,IAAI,CAAC,0BAA0B,EAAE,CAAC;KACrC;AACJ;;AC9NK,MAAO,WAAY,SAAQ,KAAK,CAAA;AAClC,IAAA,WAAA,CAAY,UAA8B,EAAE,EAAA;QACxC,KAAK,CAAC,OAAO,CAAC,CAAC;AACf,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,gBAAgB,CAAC;AACpC,YAAA,IAAI,EAAE,CAAA,iBAAA,EAAoB,IAAI,CAAC,IAAI,CAAE,CAAA;AACrC,YAAA,aAAa,EAAE,KAAK;AACvB,SAAA,CAAC,CAAC;KACN;AACJ;;ACXD,MAAMlD,iBAAe,GAAG,CAAA;;;;;;;;;;;;;;OAcjB,CAAC;AAMR;;AAEG;AACG,MAAO,aAAc,SAAQ,OAAO,CAAA;AAGtC,IAAA,WAAA,CAAY,UAAgC,EAAE,EAAA;AAC1C,QAAA,KAAK,CAAC;AACF,YAAA,IAAI,EAAE,eAAe;AACrB,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,WAAW,CAAC;YACzB,aAAa,EAAE,OAAO,CAAC,aAAa;AACvC,SAAA,CAAC,CAAC;KACN;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,MAAO,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACpC,IAAI,CAAC,cAAc,EAAE,CAAC;KACzB;IAEe,UAAU,GAAA;AACtB,QAAA,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;KACzB;IAEe,YAAY,GAAA;AACxB,QAAA,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;KAC3B;IAES,cAAc,GAAA;AAEpB,QAAA,IAAI,GAAG,GAAG,IAAI,YAAY,CAAC;AACvB,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,iBAAiB,CAAC;AAC/C,YAAA,IAAI,EAAEA,iBAAe;AACxB,SAAA,CAAC,CAAC;QAEH,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;QAElC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;YAC1C,IAAI,QAAQ,EAAE;gBACV,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;iBAAM;gBACH,IAAI,CAAC,YAAY,EAAE,CAAC;aACvB;AACL,SAAC,CAAC,CAAC;KACN;AACJ;;AC3DD,MAAM,KAAK,GAAa;AACpB,IAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;AAC1F,IAAA,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO;CACtE,CAAC;AAEF,MAAMD,UAAQ,GAAG,CAAA;;;WAGN,CAAC;AAEZ;;AAEG;AACG,MAAO,YAAa,SAAQ,OAAO,CAAA;AAYrC,IAAA,WAAA,CAAY,UAA+B,EAAE,EAAA;QACzC,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,KAAK,EAAE,EAAE;AACtC,YAAA,OAAO,CAAC,IAAI,GAAG,cAAc,CAAC;SACjC;QACD,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,SAAS,GAAGA,UAAQ,CAAC;AAE1B,QAAA,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;AACrB,QAAA,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;AAErB,QAAA,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,QAAQ,IAAI,SAAS,GAAG,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAEzE,QAAA,IAAI,CAAC,IAAI,GAAG,CAAC,CAAA;AACb,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AACnB,QAAA,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;AAE1B,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;AAEf,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;KAC7B;IAES,eAAe,GAAA;QACrB,OAAO,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;KACvC;IAEe,MAAM,GAAA;AAClB,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,eAAe,EAAG,CAAC;QAElC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAc,iBAAiB,CAAE,CAAC;QAE5E,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAEzC,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,YAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,MAAK;AAC1C,gBAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC;AACjE,aAAC,CAAC,CAAC;YAEH,CAAC,IAAI,CAAC,MAAO,CAAC,OAAQ,CAAC,OAAO,IAAK,IAAI,CAAC,MAAO,CAAC,OAAyB,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,MAAK;AAChG,gBAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC;AACjE,aAAC,CAAC,CAAC;SACN;aAAM;AACH,YAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAc,KAAI;gBACrD,IAAI,CAAC,CAAC,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC,eAAe,EAAE;AACzC,oBAAA,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;iBAC3B;AACL,aAAC,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,MAAK;gBAC1C,IAAI,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,UAAU,CAAC;gBAC1C,IAAI,CAAC,EAAE,CAAC,cAAc,IAAI,CAAC,EAAE,CAAC,eAAe,EAAE;AAC3C,oBAAA,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;iBAC5B;AACL,aAAC,CAAC,CAAC;SACN;KACJ;AAES,IAAA,WAAW,CAAC,EAAQ,EAAA;AAC1B,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;QAC9B,IAAI,EAAE,GAAG,EAAE,CAAC;AACZ,QAAA,IAAI,IAAI,GAAG,IAAI,CAAC,MAAO,CAAC,oBAAoB,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AACtD,QAAA,IAAI,IAAI,KAAK,CAAC,EAAE;YACZ,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5B,IAAI,GAAG,IAAI,CAAC,MAAO,CAAC,oBAAoB,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;SACrD;AACD,QAAA,IAAI,EAAE,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACtD,QAAA,IAAI,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,CAAC;AACxD,QAAA,IAAI,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;QAClD,IAAI,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAEvC,IAAI,eAAe,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;AAEjD,QAAA,IAAI,KAAK,GAAG,YAAY,CAAC,KAAK,EAAE,eAAe,EAAE,CAAC,CAAS,EAAE,CAAS,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;AAClF,QAAA,IAAI,KAAK,GAAG,CAAC,EAAE;YACX,KAAK,GAAG,CAAC,KAAK,CAAC;SAClB;AACD,QAAA,IAAI,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC,EACxB,SAAS,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;AAEjC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,eAAe,KAAK,SAAS,GAAG,SAAS,CAAC,CAAC;AAChE,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;AAExE,QAAA,IAAI,SAAS,GAAG,IAAI,EAAE;YAClB,IAAI,CAAC,aAAc,CAAC,SAAS,GAAG,GAAG,SAAS,GAAG,IAAI,CAAA,GAAA,CAAK,CAAC;SAC5D;aAAM;YACH,IAAI,CAAC,aAAc,CAAC,SAAS,GAAG,CAAG,EAAA,SAAS,IAAI,CAAC;SACpD;AAED,QAAA,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;AAExC,QAAA,IAAI,CAAC,EAAG,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;KAChD;AACJ;;AC/HD;;AAEG;AACG,MAAO,OAAQ,SAAQ,OAAO,CAAA;AAChC,IAAA,WAAA,CAAY,OAAuB,EAAA;QAC/B,KAAK,CAAC,OAAO,CAAC,CAAC;KAClB;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACtC,QAAA,CAAC,CAAC,SAAS,GAAG,cAAc,CAAC;AAC7B,QAAA,CAAC,CAAC,EAAE,GAAG,kBAAkB,CAAC;AAC1B,QAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;KACtD;IAES,KAAK,GAAA;AACX,QAAA,OAAO,CACH,kBAAkB,EAClB,CAAC,MAAM,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC,EACtD,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC,WAAW,GAAG,EAAE,EAC/C,CAAC,CACJ,CAAC;KACL;AACJ;;ACnBD;;AAEG;AACG,MAAO,gBAAiB,SAAQ,OAAO,CAAA;AAGzC,IAAA,WAAA,CAAY,UAAmC,EAAE,EAAA;AAC7C,QAAA,KAAK,CAAC;AACF,YAAA,IAAI,EAAE,kBAAkB;AACxB,YAAA,YAAY,EAAE,IAAI,EAAE,GAAG,OAAO;AACjC,SAAA,CAAC,CAAC;QACH,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,IAAI,GAAG,CAAC;KACrC;IAEQ,MAAM,GAAA;KAEd;IAEe,UAAU,GAAA;QACtB,KAAK,CAAC,UAAU,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACvB,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;AACtE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;AACpE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;AACjE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;AACrE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;AACvE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;AAClE,QAAA,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;KACtE;IAEe,YAAY,GAAA;QACxB,KAAK,CAAC,YAAY,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACvB,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAChE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;AACjE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;AAC/D,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAChE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AAC5D,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAChE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAChE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;AAClE,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAC7D,QAAA,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;KACjE;IAES,mBAAmB,GAAA;AACzB,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;AACvC,YAAA,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC7B,GAAG,CAAC,MAAM,EAAE,CAAC;SAChB;KACJ;IAES,oBAAoB,GAAA;AAC1B,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;QACvC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC5B,GAAG,CAAC,MAAM,EAAE,CAAC;KAChB;IAES,kBAAkB,GAAA;AACxB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;AACvC,QAAA,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7B,GAAG,CAAC,MAAM,EAAE,CAAC;KAChB;IAES,mBAAmB,GAAA;AACzB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;QACvC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC5B,GAAG,CAAC,MAAM,EAAE,CAAC;KAChB;IAES,cAAc,GAAA;AACpB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;AACvC,QAAA,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACf,GAAG,CAAC,MAAM,EAAE,CAAC;KAChB;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;AACvC,QAAA,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;QAChB,GAAG,CAAC,MAAM,EAAE,CAAC;KAChB;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;AACvC,QAAA,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACb,GAAG,CAAC,MAAM,EAAE,CAAC;KAChB;IAES,iBAAiB,GAAA;AACvB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;AACvC,QAAA,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACd,GAAG,CAAC,MAAM,EAAE,CAAC;KAChB;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;AACvC,QAAA,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACf,GAAG,CAAC,MAAM,EAAE,CAAC;KAChB;IAES,iBAAiB,GAAA;AACvB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;AACvC,QAAA,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACd,GAAG,CAAC,MAAM,EAAE,CAAC;KAChB;AACJ;;AC5GK,MAAO,mBAAoB,SAAQ,OAAO,CAAA;AAI5C,IAAA,WAAA,CAAY,UAAsC,EAAE,EAAA;AAChD,QAAA,KAAK,CAAC;AACF,YAAA,IAAI,EAAE,qBAAqB;AAC3B,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;QAEH,IAAI,CAAC,SAAS,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,SAAS,GAAG,IAAI,YAAY,CAAC,CAAC,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;KACrE;AAED,IAAA,IAAW,QAAQ,GAAA;AACf,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACvB,QAAA,IAAI,GAAG,GAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACjG,QAAA,OAAO,eAAe,CAAC,GAAG,CAAC,CAAC;KAC/B;AAED,IAAA,IAAW,QAAQ,GAAA;AACf,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACvB,QAAA,IAAI,GAAG,GAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACjG,QAAA,OAAO,eAAe,CAAC,GAAG,CAAC,CAAC;KAC/B;IAED,IAAW,QAAQ,CAAC,SAAiB,EAAA;AACjC,QAAA,IAAI,GAAG,GAAG,cAAc,CAAC,SAAS,CAAC,CAAC;QACpC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;KAC7B;IAED,IAAW,QAAQ,CAAC,SAAiB,EAAA;AACjC,QAAA,IAAI,GAAG,GAAG,cAAc,CAAC,SAAS,CAAC,CAAC;QACpC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;KAC7B;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,UAAU,CAAC,yBAAyB,EAAE,CAAC,CAAC;QAC/D,IAAI,CAAC,QAAQ,EAAE,CAAC;KACnB;IAEe,UAAU,GAAA;QACtB,KAAK,CAAC,UAAU,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;KAC9D;IAEe,YAAY,GAAA;QACxB,KAAK,CAAC,YAAY,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;KACzD;IAES,eAAe,GAAA;AACrB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC;QAC/B,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,mBAAmB,EACnC,CAAC,GAAG,EAAE,CAAC,QAAQ,EACf,GAAG,GAAG,CAAC,CAAC,QAAQ,EAChB,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AACf,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAE9B,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;QAE1B,EAAE,CAAC,QAAQ,EAAE,CAAC;AACd,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,QAAS,CAAC,yBAA0B,CAAC,CAAC;QAC1E,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEvE,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7D,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAC9D,QAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC;AAC1C,QAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC,CAAC;QACzE,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5C,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AAE5C,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;QAEhE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvC,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;KAC5B;AACJ,CAAA;AAED,SAAS,yBAAyB,GAAA;AAC9B,IAAA,OAAO,IAAI,OAAO,CAAC,qBAAqB,EAAE;AACtC,QAAA,QAAQ,EAAE;AACN,YAAA,WAAW,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO;AACjC,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,WAAW,EAAE,OAAO;AACpB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,QAAQ,EAAE,MAAM;AAChB,YAAA,QAAQ,EAAE,MAAM;AACnB,SAAA,EAAE,UAAU,EAAE;AACX,YAAA,OAAO,EAAE,MAAM;AAClB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;;;AAOE,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;ACtNA;;;;;;AAMG;AACI,MAAM,eAAe,GAAG,UAAU,CAAC;AAE1C;;;;AAIG;AACI,MAAM,YAAY,GAAG,YAAY;;ACTxC;;;;AAIG;AACG,SAAU,cAAc,CAAC,KAAiB,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqD5C,IAAA,IAAI,CAAC,GAAG,KAAK,GAAGqD,KAAQ,CAAC;IAEzB,IAAI,CAAC,GAAG,QAAQ,GAAG,UAAU,GAAG,CAAC,CAAC;;IAElC,IAAI,CAAC,GAAG,QAAQ,GAAG,QAAQ,GAAG,CAAC,CAAC;AAChC,IAAA,IAAI,CAAC,GAAGC,GAAQ,CAAC,OAAO,GAAG,YAAY,GAAG,CAAC,CAAC,CAAC;IAE7C,IAAI,MAAM,GAAGC,eAAqB,GAAG,QAAQ,GAAG,CAAC,CAAC;;AAIlD,IAAA,IAAI,CAAC,GACD,CAAC,GAAGC,OAAY,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAGR,OAAY,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAGA,OAAY,CAAC,CAAC,CAAC;;AAG7F,IAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAGA,OAAY,CAAC,GAAG,CAAC,CAAC;IACvC,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAGA,OAAY,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAE1D,IAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AACjC,IAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGQ,OAAY,CAAC;AAExC,IAAA,IAAI,GAAG,GAAGF,GAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;;AAG1B,IAAA,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAGN,OAAY,CAAC,CAAC;AACrC,IAAA,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAGA,OAAY,CAAC,CAAC;;IAGrC,IAAI,MAAM,GAAG,CAAC,CAAC;AACf,IAAA,IAAI,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,GAAGA,OAAY,CAAC,CAAC;AACjD,IAAA,IAAI,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,GAAGA,OAAY,CAAC,CAAC;IAEjD,IAAI,KAAK,GAAGS,MAAW,IAAI,CAAC,CAAC,GAAG,IAAI,IAAI,UAAU,GAAG,OAAO,GAAG,KAAK,CAAC,CAAC;AAEtE,IAAA,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CACjC,IAAI,IAAI,CACJ,CAAC,MAAM,GAAGC,YAAkB,EAC5B,CAAC,MAAM,GAAGA,YAAkB,EAC5B,MAAM,GAAGA,YAAkB,CAC9B,CACJ,CAAC;;;;AAKN;;AClGA;;;;;;;;;;AAUG;AACH,MAAM,WAAW,CAAA;IAwEb,WAAY,CAAA,IAAY,EAAE,MAA0B,EAAA;AAEhD;;;;AAIG;QACH,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,QAAQ,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC;AAE1D;;;;AAIG;AACH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AAExB;;;;AAIG;QACH,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,QAAQ,IAAI,IAAI,IAAI,EAAE,CAAC;AAE/C;;;;AAIG;AACH,QAAA,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;AAE/E;;;;AAIG;QACH,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,IAAI,IAAI,IAAI,EAAE,CAAC;AAE7C;;;;AAIG;AACH,QAAA,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,IAAI,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAE1D;;;;AAIG;AACH,QAAA,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,QAAQ,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;AAE/D;;;;AAIG;AACH,QAAA,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,SAAS,IAAI,SAAS,GAAG,MAAM,CAAC,SAAS,GAAG,GAAG,CAAC;AAEzE;;;;AAIG;AACH,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QAC1C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;AAC5C,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC;KACzC;AAED;;;;;AAKG;IACI,KAAK,GAAA;;KAEX;AAED;;;;AAIG;AACI,IAAA,SAAS,CAAC,MAAe,EAAA;AAC5B,QAAA,IAAI,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACzB,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;YAC5B,IAAI,EAAE,EAAE;AACJ,gBAAA,IAAI,KAAK,GAAG,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAChD,gBAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;AACjE,gBAAA,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;oBACb,KAAK,IAAI,CAAC,CAAC;AACX,oBAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;AACjE,oBAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;AACrE,oBAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;AAErE,oBAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;AACrE,oBAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;AACrE,oBAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;AAErE,oBAAA,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;AACvE,oBAAA,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;AACvE,oBAAA,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;iBAC1E;aACJ;AACD,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACvB;AAAM,aAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;YAChC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;YAC1C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;AAC5C,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC;YACtC,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,YAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;SACxB;KACJ;AAED;;;;AAIG;IACI,QAAQ,GAAA;QACX,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,QAAc,EAAA;QAC/B,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;KACjC;AAED;;;AAGG;AACI,IAAA,WAAW,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;AAC9C,QAAA,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;AACrB,QAAA,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;AACrB,QAAA,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;KACxB;AAED;;;;AAIG;IACI,WAAW,GAAA;AACd,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;KACjC;AAED;;;;AAIG;AACI,IAAA,YAAY,CAAC,GAAS,EAAA;AACzB,QAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;KACxC;AAED;;;;AAIG;AACI,IAAA,YAAY,CAAC,GAAS,EAAA;AACzB,QAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;KACxC;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,GAAS,EAAA;AAC1B,QAAA,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;KACzC;AAED;;;AAGG;AACI,IAAA,UAAU,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;QAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC3B,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;QAC5B,IAAI,EAAE,EAAE;AACJ,YAAA,IAAI,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACpD,YAAA,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;AACb,gBAAA,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC7B,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;aACpC;SACJ;KACJ;AAED;;;AAGG;AACI,IAAA,UAAU,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;QAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC3B,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;QAC5B,IAAI,EAAE,EAAE;AACJ,YAAA,IAAI,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACpD,YAAA,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;gBACb,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;aACpC;SACJ;KACJ;AAED;;;AAGG;AACI,IAAA,WAAW,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;QAC9C,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC5B,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;QAC5B,IAAI,EAAE,EAAE;AACJ,YAAA,IAAI,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACpD,YAAA,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;gBACb,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;aACpC;SACJ;KACJ;AAED;;;AAGG;AACI,IAAA,YAAY,CAAC,SAAiB,EAAA;AACjC,QAAA,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;AAC5B,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;QAC5B,IAAI,EAAE,EAAE;AACJ,YAAA,IAAI,KAAK,GAAG,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAChD,YAAA,IAAI,KAAK,IAAI,CAAC,CAAC,EAAE;AACb,gBAAA,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC;aACxC;SACJ;KACJ;AAED;;;AAGG;IACI,QAAQ,GAAA;AACX,QAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;QAC5B,IAAI,EAAE,EAAE;AACJ,YAAA,IAAI,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACpD,YAAA,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;gBACd,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC;oBAClF,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC;wBACtF,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;aAC1G;SACJ;KACJ;AAED;;;;AAIG;AACI,IAAA,KAAK,CAAC,UAAsB,EAAA;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;AAC9B,QAAA,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9B,UAAU,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACzC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAChD,QAAA,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;AACzF,QAAA,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;AACzF,QAAA,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC;QAC1F,UAAU,CAAC,eAAe,EAAE,CAAC;KAChC;AAED;;;AAGG;IACI,MAAM,GAAA;AACT,QAAW,IAAI,CAAC,YAAY;AAU5B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;KAC3B;;AApXM,WAAW,CAAA,WAAA,GAAW,CAAC;;ACXlC;;AAEG;AACG,MAAO,GAAI,SAAQ,OAAO,CAAA;AAc5B,IAAA,WAAA,CAAY,UAAsB,EAAE,EAAA;QAChC,KAAK,CAAC,EAAC,YAAY,EAAE,IAAI,EAAE,GAAG,OAAO,EAAC,CAAC,CAAC;AAExC,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAEnB,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,IAAI,UAAU,CAAC;QAE/D,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,IAAI,CAAC,OAAO,CAAC;QAEzD,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,IAAI,OAAO,CAAC;AAE5D,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,WAAW,CAAC,KAAK,EAAE;YACnC,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;YACnC,OAAO,EAAE,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAChC,QAAQ,EAAE,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC;AAClC,YAAA,SAAS,EAAE,GAAG;AACjB,SAAA,CAAC,CAAC;AAEH;;;;AAIG;AACH,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AAEnB;;;;AAIG;AACH,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AAEnB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;AAEtB,QAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ,QAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QAEZ,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,OAAO,IAAI,KAAK,CAAC;KAC5C;IAEe,MAAM,GAAA;AAClB,QAAA,IAAI,CAAC,MAAO,CAAC,YAAY,GAAG,IAAI,CAAC;;QAGjC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,MAAO,CAAC,CAAC;AAElC,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,YAAY,CAAC;SACxD;KACJ;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,UAAU,EAAE,CAAC;KACrB;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,QAAQ,EAAE,CAAC;KACnB;IAEe,UAAU,GAAA;QACtB,KAAK,CAAC,UAAU,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;KACzB;AAEM,IAAA,SAAS,CAAC,KAAY,EAAA;AACzB,QAAA,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;KAC1B;IAES,KAAK,GAAA;QACX,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,OAAO;QAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC;AAC5C,QAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AAChB,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,YAAA,IAAI,GAAG,CAAC,SAAS,EAAE,GAAG,IAAI,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AAC1D,gBAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,gBAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ,gBAAA,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,EACpB,CAAC,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC;AAEzB,gBAAA,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAElC,gBAAA,IAAI,GAAG,CAAC,KAAK,GAAG,IAAI,EAAE;AAClB,oBAAA,CAAC,GAAG,GAAG,CAAC,EAAE,CAAC;iBACd;gBAED,IAAI,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;AAC9E,gBAAA,IAAI,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;AAC3C,qBAAA,SAAS,EAAE;AACX,qBAAA,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAElC,IAAI,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBACnB,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAEzB,gBAAA,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE;AACb,oBAAA,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC;oBAChB,IAAI,GAAG,GAAG,IAAI,CAAC,yBAAyB,CACpC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,EAChC,GAAG,CAAC,MAAM,EAAE,CACf,CAAC;AACF,oBAAA,IAAI,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC;AACtD,oBAAA,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;iBACnE;qBAAM;AACH,oBAAA,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;iBACpC;aACJ;iBAAM;AACH,gBAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ,gBAAA,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE;AACb,oBAAA,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC;oBAChB,IAAI,GAAG,GAAG,IAAI,CAAC,yBAAyB,CACpC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,EAChC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,CAC1C,CAAC;AACF,oBAAA,IAAI,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC;AACtD,oBAAA,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;iBACnE;qBAAM;AACH,oBAAA,IACI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,OAAO,IAAI,IAAI,CAAC,OAAO;wBACpE,IAAI,CAAC,QAAQ,EACf;AACE,wBAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;AACtB,wBAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAChC,wBAAA,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;AAC5D,wBAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;qBACf;iBACJ;aACJ;SACJ;aAAM;AACH,YAAA,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;SAC/D;KACJ;AACJ;;AChKD;;AAEG;AACG,MAAO,eAAgB,SAAQ,OAAO,CAAA;AAGxC,IAAA,WAAA,CAAY,UAA4B,EAAE,EAAA;QACtC,KAAK,CAAC,OAAO,CAAC,CAAC;QAHT,IAAS,CAAA,SAAA,GAAG,KAAK,CAAC;QAcrB,IAAe,CAAA,eAAA,GAAG,MAAK;AAC1B,YAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,EAAE;AAC3C,gBAAA,IAAI,IAAI,CAAC,MAAO,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,EAAE;AAC/D,oBAAA,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC;iBACrE;qBAAM;AACH,oBAAA,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;iBACjE;aACJ;AACL,SAAC,CAAA;QAlBG,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,QAAQ,IAAI,KAAK,CAAC;KAC9C;IAEe,MAAM,GAAA;AAClB,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;AAClF,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,YAAA,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,EAAG,CAAC,UAAU,CAAC,CAAC;SACnE;KACJ;AAWJ;;ACnBD,MAAM,QAAQ,CAAA;AAYV,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,MAAM,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC;KAC9B;AAED,IAAA,IAAW,EAAE,GAAA;AACT,QAAA,OAAO,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;KAC/B;AAED,IAAA,IAAW,EAAE,GAAA;AACT,QAAA,OAAO,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;KAC/B;AAED,IAAA,IAAW,GAAG,GAAA;AACV,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;KACxC;AAED,IAAA,IAAW,OAAO,GAAA;AACd,QAAA,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;KACtD;AACJ,CAAA;AAED;;AAEG;AACG,MAAO,eAAgB,SAAQ,OAAO,CAAA;AAiBxC,IAAA,WAAA,CAAY,UAAkC,EAAE,EAAA;QAC5C,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,KAAK,GAAG,iBAAiB,CAAC;AAE/B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,MAAM,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;AACb,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;AAExB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,QAAQ,EAAE,EAAE,IAAI,QAAQ,EAAE,CAAC,CAAC;AAEhD,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;AAE1B,QAAA,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;KAC1B;IAEQ,MAAM,GAAA;AACX,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAC/D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAC3D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;AACjE,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;AACjE,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;AAC7D,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SACtD;KACJ;AAES,IAAA,YAAY,CAAC,CAAc,EAAA;AACjC,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC;AACvC,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YAC7B,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAC3B,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAE3B,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC;YAClF,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,SAAS,IAAI,OAAO,CAAC,UAAU,CAAC;AACjF,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACjB,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;YAEjB,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;YAE1F,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC;YAClF,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,SAAS,IAAI,OAAO,CAAC,UAAU,CAAC;AACjF,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACjB,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;YAEjB,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;YAE1F,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CACzD,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,SAAS,EAAE,CACrC,IAAI,IAAI,CAAC;AAEV,YAAA,IAAI,IAAI,CAAC,YAAY,EAAE;gBACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;aAC7C;YAED,IAAI,EAAE,CAAC,YAAY,IAAI,EAAE,CAAC,YAAY,EAAE;gBACpC,EAAE,CAAC,eAAe,CAAC,MAAM,GAAG,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;gBACrD,EAAE,CAAC,eAAe,CAAC,MAAM,GAAG,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;gBACrD,IAAI,CAAC,YAAY,EAAE,CAAC;aACvB;SACJ;aAAM,IAAI,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AACpC,YAAA,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;SAC1B;KACJ;AAES,IAAA,cAAc,CAAC,CAAc,EAAA;QACnC,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AAC1B,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC;QAEvC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC;QACjF,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,SAAS,IAAI,OAAO,CAAC,UAAU,CAAC;AAChF,QAAA,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AACf,QAAA,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;;AAGf,QAAA,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AACtE,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAEzC,QAAA,IAAI,CAAC,CAAC,YAAY,EAAE;YAChB,CAAC,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;YACnD,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;KACJ;IAEM,YAAY,GAAA;AACf,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QAClB,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACtD;AAES,IAAA,aAAa,CAAC,CAAc,EAAA;AAElC,QAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;QAC1B,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,MAAM,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC;QACvD,IAAI,CAAC,EAAE;AACH,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;AACtD,YAAA,IAAI,CAAC,MAAO,CAAC,SAAS,CAClB,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CACvE,CAAC;SACL;KACJ;AAES,IAAA,UAAU,CAAC,CAAc,EAAA;QAC/B,IAAI,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AAC7B,YAAA,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SAC1B;QAED,IAAI,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AAC7B,YAAA,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;SAC1B;QAED,IACI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC;YACxD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAC1D;AACE,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACrB;KACJ;AAES,IAAA,aAAa,CAAC,CAAc,EAAA;KACrC;AAES,IAAA,WAAW,CAAC,CAAc,EAAA;AAChC,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAC9B,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC;QACvC,IAAI,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YAC7B,IAAI,CAAC,QAAS,CAAC,WAAW,CAAC,QAAQ,GAAG,CAAC,CAAC;AAExC,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EACpB,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAEzB,IAAI,CAAC,EAAE,CAAC,YAAY,IAAI,CAAC,EAAE,CAAC,YAAY,EAAE;gBACtC,OAAO;aACV;AAED,YAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;AAE1B,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACjB,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC;YAClF,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,SAAS,IAAI,OAAO,CAAC,UAAU,CAAC;AAEjF,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACjB,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;YACjB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC;YAClF,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,SAAS,IAAI,OAAO,CAAC,UAAU,CAAC;AAEjF,YAAA,MAAM,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC7C,MAAM,gBAAgB,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAC9D,MAAM,CACT,CAAC;YACF,IAAI,gBAAgB,EAAE;AAClB,gBAAA,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAA;gBAEpC,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,CAAA;gBAC1E,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAA;AAErD,gBAAA,MAAM,UAAU,GAAG,QAAQ,GAAG,SAAS,CAAC;AACxC,gBAAA,MAAM,sBAAsB,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAEnE,gBAAA,MAAM,OAAO,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;AACnC,gBAAA,MAAM,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;gBAC5C,MAAM,KAAK,GAAG,OAAO,CAAC,MAAM,EAAE,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC;gBAEnD,IAAI,CAAC,GAAG,sBAAsB,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC;AAC9C,gBAAA,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AACxC,gBAAA,GAAG,CAAC,YAAY,CAAC,CAAC,UAAU,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AAEtE,gBAAA,MAAM,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC7C,gBAAA,MAAM,OAAO,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACtD,gBAAA,MAAM,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAChD,gBAAA,IAAI,CAAC,GAAG,GAAG,GAAG,sBAAsB,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,GAAGV,OAAY,CAAC;gBACzE,IAAI,CAAC,GAAG,KAAK;oBAAE,CAAC,GAAG,KAAK,CAAC;gBACzB,GAAG,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AAC/E,gBAAA,GAAG,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;gBAExD,GAAG,CAAC,qBAAqB,EAAE,CAAC;gBAC5B,GAAG,CAAC,MAAM,EAAE,CAAC;aAChB;AACD,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACrB;aAAM,IAAI,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YACpC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AAExB,YAAA,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AACf,YAAA,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACf,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC;YACjF,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,CAAC,CAAC,GAAI,CAAC,SAAS,IAAI,OAAO,CAAC,UAAU,CAAC;AAEhF,YAAA,IAAI,CAAC,CAAC,CAAC,YAAY,EAAE;gBACjB,OAAO;aACV;AAED,YAAA,IAAI,CAAC,MAAO,CAAC,UAAU,EAAE,CAAC;AAE1B,YAAA,IAAI,SAAS,GAAG,CAAC,CAAC,SAAS,CAAA;AAC3B,YAAA,IAAI,WAAW,GAAG,IAAID,KAAG,CAAC,GAAG,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC;YAE3E,IAAI,WAAW,EAAE;AACb,gBAAA,IAAI,GAAG,CAAC,KAAK,GAAG,GAAG,EAAE;AACjB,oBAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,yBAAyB,CACtC,WAAW,CAAC,MAAM,EAAE,EACpB,CAAC,CAAC,YAAY,CAAC,MAAM,EAAE,CAC1B,CAAC;AACF,oBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;oBACpB,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBAC/B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;oBAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;oBAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;oBAC7B,GAAG,CAAC,qBAAqB,EAAE,CAAC;oBAC5B,GAAG,CAAC,MAAM,EAAE,CAAC;AACb,oBAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;iBACrB;qBAAM;AACH,oBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,YAAY,EACnB,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,EACzB,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC;AACnC,oBAAA,IAAI,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAClC,oBAAA,IAAI,EAAE,GAAG,IAAI,IAAI,EAAE,CAAC;oBACpB,IAAI,IAAIA,KAAG,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,KAAKA,KAAG,CAAC,MAAM,EAAE;AAC/D,wBAAA,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;wBAChD,GAAG,CAAC,qBAAqB,EAAE,CAAC;wBAC5B,GAAG,CAAC,MAAM,EAAE,CAAC;AACb,wBAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;qBACrB;iBACJ;aACJ;SACJ;KACJ;IAES,MAAM,GAAA;AAEZ,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;QAEzB,CAAC,CAAC,WAAW,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAEvC,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO;SACV;AAED,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;QAC9B,IAAI,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACtD,OAAO;SACV;AAED,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC;AAC9B,QAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AACpB,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACrB;aAAM;YACH,CAAC,CAAC,WAAW,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACvC,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI;AACd,iBAAA,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AACvE,iBAAA,SAAS,EAAE,CAAC;AACjB,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE;AAC5B,gBAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;aACrB;YACD,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAC/B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAC7B,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAC7B,GAAG,CAAC,qBAAqB,EAAE,CAAC;YAC5B,GAAG,CAAC,MAAM,EAAE,CAAC;SAChB;AAED,QAAA,IAAI,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,WAAW,EAAE,GAAG,IAAI,EAAE;YACtD,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACtD;aAAM;YACH,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACtD;KACJ;AACJ;;ACpWD,MAAM,aAAa,GAAG,uBAAuB;IACzC,iFAAiF;IACjF,sHAAsH;AACtH,IAAA,QAAQ,CAAC;AAEb,MAAM,cAAc,GAAG,uBAAuB;IAC1C,iFAAiF;IACjF,wDAAwD;AACxD,IAAA,QAAQ,CAAC;AAEb;;AAEG;AACH,MAAM,WAAY,SAAQ,OAAO,CAAA;AAK7B,IAAA,WAAA,CAAY,UAA0B,EAAE,EAAA;QACpC,KAAK,CAAC,OAAO,CAAC,CAAC;AACf,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACf,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC5B;IAEe,MAAM,GAAA;AAElB,QAAA,IAAI,SAAS,GAAG,IAAI,MAAM,CAAC;AACvB,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,kBAAkB,CAAC;AAChD,YAAA,IAAI,EAAE,aAAa;AACtB,SAAA,CAAC,CAAC;QACH,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;AAGxC,QAAA,IAAI,UAAU,GAAG,IAAI,MAAM,CAAC;AACxB,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,mBAAmB,CAAC;AACjD,YAAA,IAAI,EAAE,cAAc;AACvB,SAAA,CAAC,CAAC;QACH,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;AAEzC,QAAA,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;AACtD,QAAA,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AACtD,QAAA,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;AACxD,QAAA,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AACvD,QAAA,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;AACvD,QAAA,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AACvD,QAAA,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AAC1D,QAAA,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;AACzD,QAAA,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AACxD,QAAA,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AAE3D,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;KACtD;AAED;;;AAGG;IACI,MAAM,GAAA;QACT,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEnD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAS,CAAC,SAAS,EAAE,CAAC;AAE/C,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;KAClB;AAED;;;AAGG;IACH,OAAO,GAAA;QACH,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEnD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAS,CAAC,SAAS,EAAE,CAAC;AAC/C,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;KACnB;IAEM,QAAQ,GAAA;AACX,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAEf,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACtD;AAES,IAAA,KAAK,CAAC,CAAW,EAAA;AACvB,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAEhC,QAAA,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,EAAE;AAClB,YAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,4BAA4B,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC;YACrE,IAAI,GAAG,EAAE;AACL,gBAAA,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;AACtC,gBAAA,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;gBACrD,GAAG,CAAC,qBAAqB,EAAE,CAAC;gBAC5B,GAAG,CAAC,MAAM,EAAE,CAAC;aAChB;SACJ;KACJ;AACJ;;ACrGD,MAAM,aAAa,GAAG,GAAG,CAAC;AAO1B,SAAS,cAAc,CAAC,CAAS,EAAA;AAC7B,IAAA,IAAI,CAAC,GAAG,IAAI,EAAE;AACV,QAAA,OAAO,CAAG,EAAA,CAAC,CAAC,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAA,GAAA,CAAK,CAAC;KACxC;AAAM,SAAA,IAAI,CAAC,GAAG,CAAC,EAAE;QACd,OAAO,CAAA,EAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;KAC/B;SAAM;QACH,OAAO,CAAA,EAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC;KAC9B;AACL,CAAC;AAED,MAAM,cAAe,SAAQ,UAAU,CAAA;AAkBnC,IAAA,WAAA,CAAY,UAAiH,EAAE,EAAA;AAC3H,QAAA,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAjBxB,IAAc,CAAA,cAAA,GAAG,KAAK,CAAC;QAmBnB,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAACY,aAAW,CAAC,CAAC;AAEtC,QAAA,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,aAAa,IAAI,SAAS,GAAG,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC;QAExF,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC;QAE1C,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,iBAAiB,IAAI,KAAK,CAAC;QAE7D,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC;AAEtC,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAEzB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAElB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC;AAC1B,YAAA,MAAM,EAAE,YAAY;AACpB,YAAA,OAAO,EAAE;AACL,gBAAA,IAAI,EAAE,EAAE;AACR,gBAAA,IAAI,EAAE,EAAE;AACR,gBAAA,KAAK,EAAE,uBAAuB;AAC9B,gBAAA,YAAY,EAAE,kBAAkB;AAChC,gBAAA,OAAO,EAAE,IAAI;AACb,gBAAA,KAAK,EAAE,QAAQ;AACf,gBAAA,MAAM,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;AAClB,aAAA;AACG,SAAA,CAAC,CAAC;QAEV,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC;AAE9C,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,CAAC;AAC3B,YAAA,QAAQ,EAAE;AACN,gBAAA,MAAM,EAAE,EAAE;AACV,gBAAA,SAAS,EAAE,GAAG;AACd,gBAAA,KAAK,EAAE,kBAAkB;AACzB,gBAAA,QAAQ,EAAE,KAAK;AAClB,aAAA;AACG,SAAA,CAAC,CAAC;QAET,IAAI,CAAC,YAAoB,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;QAEpD,IAAI,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;QAE7E,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,SAAS,EAAE;AACP,oBAAA,KAAK,EAAE,CAAC;AACR,oBAAA,SAAS,EAAE,IAAI;AACf,oBAAA,GAAG,EAAE,WAAW;AAChB,oBAAA,KAAK,EAAE,cAAc;AACrB,oBAAA,QAAQ,EAAE,KAAK;AAClB,iBAAA;AACD,gBAAA,UAAU,EAAE;AACR,oBAAA,IAAI,EAAE,OAAO;AAChB,iBAAA;aACG,CAAC;AACT,YAAA,IAAI,MAAM,CAAC;AACP,gBAAA,SAAS,EAAE;AACP,oBAAA,KAAK,EAAE,CAAC;AACR,oBAAA,SAAS,EAAE,IAAI;AACf,oBAAA,GAAG,EAAE,WAAW;AAChB,oBAAA,KAAK,EAAE,cAAc;AACrB,oBAAA,QAAQ,EAAE,KAAK;AAClB,iBAAA;AACD,gBAAA,UAAU,EAAE;AACR,oBAAA,IAAI,EAAE,KAAK;AACd,iBAAA;aACG,CAAC;SACZ,CAAC;AAEF,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC,OAAO,EAAE;YACnC,QAAQ,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC;AAC/C,YAAA,cAAc,EAAE,KAAK;YACrB,kBAAkB,EAAE,CAAC,GAAG;AACxB,YAAA,gBAAgB,EAAE,IAAI;AACtB,YAAA,mBAAmB,EAAE,KAAK;AAC7B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE;AACvC,YAAA,QAAQ,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AACxD,YAAA,cAAc,EAAE,IAAI;AACpB,YAAA,mBAAmB,EAAE,IAAI;AACzB,YAAA,eAAe,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,IAAI,CAAC;AACrC,YAAA,YAAY,EAAE,CAAC;AAClB,SAAA,CAAC,CAAC;KACN;IAED,IAAI,aAAa,CAAC,CAAU,EAAA;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;KAI3B;AAED,IAAA,UAAU,CAAC,MAAW,EAAA;AAClB,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;KACzB;IAEQ,IAAI,GAAA;QACT,IAAI,CAAC,SAAS,EAAE,CAAC;KACpB;IAEQ,QAAQ,GAAA;QACb,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;IAED,SAAS,GAAA;QACL,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC;QAE9C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAClD,QAAA,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QAEhE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpD,QAAA,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAE7D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChD,QAAA,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAEzD,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAExC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;KAE7C;IAED,WAAW,GAAA;AACP,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;AAC5B,QAAA,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;AACxD,QAAA,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAEpD,IAAI,CAAC,KAAK,EAAE,CAAC;AAEb,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC5B;AAED,IAAA,aAAa,CAAC,CAAM,EAAA;;AAGhB,QAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;AAE/D,QAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;AAEnD,QAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YAGpB,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC;YAE7C,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;AAG1C,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,aAAa,CAAC,IAAI,CAAC,CAAC;AACrD,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,aAAa,CAAC,IAAI,CAAC,CAAC;YAErD,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,eAAe,EAAE,UAAU,EAAE,CAAC;YACtD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC;AAE9D,YAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAC3E,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;YAC/C,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;SAClD;KACJ;AAED,IAAA,WAAW,CAAC,CAAM,EAAA;AACd,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AAEnB,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAE1B,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,IAAI,CAAC,CAAC;YAE5C,IAAI,IAAI,CAAC,SAAS,IAAI,OAAO,IAAI,CAAC,SAAS,KAAK,UAAU,EAAE;gBACxD,IAAI,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;gBACpD,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;AAElD,gBAAA,IAAI,MAAM,GAAG;oBACT,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,CAAC,GAAG,CAAC;oBACxC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,CAAC,GAAG,CAAC;oBACxC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,CAAC,GAAG,CAAC;oBACxC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,CAAC,GAAG,CAAC;iBAC3C,CAAC;AACF,gBAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;aAC1B;AAED,YAAA,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBACzB,IAAI,CAAC,KAAK,EAAE,CAAC;aAChB;AAED,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;SAC5B;AACD,QAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;QACnD,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,eAAe,EAAE,QAAQ,EAAE,CAAC;KACvD;AAED,IAAA,SAAS,CAAC,WAAgB,EAAE,SAAc,EAAE,QAAc,EAAA;QAEtD,IAAI,CAAC,QAAQ,EAAE;YACX,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;SACpE;AAED,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;AAEjE,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;AAEhE,QAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,cAAc,CAAC;QAEnC,IAAI,IAAI,GAAG,EAAE,CAAC;QAEd,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;QAC/C,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;AAE7C,QAAA,IAAI,OAAO,GAAG;YACV,QAAQ;YACR,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,WAAW,CAAC,GAAG,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC;YACxG,MAAM;YACN,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,CAAC,GAAG,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC;YACxG,QAAQ;SACX,CAAC;AAGF,QAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEpB,QAAA,IAAI,UAAU,GAAG,CAAC,KAAU,EAAE,KAAU,KAAI;YACxC,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC3B,YAAA,IAAI,IAAI,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC;YACxB,GAAG,CAAC,SAAS,EAAE,CAAC;AAEhB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,EAAE,CAAC,EAAE,EAAE;AACpC,gBAAA,IAAI,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,GAAG,aAAa,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC1D,gBAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAChB;AACL,SAAC,CAAC;AAEF,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACzC,YAAA,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SAC1C;QAED,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AAE9C,QAAA,IAAI,IAAI,CAAC,cAAc,EAAE,CAGxB;KACJ;AAED,IAAA,YAAY,CAAC,CAAM,EAAA;AACf,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,IAAI,CAAC,CAAC;YAC5C,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC;AAC1D,YAAA,IAAI,CAAC,SAAS;gBACV,OAAO;YACX,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;SAChD;KACJ;IAED,KAAK,GAAA;AACD,QAAA,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,KAAK,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC;KACzD;IAEQ,KAAK,GAAA;AACV,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,EAAE;AACH,YAAA,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;gBACtB,IAAI,GAAG,GAAG,CAAC,CAAC;gBACZ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC9C,oBAAA,GAAG,IAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC3C;AAED,gBAAA,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAQ,CAAC,CAAC;gBACpE,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,OAAO,CAAC,CAAG,EAAA,cAAc,CAAC,GAAG,CAAC,CAAK,EAAA,EAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAM,IAAA,CAAA,CAAC,CAAC;aAC/F;SACJ;KACJ;AAED,IAAA,IAAI,SAAS,GAAA;AACT,QAAA,OAAO,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;KACvD;AACJ,CAAA;AAED,MAAMA,aAAW,GAAG;IAChB,KAAK;IACL,QAAQ;IACR,WAAW;IACX,YAAY;IACZ,YAAY;IACZ,QAAQ;IACR,QAAQ;IACR,QAAQ;IACR,WAAW;IACX,WAAW;IACX,WAAW;IACX,KAAK;IACL,KAAK;IACL,KAAK;IACL,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;IACP,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,UAAU;IACV,aAAa;IACb,YAAY;IACZ,YAAY;CACf;;AChWD,MAAM1D,iBAAe,GAAG,CAAA;iiCACygC,CAAC;AAQliC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCG;AACG,MAAO,SAAU,SAAQ,OAAO,CAAA;AAIlC,IAAA,WAAA,CAAY,UAA4B,EAAE,EAAA;QACtC,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,cAAc,CAAC;AACrC,YAAA,IAAI,EAAE,CAAA,eAAA,EAAkB,IAAI,CAAC,IAAI,CAAE,CAAA;YACnC,aAAa,EAAE,OAAO,CAAC,aAAa;YACpC,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,iBAAiB,EAAE,OAAO,CAAC,iBAAiB;AAC/C,SAAA,CAAC,CAAC;AAGH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC;AAC/B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,qBAAqB,CAAC;AACnD,YAAA,IAAI,EAAEA,iBAAe;AACxB,SAAA,CAAC,CAAC;KACN;IAED,IAAW,aAAa,CAAC,CAAU,EAAA;AAC/B,QAAA,IAAI,CAAC,cAAc,CAAC,aAAa,GAAG,CAAC,CAAC;KACzC;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;AAE9C,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;YACtD,IAAI,QAAQ,EAAE;gBACV,IAAI,CAAC,QAAQ,EAAE,CAAC;aACnB;iBAAM;gBACH,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;AACL,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC/C;IAEe,UAAU,GAAA;QACtB,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;KAC/C;IAEQ,YAAY,GAAA;QACjB,IAAI,CAAC,QAAS,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;KAClD;AACJ;;AC3Fe,SAAA,UAAU,CAAC,IAAU,EAAE,OAAe,EAAA;IAClD,OAAO,IAAI,IAAI,CAAC,CAAC,IAAI,GAAG,OAAO,GAAG,IAAI,CAAC,CAAC;AAC5C,CAAC;AAEK,SAAU,SAAS,CAAC,IAAU,EAAE,QAAoB,GAAA,IAAI,EAAE,gBAAA,GAA4B,KAAK,EAAA;IAE7F,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAC/B,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,EACvB,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;IAEjC,IAAI,QAAQ,EAAE;QACV,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAClD,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EACpD,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAEzD,IAAI,gBAAgB,EAAE;AAClB,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AAC/D,YAAA,OAAO,CAAG,EAAA,KAAK,CAAI,CAAA,EAAA,GAAG,IAAI,IAAI,CAAA,CAAA,EAAI,CAAC,CAAA,CAAA,EAAI,CAAC,CAAI,CAAA,EAAA,CAAC,CAAI,CAAA,EAAA,EAAE,EAAE,CAAC;SACzD;AAED,QAAA,OAAO,CAAG,EAAA,KAAK,CAAI,CAAA,EAAA,GAAG,CAAI,CAAA,EAAA,IAAI,CAAI,CAAA,EAAA,CAAC,CAAI,CAAA,EAAA,CAAC,CAAI,CAAA,EAAA,CAAC,EAAE,CAAC;KACnD;AAED,IAAA,OAAO,GAAG,KAAK,CAAA,CAAA,EAAI,GAAG,CAAI,CAAA,EAAA,IAAI,EAAE,CAAC;AACrC,CAAC;SAEe,gBAAgB,GAAA;AAC5B,IAAA,OAAO,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAC5C,CAAC;AAEe,SAAA,kBAAkB,CAAC,CAAS,EAAE,GAAW,EAAA;AACrD,IAAA,OAAO,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;AACzB,CAAC;AAEe,SAAA,SAAS,CAAC,GAA6B,EAAE,OAAkB,GAAA,CAAC,EAAE,IAAA,GAAe,EAAE,EAAE,SAAA,GAAoB,CAAC,EAAE,QAAgB,OAAO,EAAA;AAC3I,IAAA,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;AAC1B,IAAA,GAAG,CAAC,WAAW,GAAG,KAAK,CAAC;IACxB,GAAG,CAAC,SAAS,EAAE,CAAC;AAChB,IAAA,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AACvB,IAAA,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAC1B,GAAG,CAAC,MAAM,EAAE,CAAC;AACjB,CAAC;AAEK,SAAU,QAAQ,CAAC,GAA6B,EAAE,IAAY,EAAE,CAAS,EAAE,CAAS,EAAE,IAAA,GAAe,YAAY,EAAE,SAAA,GAAoB,OAAO,EAAE,KAAmB,GAAA,MAAM,EAAE,QAAyB,GAAA,QAAQ,EAAE,MAAA,GAAiB,CAAC,EAAA;IAClO,GAAG,CAAC,IAAI,EAAE,CAAC;AACX,IAAA,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACpB,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG+C,OAAY,CAAC,CAAC;AAClC,IAAA,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;AAC1B,IAAA,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;AAC5B,IAAA,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC;AAChB,IAAA,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC;IACtB,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACzB,GAAG,CAAC,OAAO,EAAE,CAAC;AAClB,CAAC;AAEM,MAAM,MAAM,GAAuB;IACtC,CAAC,KAAK,EAAE,EAAE,CAAC;IACX,CAAC,KAAK,EAAE,EAAE,CAAC;IACX,CAAC,KAAK,EAAE,EAAE,CAAC;IACX,CAAC,IAAI,EAAE,EAAE,CAAC;IACV,CAAC,IAAI,EAAE,EAAE,CAAC;IACV,CAAC,IAAI,EAAE,EAAE,CAAC;IACV,CAAC,GAAG,EAAE,EAAE,CAAC;IACT,CAAC,IAAI,EAAE,EAAE,CAAC;IACV,CAAC,GAAG,EAAE,CAAC,CAAC;IACR,CAAC,GAAG,EAAE,EAAE,CAAC;IACT,CAAC,GAAG,EAAE,EAAE,CAAC;IACT,CAAC,GAAG,EAAE,CAAC,CAAC;IACR,CAAC,IAAI,EAAE,EAAE,CAAC;IACV,CAAC,IAAI,EAAE,EAAE,CAAC;IACV,CAAC,IAAI,EAAE,CAAC,CAAC;AACT,IAAA,CAAC,IAAI,EAAE,EAAE,CAAC;AACV,IAAA,CAAC,KAAK,EAAE,EAAE,CAAC;AACX,IAAA,CAAC,KAAK,EAAE,CAAC,CAAC;AACV,IAAA,CAAC,KAAK,EAAE,EAAE,CAAC;AACX,IAAA,CAAC,KAAK,EAAE,EAAE,CAAC;AACX,IAAA,CAAC,MAAM,EAAE,CAAC,CAAC;AACX,IAAA,CAAC,MAAM,EAAE,EAAE,CAAC;AACZ,IAAA,CAAC,MAAM,EAAE,EAAE,CAAC;AACZ,IAAA,CAAC,OAAO,EAAE,CAAC,CAAC;AACZ,IAAA,CAAC,OAAO,EAAE,CAAC,CAAC;AACZ,IAAA,CAAC,OAAO,EAAE,EAAE,CAAC;AACb,IAAA,CAAC,OAAO,EAAE,EAAE,CAAC;AACb,IAAA,CAAC,QAAQ,EAAE,CAAC,CAAC;AACb,IAAA,CAAC,QAAQ,EAAE,CAAC,CAAC;AACb,IAAA,CAAC,QAAQ,EAAE,CAAC,CAAC;AACb,IAAA,CAAC,SAAS,EAAE,EAAE,CAAC;AACf,IAAA,CAAC,SAAS,EAAE,CAAC,CAAC;AACd,IAAA,CAAC,SAAS,EAAE,CAAC,CAAC;AACd,IAAA,CAAC,SAAS,EAAE,CAAC,CAAC;AACd,IAAA,CAAC,UAAU,EAAE,EAAE,CAAC;AAChB,IAAA,CAAC,UAAU,EAAE,EAAE,CAAC;AAChB,IAAA,CAAC,UAAU,EAAE,CAAC,CAAC;AACf,IAAA,CAAC,WAAW,EAAE,CAAC,CAAC;AAChB,IAAA,CAAC,WAAW,EAAE,CAAC,CAAC;AAChB,IAAA,CAAC,WAAW,EAAE,EAAE,CAAC;AACjB,IAAA,CAAC,WAAW,EAAE,CAAC,CAAC;AAChB,IAAA,CAAC,YAAY,EAAE,CAAC,CAAC;AACjB,IAAA,CAAC,YAAY,EAAE,CAAC,CAAC;AACjB,IAAA,CAAC,YAAY,EAAE,EAAE,CAAC;AAClB,IAAA,CAAC,YAAY,EAAE,CAAC,CAAC;AACjB,IAAA,CAAC,aAAa,EAAE,CAAC,CAAC;AAClB,IAAA,CAAC,aAAa,EAAE,CAAC,CAAC;AAClB,IAAA,CAAC,aAAa,EAAE,EAAE,CAAC;CACtB,CAAC;AAEI,SAAU,QAAQ,CAAC,OAAe,EAAA;AACpC,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;QAC/C,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,EAAE;AACxB,YAAA,OAAO,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;SACxB;KACJ;AACL,CAAC;AAEM,MAAM,MAAM,GAAG;IAClB,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;CACR;;AC/HD,MAAM,eAAe,GAAuB,CAAC,QAAQ,EAAE,SAAS,cAAa,CAAC;AAW9E,MAAM,aAAa,CAAA;AAcf,IAAA,WAAA,CAAY,UAA2B,EAAE,EAAA;AAErC,QAAA,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,eAAe,CAAC,CAAC;QAE5C,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI,IAAI,EAAE,CAAC;QAC9C,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,IAAI,IAAI,IAAI,EAAE,CAAC;AACpD,QAAA,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,QAAQ,IAAI,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;AACxE,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;QACpE,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC;QACxC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC;AAExC,QAAA,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,SAAS,GAAG,OAAO,CAAC,UAAU,GAAG,GAAG,CAAC;AAE7E,QAAA,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC;AAClC,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAElB,QAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;KACf;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE;YAChC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;YACzC,IAAI,CAAC,uBAAuB,EAAE,CAAC;SAClC;KACJ;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,wBAAwB,EAAE;AAC/B,YAAA,MAAM,CAAC,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;AAC3D,YAAA,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC;SACrC;KACJ;IAEM,OAAO,GAAA;AACV,QAAA,OAAO,IAAI,CAAC,wBAAwB,IAAI,CAAC,CAAC;KAC7C;IAES,uBAAuB,GAAA;QAC7B,IAAI,CAAC,wBAAwB,GAAG,MAAM,CAAC,qBAAqB,CAAC,MAAK;YAC9D,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,uBAAuB,EAAE,CAAC;AACnC,SAAC,CAAC,CAAC;KACN;IAES,MAAM,GAAA;QACZ,IAAI,GAAG,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;QACnC,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC9B,QAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;AAEpB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;;KAGzE;AAED,IAAA,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,MAAM,CAAA;KACrB;IAEM,GAAG,CAAC,UAAgB,EAAE,QAAc,EAAA;AACvC,QAAA,IAAI,UAAU,KAAK,IAAI,CAAC,WAAW,IAAI,QAAQ,KAAK,IAAI,CAAC,SAAS,EAAE;AAChE,YAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;AAC9B,YAAA,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;AAC1B,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;AACpE,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;SAClE;KACJ;AAED,IAAA,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;AAED,IAAA,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED,IAAA,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,SAAS,CAAC;KACzB;AAED,IAAA,IAAW,cAAc,GAAA;AACrB,QAAA,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;KACrC;AAED,IAAA,IAAW,YAAY,GAAA;AACnB,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;KACnC;AAED,IAAA,IAAW,WAAW,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;KAClC;IAED,IAAW,OAAO,CAAC,OAAa,EAAA;AAC5B,QAAA,IAAI,OAAO,KAAK,IAAI,CAAC,QAAQ,EAAE;YAC3B,IAAI,IAAI,CAAC,QAAQ,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,EAAE;AAC1C,gBAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;aACjC;iBAAM,IAAI,IAAI,CAAC,QAAQ,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,EAAE;AACjD,gBAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;aACjC;iBAAM;AACH,gBAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;aAC3B;AACD,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC5D;KACJ;IAED,IAAW,UAAU,CAAC,IAAU,EAAA;AAC5B,QAAA,IAAI,IAAI,KAAK,IAAI,CAAC,WAAW,EAAE;AAC3B,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;AACpE,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SAClD;KACJ;IAED,IAAW,QAAQ,CAAC,IAAU,EAAA;AAC1B,QAAA,IAAI,IAAI,KAAK,IAAI,CAAC,SAAS,EAAE;AACzB,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;AACpE,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SAClD;KACJ;AACJ;;AC5HD,MAAM,uBAAuB,GAAG,MAAM,CAAC;AACvC,MAAM,uBAAuB,GAAG,GAAG,GAAG,uBAAuB,CAAC;AAe9D,MAAM,mBAAmB,GAA2B;IAChD,WAAW;IACX,UAAU;IACV,kBAAkB;IAClB,iBAAiB;IACjB,YAAY;IACZ,OAAO;IACP,MAAM;IACN,UAAU;IACV,OAAO;IACP,YAAY;CACf,CAAC;AAEF,MAAM,aAAa,GAAG,yIAAyI,CAAC;AAChK,MAAM,cAAc,GAAG,ieAAie,CAAC;AAEzf,MAAM,gBAAgB,GAAG,uBAAuB,CAAC;AACjD,MAAM,iBAAiB,GAAG,SAAS,CAAC;AACpC,MAAM,gBAAgB,GAAG,SAAS,CAAC;AAEnC,MAAMhD,UAAQ,GACV,CAAA;;;;;;;;;;;;;;;;;;;OAmBG,CAAC;AAGR,MAAM,YAAa,SAAQ,IAAmB,CAAA;AA6B1C,IAAA,WAAA,CAAY,UAA+B,EAAE,EAAA;AACzC,QAAA,KAAK,CAAC;AACF,YAAA,QAAQ,EAAEA,UAAQ;YAClB,KAAK,EAAE,IAAI,aAAa,CAAC;gBACrB,UAAU,EAAE,OAAO,CAAC,UAAU;gBAC9B,QAAQ,EAAE,OAAO,CAAC,QAAQ;gBAC1B,OAAO,EAAE,OAAO,CAAC,WAAW;gBAC5B,OAAO,EAAE,OAAO,CAAC,OAAO;gBACxB,OAAO,EAAE,OAAO,CAAC,OAAO;aAC3B,CAAC;AACL,SAAA,CAAC,CAAC;AAkMG,QAAA,IAAA,CAAA,aAAa,GAAG,CAAC,CAAgB,KAAI;AAC3C,YAAA,IAAI,IAAI,CAAC,YAAY,EAAE;gBACnB,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC;gBAClD,IAAI,WAAW,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,EACnC,oBAAoB,GAAG,EAAE,WAAW,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC,CAAC;AACnE,gBAAA,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,IAAI,CAAC,oBAAoB,GAAG,WAAW,CAAC;AACtF,gBAAA,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,oBAAoB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,UAAW,CAAC,CAAC,CAAC;aAC3E;AAAM,iBAAA,IAAI,IAAI,CAAC,mBAAmB,EAAE;AACjC,gBAAA,IAAI,oBAAoB,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC,CAAC;gBACxI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,oBAAoB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,UAAW,CAAC,CAAC,CAAC;aACtF;AACL,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,eAAe,GAAG,CAAC,CAAgB,KAAI;AAC7C,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAC1B,SAAC,CAAA;AA0BS,QAAA,IAAA,CAAA,YAAY,GAAG,CAAC,CAAa,KAAI;AACvC,YAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,gBAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;AAExD,gBAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC;AAC5B,gBAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;gBAE7B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;gBAC9C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;AAE1C,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;aAClD;AAAM,iBAAA,IAAI,IAAI,CAAC,mBAAmB,EAAE;AACjC,gBAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;gBAC/B,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;AAExD,gBAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC;gBAE5B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;AAE5C,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;aACzD;AACL,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,UAAU,GAAG,CAAC,CAAa,KAAI;AACrC,YAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,gBAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;gBACzB,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC;gBAC3D,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,WAAW,EAAE;oBACpF,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC;oBAClD,IAAI,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,oBAAoB,CAAC,CAAC;AACxG,oBAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;AAC7B,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AACpD,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;iBACzD;qBAAM;AACH,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;iBAClE;aACJ;AAAM,iBAAA,IAAI,IAAI,CAAC,kBAAkB,EAAE;AAChC,gBAAA,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;gBAChC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC;AAC3D,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;aACzE;AACL,SAAC,CAAA;QAES,IAAa,CAAA,aAAA,GAAG,MAAK;AAC3B,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAC7B,SAAC,CAAA;QAES,IAAW,CAAA,WAAA,GAAG,MAAK;AACzB,YAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC9B,SAAC,CAAA;QAES,IAAoB,CAAA,oBAAA,GAAG,MAAK;AAClC,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AACpC,SAAC,CAAA;QAES,IAAkB,CAAA,kBAAA,GAAG,MAAK;AAChC,YAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;AACrC,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,YAAY,GAAG,CAAC,CAAa,KAAI;AACvC,YAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,gBAAA,IAAI,SAAS,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,oBAAoB,GAAG,uBAAuB,CAAC;gBACpG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,gBAAgB,EAAE,SAAS,CAAC,EAAE,UAAU,CAAC,IAAI,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC,CAAA;aAC3G;AAAM,iBAAA,IAAI,IAAI,CAAC,kBAAkB,EAAE;AAChC,gBAAA,IAAI,SAAS,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,oBAAoB,GAAG,uBAAuB,CAAC;gBACpG,IAAI,UAAU,GAAG,UAAU,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,SAAS,CAAC,CAAC;AAChE,gBAAA,IAAI,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;AAC1E,oBAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,SAAS,CAAC,CAAC;iBACvE;aACJ;AACL,SAAC,CAAA;;QA/SG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;QAE7D,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,gBAAgB,CAAC;AAEvD,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,SAAS,GAAG,gBAAgB,EAAE,CAAC;QACpC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAE,CAAC;AAE7C,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AACzB,QAAA,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;AAChC,QAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;AAEjC,QAAA,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;AACrB,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;AAEtB,QAAA,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;AAE9B,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,IAAI,EAAE,CAAC;AACnC,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC;AACjC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,IAAI,EAAE,CAAC;AAEpC,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;QAEvB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5D,IAAI,CAAC,eAAe,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;AAEnE,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,YAAY,CAAC;YAC9B,SAAS,EAAE,CAAC,4BAA4B,CAAC;AACzC,YAAA,IAAI,EAAE,cAAc;AACpB,YAAA,IAAI,EAAE,OAAO;AAChB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC;YAC7B,SAAS,EAAE,CAAC,4BAA4B,CAAC;AACzC,YAAA,IAAI,EAAE,aAAa;AACnB,YAAA,IAAI,EAAE,MAAM;AACf,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,WAAW,CAAC;YAC5B,OAAO,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC;AAC3C,SAAA,CAAC,CAAA;AAEF,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;KAC5B;IAES,iBAAiB,GAAA;QACvB,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED,IAAA,IAAW,WAAW,GAAA;QAClB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;IAED,IAAW,WAAW,CAAC,KAAa,EAAA;AAChC,QAAA,IAAI,KAAK,KAAK,IAAI,CAAC,YAAY,EAAE;AAC7B,YAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,MAAM,EAAE,CAAC;SACjB;KACJ;IAEM,MAAM,GAAA;QACT,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;AAEe,IAAA,WAAW,CAAC,UAAuB,EAAA;QAC/C,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;IAEe,MAAM,GAAA;QAClB,KAAK,CAAC,MAAM,EAAE,CAAC;QAEf,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,uBAAuB,CAAC,CAAC;QAEtD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;QAClD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,MAAM,CAAC,uCAAuC,CAAE,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAElF,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC;QAEvC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAK;YAChC,IAAI,CAAC,IAAI,EAAE,CAAA;AACf,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,CAAO,KAAI;YACxC,IAAI,CAAC,YAAY,EAAE,CAAC;AACpB,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AACpD,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAClE,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAE9D,IAAI,CAAC,UAAW,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC3E,IAAI,CAAC,UAAW,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAEvE,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC/D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC/D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAC3D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAE9D,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;QACxC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;AAEzC,QAAA,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;YACtB,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACrC,YAAA,IAAI,CAAC,SAAS,CAAC,YAAY,GAAG,IAAI,CAAC;SACtC;aAAM;YACH,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACpC,YAAA,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC;SACrC;AAED,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAiB,KAAI;AACpD,YAAA,QAAQ,GAAG,CAAC,IAAI;AACZ,gBAAA,KAAK,MAAM;oBACP,IAAI,CAAC,IAAI,EAAE,CAAC;oBACZ,MAAM;AACV,gBAAA,KAAK,OAAO;oBACR,IAAI,CAAC,KAAK,EAAE,CAAC;oBACb,MAAM;aACb;AACL,SAAC,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;AAwBH,QAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AAEzB,QAAA,OAAO,IAAI,CAAC;KACf;AAEM,IAAA,aAAa,CAAC,UAAmB,EAAA;AACpC,QAAA,IAAI,UAAU,KAAK,IAAI,CAAC,WAAW,EAAE;AACjC,YAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;AAC9B,YAAA,IAAI,IAAI,CAAC,EAAE,EAAE;gBACT,IAAI,UAAU,EAAE;oBACZ,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;iBACnC;qBAAM;oBACH,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;iBAClC;aACJ;AACD,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;SAC5D;KACJ;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KACvD;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AACxD,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KACtD;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KACvD;IAEM,QAAQ,GAAA;AACX,QAAA,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AAC7D,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;AAClB,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KAC1D;AAmBS,IAAA,KAAK,CAAC,WAAmB,EAAE,oBAA4B,EAAE,GAAW,EAAA;AAC1E,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QAEpE,IAAI,gBAAgB,GAAG,CAAC,WAAW,GAAG,UAAU,IAAI,uBAAuB,CAAC;QAE5E,IAAI,UAAU,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,gBAAgB,CAAC,EAChE,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,gBAAgB,CAAC,CAAC;AAEjE,QAAA,IAAI,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG,UAAU,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,uBAAuB,CAAC;QAEzF,IAAI,aAAa,GAAG,UAAU,CAAC,UAAU,EAAE,KAAK,GAAG,GAAG,CAAC,CAAC;QACxD,IAAI,WAAW,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;AACrD,QAAA,IAAI,IAAI,GAAG,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,aAAa,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,WAAW,CAAC;QAEhF,IAAI,IAAI,GAAG,WAAW,IAAI,IAAI,GAAG,GAAG,EAAE;AAClC,YAAA,IAAI,UAAU,GAAG,IAAI,GAAG,oBAAoB,GAAG,uBAAuB,CAAC;AAEvE,YAAA,IAAI,CAAC,KAAK,CAAC,GAAG,CACV,UAAU,CAAC,aAAa,EAAE,UAAU,CAAC,EACrC,UAAU,CAAC,WAAW,EAAE,UAAU,CAAC,CACtC,CAAC;SACL;KACJ;AA2ED,IAAA,IAAW,WAAW,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;KACxE;AAED,IAAA,IAAW,YAAY,GAAA;AACnB,QAAA,OAAO,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;KACzE;IAES,OAAO,GAAA;AACb,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;AACrE,YAAA,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;AACvE,YAAA,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,CAAG,EAAA,IAAI,CAAC,QAAQ,CAAC,WAAW,IAAI,CAAC;AAC9D,YAAA,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,CAAG,EAAA,IAAI,CAAC,QAAQ,CAAC,YAAY,IAAI,CAAC;SACnE;KACJ;AAEM,IAAA,eAAe,CAAC,YAAoB,EAAA;AACvC,QAAA,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,IAAI,CAAC,oBAAoB,CAAC;KACjF;IAEe,MAAM,GAAA;QAClB,KAAK,CAAC,MAAM,EAAE,CAAC;AACf,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;KACrB;IAES,YAAY,GAAA;QAClB,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QACrC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;KACzG;IAES,YAAY,GAAA;AAClB,QAAA,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,IAAI,CAAC,oBAAoB,CAAC;QAC/F,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACxF,IAAI,CAAC,UAAW,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;SAC3C;aAAM;YACH,IAAI,CAAC,UAAW,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;YACzC,IAAI,CAAC,UAAW,CAAC,KAAK,CAAC,SAAS,GAAG,CAAA,WAAA,EAAc,OAAO,CAAA,GAAA,CAAK,CAAC;SACjE;KACJ;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,oBAAoB,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;QAClE,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAC5D,IAAI,SAAS,GAAG,QAAQ,CAAC,UAAU,GAAG,uBAAuB,CAAC,CAAC;QAC/D,IAAI,SAAS,EAAE;YAEX,IAAI,CAAC,YAAY,EAAE,CAAC;YAEpB,IAAI,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,uBAAuB,EAChD,OAAO,GAAG,OAAO,GAAG,IAAI,CAAC,oBAAoB,EAC7C,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;AAE5B,YAAA,IAAI,UAAU,GAAG,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;AAExE,YAAA,IAAI,gBAAgB,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,EACrC,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;YAEtC,KAAK,IAAI,CAAC,GAAG,UAAU,EAAE,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,OAAO,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,IAAI,OAAO,EAAE;gBAC/F,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;AAChC,gBAAA,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,EAAE;oBACrD,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,EAAE,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,iBAAiB,CAAC,CAAC;iBACjH;AACD,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE;oBAC/B,IAAI,EAAE,GAAG,CAAC,GAAG,CAAC,IAAI,OAAO,GAAG,QAAQ,CAAC,CAAC;AACtC,oBAAA,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,EAAE;wBACvD,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,iBAAiB,CAAC,CAAC;qBACjH;iBACJ;AACD,gBAAA,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,gBAAgB,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,EAAE,GAAG,IAAI,CAAC,YAAY,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,QAAQ,CAAC,CAAC;aACxK;YAED,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;KACJ;AACJ;;AC9eD,SAAS,QAAQ,CAAC,IAAU,EAAE,KAAa,EAAA;AACvC,IAAA,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,KAAK,CAAC,CAAC;AACvC,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED,MAAMC,iBAAe,GAAG,CAAA;;;;;;OAMjB,CAAC;AAER,MAAM,eAAgB,SAAQ,OAAO,CAAA;AAKjC,IAAA,WAAA,CAAY,UAAkC,EAAE,EAAA;AAC5C,QAAA,KAAK,CAAC;AACF,YAAA,IAAI,EAAE,UAAU;AAChB,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;QAEH,IAAI,WAAW,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI,IAAI,EAAE,CAAC;AAChD,QAAA,IAAI,SAAS,GAAG,OAAO,CAAC,UAAU,IAAI,QAAQ,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC;AACjE,QAAA,IAAI,OAAO,GAAG,OAAO,CAAC,QAAQ,IAAI,QAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;AAE5D,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC;AAClC,YAAA,UAAU,EAAE,SAAS;AACrB,YAAA,QAAQ,EAAE,OAAO;AACjB,YAAA,WAAW,EAAE,WAAW;AAC3B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC;AAC/B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAClD,YAAA,IAAI,EAAEA,iBAAe;AACxB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CAAC;AACtB,YAAA,KAAK,EAAE,UAAU;AACjB,YAAA,OAAO,EAAE,KAAK;AACd,YAAA,SAAS,EAAE,IAAI;AACf,YAAA,OAAO,EAAE,IAAI;AACb,YAAA,GAAG,EAAE,EAAE;AACP,YAAA,IAAI,EAAE,EAAE;AACR,YAAA,KAAK,EAAE,GAAG;AACV,YAAA,MAAM,EAAE,GAAG;AACX,YAAA,SAAS,EAAE,GAAG;AACd,YAAA,SAAS,EAAE,GAAG;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAU,KAAI;AAChD,YAAA,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACjC,SAAC,CAAC,CAAC;KACN;IAEe,MAAM,GAAA;AAElB,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC;AAErC,QAAA,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;AACrC,QAAA,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;AAElC,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;AACtD,YAAA,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACrC,IAAI,QAAQ,EAAE;AACV,gBAAA,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;aAC/B;AACL,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,SAAU,CAAC,CAAC;AAErD,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAO,KAAI;AACnD,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AACnE,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,MAAK;AAC3C,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,UAAU,EAAE,CAAC;AACzE,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,MAAK;AAC1C,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;AACvE,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,MAAK;AAClD,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,UAAU,EAAE,CAAC;AACzE,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,iBAAiB,EAAE,MAAK;AACjD,YAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;AACvE,SAAC,CAAC,CAAC;KACN;AACJ;;MC1GY,QAAQ,CAAA;AAKjB,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,OAAO,GAAG,MAAK;AACpB,SAAC,CAAC;AACF,QAAA,IAAI,CAAC,MAAM,GAAG,MAAK;AACnB,SAAC,CAAC;QACF,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CAAI,CAAC,OAA4C,EAAE,MAA8B,KAAI;AAC3G,YAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,YAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACzB,SAAC,CAAC,CAAC;AACH,QAAA,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;KACvB;AACJ;;ACVD,MAAM,4BAA4B,GAAG,CAAC,CAAC;AAkBvC,MAAM,uBAAuB,GAA+B,CAAC,iBAAiB,EAAE,kBAAkB,EAAE,OAAO,CAAC,CAAC;AAE7G;;AAEG;AACI,MAAM,IAAI,GAAG,CAAC,CAAC;AACf,MAAM,OAAO,GAAG,CAAC,CAAC;AAClB,MAAM,SAAS,GAAG,CAAC,CAAC;AAE3B;;AAEG;AACH,MAAM,KAAK,GAAG,CAAC,CAAC;AAChB,MAAM,MAAM,GAAG,CAAC,CAAC;AAEjB,MAAM,eAAe,GAAG,GAAG,CAAC;AAC5B,MAAM,aAAa,GAAG,GAAG,CAAC;AAC1B,MAAM,cAAc,GAAG,GAAG,CAAC;AAC3B,MAAM,WAAW,GAAG,GAAG,CAAC;AACxB,MAAM,UAAU,GAAG,GAAG,CAAC;MAYV,gBAAgB,CAAA;AAsBzB,IAAA,WAAA,CAAY,UAAkC,EAAE,EAAA;AAC5C,QAAA,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,uBAAuB,CAAC,CAAC;QAEpD,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC;AAErC,QAAA,IAAI,CAAC,mBAAmB,GAAG,4BAA4B,CAAC;AACxD,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AAExB,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AACxC,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACf,QAAA,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QAEjB,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAE1B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;AACzB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AAEzB,QAAA,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;KACpB;AAEM,IAAA,UAAU,CAAC,MAAc,EAAA;AAC5B,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;KACxB;IAEM,qBAAqB,CAAC,gBAAwB,CAAC,EAAA;AAClD,QAAA,IAAI,CAAC,mBAAmB,GAAG,aAAa,CAAC;KAC5C;AAEM,IAAA,QAAQ,CAAC,IAAY,EAAE,IAAY,EAAE,IAAa,EAAE,IAAa,EAAA;AACpE,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,IAAI,EAAE;AACN,YAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;SACrB;QACD,IAAI,IAAI,EAAE;AACN,YAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;SACrB;KACJ;AAES,IAAA,eAAe,CAAC,EAAU,EAAE,MAAc,EAAE,cAAsB,EAAA;AACxE,QAAA,IAAI,GAAG,GAAG,IAAI,QAAQ,EAAU,CAAC;AACjC,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,KAAK,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;AACzD,YAAA,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,cAAc,CAAC,EAAE,EAAE,CAAC,GAAW,KAAI;gBACpD,IAAI,IAAI,CAAC,MAAM,IAAI,cAAc,KAAK,IAAI,CAAC,eAAe,EAAE;oBACxD,GAAG,IAAI,GAAG,CAAC;oBACX,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;oBACrC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AACtC,oBAAA,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;AAC3C,oBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM;AAAE,wBAAA,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;AACzC,oBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM;AAAE,wBAAA,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;AACzC,oBAAA,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;AAC9B,oBAAA,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;iBACpB;qBAAM;oBACH,GAAG,CAAC,MAAM,EAAE,CAAC;iBAChB;AACL,aAAC,CAAC,CAAC;SACN;aAAM;YACH,GAAG,CAAC,MAAM,EAAE,CAAC;SAChB;QACD,OAAO,GAAG,CAAC,OAAO,CAAC;KACtB;IAES,mCAAmC,CAAC,KAAa,EAAE,cAAsB,EAAE,WAAmB,EAAE,EAAQ,EAAE,QAAc,EAAE,cAAsB,EAAA;QAEtJ,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;AAEzB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,cAAc,EAAE,CAAC,EAAE,EAAE;AACtC,YAAA,IAAI,CAAC,MAAM,IAAI,eAAe,CAAC;YAC/B,IAAI,CAAC,OAAO,EAAE,CAAC;;AAGf,YAAA,IAAI,SAAS,GAAG,CAAC,GAAG,WAAW,CAAC;AAChC,YAAA,IAAI,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;AAC9C,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;YAEvD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;AAErE,YAAA,CAAC,CAAC,MAAc,EAAE,KAAa,KAAI;AAC/B,gBAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,KAAK,EAAE,cAAc,CAAC,CAAC,CAAC;aAC9E,EAAE,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SACzB;KACJ;IAES,iBAAiB,CAAC,YAAsB,EAAE,cAAsB,EAAA;QAEtE,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;AACzB,QAAA,IAAI,cAAc,KAAK,IAAI,CAAC,eAAe;YAAE,OAAO;QAEpD,IAAI,EAAE,GAAG,IAAI,IAAI,EAAE,EACf,EAAE,GAAG,IAAI,IAAI,EAAE,CAAC;AAEpB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACrD,YAAA,IAAI,OAAO,GAAG,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,EAC7B,OAAO,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;YAE9B,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;YACxD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;YAExD,IAAI,QAAQ,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AAC1B,YAAA,IAAI,SAAS,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC;AAClC,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;YACtD,IAAI,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;AAC9C,YAAA,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;YAC5B,IAAI,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,eAAe,CAAC,CAAC;AAC3D,YAAA,IAAI,WAAW,GAAG,eAAe,GAAG,SAAS,GAAG,OAAO,CAAC;YAExD,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,EAAE,cAAc,CAAC,CAAC;YAEzD,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,QAAQ,CAAC,SAAS,EAAE,CAAC;;AAGrB,YAAA,IAAI,CAAC,mCAAmC,CAAC,CAAC,GAAG,CAAC,EAAE,cAAc,EAAE,WAAW,EAAE,EAAE,EAAE,QAAQ,EAAE,cAAc,CAAC,CAAC;YAE3G,IAAI,CAAC,MAAM,IAAI,OAAO,GAAG,cAAc,GAAG,eAAe,CAAC;YAC1D,IAAI,CAAC,OAAO,EAAE,CAAC;AAEf,YAAA,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC;AACzB,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM;AAAE,gBAAA,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;AACzC,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM;AAAE,gBAAA,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;AAEzC,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAC5D;KACJ;AAES,IAAA,mBAAmB,CAAC,MAAc,EAAE,KAAa,EAAE,cAAsB,EAAA;QAC/E,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;AACrE,QAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC,CAAC;KACrF;IAES,gBAAgB,CAAC,YAAsB,EAAE,cAAsB,EAAA;QACrE,OAAO,IAAI,OAAO,CAAe,CAAC,OAAkC,EAAE,MAAM,KAAI;AAC5E,YAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;YACtD,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACrC,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AAC1B,YAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,YAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AACzB,YAAA,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;AACjB,YAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,YAAA,IAAI,CAAC,iBAAiB,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;YAErD,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,cAAc,CAAC,CAAC;YAEzG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,MAAK;AACpC,gBAAA,OAAO,CAAC;oBACJ,IAAI,EAAE,IAAI,CAAC,MAAM;oBACjB,IAAI,EAAE,IAAI,CAAC,MAAM;oBACjB,IAAI,EAAE,IAAI,CAAC,MAAM;oBACjB,WAAW,EAAE,IAAI,CAAC,aAAa;oBAC/B,YAAY,EAAE,IAAI,CAAC,cAAc;AACpC,iBAAA,CAAC,CAAC;AACP,aAAC,CAAC,CAAC;AACP,SAAC,CAAC,CAAC;KACN;AAED,IAAA,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;AAED,IAAA,IAAW,aAAa,GAAA;QACpB,OAAO,IAAI,CAAC,cAAc,CAAC;KAC9B;AAED,IAAA,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;AAED,IAAA,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;AAED,IAAA,IAAW,IAAI,GAAA;QACX,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;AAED,IAAA,IAAW,WAAW,GAAA;QAClB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;AAED,IAAA,IAAW,oBAAoB,GAAA;QAC3B,OAAO,IAAI,CAAC,UAAU,CAAC;KAC1B;AAED,IAAA,IAAW,QAAQ,GAAA;QACf,OAAO,IAAI,CAAC,SAAS,CAAC;KACzB;AAEM,IAAA,cAAc,CAAC,YAAsB,EAAA;AAExC,QAAA,IAAI,GAAG,GAAG,IAAI,QAAQ,EAA4B,CAAC;QAEnD,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,GAAG,CAAC,MAAM,EAAE,CAAC;AAE/B,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;YACvC,GAAG,CAAC,MAAM,EAAE,CAAC;YACb,OAAO,GAAG,CAAC,OAAO,CAAC;SACtB;AAED,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAExD,IAAI,CAAC,eAAe,EAAE,CAAC;QAEvB,CAAC,CAAC,OAAe,KAAI;AACjB,YAAA,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAe,KAAI;AAClE,gBAAA,IAAI,OAAO,KAAK,IAAI,CAAC,eAAe,EAAE;AAClC,oBAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,IAAI,CAAC;AAC7B,oBAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,GAAG,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,WAAW,CAAC,CAAC;AAC9G,oBAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,oBAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC;AACjD,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACzE,oBAAA,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAC/B;AACL,aAAC,CAAC,CAAC;AACP,SAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAEzB,OAAO,GAAG,CAAC,OAAO,CAAC;KACtB;AAES,IAAA,gBAAgB,CAAC,MAAc,EAAA;QACrC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;aAChE,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,mBAAmB,GAAG,UAAU,CAAC,EAAE;YAC3G,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;SAC5C;QAED,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,aAAa,EAAE;YAClF,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;SAC9C;QAED,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,OAAO,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;AAC5F,YAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;SAC1B;KACJ;AAED;;AAEG;IACO,cAAc,GAAA;AACpB,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC3C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AAE7C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACjD,YAAA,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;SAC5B;QAED,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;AAC7C,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;KAC5E;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;AACzB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAC1B,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AACzB,QAAA,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;AACjB,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;KACjE;AACJ;;AClVD,MAAM,UAAU,GAAG,iBAAiB,CAAC;AACrC,MAAM,WAAW,GAAG,iBAAiB,CAAC;AACtC,MAAM,aAAa,GAAG,oBAAoB,CAAC;AAC3C,MAAM,kBAAkB,GAAG,iBAAiB,CAAC;AAC7C,MAAM,aAAa,GAAG,kBAAkB,CAAC;AACzC,MAAM,eAAe,GAAG,gBAAgB,CAAC;AACzC,MAAM,WAAW,GAAG,CAAC,aAAa,EAAE,aAAa,EAAE,eAAe,CAAC,CAAC;AACpE,MAAM,aAAa,GAAG,GAAG,CAAC;AAC1B,MAAM,UAAU,GAAG,CAAC,CAAC;AAQrB,MAAM,2BAA2B,GAAmC,CAAC,WAAW,EAAE,UAAU,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE,UAAU,EAAE,aAAa,EAAE,cAAc,EAAE,eAAe,EAAE,iBAAiB,CAAC,CAAC;AAEpN,MAAMD,UAAQ,GACV,CAAA;;;;;;;;;;;WAWO,CAAC;AAGZ,MAAM,oBAAqB,SAAQ,IAAsB,CAAA;AAgCrD,IAAA,WAAA,CAAY,UAAuC,EAAE,EAAA;AACjD,QAAA,KAAK,CAAC;AACF,YAAA,QAAQ,EAAEA,UAAQ;YAClB,KAAK,EAAE,IAAI,gBAAgB,EAAE;AAChC,SAAA,CAAC,CAAC;AA6GG,QAAA,IAAA,CAAA,gBAAgB,GAAG,CAAC,CAAa,KAAI;;;;YAI3C,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;YAChD,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;YAE9B,IAAI,eAAe,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;YAC7G,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACxC,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAEvC,YAAA,IAAI,cAAc,CAAC;AAEnB,YAAA,IAAI,eAAe,GAAG,CAAC,EAAE;gBACrB,cAAc,GAAG,CAAC,CAAC;gBACnB,eAAe,GAAG,CAAC,CAAC;gBACpB,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;aAChG;iBAAM,IAAI,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;AACnD,gBAAA,cAAc,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;AACvC,gBAAA,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;gBAC3C,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;aAC9G;iBAAM;AACH,gBAAA,cAAc,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC,UAAU,EAAE,eAAe,EAAE,CAAC,CAAS,EAAE,CAAa,KAAI;AACzF,oBAAA,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB,iBAAC,CAAC,CAAC;aACN;;AAGD,YAAA,IAAI,GAAG,GAAG,UAAU,CAAC,cAAc,GAAG,CAAC,CAAC,EACpC,GAAG,GAAG,UAAU,CAAC,cAAc,CAAC,CAAC;YACrC,IAAI,CAAC,GAAG,CAAC,eAAe,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD,IAAI,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;AAG/C,YAAA,IAAI,aAAa,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAC3B,YAAA,IAAI,GAAG,GAAG,SAAS,CAAC,aAAa,CAAC,EAC9B,GAAG,GAAG,SAAS,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;YACvC,CAAC,GAAG,CAAC,eAAe,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACnD,IAAI,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAE9C,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,eAAe,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,aAAa,EAAE,cAAc,GAAG,CAAC,EAAE,QAAQ,GAAG,SAAS,CAAC,CAAC;AAC7I,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,aAAa,GAAG,CAAC,CAAa,KAAI;AACxC,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AACpD,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,WAAW,GAAG,CAAC,CAAa,KAAI;AACtC,YAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AACpD,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,YAAY,GAAG,CAAC,CAAa,KAAI;AACvC,YAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,gBAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;AAExD,gBAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC;AAE5B,gBAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;oBACpB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;oBACrC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;iBACzC;AAED,gBAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,aAAa,CAAC;AAC7C,gBAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,cAAc,CAAC;AAE/C,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;aAClD;AACL,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,UAAU,GAAG,CAAC,CAAa,KAAI;AACrC,YAAA,IAAI,IAAI,CAAC,WAAW,EAAE;AAClB,gBAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;gBACzB,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC;AAC3D,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;aACjD;AACL,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,kBAAkB,GAAG,CAAC,CAAa,KAAI;AAC7C,YAAA,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;AACxB,gBAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;AAEnB,oBAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;wBACpB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;wBACrC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;qBACzC;oBAED,IAAI,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,qBAAqB,EAAE,CAAC;oBACvD,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;AAC9B,oBAAA,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;iBAC/B;qBAAM;oBACH,IAAI,CAAC,kBAAkB,EAAE,CAAC;iBAC7B;aACJ;AACL,SAAC,CAAA;AA8FS,QAAA,IAAA,CAAA,YAAY,GAAG,CAAC,CAAa,KAAI;YACvC,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;gBAC5C,IAAI,MAAM,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;gBAC3C,IAAI,cAAc,GAAG,MAAM,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC;AACxE,gBAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,GAAG,cAAc,EAAE,IAAI,CAAC,mBAAmB,GAAG,cAAc,CAAC,CAAC;aACtG;AACL,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,eAAe,GAAG,CAAC,CAAgB,KAAI;AAC7C,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAC1B,SAAC,CAAA;AACS,QAAA,IAAA,CAAA,aAAa,GAAG,CAAC,CAAgB,KAAI;YAC3C,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;AAE7C,gBAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;oBACpB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;oBACrC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;iBACzC;AAED,gBAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBAEzB,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,UAAW,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;gBAEzF,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;gBAChD,IAAI,WAAW,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,EACnC,oBAAoB,GAAG,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC;gBACxE,IAAI,qBAAqB,GAAG,oBAAoB,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC;;gBAG7F,IAAI,YAAY,GAAG,qBAAqB,GAAG,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC;gBACxE,IAAI,aAAa,GAAG,qBAAqB,GAAG,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC;;AAG1E,gBAAA,qBAAqB,GAAG,CAAC,oBAAoB,IAAI,aAAa,GAAG,YAAY,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;gBAElG,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,qBAAqB,EAAE,aAAa,GAAG,qBAAqB,CAAC,CAAC;AAE3F,gBAAA,IAAI,CAAC,mBAAmB,CAAC,WAAW,CAAC,CAAC;aACzC;AACL,SAAC,CAAA;;QA/UG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,2BAA2B,CAAC,CAAC;QAErE,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,UAAU,CAAC;AAEjD,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;AACvB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;AAC1B,QAAA,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;AAC1B,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QACzC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAE,CAAC;QAE3C,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACvD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;QACjD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QAChD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,CAAE,CAAC;AAEzD,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAErB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AACzB,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;AAE7B,QAAA,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;QAE3B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5D,IAAI,CAAC,eAAe,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;KACtE;IAES,iBAAiB,GAAA;QACvB,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED,IAAA,IAAW,WAAW,GAAA;QAClB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;IAED,IAAW,WAAW,CAAC,KAAa,EAAA;AAChC,QAAA,IAAI,KAAK,KAAK,IAAI,CAAC,YAAY,EAAE;AAC7B,YAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,MAAM,EAAE,CAAC;SACjB;KACJ;IAEM,MAAM,GAAA;QACT,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;IAEe,MAAM,GAAA;QAClB,KAAK,CAAC,MAAM,EAAE,CAAC;QAEf,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC;QAEvC,IAAI,CAAC,EAAG,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACnC,IAAI,CAAC,EAAG,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;AAE1C,QAAA,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,CAAC,IAA8B,KAAI;YACxE,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,CAAC,IAAI,EAAE,CAAC;AAChB,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,iBAAiB,EAAE,MAAK;AACzC,YAAA,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;;AAErC,YAAA,IAAI,CAAC,iBAAiB,GAAG,UAAU,CAAC,MAAK;gBACrC,IAAI,CAAC,YAAY,EAAE,CAAC;aACvB,EAAE,GAAG,CAAC,CAAC;AACZ,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,MAAK;AAC/B,YAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,YAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAC9B,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,8BAA8B,CAAC,CAAC;QAE5D,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAChE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAC5D,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAEjE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACpE,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC/D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC/D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAC3D,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;AAE9D,QAAA,OAAO,IAAI,CAAC;KACf;IAES,YAAY,GAAA;AAClB,QAAA,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACrC,IAAI,CAAC,QAAS,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;KACzC;IAES,YAAY,GAAA;QAClB,IAAI,CAAC,QAAS,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;KACzC;AAoGM,IAAA,mBAAmB,CAAC,CAAS,EAAA;QAChC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE1B,IAAI,eAAe,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;QAC7G,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACxC,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAEvC,QAAA,IAAI,cAAc,CAAC;AAEnB,QAAA,IAAI,eAAe,GAAG,CAAC,EAAE;YACrB,cAAc,GAAG,CAAC,CAAC;YACnB,eAAe,GAAG,CAAC,CAAC;YACpB,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;SAChG;aAAM,IAAI,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;AACnD,YAAA,cAAc,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;AACvC,YAAA,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;YAC3C,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;SAC9G;aAAM;AACH,YAAA,cAAc,GAAG,CAAC,CAAC,GAAG,YAAY,CAAC,UAAU,EAAE,eAAe,EAAE,CAAC,CAAS,EAAE,CAAa,KAAI;AACzF,gBAAA,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB,aAAC,CAAC,CAAC;SACN;;AAGD,QAAA,IAAI,GAAG,GAAG,UAAU,CAAC,cAAc,GAAG,CAAC,CAAC,EACpC,GAAG,GAAG,UAAU,CAAC,cAAc,CAAC,CAAC;QACrC,IAAI,CAAC,GAAG,CAAC,eAAe,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACvD,IAAI,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;AAG/C,QAAA,IAAI,aAAa,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAC3B,QAAA,IAAI,GAAG,GAAG,SAAS,CAAC,aAAa,CAAC,EAC9B,GAAG,GAAG,SAAS,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;QACvC,CAAC,GAAG,CAAC,eAAe,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACnD,IAAI,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAE9C,QAAA,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,QAAQ,IAAI,IAAI,CAAC,gBAAgB,CAAC;AAClE,QAAA,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,SAAS,IAAI,IAAI,CAAC,gBAAgB,CAAC;AAEpE,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,eAAe,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,aAAa,EAAE,cAAc,GAAG,CAAC,EAAE,QAAQ,GAAG,SAAS,CAAC,CAAC;AAExI,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC;;AAG3B,QAAA,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;AAClB,QAAA,GAAG,CAAC,WAAW,GAAG,oBAAoB,CAAC;QACvC,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;AACrC,QAAA,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;QACzE,GAAG,CAAC,MAAM,EAAE,CAAC;;QAGb,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;AAClE,QAAA,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;QAC1B,GAAG,CAAC,IAAI,EAAE,CAAC;AACX,QAAA,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;AAClB,QAAA,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;QAC5B,GAAG,CAAC,MAAM,EAAE,CAAC;;QAGb,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;AACjE,QAAA,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;QAC1B,GAAG,CAAC,IAAI,EAAE,CAAC;AACX,QAAA,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;AAClB,QAAA,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;QAC5B,GAAG,CAAC,MAAM,EAAE,CAAC;;AAGb,QAAA,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;AAClB,QAAA,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;QAC5B,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QAC3C,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;QAC1C,GAAG,CAAC,MAAM,EAAE,CAAC;;AAGb,QAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;QACxB,GAAG,CAAC,IAAI,GAAG,CAAA,EAAG,EAAE,GAAG,gBAAgB,UAAU,CAAC;AAC9C,QAAA,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;AAC5B,QAAA,GAAG,CAAC,SAAS,GAAG,MAAM,CAAC;AACvB,QAAA,GAAG,CAAC,QAAQ,CAAC,CAAG,EAAA,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,SAAS,CAAC,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,YAAY,EAAE,OAAO,GAAG,CAAC,MAAM,GAAG,OAAO,IAAI,GAAG,CAAC,CAAC;;AAGlI,QAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;QACxB,GAAG,CAAC,IAAI,GAAG,CAAA,EAAG,EAAE,GAAG,gBAAgB,UAAU,CAAC;AAC9C,QAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;AACxB,QAAA,IAAI,OAAO,GAAG,iBAAiB,CAAC,eAAe,CAAC,CAAC;AACjD,QAAA,GAAG,CAAC,QAAQ,CAAC,CAAG,EAAA,OAAO,CAAC,CAAC,CAAC,CAAI,CAAA,EAAA,OAAO,CAAC,CAAC,CAAC,CAAE,CAAA,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC;KACzH;AA4CD,IAAA,IAAW,WAAW,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;KACpE;AAED,IAAA,IAAW,YAAY,GAAA;AACnB,QAAA,OAAO,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;KACrE;IAES,OAAO,GAAA;AACb,QAAA,IAAI,IAAI,CAAC,EAAE,EAAE;AACT,YAAA,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;AAC7D,YAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;AAC/D,YAAA,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,CAAG,EAAA,IAAI,CAAC,EAAE,CAAC,WAAW,IAAI,CAAC;AACtD,YAAA,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,CAAG,EAAA,IAAI,CAAC,EAAE,CAAC,YAAY,IAAI,CAAC;AAExD,YAAA,IAAI,CAAC,cAAc,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;AACpE,YAAA,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;AACtE,YAAA,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,GAAG,CAAG,EAAA,IAAI,CAAC,EAAE,CAAC,WAAW,IAAI,CAAC;AAC7D,YAAA,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,GAAG,CAAG,EAAA,IAAI,CAAC,EAAE,CAAC,YAAY,IAAI,CAAC;AAE/D,YAAA,IAAI,IAAI,CAAC,YAAY,EAAE;gBACnB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;aAC7G;SACJ;KACJ;IAEM,kBAAkB,GAAA;AACrB,QAAA,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,eAAe,CAAC;QAC7C,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;KACjH;IAEM,WAAW,GAAA;QACd,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;AAC3F,QAAA,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;QAC7B,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AAEpC,QAAA,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QAC1B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;KACzG;IAEM,QAAQ,CAAC,YAAoB,EAAE,aAAqB,EAAA;AACvD,QAAA,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;AAClC,QAAA,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;AACpC,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;QAC1G,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;QACjD,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;IAEM,YAAY,GAAA;AACf,QAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACpB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SACtG;QACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KACvG;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;IAEM,IAAI,GAAA;QACP,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACzC,QAAA,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YAExB,IAAI,CAAC,YAAY,EAAE,CAAC;YAEpB,IAAI,CAAC,WAAW,EAAE,CAAC;YAEnB,IAAI,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAE1C,YAAA,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC;AAC3C,YAAA,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;AAChC,YAAA,IAAI,CAAC,wBAAwB,CAAC,YAAY,CAAC,CAAC;AAC5C,YAAA,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC;SAE/C;aAAM;YACH,IAAI,CAAC,WAAW,EAAE,CAAC;SACtB;KACJ;IAES,WAAW,CAAC,MAAmB,EAAE,YAA0B,EAAA;AACjE,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,GAAG,EAAE;AACL,YAAA,IAAI,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACnB,YAAA,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YACzB,IAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CACzD,CAAA,EAAE,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAA,CACtC,CAAC,IAAI,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,iBAAiB;;YAGjE,GAAG,CAAC,SAAS,EAAE,CAAC;AAChB,YAAA,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;AAC1B,YAAA,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClC,GAAG,CAAC,MAAM,EAAE,CAAC;;AAGb,YAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;YACxB,GAAG,CAAC,IAAI,GAAG,CAAA,EAAG,EAAE,GAAG,gBAAgB,UAAU,CAAC;AAC9C,YAAA,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;AAC5B,YAAA,GAAG,CAAC,SAAS,GAAG,MAAM,CAAC;AACvB,YAAA,GAAG,CAAC,QAAQ,CAAC,CAAG,EAAA,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAA,EAAA,CAAI,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;YAC3F,GAAG,CAAC,MAAM,EAAE,CAAC;AAEb,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC/C,gBAAA,IAAI,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACnB,gBAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC;AAC1D,gBAAA,EAAE,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC;AAC5C,gBAAK,CAAC,IAAI,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC;;gBAG7D,GAAG,CAAC,SAAS,EAAE,CAAC;AAChB,gBAAA,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;AAC1B,gBAAA,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAClC,GAAG,CAAC,MAAM,EAAE,CAAC;;AAGb,gBAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;AACxB,gBAAA,GAAG,CAAC,QAAQ,CAAC,CAAG,EAAA,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAA,EAAA,CAAI,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;gBAC3F,GAAG,CAAC,MAAM,EAAE,CAAC;aAChB;SACJ;KACJ;IAES,UAAU,CAAC,MAAmB,EAAE,YAA0B,EAAA;AAChE,QAAA,IAAI,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACnB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,GAAG,EAAE;AACL,YAAA,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;AAC7B,YAAA,GAAG,CAAC,SAAS,GAAG,UAAU,CAAC;AAC3B,YAAA,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC;YAC9B,GAAG,CAAC,SAAS,EAAE,CAAC;AAChB,YAAA,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC1G,IAAI,WAAW,GAAG,CAAC,CAAC;AACpB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC/C,gBAAA,IAAI,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACnB,gBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAC1G,IAAI,KAAK,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAC1B,gBAAA,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EACpB,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EACpB,EAAE,GAAG,CAAC,GAAG,CAAC,EACV,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;gBACf,WAAW,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;aACrC;YACD,GAAG,CAAC,MAAM,EAAE,CAAC;;AAGb,YAAA,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;AAClB,YAAA,GAAG,CAAC,WAAW,GAAG,uBAAuB,CAAC;YAC1C,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EACzD,EAAE,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAC3C,EAAE,GAAG,CAAC,IAAI,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC;AACjE,YAAA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAClB,YAAA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAElB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC/C,gBAAA,IAAI,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACnB,gBAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC;AAC1D,gBAAA,EAAE,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC;AAC5C,gBAAA,EAAE,GAAG,CAAC,IAAI,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC;AAC7D,gBAAA,GAAG,CAAC,WAAW,GAAG,uBAAuB,CAAC;AAC1C,gBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAClB,gBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;aACrB;YAED,GAAG,CAAC,MAAM,EAAE,CAAC;AAEb,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;SAC9D;KACJ;AAES,IAAA,YAAY,CAAC,MAAkB,EAAA;AACrC,QAAA,IAAI,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACnB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,GAAG,EAAE;AACL,YAAA,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;AAC7B,YAAA,GAAG,CAAC,SAAS,GAAG,UAAU,CAAC;AAC3B,YAAA,GAAG,CAAC,WAAW,GAAG,aAAa,CAAC;YAChC,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACvF,YAAA,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC1G,IAAI,YAAY,GAAG,CAAC,CAAC;AACrB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC/C,gBAAA,IAAI,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACnB,gBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAC1G,IAAI,KAAK,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAC1B,gBAAA,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EACpB,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EACpB,EAAE,GAAG,CAAC,GAAG,CAAC,EACV,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;gBACf,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;aACtC;AAED,YAAA,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAC9G,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,GAAG,CAAC,MAAM,EAAE,CAAC;YACb,GAAG,CAAC,IAAI,EAAE,CAAC;AACX,YAAA,GAAG,CAAC,SAAS,GAAG,kBAAkB,CAAC;AACnC,YAAA,GAAG,CAAC,WAAW,GAAG,aAAa,CAAC;YAChC,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,OAAO,EAAE,CAAC;AACd,YAAA,GAAG,CAAC,WAAW,GAAG,CAAC,CAAC;AAEpB,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;SAChE;KACJ;AAES,IAAA,wBAAwB,CAAC,MAAkB,EAAA;AACjD,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,GAAG,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;AAC1B,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;AAC3B,YAAA,GAAG,CAAC,SAAS,GAAG,UAAU,CAAC;YAC3B,GAAG,CAAC,SAAS,EAAE,CAAC;AAEhB,YAAA,IAAI,aAAa,GAAG,CAAC,EACjB,eAAe,GAAG,CAAC,CAAC;YAExB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAEnD,gBAAA,IAAI,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,EACf,GAAG,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAExB,gBAAA,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;AAEpC,oBAAA,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,EACnB,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,EACnB,EAAE,GAAG,CAAC,GAAG,CAAC,EACV,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;AAEf,oBAAA,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;wBACtB,GAAG,CAAC,MAAM,EAAE,CAAC;wBACb,GAAG,CAAC,SAAS,EAAE,CAAC;AAChB,wBAAA,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC,SAAS,CAAC,CAAC;wBACzC,eAAe,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;qBACzC;AAAM,yBAAA,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE;wBAC3B,GAAG,CAAC,MAAM,EAAE,CAAC;wBACb,GAAG,CAAC,SAAS,EAAE,CAAC;AAChB,wBAAA,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC,OAAO,CAAC,CAAC;wBACvC,aAAa,IAAI,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;qBACvC;AAED,oBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAC5G,oBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,CAAC;iBAC/G;aACJ;YACD,GAAG,CAAC,MAAM,EAAE,CAAC;AAEb,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;AAE/D,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;SACtE;KACJ;AACJ;;AC/oBD,IAAI,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACrF,IAAI,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AAEzF,MAAM,mBAAmB,GAAe;IACpC,aAAa,EAAE,IAAI,IAAI,EAAE;IACzB,WAAW,EAAE,IAAI,IAAI,EAAE;AACvB,IAAA,UAAU,EAAE,qBAAqB;AACjC,IAAA,QAAQ,EAAE,qBAAqB;AAC/B,IAAA,SAAS,EAAE,GAAG;CACjB,CAAA;AAED,MAAM,yBAAyB,GAAqB;AAChD,IAAA,GAAG,EAAE,4jGAA4jG;AACjkG,IAAA,KAAK,EAAE,gBAAgB;AACvB,IAAA,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;CACf,CAAA;AAED,MAAM,qBAAqB,GAAiB;AACxC,IAAA,IAAI,EAAE,EAAE;AACR,IAAA,IAAI,EAAE,OAAO;AACb,IAAA,IAAI,EAAE,IAAI;AACV,IAAA,KAAK,EAAE,uBAAuB;AAC9B,IAAA,YAAY,EAAE,kBAAkB;AAChC,IAAA,OAAO,EAAE,IAAI;AACb,IAAA,KAAK,EAAE,MAAM;IACb,MAAM,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;CACtB,CAAC;AAEF,MAAM,aAAa,GAAiB;AAChC,IAAA,IAAI,EAAE,OAAO;AACb,IAAA,IAAI,EAAE,EAAE;AACR,IAAA,IAAI,EAAE,IAAI;AACV,IAAA,KAAK,EAAE,uBAAuB;AAC9B,IAAA,YAAY,EAAE,kBAAkB;AAChC,IAAA,OAAO,EAAE,IAAI;AACb,IAAA,KAAK,EAAE,OAAO;IACd,MAAM,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;CACvB,CAAC;AAEF,MAAM,sBAAsB,GAAG;AAC3B,IAAA,SAAS,EAAE,IAAI;AACf,IAAA,GAAG,EAAE,gBAAgB;AACrB,IAAA,KAAK,EAAE,cAAc;AACrB,IAAA,QAAQ,EAAE,WAAW;CACxB,CAAC;AAEF,MAAM,oBAAoB,GAAG;AACzB,IAAA,SAAS,EAAE,IAAI;AACf,IAAA,GAAG,EAAE,cAAc;AACnB,IAAA,KAAK,EAAE,gBAAgB;AACvB,IAAA,QAAQ,EAAE,SAAS;CACtB,CAAC;AAEF,MAAM,qBAAsB,SAAQ,UAAU,CAAA;AAyB1C,IAAA,WAAA,CAAY,UAAwC,EAAE,EAAA;QAClD,KAAK,CAAC,uBAAuB,CAAC,CAAC;AAkYzB,QAAA,IAAA,CAAA,SAAS,GAAG,CAAC,CAAc,KAAI;AACrC,YAAA,IAAI,SAAS,GAAG,IAAI,CAAC,OAAQ,CAAC,4BAA4B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YAClE,IAAI,SAAS,EAAE;AACX,gBAAA,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;aACzC;AACL,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,YAAY,GAAG,CAAC,CAAc,KAAI;YACxB,IAAI,CAAC,OAAQ,CAAC,4BAA4B,GAAG;AAC7D,YAAA,IAAI,IAAI,CAAC,mBAAmB,EAAE;AAC1B,gBAAA,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,EAC/C,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpC,IAAI,UAAU,GAAG,IAAI,CAAC,OAAQ,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC;gBAC/D,IAAI,UAAU,EAAE;AACZ,oBAAA,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,mBAAoB,CAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;iBAC1F;aACJ;AAAM,iBAAA,IAAI,IAAI,CAAC,iBAAiB,EAAE;AAE/B,gBAAA,IAAI,GAAG,GAAG,IAAI,CAAC,OAAQ,CAAC,MAAM,CAAC;AAC/B,gBAAA,IAAI,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;AACvE,gBAAA,IAAI,YAAY,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;gBAClE,IAAI,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;gBAC9B,IAAI,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;AAChC,gBAAA,IAAI,EAAE,GAAG,IAAI,IAAI,EAAE,CAAC;gBAEpB,IAAI,IAAI+C,KAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,KAAKA,KAAG,CAAC,MAAM,EAAE;oBACvE,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AACjC,oBAAA,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;oBAC1B,IAAI,OAAO,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACxE,oBAAA,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;iBAClF;aACJ;AACL,SAAC,CAAA;AA4DS,QAAA,IAAA,CAAA,MAAM,GAAG,CAAC,CAAc,KAAI;AAEtC,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,qBAAqB,GAAG,CAAC,CAAc,KAAI;AACjD,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;AACxD,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,qBAAqB,GAAG,CAAC,CAAc,KAAI;AACjD,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;AACxD,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,qBAAqB,GAAG,CAAC,CAAc,KAAI;AACjD,YAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAe,CAAC,UAAU,EAAE,CAAC;AACrD,YAAA,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,aAAa,CAAC;YAC3C,MAAM,MAAM,GAAG,IAAI,CAAC,mBAAoB,CAAC,YAAY,EAAE,CAAC;AACxD,YAAA,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,OAAQ,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;AACvE,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,CAAc,KAAI;AAC/C,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;AACnD,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AACpC,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,CAAc,KAAI;AAC/C,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;AACxD,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,CAAc,KAAI;AAC/C,YAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;AACxD,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,mBAAmB,GAAG,CAAC,CAAc,KAAI;YAC/C,IAAI,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAe,CAAC,UAAU,EAAE,CAAC;AACrD,YAAA,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,aAAa,CAAC;AAC7C,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,iBAAiB,GAAG,CAAC,CAAc,KAAI;YAC7C,IAAI,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;AACnD,YAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAClC,SAAC,CAAA;AAvgBG,QAAA,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,4BAA4B,CAAC,CAAC;QAEzD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC;AAEtC,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC;AACjC,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,IAAI,EAAE,CAAC;AAClC,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC,OAAO,EAAE;AACnC,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,cAAc,EAAE,KAAK;YACrB,kBAAkB,EAAE,CAAC,GAAG;AACxB,YAAA,gBAAgB,EAAE,IAAI;AACtB,YAAA,mBAAmB,EAAE,IAAI;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,MAAM,CAAC,iBAAiB,EAAE;AACtD,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,cAAc,EAAE,IAAI;AACpB,YAAA,mBAAmB,EAAE,IAAI;AACzB,YAAA,eAAe,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;AAChC,YAAA,YAAY,EAAE,GAAG;AACpB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,MAAM,CAAC,eAAe,EAAE;AAClD,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,cAAc,EAAE,IAAI;AACpB,YAAA,mBAAmB,EAAE,IAAI;AACzB,YAAA,eAAe,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC;AACjC,YAAA,YAAY,EAAE,CAAC;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,MAAM,CAAC,iBAAiB,EAAE;AACtD,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,cAAc,EAAE,KAAK;AACrB,YAAA,mBAAmB,EAAE,IAAI;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,CAAC;AAC3B,YAAA,QAAQ,EAAE;AACN,gBAAA,MAAM,EAAE,EAAE;AACV,gBAAA,SAAS,EAAE,GAAG;AACd,gBAAA,KAAK,EAAE,mBAAmB;AAC1B,gBAAA,QAAQ,EAAE,KAAK;AAClB,aAAA;AACJ,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC,iBAAiB,EAAE;AAC7C,YAAA,QAAQ,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC;AAC7B,YAAA,cAAc,EAAE,KAAK;AACrB,YAAA,mBAAmB,EAAE,IAAI;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM,CAAC,gBAAgB,EAAE;AAC9C,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,cAAc,EAAE,KAAK;AACrB,YAAA,mBAAmB,EAAE,IAAI;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,MAAM,CAAC;YACjC,SAAS,EAAE,IAAI,IAAI,EAAE;AACrB,YAAA,SAAS,EAAE,yBAAyB;AACvC,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,MAAM,CAAC;YAClC,SAAS,EAAE,IAAI,IAAI,EAAE;AACrB,YAAA,KAAK,EAAE,qBAAqB;AAC/B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,MAAM,CAAC;YAChC,SAAS,EAAE,IAAI,IAAI,EAAE;AACrB,YAAA,GAAG,EAAE,mBAAmB;AAC3B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE;AACvC,YAAA,QAAQ,EAAE,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,iBAAiB,CAAC;AACrF,YAAA,cAAc,EAAE,KAAK;AACrB,YAAA,mBAAmB,EAAE,IAAI;AAC5B,SAAA,CAAC,CAAC;KACN;IAEM,SAAS,GAAA;QACZ,IAAI,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC;QACrD,IAAI,MAAM,GAAG,GAAG,EAAE,MAAM,GAAG,GAAG,EAAE,MAAM,GAAG,CAAC,GAAG,EAAE,MAAM,GAAG,CAAC,GAAG,EAAE,SAAS,GAAG,CAAC,OAAO,CAAC;AACnF,QAAA,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AACrB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACtC,IAAI,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;AACjC,gBAAA,IAAI,EAAE,CAAC,GAAG,GAAG,MAAM;AAAE,oBAAA,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC;AACrC,gBAAA,IAAI,EAAE,CAAC,GAAG,GAAG,MAAM;AAAE,oBAAA,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC;AACrC,gBAAA,IAAI,EAAE,CAAC,GAAG,GAAG,MAAM;AAAE,oBAAA,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC;AACrC,gBAAA,IAAI,EAAE,CAAC,GAAG,GAAG,MAAM;AAAE,oBAAA,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC;AACrC,gBAAA,IAAI,EAAE,CAAC,MAAM,GAAG,SAAS;AAAE,oBAAA,SAAS,GAAG,EAAE,CAAC,MAAM,CAAC;aACpD;AAED,YAAA,IAAI,CAAC,OAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;SAC1H;KACJ;AAED,IAAA,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAES,IAAA,oBAAoB,CAAC,UAAgB,EAAE,QAAA,GAAmB,EAAE,EAAA;QAOlE,IAAI,aAAa,GAAG,IAAI,CAAC,SAAU,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;AACnE,QAAA,IAAI,QAAQ,GAAG,UAAU,CAAC,GAAG,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;AAE7D,QAAA,IAAI,YAAY,GAAG,IAAI,MAAM,CAAC;AAC1B,YAAA,GAAG,EAAE;AACD,gBAAA,aAAa,EAAE,UAAU;AACzB,gBAAA,WAAW,EAAE,QAAQ;AACrB,gBAAA,UAAU,EAAE,uBAAuB;AACnC,gBAAA,QAAQ,EAAE,uBAAuB;AACjC,gBAAA,SAAS,EAAE,GAAG;AACjB,aAAA;AACJ,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,YAAY,GAAG,IAAI,MAAM,CAAC;AAC1B,YAAA,SAAS,EAAE,UAAU;AACrB,YAAA,SAAS,EAAE,sBAAsB;AACpC,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,UAAU,GAAG,IAAI,MAAM,CAAC;AACxB,YAAA,SAAS,EAAE,QAAQ;AACnB,YAAA,SAAS,EAAE,oBAAoB;AAC/B,YAAA,UAAU,EAAE,EAAE;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,iBAAiB,GAAG,IAAI,MAAM,CAAC;AAC/B,YAAA,SAAS,EAAE,QAAQ;AACnB,YAAA,KAAK,EAAE,aAAa;AACvB,SAAA,CAAC,CAAC;AAEH,QAAA,iBAAiB,CAAC,WAAW,CAAC,IAAI,MAAM,CAAC;AACjC,YAAA,SAAS,EAAE,QAAQ;AACnB,YAAA,KAAK,EAAE,EAAC,GAAG,aAAa,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAC;AAClD,SAAA,CAAC,CACL,CAAC;QAEF,MAAM,KAAK,GAAG,IAAI,CAAC,oBAAoB,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC;AAE7D,QAAA,YAAY,CAAC,UAAU;AACnB,YAAA,YAAY,CAAC,UAAU;gBACnB,UAAU,CAAC,UAAU,GAAG;oBACpB,KAAK;AACL,oBAAA,QAAQ,EAAE,QAAQ;oBAClB,SAAS,EAAE,IAAI,MAAM,EAAE;oBACvB,UAAU;oBACV,YAAY;oBACZ,YAAY;oBACZ,iBAAiB;iBACpB,CAAC;QAEV,OAAO,EAAC,UAAU,EAAE,YAAY,EAAE,YAAY,EAAE,iBAAiB,EAAC,CAAC;KACtE;IAEM,qBAAqB,CAAC,CAAO,EAAE,MAAc,EAAA;AAChD,QAAA,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;AAC3C,QAAA,IAAI,CAAC,mBAAmB,CAAC,KAAM,CAAC,OAAO,CAAC,CAAG,EAAA,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAA,EAAA,CAAI,CAAC,CAAC;QAE9E,IAAI,CAAC,iBAAiB,CAAC,GAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;AAChD,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;QACtD,IAAI,CAAC,iBAAiB,CAAC,GAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAExE,QAAA,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;KAC7C;AAEM,IAAA,UAAU,CAAC,MAAc,EAAA;AAC5B,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;KACzB;IAEe,IAAI,GAAA;QAChB,IAAI,CAAC,SAAS,EAAE,CAAC;KACpB;IAEe,QAAQ,GAAA;QACpB,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;IAEM,SAAS,GAAA;QAEZ,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACzC,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAClD,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAClD,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAChD,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AAE3C,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AACzD,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AAE7C,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AAC9E,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AAC9E,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AACzE,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAErE,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAC1E,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAC1E,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACrE,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;AAEjE,QAAA,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;KACpC;AAEM,IAAA,cAAc,CAAC,KAAa,EAAA;QAC/B,IAAI,MAAM,GAAG,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC;QAC1D,IAAI,MAAM,EAAE;AACR,YAAA,OAAO,MAAM,CAAC,SAAS,EAAE,CAAC;SAC7B;KACJ;IAEM,eAAe,GAAA;QAClB,IAAI,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC;QACrD,IAAI,MAAM,GAAa,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AAClD,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC/C,YAAA,IAAI,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,SAAS,EAAE,CAAC;SAC9B;AACD,QAAA,OAAO,MAAM,CAAC;KACjB;AAEM,IAAA,YAAY,CAAC,MAAc,EAAA;AAC9B,QAAA,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,OAAQ,CAAC,KAAK,EAAE;AAC7C,YAAA,OAAO,IAAI,CAAC,OAAQ,CAAC,OAAQ,CAAC,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;SAC/D;AACD,QAAA,OAAO,CAAC,CAAC;KACZ;AAEM,IAAA,iBAAiB,CAAC,MAAc,EAAA;QACnC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAI;AACnC,YAAA,IAAI,CAAC,OAAQ,CAAC,OAAQ,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,IAAY,KAAI;AAC3D,gBAAA,IAAI,IAAI,CAAC,OAAO,EAAE;oBACd,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;AACrC,oBAAA,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;iBACxB;qBAAM;AACH,oBAAA,MAAM,EAAE,CAAC;iBACZ;AACL,aAAC,CAAC,CAAC;AACP,SAAC,CAAC,CAAC;KACN;AAEM,IAAA,wBAAwB,CAAC,SAAmB,EAAE,eAAA,GAA2B,KAAK,EAAA;AAEjF,QAAA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACf,YAAA,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;SAC5C;AAED,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;QAEjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACtD,IAAI,EAAE,GAAG,GAAG,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EACxC,EAAE,GAAG,GAAG,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjD,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE;AAC1B,gBAAA,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC;aAC5D;SACJ;QAED,IAAI,GAAG,GAAG,IAAI,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AAEtC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAClD,YAAA,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SACzD;QAED,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAK;YACvB,IAAI,CAAC,eAAe,EAAE;AAClB,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;aAClD;AACL,SAAC,CAAC,CAAC;AAEH,QAAA,OAAO,GAAG,CAAC;KACd;AAEM,IAAA,mBAAmB,CAAC,MAAc,EAAE,eAAA,GAA2B,KAAK,EAAA;AAEvE,QAAA,IAAI,OAAO,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;AAChE,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;AAE5D,QAAA,IAAI,SAAS,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;AACnD,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;AAElE,QAAA,IAAI,EAAC,UAAU,EAAE,YAAY,EAAE,YAAY,EAAE,iBAAiB,EAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;AAEpG,QAAA,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAC5C,QAAA,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAC5C,QAAA,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AACxC,QAAA,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,YAAY,CAAC,QAAS,CAAC,aAAa,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,CAAC;QAErE,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;QACtD,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;QACtD,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;AAE5D,QAAA,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,KAAI;YAC3B,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,IAAY,KAAI;gBAEjD,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;AAEhD,gBAAA,IAAI,QAAQ,GAAG,EAAE,EACb,SAAe,CAAC;AAEpB,gBAAA,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;AACrB,oBAAA,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;AACzC,oBAAA,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;iBAChD;qBAAM;AACH,oBAAA,QAAQ,GAAG,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;AAChC,oBAAA,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;iBAChD;AAED,gBAAA,YAAY,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;AACvC,gBAAA,iBAAiB,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;AAC1C,gBAAA,iBAAiB,CAAC,KAAM,CAAC,OAAO,CAAC,CAAG,EAAA,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,CAAI,CAAC,CAAC;AACzD,gBAAA,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAM,CAAC,OAAO,CAAC,CAAG,EAAA,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,CAAI,CAAC,CAAC;AAC9E,gBAAA,UAAU,CAAC,UAAU,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC1C,gBAAA,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;gBACnC,UAAU,CAAC,UAAU,CAAC,YAAY,CAAC,GAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;gBACtE,UAAU,CAAC,UAAU,CAAC,YAAY,CAAC,GAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;AAClE,gBAAA,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,UAAU,CAAC,OAAO,EAAE,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;gBAE7E,IAAI,CAAC,eAAe,EAAE;AAClB,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;AAC7D,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;iBAClD;gBAED,OAAO,CAAC,UAAU,CAAC,CAAC;AACxB,aAAC,CAAC,CAAC;AACP,SAAC,CAAC,CAAC;KACN;AAEM,IAAA,yBAAyB,CAAC,MAAc,EAAE,WAAmB,EAAE,EAAE,kBAA2B,KAAK,EAAA;AACpG,QAAA,IAAI,SAAS,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAE,CAAC;AACnE,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,eAAe,CAAC,CAAC;KACvE;AAEM,IAAA,qBAAqB,CAAC,SAAe,EAAE,WAAmB,EAAE,EAAE,kBAA2B,KAAK,EAAA;AACjG,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,SAAS,CAAE,CAAC;AACnE,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,eAAe,CAAC,CAAC;KACvE;IAES,SAAS,CAAC,SAAe,EAAE,MAAc,EAAE,QAAgB,EAAE,kBAA2B,KAAK,EAAA;QACnG,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAI;AACnC,YAAA,IAAI,EACA,UAAU,EACV,YAAY,EACZ,YAAY,EACZ,iBAAiB,EACpB,GAAG,IAAI,CAAC,oBAAoB,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;AACnD,YAAA,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAC5C,YAAA,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAC5C,YAAA,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AACxC,YAAA,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;AAC1C,YAAA,IAAI,CAAC,YAAY,CAAC,QAAS,CAAC,aAAa,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,CAAC;YAErE,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;YACnD,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;YACnD,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;YAEzD,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,IAAY,KAAI;AACjD,gBAAA,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;AAChE,gBAAA,IAAI,SAAS,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;AAClE,gBAAA,IAAI,YAAY,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;AACzE,gBAAA,IAAI,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC1D,gBAAA,iBAAiB,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;AAC1C,gBAAA,iBAAiB,CAAC,KAAM,CAAC,OAAO,CAAC,CAAG,EAAA,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,CAAI,CAAC,CAAC;AACzD,gBAAA,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAM,CAAC,OAAO,CAAC,CAAG,EAAA,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,CAAI,CAAC,CAAC;AAC9E,gBAAA,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;gBACnC,UAAU,CAAC,UAAU,CAAC,YAAY,CAAC,GAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;AAClE,gBAAA,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,UAAU,CAAC,OAAO,EAAE,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;gBAC7E,IAAI,CAAC,eAAe,EAAE;AAClB,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;AAC7D,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;iBAClD;gBACD,OAAO,CAAC,UAAU,CAAC,CAAC;AACxB,aAAC,CAAC,CAAC;AACP,SAAC,CAAC,CAAC;KACN;IAoCM,uBAAuB,CAAC,WAAmB,EAAE,OAAa,EAAA;QAE7D,MAAM,UAAU,GAAG,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,CAAC;QAEtE,IAAI,UAAU,EAAE;AACZ,YAAA,IAAI,SAAS,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,UAAU,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC3F,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,EAAE,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC;AAErD,YAAA,IAAI,QAAQ,IAAI,CAAC,EAAE;gBACf,OAAO,GAAG,SAAS,CAAC;gBACpB,QAAQ,GAAG,CAAC,CAAC;aAChB;AAED,YAAA,UAAU,CAAC,UAAU,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC1C,YAAA,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACnC,UAAU,CAAC,UAAU,CAAC,YAAY,CAAC,GAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;YAClE,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YAChE,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAM,CAAC,OAAO,CAAC,CAAG,EAAA,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAI,EAAA,CAAA,CAAC,CAAC;YAEpG,IAAI,CAAC,YAAY,CAAC,QAAS,CAAC,UAAU,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;AAE7D,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;SACpE;KACJ;IAEM,yBAAyB,CAAC,WAAmB,EAAE,SAAe,EAAA;QAEjE,IAAI,YAAY,GAAG,IAAI,CAAC,oBAAoB,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,CAAC;QAExE,IAAI,YAAY,EAAE;AAEd,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;YAElE,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;YACnD,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;YACnD,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;AAEzD,YAAA,IAAI,YAAY,GAAG,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;AACzE,YAAA,IAAI,UAAU,GAAG,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC;AACpD,YAAA,IAAI,iBAAiB,GAAG,YAAY,CAAC,UAAU,CAAC,iBAAiB,CAAC;AAClE,YAAA,IAAI,QAAQ,GAAG,YAAY,CAAC,UAAU,CAAC,QAAQ,CAAC;AAEhD,YAAA,YAAY,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;AAEvC,YAAA,IAAI,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC1D,YAAA,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACnC,UAAU,CAAC,UAAU,CAAC,YAAY,CAAC,GAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;YACtE,UAAU,CAAC,UAAU,CAAC,YAAY,CAAC,GAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;AAClE,YAAA,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,UAAU,CAAC,OAAO,EAAE,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;AAE7E,YAAA,iBAAiB,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;AAC1C,YAAA,iBAAiB,CAAC,KAAM,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,CAAI,CAAC,CAAC;AAClE,YAAA,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAM,CAAC,OAAO,CAAC,CAAG,EAAA,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,CAAI,CAAC,CAAC;AAE9E,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;SAChF;KACJ;IA+CS,WAAW,GAAA;AAEjB,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AACvD,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AAC1D,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AAE9C,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AAC/E,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AAC/E,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AAC1E,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAEtE,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAC3E,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAC3E,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACtE,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;AAElE,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE,CAAC;AACnC,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC;AACjC,QAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE,CAAC;AACnC,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;AAC5B,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;QAE5B,IAAI,CAAC,KAAK,EAAE,CAAC;KAChB;AAEM,IAAA,oBAAoB,CAAC,UAAmB,EAAA;AAC3C,QAAA,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;KAChD;AAEM,IAAA,aAAa,CAAC,UAAmB,EAAA;AACpC,QAAA,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AACpD,QAAA,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAC3C,QAAA,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AACpD,QAAA,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAClD,QAAA,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAC3C,QAAA,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAC7C,QAAA,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;KAChD;IAGM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;AACxC,QAAA,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACnC,IAAI,CAAC,YAAY,CAAC,QAAS,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;KAC7C;IAEe,KAAK,GAAA;AACjB,QAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,YAAA,IAAI,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;AAC7B,YAAA,MAAM,KAAK,GAAG,IAAI,CAAC,OAAQ,CAAC,cAAc,CAAC;YAC3C,MAAM,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,WAAW,EAAE,CAAC;AACzD,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACtC,gBAAA,IAAI,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;AACrB,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnC,oBAAA,IAAI,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBAClB,IAAI,EAAE,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE;wBAC/B,EAAE,CAAC,OAAO,CAAC,qBAAqB,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;AAClD,wBAAA,EAAE,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;wBAC/B,EAAE,CAAC,UAAU,CAAC,YAAY,CAAC,GAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;wBAChE,MAAM;qBACT;iBACJ;aACJ;SACJ;KACJ;AAED,IAAA,IAAW,SAAS,GAAA;AAChB,QAAA,OAAO,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;KACvD;AACJ,CAAA;AAMD,MAAM,4BAA4B,GAAoC;AAClE,IAAA,QAAQ,EAAE,UAAU;CACvB;;AC1rBD,MAAM/C,UAAQ,GAAG,iDAAiD,CAAC;AAEnE,MAAM,cAAc,GAAG,CAAA;;;;;OAKhB,CAAC;AAER,MAAM,aAAa,GAAG,CAAA,0cAAA,CAA4c,CAAC;AAEne,MAAM,iBAAiB,GAAG,CAAA;;;;;;OAMnB,CAAC;AAOR,MAAM,kCAAkC,GAA0C,CAAC,OAAO,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;AAE1G,MAAO,2BAA4B,SAAQ,IAAsB,CAAA;AAKnE,IAAA,WAAA,CAAY,SAA6C,EAAE,EAAA;AACvD,QAAA,KAAK,CAAC;AACF,YAAA,GAAG,MAAM;AACT,YAAA,QAAQ,EAAEA,UAAQ;AACrB,SAAA,CAAC,CAAC;;QAGH,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,kCAAkC,CAAC,CAAC;AAE5E,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC;YACjC,SAAS,EAAE,CAAC,4BAA4B,CAAC;AACzC,YAAA,IAAI,EAAE,aAAa;AACnB,YAAA,KAAK,EAAE,YAAY;AACtB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;AACxD,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACrD,SAAC,CAAC,CAAC;KACN;AAEe,IAAA,MAAM,CAAC,MAAW,EAAA;AAC9B,QAAA,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAErB,QAAA,IAAI,QAAQ,GAAG,IAAI,MAAM,CAAC;YACtB,SAAS,EAAE,CAAC,4BAA4B,CAAC;AACzC,YAAA,IAAI,EAAE,cAAc;AACpB,YAAA,KAAK,EAAE,OAAO;AACjB,SAAA,CAAC,CAAC;AACH,QAAA,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC;QAE5B,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,MAAK;AAC7B,YAAA,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AACnB,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAClD,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC;AAErC,QAAA,IAAI,WAAW,GAAG,IAAI,MAAM,CAAC;AACzB,YAAA,SAAS,EAAE,CAAC,4BAA4B,EAAE,sCAAsC,CAAC;AACjF,YAAA,IAAI,EAAE,iBAAiB;AACvB,YAAA,KAAK,EAAE,aAAa;AACvB,SAAA,CAAC,CAAC;AACH,QAAA,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC;QAE/B,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,MAAK;AAChC,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACrD,SAAC,CAAC,CAAC;AAEH,QAAA,OAAO,IAAI,CAAC;KACf;AACJ;;AClFD,MAAM,aAAa,GACf,CAAA;;;WAGO,CAAC;AAMZ,MAAM,eAAgB,SAAQ,MAA6B,CAAA;AAIvD,IAAA,WAAA,CAAY,MAAwB,EAAA;AAChC,QAAA,KAAK,CAAC;AACF,YAAA,KAAK,EAAE,aAAa;AACpB,YAAA,OAAO,EAAE,KAAK;AACd,YAAA,SAAS,EAAE,IAAI;AACf,YAAA,OAAO,EAAE,IAAI;AACb,YAAA,GAAG,EAAE,GAAG;AACR,YAAA,IAAI,EAAE,GAAG;AACT,YAAA,KAAK,EAAE,GAAG;AACV,YAAA,MAAM,EAAE,GAAG;AACX,YAAA,SAAS,EAAE,GAAG;AACd,YAAA,QAAQ,EAAE,GAAG;AACb,YAAA,GAAG,MAAM;AACZ,SAAA,CAAC,CAAC;QA0BG,IAAa,CAAA,aAAA,GAAG,MAAK;AAC3B,YAAA,IAAI;AACA,gBAAA,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AACnB,gBAAA,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAU,CAAC,KAAK,CAAC,CAAC;gBAClD,IAAI,SAAS,GAAa,IAAI,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AACtD,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACvC,oBAAA,IAAI,EAAE,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;oBACtB,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;iBAClD;AACD,gBAAA,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;aAClD;YAAC,OAAO,GAAG,EAAE;AACV,gBAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;aACtB;AACL,SAAC,CAAA;AArCG,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;KACzB;AAEe,IAAA,MAAM,CAAC,MAAY,EAAA;AAC/B,QAAA,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAErB,QAAA,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC;AAChB,YAAA,QAAQ,EAAE,aAAa;AAC1B,SAAA,CAAC,CAAA;AACF,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC;AAE/B,QAAA,IAAI,QAAQ,GAAG,IAAI,MAAM,CAAC;YACtB,SAAS,EAAE,CAAC,gCAAgC,CAAC;AAC7C,YAAA,IAAI,EAAE,OAAO;AAChB,SAAA,CAAC,CAAC;QACH,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,mCAAmC,CAAE,CAAC,CAAC;QAErE,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAEhD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;AAEzC,QAAA,OAAO,IAAI,CAAC;KACf;AAgBJ;;ACrED,MAAMA,UAAQ,GACV,CAAA;;;;;;;;;;;;;;;;;;;;;aAqBS,CAAC;AAMR,MAAO,sBAAuB,SAAQ,IAAU,CAAA;AAYlD,IAAA,WAAA,CAAY,SAAwC,EAAE,EAAA;AAClD,QAAA,KAAK,CAAC;AACF,YAAA,GAAG,MAAM;AACT,YAAA,QAAQ,EAAEA,UAAQ;AACrB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAE5B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;KAC/B;AAEe,IAAA,MAAM,CAAC,MAAW,EAAA;AAC9B,QAAA,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAErB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,+DAA+D,CAAC,CAAC;QAChG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,gEAAgE,CAAC,CAAC;QAClG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,iEAAiE,CAAC,CAAC;QACpG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,mEAAmE,CAAC,CAAC;QAExG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,+DAA+D,CAAC,CAAC;QAChG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,gEAAgE,CAAC,CAAC;QAClG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,iEAAiE,CAAC,CAAC;QACpG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,mEAAmE,CAAC,CAAC;AAExG,QAAA,OAAO,IAAI,CAAC;KACf;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;AACvD,QAAA,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;AACvD,QAAA,IAAI,CAAC,YAAY,KAAK,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;AACzD,QAAA,IAAI,CAAC,YAAY,KAAK,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;AACzD,QAAA,IAAI,CAAC,aAAa,KAAK,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,aAAa,KAAK,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,eAAe,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;AAC/D,QAAA,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,eAAe,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;KAClE;AAEM,IAAA,cAAc,CAAC,WAAmB,EAAA;AACrC,QAAA,IAAI,IAAI,GAAG,iBAAiB,CAAC,WAAW,CAAC,CAAC;QAC1C,IAAI,CAAC,WAAY,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QACtC,IAAI,CAAC,WAAY,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;KACzC;AAEM,IAAA,eAAe,CAAC,YAAoB,EAAA;AACvC,QAAA,IAAI,IAAI,GAAG,iBAAiB,CAAC,YAAY,CAAC,CAAC;QAC3C,IAAI,CAAC,YAAa,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QACvC,IAAI,CAAC,YAAa,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;KAC1C;AAEM,IAAA,gBAAgB,CAAC,aAAqB,EAAA;AACzC,QAAA,IAAI,WAAW,GAAG,iBAAiB,CAAC,aAAa,CAAC,CAAC;QACnD,IAAI,CAAC,aAAc,CAAC,SAAS,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,aAAc,CAAC,SAAS,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;KAClD;AAEM,IAAA,kBAAkB,CAAC,eAAuB,EAAA;AAC7C,QAAA,IAAI,aAAa,GAAG,iBAAiB,CAAC,eAAe,CAAC,CAAC;QACvD,IAAI,CAAC,eAAgB,CAAC,SAAS,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,eAAgB,CAAC,SAAS,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;KACtD;AACJ;;AClGD,MAAMA,UAAQ,GACV,CAAA;;;WAGO,CAAC;AAKZ,MAAMC,iBAAe,GAAG,CAAA,wVAAA,CAA0V,CAAC;AAE7W,MAAO,uBAAwB,SAAQ,OAAO,CAAA;AAahD,IAAA,WAAA,CAAY,UAAwC,EAAE,EAAA;AAClD,QAAA,KAAK,CAAC;AACF,YAAA,IAAI,EAAE,yBAAyB;AAC/B,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;QA+GG,IAAc,CAAA,cAAA,GAAG,MAAK;YAC5B,IAAI,CAAC,wBAAwB,EAAE,CAAC;AACpC,SAAC,CAAA;AAgBS,QAAA,IAAA,CAAA,0BAA0B,GAAG,CAAC,eAAuB,EAAE,GAAc,EAAE,GAAc,EAAE,GAAe,EAAE,GAAe,EAAE,aAAqB,EAAE,cAAsB,EAAE,SAAiB,KAAI;YAEnM,IAAI,OAAO,GAAG,IAAI,CAAC,sBAAsB,CAAC,cAAc,CAAC,aAAa,CAAE,CAAC;AACzE,YAAA,IAAI,OAAO,GAAG,IAAI,CAAC,sBAAsB,CAAC,cAAc,CAAC,aAAa,GAAG,CAAC,CAAE,CAAC;YAE7E,IAAI,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,OAAO,CAAC,EACzD,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;YAE9D,IAAI,CAAC,GAAG,CAAC,eAAe,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAEvD,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAE3B,YAAA,IAAI,CAAC,sBAAsB,CAAC,qBAAqB,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;AAC1F,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,2BAA2B,GAAG,CAAC,eAAuB,EAAE,GAAc,EAAE,GAAc,EAAE,GAAe,EAAE,GAAe,EAAE,aAAqB,EAAE,cAAsB,EAAE,SAAiB,KAAI;YACpM,IAAI,OAAO,GAAG,IAAI,CAAC,sBAAsB,CAAC,cAAc,CAAC,aAAa,CAAE,CAAC;AACzE,YAAA,IAAI,OAAO,GAAG,IAAI,CAAC,sBAAsB,CAAC,cAAc,CAAC,aAAa,GAAG,CAAC,CAAE,CAAC;YAE7E,IAAI,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,OAAO,CAAC,EACzD,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;YAE9D,IAAI,CAAC,GAAG,CAAC,eAAe,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAEvD,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAE3B,YAAA,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAElC,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;AAChF,SAAC,CAAA;QAES,IAA6B,CAAA,6BAAA,GAAG,MAAK;YAC3C,IAAI,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,WAAW,EAAE;AAC9C,gBAAA,IAAI,CAAC,sBAAsB,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;aAC1D;AACL,SAAC,CAAA;QAES,IAA6B,CAAA,6BAAA,GAAG,MAAK;AAE/C,SAAC,CAAA;AAtKG,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,qBAAqB,EAAE,CAAC;AAC1D,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,oBAAoB,EAAE,CAAC;AACxD,QAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,sBAAsB,EAAE,CAAC;AAC5D,QAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,2BAA2B,CAAC;AAChE,YAAA,KAAK,EAAE,IAAI,CAAC,qBAAqB,CAAC,KAAK;AAC1C,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,0BAA0B,CAAC,CAAC;AACjF,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,2BAA2B,CAAC,CAAC;AACnF,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,6BAA6B,CAAC,CAAC;AACvF,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,6BAA6B,CAAC,CAAC;AAGvF,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CAAC;AACtB,YAAA,KAAK,EAAE,mBAAmB;AAC1B,YAAA,OAAO,EAAE,KAAK;AACd,YAAA,SAAS,EAAE,IAAI;AACf,YAAA,OAAO,EAAE,IAAI;AACb,YAAA,GAAG,EAAE,GAAG;AACR,YAAA,IAAI,EAAE,EAAE;AACR,YAAA,KAAK,EAAE,GAAG;AACV,YAAA,MAAM,EAAE,GAAG;AACX,YAAA,SAAS,EAAE,GAAG;AACd,YAAA,QAAQ,EAAE,GAAG;AAChB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,IAAI,CAAC;AACvB,YAAA,QAAQ,EAAED,UAAQ;AACrB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,eAAe,CAAC;YACtC,KAAK,EAAE,IAAI,CAAC,sBAAsB;AACrC,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC;AAC/B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,4BAA4B,CAAC;AAC1D,YAAA,IAAI,EAAEC,iBAAe;AACxB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,wBAAwB,GAAG,QAAQ,CAAC,MAAK;YAC1C,IAAI,MAAM,GAAG,IAAI,CAAC,sBAAsB,CAAC,eAAe,EAAE,CAAC;YAC3D,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;SAC3D,EAAE,GAAG,CAAC,CAAC;KACX;IAEQ,MAAM,GAAA;AAEX,QAAA,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;QACnD,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,SAAU,CAAC,CAAC;QAElD,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;AAC9C,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAU,KAAI;AAChD,YAAA,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,EAAE;gBACH,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,gBAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,CAAC;aACvC;iBAAM;gBACH,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;AACL,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;AACtD,YAAA,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AACzC,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,6BAA6B,CAAE,CAAC,CAAC;QAC5F,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAO,CAAC,CAAC;AAC1D,QAAA,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,MAAK;AACrD,YAAA,IAAI,CAAC,sBAAsB,CAAC,KAAK,EAAE,CAAC;AACpC,YAAA,IAAI,CAAC,uBAAuB,CAAC,KAAK,EAAE,CAAC;AACzC,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,iBAAiB,EAAE,MAAK;AAC/D,YAAA,IAAI,CAAC,sBAAsB,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;AAC5D,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC,MAAc,KAAI;AACnE,YAAA,IAAI,CAAC,uBAAuB,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;AACxD,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,MAAc,KAAI;AACpE,YAAA,IAAI,CAAC,uBAAuB,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;AACzD,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,eAAe,EAAE,CAAC,MAAc,KAAI;AACrE,YAAA,IAAI,CAAC,uBAAuB,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;AAC1D,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC,MAAc,KAAI;AACvE,YAAA,IAAI,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;AAC5D,SAAC,CAAC,CAAC;AAGH,QAAA,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAO,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;AAC1D,QAAA,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,SAAkB,KAAI;YAC/D,IAAI,CAAC,4BAA4B,CAAC,YAAY,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC9E,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,4BAA4B,CAAE,CAAC,CAAC;AAE7F,QAAA,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,4BAA4B,CAAE,CAAC,CAAC;AAClG,QAAA,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,QAAiB,KAAI;AACtE,YAAA,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAChD,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,QAAiB,KAAI;AAC1E,YAAA,IAAI,CAAC,sBAAsB,CAAC,SAAS,EAAE,CAAC;AAC5C,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,QAAiB,KAAI;AACvE,YAAA,IAAI,CAAC,sBAAsB,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;AAC5D,SAAC,CAAC,CAAC;AAGH,QAAA,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;KACxE;IAMQ,UAAU,GAAA;QACd,IAAI,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAmC,CAAC,yBAAyB,EAAE,CAAC;AACzF,QAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,sBAAsB,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACnE,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;KACvE;IAEQ,YAAY,GAAA;AACjB,QAAA,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACzC,QAAA,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACxC,IAAI,CAAC,QAAS,CAAC,QAAQ,CAAC,eAAmC,CAAC,uBAAuB,EAAE,CAAC;AACvF,QAAA,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;AACvE,QAAA,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;KACvB;AA0CJ;;ACpMD,MAAMD,UAAQ,GACV,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WA2CO,CAAC;AAEZ,MAAM,eAAe,GAAG,CAAA;g3BACw1B,CAAC;AAEj3B;;AAEG;AACG,MAAO,gBAAiB,SAAQ,OAAO,CAAA;AA+CzC,IAAA,WAAA,CAAY,UAAmC,EAAE,EAAA;QAC7C,KAAK,CAAC,OAAO,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC;AACtC,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC;AACtC,QAAA,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC;AAC5C,QAAA,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC;AAC5C,QAAA,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC;AAC5C,QAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC;AACzC,QAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC;AACzC,QAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC;AACzC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAE9B,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC;AAC/B,YAAA,SAAS,EAAE,CAAC,eAAe,EAAE,sBAAsB,CAAC;AACpD,YAAA,IAAI,EAAE,eAAe;AACxB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CAAC;AACtB,YAAA,KAAK,EAAE,uBAAuB;AAC9B,YAAA,OAAO,EAAE,KAAK;AACd,YAAA,OAAO,EAAE,IAAI;AACb,YAAA,GAAG,EAAE,EAAE;AACP,YAAA,IAAI,EAAE,EAAE;AACR,YAAA,KAAK,EAAE,GAAG;AACb,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAU,KAAI;AAChD,YAAA,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACjC,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC;AACnB,YAAA,QAAQ,EAAEA,UAAQ;AACrB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC;AAC1B,YAAA,KAAK,EAAE,aAAa;AACpB,YAAA,GAAG,EAAE,CAAC;AACT,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC;AAC1B,YAAA,KAAK,EAAE,aAAa;AACpB,YAAA,GAAG,EAAE,CAAC;AACT,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC;AACzB,YAAA,KAAK,EAAE,iBAAiB;YACxB,GAAG,EAAE,CAAC,IAAI;AACV,YAAA,GAAG,EAAE,IAAI;AACZ,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,MAAM,CAAC;AACnB,YAAA,KAAK,EAAE,WAAW;YAClB,GAAG,EAAE,CAAC,IAAI;AACV,YAAA,GAAG,EAAE,IAAI;AACZ,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,CAAC;AACtB,YAAA,KAAK,EAAE,QAAQ;AACf,YAAA,GAAG,EAAE,SAAS;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM,CAAC;AAC5B,YAAA,KAAK,EAAE,eAAe;YACtB,GAAG,EAAE,CAAC,GAAG,kBAAkB;AAC9B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,MAAM,CAAC;AACxC,YAAA,KAAK,EAAE,gCAAgC;AACvC,YAAA,GAAG,EAAE,CAAC,EAAE,GAAG,KAAK;YAChB,GAAG,EAAE,EAAE,GAAG,KAAK;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,MAAM,CAAC;AACxC,YAAA,KAAK,EAAE,yBAAyB;AAChC,YAAA,GAAG,EAAE,CAAC,EAAE,GAAG,KAAK;YAChB,GAAG,EAAE,EAAE,GAAG,KAAK;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,+BAA+B,GAAG,IAAI,MAAM,CAAC;AAC9C,YAAA,KAAK,EAAE,iCAAiC;AACxC,YAAA,GAAG,EAAE,CAAC,EAAE,GAAG,KAAK;YAChB,GAAG,EAAE,EAAE,GAAG,KAAK;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,+BAA+B,GAAG,IAAI,MAAM,CAAC;AAC9C,YAAA,KAAK,EAAE,iCAAiC;AACxC,YAAA,GAAG,EAAE,CAAC,EAAE,GAAG,MAAM;YACjB,GAAG,EAAE,EAAE,GAAG,MAAM;AACnB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,+BAA+B,GAAG,IAAI,MAAM,CAAC;AAC9C,YAAA,KAAK,EAAE,iCAAiC;AACxC,YAAA,GAAG,EAAE,CAAC,EAAE,GAAG,MAAM;YACjB,GAAG,EAAE,EAAE,GAAG,MAAM;AACnB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,MAAM,CAAC;AAC3C,YAAA,KAAK,EAAE,6BAA6B;AACpC,YAAA,GAAG,EAAE,CAAC,EAAE,GAAG,KAAK;YAChB,GAAG,EAAE,EAAE,GAAG,KAAK;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,MAAM,CAAC;AAC3C,YAAA,KAAK,EAAE,6BAA6B;AACpC,YAAA,GAAG,EAAE,CAAC,EAAE,GAAG,KAAK;YAChB,GAAG,EAAE,EAAE,GAAG,KAAK;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,MAAM,CAAC;AAC3C,YAAA,KAAK,EAAE,6BAA6B;AACpC,YAAA,GAAG,EAAE,CAAC,EAAE,GAAG,KAAK;YAChB,GAAG,EAAE,EAAE,GAAG,KAAK;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,MAAM,CAAC;AAClC,YAAA,KAAK,EAAE,sBAAsB;YAC7B,GAAG,EAAE,GAAG,GAAG,KAAK;AACnB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,MAAM,CAAC;AAChC,YAAA,KAAK,EAAE,oBAAoB;YAC3B,GAAG,EAAE,GAAG,GAAG,KAAK;AACnB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,MAAM,CAAC;AAChC,YAAA,KAAK,EAAE,oBAAoB;YAC3B,GAAG,EAAE,IAAI,GAAG,QAAQ;AACvB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM,CAAC;AAC5B,YAAA,KAAK,EAAE,eAAe;YACtB,GAAG,EAAE,EAAE,GAAG,GAAG;AAChB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM,CAAC;AAC5B,YAAA,KAAK,EAAE,cAAc;YACrB,GAAG,EAAE,EAAE,GAAG,IAAI;AACjB,SAAA,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,GAAG;AACf,YAAA,YAAY,EAAE,CAAC;AACf,YAAA,cAAc,EAAE,CAAC;AACjB,YAAA,SAAS,EAAE,CAAC;AACZ,YAAA,aAAa,EAAE,CAAC;AAChB,YAAA,aAAa,EAAE,CAAC;AAChB,YAAA,6BAA6B,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACxC,YAAA,wBAAwB,EAAE,CAAC;AAC3B,YAAA,wBAAwB,EAAE,CAAC;AAC3B,YAAA,0BAA0B,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACrC,YAAA,kBAAkB,EAAE,CAAC;AACrB,YAAA,aAAa,EAAE,CAAC;AAChB,YAAA,kBAAkB,EAAE,CAAC;AACrB,YAAA,gBAAgB,EAAE,CAAC;SACtB,CAAA;KACJ;IAEe,MAAM,GAAA;QAElB,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,GAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,SAAU,CAAC,CAAC;AAE9C,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE;AAChB,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,iCAAiC,CAAC,CAAC;AAC/E,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,qCAAqC,CAAC,CAAC;AACvF,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,qCAAqC,CAAC,CAAC;AACvF,YAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,oCAAoC,CAAC,CAAC;AACrF,YAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,8BAA8B,CAAC,CAAC;AACzE,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,uCAAuC,CAAC,CAAC;AAC3F,YAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,mDAAmD,CAAC,CAAC;AACnH,YAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,mDAAmD,CAAC,CAAC;AACnH,YAAA,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,yDAAyD,CAAC,CAAC;AAC/H,YAAA,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,yDAAyD,CAAC,CAAC;AAC/H,YAAA,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,yDAAyD,CAAC,CAAC;AAC/H,YAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,sDAAsD,CAAC,CAAC;AACzH,YAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,sDAAsD,CAAC,CAAC;AACzH,YAAA,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,sDAAsD,CAAC,CAAC;AACzH,YAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,2CAA2C,CAAC,CAAC;AACnG,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,uCAAuC,CAAC,CAAC;AAC3F,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,sCAAsC,CAAC,CAAC;AAC1F,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,6CAA6C,CAAC,CAAC;AACvG,YAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,CAAC,2CAA2C,CAAC,CAAC;SACtG;AAED,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAiB,KAAI;AACtD,YAAA,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AACzC,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;QAC7C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAY,CAAC,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAQ,CAAC,CAAC;QACrC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAW,CAAC,CAAC;QAC3C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAK,CAAC,CAAC;QAC/B,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAc,CAAC,CAAC;QACjD,IAAI,CAAC,yBAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,yBAA0B,CAAC,CAAC;QACzE,IAAI,CAAC,yBAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,yBAA0B,CAAC,CAAC;QACzE,IAAI,CAAC,+BAA+B,CAAC,QAAQ,CAAC,IAAI,CAAC,+BAAgC,CAAC,CAAC;QACrF,IAAI,CAAC,+BAA+B,CAAC,QAAQ,CAAC,IAAI,CAAC,+BAAgC,CAAC,CAAC;QACrF,IAAI,CAAC,+BAA+B,CAAC,QAAQ,CAAC,IAAI,CAAC,+BAAgC,CAAC,CAAC;QACrF,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAAC,IAAI,CAAC,4BAA6B,CAAC,CAAC;QAC/E,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAAC,IAAI,CAAC,4BAA6B,CAAC,CAAC;QAC/E,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAAC,IAAI,CAAC,4BAA6B,CAAC,CAAC;QAC/E,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAkB,CAAC,CAAC;QACzD,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAc,CAAC,CAAC;QACjD,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAc,CAAC,CAAC;QACjD,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAoB,CAAC,CAAC;QAC7D,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAkB,CAAC,CAAC;AAEzD,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;YAEb,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,UAAU,CAAC;YAE5D,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC;YACnD,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC;YACxD,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC;YAC7C,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;YAC1D,IAAI,CAAC,yBAAyB,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC;YACjF,IAAI,CAAC,yBAAyB,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC;AACjF,YAAA,IAAI,CAAC,+BAA+B,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC;AAC/F,YAAA,IAAI,CAAC,+BAA+B,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC;AAC/F,YAAA,IAAI,CAAC,+BAA+B,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC;AAC/F,YAAA,IAAI,CAAC,4BAA4B,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC;AACzF,YAAA,IAAI,CAAC,4BAA4B,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC;AACzF,YAAA,IAAI,CAAC,4BAA4B,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC;YACzF,IAAI,CAAC,iBAAiB,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;YACnE,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;YAC1D,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;YAC1D,IAAI,CAAC,mBAAmB,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC;YACrE,IAAI,CAAC,iBAAiB,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC;SACpE;QAGD,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,oBAAoB,CAAC;AAC3D,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AACjD,YAAA,IAAI,CAAC,MAAO,CAAC,oBAAoB,GAAG,GAAG,CAAC;AAC5C,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,MAAO,CAAC,oBAAoB,CAAC;AAC3D,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AACjD,YAAA,IAAI,CAAC,MAAO,CAAC,oBAAoB,GAAG,GAAG,CAAC;;;AAG5C,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AAChD,YAAA,IAAI,CAAC,WAAW,CAAC,cAAc,GAAG,GAAG,CAAC;YACtC,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AAC1C,YAAA,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,GAAG,CAAC;YACjC,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AAC7C,YAAA,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,GAAG,CAAC;YACpC,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AACnD,YAAA,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,GAAG,CAAC;YACrC,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AAC/D,YAAA,IAAI,CAAC,WAAW,CAAC,wBAAwB,GAAG,GAAG,CAAC;YAChD,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AAC/D,YAAA,IAAI,CAAC,WAAW,CAAC,wBAAwB,GAAG,GAAG,CAAC;YAChD,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,+BAA+B,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YACrE,IAAI,CAAC,WAAW,CAAC,6BAA6B,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YACxD,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,+BAA+B,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YACrE,IAAI,CAAC,WAAW,CAAC,6BAA6B,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YACxD,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,+BAA+B,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YACrE,IAAI,CAAC,WAAW,CAAC,6BAA6B,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YACxD,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAClE,IAAI,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YACrD,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAClE,IAAI,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YACrD,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;YAClE,IAAI,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YACrD,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AACvD,YAAA,IAAI,CAAC,WAAW,CAAC,kBAAkB,GAAG,GAAG,CAAC;YAC1C,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AACnD,YAAA,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,GAAG,CAAC;YACrC,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AACnD,YAAA,IAAI,CAAC,WAAW,CAAC,aAAa,GAAG,GAAG,CAAC;YACrC,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AACzD,YAAA,IAAI,CAAC,WAAW,CAAC,kBAAkB,GAAG,GAAG,CAAC;YAC1C,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,KAAI;AACvD,YAAA,IAAI,CAAC,WAAW,CAAC,gBAAgB,GAAG,GAAG,CAAC;YACxC,IAAI,CAAC,OAAO,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;KACN;IAES,OAAO,GAAA;AACb,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SACjE;KACJ;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvcD,MAAM,IAAK,SAAQ,UAAU,CAAA;AAMzB,IAAA,WAAA,CAAY,OAAe,GAAG,EAAA;QAC1B,KAAK,CAAC,MAAM,CAAC,CAAC;AAEd,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;KAC/B;IAEe,IAAI,GAAA;AAChB,QAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,EAAG,CAAC,KAAK,CAAC;QACjD,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,OAAO,CAAC,YAAY,EAAE;AACxD,YAAA,QAAQ,EAAE;AACN,gBAAA,oBAAoB,EAAE,MAAM;AAC/B,aAAA;AACD,YAAA,UAAU,EAAE;AACR,gBAAA,eAAe,EAAE,MAAM;AACvB,gBAAA,YAAY,EAAE,MAAM;AACvB,aAAA;AACD,YAAA,YAAY,EACR,CAAA;;;;;;;AAOF,aAAA,CAAA;AACF,YAAA,cAAc,EACV,CAAA;;;;AAIF,aAAA,CAAA;AACL,SAAA,CAAC,CAAC,CAAC;KACP;IAEe,KAAK,GAAA;AAEjB,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC;YACtD,oBAAoB,EAAE,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC,uBAAuB,EAAE;YAC5E,eAAe,EAAE,IAAI,CAAC,UAAU;YAChC,YAAY,EAAE,IAAI,CAAC,eAAe;AACrC,SAAA,CAAC,CAAC;QAEH,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAW,CAAC,QAAQ,CAAC,CAAC;KACnG;AAEM,IAAA,gBAAgB,CAAC,QAAgB,EAAA;AAEpC,QAAA,MAAM,QAAQ,GAAG;AACb,YAAA,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG;AACrC,YAAA,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,GAAG,CAAC,EAAE,GAAG;AACrC,YAAA,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,GAAG,CAAC;SACxC,CAAC;AAEF,QAAA,MAAM,MAAM,GAAG;AACX,YAAA,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;AACtC,YAAA,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;AACtC,YAAA,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;SACzC,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,YAAY,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7F,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KACnG;AACJ;;AC3ED;;AAEG;AAQH,SAAS,oBAAoB,CAAC,GAAa,EAAA;AACvC,IAAA,OAAO,IAAI,WAAW,CAAC,GAAG,CAAC,CAAC;AAChC,CAAC;AAED,SAAS,yBAAyB,CAAC,IAAY,EAAA;AAC3C,IAAA,OAAO,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC;AACjC,CAAC;AAED,SAAS,uBAAuB,CAAC,IAAY,EAAA;IAEzC,IAAI,OAAO,GAAG,EAAE,CAAC;AAEjB,IAAA,IAAI,EAAE,GAAG,CAAC,EACN,EAAE,GAAG,CAAC,CAAC;AAEX,IAAA,IAAI,EAAE,GAAG,CAAC,EACN,EAAE,GAAG,CAAC,CAAC;IAEX,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;AAC/B,IAAA,KAAK,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;AACrC,QAAA,KAAK,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,IAAI,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;AACjC,YAAA,IAAI,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC;YACpB,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC;AACpB,YAAA,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC;AACd,YAAA,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC5B;QACD,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;KAC/B;AACD,IAAA,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;AAE9D,IAAA,OAAO,oBAAoB,CAAC,OAAO,CAAC,CAAC;AACzC,CAAC;AAED,SAAS,uBAAuB,CAAC,IAAY,EAAE,OAAe,EAAA;IAC1D,IAAI,OAAO,GAAG,EAAE,CAAC;IACjB,MAAM,OAAO,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,OAAO,CAAC;AACrC,IAAA,MAAM,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;IAC7B,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AAC/B,QAAA,IAAI,CAAC,GAAG,OAAO,KAAK,CAAC,EAAE;YACnB,CAAC,GAAG,CAAC,CAAC;SACT;AACD,QAAA,IAAI,IAAI,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,EAC9B,IAAI,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC;AACxB,QAAA,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KAC5B;IAED,IAAI,OAAO,MAAM,IAAI,GAAG,CAAC,CAAC,EAAE;AACxB,QAAA,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACnB,QAAA,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACnB;AAED,IAAA,OAAO,oBAAoB,CAAC,OAAO,CAAC,CAAC;AACzC,CAAC;AAED,SAAS,wBAAwB,CAAC,IAAY,EAAE,OAAe,EAAA;IAC3D,IAAI,OAAO,GAAG,EAAE,CAAC;IACjB,MAAM,OAAO,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,OAAO,CAAC;IACrC,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AAC/B,QAAA,IAAI,CAAC,GAAG,OAAO,KAAK,CAAC,EAAE;YACnB,CAAC,GAAG,CAAC,CAAC;SACT;QACD,IAAI,IAAI,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,EACnB,IAAI,GAAG,CAAC,CAAC;AACb,QAAA,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KAC5B;IAED,IAAI,OAAO,MAAM,IAAI,GAAG,CAAC,CAAC,EAAE;AACxB,QAAA,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;AACvB,QAAA,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;KAC1B;AAED,IAAA,OAAO,oBAAoB,CAAC,OAAO,CAAC,CAAC;AACzC,CAAC;AAED,SAAS,uBAAuB,CAAC,IAAY,EAAE,OAAe,EAAA;IAC1D,IAAI,OAAO,GAAG,EAAE,CAAC;IACjB,MAAM,OAAO,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,OAAO,CAAC;IACrC,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AAC/B,QAAA,IAAI,CAAC,GAAG,OAAO,KAAK,CAAC,EAAE;YACnB,CAAC,GAAG,CAAC,CAAC;SACT;QACD,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,EAChC,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC;AAC/B,QAAA,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KAC5B;IAED,IAAI,OAAO,MAAM,IAAI,GAAG,CAAC,CAAC,EAAE;AACxB,QAAA,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QACpC,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC;KACjC;AAED,IAAA,OAAO,oBAAoB,CAAC,OAAO,CAAC,CAAC;AACzC,CAAC;AAED,SAAS,wBAAwB,CAAC,IAAY,EAAE,OAAe,EAAA;IAC3D,IAAI,OAAO,GAAG,EAAE,CAAC;IACjB,MAAM,OAAO,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,OAAO,CAAC;IACrC,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,MAAM,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACjC,IAAA,MAAM,EAAE,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC;AAC3B,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AAC/B,QAAA,IAAI,CAAC,GAAG,OAAO,KAAK,CAAC,EAAE;YACnB,CAAC,GAAG,CAAC,CAAC;SACT;QACD,IAAI,IAAI,GAAG,EAAE,GAAG,CAAC,EACb,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC;AAClB,QAAA,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KAC5B;IAED,IAAI,OAAO,MAAM,IAAI,GAAG,CAAC,CAAC,EAAE;QACxB,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC;KACxC;IACD,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;AAEjC,IAAA,OAAO,oBAAoB,CAAC,OAAO,CAAC,CAAC;AACzC,CAAC;AAED,SAAS,qBAAqB,CAAC,GAAW,EAAA;IACtC,IAAI,KAAK,GAAiB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;AAE3C,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAClB,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;QAEf,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACjB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACjB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACjB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AAEjB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE;YAC3B,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACxB,YAAA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,uBAAuB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AACjD,YAAA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,wBAAwB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAClD,YAAA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,uBAAuB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AACjD,YAAA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,wBAAwB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;SAErD;KACJ;AACD,IAAA,OAAO,KAAK,CAAC;AACjB,CAAC;AAED,SAAS,oBAAoB,CAAC,GAAW,EAAA;IACrC,IAAI,KAAK,GAAG,EAAE,CAAC;AACf,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE;QAC3B,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACzB,KAAK,CAAC,CAAC,CAAC,GAAG,uBAAuB,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;KAC7C;AACD,IAAA,OAAO,KAAK,CAAC;AACjB,CAAC;AAED,SAAS,mBAAmB,CAAC,IAAY,EAAA;AACrC,IAAA,IAAI,SAAS,GAAG,IAAI,WAAW,CAAC,CAAC,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAC7D,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,EAAE,EAAE;AAC5B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,EAAE,EAAE;YAC5B,SAAS,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,MAAM,CAAC;YACnC,SAAS,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,MAAM,CAAC;SACtC;KACJ;AACD,IAAA,OAAO,SAAS,CAAC;AACrB,CAAC;AAED,MAAM,aAAa,CAAA;AAMf,IAAA,WAAA,CAAY,cAAsB,CAAC,EAAA;AAC/B,QAAA,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,kBAAkB,GAAG,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;QACjE,IAAI,CAAC,kBAAkB,GAAG,qBAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;KACtE;AAED,IAAA,IAAW,WAAW,GAAA;QAClB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;IAEM,IAAI,GAAA;QACP,IAAI,CAAC,kBAAkB,GAAG,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAClE,IAAI,CAAC,kBAAkB,GAAG,qBAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;KACtE;AAEM,IAAA,cAAc,CAAC,QAAgB,EAAA;AAClC,QAAA,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;QAC7B,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;IAEM,oBAAoB,CAAC,IAAY,EAAE,UAA4C,EAAA;QAClF,IAAI,IAAI,EAAE;AACN,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EACjC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EACnD,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EACnD,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EACnD,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAExD,IAAI,OAAO,GAAG,yBAAyB,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;AAE9F,YAAA,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAClB,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;AACzB,YAAA,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;AACpC,YAAA,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;YAC/C,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;AAE1D,YAAA,OAAO,OAAO,CAAC;SAClB;aAAM;AACH,YAAA,OAAO,oBAAoB,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;SAC7C;KACJ;AAEM,IAAA,sBAAsB,CAAC,GAAW,EAAA;QACrC,IAAI,KAAK,GAAG,EAAE,CAAC;AACf,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE;YAC3B,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACzB,KAAK,CAAC,CAAC,CAAC,GAAG,mBAAmB,CAAC,CAAC,CAAC,CAAC;SACrC;AACD,QAAA,OAAO,KAAK,CAAC;KAChB;AACJ,CAAA;AAED,IAAI,QAAQ,GAAG,IAAI,aAAa,EAAE,CAAC;SAEnB,WAAW,GAAA;AACvB,IAAA,OAAO,QAAQ,CAAC;AACpB;;AC7OO,MAAM,KAAK,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAqFpB;;ACjED,MAAM,cAAc,GAAyB;AACzC,IAAA,YAAY,EAAE,QAAQ;AACtB,IAAA,cAAc,EAAE,IAAI;AACpB,IAAA,SAAS,EAAE,KAAK;AAChB,IAAA,aAAa,EAAE,IAAI;AACnB,IAAA,aAAa,EAAE,kBAAkB;AACjC,IAAA,6BAA6B,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC;AACtD,IAAA,wBAAwB,EAAE,KAAK;AAC/B,IAAA,wBAAwB,EAAE,KAAK;AAC/B,IAAA,0BAA0B,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;AACjD,IAAA,kBAAkB,EAAE,QAAQ;AAC5B,IAAA,aAAa,EAAE,GAAG;AAClB,IAAA,kBAAkB,EAAE,IAAI;AACxB,IAAA,gBAAgB,EAAE,IAAI;CACzB,CAAA;AAEM,MAAM,MAAM,GAAG,CAAC,WAAoC,GAAA,cAAc,KACrE,CAAA;MACE,KAAK,CAAA;;;AAGgB,yBAAA,EAAA,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;AACjC,2BAAA,EAAA,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;AAC1C,sBAAA,EAAA,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;;;;;AAKtB,gCAAA,EAAA,WAAW,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;;;AAGpC,gCAAA,EAAA,WAAW,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;;;;;;;;;;;;AAYjB,oDAAA,EAAA,WAAW,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,EAAK,WAAW,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,WAAW,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;;AAExL,2CAAA,EAAA,WAAW,CAAC,wBAAwB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;AAC/C,2CAAA,EAAA,WAAW,CAAC,wBAAwB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;AACzC,iDAAA,EAAA,WAAW,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,EAAK,WAAW,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,WAAW,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;;AAElL,qCAAA,EAAA,WAAW,CAAC,kBAAkB,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;AAC/C,gCAAA,EAAA,WAAW,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;;AAE/B,qCAAA,EAAA,WAAW,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;AAC3C,mCAAA,EAAA,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAmDtE,CAAC;AAED,SAAU,aAAa,CAAC,WAAkC,EAAA;AAC5D,IAAA,OAAO,IAAI,OAAO,CAAC,eAAe,EAAE;AAChC,QAAA,QAAQ,EAAE;AACN,YAAA,WAAW,EAAE,MAAM;AACtB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,UAAU,EAAE,MAAM;AACrB,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;AAME,aAAA,CAAA;AAEN,QAAA,cAAc,EACV,CAAA;;;cAGE,MAAM,CAAC,WAAW,CAAC,CAAA;;;;;;;;;;AAUnB,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;AAEK,SAAU,UAAU,CAAC,WAAkC,EAAA;AACzD,IAAA,OAAO,IAAI,OAAO,CAAC,YAAY,EAAE;AAC7B,QAAA,QAAQ,EAAE;AACN,YAAA,WAAW,EAAE,MAAM;AACnB,YAAA,oBAAoB,EAAE,WAAW;AACpC,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,UAAU,EAAE,MAAM;AACrB,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;AAME,aAAA,CAAA;AAEN,QAAA,cAAc,EACV,CAAA;;;;;;cAME,MAAM,CAAC,WAAW,CAAC,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FnB,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrWA;AACA;AACA;AACA;AACA;AAGA,MAAM,KAAK,GAAG,CAAA,qDAAA,CAAuD,CAAC;AAEtE,MAAM,SAAS,GAAG,CAAA;;2EAEyD,CAAC;AAE5E,MAAM,gBAAgB,GAAG,CAAA;;mFAE0D,CAAC;AAEpF,MAAM,iBAAiB,GAAG,CAAA;;;;gGAIsE,CAAA;AAGhG,MAAM,UAAU,GAAG,CAAC,CAAC;SAEL,kBAAkB,GAAA;AAC9B,IAAA,OAAO,IAAI,OAAO,CAAC,oBAAoB,EAAE;AACrC,QAAA,QAAQ,EAAE;AACN,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,YAAY,EAAE,KAAK;AACnB,YAAA,aAAa,EAAE,MAAM;AACrB,YAAA,eAAe,EAAE,OAAO;AACxB,YAAA,UAAU,EAAE,gBAAgB;AAC5B,YAAA,cAAc,EAAE,WAAW;AAC3B,YAAA,MAAM,EAAE,OAAO;AAClB,SAAA,EAAE,UAAU,EAAE;AACX,YAAA,mBAAmB,EAAE,MAAM;AAC3B,YAAA,kBAAkB,EAAE,MAAM;AAC1B,YAAA,aAAa,EAAE,MAAM;AACxB,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BE,aAAA,CAAA;AAEN,QAAA,cAAc,EAAE,CAAA;AACS,+BAAA,EAAA,UAAU,GAAG,CAAC,CAAA;;;;;;;;cAQjC,gBAAgB,CAAA;;;;;;;;;;;;;;;;;;;;;AAqBhB,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;SAEe,gCAAgC,GAAA;AAC5C,IAAA,OAAO,IAAI,OAAO,CAAC,oBAAoB,EAAE;AACrC,QAAA,QAAQ,EAAE;AACN,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,MAAM,EAAE,OAAO;AAEf,YAAA,mBAAmB,EAAE,MAAM;AAC3B,YAAA,cAAc,EAAE,MAAM;AAEtB,YAAA,YAAY,EAAE,KAAK;AACnB,YAAA,aAAa,EAAE,MAAM;AACrB,YAAA,eAAe,EAAE,OAAO;AACxB,YAAA,UAAU,EAAE,gBAAgB;AAC5B,YAAA,cAAc,EAAE,WAAW;AAC3B,YAAA,UAAU,EAAE,WAAW;AACvB,YAAA,YAAY,EAAE,WAAW;AACzB,YAAA,eAAe,EAAE,WAAW;AAC5B,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,OAAO,EAAE,MAAM;AACf,YAAA,OAAO,EAAE,MAAM;AACf,YAAA,QAAQ,EAAE,MAAM;AAEhB,YAAA,SAAS,EAAE,OAAO;AAClB,YAAA,uBAAuB,EAAE,OAAO;AACnC,SAAA,EAAE,UAAU,EAAE;AACX,YAAA,mBAAmB,EAAE,MAAM;AAC3B,YAAA,kBAAkB,EAAE,MAAM;AAC1B,YAAA,aAAa,EAAE,MAAM;AACxB,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCE,aAAA,CAAA;AAEN,QAAA,cAAc,EACV,CAAA;;;;AAIqB,+BAAA,EAAA,UAAU,GAAG,CAAC,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;cA4BjC,KAAK,CAAA;;cAEL,gBAAgB,CAAA;;cAEhB,KAAK,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEL,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;SAEe,gCAAgC,GAAA;AAC5C,IAAA,OAAO,IAAI,OAAO,CAAC,oBAAoB,EAAE;AACrC,QAAA,QAAQ,EAAE;AACN,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,MAAM,EAAE,OAAO;AAEf,YAAA,mBAAmB,EAAE,MAAM;AAC3B,YAAA,cAAc,EAAE,MAAM;AAEtB,YAAA,YAAY,EAAE,KAAK;AACnB,YAAA,aAAa,EAAE,MAAM;AACrB,YAAA,eAAe,EAAE,OAAO;AACxB,YAAA,UAAU,EAAE,gBAAgB;AAC5B,YAAA,cAAc,EAAE,WAAW;AAC3B,YAAA,UAAU,EAAE,WAAW;AACvB,YAAA,YAAY,EAAE,WAAW;AACzB,YAAA,eAAe,EAAE,WAAW;AAC5B,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,OAAO,EAAE,MAAM;AACf,YAAA,OAAO,EAAE,MAAM;AACf,YAAA,QAAQ,EAAE,MAAM;AAEhB,YAAA,SAAS,EAAE,OAAO;AAClB,YAAA,uBAAuB,EAAE,OAAO;AAEhC,YAAA,iBAAiB,EAAE,OAAO;AAC7B,SAAA,EAAE,UAAU,EAAE;AACX,YAAA,mBAAmB,EAAE,MAAM;AAC3B,YAAA,kBAAkB,EAAE,MAAM;AAC1B,YAAA,aAAa,EAAE,MAAM;AACxB,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CE,aAAA,CAAA;AAEN,QAAA,cAAc,EACV,CAAA;;;;;AAKqB,+BAAA,EAAA,UAAU,GAAG,CAAC,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cAiCjC,KAAK,CAAA;;cAEL,SAAS,CAAA;;cAET,KAAK,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EL,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;AAGK,SAAU,8BAA8B,CAAC,WAAkC,EAAA;AAC7E,IAAA,OAAO,IAAI,OAAO,CAAC,oBAAoB,EAAE;AACrC,QAAA,QAAQ,EAAE;AACN,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,MAAM,EAAE,OAAO;AAEf,YAAA,mBAAmB,EAAE,MAAM;AAC3B,YAAA,cAAc,EAAE,MAAM;AAEtB,YAAA,YAAY,EAAE,KAAK;AACnB,YAAA,aAAa,EAAE,MAAM;AACrB,YAAA,eAAe,EAAE,OAAO;AACxB,YAAA,UAAU,EAAE,gBAAgB;AAC5B,YAAA,cAAc,EAAE,WAAW;AAC3B,YAAA,UAAU,EAAE,WAAW;AACvB,YAAA,YAAY,EAAE,WAAW;AACzB,YAAA,eAAe,EAAE,WAAW;AAC5B,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,OAAO,EAAE,MAAM;AACf,YAAA,OAAO,EAAE,MAAM;AACf,YAAA,QAAQ,EAAE,MAAM;AAEhB,YAAA,oBAAoB,EAAE,WAAW;AACjC,YAAA,iBAAiB,EAAE,WAAW;AAC9B,YAAA,SAAS,EAAE,OAAO;AAClB,YAAA,uBAAuB,EAAE,OAAO;AAChC,YAAA,aAAa,EAAE,MAAM;AAErB,YAAA,iBAAiB,EAAE,OAAO;AAC7B,SAAA,EAAE,UAAU,EAAE;AACX,YAAA,mBAAmB,EAAE,MAAM;AAC3B,YAAA,kBAAkB,EAAE,MAAM;AAC1B,YAAA,aAAa,EAAE,MAAM;AACxB,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CE,aAAA,CAAA;AAEN,QAAA,cAAc,EACV,CAAA;;;;;AAKqB,+BAAA,EAAA,UAAU,GAAG,CAAC,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cAqCjC,KAAK,CAAA;;cAEL,SAAS,CAAA;;cAET,MAAM,CAAC,WAAW,CAAC,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNnB,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;SAEe,qBAAqB,GAAA;AACjC,IAAA,OAAO,IAAI,OAAO,CAAC,uBAAuB,EAAE;AACxC,QAAA,QAAQ,EAAE;AACN,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,YAAY,EAAE,KAAK;AACnB,YAAA,aAAa,EAAE,MAAM;AACrB,YAAA,UAAU,EAAE,gBAAgB;AAC5B,YAAA,cAAc,EAAE,gBAAgB;AAChC,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,MAAM,EAAE,OAAO;AAClB,SAAA,EAAE,UAAU,EAAE;YACX,mBAAmB,EAAE,MAAM,EAAE,kBAAkB,EAAE,MAAM,EAAE,aAAa,EAAE,MAAM;AACjF,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BE,aAAA,CAAA;AAEN,QAAA,cAAc,EACV,CAAA;AACqB,+BAAA,EAAA,UAAU,GAAG,CAAC,CAAA;;;;;;;;cAQjC,iBAAiB,CAAA;;;;;;;;;;;;;;;;;;;;;;;AAuBjB,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;SAEe,sBAAsB,GAAA;AAClC,IAAA,OAAO,IAAI,OAAO,CAAC,wBAAwB,EAAE;AACzC,QAAA,QAAQ,EAAE;AACN,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,MAAM,EAAE,OAAO;AACf,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACzB,SAAA,EAAE,UAAU,EAAE;AACX,YAAA,mBAAmB,EAAE,MAAM,EAAE,kBAAkB,EAAE,MAAM;AAC1D,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCE,aAAA,CAAA;AAEN,QAAA,cAAc,EACV,CAAA;;;;;;;;;;;;;;;;;;;;AAoBE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP,CAAC;SAEe,cAAc,GAAA;AAC1B,IAAA,OAAO,IAAI,OAAO,CAAC,gBAAgB,EAAE;AACjC,QAAA,QAAQ,EAAE;AACN,YAAA,gBAAgB,EAAE,MAAM;AACxB,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,MAAM,EAAE,OAAO;AACf,YAAA,eAAe,EAAE,MAAM;AACvB,YAAA,cAAc,EAAE,MAAM;AACtB,YAAA,mBAAmB,EAAE,MAAM;AAC9B,SAAA,EAAE,UAAU,EAAE;AACX,YAAA,mBAAmB,EAAE,MAAM,EAAE,kBAAkB,EAAE,MAAM;AAC1D,SAAA;AAED,QAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BE,aAAA,CAAA;AAEN,QAAA,cAAc,EACV,CAAA;;;;;AAKG,cAAA,CAAA;AACV,KAAA,CAAC,CAAC;AACP;;MC1hCa,eAAe,CAAA;IAYxB,WAAY,CAAA,OAAgB,EAAE,OAAA,GAAkC,EAAE,EAAA;AAC9D,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,MAAO,CAAC,KAAK,CAAC;AACrD,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAO,CAAC,MAAM,CAAC;AACxD,QAAA,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,cAAc,IAAI,SAAS,GAAG,OAAO,CAAC,cAAc,GAAG,mBAAmB,CAAC;AAC1G,QAAA,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,QAAQ,IAAI,SAAS,GAAG,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AACzE,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,IAAI,CAAC,CAAC;AAC/B,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,SAAS,CAAC;KAC9C;AAED,IAAA,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;AAED,IAAA,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAED;;;;;;AAMG;AACI,IAAA,OAAO,CAAC,KAAa,EAAE,MAAc,EAAE,eAAwB,KAAK,EAAA;AACvE,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AAEtB,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAC9D;AAED,QAAA,IAAI,IAAI,CAAC,SAAS,IAAI,YAAY,EAAE;YAChC,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;KACJ;IAEM,IAAI,GAAA;KACV;IAEM,OAAO,GAAA;KACb;AAED;;;;AAIG;IACI,UAAU,GAAA;AACb,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC1B,QAAA,OAAO,EAAE,CAAC,sBAAsB,CAAC,EAAE,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,oBAAoB,CAAC;KAChF;IAEM,WAAW,GAAA;AACd,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;QAC1B,OAAO,EAAE,CAAC,sBAAsB,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;KACpD;AAED;;;;AAIG;IACI,QAAQ,GAAA;AACX,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;QAC1B,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACzC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;AAC9C,QAAA,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AAC7C,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;QACrD,CAAC,KAAK,CAAC,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC;QACzB,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACzC,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;AAGG;IACI,UAAU,GAAA;QACb,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,EAChB,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;QACf,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAK,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QAErB,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC;QAEhD,IAAI,CAAC,EAAE;YACH,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;AAC3C,YAAA,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;SAC1C;aAAM;AACH,YAAA,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,MAAO,CAAC,KAAK,EAAE,CAAC,CAAC,MAAO,CAAC,MAAM,CAAC,CAAC;SACxD;KACJ;AACJ;;AC5HD;;;;;AAKG;AACH,MAAM,WAAW,CAAA;AAgBb,IAAA,WAAA,CAAY,KAAgB,GAAA,GAAG,EAAE,MAAA,GAAiB,GAAG,EAAA;QACjD,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAChD,QAAA,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;AAC3B,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QAE7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE;AAC1C,YAAA,kBAAkB,EAAE,IAAI;AAC3B,SAAA,CAAE,CAAC;KACP;AAED;;;;AAIG;IACI,SAAS,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAED;;;;AAIG;IACI,UAAU,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;AAED;;;AAGG;IACI,SAAS,GAAA;QACZ,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACrF,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;AACvB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE;YAC9C,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;SACjE;QACD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KAC1C;AAED;;;;AAIG;AACI,IAAA,IAAI,CAAC,KAAa,EAAA;AACrB,QAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAA;AAC/B,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAA;KACvB;AAED;;;;AAIG;IACI,OAAO,GAAA;QACV,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACrF,OAAO,IAAI,CAAC,IAAI,CAAC;KACpB;AAED;;;;AAIG;AACI,IAAA,SAAS,CAAC,KAAa,EAAA;AAC1B,QAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;KACzE;AAED;;;;AAIG;AACI,IAAA,OAAO,CAAC,IAAuB,EAAA;QAClC,IAAI,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACvF,QAAA,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KAC/C;AAED;;;;;AAKG;IACI,MAAM,CAAC,KAAa,EAAE,MAAc,EAAA;AACvC,QAAA,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;AAC3B,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAA6B,CAAC;KAC7E;AAED;;;;;;;;AAQG;IACI,SAAS,CAAC,GAAqB,EAAE,CAAS,EAAE,CAAS,EAAE,KAAa,EAAE,MAAc,EAAA;QACvF,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,IAAI,GAAG,CAAC,KAAK,EAAE,MAAM,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC;KAC1F;AAED;;;;AAIG;IACI,QAAQ,GAAA;AACX,QAAA,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;AACtB,QAAA,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;AAC5B,QAAA,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAC9B,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;AAC9C,QAAA,OAAO,GAAG,CAAC;KACd;AAED;;;;;AAKG;AACI,IAAA,YAAY,CAAC,IAAY,EAAA;QAC5B,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC9C,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;KACpC;AAED;;;;;;;;AAQG;AACI,IAAA,QAAQ,CAAC,IAAY,EAAE,CAAA,GAAY,CAAC,EAAE,CAAY,GAAA,EAAE,EAAE,IAAA,GAAe,qBAAqB,EAAE,QAAgB,OAAO,EAAA;AACtH,QAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;AAChC,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KACtC;AAED;;;;AAIG;IACI,QAAQ,GAAA;AACX,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;KAC7B;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;KAC9B;AAED;;;;;AAKG;IACI,IAAI,CAAC,GAAW,EAAE,QAAkB,EAAA;AACvC,QAAA,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;QACtB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,GAAG,CAAC,MAAM,GAAG,YAAA;YACT,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;AACnC,YAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;AAC1D,YAAA,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAC;AAC9B,SAAC,CAAC;AACF,QAAA,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;KACjB;AAED;;;AAGG;IACI,SAAS,GAAA;AACZ,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;AAC1B,QAAA,IAAI,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC;QAEtB,IAAI,aAAa,GAAG,iBAAiB,CAAC;QACtC,aAAa,IAAI,QAAQ,CAAC;QAC1B,aAAa,IAAI,mCAAmC,CAAC;QACrD,aAAa,IAAI,QAAQ,CAAC;AAC1B,QAAA,aAAa,IAAI,YAAY,GAAG,OAAO,GAAG,IAAI,CAAC;QAC/C,aAAa,IAAI,SAAS,CAAC;QAC3B,aAAa,IAAI,SAAS,CAAC;QAE3B,IAAI,QAAQ,GAAG,MAAM,CAAC,IAAI,CACtB,EAAE,EACF,EAAE,EACF,QAAQ,GAAG,GAAG,CAAC,KAAK,GAAG,aAAa,GAAG,GAAG,CAAC,MAAM,GAAG,IAAI,CAC3D,CAAC;QAEF,IAAI,QAAQ,EAAE;AACV,YAAA,QAAQ,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;AACzB,YAAA,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;AACvC,YAAA,QAAQ,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;YAC1B,QAAQ,CAAC,KAAK,EAAE,CAAC;SACpB;KACJ;IAEM,OAAO,GAAA;AACV,QAAA,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;AACvB,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;;AAExB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;AAEpB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACxB;AACJ;;ACpOD;;;;;AAKG;AACG,MAAO,WAAY,SAAQ,eAAe,CAAA;IAqB5C,WAAY,CAAA,OAAgB,EAAE,OAAA,GAA8B,EAAE,EAAA;AAE1D,QAAA,KAAK,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAExB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,KAAK,CAAC;QAEvC,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,cAAc,YAAY,KAAK,GAAG,OAAO,CAAC,cAAc,GAAG,CAAC,OAAO,CAAC,cAAc,IAAI,MAAM,CAAC,CAAC;QAEhI,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,YAAY,KAAK,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC;QAEhG,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,IAAI,YAAY,KAAK,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC,IAAI,IAAI,eAAe,CAAC,CAAC;AAEjG,QAAA,IAAI,OAAO,CAAC,UAAU,YAAY,KAAK,EAAE;AACrC,YAAA,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAS,EAAE,CAAS,KAAI;AAClE,gBAAA,IAAI,GAAG,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC;AAC1B,gBAAA,IAAI,GAAG,KAAK,kBAAkB,EAAE;oBAC5B,OAAO,CAAA,EAAG,GAAG,CAAG,EAAA,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC;iBAClC;AACD,gBAAA,OAAO,GAAG,CAAC;AACf,aAAC,CAAC,CAAA;SACL;aAAM;YACH,IAAI,CAAC,cAAc,GAAG,CAAC,OAAO,CAAC,UAAoB,IAAI,mBAAmB,CAAC,CAAC;SAC/E;AAED,QAAA,IAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC,kBAAkB,IAAI,SAAS,GAAG,OAAO,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;AAErH,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC7D;;;;;;;;;;;;;;;;IAkBe,OAAO,GAAA;AACnB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;AAEzB,QAAA,IAAI,CAAC,EAAE;YAAE,OAAO;AAEhB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC3C,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SACtC;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAEtC,QAAA,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChC,QAAA,EAAE,CAAC,kBAAkB,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;AAE/C,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAEjB,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;KACxB;AAED;;;;AAIG;IACa,IAAI,GAAA;AAChB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;AAEzB,QAAA,IAAI,CAAC,EAAE;YAAE,OAAO;AAEhB,QAAA,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,iBAAiB,EAAE,CAAC;QAEnC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;AAE9C,QAAA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACf,IAAI,aAAa,GAAG,EAAE,CAAC;AACvB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC3C,IAAI,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,uBAAuB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gBAE7K,IAAI,KAAK,GAAI,EAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;gBAEhD,IAAI,EAAE,EAAE;AACJ,oBAAA,IAAI,CAAC,iBAAiB,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;AAClC,oBAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;iBACzB;gBAED,IAAI,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,kBAAkB,EAAE;AAC9C,oBAAA,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBAC7B;aACJ;YACD,EAAE,CAAC,WAAW,IAAI,EAAE,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;SACnD;AAED,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,YAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC,kBAAkB,EAAE,CAAC;YAClD,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;YAC9D,EAAE,CAAC,mBAAmB,CAAC,EAAE,CAAC,YAAY,EAAG,EAAU,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YACtG,EAAE,CAAC,uBAAuB,CAAC,EAAE,CAAC,WAAW,EAAG,EAAU,CAAC,IAAI,CAAC,mBAAmB,CAAC,EAAE,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;YAC5H,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;SAC9C;QAED,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAK,CAAC,CAAC;KAC7C;AAED;;;;;AAKG;IACI,iBAAiB,CAAC,OAAqB,EAAE,YAAqB,EAAA;AACjE,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;QAC1B,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;QACvC,EAAE,CAAC,oBAAoB,CAAC,EAAE,CAAC,WAAW,EAAE,YAAY,IAAI,EAAE,CAAC,iBAAiB,EAAE,EAAE,CAAC,UAAU,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;QACzG,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;KACxC;AAED;;;;;;;;;AASG;AACI,IAAA,UAAU,CAAC,GAAe,EAAE,EAAU,EAAE,EAAU,EAAE,KAAgB,GAAA,CAAC,EAAE,CAAA,GAAY,CAAC,EAAE,IAAY,CAAC,EAAA;AACtG,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;QAC1B,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;AAC9C,QAAA,EAAE,CAAC,UAAU,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC;AAClE,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,EAAG,EAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAC1G,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAK,CAAC,CAAC;KAC7C;AAED;;;;;AAKG;AACI,IAAA,aAAa,CAAC,GAAe,EAAE,eAAA,GAA0B,CAAC,EAAA;AAC7D,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;QAC1B,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;AAC9C,QAAA,EAAE,CAAC,UAAU,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,GAAG,eAAe,CAAC,CAAC;AACvE,QAAA,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,IAAI,EAAG,EAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAC1G,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAK,CAAC,CAAC;KAC7C;AAED;;;;AAIG;IACI,QAAQ,GAAA;AACX,QAAA,IAAI,IAAI,GAAG,IAAI,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;AAC1D,QAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AACzB,QAAA,IAAI,WAAW,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AAC7D,QAAA,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAC1B,QAAA,OAAO,WAAW,CAAC,QAAQ,EAAE,CAAC;KACjC;AACJ;;ACvLK,MAAO,UAAW,SAAQ,OAAO,CAAA;AAOnC,IAAA,WAAA,CAAY,UAA6B,EAAE,EAAA;AACvC,QAAA,KAAK,CAAC;AACF,YAAA,IAAI,EAAE,YAAY;AAClB,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAE9B,QAAA,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QAEnB,IAAI,CAAC,WAAW,GAAG;AACf,YAAA,YAAY,EAAE,OAAO,CAAC,MAAM,IAAI,QAAQ;AACxC,YAAA,cAAc,EAAE,OAAO,CAAC,aAAa,IAAI,IAAI;AAC7C,YAAA,SAAS,EAAE,OAAO,CAAC,QAAQ,IAAI,KAAK;AACpC,YAAA,aAAa,EAAE,OAAO,CAAC,YAAY,IAAI,IAAI;AAC3C,YAAA,aAAa,EAAE,OAAO,CAAC,YAAY,IAAI,kBAAkB;YACzD,6BAA6B,EAAE,OAAO,CAAC,6BAA6B,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC;AAC/F,YAAA,wBAAwB,EAAE,OAAO,CAAC,wBAAwB,IAAI,KAAK;AACnE,YAAA,wBAAwB,EAAE,OAAO,CAAC,wBAAwB,IAAI,KAAK;YACnE,0BAA0B,EAAE,OAAO,CAAC,0BAA0B,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;AACvF,YAAA,kBAAkB,EAAE,OAAO,CAAC,gBAAgB,IAAI,QAAQ;AACxD,YAAA,aAAa,EAAE,OAAO,CAAC,YAAY,IAAI,GAAG;AAC1C,YAAA,kBAAkB,EAAE,OAAO,CAAC,kBAAkB,IAAI,IAAI;AACtD,YAAA,gBAAgB,EAAE,OAAO,CAAC,gBAAgB,IAAI,IAAI;SACrD,CAAA;KACJ;AAEM,IAAA,aAAa,CAAC,UAAgC,EAAA;AAEjD,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;QAE1D,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACjC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,2BAA2B,EAAE,CAAC;QAEnC,IAAI,CAAC,0BAA0B,EAAE,CAAC;KACrC;AAED,IAAA,IAAW,UAAU,GAAA;AACjB,QAAA,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;KACvD;IAEM,0BAA0B,GAAA;QAC7B,IAAI,CAAC,MAAM,EAAE,oBAAoB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;KACvD;IAEe,MAAM,GAAA;AAClB,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;;;;YAKf,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAE3B,IAAI,CAAC,yBAAyB,EAAE,CAAC;YACjC,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,CAAC,2BAA2B,EAAE,CAAC;YAEnC,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAE5B,IAAI,CAAC,QAAQ,EAAE,CAAC;SACnB;KACJ;IAEM,yBAAyB,GAAA;AAC5B,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAC;AACxE,YAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAC;SACxE;KACJ;IAEM,oBAAoB,GAAA;AACvB,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,0BAA0B,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAC;SACxF;KACJ;IAEM,sBAAsB,GAAA;AACzB,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC;SAC/D;KACJ;IAEM,2BAA2B,GAAA;AAC9B,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;AAE9B,YAAA,IAAI,IAAI,CAAC,iBAAiB,EAAE,UAAU,EAAE,EAAE;AACtC,gBAAA,CAAC,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;aACjC;AAED,YAAA,IAAI,IAAI,CAAC,oBAAoB,EAAE,UAAU,EAAE,EAAE;AACzC,gBAAA,CAAC,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;aACpC;SACJ;KACJ;IAEe,UAAU,GAAA;QACtB,KAAK,CAAC,UAAU,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;KAC5E;IAEe,YAAY,GAAA;QACxB,KAAK,CAAC,YAAY,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;KACvE;IAES,mBAAmB,GAAA;AAEzB,QAAA,IAAI,KAAK,GAAG,IAAI,EACZ,MAAM,GAAG,IAAI,CAAC;QAElB,IAAI,CAAC,oBAAoB,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,QAAS,CAAC,OAAO,EAAE;AAChE,YAAA,KAAK,EAAE,KAAK;AACZ,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,QAAQ,EAAE,KAAK;AACf,YAAA,MAAM,EAAE,QAAQ;AAChB,YAAA,IAAI,EAAE,OAAO;AACb,YAAA,cAAc,EAAE,SAAS;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,CAAC;QAEjC,IAAI,CAAC,iBAAiB,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,QAAS,CAAC,OAAO,EAAE;AAC7D,YAAA,KAAK,EAAE,KAAK;AACZ,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,QAAQ,EAAE,KAAK;AACf,YAAA,MAAM,EAAE,QAAQ;AAChB,YAAA,IAAI,EAAE,OAAO;AACb,YAAA,cAAc,EAAE,SAAS;AAC5B,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;KACjC;IAES,qBAAqB,GAAA;QAC3B,IAAI,CAAC,IAAI,CAAC,QAAQ;YAAE,OAAO;AAE3B,QAAA,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC;AAE7D,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;AAC9B,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;;;;AAKf,QAAA,IAAI,IAAI,CAAC,oBAAoB,EAAE;AAC3B,YAAA,IAAI,CAAC,oBAAoB,CAAC,QAAQ,EAAE,CAAC;AAErC,YAAA,IAAI,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC;AACjC,YAAA,IAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC;AAChC,YAAA,IAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC9B,CAAC,CAAC,QAAQ,EAAE,CAAC;YAEb,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YAClC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC;YAEpD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC;YAEpG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,cAAe,CAAC,CAAC;YAChD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACxF,YAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,EAAE,cAAe,CAAC,QAAQ,CAAC,CAAC;AAE9D,YAAA,IAAI,CAAC,oBAAoB,CAAC,UAAU,EAAE,CAAC;SAC1C;;;;QAKD,IAAI,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,oBAAoB,EAAE;AACrD,YAAA,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;AAElC,YAAA,IAAI,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC;AAC9B,YAAA,IAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC;AAChC,YAAA,IAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC9B,CAAC,CAAC,QAAQ,EAAE,CAAC;YAEb,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YAClC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC;YAEpD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC;AAE9F,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAC9B,YAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YACrE,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC;YAE1C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,cAAe,CAAC,CAAC;YAChD,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,cAAe,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACxF,YAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,EAAE,cAAe,CAAC,QAAQ,CAAC,CAAC;AAE9D,YAAA,IAAI,CAAC,iBAAiB,CAAC,UAAU,EAAE,CAAC;SACvC;KACJ;IAEM,kBAAkB,GAAA;QACrB,IAAI,CAAC,qBAAqB,EAAE,CAAC;KAChC;IAES,eAAe,GAAA;AACrB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC;QAC/B,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,oBAAoB,EACpC,CAAC,GAAG,EAAE,CAAC,QAAQ,EACf,GAAG,GAAG,CAAC,CAAC,QAAQ,EAChB,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AACf,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACvB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;AAE9B,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;QAE1B,EAAE,CAAC,QAAQ,EAAE,CAAC;QACd,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,yBAA0B,CAAC,CAAC;QAC7D,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAC9B,QAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,oBAAqB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACtE,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC;AAE1C,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAC9B,QAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,iBAAkB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACnE,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;AAEvC,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;AAEhE,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,MAAO,CAAC,MAAM,CAAC;QACjC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,gBAAiB,CAAC,KAAK,EAAE,CAAC,CAAC,gBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC;AACxF,QAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC;QAC1C,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAExC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvC,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;KAC5B;AACJ,CAAA;AAED,SAAS,0BAA0B,CAAC,WAAkC,EAAA;AAClE,IAAA,OAAO,IAAI,OAAO,CAAC,sBAAsB,EAAE;AACvC,QAAA,QAAQ,EAAE;AACN,YAAA,WAAW,EAAE,MAAM;AACnB,YAAA,GAAG,EAAE,OAAO;AACZ,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,UAAU,EAAE,MAAM;AAClB,YAAA,oBAAoB,EAAE,WAAW;AACjC,YAAA,iBAAiB,EAAE,WAAW;AAC9B,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,OAAO,EAAE,OAAO;AACnB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,OAAO,EAAE,MAAM;AAClB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;AAKE,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;cAGE,MAAM,CAAC,WAAW,CAAC,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0LnB,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;AC3dA;;;;AAIG;AACI,MAAM,KAAK,GAAG;AACjB,IAAA,OAAO,EAAE,SAAS;AAClB,IAAA,IAAI,EAAE,IAAI;AACV,IAAA,MAAM,EAAE,GAAG;AACX,IAAA,UAAU,EAAE,IAAI;CACnB,CAAC;AAYF,IAAI,QAAQ,GAAG,CAAC,CAAC;AAEjB,MAAM,IAAI,CAAA;AAgBN,IAAA,WAAA,CAAY,OAAoB,EAAA;AAC5B,QAAA,IAAI,CAAC,EAAE,GAAG,QAAQ,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;KAC9B;AAED;;;;;AAKG;AACI,IAAA,KAAK,CAAC,IAAU,EAAA;AACnB,QAAA,OAAO,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC;KAC9B;AACJ;;AC5DD;;AAEG;AAIH;;;AAGG;AACI,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,CAAC;;ACN5E,MAAM,KAAK,CAAA;AAMP,IAAA,WAAA,CAAY,OAAgB,EAAA;AACxB,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,QAAA,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AACjB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AACnE,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;KACtE;IAEM,KAAK,GAAA;;AAER,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;;AAEnB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;;AAE1B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;KAC/B;IAEM,MAAM,CAAC,KAAY,EAAE,QAAkB,EAAA;AAC1C,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;AAE3B,QAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAExB,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,aAAa,CAAC;AAE9C,QAAA,IAAI,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;QAEf,IAAI,GAAG,GAAG,KAAK,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACxC,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAChC,QAAA,IAAI,CAAC,aAAa,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACpC,QAAA,IAAI,CAAC,aAAa,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACpC,QAAA,IAAI,CAAC,aAAa,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;;;;;;KAQvC;AACJ;;ACvBD;SAEgB,gBAAgB,CAAC,UAAkB,EAAE,QAAgB,EAAE,SAAiB,EAAA;AACpF,IAAA,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,UAAU,CAAC,GAAG,QAAQ,CAAC,CAAC;AACnE,CAAC;AAEK,SAAU,iBAAiB,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,WAAmB,EAAA;IAClF,IAAI,EAAE,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAExB,IAAA,IAAI,UAAU,GAAG,WAAW,CAAC,QAAQ,EAAE,EACnC,WAAW,GAAG,WAAW,CAAC,SAAS,EAAE,CAAC;IAE1C,IAAI,CAAC,GAAG,UAAU,GAAG,EAAE,EACnB,CAAC,GAAG,WAAW,GAAG,EAAE,CAAC;IAEzB,IAAI,MAAM,GAAG,WAAW,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,EAC1C,MAAM,GAAG,WAAW,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;IAE/C,OAAO,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,EAAE,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;AACtF,CAAC;AAEM,MAAM,gBAAgB,GAAG,CAAC,CAAC;AAC3B,MAAM,eAAe,GAAG,EAAE,CAAC;AAC3B,MAAM,eAAe,GAAG,GAAG,CAAC;SAEnB,iBAAiB,CAAC,GAAW,EAAE,SAAiB,OAAO,EAAA;AACnE,IAAA,IAAI,GAAG,GAAG,MAAM,EAAE;AACd,QAAA,OAAO,eAAe,CAAC;KAC1B;AAAM,SAAA,IAAI,GAAG,GAAG,CAAC,MAAM,EAAE;AACtB,QAAA,OAAO,eAAe,CAAC;KAC1B;AACD,IAAA,OAAO,gBAAgB,CAAC;AAC5B,CAAC;AAED,IAAIY,WAAS,GAAG,IAAI,IAAI,EAAE,CAAC;AAC3B,IAAIC,UAAQ,GAAG,IAAI,IAAI,EAAE,CAAC;AAE1B,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,EAChB,GAAG,GAAG,IAAI,IAAI,EAAE,EAChB,GAAG,GAAG,IAAI,IAAI,EAAE,EAChB,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;AAErB,IAAI,IAAI,GAAG,IAAIkC,KAAG,EAAE,EAChB,MAAM,GAAG,IAAIA,KAAG,EAAE,CAAC;AAEvB,MAAM,EAAE,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;AACxB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACV,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACV,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACV,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAEV,MAAM,EAAE,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;AACxB,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;AACd,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AACb,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;AACd,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AAEb;;;;;;;AAOG;AACH,MAAM,OAAO,CAAA;AAwMT,IAAA,WAAA,CAAY,IAAU,EAAE,MAAc,EAAE,QAAgB,EAAE,MAAc,EAAA;AAEpE,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AAEpB,QAAA,IAAI,CAAC,UAAU,GAAG,gBAAgB,CAAC;AAEnC,QAAA,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;AAE5B,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAEjB,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QAErB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,QAAS,CAAC,OAAO,CAAC;AAExC,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;AAEtB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC;QAE/B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;AAEzC,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,MAAM,EAAE,CAAC;QAElC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;AAEzD,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;AAEtB,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAEzB,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,QAAQ,CAAC;AAEjC,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAEhB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAEhB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAEhB,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAEhB,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AAEpB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAE1B,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAE1B;;AAEG;AACH,QAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AAEpB,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AAExB,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AAEzB,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAE5B,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAE1B,QAAA,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAE9B,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAE3B,QAAA,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;AAEvB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAEzB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAE5B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,oBAAoB,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAChD,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AAClC,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AACrC,QAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;AACpC,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QAErC,IAAI,CAAC,yBAAyB,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AACrD,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AACzB,QAAA,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE1C,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAElB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAEzB,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAE3B,QAAA,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;AAE7B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAEhC,QAAA,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;AAE9B,QAAA,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;KACjC;IAEM,SAAS,GAAA;QACZ,OAAO,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,YAAY,CAAC;KAC5D;AAED;;;;;;AAMG;IACI,qBAAqB,CAAC,MAAc,EAAE,GAAS,EAAA;AAClD,QAAA,OAAO,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;KACrF;AAEM,IAAA,eAAe,CAAC,GAA0B,EAAA;QAC7C,OAAO,GAAG,CAAC,WAAW,CAAC;KAC1B;AAEM,IAAA,cAAc,CAAC,MAAc,EAAA;QAChC,OAAO,IAAI,CAAC,aAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;KACvD;AAED;;;;;;;AAOG;AACI,IAAA,eAAe,CAAC,GAAS,EAAE,qBAA6B,EAAE,GAAS,EAAA;AACtE,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC;AAE9B,QAAA,IAAI,KAAK,IAAI,KAAK,CAAC,MAAM,EAAE;AACvB,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;YACzD,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AAE/B,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAC3B,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAC3B,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAE3C,YAAA,IAAI,IAAI,GAAG,EAAE,CAAC,GAAG,EACb,IAAI,GAAG,EAAE,CAAC,GAAG,EACb,IAAI,GAAG,EAAE,CAAC,GAAG,EACb,IAAI,GAAG,EAAE,CAAC,GAAG,EACb,CAAC,GAAG,qBAAqB,CAAC,GAAG,EAC7B,CAAC,GAAG,qBAAqB,CAAC,GAAG,CAAC;YAElC,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,EACjB,GAAG,GAAG,IAAI,GAAG,IAAI,CAAC;YAEtB,IAAI,EAAE,GAAG,GAAG,GAAG,IAAI,EACf,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC;YAEpB,IAAI,EAAE,GAAG,CAAC,GAAG,IAAI,EACb,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC;YAElB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,EAC1B,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AAEtC,YAAA,IAAI,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC;AAC5C,YAAA,IAAI,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC;YAElD,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC7D,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACjE,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AAE7D,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAE7C,YAAA,IAAI,CAAC,KAAKA,KAAG,CAAC,MAAM,EAAE;AAClB,gBAAA,OAAO,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;aAC5B;AAAM,iBAAA,IAAI,CAAC,KAAKA,KAAG,CAAC,IAAI,EAAE;AACvB,gBAAA,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACtB,gBAAA,IAAI,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAC/C,gBAAA,IAAI,CAAC,KAAKA,KAAG,CAAC,MAAM,EAAE;AAClB,oBAAA,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;iBAC7B;aACJ;YAED,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AAEjE,YAAA,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AACzC,YAAA,IAAI,CAAC,KAAKA,KAAG,CAAC,MAAM,EAAE;AAClB,gBAAA,OAAO,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;aAC5B;AAAM,iBAAA,IAAI,CAAC,KAAKA,KAAG,CAAC,IAAI,EAAE;AACvB,gBAAA,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACtB,gBAAA,IAAI,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAC/C,gBAAA,IAAI,CAAC,KAAKA,KAAG,CAAC,MAAM,EAAE;AAClB,oBAAA,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;iBAC7B;aACJ;AAED,YAAA,IAAI,CAAC,KAAKA,KAAG,CAAC,IAAI,EAAE;AAChB,gBAAA,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;aAC7B;AAED,YAAA,OAAO,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;SAC5B;aAAM;YACH,OAAO,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAE,CAAC,CAAC;SACnF;KACJ;AAED;;;;;AAKG;AACI,IAAA,aAAa,CAAC,MAAc,EAAA;AAC/B,QAAA,OAAO,MAAM,CAAC,eAAe,EAAE,CAAC;KACnC;IAEM,WAAW,CAAC,eAAwB,KAAK,EAAA;QAC5C,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,OAAO,IAAI,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,OAAO,EAAE;AAC9E,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;YAE7B,IAAI,CAAC,mBAAmB,EAAE,CAAC;AAE3B,YAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBACnB,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;aAC7C;SACJ;aAAM;AACH,YAAA,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,OAAO,EAAE;gBAC9C,IAAI,CAAC,mBAAmB,EAAE,CAAC;aAC9B;iBAAM,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACrD,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,WAAW,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;aACxD;;;;SAIJ;KACJ;AAED;;;AAGG;AACI,IAAA,gBAAgB,CAAC,UAAiC,EAAA;QACrD,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAE1C,IAAI,WAAW,GAAG,IAAI,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;AACtD,YAAA,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YAE5B,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;AACzD,YAAA,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAEnC,YAAA,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,WAAW,EAAC,CAAC,CAAC;AAE1E,YAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,YAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AAClC,YAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;YAEjC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,gBAAgB,EAAE;AACxC,gBAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,gBAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;aAC/B;SACJ;KACJ;AAED;;;;;AAKG;IACI,mBAAmB,GAAA;AACtB,QAAA,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,aAAa,EAAE;YAEpE,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,gBAAgB,EAAE;AAC1C,gBAAA,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAE9B,gBAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;gBAClB,CAAC,CAAC,oBAAoB,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AAC1C,gBAAA,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC;oBACtF,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,oBAAoB,CAAC;gBAE1D,IAAI,IAAI,CAAC,MAAM,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;oBAC/C,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;iBAC7C;AAED,gBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC7B;;AAGD,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC;AAC1C,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAClD,YAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,gBAAgB,CAAC;AAEhD,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC;AACzC,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC;AACjD,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAE/C,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACpE,YAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC;AAClC,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,YAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAE9B;aAAM;YAEH,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,gBAAgB,EAAE;AAC1C,gBAAA,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAE9B,gBAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;gBAClB,CAAC,CAAC,oBAAoB,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AAC1C,gBAAA,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC;oBACtF,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,oBAAoB,CAAC;AAE1D,gBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,gBAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,gBAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,gBAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;aAC9B;SACJ;KACJ;IAES,kBAAkB,CAAC,YAAoB,EAAE,WAAiB,EAAA;AAChE,QAAA,OAAO,WAAW,IAAI,WAAW,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,IAAI,WAAW,CAAC,OAAO,CAAC,QAAQ;AACtF,YAAA,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,YAAY,CAAC,KAAK,WAAW,CAAC,uBAAuB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;KACrH;IAEM,QAAQ,GAAA;;AAGX,QAAA,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE;YACxC,OAAO;SACV;AAED,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;AAE7B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,YAAa,EACtB,KAAK,GAAG,IAAI,CAAC,gBAAiB,EAC9B,IAAI,GAAG,IAAI,CAAC,eAAgB,CAAC;QAEjC,IAAI,EAAE,GAAG,IAAI,CAAC,QAAQ,EAClB,KAAK,GAAG,EAAE,GAAG,CAAC,CAAC;QAEnB,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjB,IAAI,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AAE/B,YAAA,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;AAEpE,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAE5D,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,YAAa,EAC5B,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,gBAAiB,EACpC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,eAAgB,CAAC;AAEvC,YAAA,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,EACzB,OAAO,GAAG,IAAI,GAAG,CAAC,CAAC;AAEvB,YAAA,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAEzD,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EACnC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,EACrC,QAAQ,GAAG,MAAM,GAAG,IAAI,CAAC;YAE7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,QAAQ,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,GAAG,EAAE,EAAE,IAAI,KAAK,EAAE;AAC7D,gBAAA,MAAM,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;gBACpB,MAAM,OAAO,GAAG,CAAC,OAAO,GAAG,IAAI,GAAG,EAAE,IAAI,CAAC,CAAC;gBAE1C,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC;AACvB,gBAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AAC/B,gBAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAE/B,KAAK,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;AAC/B,gBAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AACvC,gBAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAEvC,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC;AAC7B,gBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AACrC,gBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;aACxC;SACJ;QAED,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,IAAI,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AAE/B,YAAA,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;AAEpE,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAE5D,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,YAAa,EAC5B,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,gBAAiB,EACpC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,eAAgB,CAAC;AAEvC,YAAA,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,EACzB,OAAO,GAAG,IAAI,GAAG,CAAC,CAAC;AAEvB,YAAA,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAEzD,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EACnC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,EACrC,QAAQ,GAAG,MAAM,GAAG,IAAI,CAAC;YAE7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,QAAQ,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,GAAG,EAAE,EAAE,IAAI,KAAK,EAAE;gBAC7D,MAAM,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACnC,gBAAA,MAAM,OAAO,GAAG,OAAO,GAAG,EAAE,GAAG,CAAC,CAAC;gBAEjC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC;AACvB,gBAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AAC/B,gBAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAE/B,KAAK,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;AAC/B,gBAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AACvC,gBAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAEvC,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC;AAC7B,gBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AACrC,gBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;aACxC;SACJ;QAED,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,IAAI,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AAE/B,YAAA,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;AAEpE,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAE5D,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,YAAa,EAC5B,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,gBAAiB,EACpC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,eAAgB,CAAC;YAEvC,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC;AAE9B,YAAA,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAEzD,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EACnC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,EACrC,QAAQ,GAAG,MAAM,GAAG,IAAI,CAAC;YAE7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,QAAQ,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,GAAG,EAAE,EAAE,IAAI,KAAK,EAAE;gBAC7D,MAAM,KAAK,GAAG,CAAC,KAAK,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;AACnC,gBAAA,MAAM,OAAO,GAAG,EAAE,GAAG,CAAC,CAAC;gBAEvB,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC;AACvB,gBAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AAC/B,gBAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAE/B,KAAK,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;AAC/B,gBAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AACvC,gBAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAEvC,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC;AAC7B,gBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AACrC,gBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;aACxC;SACJ;QAED,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,IAAI,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AAE/B,YAAA,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;AAEpE,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAE5D,IAAI,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,YAAa,EAC5B,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,gBAAiB,EACpC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,eAAgB,CAAC;AAEvC,YAAA,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,EACzB,OAAO,GAAG,IAAI,GAAG,CAAC,CAAC;AAEvB,YAAA,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAEzD,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EACnC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,EACrC,QAAQ,GAAG,MAAM,GAAG,IAAI,CAAC;YAE7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,QAAQ,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,GAAG,EAAE,EAAE,IAAI,KAAK,EAAE;AAC7D,gBAAA,MAAM,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;gBAC5B,MAAM,OAAO,GAAG,CAAC,OAAO,GAAG,EAAE,GAAG,IAAI,IAAI,CAAC,CAAC;gBAE1C,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC;AACvB,gBAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AAC/B,gBAAA,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAE/B,KAAK,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;AAC/B,gBAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AACvC,gBAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAEvC,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC;AAC7B,gBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;AACrC,gBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;aACxC;SACJ;KACJ;IAEM,MAAM,GAAA;AACT,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,QAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,gBAAiB,EAAE,IAAI,CAAC,eAAgB,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KAC1F;AAEM,IAAA,sBAAsB,CAAC,IAAwB,EAAA;AAClD,QAAA,IAAI,IAAI,CAAC,UAAU,EAAE;AACjB,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,YAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,YAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AAClC,YAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AAEjC,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,YAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAE5B,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;AAC9C,YAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAChD,YAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,qBAAqB,CAAC;AACxD,YAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,CAAC;AAEtD,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;AAC5C,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC;AACpD,YAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAElD,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;AAE1C,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC;AACzC,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC;AACjD,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAE/C,YAAA,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAEvC,YAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEhE,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;AAClB,YAAA,CAAC,CAAC,oBAAoB,GAAG,CAAC,CAAC,MAAM,CAAC;AAClC,YAAA,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC;gBACtF,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,oBAAoB,CAAC;AAE1D,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,YAAA,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAC9B,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,YAAA,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;AAC3B,gBAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;gBAC1C,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,MAAM,CAAC,QAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;aACxG;AAED,YAAA,IAAI,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE;gBAC1B,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;aAC7C;SACJ;KACJ;AAEM,IAAA,sBAAsB,CAAC,IAAY,EAAA;AACtC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;AAC7B,QAAA,IAAI,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC;QACnB,IAAI,CAAC,GAAqB,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;QACxC,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,OAAO,CAAC;AAExC,QAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,EAAE;AACxB,YAAA,IAAI,GAAG,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE;gBACxE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;aACxC;SACJ;QAED,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,OAAO,EAClB,CAAC,GAAG,IAAI,CAAC;AAEb,QAAA,IACI,CAAC;YACD,CAAC;AACD,YAAA,CAAC,CAAC,YAAY;AACd,YAAA,CAAC,CAAC,aAAa;YACf,CAAC,CAAC,QAAQ,IAAI,IAAI;YAClB,CAAC,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,EAC9C;YACE,CAAC,CAAC,qBAAqB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;YAE3C,IAAI,KAAK,GAAG,CAAC,CAAC,gBAAgB,EAC1B,KAAK,GAAG,CAAC,CAAC,gBAAgB,CAAC;AAE/B,YAAA,IAAI,EAAE,KAAK,IAAI,KAAK,CAAC;gBAAE,OAAO;YAE9B,IAAI,SAAS,GAAG,CAAC,CAAC,gBAAiB,EAC/B,SAAS,GAAG,CAAC,CAAC,gBAAiB,CAAC;;;YAKpC,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;;AAElC,YAAA,KAAK,GAAG,IAAI,GAAG,CAAC,CAAC;;YAGrB,MAAM,GAAG,GAAG,KAAK,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC;AAE7B,YAAA,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAElB,IAAI,CAAC,CAAC,QAAQ,KAAK,CAAC,CAAC,QAAQ,EAAE;AAC3B,gBAAA,MAAM,GAAG,GAAG,KAAK,GAAG,GAAG,CAAC;AAExB,gBAAA,IAAI,EAAE,CAAC,IAAI,CAAC,EAAE;AACV,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;wBAC3B,IAAI,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,GAAG,IAAI,CAAC,EAC7B,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,GAAG,IAAI,CAAC,CAAC;wBAElC,EAAE,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;AAC3C,wBAAA,EAAE,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACnD,wBAAA,EAAE,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAEnD,wBAAA,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AAEjD,wBAAA,KAAK,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACvC,wBAAA,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC/C,wBAAA,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;qBAClD;iBACJ;qBAAM;AACH,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;wBAC3B,IAAI,MAAM,GAAG,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,EAC7B,MAAM,GAAG,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;wBAElC,EAAE,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;AAC3C,wBAAA,EAAE,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACnD,wBAAA,EAAE,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAEnD,wBAAA,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AAEjD,wBAAA,KAAK,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACvC,wBAAA,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC/C,wBAAA,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;qBAClD;iBACJ;AAED,gBAAA,IAAI,CAAC,CAAC,CAAC,WAAW,IAAI,CAAC,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE;AACxE,oBAAA,CAAC,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;oBACnD,CAAC,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;iBACvC;aACJ;SACJ;KACJ;AAEM,IAAA,YAAY,CAAC,UAAyC,EAAA;QACzD,IAAI,UAAU,EAAE;AACZ,YAAA,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;SACrC;aAAM;YACH,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC9B;KACJ;IAEM,aAAa,GAAA;AAEhB,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAE5B,QAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,kBAAmB,CAAC,CAAC;AAC1C,QAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,oBAAqB,CAAC,CAAC;AAC5C,QAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAyB,CAAC,CAAC;AAChD,QAAA,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAwB,CAAC,CAAC;AAE/C,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AACrC,QAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;AACpC,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;KACxC;IAEM,eAAe,GAAA;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACvB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/B,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACd,IAAI,EAAE,EAAE;gBACJ,EAAE,CAAC,KAAK,EAAE,CAAC;aACd;SACJ;AACD,QAAA,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;KAC7B;IAEM,gBAAgB,GAAA;AACnB,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAE9B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AAClC,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAE5B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAEzB,QAAA,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC,aAAa,CAAC,IAAI,CAAC,gBAAiB,CAAC,CAAC;AACvD,YAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;SAC/B;AAED,QAAA,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE1C,QAAA,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAEjC,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;KAC5B;IAEM,YAAY,GAAA;AACf,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AACxB,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,gBAAgB,EAAE,CAAC;KAC3B;IAEM,mBAAmB,GAAA;AACtB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;AACxB,QAAA,OAAO,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC;KACzI;IAEM,cAAc,GAAA;QAEjB,IAAI,CAAC,YAAY,EAAE,CAAC;AAEpB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QAC5B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;SAC3B;;AAGD,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;AAEpB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;AAEjB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;;AAEnB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;AAEpB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;AAEjB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;AAEpB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;AAEpB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAEzB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;;AAG5B,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AAClC,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;AACrC,QAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;AACpC,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;;AAGrC,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;;AAExB,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;;AAElC,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC;KACzC;AAED;;AAEG;IACI,gBAAgB,GAAA;QACnB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;KACvD;IAES,oBAAoB,GAAA;AAC1B,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;AACxC,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC;AAElC,QAAA,MAAM,QAAQ,GAAG,SAAS,CAAC,mBAAmB,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC3F,QAAA,MAAM,QAAQ,GAAG,SAAS,CAAC,mBAAmB,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAE3F,QAAA,MAAM,QAAQ,GAAG,SAAS,CAAC,mBAAmB,CAC1C,MAAM,CAAC,SAAS,CAAC,GAAG,EACpB,MAAM,CAAC,SAAS,CAAC,GAAG,CACvB,CAAC;AAEF,QAAA,MAAM,QAAQ,GAAG,SAAS,CAAC,mBAAmB,CAC1C,MAAM,CAAC,SAAS,CAAC,GAAG,EACpB,MAAM,CAAC,SAAS,CAAC,GAAG,CACvB,CAAC;AAEF,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KAC3B;IAEM,oBAAoB,GAAA;QACvB,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;KAChD;IAEM,oBAAoB,GAAA;AACvB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;QAEnB,OAAO,EAAE,CAAC,UAAU,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,YAAY,EAAE;AAC9C,YAAA,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;SACtB;AAED,QAAA,IAAI,GAAG,GAAG,CAAC,KAAK,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAErD,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,EAC7C,OAAO,GAAG,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,CAAC;QAElD,IAAI,EAAE,CAAC,OAAO,CAAC,YAAY,IAAI,EAAE,CAAC,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,OAAO,EAAE;YAChF,IAAI,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC;AAEzC,YAAA,IAAI,QAAQ,IAAI,GAAG,EAAE;;;;AAIjB,gBAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACpD,gBAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACpD,gBAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACpD,gBAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;AAEhD,gBAAA,IAAI,EAAE,GAAG,QAAQ,GAAG,OAAO,CAAC;AAC5B,gBAAA,IAAI,EAAE,GAAG,QAAQ,GAAG,OAAO,CAAC;gBAE5B,IAAI,OAAO,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAEtC,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,QAAQ,IAAI,OAAO,GAAG,EAAE,CAAC,EAC7C,MAAM,GAAG,CAAC,IAAI,EAAE,GAAG,OAAO,GAAG,EAAE,CAAC,EAChC,MAAM,GAAG,CAAC,IAAI,EAAE,GAAG,OAAO,GAAG,EAAE,GAAG,QAAQ,CAAC,EAC3C,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,QAAQ,IAAI,OAAO,GAAG,EAAE,GAAG,QAAQ,CAAC,CAAC;AAE7D,gBAAA,IAAI,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,YAAa,CAAC;gBAEtC,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EACvE,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;;gBAG5E,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EACvE,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AAE5E,gBAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpB,gBAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpB,gBAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpB,gBAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAEvB;iBAAM;AACH,gBAAA,IAAI,IAAI,GAAG,EAAE,CAAC,OAAO,CAAC;gBAEtB,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC,EACnC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC,CAAC;AAExC,gBAAA,IAAI,UAAU,GAAG,GAAG,GAAG,QAAQ,CAAC;AAEhC,gBAAA,IAAI,IAAI,GAAG,OAAO,GAAG,UAAU,GAAG,EAAE,EAChC,IAAI,GAAG,OAAO,GAAG,UAAU,GAAG,EAAE,CAAC;AAErC,gBAAA,IAAI,MAAM,CAAC;AACX,gBAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,EAAE;AACrB,oBAAA,MAAM,GAAG,IAAI,CAAC,YAAa,CAAC;iBAC/B;qBAAM;AACH,oBAAA,MAAM,GAAG,mBAAmB,CAAC,IAAI,CAAC,YAAa,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;iBAC9E;AAED,gBAAA,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAChD,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvD,gBAAA,IAAI,EAAE,GAAG,IAAI,IAAI,CACT,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EACrB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EACrB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CACxB,EACD,EAAE,GAAG,IAAI,IAAI,CACT,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EACrB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EACrB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CACxB,EACD,EAAE,GAAG,IAAI,IAAI,CACT,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EACrB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,EACtB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,CACzB,EACD,EAAE,GAAG,IAAI,IAAI,CACT,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EACrB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,EACtB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,CACzB,CAAC;AAEN,gBAAA,IAAI,IAAI,GAAG,IAAI,EACX,IAAI,GAAG,IAAI,CAAC;gBAEhB,IAAI,SAAS,EAAE,SAAS,CAAC;AAEzB,gBAAA,IAAI,IAAI,GAAG,IAAI,GAAG,UAAU,EAAE;AAC1B,oBAAA,SAAS,GAAG,IAAI,CAAC,GAAG,CAChB,EAAE,CAAC,OAAO,CAAC,IAAI,GAAG,UAAU,CAAC,EAC7B,EAAE,CAAC,OAAO,CAAC,IAAI,GAAG,UAAU,CAAC,CAChC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChB;qBAAM;AACH,oBAAA,SAAS,GAAG,IAAI,CAAC,GAAG,CAChB,EAAE,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,GAAG,UAAU,CAAC,EACjC,EAAE,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,GAAG,UAAU,CAAC,CACpC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChB;AAED,gBAAA,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC;AAChB,gBAAA,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC;AAEhB,gBAAA,IAAI,IAAI,GAAG,IAAI,GAAG,UAAU,EAAE;AAC1B,oBAAA,SAAS,GAAG,IAAI,CAAC,GAAG,CAChB,EAAE,CAAC,OAAO,CAAC,IAAI,GAAG,UAAU,CAAC,EAC7B,EAAE,CAAC,OAAO,CAAC,IAAI,GAAG,UAAU,CAAC,CAChC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChB;qBAAM;AACH,oBAAA,SAAS,GAAG,IAAI,CAAC,GAAG,CAChB,EAAE,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,GAAG,UAAU,CAAC,EACjC,EAAE,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,GAAG,UAAU,CAAC,CACpC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChB;gBAED,IAAI,CAAC,oBAAoB,EAAE,CAAC;AAC5B,gBAAA,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;aAClD;SACJ;aAAM;YACH,IAAI,CAAC,oBAAoB,EAAE,CAAC;SAC/B;KACJ;AAEM,IAAA,iBAAiB,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,CAAO,EAAA;QAC7D,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;AAC1B,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;KACzD;IAEM,iBAAiB,CAAC,IAAY,EAAE,IAAY,EAAE,IAAY,EAAE,IAAY,EAAE,IAAY,EAAE,IAAY,EAAA;AACvG,QAAA,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;AAEjE,QAAA,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,GAAG,EAC9B,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,GAAG,EAC9B,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,GAAG,CAAC;AAEnC,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;KAClF;IAEM,mBAAmB,CAAC,IAAU,EAAE,IAAU,EAAA;AAC7C,QAAA,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QAE7E,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,GAAG,EACpC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,GAAG,EACpC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC;AAEzC,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KACxF;AAEM,IAAA,oBAAoB,CAAC,MAAoB,EAAA;AAC5C,QAAA,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;AAEnC,QAAA,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,EAC7C,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,EAC7C,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC;AAElD,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAC9C,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAC5C,CAAC;KACL;AAEM,IAAA,mBAAmB,CAAC,YAA0B,EAAE,WAAyB,EAAE,QAAgB,EAAA;AAC9F,QAAA,MAAM,IAAI,GAAG,CAAC,QAAQ,GAAG,CAAC,KAAK,QAAQ,GAAG,CAAC,CAAC,CAAC;AAC7C,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AAEvB,QAAA,IAAI,IAAI,CAAC,wBAAwB,IAAI,IAAI,CAAC,wBAAwB,CAAC,QAAQ,KAAK,IAAI,EAAE;YAClF,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,wBAAyB,EAAE,YAAY,CAAC,CAAC;YACrE,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,uBAAwB,EAAE,WAAW,CAAC,CAAC;SACtE;aAAM;YACH,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAyB,CAAC,CAAC;YACnD,CAAC,CAAC,EAAG,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAwB,CAAC,CAAC;AAElD,YAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,MAAM,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;;;;;;;AAS3F,YAAA,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;AAC3E,YAAA,IAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;SAC5E;KACJ;IAEM,cAAc,GAAA;AACjB,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC;AAE/B,QAAA,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;AAEtC,QAAA,IAAI,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE;YAC3C,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;SAC7C;AAED,QAAA,IAAI,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE;YAC3C,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;SAC7C;AAED,QAAA,IAAI,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE;YAC3C,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;SAC7C;AAED,QAAA,IAAI,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE;YAC3C,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;SAC7C;KACJ;IAES,kBAAkB,GAAA;AAExB,QAAA,IAAI,CAAC,UAAU,GAAG,gBAAgB,CAAC;AAEnC,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC/B,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;AAC5B,QAAA,MAAM,IAAI,GAAGa,IAAa,CAAC;;;QAI3B,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,GAAG,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;AAChF,QAAA,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,CAAC;AAEhF,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AAE5B,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC;QAEzC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAE7B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KAC1F;IAEM,UAAU,GAAA;AACb,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;AACtB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,OAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAQ,CAAC,aAAa,CAAC;AAErF,QAAA,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEzG,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,OAAQ,CAAC,OAAO,EAAE;AACrC,YAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC;AAC1C,YAAA,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,QAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;SAC9F;QAED,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC;QAEvD,IAAI,CAAC,+BAA+B,EAAE,CAAC;AAEvC,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;KAC3B;IAES,+BAA+B,GAAA;AACrC,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACvB,QAAA,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;AAC7B,YAAA,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,GAAGA,IAAa,IAAIC,kBAA2B,CAAC;AACpE,QAAA,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;AAC7B,YAAA,CAACD,IAAa,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,IAAIC,kBAA2B,CAAC;AACpE,QAAA,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;AAC7B,YAAA,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,GAAGD,IAAa,IAAIC,kBAA2B,CAAC;AACpE,QAAA,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;AAC7B,YAAA,CAACD,IAAa,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,IAAIC,kBAA2B,CAAC;KACvE;IAEM,uBAAuB,GAAA;QAC1B,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,EACf,CAAC,GAAG,CAAC,CAAC,OAAQ,CAAC;AAEnB,QAAA,IAAI,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,OAAO,EAAE;AAC/D,YAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,YAAA,CAAC,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACpC;KACJ;AAEM,IAAA,2BAA2B,CAAC,IAA6B,EAAA;AAC5D,QAAA,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAE7B,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AACxC,YAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AAEvB,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;AACxC,YAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAChD,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;AAC9C,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;AACtC,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC;AAErC,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;AAC9C,YAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAChD,YAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,qBAAqB,CAAC;AACxD,YAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,CAAC;;;;AAMtD,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;SACzE;KACJ;IAEM,kBAAkB,GAAA;QACrB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,oBAAoB,EAAE,CAAC;AAC5B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;KAC7B;IAES,UAAU,CAAC,GAAW,EAAE,GAAW,EAAA;QACzC,OAAO,MAAM,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;KAC3C;IAES,oBAAoB,GAAA;AAC1B,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpE,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,aAAa,CAAC;QAC/C,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;AAC7C,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACvB,QAAA,MAAM,OAAO,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;AAC7B,QAAA,MAAM,OAAO,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC;AAC9B,QAAA,MAAM,MAAM,GAAG,OAAO,GAAG,YAAY,CAAC;AACtC,QAAA,MAAM,MAAM,GAAG,OAAO,GAAG,YAAY,CAAC;AACtC,QAAA,MAAM,OAAO,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;AAChC,QAAA,MAAM,OAAO,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC;AAChC,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,QAAQ,EAAE,CAAC,CAAC,CAAC;AACvC,QAAA,MAAM,EAAE,GAAG,YAAY,GAAG,CAAC,CAAC;QAC5B,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC;AAC5C,QAAA,MAAM,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC;AACrB,QAAA,MAAM,SAAS,GAAG,CAAC,QAAQ,GAAG,CAAC,KAAK,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAEtD,QAAA,IAAI,GAAG,GAAG,CAAC,EACP,KAAK,GAAG,CAAC,CAAC;QAEd,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,SAAS,CAAC,CAAC;QAChD,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,SAAS,CAAC,CAAC;QACjD,IAAI,CAAC,iBAAiB,GAAG,IAAI,YAAY,CAAC,SAAS,CAAC,CAAC;QACrD,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,SAAS,CAAC,CAAC;QAEpD,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,iBAAiB,GAAG,IAAI,YAAY,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;QACpD,IAAI,CAAC,qBAAqB,GAAG,IAAI,YAAY,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;QACxD,IAAI,CAAC,oBAAoB,GAAG,IAAI,YAAY,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;QAEvD,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,EAC1B,SAAS,GAAG,IAAI,CAAC,iBAAiB,EAClC,QAAQ,GAAG,IAAI,CAAC,gBAAgB,EAChC,KAAK,GAAG,IAAI,CAAC,YAAY,EACzB,OAAO,GAAG,IAAI,CAAC,iBAAiB,EAChC,WAAW,GAAG,IAAI,CAAC,qBAAqB,EACxC,UAAU,GAAG,IAAI,CAAC,oBAAoB,EACtC,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC;AAEpC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;AAC3B,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,EACV,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;YAEnB,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAC3C,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,GAAG,MAAM,EAAE,OAAO,GAAG,CAAC,GAAG,MAAM,CAAC,CAC9D,CAAC;AAEF,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EACf,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EACf,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAEpB,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AAErD,YAAA,IAAI,GAAG,GAAG,EAAE,GAAG,CAAC,EACZ,GAAG,GAAG,EAAE,GAAG,CAAC,EACZ,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC;YAEjB,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAEjD,WAAS,EAAEC,UAAQ,CAAC,CAAC;AAE/C,YAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACrB,YAAA,WAAW,CAAC,KAAK,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;AACjC,YAAA,UAAU,CAAC,KAAK,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;AAC/B,YAAA,OAAO,CAAC,KAAK,EAAE,CAAC,GAAG,GAAG,CAAC;AAEvB,YAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACrB,YAAA,WAAW,CAAC,KAAK,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;AACjC,YAAA,UAAU,CAAC,KAAK,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;AAC/B,YAAA,OAAO,CAAC,KAAK,EAAE,CAAC,GAAG,GAAG,CAAC;AAEvB,YAAA,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACrB,YAAA,WAAW,CAAC,KAAK,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;AACjC,YAAA,UAAU,CAAC,KAAK,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;AAC/B,YAAA,OAAO,CAAC,KAAK,EAAE,CAAC,GAAG,GAAG,CAAC;AAEvB,YAAA,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE;AAC9B,gBAAA,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACjB,gBAAA,SAAS,CAAC,GAAG,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;AAC7B,gBAAA,QAAQ,CAAC,GAAG,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;AAC3B,gBAAA,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC;AAEnB,gBAAA,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACjB,gBAAA,SAAS,CAAC,GAAG,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;AAC7B,gBAAA,QAAQ,CAAC,GAAG,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;AAC3B,gBAAA,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC;AAEnB,gBAAA,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACjB,gBAAA,SAAS,CAAC,GAAG,CAAC,GAAGD,WAAS,CAAC,CAAC,CAAC;AAC7B,gBAAA,QAAQ,CAAC,GAAG,CAAC,GAAGC,UAAQ,CAAC,CAAC,CAAC;AAC3B,gBAAA,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC;aACtB;SACJ;AAED,QAAA,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;AAC7B,QAAA,IAAI,CAAC,mBAAmB,GAAG,SAAS,CAAC;AACrC,QAAA,IAAI,CAAC,kBAAkB,GAAG,QAAQ,CAAC;AAEnC,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;KAC1B;AAED;;;;;AAKG;AACI,IAAA,kBAAkB,CAAC,KAAY,EAAA;QAClC,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KACrC;AAED;;;;;;AAMG;AAEO,IAAA,qBAAqB,CAAC,KAAY,EAAA;AACxC,QAAA,MAAM,GAAG,GAAG,KAAK,CAAC,WAAW,CAAC;AAC9B,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;AACzB,QAAA,MAAM,OAAO,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;AACtD,QAAA,MAAM,OAAO,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;AACtD,QAAA,MAAM,MAAM,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;AACjE,QAAA,MAAM,MAAM,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;AACjE,QAAA,MAAM,OAAO,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;AAClE,QAAA,MAAM,OAAO,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;QAClE,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;KAC7C;AAEM,IAAA,SAAS,CAAC,UAAkB,EAAA;QAC/B,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QAErC,IAAI,CAAC,KAAK,EAAE;AACR,YAAA,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC;SACtD;aAAM;;AAEH,YAAA,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;SACrB;AAED,QAAA,OAAO,KAAK,CAAC;KAChB;AAEM,IAAA,eAAe,CAAC,EAAW,EAAE,UAAmB,EAAE,UAAkB,EAAE,cAAuC,EAAE,SAAA,GAAqB,KAAK,EAAE,aAAsB,EAAA;AACpK,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC5B,QAAA,MAAM,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC;AAC1B,QAAA,MAAM,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AAExB,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;AAC1B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;QAEtB,IAAI,UAAU,EAAE,EAAE,CAAC;AACnB,QAAA,IAAI,UAAU,IAAI,UAAU,CAAC,MAAM,EAAE;AACjC,YAAA,EAAE,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;AACnB,YAAA,UAAU,GAAG,EAAE,CAAC,OAAO,CAAC;SAC3B;aAAM;YACH,UAAU,GAAG,CAAC,CAAC;SAClB;;AAGD,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AACjD,QAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,GAAG,cAAc,IAAI,IAAI,CAAC,iBAAiB,EAAE,EAAG,CAAC;AAC7E,QAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,GAAG,CAAC,EACL,CAAC,GAAG,CAAC,CAAC;QAEV,IAAI,QAAQ,GAAG,KAAK,CAAC;QAErB,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;AAEvC,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAE3C,OAAO,EAAE,EAAE;AACP,YAAA,IACI,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC;iBACpB,CAAC,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC,cAAc,GAAG,GAAG;AACnC,qBAAC,CAAC,EAAE,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW;AACxD,yBAAC,EAAE,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EACxE;gBACE,QAAQ,GAAG,IAAI,CAAC;gBAEhB,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;gBAEpB,IAAI,CAAC,CAAC,EAAE;AACJ,oBAAA,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;iBAC7C;AAED,gBAAA,IAAI,CAAC,CAAC,CAAC,OAAO,EAAE;AACZ,oBAAA,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC;iBACxC;AAED,gBAAA,KAAK,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;AAEpB,gBAAA,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBAErB,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;AAClC,gBAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,kBAAkB,EAAG,CAAC;AAEpE,gBAAA,CAAC,EAAE,CAAC;aACP;AACD,YAAA,CAAC,EAAE,CAAC;AACJ,YAAA,EAAE,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;SACtB;AAED,QAAA,IAAI,QAAQ,IAAI,CAAC,SAAS,EAAE;YAExB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,EAAE,aAAa,IAAI,IAAI,CAAC,kBAAkB,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC;YAEpH,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;YACrC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC;;YAI7C,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC,aAAa,CAAC,CAAC;YACtD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,KAAK,CAAC,eAAe,CAAC,CAAC;;;AAI1D,YAAA,IAAI,CAAC,CAAC,YAAY,EAAE;AAChB,gBAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AACjD,gBAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,IAAI,CAAC,CAAC,kBAAkB,EAAG,CAAC;AAChF,gBAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;gBAE/C,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;;gBAG7D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,yBAAyB,CAAC,CAAC;aAC1E;YAED,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,wBAAyB,CAAC,CAAC;YAC/D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,wBAAyB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAChH,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,uBAAwB,CAAC,CAAC;YAC9D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,uBAAwB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE9G,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,wBAAyB,CAAC,CAAC;AAC/D,YAAA,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE5E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AAC1D,YAAA,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;SAC/E;KACJ;IAEM,sBAAsB,CAAC,EAAW,EAAE,UAAmB,EAAA;AAC1D,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC5B,QAAA,MAAM,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC;AAC1B,QAAA,MAAM,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;;;AAKxB,QAAA,IAAI,UAAU,CAAC;AACf,QAAA,IAAI,UAAU,IAAI,UAAU,CAAC,MAAM,EAAE;AACjC,YAAA,UAAU,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;SACtC;aAAM;YACH,UAAU,GAAG,CAAC,CAAC;SAClB;QAED,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;QAErC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,wBAAyB,CAAC,CAAC;QAC/D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,wBAAyB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEhH,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,uBAAwB,CAAC,CAAC;QAC9D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,uBAAwB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9G,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,YAAa,CAAC,CAAC;AAC3D,QAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,YAAa,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;KACvF;IAEM,yBAAyB,GAAA;;QAE5B,IAAI,CAAC,kBAAkB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,oBAAoB,IAAI,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC;QAC/G,IAAI,CAAC,oBAAoB,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;AACrD,QAAA,IAAI,IAAI,CAAC,kBAAkB,GAAG,GAAG,EAAE;AAC/B,YAAA,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;SACjC;QAED,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;QACtC,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;AAClC,YAAA,IAAI,CAAC,CAAC,OAAO,EAAE;gBACX,IAAI,CAAC,CAAC,OAAO,CAAC,kBAAkB,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;AAC3E,oBAAA,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;oBACxC,CAAC,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,GAAG,IAAI,CAAC,kBAAkB,CAAC;oBAC7D,IAAI,CAAC,CAAC,OAAO,CAAC,kBAAkB,KAAK,CAAC,EAAE;wBACpC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;qBACvC;iBACJ;aACJ;iBAAM;AACH,gBAAA,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;gBAC9B,MAAM;aACT;SACJ;KACJ;IAEM,uBAAuB,GAAA;AAC1B,QAAA,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC;;QAEhC,IAAI,CAAC,oBAAoB,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;AACrD,QAAA,IAAI,IAAI,CAAC,kBAAkB,GAAG,GAAG,EAAE;AAC/B,YAAA,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;SAC/B;KACJ;IAEM,qBAAqB,CAAC,EAAW,EAAE,UAAmB,EAAE,UAAkB,EAAE,cAAuC,EAAE,SAAA,GAAqB,KAAK,EAAA;AAClJ,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC5B,QAAA,MAAM,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC;AAC1B,QAAA,MAAM,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;QAExB,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,EACnB,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;AAEpB,QAAA,IAAI,UAAU,CAAC;AACf,QAAA,IAAI,UAAU,IAAI,UAAU,CAAC,MAAM,EAAE;AACjC,YAAA,UAAU,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;SACtC;aAAM;YACH,UAAU,GAAG,CAAC,CAAC;SAClB;QAED,IAAI,QAAQ,GAAG,KAAK,CAAC;QAErB,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;AAErC,QAAA,IAAI,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC;AAE9B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1B,QAAQ,GAAG,IAAI,CAAC;YAEhB,IAAI,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AACzB,YAAA,IAAI,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;AAEf,YAAA,CAAC,CAAC,gBAAgB,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,GAAG,KAAK,CAAC;AACpD,YAAA,CAAC,CAAC,gBAAgB,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,GAAG,KAAK,CAAC;AACxD,YAAA,CAAC,CAAC,gBAAgB,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,GAAG,KAAK,CAAC;AACxD,YAAA,CAAC,CAAC,gBAAgB,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC;AAExD,YAAA,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YACrB,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAG,CAAC;YAExF,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC;AACxC,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,CAAC;YACjD,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAG,CAAC;SAC/F;AAED,QAAA,IAAI,QAAQ,IAAI,CAAC,SAAS,EAAE;YACxB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;YACpC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;YACrC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC;YAC7C,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,eAAe,CAAC,CAAC;YACrD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC;;YAIvD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC,aAAa,CAAC,CAAC;YACtD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,KAAK,CAAC,eAAe,CAAC,CAAC;;YAG1D,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,wBAAyB,CAAC,CAAC;YAC/D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,wBAAyB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAChH,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,uBAAwB,CAAC,CAAC;YAC9D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,uBAAwB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE9G,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,wBAAyB,CAAC,CAAC;AAC/D,YAAA,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE5E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,YAAa,CAAC,CAAC;AAC3D,YAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,YAAa,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;SACvF;KACJ;IAEM,cAAc,CAAC,EAAW,EAAE,UAAmB,EAAA;AAClD,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC5B,QAAA,MAAM,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC;AAC1B,QAAA,MAAM,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AAExB,QAAA,IAAI,UAAU,CAAC;AACf,QAAA,IAAI,UAAU,IAAI,UAAU,CAAC,MAAM,EAAE;AACjC,YAAA,UAAU,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;SACtC;aAAM;YACH,UAAU,GAAG,CAAC,CAAC;SAClB;QAED,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;QAErC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,wBAAyB,CAAC,CAAC;QAC/D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,wBAAyB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEhH,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,uBAAwB,CAAC,CAAC;QAC9D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,uBAAwB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9G,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,YAAa,CAAC,CAAC;AAC3D,QAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,YAAa,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;KACvF;IAES,eAAe,GAAA;AACrB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;AACjC,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxF,QAAA,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;AACf,YAAA,IAAI,OAAO,GAAGiD,WAAyB,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnH,YAAA,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAS,CAAC,OAAO,CAAC,wBAAwB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AAClF,YAAA,IAAI,CAAC,MAAM,CAAC,4BAA4B,EAAE,CAAC;SAC9C;QACD,OAAO,KAAK,CAAC,MAAM,CAAC;KACvB;AAEM,IAAA,YAAY,CAAC,KAAY,EAAA;QAC5B,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;KACnD;IAEM,iBAAiB,GAAA;AACpB,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC;KACtC;IAEM,eAAe,GAAA;QAClB,OAAO,IAAI,CAAC,aAAa,CAAC;KAC7B;IAEM,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;IAEM,SAAS,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAEM,IAAA,eAAe,CAAC,CAAU,EAAA;QAC7B,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,KAAK,EAAE;YACxB,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,MAAM,EAAE;AACzB,gBAAA,OAAO,CAAC,CAAC;aACZ;iBAAM,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,MAAM,EAAE;AAChC,gBAAA,OAAO,CAAC,CAAC;aACZ;SACJ;aAAM,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,KAAK,EAAE;YAC/B,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,MAAM,EAAE;AACzB,gBAAA,OAAO,CAAC,CAAC;aACZ;iBAAM,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,MAAM,EAAE;AAChC,gBAAA,OAAO,CAAC,CAAC;aACZ;SACJ;QACD,OAAO,CAAC,CAAC,CAAC;KACb;AACJ;;ACn1DD,IAAI,SAAS,GAAG,IAAI,IAAI,EAAE,EACtB,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC;AAE1B,MAAM,UAAU,GAAW;AACvB,IAAA,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;AAC9B,IAAA,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;CACjC,CAAC;AAEF,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAOrD,IAAI,MAAM,GAAe;IACrB,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;IAC/B,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;CAClC,CAAC;AAEF,IAAI,eAAe,GAAG,CAAC,CAAC;AAExB;;;;;;;;;;AAUG;aACH,MAAM,IAAI,CAAA;IAoBN,WACI,CAAA,gBAAgC,EAChC,MAAc,EACd,MAAc,EACd,MAAmB,EACnB,QAAgB,EAChB,MAAc,EAAA;QAEd,MAAM,CAAC,kBAAkB,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,IAAI,GAAG,eAAe,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;AACzC,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAA,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;AACzB,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5D,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC,CAAC;AAC/B,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QAClC,IAAI,CAAC,uBAAuB,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;;AAEpF,QAAA,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;AAChB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,gBAAgB,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;AACpE,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AACnB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,YAAY,EAAE,CAAC;KACvB;IAEM,mBAAmB,GAAA;AACtB,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;AACtB,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;AACxB,QAAA,MAAM,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC;AACvB,QAAA,MAAM,CAAC,GAAG,EAAE,CAAC,QAAQ,GAAG,CAAC,CAAC;QAC1B,MAAM,MAAM,GAAG,GAAG,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC;QACpC,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE,GAAG,GAAG,CAAC;AACrC,QAAA,MAAM,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;AACzB,QAAA,MAAM,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;AACzB,QAAA,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC;AACvD,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAEtB,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/I,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACpG,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACpG,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;KAClJ;IAEM,YAAY,GAAA;AAEf,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;QAEvB,GAAG,CAAC,gBAAgB,EAAE,CAAC;AAEvB,QAAA,IAAI,GAAG,CAAC,QAAQ,KAAK,CAAC,EAAE;YACpB,GAAG,CAAC,iBAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC;SACjG;AAAM,aAAA,IAAI,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,OAAQ,CAAC,OAAO,EAAE;YACnD,GAAG,CAAC,oBAAoB,EAAE,CAAC;SAC9B;aAAM;YACH,GAAG,CAAC,oBAAoB,EAAE,CAAC;SAC9B;AAED,QAAA,IAAI,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EACxB,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EACxB,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;QAE7B,IAAI,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QACpD,GAAG,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;QAChC,GAAG,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;QAChC,GAAG,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;KACnC;IAEM,QAAQ,GAAA;AACX,QAAA,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,EAAE;YACnB,OAAO,IAAI,CAAC,KAAK,CAAC;SACrB;AACD,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;QACzB,OAAO,EAAE,EAAE;AACP,YAAA,IAAI,EAAE,CAAC,KAAK,KAAK,WAAW,EAAE;AAC1B,gBAAA,OAAO,YAAY,CAAC;aACvB;AACD,YAAA,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;SACtB;QACD,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;AAED;;;;;AAKG;AACI,IAAA,gBAAgB,CAAC,IAAY,EAAA;QAChC,IAAI,EAAE,GAAS,IAAI,CAAC;QACpB,IAAI,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;AACtC,QAAA,IAAI,IAAI,KAAK,CAAC,CAAC,EAAE;;YAEb,OAAO,EAAE,CAAC,UAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SACrC;aAAM;YACH,IAAI,MAAM,GAAG,EAAE,CAAC;AAChB,YAAA,OAAO,EAAE,CAAC,UAAU,EAAE;AAClB,gBAAA,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;gBACvB,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;AAClC,gBAAA,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;AACnB,gBAAA,IAAI,IAAI,KAAK,CAAC,CAAC,EAAE;AACb,oBAAA,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;AACtB,oBAAA,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;AACpB,oBAAA,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE;wBACd,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/B,wBAAA,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;qBACvB;AACD,oBAAA,OAAO,EAAE,CAAC;iBACb;aACJ;SACJ;KACJ;;;;IAMM,aAAa,CAAC,GAAiB,EAAE,OAAuB,EAAE,mBAAoC,EAAE,WAAqB,EAAE,YAAmB,EAAA;AAC7I,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACb,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC9B;AAED,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;AAEnB,QAAA,CAAC,CAAC,CAAC,CAAE,CAAC,UAAU,CAAC,GAAG,EAAE,OAAO,EAAE,mBAAmB,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;AAC/E,QAAA,CAAC,CAAC,CAAC,CAAE,CAAC,UAAU,CAAC,GAAG,EAAE,OAAO,EAAE,mBAAmB,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;AAC/E,QAAA,CAAC,CAAC,CAAC,CAAE,CAAC,UAAU,CAAC,GAAG,EAAE,OAAO,EAAE,mBAAmB,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;AAC/E,QAAA,CAAC,CAAC,CAAC,CAAE,CAAC,UAAU,CAAC,GAAG,EAAE,OAAO,EAAE,mBAAmB,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;KAClF;IAEM,UAAU,CAAC,GAAiB,EAAE,OAAuB,EAAE,mBAAoC,EAAE,WAAqB,EAAE,YAAmB,EAAA;QAC1I,IAAI,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,IAAI,kBAAkB,EAAE;YACzD,OAAO;SACV;AAED,QAAA,IAAI,CAAC,OAAO,IAAI,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE;AACnF,YAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;SAC/B;AACD,QAAA,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC;QAEzB,IAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,EAClB,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AAEzB,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;;QAG3B,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE;AACnD,YAAA,IAAI,MAAM,CAAC;YACX,iDAAgD,GAAG,CAAC,WAAW,CAAC,EAAE,KAAK,QAAQ,CAAC,EAAE,EAAE;gBAChF,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;aAClD;AAAM,6DAA4C;gBAC/C,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;aAC9C;YAED,IAAI,MAAM,EAAE;AACR,gBAAA,GAAG,CAAC,cAAc,GAAG,GAAG,CAAC;AACzB,gBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC7B;SACJ;AAED,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QAEnB,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,EAAE,WAAW,GAAG,QAAQ,CAAC,MAAM,CAAC;AAE3D,QAAA,IAAI,GAAG,CAAC,QAAQ,GAAG,CAAC,EAAE;AAClB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE;AAClC,gBAAA,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;AACzC,oBAAA,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC5B;aACJ;SACJ;aAAM;AACH,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE;AAClC,gBAAA,IAAI,GAAG,CAAC,YAAY,EAAE;AAClB,oBAAA,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;AACnC,wBAAA,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC5B;iBACJ;qBAAM;AACH,oBAAA,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;AACzC,wBAAA,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC5B;iBACJ;aACJ;SACJ;AAED,QAAA,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,aAAa,IAAI,GAAG,CAAC,QAAQ,GAAG,CAAC,EAAE;AAC1D,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAErC,YAAA,IAAI,WAAW,GAAG,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC;YACpE,WAAW,GAAG,WAAW,GAAG,kBAAkB,GAAG,MAAM,CAAC,aAAa,GAAG,kBAAkB,GAAG,MAAM,CAAC,aAAa,GAAG,WAAW,CAAC;AAEhI,YAAA,IAAI,MAAM,GAAG,GAAG,CAAC,QAAQ,GAAG,CAAC,IAAI,GAAG,CAAC,QAAQ,GAAG,EAAE;AAC9C;AAC4D;iBAC3D,GAAG,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAE5C,YAAA,MAAM,GAAG,MAAM;gBACX,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,WAAW;gBACxC,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,WAAW;gBACxC,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,WAAW;gBACxC,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,WAAW,CAAC;AAE7C,YAAA,IAAI,CAAC,IAAI,CAAC,SAAS,KAAK,MAAM,IAAI,CAAC,GAAG,OAAO,CAAC,KAAK,IAAI,CAAC,aAAa,EAAE;AACnE,gBAAA,MAAM,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;aACpD;AAED,YAAA,IAAI,GAAG,CAAC,QAAQ,GAAG,CAAC,EAAE;AAClB,gBAAA,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,OAAO,EAAE,mBAAmB,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;aACpF;iBAAM,IACH,GAAG,CAAC,YAAY,KAAK,CAAC,OAAO,IAAI,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC,OAAO;AAClG,mBAAA,OAAO,KAAK,CAAC,GAAG,CAAC,QAAQ,KAAK,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC,EAC5D;gBAEE,IAAI,MAAM,EAAE;AACR,oBAAA,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC;AACrB,oBAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,mBAAmB,EAAE,WAAW,CAAC,CAAC;iBACtF;qBAAM;AACH,oBAAA,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC;iBAC7B;aAEJ;AAAM,iBAAA,IAAI,GAAG,CAAC,YAAY,IAAI,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,OAAO,IAAI,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE;AACjJ,gBAAA,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;aACpE;iBAAM,IAAI,MAAM,EAAE;AACf,gBAAA,GAAG,CAAC,SAAS,GAAG,OAAO,GAAG,GAAG,CAAC,YAAY,GAAG,KAAK,CAAC;AACnD,gBAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,mBAAmB,EAAE,WAAW,CAAC,CAAC;aACtF;iBAAM;AACH,gBAAA,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC;aAC7B;SACJ;aAAM;AACH,YAAA,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC;SAC7B;KACJ;AAEM,IAAA,UAAU,CAAC,SAAiB,EAAE,WAAqB,EAAE,mBAAoC,EAAE,WAAqB,EAAA;AACnH,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;;AAGvB,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE;AACnB,YAAA,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE;gBAClB,GAAG,CAAC,UAAU,EAAE,CAAC;aACpB;AAED,YAAA,IAAI,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,CAAC;AAE9C,YAAA,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE;gBACtB,GAAG,CAAC,uBAAuB,EAAE,CAAC;aACjC;AAED,YAAA,IAAI,GAAG,CAAC,UAAU,IAAI,CAAC,WAAW,EAAE;gBAChC,GAAG,CAAC,WAAW,EAAE,CAAC;aACrB;SACJ;;QAGD,IAAI,GAAG,CAAC,MAAM,CAAC,YAAY,IAAI,CAAC,GAAG,CAAC,cAAc,EAAE;YAChD,IAAI,CAAC,sBAAsB,EAAE,CAAC;SACjC;QAED,IAAI,WAAW,EAAE;AACb,YAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;YAChB,OAAO;SACV;;AAGD,QAAA,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE;YAC/D,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,GAAG,CAAC,QAAQ,CAAC;SAC1C;QAED,IAAI,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE;YACxC,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,GAAG,CAAC,QAAQ,CAAC;SAC1C;QAED,GAAG,CAAC,cAAc,EAAE,CAAC;;AAGrB,QAAA,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;KAC/B;AAEM,IAAA,uBAAuB,CAAC,KAAa,EAAA;AACxC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;AACnB,QAAA,OAAO,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,KAAK,KAAK,CAAC;KACzI;IAEM,QAAQ,GAAA;AACX,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;QACnB,OAAO,IAAI,CAAC,KAAK,KAAK,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC;KAClN;IAEM,mBAAmB,GAAA;QAEtB,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,EAAE;AAC3B,YAAA,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;YACtC,OAAO;SACV;;AAGD,QAAA,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,EAAE;;AAG9B,YAAA,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;;AAGtC,YAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YAEvB,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;AACzC,YAAA,IAAI,CAAC,OAAO,CAAC,oBAAoB,GAAG,SAAS,CAAC;AAE9C,YAAA,IAAI,IAAI,CAAC,UAAU,EAAE;;gBAEjB,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS,KAAK,SAAS,EAAE;AAEzC,oBAAA,IAAI,EAAE,GAAgB,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;oBACjD,OAAO,EAAE,EAAE;AACP,wBAAA,IAAI,EAAE,CAAC,QAAQ,EAAE,EAAE;AACf,4BAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gCACtC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;gCAC7C,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,EAAE,CAAC;6BACjC;AACD,4BAAA,EAAE,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;4BACpC,MAAM;yBACT;AACD,wBAAA,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;qBACtB;;AAGD,oBAAA,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;oBAEtC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBACxC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;oBACjD,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,oBAAoB,GAAG,SAAS,CAAC;iBAC5D;qBAAM;;AAEH,oBAAA,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,IAAI,IAAI,CAAC,uBAAuB,CAAC,SAAS,CAAC,EAAE;AAC/E,wBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;4BACxC,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;4BAGvB,EAAE,CAAC,mBAAmB,EAAE,CAAC;AAEzB,4BAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAC3B,4BAAA,EAAE,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;AACpC,4BAAA,EAAE,CAAC,OAAO,CAAC,oBAAoB,GAAG,SAAS,CAAC;AAC5C,4BAAA,EAAE,CAAC,SAAS,GAAG,EAAE,CAAC,KAAK,CAAC;AACxB,4BAAA,EAAE,CAAC,KAAK,GAAG,YAAY,CAAC;yBAC3B;qBACJ;iBACJ;aACJ;SACJ;KACJ;IAEM,cAAc,GAAA;;AAEjB,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;;AAEhB,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AAErF,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACvB,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACvB,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AACvB,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;SAC1B;KACJ;IAEM,yBAAyB,GAAA;QAC5B,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,EAAE;AAChC,YAAA,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;SACzC;aAAM;AACH,YAAA,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,SAAS,CAAC,EAAE;AAC5E,gBAAA,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;AACtC,gBAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;aAC1B;iBAAM;;AAEH,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC/C,IAAI,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,KAAK,CAAC,EAAE;wBAChG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,GAAG,CAAC,CAAC;AACpD,wBAAA,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,GAAG,CAAC;qBACzC;iBACJ;AACD,gBAAA,IAAI,CAAC,OAAO,CAAC,yBAAyB,EAAE,CAAC;aAC5C;SACJ;KACJ;AAED;;;AAGG;AACI,IAAA,WAAW,CAAC,SAAiB,EAAA;AAChC,QAAA,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;AAEvB,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC;;AAGvC,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,yBAAyB,EAAE;AACxC,YAAA,IAAI,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC;AACtC,YAAA,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACpB;aAAM;;YAEH,YAAY,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC,CAAO,EAAE,CAAO,KAAI;gBAC3C,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC;AACnD,aAAC,CAAC,CAAC;SACN;AAED,QAAA,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE;AAC5B,YAAA,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC;AACrC,YAAA,IAAI,CAAC,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC;SACzC;QAED,IAAI,CAAC,GAAG,CAAC,EACL,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,uBAAuB,CAAC;QAC7C,OAAO,SAAS,EAAE;AACd,YAAA,IAAI,SAAS,GAAG,CAAC,EAAE;gBACf,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;AACD,YAAA,CAAC,EAAE,CAAC;YACJ,SAAS,KAAK,CAAC,CAAC;SACnB;KACJ;IAEM,aAAa,CAAC,IAAU,EAAE,IAAY,EAAA;AAEzC,QAAA,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;QAE1B,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;AACxE,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;AACxB,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;YAExB,MAAM,EAAE,GAAG,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;YAEhF,IAAI,OAAO,GAAG,EAAE,CAAC,QAAQ,EACrB,SAAS,GAAG,EAAE,CAAC,QAAQ,CAAC;AAE5B,YAAA,IAAI,EAAE,GAAG,CAAC,EAAE;gBACR,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC,CAAC;AACtC,gBAAA,SAAS,GAAG,EAAE,CAAC,QAAQ,CAAC;aAC3B;AAAM,iBAAA,IAAI,EAAE,GAAG,CAAC,EAAE;AACf,gBAAA,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC;gBACtB,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC,CAAC;aAC3C;AAED,YAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAC7C,YAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAClD;;QAGD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACnC;AAED;;;AAGG;AACI,IAAA,yBAAyB,CAAC,KAAa,EAAA;AAE1C,QAAA,KAAK,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AAExC,YAAA,IAAI,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YAClB,IAAI,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;AAEhC,YAAA,IAAI,EAAE,KAAK,CAAC,CAAC,EAAE;AACX,gBAAA,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;aAC9B;SACJ;KACJ;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,IAAU,EAAA;AAC3B,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;AACxB,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;AAExB,QAAA,IAAI,EAAE,CAAC,QAAQ,KAAK,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC,UAAU,KAAK,EAAE,CAAC,UAAU,EAAE;AAChE,YAAA,OAAO,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;SACjC;aAAM;AACH,YAAA,MAAM,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC;AAC3B,YAAA,MAAM,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC;YAE3B,IAAI,IAAI,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,GAAG,CAAC,CAAC,SAAS,EACtC,IAAI,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,GAAG,CAAC,CAAC,SAAS,CAAC;YAE3C,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,QAAQ,GAAG,IAAI,CAAC,GAAG,EACxC,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,QAAQ,GAAG,IAAI,CAAC,GAAG,EACxC,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,QAAQ,GAAG,IAAI,CAAC,GAAG,EACxC,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC;YAE7C,IAAI,EAAE,CAAC,UAAU,KAAK,EAAE,CAAC,UAAU,EAAE;gBACjC,IAAI,QAAQ,KAAK,QAAQ,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AAC7H,oBAAA,OAAO,CAAC,CAAC;iBACZ;qBAAM,IAAI,QAAQ,KAAK,QAAQ,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AACpI,oBAAA,OAAO,CAAC,CAAC;iBACZ;qBAAM,IAAI,QAAQ,KAAK,QAAQ,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AACpI,oBAAA,OAAO,CAAC,CAAC;iBACZ;qBAAM,IAAI,QAAQ,KAAK,QAAQ,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AACpI,oBAAA,OAAO,CAAC,CAAC;iBACZ;;AAEI,qBAAA,IAAI,EAAE,CAAC,KAAK,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,QAAQ,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AACrJ,oBAAA,OAAO,CAAC,CAAC;iBACZ;AAAM,qBAAA,IAAI,EAAE,CAAC,KAAK,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,QAAQ,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AACvJ,oBAAA,OAAO,CAAC,CAAC;iBACZ;aACJ;;YAGD,IAAI,EAAE,CAAC,UAAU,KAAK,gBAAgB,IAAI,EAAE,CAAC,UAAU,KAAK,eAAe,IAAI,EAAE,CAAC,KAAK,KAAK,CAAC,IAAI,EAAE,CAAC,KAAK,KAAK,EAAE,CAAC,WAAW,gCAA+B,CAAC,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AAChQ,gBAAA,OAAO,CAAC,CAAC;aACZ;iBAAM,IAAI,EAAE,CAAC,UAAU,KAAK,gBAAgB,IAAI,EAAE,CAAC,UAAU,KAAK,eAAe,IAAI,EAAE,CAAC,KAAK,KAAK,EAAE,CAAC,WAAW,gCAA+B,CAAC,IAAI,EAAE,CAAC,KAAK,KAAK,CAAC,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AACvQ,gBAAA,OAAO,CAAC,CAAC;aACZ;iBAAM,IAAI,EAAE,CAAC,UAAU,KAAK,eAAe,IAAI,EAAE,CAAC,UAAU,KAAK,gBAAgB,IAAI,EAAE,CAAC,KAAK,KAAK,CAAC,IAAI,EAAE,CAAC,KAAK,KAAK,EAAE,CAAC,WAAW,gCAA+B,CAAC,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AACvQ,gBAAA,OAAO,CAAC,CAAC;aACZ;iBAAM,IAAI,EAAE,CAAC,UAAU,KAAK,eAAe,IAAI,EAAE,CAAC,UAAU,KAAK,gBAAgB,IAAI,EAAE,CAAC,KAAK,KAAK,EAAE,CAAC,WAAW,gCAA+B,CAAC,IAAI,EAAE,CAAC,KAAK,KAAK,CAAC,KAAK,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,MAAM,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE;AACvQ,gBAAA,OAAO,CAAC,CAAC;aACZ;SACJ;QAED,OAAO,CAAC,CAAC,CAAC;KACb;IAEM,sBAAsB,GAAA;AAEzB,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;AAEzB,QAAA,IAAI,CAAC,GAAG,CAAC,gBAAgB,IAAI,GAAG,CAAC,aAAa,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE;YAChE,GAAG,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SAC3C;QAED,IAAI,EAAE,GAAS,IAAI,CAAC;QACpB,OAAO,EAAE,CAAC,UAAU,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,cAAc,EAAE;AAChD,YAAA,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;SACtB;AAED,QAAA,MAAM,GAAG,GAAG,CAAC,KAAK,GAAG,CAAC,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QAE1D,GAAG,CAAC,gBAAgB,GAAG,EAAE,CAAC,OAAO,CAAC,gBAAgB,CAAC;AACnD,QAAA,GAAG,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,CAAC;AACjE,QAAA,GAAG,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,CAAC;QACjE,GAAG,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC;KAC3C;AAEM,IAAA,mBAAmB,CAAC,mBAAoC,EAAA;AAE3D,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;QAEzB,IAAI,EAAE,GAAS,IAAI,CAAC;AAEpB,QAAA,IAAI,mBAAmB,IAAI,mBAAmB,CAAC,YAAY,EAAE;AACzD,YAAA,EAAE,GAAG,mBAAmB,CAAC,IAAI,CAAC;SACjC;aAAM;YACH,OAAO,EAAE,CAAC,UAAU,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,YAAY,EAAE;AAC9C,gBAAA,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;aACtB;SACJ;AAED,QAAA,IAAI,EAAE,CAAC,OAAO,CAAC,YAAY,IAAI,IAAI,CAAC,oBAAoB,KAAK,EAAE,CAAC,MAAM,EAAE;AAEpE,YAAA,IAAI,GAAG,GAAG,CAAC,KAAK,GAAG,CAAC,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;YACnD,OAAO,GAAG,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,EAC5C,OAAO,GAAG,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,CAAC;AAEjD,YAAA,MAAM,IAAI,GAAG,EAAE,CAAC,OAAO,CAAC;AAExB,YAAA,IAAI,YAA0B,EAC1B,gBAA8B,EAC9B,eAA6B,EAC7B,cAA0B,CAAC;AAE/B,YAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC,MAAM,CAAC;AACtC,YAAA,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;AAElK,YAAA,IAAI,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,GAAG,GAAG,EACpC,WAAW,GAAG,EAAE,CAAC,OAAO,CAAC,YAAY,GAAG,GAAG,CAAC;AAEhD,YAAA,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;AAClB,YAAA,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;AAClB,YAAA,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;AAClB,YAAA,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;AAClB,YAAA,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;AAClB,YAAA,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;AAElB,YAAA,IAAI,QAAQ,IAAI,CAAC,EAAE;AACf,gBAAA,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAExB,gBAAA,IAAI,GAAG,GAAG,CAAC,QAAQ,GAAG,CAAC,KAAK,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AAC9C,gBAAA,YAAY,GAAG,IAAI,YAAY,CAAC,GAAG,CAAC,CAAC;AACrC,gBAAA,gBAAgB,GAAG,IAAI,YAAY,CAAC,GAAG,CAAC,CAAC;AACzC,gBAAA,eAAe,GAAG,IAAI,YAAY,CAAC,GAAG,CAAC,CAAC;AAExC,gBAAA,IAAI,IAAI,CAAC,cAAc,EAAE;oBACrB,cAAc,GAAG,IAAI,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;iBAC5C;AAED,gBAAA,0BAA0B,CACtB,IAAI,CAAC,eAAgB,EACrB,IAAI,CAAC,mBAAoB,EACzB,IAAI,CAAC,kBAAmB,EACxB,IAAI,CAAC,cAAe,EACpB,IAAI,CAAC,QAAQ,EACb,QAAQ,GAAG,OAAO,EAClB,QAAQ,GAAG,OAAO,EAClB,QAAQ,EACR,YAAY,EACZ,gBAAgB,EAChB,eAAe,EACf,MAAM,EACN,cAAe,CAClB,CAAC;aAEL;iBAAM,IAAI,WAAW,IAAI,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,aAAa,EAAE;AAErD,gBAAA,GAAG,CAAC,QAAQ,GAAG,WAAW,CAAC;AAE3B,gBAAA,IAAI,GAAG,GAAG,CAAC,WAAW,GAAG,CAAC,KAAK,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACpD,gBAAA,YAAY,GAAG,IAAI,YAAY,CAAC,GAAG,CAAC,CAAC;AACrC,gBAAA,gBAAgB,GAAG,IAAI,YAAY,CAAC,GAAG,CAAC,CAAC;AACzC,gBAAA,eAAe,GAAG,IAAI,YAAY,CAAC,GAAG,CAAC,CAAC;AAExC,gBAAA,IAAI,IAAI,CAAC,cAAc,EAAE;oBACrB,cAAc,GAAG,IAAI,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;iBAC5C;AAED,gBAAA,0BAA0B,CACtB,IAAI,CAAC,iBAAkB,EACvB,IAAI,CAAC,qBAAsB,EAC3B,IAAI,CAAC,oBAAqB,EAC1B,IAAI,CAAC,cAAe,EACpB,EAAE,CAAC,OAAO,CAAC,YAAY,EACvB,WAAW,GAAG,OAAO,EACrB,WAAW,GAAG,OAAO,EACrB,WAAW,EACX,YAAY,EACZ,gBAAgB,EAChB,eAAe,EACf,MAAM,EACN,cAAe,CAClB,CAAC;aAEL;iBAAM;AAEH,gBAAA,GAAG,CAAC,QAAQ,GAAG,WAAW,CAAC;gBAE3B,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC,EACnC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC,CAAC;AAExC,gBAAA,IAAI,MAAM,CAAC;AACX,gBAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,EAAE;AACrB,oBAAA,MAAM,GAAG,IAAI,CAAC,eAAgB,CAAC;iBAClC;qBAAM;AACH,oBAAA,MAAM,GAAG,mBAAmB,CAAC,IAAI,CAAC,eAAgB,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;iBACjF;AAED,gBAAA,IAAI,UAAU,GAAG,GAAG,GAAG,QAAQ,CAAC;AAEhC,gBAAA,IAAI,IAAI,GAAG,OAAO,GAAG,UAAU,GAAG,EAAE,EAAE,IAAI,GAAG,OAAO,GAAG,UAAU,GAAG,EAAE,CAAC;AAEvE,gBAAA,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAChD,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvD,gBAAA,IAAI,EAAE,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,EAClF,EAAE,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,EAClF,EAAE,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC,EACpF,EAAE,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;AAEzF,gBAAA,IAAI,MAAM,GAAG,IAAI,IAAI,EAAE,CAAC;gBAExB,YAAY,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;gBACvD,gBAAgB,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;gBAC3D,eAAe,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;AAE1D,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACxC,IAAI,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;oBAEjE,IAAI,OAAO,GAAG,IAAI,GAAG,QAAQ,EAAE,OAAO,GAAG,IAAI,GAAG,QAAQ,CAAC;AAEzD,oBAAA,IAAI,IAAI,GAAG,IAAI,GAAG,UAAU,EAAE;wBAC1B,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACrE;yBAAM;wBACH,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC7E;oBAED,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;AAEpD,oBAAA,IAAI,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;AAEf,oBAAA,YAAY,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;oBAC5B,YAAY,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;oBAChC,YAAY,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;AAEhC,oBAAA,gBAAgB,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;oBACnC,gBAAgB,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;oBACvC,gBAAgB,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;AAEvC,oBAAA,eAAe,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;oBACjC,eAAe,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;oBACrC,eAAe,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AAErC,oBAAA,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI;AAAE,wBAAA,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC;AACnD,oBAAA,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI;AAAE,wBAAA,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC;AACnD,oBAAA,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI;AAAE,wBAAA,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC;AACnD,oBAAA,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI;AAAE,wBAAA,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC;AACnD,oBAAA,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI;AAAE,wBAAA,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC;AACnD,oBAAA,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI;AAAE,wBAAA,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC;iBACtD;aACJ;AAED,YAAA,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC;AAEzB,YAAA,GAAG,CAAC,eAAe,GAAG,YAAY,CAAC;AACnC,YAAA,GAAG,CAAC,mBAAmB,GAAG,gBAAgB,CAAC;AAC3C,YAAA,GAAG,CAAC,kBAAkB,GAAG,eAAe,CAAC;AAEzC,YAAA,GAAG,CAAC,YAAY,GAAG,YAAY,CAAC;AAChC,YAAA,GAAG,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;AACxC,YAAA,GAAG,CAAC,eAAe,GAAG,eAAe,CAAC;AAEtC,YAAA,GAAG,CAAC,cAAc,GAAG,cAAe,CAAC;YAErC,GAAG,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;AAEpG,YAAA,IAAI,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,OAAQ,CAAC,OAAO,EAAE;AAC5C,gBAAA,IAAI,EAAE,CAAC,OAAO,CAAC,QAAQ,IAAI,GAAG,CAAC,MAAM,CAAC,OAAQ,CAAC,OAAO,EAAE;oBAEpD,GAAG,CAAC,YAAY,GAAG,EAAE,CAAC,OAAO,CAAC,YAAY,GAAG,GAAG,CAAC;AAEjD,oBAAA,GAAG,CAAC,YAAY,GAAG,IAAI,CAAC;AACxB,oBAAA,GAAG,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAE7B,oBAAA,GAAG,CAAC,eAAe,GAAG,YAAY,CAAC;AACnC,oBAAA,GAAG,CAAC,mBAAmB,GAAG,gBAAgB,CAAC;AAC3C,oBAAA,GAAG,CAAC,kBAAkB,GAAG,eAAe,CAAC;AAEzC,oBAAA,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC;AAErB,oBAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,MAAM,CAAC;AACxC,oBAAA,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC;AAElK,oBAAA,IAAI,EAAE,CAAC,OAAO,CAAC,aAAa,EAAE;AAC1B,wBAAA,GAAG,CAAC,iBAAiB,GAAG,YAAY,CAAC;AACrC,wBAAA,GAAG,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;wBAE1D,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,EACtD,IAAI,GAAG,GAAG,GAAG,GAAG,CAAC;AAErB,wBAAA,IAAI,GAAG,GAAG,CAAC,EAAE;4BACT,GAAG,CAAC,gBAAgB,GAAG,mBAAmB,CAAC,IAAI,CAAC,gBAAiB,EAAE,GAAG,EAAE,IAAI,GAAG,OAAO,EAAE,IAAI,GAAG,OAAO,EAAE,IAAI,CAAC,CAAC;yBACjH;6BAAM;;AAEH,4BAAA,GAAG,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;yBAChD;qBACJ;iBACJ;aACJ;SACJ;KACJ;IAEM,OAAO,GAAA;QAEV,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC;AAC3C,QAAA,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACvB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1C,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACd,IAAI,EAAE,EAAE;AACJ,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChC,oBAAA,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AAChB,oBAAA,IAAI,GAAG,IAAI,GAAG,CAAC,SAAS,EAAE;wBACtB,GAAG,CAAC,cAAc,EAAE,CAAC;qBACxB;iBACJ;aACJ;SACJ;;AAGD,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;AAEtB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;;AAEvB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;AAEzB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;KACvB;IAEM,SAAS,GAAA;AACZ,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC9B,IAAI,KAAK,KAAK,YAAY,IAAI,KAAK,KAAK,SAAS,EAAE;YAC/C,IAAI,CAAC,eAAe,EAAE,CAAC;SAC1B;aAAM;AACH,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACxC,gBAAA,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;aAC9C;SACJ;KACJ;IAEM,aAAa,GAAA;AAChB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACxC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAE,CAAC,aAAa,EAAE,CAAC;YAC/B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAE,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;SAC5C;KACJ;IAEM,eAAe,GAAA;AAClB,QAAA,IAAI,IAAI,CAAC,KAAK,EAAE;AACZ,YAAA,IAAI,aAAa,GAAW,EAAE,EAC1B,CAAC,CAAC;AAEN,YAAA,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACpC,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAE,CAAC;aACrC;AAED,YAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,YAAA,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;AAEhB,YAAA,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACvC,gBAAA,aAAa,CAAC,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC;AACnC,gBAAA,aAAa,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;;AAE3B,gBAAA,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;aAC3B;AAED,YAAA,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC;;YAGzB,aAAa,GAAG,IAAI,CAAC;SACxB;KACJ;AAEM,IAAA,YAAY,CAAC,QAAkB,EAAA;QAClC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACf,QAAA,IAAI,IAAI,CAAC,KAAK,EAAE;AACZ,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACxC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAE,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;aACzC;SACJ;KACJ;IAEM,8BAA8B,CAAC,aAAmB,EAAE,IAAY,EAAA;AACnE,QAAA,IAAI,KAAK,GAAS,IAAI,EAClB,aAAa,GAAG,aAAa,CAAC,OAAO,CAAC,QAAQ,EAC9C,MAAM,GAAG,CAAC,CAAC;QAEf,OAAO,KAAK,CAAC,OAAO,CAAC,QAAQ,GAAG,aAAa,EAAE;YAC3C,MAAM,IAAI,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,OAAO,CAAC,QAAQ,GAAG,aAAa,CAAC,CAAC,CAAC;AAC3F,YAAA,KAAK,GAAG,KAAK,CAAC,UAAW,CAAC;SAC7B;AAED,QAAA,OAAO,MAAM,CAAC;KACjB;AACJ;;ACz7BD,MAAM,UAAU,CAAA;AAOZ,IAAA,WAAA,CAAY,OAAe,IAAI,EAAA;AAC3B,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACpC,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;AAC9C,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC;AAClC,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;KACnB;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;AAC9C,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC;AAClC,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;KACnB;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACpC,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;AAC9C,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC;AAClC,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;KACnB;AAEM,IAAA,IAAI,CAAC,IAAO,EAAA;QACf,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,GAAG,IAAI,CAAC;KACxC;IAEM,GAAG,GAAA;AACN,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,SAAS,CAAE,CAAC;;YAEzC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;AACnC,YAAA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE;AAClC,gBAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;AAC9C,gBAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC;aACrC;AACD,YAAA,OAAO,GAAG,CAAC;SACd;AACD,QAAA,OAAO,SAAS,CAAC;KACpB;AAEM,IAAA,OAAO,CAAC,IAAO,EAAA;QAClB,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC;KAC1C;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAE,CAAC;;YAEzC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,GAAG,IAAI,CAAC;YACvC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE;AAChC,gBAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;AAC9C,gBAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC;aACrC;AACD,YAAA,OAAO,GAAG,CAAC;SACd;AACD,QAAA,OAAO,SAAS,CAAC;KACpB;AACM,IAAA,OAAO,CAAC,QAAyB,EAAA;AACpC,QAAA,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,EAAE,EAAE;YACpD,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B;KACJ;AACJ;;MCnEY,6BAA6B,CAAA;IAiBtC,WAAY,CAAA,KAAa,EAAE,YAAoB,EAAA;AAC3C,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,QAAA,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;AAClC,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,6BAA6B,GAAG,IAAI,UAAU,EAAwB,CAAC;AAE5E,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;KAC7B;AAEM,IAAA,YAAY,CAAC,MAAc,EAAE,QAAA,GAAoB,KAAK,EAAA;KAE5D;AAEM,IAAA,iBAAiB,CAAC,cAAuB,EAAA;KAE/C;IAEM,OAAO,GAAA;KAEb;AAEM,IAAA,cAAc,CAAC,eAAyB,EAAA;KAE9C;AAEM,IAAA,+BAA+B,CAAC,MAA0B,EAAA;KAChE;AAEM,IAAA,kBAAkB,CAAC,IAA0B,EAAA;AAChD,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,EAAE;AAC7B,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,YAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AACpB,gBAAA,IAAI,CAAC,6BAA6B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACjD;iBAAM;AACH,gBAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;aAChC;SACJ;KACJ;AAES,IAAA,iBAAiB,CAAC,IAA0B,EAAA;QAClD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,qBAAqB,CAAC,MAAK;YACvB,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,YAAA,IAAI,IAAI,CAAC,6BAA6B,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE;AAChE,gBAAA,OAAO,IAAI,CAAC,6BAA6B,CAAC,MAAM,EAAE;oBAC9C,IAAI,CAAC,GAAG,IAAI,CAAC,6BAA6B,CAAC,GAAG,EAAG,CAAC;AAClD,oBAAA,CAAC,CAAC,WAAW,GAAG,KAAK,CAAC;AACtB,oBAAA,IAAI,CAAC,CAAC,SAAS,EAAE,EAAE;AACf,wBAAA,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;wBAC1B,OAAO;qBACV;iBACJ;aACJ;AACL,SAAC,CAAC,CAAC;KACN;AACJ;;MCtEY,gBAAgB,CAAA;AAmBzB,IAAA,WAAA,CAAY,MAAc,EAAE,IAAA,GAAe,EAAE,EAAE,OAAa,QAAQ,EAAA;AAChE,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;KAC3B;IAEM,mCAAmC,CAAC,KAAa,EAAE,YAAoB,EAAA;AAC1E,QAAA,OAAO,IAAI,6BAA6B,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;KACjE;IAEM,eAAe,GAAA;QAClB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC3D,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC;SAC3C;KACJ;AAEM,IAAA,kBAAkB,CAAC,KAAY,EAAA;AAClC,QAAA,IAAI,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC;QACrB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC3D,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,UAAU,IAAU,EAAA;AACnD,gBAAA,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;AAClC,gBAAA,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE;AACX,oBAAA,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;;AAElB,oBAAA,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;;iBAEpB;AACL,aAAC,CAAC,CAAC;SACN;KACJ;AAED,IAAA,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;IAEM,IAAI,GAAA;KAEV;IAEM,SAAS,GAAA;AACZ,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAEhD,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YACrC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;AAC/B,YAAA,QAAQ,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC;AAEtC,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC5C,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC;aAClD;SACJ;KACJ;IAEM,OAAO,GAAA;AAEV,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAEhD,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AACrC,YAAA,QAAQ,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;AAClC,YAAA,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AAE3D,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC5C,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;gBAC3C,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAChC,gBAAA,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;aACxE;SACJ;KACJ;IAES,kBAAkB,GAAA;AACxB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;KAC3B;IAEM,kBAAkB,GAAA;QACrB,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAC1B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChD,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;SAClE;KACJ;IAEM,KAAK,GAAA;AACR,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;SACrC;KACJ;AAED,IAAA,IAAW,YAAY,GAAA;QACnB,OAAO,IAAI,CAAC,aAAa,CAAC;KAC7B;IAEM,SAAS,CAAC,MAAc,EAAE,IAAY,EAAA;QACzC,IAAI,CAAC,GAAG,IAAI,EACR,CAAC,GAAG,CAAC,CAAC,EACN,CAAC,GAAG,CAAC,CAAC,EACN,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAElB,QAAA,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;AACjD,QAAA,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;QAE/C,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;KACtC;IAEM,mBAAmB,CAAC,MAAc,EAAE,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,QAAgB,EAAA;QACxF,IAAI,MAAM,GAAG,MAAM,CAAC;AACpB,QAAA,IAAI,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;AAE1B,QAAA,IAAI,WAAW,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;QAC/D,MAAM,GAAG,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QAEjD,IAAI,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,IAAI,QAAQ,GAAG,CAAC,CAAC,EAC7C,QAAQ,GAAG,MAAM,CAAC,SAAS,EAAE,IAAI,QAAQ,GAAG,CAAC,CAAC,CAAC;QAEnD,IAAI,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI,QAAQ,CAAC,GAAG,CAAC,EAC5E,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC;AAEnE,QAAA,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KACjB;AAEM,IAAA,kBAAkB,CAAC,IAAU,EAAA;QAChC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;KAC1C;AACJ;;ACzJD;;AAEG;AAIH;;;AAGG;AACI,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC;;ACG7E,MAAM,aAAa,GAAG,CAAC,CAAC;AACjB,MAAM,eAAe,GAAG,CAAC,IAAI,GAAGzD,OAAgB,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC;AAEtF;;;;AAIG;AACH,MAAM,aAAc,SAAQ,OAAO,CAAA;AAC/B,IAAA,WAAA,CAAY,IAAU,EAAE,MAAc,EAAE,QAAgB,EAAE,MAAc,EAAA;QACpE,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;AAEtC,QAAA,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;AAE5B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC;QAElC,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CACzB,MAAM,CAAC,SAAS,CAAC,oBAAoB,EAAE,EACvC,MAAM,CAAC,SAAS,CAAC,oBAAoB,EAAE,CAC1C,CAAC;AAEF,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,CAAC;AAE/C,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;KACtB;IAEe,gBAAgB,GAAA;AAC5B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC;KACrC;AAEe,IAAA,aAAa,CAAC,MAAc,EAAA;AACxC,QAAA,OAAO,MAAM,CAAC;KACjB;AAEe,IAAA,eAAe,CAAC,GAA0B,EAAA;QACtD,OAAO,GAAG,CAAC,OAAO,CAAC;KACtB;IAES,WAAW,GAAA;QACjB,IAAI,WAAW,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;;YAEf,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,IAAI,eAAe,CAAC,CAAC;YAC3E,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;SACzC;aAAM;;YAEH,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAACD,OAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,IAAI,eAAe,CAAC,CAAC;YACvF,WAAW,GAAG,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;SAC1C;AACD,QAAA,OAAO,WAAW,CAAC;KACtB;IAEe,SAAS,GAAA;AACrB,QAAA,OAAO,KAAK,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;KACnE;IAEkB,kBAAkB,GAAA;AACjC,QAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACvC,QAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACvC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KAC/F;AAES,IAAA,mBAAmB,CAAC,MAAc,EAAA;QACxC,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,GAAG,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;AAC/E,QAAA,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC;AAC5B,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC;KAC5C;AAES,IAAA,mBAAmB,CAAC,MAAc,EAAA;QACxC,MAAM,GAAG,GAAG,MAAM,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC;AACnC,QAAA,IAAI,GAAG,GAAG,CAAC,EAAE;AACT,YAAA,IAAI,CAAC,UAAU,GAAG,eAAe,CAAC;AAClC,YAAA,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,CAAC;SAChE;aAAM;AACH,YAAA,IAAI,CAAC,UAAU,GAAG,eAAe,CAAC;AAClC,YAAA,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,EAAEA,OAAgB,CAAC,CAAC;SAC5E;QACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;KAChC;IAEkB,UAAU,CAAC,GAAW,EAAE,GAAW,EAAA;AAClD,QAAA,OAAO,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;KAC/B;IAEkB,+BAA+B,GAAA;AAC9C,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACvB,QAAA,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,KAAK,IAAI,KAAK,CAAC;AACtE,QAAA,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,IAAI,KAAK,CAAC;AACnE,QAAA,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,GAAG,KAAK,IAAI,KAAK,CAAC;AACtE,QAAA,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,IAAI,KAAK,CAAC;KACtE;AAED;;;;;;AAMG;AACgB,IAAA,qBAAqB,CAAC,KAAY,EAAA;AACjD,QAAA,MAAM,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC;AAC1B,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;AACzB,QAAA,MAAM,OAAO,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;AACtD,QAAA,MAAM,OAAO,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC;AACtD,QAAA,MAAM,MAAM,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;AACjE,QAAA,MAAM,MAAM,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;AACjE,QAAA,MAAM,OAAO,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;AAClE,QAAA,MAAM,OAAO,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,OAAO,CAAC;QAClE,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;KAC7C;AAEe,IAAA,YAAY,CAAC,KAAY,EAAA;QACrC,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;KAC/C;IAEe,iBAAiB,GAAA;AAC7B,QAAA,OAAO,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC;KACpF;IAEe,eAAe,GAAA;QAC3B,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAEJ;;ACzHD;;AAEG;AACH,MAAM,oBAAoB,CAAA;IAkBtB,WAAY,CAAA,QAAuC,EAAE,MAAc,EAAE,MAAmC,EAAE,MAAc,EAAE,MAAc,EAAE,IAAY,EAAA;AAClJ,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAA,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC;AAC7B,QAAA,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;AACzB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;QAErB,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5D,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACf,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAC3B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AAEzB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,EAAE,CAAC;AAE5B,QAAA,MAAM,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;KACrC;AAEM,IAAA,YAAY,CAAC,MAAc,EAAE,QAAA,GAAoB,KAAK,EAAA;QACzD,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,EAAE,QAAQ,CAAC,CAAC;KACtC;AAES,IAAA,wBAAwB,CAAC,QAAkB,EAAE,QAAA,GAAoB,KAAK,EAAA;AAC5E,QAAA,IAAI,QAAQ,CAAC,MAAM,EAAE;AACjB,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;AACrB,YAAA,MAAM,CAAC,GAAG,CAAC,CAAC,OAAQ,CAAC;AAErB,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,gBAAgB,CAAC;YAE/B,IAAI,CAAC,EAAE,EAAE;gBACL,EAAE,GAAG,IAAI,gBAAgB,CAAC;oBACtB,cAAc,EAAE,CAAC,CAAC,eAAe;oBACjC,eAAe,EAAE,CAAC,CAAC,eAAe;AACrC,iBAAA,CAAC,CAAC;AACH,gBAAA,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;AACvB,gBAAA,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;AAClB,gBAAA,EAAE,CAAC,SAAS,GAAG,IAAI,CAAC;AACpB,gBAAA,CAAC,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;AACzB,gBAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;aAC9B;AAED,YAAA,IAAI,QAAQ,IAAI,CAAC,CAAC,CAAC,KAAK,EAAE;AACtB,gBAAA,IAAI,CAAC,gBAAiB,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;aAChD;iBAAM;AACH,gBAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,EAAE,QAAQ,CAAC,CAAC;aACrE;SACJ;KACJ;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACd,YAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC,SAAS,CAAC,cAAc,CAAC;YACnE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,IAAI,EAAE,CAAC;SACpC;aAAM;YACH,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,CAAC;SAC5F;KACJ;AAEM,IAAA,aAAa,CAAC,MAAc,EAAA;AAE/B,QAAA,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE;AACxD,YAAA,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;SACvF;AAED,QAAA,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,GAAGC,OAAgB,EAAE;YACjD,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;SACzD;aAAM;AACH,YAAA,MAAM,CAAC,WAAW,GAAG,IAAI,MAAM,EAAE,CAAC;SACrC;QACD,OAAO,MAAM,CAAC,WAAW,CAAC;KAC7B;AAEM,IAAA,SAAS,CAAC,QAAkB,EAAE,QAAA,GAAoB,KAAK,EAAA;AAE1D,QAAA,IAAI,CAAC,KAAK,IAAI,QAAQ,CAAC,MAAM,CAAC;QAE9B,IAAI,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;AAC5C,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC;AAC9B,YAAA,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE;gBACZ,IAAI,CAAC,mBAAmB,EAAE,CAAC;aAC9B;AAED,YAAA,IAAI,KAAK,GAAG,EAAE,EACV,KAAK,GAAG,EAAE,EACV,KAAK,GAAG,EAAE,EACV,KAAK,GAAG,EAAE,CAAC;AAEf,YAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC;YACxB,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,MAAM,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACvB,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE;AACrB,oBAAA,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACrB,oBAAA,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBAClB;qBAAM,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE;AAC5B,oBAAA,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACrB,oBAAA,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBAClB;qBAAM,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE;AAC5B,oBAAA,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACrB,oBAAA,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBAClB;qBAAM,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE;AAC5B,oBAAA,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACrB,oBAAA,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBAClB;aACJ;AAED,YAAA,KAAK,CAAC,MAAM,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;AAClD,YAAA,KAAK,CAAC,MAAM,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;AAClD,YAAA,KAAK,CAAC,MAAM,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;AAClD,YAAA,KAAK,CAAC,MAAM,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;SAErD;aAAM;AACH,YAAA,IAAI,CAAC,wBAAwB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;SACrD;KACJ;AAEM,IAAA,QAAQ,CAAC,MAAc,EAAA;AAC1B,QAAA,IAAI,MAAM,CAAC,WAAW,EAAE;YACpB,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;SACnD;aAAM;AACH,YAAA,OAAO,KAAK,CAAC;SAChB;KACJ;IAEM,mBAAmB,GAAA;AACtB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;AACxB,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,MAAM,MAAM,GAAG,GAAG,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC;QACpC,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE,GAAG,GAAG,CAAC;AACrC,QAAA,MAAM,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;AACzB,QAAA,MAAM,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;AACzB,QAAA,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC;AACvD,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC;AAC9B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC;AAC9B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QAExB,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,oBAAoB,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC3I,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,oBAAoB,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAChG,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,oBAAoB,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAChG,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,oBAAoB,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KAC9I;IAEM,6BAA6B,CAAC,YAAuB,EAAE,MAA0B,EAAA;QACpF,MAAM,CAAC,GAAG,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACpC,IAAI,CAAC,EAAE;AACH,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC;AAC9B,YAAA,IAAI,IAAI,CAAC,gBAAgB,EAAE;AACvB,gBAAA,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;aAC/C;AAAM,iBAAA,IAAI,EAAE,CAAC,MAAM,EAAE;AAClB,gBAAA,IAAI,CAAC,CAAC,KAAK,KAAK,SAAS,EAAE;oBACvB,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACxC;qBAAM;oBACH,EAAE,CAAC,EAAE,CAAC,CAAC,6BAA6B,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;oBAC3D,EAAE,CAAC,EAAE,CAAC,CAAC,6BAA6B,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;oBAC3D,EAAE,CAAC,EAAE,CAAC,CAAC,6BAA6B,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;oBAC3D,EAAE,CAAC,EAAE,CAAC,CAAC,6BAA6B,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;iBAC9D;aACJ;SACJ;KACJ;AAEM,IAAA,6BAA6B,CAAC,YAAuB,EAAE,MAA0B,EAAE,eAAuB,EAAA;AAC7G,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC;AAC9B,QAAA,MAAM,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC;QAErB,MAAM,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM;YACvE,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;AAEpF,QAAA,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,MAAM,IAAI,GAAG,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;AAE9D,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC;AAE9B,YAAA,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBACvB,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,YAAY,EAAE,eAAe,CAAC,CAAC;aAChE;AAAM,iBAAA,IAAI,EAAE,CAAC,MAAM,EAAE;AAClB,gBAAA,EAAE,CAAC,EAAE,CAAC,CAAC,6BAA6B,CAAC,YAAY,EAAE,MAAM,EAAE,eAAe,CAAC,CAAC;AAC5E,gBAAA,EAAE,CAAC,EAAE,CAAC,CAAC,6BAA6B,CAAC,YAAY,EAAE,MAAM,EAAE,eAAe,CAAC,CAAC;AAC5E,gBAAA,EAAE,CAAC,EAAE,CAAC,CAAC,6BAA6B,CAAC,YAAY,EAAE,MAAM,EAAE,eAAe,CAAC,CAAC;AAC5E,gBAAA,EAAE,CAAC,EAAE,CAAC,CAAC,6BAA6B,CAAC,YAAY,EAAE,MAAM,EAAE,eAAe,CAAC,CAAC;aAC/E;SACJ;KACJ;IAEM,eAAe,GAAA;QAClB,IAAI,CAAC,gBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAC1D,QAAA,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAC3B,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;KAC5B;AAEM,IAAA,YAAY,CAAC,QAAkB,EAAA;AAElC,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC;AAE9B,QAAA,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACvB,QAAQ,CAAC,IAAI,CAAC,CAAC;SAClB;AAAM,aAAA,IAAI,EAAE,CAAC,MAAM,EAAE;YAClB,EAAE,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC9B,EAAE,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC9B,EAAE,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC9B,EAAE,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;SACjC;KACJ;AAEM,IAAA,gBAAgB,CAAC,MAA0B,EAAE,YAAuB,EAAE,eAAwB,EAAA;AAEjG,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;QAExB,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;QAEtC,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;AACnD,YAAA,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;AAClB,gBAAA,CAAC,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;aAC9B;iBAAM;gBACH,IAAI,CAAC,eAAe,EAAE,CAAC;aAC1B;SACJ;AAED,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,gBAAiB,CAAC;AAChC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;AAEnB,QAAA,EAAE,CAAC,cAAc,GAAG,CAAC,CAAC,cAAc,CAAC;AACrC,QAAA,EAAE,CAAC,eAAe,GAAG,CAAC,CAAC,eAAe,CAAC;AACvC,QAAA,EAAE,CAAC,YAAY,GAAG,CAAC,CAAC,YAAY,CAAC;AACjC,QAAA,EAAE,CAAC,kBAAkB,GAAG,CAAC,CAAC,kBAAkB,CAAC;AAE7C,QAAA,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAEhB,IAAI,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,gBAAgB,EAAE;AACvC,YAAA,MAAM,CAAC,GAAG,EAAE,CAAC,SAAS,CAAC;AACvB,YAAA,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;AAEjB,YAAA,IAAI,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,SAAS,EAAE;gBAC5E,OAAO,CAAC,EAAE,EAAE;AACR,oBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACd,oBAAA,IAAI,CAAC,sBAAsB,CAAC,EAAE,EAAE,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC;iBACtE;aACJ;iBAAM,IAAI,eAAe,EAAE;gBACxB,OAAO,CAAC,EAAE,EAAE;AACR,oBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACd,oBAAA,IAAI,CAAC,sBAAsB,CAAC,EAAE,EAAE,YAAY,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,CAAC;iBAC1E;aACJ;iBAAM;AACH,gBAAA,MAAM,CAAC,GAAG,CAAC,CAAC,OAAQ,CAAC,cAAc,CAAC;gBACpC,OAAO,CAAC,EAAE,EAAE;AACR,oBAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACd,oBAAA,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;oBACjB,OAAO,CAAC,EAAE,EAAE;AACR,wBAAA,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE;AACjC,4BAAA,IAAI,CAAC,sBAAsB,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;4BAC9C,MAAM;yBACT;qBACJ;iBACJ;aACJ;SACJ;KACJ;IAEM,sBAAsB,CAAC,MAAc,EAAE,OAAgB,EAAA;AAC1D,QAAA,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;AACrB,QAAA,OAAO,CAAC,qBAAqB,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AAC3C,QAAA,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,IAAI,MAAM,CAAC,SAAS,KAAK,GAAG,CAAC;QAC3E,IAAI,GAAG,EAAE;AACL,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;AAC9D,YAAA,MAAM,CAAC,qBAAqB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SACxD;aAAM;AACH,YAAA,MAAM,CAAC,qBAAqB,CAAC,GAAG,CAAC,CAAC;SACrC;KACJ;IAEM,SAAS,GAAA;QACZ,IAAI,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AAC5C,YAAA,OAAO,IAAI,CAAC;SACf;AACD,QAAA,OAAO,KAAK,CAAC;KAChB;AACJ;;ACnTK,MAAO,+BAAgC,SAAQ,oBAAoB,CAAA;IAMrE,WAAY,CAAA,QAA4C,EAAE,MAAc,EAAE,MAA8C,EAAE,MAAc,EAAE,MAAc,EAAE,IAAY,EAAA;AAClK,QAAA,KAAK,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;KACxB;IAEe,mBAAmB,GAAA;AAC/B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;AACxB,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,MAAM,MAAM,GAAG,GAAG,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC;QACpC,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE,GAAG,GAAG,CAAC;AACrC,QAAA,MAAM,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;AACzB,QAAA,MAAM,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;AACzB,QAAA,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC;AACvD,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC;AAC9B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC;AAC9B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QAExB,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,+BAA+B,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACtJ,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,+BAA+B,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC3G,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,+BAA+B,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3G,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,+BAA+B,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KACzJ;IAEkB,gBAAgB,GAAA;QAC/B,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,EAAE;AAC/B,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACvB;AACD,QAAA,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;KAC1E;AAEe,IAAA,aAAa,CAAC,MAAc,EAAA;AACxC,QAAA,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE;AACzB,YAAA,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;SACvF;QACD,OAAO,MAAM,CAAC,OAAO,CAAC;KACzB;IAEe,SAAS,GAAA;AACrB,QAAA,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AACjE,YAAA,OAAO,IAAI,CAAC;SACf;aAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AACxD,YAAA,OAAO,IAAI,CAAC;SACf;AACD,QAAA,OAAO,KAAK,CAAC;KAChB;AAEe,IAAA,QAAQ,CAAC,MAAc,EAAA;QACnC,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;KAC/C;AAEe,IAAA,gBAAgB,CAAC,MAA0B,EAAE,YAAuB,EAAE,aAAqB,EAAA;AAEvG,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;SAC1D;aAAM;YACH,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;SAC1D;QAED,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;AACnD,YAAA,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;AAClB,gBAAA,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;aAC1C;iBAAM;gBACH,IAAI,CAAC,eAAe,EAAE,CAAC;aAC1B;SACJ;AAED,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,gBAAiB,CAAC;QAElC,EAAE,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC;QAC9C,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC;QAChD,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;AAE1C,QAAA,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE;AACf,YAAA,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SACnB;KACJ;AACJ;;ACjFK,MAAO,kCAAmC,SAAQ,6BAA6B,CAAA;IASjF,WAAY,CAAA,KAAa,EAAE,YAAoB,EAAA;AAC3C,QAAA,KAAK,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;AAE3B,QAAA,IAAI,MAAM,GAAG,KAAK,CAAC,OAAQ,CAAC;AAE5B,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,oBAAoB,CAClD,IAAI,EACJ0D,EAAW,EACX,IAAI,EACJ,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC,EAC9E,MAAM,EACN,CAAC,CACJ,CAAC;AAEF,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,+BAA+B,CAClE,IAAI,EACJA,EAAW,EACX,IAAI,EACJ,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAE1D,OAAgB,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,EACzD,MAAM,EACN,CAAC,CACJ,CAAC;AAEF,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,+BAA+B,CAClE,IAAI,EACJ0D,EAAW,EACX,IAAI,EACJ,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE3D,OAAgB,CAAC,CAAC,EAC1D,MAAM,EACN,CAAC,CACJ,CAAC;AAEF,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;KAClC;AAEe,IAAA,YAAY,CAAC,MAAc,EAAE,QAAA,GAAoB,KAAK,EAAA;QAClE,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,GAAGC,OAAgB,EAAE;AACvC,YAAA,IAAI,CAAC,2BAA4B,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YACxD,IAAI,CAAC,2BAA4B,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;SACpE;aAAM,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,GAAGD,OAAgB,EAAE;AAC9C,YAAA,IAAI,CAAC,2BAA4B,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YACxD,IAAI,CAAC,2BAA4B,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;SACpE;aAAM;AACH,YAAA,IAAI,CAAC,sBAAuB,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YACnD,IAAI,CAAC,sBAAuB,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;SAC/D;KACJ;AAEe,IAAA,iBAAiB,CAAC,cAAuB,EAAA;AACrD,QAAA,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,sBAAsB,CAAC,YAAY,CAAC,CAAC,IAA0B,KAAI;AACnG,YAAA,IAAI,CAAC,gBAAiB,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;AAC7D,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,2BAA2B,IAAI,IAAI,CAAC,2BAA2B,CAAC,YAAY,CAAC,CAAC,IAAqC,KAAI;AACxH,YAAA,IAAI,CAAC,gBAAiB,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;AAC7D,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,2BAA2B,IAAI,IAAI,CAAC,2BAA2B,CAAC,YAAY,CAAC,CAAC,IAAqC,KAAI;AACxH,YAAA,IAAI,CAAC,gBAAiB,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;AAC7D,SAAC,CAAC,CAAC;KACN;IAEe,OAAO,GAAA;;AAEnB,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;;AAEnC,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;;AAExC,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;AAExC,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;KAClC;AAEe,IAAA,cAAc,CAAC,eAAyB,EAAA;QACpD,IAAI,aAAa,GAAa,EAAE,EAC5B,aAAa,GAAa,EAAE,EAC5B,YAAY,GAAa,EAAE,CAAC;AAChC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACxD,YAAA,IAAI,MAAM,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;;YAEhC,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,GAAGC,OAAgB,EAAE;AACvC,gBAAA,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC3B,gBAAA,IAAI,CAAC,2BAA2B,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aAC1D;iBAAM,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,GAAGD,OAAgB,EAAE;AAC9C,gBAAA,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC3B,gBAAA,IAAI,CAAC,2BAA2B,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aAC1D;iBAAM;AACH,gBAAA,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC1B,gBAAA,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aACrD;SACJ;AAED,QAAA,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;AACpD,QAAA,IAAI,CAAC,2BAA2B,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;AAC1D,QAAA,IAAI,CAAC,2BAA2B,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;KAC7D;AAEe,IAAA,+BAA+B,CAAC,MAA0B,EAAA;AACtE,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;QAE/B,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,gBAAyC,CAAC;;AAGzE,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,sBAAsB,CAAC,6BAA6B,CAAC,GAAG,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;AACrF,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAChC,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,6BAA6B,CAAC,GAAG,CAAC,aAAa,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;SAC5G;;AAGD,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,2BAA2B,CAAC,6BAA6B,CAAC,GAAG,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC;AAC/F,QAAA,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAC5B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,6BAA6B,CAAC,GAAG,CAAC,kBAAkB,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;SACjH;;AAGD,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,2BAA2B,CAAC,6BAA6B,CAAC,GAAG,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC;AAC/F,QAAA,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAC5B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,6BAA6B,CAAC,GAAG,CAAC,kBAAkB,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;SACjH;KACJ;AACJ;;ACtIK,MAAO,qBAAsB,SAAQ,gBAAgB,CAAA;AAkBvD,IAAA,WAAA,CAAY,MAAc,EAAA;AACtB,QAAA,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AAEvB,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;KAChC;AAEe,IAAA,kBAAkB,CAAC,IAAU,EAAA;AACzC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;AACjC,QAAA,IAAI,EAAE,KAAK,eAAe,EAAE;YACxB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;SAC/C;AAAM,aAAA,IAAI,EAAE,KAAK,eAAe,EAAE;YAC/B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;SAC/C;aAAM;YACH,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;SAC1C;KACJ;IAEkB,kBAAkB,GAAA;QACjC,KAAK,CAAC,kBAAkB,EAAE,CAAC;AAC3B,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;KAChC;IAEe,mCAAmC,CAAC,KAAa,EAAE,YAAoB,EAAA;AACnF,QAAA,OAAO,IAAI,kCAAkC,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;KACtE;IAEe,IAAI,GAAA;QAChB,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,IAAIoC,MAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EACrC,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC,CACjF;AACD,YAAA,IAAIA,MAAI,CAAC,aAAa,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAC3C,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAEnC,OAAgB,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,CAC5D;AACD,YAAA,IAAImC,MAAI,CAAC,aAAa,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAC3C,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAEpC,OAAgB,CAAC,CAAC,CAC7D;SACJ,CAAC;KACL;IAEe,SAAS,CAAC,MAAc,EAAE,IAAY,EAAA;AAClD,QAAA,IAAI,SAAS,GAAG,iBAAiB,CAAC,MAAM,CAAC,GAAG,EAAEC,OAAgB,CAAC,EAC3D,CAAC,GAAG,IAAI,EACR,CAAC,GAAG,CAAC,CAAC,EACN,CAAC,GAAG,CAAC,CAAC,EACN,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,oBAAmB;AAEpC,QAAA,IAAI,SAAS,KAAK,eAAe,EAAE;AAC/B,YAAA,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;AACjD,YAAA,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,GAAGA,OAAgB,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;SACtE;AAAM,aAAA,IAAI,SAAS,KAAK,eAAe,EAAE;AACtC,YAAA,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;YACjD,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,GAAGA,OAAgB,IAAI,EAAE,EAAED,OAAgB,CAAC,CAAC;SACpF;aAAM;YACH,IAAI,IAAI,GAAG4D,OAAgB,CAAC,MAAM,CAAC,CAAC;AACpC,YAAA,CAAC,GAAG,gBAAgB,CAAC,IAAI,CAAC,GAAG,EAAEC,KAAc,GAAG,EAAE,EAAE,CAACL,IAAa,CAAC,CAAC;AACpE,YAAA,CAAC,GAAG,gBAAgB,CAAC,IAAI,CAAC,GAAG,EAAEK,KAAc,GAAG,EAAE,EAAEL,IAAa,CAAC,CAAC;SACtE;QAED,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC;KAC/B;IAEe,mBAAmB,CAAC,MAAc,EAAE,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,QAAgB,EAAA;QACjG,IAAI,MAAM,GAAG,MAAM,CAAC;AACpB,QAAA,IAAI,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;QAE1B,IAAI,MAAM,CAAC,GAAG,GAAGvD,OAAgB,EAAE;AAC/B,YAAA,IAAI,WAAW,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAEA,OAAgB,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;YAC5E,MAAM,GAAG,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;SACpD;aAAM,IAAI,MAAM,CAAC,GAAG,GAAGD,OAAgB,EAAE;YACtC,IAAI,WAAW,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAEA,OAAgB,CAAC,CAAC,CAAC;YAC7E,MAAM,GAAG,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;SACpD;aAAM;AACH,YAAA,MAAM,GAAG4D,OAAgB,CAAC,MAAM,CAAC,CAAC;YAClC,MAAM,GAAGE,aAAsB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SAC5C;QAED,IAAI,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,IAAI,QAAQ,GAAG,CAAC,CAAC,EAC7C,QAAQ,GAAG,MAAM,CAAC,SAAS,EAAE,IAAI,QAAQ,GAAG,CAAC,CAAC,CAAC;QAEnD,IAAI,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI,QAAQ,CAAC,GAAG,CAAC,EAC5E,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC;AAEnE,QAAA,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KACjB;AACJ;;AC3HD;;;;;;;;;;;;;;;;;AAiBG;AAsCH,MAAM,KAAK,CAAA;AAaP,IAAA,WAAA,CAAY,UAAwB,EAAE,EAAA;QAElC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC;QACnC,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,IAAI,CAAC;AAE/B,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACd,QAAA,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACd,QAAA,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACd,QAAA,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACd,QAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;KACf;IAED,OAAO,SAAS,CAAC,GAAmB,EAAA;QAChC,IAAI,CAAC,GAAG,EAAE;AACN,YAAA,OAAO,IAAI,OAAO,CAAC,CAAC,OAAY,KAAI;gBAChC,OAAO,CAAC,IAAI,CAAC,CAAC;AAClB,aAAC,CAAC,CAAC;SACN;;AACG,YAAA,OAAO,KAAK,CAAC,GAAG,EAAE,EAAE,CAAC;AAEhB,iBAAA,IAAI,CAAC,CAAC,CAAW,KAAI;AAClB,gBAAA,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE;oBACP,MAAM,KAAK,CAAC,+BAA+B,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;iBAC3D;AACD,gBAAA,OAAO,CAAC,CAAC,WAAW,EAAE,CAAC;AAC3B,aAAC,CAAC;AAED,iBAAA,IAAI,CAAC,CAAC,CAAc,KAAI;gBACrB,IAAI,CAAC,EAAE;AACH,oBAAA,OAAO,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;iBAC5B;qBAAM;AACH,oBAAA,MAAM,KAAK,CAAC,iCAAiC,GAAG,GAAG,CAAC,CAAC;iBACxD;AACL,aAAC,CAAC;iBAED,IAAI,CAAC,UAAU,OAAmB,EAAA;AAE/B,gBAAA,IAAI,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,MAAM,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,KAC5C,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,MAAM,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;qBAC1C,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CACtB,CAAC,EAAE;AACA,oBAAA,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;iBACtD;AAED,gBAAA,IAAI,CAAC,GAAW,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC5C,IAAI,MAAM,GAAkB,IAAI,CAAC;gBACjC,IAAI,KAAK,GAAkB,IAAI,CAAC;AAEhC,gBAAA,SAAS,OAAO,GAAA;oBACZ,IAAI,KAAK,GAAG,CAAC,CAAC;oBACd,KAAK,IAAI,CAAC,GAAG,CAAC,GAAI,CAAC,EAAE,EAAE;AACnB,wBAAA,IAAI,CAAC,IAAI,OAAO,CAAC,MAAM,EAAE;AACrB,4BAAA,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;yBAClE;AACD,wBAAA,IAAI,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE;AACnB,4BAAA,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;4BACV,MAAM;yBACT;qBACJ;AACD,oBAAA,IAAI,CAAC,CAAC,GAAG,KAAK,MAAM,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;AAAE,wBAAA,CAAC,EAAE,CAAC;AAChD,oBAAA,OAAO,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAQ,CAAC,CAAC;iBAC1E;gBAED,IAAI,CAAC,EAAE,CAAC,CAAC;AACT,gBAAA,SAAU;oBACN,CAAC,GAAG,OAAO,EAAE,CAAC;AACd,oBAAA,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG;wBAAE,MAAM;AACxB,oBAAA,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;oBAC/B,IAAI,CAAC,EAAE;wBACH,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAC5B,wBAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;4BACnB,MAAM,IAAI,KAAK,CAAC,+BAA+B,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBAC3D;qBACJ;yBAAM;AACH,wBAAA,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;wBAC9B,IAAI,CAAC,EAAE;4BACH,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACzB,4BAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;gCAClB,MAAM,IAAI,KAAK,CAAC,8BAA8B,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;6BAC1D;yBACJ;qBACJ;iBACJ;AAED,gBAAA,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC;gBAErC,IAAI,KAAK,GAAW,CAAC,CAAC;gBACtB,IAAI,MAAM,GAAW,CAAC,CAAC;gBAEvB,IAAI,CAAC,EAAE;oBACH,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;oBAC3B,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;iBAC/B;AAED,gBAAA,IAAI,EAAE,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,KAAK,MAAM,IAAI,CAAC,CAAC,CAAC,EAAE;AACvC,oBAAA,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;iBAClE;AAED,gBAAA,IAAI,MAAM,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;AAEjC,gBAAA,IAAI,MAAM,IAAI,KAAK,EAAE;AACjB,oBAAA,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;iBAC7E;AACD,gBAAA,IAAI,MAAM,KAAK,IAAI,EAAE;AACjB,oBAAA,MAAM,IAAI,KAAK,CAAC,oDAAoD,CAAC,CAAC;iBACzE;AACD,gBAAA,IAAI,KAAK,KAAK,IAAI,EAAE;AAChB,oBAAA,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAC;iBACxE;AACD,gBAAA,IAAI,CAAC,KAAK,GAAG,CAAC,MAAM,MAAM,GAAG,CAAC,CAAC,EAAE;AAC7B,oBAAA,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;iBAC9D;AAED,gBAAA,IAAI,WAAW,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;gBAErC,IAAI,WAAW,MAAM,KAAK,GAAG,MAAM,GAAG,CAAC,CAAC,EAAE;AACtC,oBAAA,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;iBAClE;gBAED,OAAO;AACH,oBAAA,KAAK,EAAE,KAAK;AACZ,oBAAA,MAAM,EAAE,MAAM;AACd,oBAAA,KAAK,EAAE,KAAK;AACZ,oBAAA,MAAM,EAAE,MAAM;oBACd,OAAO,EAAE,KAAK,GAAG,GAAG;AACpB,oBAAA,OAAO,EAAE,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG;AAC3B,oBAAA,CAAC,EAAE,CAAC;AACJ,oBAAA,OAAO,EAAE,OAAO;iBACnB,CAAC;AACN,aAAC,CAAC,CAAC;KACd;AAED,IAAA,QAAQ,CAAC,KAAwB,EAAA;AAC7B,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACtB;IAES,OAAO,CAAC,EAAU,EAAE,EAAU,EAAA;AACpC,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,KAAM,CAAC;AAExB,QAAA,IAAI,EAAE,GAAG,CAAC,EAAE;YACR,EAAE,GAAG,CAAC,EAAE,CAAC;AACT,YAAA,EAAE,IAAI,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;SACzB;AAAM,aAAA,IAAI,EAAE,IAAI,KAAK,CAAC,MAAM,EAAE;AAC3B,YAAA,EAAE,GAAG,CAAC,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AACjC,YAAA,EAAE,IAAI,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;SACzB;AAED,QAAA,IAAI,EAAE,GAAG,CAAC,EAAE;AACR,YAAA,EAAE,IAAI,KAAK,CAAC,KAAK,CAAC;SACrB;AAAM,aAAA,IAAI,EAAE,IAAI,KAAK,CAAC,KAAK,EAAE;AAC1B,YAAA,EAAE,IAAI,KAAK,CAAC,KAAK,CAAC;SACrB;AAED,QAAA,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,KAAK,GAAG,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAE9C,QAAA,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;KACzD;AAEM,IAAA,eAAe,CAAC,MAAc,EAAA;AACjC,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;KACjD;IAEM,SAAS,CAAC,GAAW,EAAE,GAAW,EAAA;QAErC,IAAI,CAAC,IAAI,CAAC,KAAK;AAAE,YAAA,OAAO,CAAC,CAAC;AAE1B,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QAEvB,IAAI,GAAG,GAAG,CAAC;YAAE,GAAG,IAAI,KAAK,CAAC;QAE1B,IAAI,EAAE,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC;AACpC,QAAA,IAAI,EAAE,GAAG,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC;QAC7B,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAExB,EAAE,IAAI,EAAE,CAAC;QACT,EAAE,IAAI,EAAE,CAAC;QAET,IAAI,EAAE,MAAM,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE;AAC3B,YAAA,EAAE,EAAE,CAAC;SACR;AAED,QAAA,IAAI,CAAC,IAAI,CAAC,UAAU,KAAK,EAAE,MAAM,IAAI,CAAC,UAAU,KAAK,EAAE,CAAC,EAAE;AAEtD,YAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,YAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YAErB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AACjC,YAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;AACrC,YAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;AACrC,YAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;SAC5C;AAED,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;AAC9C,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;AAE9C,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAE9B,OAAO,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;KACzC;AACJ;;MCrQY,eAAe,CAAA;IAgBxB,WAAY,CAAA,MAAc,EAAE,SAAA,GAAoB,CAAC,EAAA;AAC7C,QAAA,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;AAC5B,QAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACpB,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;AACvB,QAAA,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AACjB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;KACjC;IAEM,IAAI,GAAA;QACP,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,YAAY,EAAE,CAAC;KACvB;AAED;;;;;;AAMG;AACI,IAAA,gBAAgB,CAAC,CAAW,EAAE,MAAA,GAAkB,KAAK,EAAA;AACxD,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;AAExB,QAAA,IAAI,GAAG,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,EACxE,GAAG,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,EACxE,GAAG,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,EACxE,GAAG,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;QAE7E,MAAM,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,EAChC,QAAQ,GAAG,IAAI,GAAG,CAAC,CAAC;AAExB,QAAA,IAAI,QAAQ,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,EACjC,OAAO,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC;AAErC,QAAA,IAAI,SAAS,GAAG,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAC;QAEpC,IAAI,EAAE,GAAG,CAAC,EACN,EAAE,GAAG,CAAC,EACN,CAAC,GAAG,CAAC,CAAC;AAEV,QAAA,IAAI,OAAO,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAElC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;AAE1B,YAAA,IAAI,IAAI,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,EACjE,IAAI,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;AAEtE,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;AAC1B,gBAAA,IAAI,IAAI,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,EACjE,IAAI,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;AACtE,gBAAA,IAAI,EAAE,GAAGC,0BAAgC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAE,CAAC;AACnE,gBAAA,kBAAkB,CAAC,EAAE,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;gBACpC,QAAQ,CAAC,EAAE,EAAE,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC5B,OAAO,CAAC,EAAE,EAAE,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAC3B,gBAAA,kBAAkB,CAAC,EAAE,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;gBACpC,QAAQ,CAAC,EAAE,EAAE,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC5B,OAAO,CAAC,EAAE,EAAE,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAE3B,gBAAA,SAAS,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;aACvB;SACJ;QAED,IAAI,MAAM,EAAE;AACR,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE;gBAC/B,IAAI,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC;AACvC,gBAAA,kBAAkB,CAAC,CAAC,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;gBACnC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC7B,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAE5B,gBAAA,kBAAkB,CAAC,CAAC,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;AACnC,gBAAA,QAAQ,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AACjC,gBAAA,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;aACnC;SACJ;QAED,OAAO;AACH,YAAA,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,EAAE,QAAQ,CAAC;AACvE,YAAA,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC,EAAE,QAAQ,CAAC;SACzE,CAAC;KACL;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;QACxB,OAAO,CAAC,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YAC9B,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAG,CAAC;AAC/B,YAAA,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;YACvB,CAAC,CAAC,SAAS,EAAE,CAAC;YACd,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SACvC;AAED,QAAA,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;QACzB,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;SAChC;KACJ;AAEM,IAAA,GAAG,CAAC,QAAsB,EAAA;AAC7B,QAAA,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE;AACxB,YAAA,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC;AAC7B,YAAA,IAAI,QAAQ,CAAC,QAAQ,EAAE;AACnB,gBAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAChC;iBAAM;AACH,gBAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC9B;SACJ;KACJ;AAEM,IAAA,MAAM,CAAC,QAAsB,EAAA;AAChC,QAAA,IAAI,QAAQ,CAAC,YAAY,EAAE;AACvB,YAAA,QAAQ,CAAC,mBAAmB,GAAG,KAAK,CAAC;AACrC,YAAA,QAAQ,CAAC,YAAY,GAAG,KAAK,CAAC;AAC9B,YAAA,IAAI,GAAmB,CAAC;AACxB,YAAA,IAAI,QAAQ,CAAC,QAAQ,EAAE;AACnB,gBAAA,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;aACvB;iBAAM;AACH,gBAAA,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;aACrB;AACD,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACjC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAC1B,oBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBACjB,OAAO;iBACV;aACJ;SACJ;KACJ;IAES,YAAY,GAAA;QAElB,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,OAAQ,CAAC;QAExC,IAAI,CAAC,YAAY,GAAG,IAAI,WAAW,CAAC,CAAC,EAAE,EAAC,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAC,CAAC,CAAC;AAC/E,QAAA,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;QAEzB,IAAI,CAAC,oBAAoB,GAAG,IAAI,WAAW,CAAC,CAAC,EAAE,EAAC,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAC,CAAC,CAAC;AACvF,QAAA,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,CAAC;QAEjC,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAEnC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC;QAEnE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC;AAE1E,QAAA,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAClG,QAAA,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KACtG;IAES,YAAY,GAAA;AAElB,QAAA,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,OAAO,CAAC,mBAAmB,EAAE;AACvE,YAAA,QAAQ,EAAE;AACN,gBAAA,aAAa,EAAE,WAAW;AAC1B,gBAAA,gBAAgB,EAAE,MAAM;AACxB,gBAAA,eAAe,EAAE,MAAM;AACvB,gBAAA,YAAY,EAAE,MAAM;AACvB,aAAA;AACD,YAAA,UAAU,EAAE;AACR,gBAAA,WAAW,EAAE,MAAM;AACnB,gBAAA,UAAU,EAAE,MAAM;AAClB,gBAAA,SAAS,EAAE,MAAM;AACpB,aAAA;AACD,YAAA,YAAY,EACR,CAAA;;;;;;;;;;;AAWQ,uBAAA,CAAA;AACZ,YAAA,cAAc,EACV,CAAA;;;;;;;;;;AAUU,yBAAA,CAAA;AACjB,SAAA,CAAC,CAAC,CAAC;KACP;AACJ;;ACrND,MAAM,aAAa,GAAqB,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;MAgDvD,MAAM,CAAA;AAaf,IAAA,WAAA,CAAY,cAAsB,EAAE,EAAA;AAEhC,QAAA,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;AAEhC,QAAA,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,aAAa,CAAC,CAAC;AAE1C,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAElB,QAAA,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AAEjB,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;QAEhC,IAAI,CAAC,SAAS,GAAG;YACb,MAAM,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE;YACrB,MAAM,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE;YACrB,aAAa,EAAE,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE;YACnC,aAAa,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,IAAI,CAC7B,CAAC,CAAO,KAAK,iBAAiB,CAAC,CAAC,EAAE;AAC9B,gBAAA,gBAAgB,EAAE,aAAa;AAClC,aAAA,CAAC,CAAC;YACP,MAAM,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE;SACxB,CAAC;KACL;IAEM,IAAI,CAAC,MAAsB,EAAE,QAA2B,EAAA;AAC3D,QAAA,IAAI,MAAM,CAAC,MAAM,EAAE;AACf,YAAA,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;gBACjD,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG;oBAC7C,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,OAAO,EAAE,CAAC,EAAE,uBAAuB,EAAE,CAAC;iBAChE,CAAC;aACL;AACD,YAAA,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC;SAC5D;QACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,QAAQ,EAAC,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,EAAE,CAAC;KAChB;AAEM,IAAA,KAAK,CAAC,MAAsB,EAAA;QAC/B,OAAO,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;AACzC,aAAA,IAAI,CAAC,CAAC,QAAkB,KAAI;AACzB,YAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;gBACd,MAAM,KAAK,CAAC,CAAmB,gBAAA,EAAA,MAAM,CAAC,GAAG,CAAA,CAAA,CAAG,CAAC,CAAC;aACjD;AACD,YAAA,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC,QAAQ,CAAC,CAAC;AAC3D,SAAC,CAAC;AAED,aAAA,IAAI,CAAC,CAAC,IAAS,KAAI;YAChB,OAAO,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAC,CAAC;AAEzC,SAAC,CAAC;AAED,aAAA,KAAK,CAAC,CAAC,GAAU,KAAI;AAClB,YAAA,OAAO,EAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAC,CAAC;AAClD,SAAC,CAAC,CAAC;KACV;AAEM,IAAA,iBAAiB,CAAC,MAAS,EAAA;QAC9B,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAChD,IAAI,CAAC,EAAE;gBACH,OAAO,CAAC,CAAC,OAAO,CAAC;aACpB;SACJ;AACD,QAAA,OAAO,CAAC,CAAC;KACZ;AAEM,IAAA,MAAM,CAAC,MAAS,EAAA;QACnB,OAAO,MAAM,CAAC,MAAM,CAAC;KACxB;IAES,aAAa,CAAC,OAA0B,EAAE,MAAS,EAAA;AACzD,QAAA,IAAI,OAAO,CAAC,OAAO,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,0BAA0B,CAAC,EAAE;AACzF,YAAA,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AACtD,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;AACvD,YAAA,OAAO,CAAC,uBAAuB,GAAG,CAAC,CAAC;SACvC;aAAM;AACH,YAAA,OAAO,CAAC,uBAAuB,GAAG,qBAAqB,CAAC,MAAK;AACzD,gBAAA,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AACxC,aAAC,CAAC,CAAC;SACN;KACJ;IAES,eAAe,CAAC,CAAe,EAAE,QAAmB,EAAA;AAC1D,QAAA,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACrB,QAAA,IAAI,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;QAC7B,IAAI,MAAM,KAAK,MAAM,CAAC,MAAM,CAAC,OAAQ,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,YAAa,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;YACjG,IAAI,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACtD,IAAI,OAAO,IAAI,OAAO,CAAC,OAAO,GAAG,CAAC,EAAE;gBAChC,OAAO,CAAC,OAAO,EAAE,CAAC;AAClB,gBAAA,oBAAoB,CAAC,OAAO,CAAC,uBAAwB,CAAC,CAAC;AACvD,gBAAA,OAAO,CAAC,uBAAuB,GAAG,qBAAqB,CAAC,MAAK;AACzD,oBAAA,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,MAAO,CAAC,CAAC;AACzC,iBAAC,CAAC,CAAC;aACN;SACJ;QACD,IAAI,CAAC,KAAK,EAAE,CAAC;KAChB;IAES,KAAK,GAAA;AAEX,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,EAAE;YAE7D,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,EAAG,CAAC;AAE3B,YAAA,IAAI,CAAC,CAAC;gBAAE,OAAO;AAEf,YAAA,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;AAEjB,YAAA,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;gBAE1B,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAEhB,OAAO,KAAK,CAAC,CAAC,CAAC,GAAI,EAAE,CAAC,CAAC,OAAO,IAAI,EAAE,CAAC;AAChC,qBAAA,IAAI,CAAC,CAAC,QAAkB,KAAI;AACzB,oBAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;wBACd,MAAM,KAAK,CAAC,CAAmB,gBAAA,EAAA,CAAC,CAAC,GAAG,CAAA,CAAA,CAAG,CAAC,CAAC;qBAC5C;AACD,oBAAA,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC,QAAQ,CAAC,CAAC;AACtD,iBAAC,CAAC;AACD,qBAAA,IAAI,CAAC,CAAC,IAAS,KAAI;oBAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,oBAAA,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;AAC3D,iBAAC,CAAC;AACD,qBAAA,KAAK,CAAC,CAAC,GAAU,KAAI;oBAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,oBAAA,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,EAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAC,CAAC,CAAC;AACpE,iBAAC,CAAC,CAAC;aAEV;iBAAM;gBACH,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,EAAC,MAAM,EAAE,OAAO,EAAC,CAAC,CAAC;aAC9C;SACJ;AAAM,aAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,EAAE;YAC5B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SAC7C;KACJ;AAEM,IAAA,KAAK,CAAC,MAAS,EAAA;QAElB,IAAI,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;YACzC,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;AACpD,YAAA,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,uBAAuB,CAAC,CAAC;YACtF,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,uBAAuB,GAAG,CAAC,CAAC;SACvE;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACpD,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AACxB,YAAA,IAAI,EAAE,IAAI,EAAE,CAAC,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;gBAC5D,EAAE,CAAC,QAAQ,CAAC,EAAC,QAAQ,EAAE,OAAO,EAAC,CAAC,CAAC;;AAEjC,gBAAA,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;aACzB;SACJ;KACJ;IAEM,QAAQ,GAAA;QACX,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACpD,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,EAAE,EAAE;AACJ,gBAAA,IAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;gBAC9B,IAAI,MAAM,IAAI,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;oBACnD,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;AACpD,oBAAA,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,uBAAuB,CAAC,CAAC;oBACtF,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,uBAAuB,GAAG,CAAC,CAAC;iBACvE;gBACD,EAAE,CAAC,QAAQ,CAAC,EAAC,QAAQ,EAAE,OAAO,EAAC,CAAC,CAAC;;AAEjC,gBAAA,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;aACzB;SACJ;AACD,QAAA,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;KACpB;AAED,IAAA,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;AAED,IAAA,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;AACJ;;MCtOY,gBAAgB,CAAA;IAoBzB,WAAY,CAAA,MAAc,EAAE,OAAA,GAAmC,EAAE,EAAA;QAE7D,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,YAAY,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,YAAY,IAAI,CAAC,CAAC;AAE/C,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAC5B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC;QAEtC,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,IAAI,GAAG,CAAC;QACnC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,GAAG,CAAC;QAErC,IAAI,CAAC,MAAM,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;AAEnC,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;KAC3B;AAED,IAAA,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;AAED,IAAA,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;IAEM,IAAI,GAAA;QAEP,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,CAAC;QAEnD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,OAAO,CAAC;AAI/C;;AAEqF;AACrF,QAAA,MAAM,aAAa,GAAG,IAAI,OAAO,CAAC,eAAe,EAAE;AAC/C,YAAA,UAAU,EAAE;AACR,gBAAA,UAAU,EAAE,MAAM;AACrB,aAAA;AACD,YAAA,QAAQ,EAAE;AACN,gBAAA,SAAS,EAAE,WAAW;AACzB,aAAA;AACD,YAAA,YAAY,EACR,CAAA;;;;;;;AAOY,0BAAA,EAAmC,GAAG,CAAA;;;AAGZ,oDAAA,EAAA,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAA;AAC9B,oDAAA,EAAA,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,QAAQ,CAAA;AAC/B,oDAAA,EAAA,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAA;AAC9B,oDAAA,EAAA,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,QAAQ,CAAA;AACnE,iBAAA,CAAA;AACN,YAAA,cAAc,EAAE,CAAA;;;;;;;;;;;;;;;;;AAiBF,yBAAA,CAAA;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,MAAM,SAAS,GAAG,IAAI,OAAO,CAAC,WAAW,EAAE;AACvC,YAAA,UAAU,EAAE;AACR,gBAAA,UAAU,EAAE,MAAM;AAClB,gBAAA,QAAQ,EAAE,MAAM;AACnB,aAAA;AACD,YAAA,QAAQ,EAAE,EAAE;AACZ,YAAA,YAAY,EAAE,CAAA;;;;;;;;AAQF,uBAAA,CAAA;AACZ,YAAA,cAAc,EAAE,CAAA;;;;;;AAMF,yBAAA,CAAA;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;AACxC,QAAA,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;;QAGpC,IAAI,CAAC,YAAY,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE;YAC/C,KAAK,EAAE,IAAI,CAAC,MAAM;YAClB,MAAM,EAAE,IAAI,CAAC,OAAO;AACpB,YAAA,QAAQ,EAAE,KAAK;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;AAEzB,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;;AAG/F,QAAA,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,EAAE;YAE3D,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACpB,YAAA,MAAM,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC;AAEnB,YAAA,IAAI,QAAQ,GAAG,IAAI,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAEzD,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;AAC1B,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;AAC1B,oBAAA,IAAI,GAAG,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBACjC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;AAC7B,oBAAA,QAAQ,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;iBACpC;aACJ;YAED,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAC3D,QAAQ,EACR,CAAC,EACD,QAAQ,CAAC,MAAM,GAAG,CAAC,CACtB,CAAC;AAEF,YAAA,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC;gBACtB,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,MAAO,CAAC;SACrH;;QAGD,MAAM,SAAS,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAEjF,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,SAAS,EAAE,CAAC,EAAE,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC9F;AAES,IAAA,kBAAkB,CAAC,OAAgB,EAAA;AACzC,QAAA,IAAI,OAAO,GAAG,OAAO,CAAC,gBAAgB,CAAC;QACvC,IACI,OAAO,CAAC,IAAI;YACZ,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAKC,YAAqB;YACjD,OAAO;YACP,OAAO,CAAC,MAAM,EAChB;AACE,YAAA,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YAChC,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAErC,IAAI,MAAM,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;YAEjD,IAAI,MAAM,EAAE;gBACR,IAAI,OAAO,CAAC,MAAM,CAAC,OAAQ,CAAC,eAAe,EAAE;AACzC,oBAAA,OAAO,CAAC,sBAAsB,CAACC,CAAU,CAAC,CAAC;AAC3C,oBAAA,OAAO,CAAC,sBAAsB,CAACC,CAAU,CAAC,CAAC;AAC3C,oBAAA,OAAO,CAAC,sBAAsB,CAACC,CAAU,CAAC,CAAC;AAC3C,oBAAA,OAAO,CAAC,sBAAsB,CAACC,CAAU,CAAC,CAAC;iBAC9C;AAED,gBAAA,IAAI,UAAU,GAAG,OAAO,CAAC,mBAAmB,CAAC;AAE7C,gBAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACzB,gBAAA,MAAM,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEjB,gBAAA,IAAI,cAAc,GAAG,CAAC,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC;AAE5E,gBAAA,MAAM,CAAC,GAAG,IAAI,CAAC,YAAa,CAAC;AAC7B,gBAAA,IAAI,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC;AAC7B,gBAAA,IAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC;AAEhC,gBAAA,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,yBAA0B,CAAC,CAAC;gBAErD,CAAC,CAAC,QAAQ,EAAE,CAAC;gBAEb,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;gBACvC,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAE/E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;gBAC/C,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,cAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAErF,gBAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACzE,EAAE,CAAC,YAAY,CACX,EAAE,CAAC,cAAc,EACjB,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,QAAQ,EACzC,EAAE,CAAC,YAAY,EACf,CAAC,CACJ,CAAC;AAEF,gBAAA,EAAE,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;;;;AAKhC,gBAAA,CAAC,CAAC,iBAAiB,CAAC,UAAW,CAAC,CAAC;AAEjC,gBAAA,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC;gBAE7B,CAAC,CAAC,QAAQ,EAAE,CAAC;gBACb,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,eAAgB,CAAC,CAAC;gBACtD,EAAE,CAAC,mBAAmB,CAClB,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,EAChC,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAC9B,EAAE,CAAC,KAAK,EACR,KAAK,EACL,CAAC,EACD,CAAC,CACJ,CAAC;AACF,gBAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;gBAC9B,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,yBAA0B,CAAC,CAAC;AAC/D,gBAAA,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAC/C,gBAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,CAAC,CAAC;AACpE,gBAAA,OAAO,IAAI,CAAC;aACf;iBAAM;AACH,gBAAA,OAAO,IAAI,CAAC;aACf;SACJ;AACD,QAAA,OAAO,KAAK,CAAC;KAChB;AAES,IAAA,oBAAoB,CAAC,OAAgB,EAAA;AAC3C,QAAA,IAAI,OAAO,GAAG,OAAO,CAAC,gBAAgB,CAAC;QACvC,IACI,OAAO,CAAC,IAAI;YACZ,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAKJ,YAAqB;YACjD,OAAO;YACP,OAAO,CAAC,MAAM,EAChB;AACE,YAAA,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YAChC,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAErC,IAAI,MAAM,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;YAEjD,IAAI,MAAM,EAAE;gBACR,IAAI,OAAO,CAAC,MAAM,CAAC,OAAQ,CAAC,eAAe,EAAE;AACzC,oBAAA,OAAO,CAAC,sBAAsB,CAACC,CAAU,CAAC,CAAC;AAC3C,oBAAA,OAAO,CAAC,sBAAsB,CAACC,CAAU,CAAC,CAAC;AAC3C,oBAAA,OAAO,CAAC,sBAAsB,CAACC,CAAU,CAAC,CAAC;AAC3C,oBAAA,OAAO,CAAC,sBAAsB,CAACC,CAAU,CAAC,CAAC;iBAC9C;AAED,gBAAA,IAAI,UAAU,GAAG,OAAO,CAAC,mBAAmB,CAAC;AAE7C,gBAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACzB,gBAAA,MAAM,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEjB,gBAAA,IAAI,cAAc,GAAG,CAAC,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC;AAE5E,gBAAA,MAAM,CAAC,GAAG,IAAI,CAAC,YAAa,CAAC;AAC7B,gBAAA,MAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC;AAC/B,gBAAA,MAAM,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC;AAElC,gBAAA,CAAC,CAAC,iBAAiB,CAAC,UAAW,CAAC,CAAC;gBAEjC,CAAC,CAAC,QAAQ,EAAE,CAAC;gBAEb,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;gBACvC,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAE/E,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;gBAC/C,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,cAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAErF,gBAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACzE,EAAE,CAAC,YAAY,CACX,EAAE,CAAC,cAAc,EACjB,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,QAAQ,EACzC,EAAE,CAAC,YAAY,EACf,CAAC,CACJ,CAAC;AAEF,gBAAA,EAAE,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;AAEhC,gBAAA,OAAO,IAAI,CAAC;aACf;iBAAM;AACH,gBAAA,OAAO,IAAI,CAAC;aACf;SACJ;AACD,QAAA,OAAO,KAAK,CAAC;KAChB;AAES,IAAA,cAAc,CAAC,OAAgB,EAAA;QACrC,IAAI,OAAO,CAAC,MAAM,CAAC,OAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE;AACzC,YAAA,OAAO,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;SAC3C;aAAM;AACH,YAAA,OAAO,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;SAC7C;KACJ;AAEM,IAAA,UAAU,CAAC,OAAgB,EAAA;AAC9B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACzB,QAAA,MAAM,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEjB,QAAA,IAAI,CAAC,YAAa,CAAC,QAAQ,EAAE,CAAC;AAE9B,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AACzB,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAC1B,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAErB,IAAI,OAAO,CAAC,YAAY,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;AACtD,YAAA,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;AAC9B,YAAA,OAAO,CAAC,gBAAgB,GAAG,OAAO,CAAC,mBAAmB,CAAC;AACvD,YAAA,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACpC,YAAA,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACpC,YAAA,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;SACvC;AACD,QAAA,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;AAE5B,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACzB,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AACxB,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AAEpB,QAAA,IAAI,CAAC,YAAa,CAAC,UAAU,EAAE,CAAC;KACnC;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;AACpB,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACzB,YAAA,MAAM,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEjB,YAAA,IAAI,CAAC,YAAa,CAAC,QAAQ,EAAE,CAAC;AAE9B,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AACzB,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAC1B,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AAErB,YAAA,IAAI,SAAS,GAAG,CAAC,EACb,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;AAEzC,YAAA,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,SAAS,GAAG,IAAI,EAAE;gBAClE,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAG,CAAC;gBACrC,IAAI,OAAO,CAAC,YAAY,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;AACtD,oBAAA,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;AAC9B,oBAAA,OAAO,CAAC,gBAAgB,GAAG,OAAO,CAAC,mBAAmB,CAAC;AACvD,oBAAA,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACpC,oBAAA,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACpC,oBAAA,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;iBACvC;AACD,gBAAA,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;gBAC5B,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,SAAS,CAAC;aACpD;AAED,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AACpB,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACzB,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAExB,YAAA,IAAI,CAAC,YAAa,CAAC,UAAU,EAAE,CAAC;SACnC;KACJ;AAED,IAAA,IAAW,SAAS,GAAA;AAChB,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;KAC7B;AAEM,IAAA,KAAK,CAAC,OAAgB,EAAA;AACzB,QAAA,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC7B;AAEM,IAAA,OAAO,CAAC,OAAgB,EAAA;AAC3B,QAAA,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KAChC;AAEM,IAAA,MAAM,CAAC,OAAgB,EAAA;;KAE7B;IAEM,KAAK,GAAA;AACR,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACvB,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,EAAG,CAAC;AAC3B,YAAA,CAAC,CAAC,WAAW,GAAG,KAAK,CAAC;SACzB;KACJ;AAED;;;AAGG;AACI,IAAA,IAAI,CAAC,GAAQ,EAAA;AAChB,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACxB;AAED;;;AAGG;AACI,IAAA,IAAI,CAAC,GAAQ,EAAA;AAChB,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACxB;AAEJ;;ACxbD;;AAEG;AAIH;;;AAGG;AACI,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC;;ACVpE;AAwBA,MAAM,kBAAmB,SAAQ,UAAmB,CAAA;AAChD,IAAA,WAAA,CAAY,aAAqB,CAAC,EAAA;AAC9B,QAAA,KAAK,CAAC,UAAU,EAAE,qBAAqB,CAAC,CAAC;KAC5C;AAEkB,IAAA,UAAU,CAAC,CAAkB,EAAA;AAC5C,QAAA,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAE,CAAC,2BAA2B,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AAEjE,QAAA,CAAC,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC5B,QAAA,CAAC,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAChC,QAAA,CAAC,CAAC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC/B,QAAA,CAAC,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAC3B,QAAA,CAAC,CAAC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC/B,QAAA,CAAC,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAChC,QAAA,CAAC,CAAC,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AACpC,QAAA,CAAC,CAAC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAEnC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;KACjC;AAEM,IAAA,QAAQ,CAAC,KAAY,EAAA;AAExB,QAAA,IAAI,KAAK,CAAC,KAAK,EAAE;AACb,YAAA,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;AACpB,YAAA,IAAI,KAAK,GAAG;gBACR,KAAK,EAAE,CAAC,CAAC,KAAK;gBACd,MAAM,EAAE,CAAC,CAAC,MAAM;gBAChB,KAAK,EAAE,CAAC,CAAC,KAAK;gBACd,MAAM,EAAE,CAAC,CAAC,MAAM;gBAChB,OAAO,EAAE,CAAC,CAAC,OAAO;gBAClB,OAAO,EAAE,CAAC,CAAC,OAAO;gBAClB,CAAC,EAAE,CAAC,CAAC,CAAC;aACT,CAAC;YAEF,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI;gBAC5B,IAAI,OAAO,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAC/C,gBAAA,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;gBAEvB,CAAC,CAAC,WAAW,CAAC;AACN,oBAAA,KAAK,EAAE,KAAK;AACZ,oBAAA,OAAO,EAAE,OAAO;iBACnB,EAAE;AACC,oBAAA,OAAO,CAAC,MAAM;AACjB,iBAAA,CACJ,CAAC;AACN,aAAC,CAAC,CAAC;SACN;aAAM;YACH,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI;gBAC5B,CAAC,CAAC,WAAW,CAAC;AACV,oBAAA,KAAK,EAAE,IAAI;AACd,iBAAA,CAAC,CAAC;AACP,aAAC,CAAC,CAAC;SACN;KACJ;AAEe,IAAA,IAAI,CAAC,OAAgB,EAAA;AACjC,QAAA,IAAI,OAAO,CAAC,WAAW,EAAE;AACrB,YAAA,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;gBAC1B,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,EAAG,CAAC;gBAEjC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;AAE1C,gBAAA,IAAI,QAAQ,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,KAAK,QAAQ,CAAC,EAAE,IAAI,OAAO,CAAC,WAAW,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,IAAI,GAAG,GAAG,GAAG,CAAC;AAE1G,gBAAA,IAAI,MAAM,GAAG,IAAI,YAAY,CAAC;AAC1B,oBAAA,IAAI,CAAC,SAAS;oBACd,QAAQ;oBACR,OAAO,CAAC,MAAM,CAAC,OAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC;AACxD,oBAAA,OAAO,CAAC,MAAM,CAAC,OAAQ,CAAC,aAAa;AACrC,oBAAA,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG;AAC7B,oBAAA,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG;AAC7B,oBAAA,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG;AAC7B,oBAAA,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG;;AAE7B,oBAAA,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG;AAC5B,oBAAA,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc;AACvC,oBAAA,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;AACrC,oBAAA,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;AACrC,oBAAA,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;oBACrC,OAAO,CAAC,MAAM,CAAC,aAAa;AAC/B,iBAAA,CAAC,CAAC;gBAEH,IAAI,CAAC,SAAS,EAAE,CAAC;gBAEjB,CAAC,CAAC,WAAW,CAAC;AACV,oBAAA,MAAM,EAAE,MAAM;iBACjB,EAAE;AACC,oBAAA,MAAM,CAAC,MAAM;AAChB,iBAAA,CAAC,CAAC;aACN;iBAAM;AACH,gBAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACpC;SACJ;aAAM;YACH,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;KACJ;AACJ,CAAA;AAED,MAAM,qBAAqB,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAqSxB;;ACxZN,SAAS,cAAc,CAAC,KAAmB,EAAA;AACvC,IAAA,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AACzF,IAAA,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACd,IAAA,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACd,IAAA,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACd,IAAA,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AAClB,CAAC;AAUD;;;;AAIG;AACH,MAAM,OAAO,CAAA;AAmET,IAAA,WAAA,CAAY,UAA0B,EAAE,EAAA;AAFjC,QAAA,IAAA,CAAA,cAAc,GAAiB,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAI9D,QAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAE/F,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,IAAI,EAAE,CAAC;AAEnC,QAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,IAAI,EAAE,CAAC;AAE1C,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,IAAI,EAAE,CAAC;AAEvC,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,IAAI,EAAE,CAAC;AAE9C,QAAA,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;AAEhB,QAAA,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;AAEjB,QAAA,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;AAElB,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AAEf,QAAA,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;AAEhB,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AAEf,QAAA,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,IAAI,SAAS,GAAG,OAAO,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;QAEpG,IAAI,CAAC,mBAAmB,CACpB,OAAO,CAAC,GAAG,IAAI,IAAI,EACnB,OAAO,CAAC,MAAM,IAAI,GAAG,EACrB,OAAO,CAAC,IAAI,IAAI,GAAG,EACnB,OAAO,CAAC,GAAG,IAAI,MAAM,CACxB,CAAC;KACL;IAEM,aAAa,GAAA;AAChB,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KACrB;IAEM,YAAY,GAAA;AACf,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KACrB;IAEM,cAAc,GAAA;AACjB,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KACrB;IAEM,WAAW,GAAA;AACd,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KACrB;IAEM,gBAAgB,GAAA;AACnB,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KACrB;IAEM,eAAe,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KACrB;IAEM,uBAAuB,GAAA;AAC1B,QAAA,OAAO,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC;KACvC;IAEM,mBAAmB,GAAA;AACtB,QAAA,OAAO,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC;KACnC;IAEM,0BAA0B,GAAA;AAC7B,QAAA,OAAO,IAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC;KAC1C;AAED;;;;;;;AAOG;AACI,IAAA,mBAAmB,CAAC,KAAa,EAAE,MAAc,EAAE,IAAY,EAAE,GAAW,EAAA;AAC/E,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,YAAY,CAAC,CAAC;AACjD,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC;QACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC;AAC/B,QAAA,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;AACxB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QAEf,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAChC,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,KAAK,EACV,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,GAAG,EACR,IAAI,EACJ,GAAG,CACN,CAAC;QACF,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;KACjE;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,UAAgB,EAAA;QACjC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAClE,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;AAEtE,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC;;AAGrC,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QAC9B,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;AAG3B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QAC9B,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;AAG3B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QAC9B,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;AAG3B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QAC9B,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;AAG3B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;AAC9B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QAC9B,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;AAG3B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;AAC9B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QAC9B,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KAC9B;AAED;;;;;AAKG;AACI,IAAA,aAAa,CAAC,KAAW,EAAA;AAC5B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACxB,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjD,YAAA,IAAI,CAAC,IAAI,CAAC,EAAE;AACR,gBAAA,OAAO,KAAK,CAAC;aAChB;SACJ;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;AAKG;AACI,IAAA,uBAAuB,CAAC,MAAc,EAAA;AACzC,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,EAClB,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;QAChB,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QAC5D,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QAC5D,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QAC5D,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QAC5D,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;AAC5D,QAAA,OAAO,IAAI,CAAC;KACf;AAEM,IAAA,oBAAoB,CAAC,MAAc,EAAA;AACtC,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,EAClB,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;QAChB,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AACzC,YAAA,OAAO,KAAK,CAAC;AACjB,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;AAKG;AACI,IAAA,cAAc,CAAC,MAAc,EAAA;AAChC,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,EAClB,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;QAChB,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QAC5D,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QAC5D,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QAC5D,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QAC5D,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QAC5D,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;AAC5D,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;;AAMG;IACI,eAAe,CAAC,MAAY,EAAE,MAAc,EAAA;AAC/C,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;QAChB,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QACjE,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QACjE,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QACjE,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QACjE,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;QACjE,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,KAAK,CAAC;AACjE,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;AAKG;AACI,IAAA,WAAW,CAAC,GAAQ,EAAA;AACvB,QAAA,IAAI,MAAM,GAAY,IAAI,EACtB,IAAY,EACZ,GAAW,CAAC;AAEhB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACxB,IAAI,GAAG,CAAC,CAAC;YACT,GAAG,GAAG,CAAC,CAAC;YACR,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;AACrD,gBAAA,IAAI,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3D,gBAAA,IAAI,CAAC,GAAG,CAAC,EAAE;AACP,oBAAA,IAAI,EAAE,CAAC;iBACV;qBAAM;AACH,oBAAA,GAAG,EAAE,CAAC;iBACT;aACJ;AAED,YAAA,IAAI,GAAG,KAAK,CAAC,EAAE;AACX,gBAAA,OAAO,KAAK,CAAC;aAChB;AAAM,iBAAA,IAAI,IAAI,GAAG,CAAC,EAAE;gBACjB,MAAM,GAAG,IAAI,CAAC;aACjB;SACJ;AAED,QAAA,OAAO,MAAM,CAAC;KACjB;AACJ;;ACtVD,MAAM,WAAW,GAAiB;AAC9B;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,SAAS;CACZ,CAAC;AAWF;;;;;;;;;;;;;;;AAeG;AACH,MAAM,MAAM,CAAA;IA6GR,WAAY,CAAA,QAAyB,EAAE,OAAA,GAAyB,EAAE,EAAA;AAC9D,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAEzB,IAAI,CAAC,MAAM,GAAG,YAAY,CAAe,WAAW,EAAE,IAAI,CAAC,CAAC;QAE5D,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,IAAI,IAAI,EAAE,CAAC;QAErC,IAAI,CAAC,OAAO,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;QAEnC,IAAI,CAAC,MAAM,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;QAElC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,GAAG,CAAC;QAErC,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC;AAE5C,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,IAAI,EAAE,CAAC;AAEhC,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAElC,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAElC,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;;QAGlC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QAC3B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QAC3B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QAC3B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;AAEtB,QAAA,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;AAC9B,QAAA,IAAI,CAAC,6BAA6B,GAAG,GAAG,CAAC;AAEzC,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEnB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AAExB,QAAA,IAAI,OAAO,CAAC,QAAQ,EAAE;YAClB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBACzD,IAAI,EAAE,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAE7B,gBAAA,IAAI,EAAE,GAAG,IAAI,OAAO,CAAC;oBACjB,GAAG,EAAE,IAAI,CAAC,UAAU;oBACpB,MAAM,EAAE,IAAI,CAAC,OAAO;AACpB,oBAAA,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;AACX,oBAAA,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;AACb,iBAAA,CAAC,CAAC;gBAEH,EAAE,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;AAC7C,gBAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;gBAEvB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;aAC7F;SACJ;aAAM;AACH,YAAA,IAAI,IAAI,GAAG,GAAG,EACV,GAAG,GAAG,OAAO,CAAC;AAElB,YAAA,IAAI,EAAE,GAAG,IAAI,OAAO,CAAC;gBACjB,GAAG,EAAE,IAAI,CAAC,UAAU;gBACpB,MAAM,EAAE,IAAI,CAAC,OAAO;AACpB,gBAAA,IAAI,EAAE,IAAI;AACV,gBAAA,GAAG,EAAE,GAAG;AACX,aAAA,CAAC,CAAC;YAEH,EAAE,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;AAC7C,YAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;YAEvB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7F;QAED,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;AAEvD,QAAA,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;AAE7B,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AAEzB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AAExB,QAAA,IAAI,CAAC,GAAG,CACJ,OAAO,CAAC,GAAG,IAAI,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EACtC,OAAO,CAAC,IAAI,IAAI,IAAI,IAAI,EAAE,EAC1B,OAAO,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CACxC,CAAC;KACL;IAEM,YAAY,GAAA;QACf,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,EACX,CAAC,GAAG,IAAI,CAAC,EAAE,EACX,CAAC,GAAG,IAAI,CAAC,EAAE,EACX,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;AAEnB,QAAA,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;AACtF,YAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;aACnD;AACD,YAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACzB;aAAM;AACH,YAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACxB;AAED,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACjB,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACjB,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACjB,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACxB;AAEM,IAAA,YAAY,CAAC,QAAkB,EAAA;AAClC,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC3C,YAAA,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAU,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/D;QACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;QAEvD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;KAChD;AAED;;;;;;;;;;AAUG;AACO,IAAA,KAAK,CAAC,OAAsB,EAAA;QAElC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AAE7C,QAAA,IAAI,CAAC,GAAG,CACJ,OAAO,CAAC,GAAG,IAAI,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EACtC,OAAO,CAAC,IAAI,IAAI,IAAI,IAAI,EAAE,EAC1B,OAAO,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CACxC,CAAC;KACL;IAEM,KAAK,GAAA;AACR,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;KAC1B;IAEM,OAAO,GAAA;AACV,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;KAC7B;IAEM,QAAQ,GAAA;AACX,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;KAC1B;IAEM,OAAO,GAAA;AACV,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;KAC7B;IAEM,UAAU,GAAA;AACb,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC;KAC7B;IAEM,WAAW,GAAA;AACd,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;KAC1B;AAED;;;;AAIG;IACI,MAAM,GAAA;QACT,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,EACX,CAAC,GAAG,IAAI,CAAC,EAAE,EACX,CAAC,GAAG,IAAI,CAAC,EAAE,EACX,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;AAEnB,QAAA,IAAI,CAAC,uBAAuB,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AAE7D,QAAA,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;YACjB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG;YAClB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG;YAClB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG;YAClB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG;AAC7C,SAAA,CAAC,CAAC;;;QAKH,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACtD,YAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SACpD;AAED,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;KACtD;AAED;;;AAGG;IACI,OAAO,GAAA;QACV,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED;;;;AAIG;AACI,IAAA,cAAc,CAAC,MAAc,EAAA;AAChC,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,OAAO,EAAE,CAAC;KAClB;AAED;;;;AAIG;IACI,cAAc,GAAA;QACjB,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAED;;;;;AAKG;IACO,QAAQ,CAAC,KAAa,EAAE,MAAc,EAAA;AAC5C,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AACxB,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG7E,YAAiB,CAAC,CAAC;AAC9D,QAAA,IAAI,CAAC,6BAA6B;YAC9B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,YAAY,CAAC;QAClE,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC;QACvC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,WAAW,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,YAAY,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,YAAY,CAAC,IAAI,KAAK,GAAGqD,OAAY,CAAC,CAAC;QAChJ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACtD,YAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,mBAAmB,CAChC,KAAK,EACL,MAAM,EACN,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,EACrB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,CACvB,CAAC;SACL;KACJ;AAED;;;;AAIG;AACI,IAAA,YAAY,CAAC,KAAa,EAAA;AAC7B,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,OAAO,EAAE,CAAC;KAClB;AAED;;;;AAIG;IACI,YAAY,GAAA;QACf,OAAO,IAAI,CAAC,UAAU,CAAC;KAC1B;AAED,IAAA,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,UAAU,CAAC;KAC1B;AAED;;;;;;;AAOG;AACI,IAAA,GAAG,CAAC,GAAS,EAAE,IAAW,EAAE,EAAS,EAAA;QACxC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QACnB,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QACnB,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACnB,QAAA,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC;AACvB,QAAA,EAAE,GAAG,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAC3B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAC3B,QAAA,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAC3B,QAAA,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;AAChC,QAAA,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;AACpB,QAAA,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;AACpB,QAAA,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;AACrC,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;AAKG;IACI,IAAI,CAAC,IAAU,EAAE,EAAS,EAAA;AAC7B,QAAA,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QAC3E,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7C,QAAA,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;AACpB,QAAA,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;AACpB,QAAA,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;KACxC;AAED;;;;;;AAMG;AACI,IAAA,KAAK,CAAC,EAAU,EAAE,EAAU,EAAE,EAAU,EAAA;AAC3C,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/D,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/D,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;KAClE;AAED;;;;AAIG;AACI,IAAA,IAAI,CAAC,KAAa,EAAA;AACrB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAACA,OAAY,GAAG,KAAK,CAAC,CAAC;AACxC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAACA,OAAY,GAAG,KAAK,CAAC,CAAC;QACxC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QACxB,IAAI,CAAC,EAAE,CAAC,GAAG,CACP,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAC5B,CAAC;QACF,IAAI,CAAC,EAAE,CAAC,GAAG,CACP,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAC5B,CAAC;KACL;AAED;;;;AAIG;AACI,IAAA,KAAK,CAAC,KAAa,EAAA;AACtB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAACA,OAAY,GAAG,KAAK,CAAC,CAAC;AACxC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAACA,OAAY,GAAG,KAAK,CAAC,CAAC;QACxC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QACxB,IAAI,CAAC,EAAE,CAAC,GAAG,CACP,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAC5B,CAAC;QACF,IAAI,CAAC,EAAE,CAAC,GAAG,CACP,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAC5B,CAAC;KACL;AAED;;;;AAIG;AACI,IAAA,GAAG,CAAC,KAAa,EAAA;AACpB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAACA,OAAY,GAAG,KAAK,CAAC,CAAC;AACxC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAACA,OAAY,GAAG,KAAK,CAAC,CAAC;QACxC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QACxB,IAAI,CAAC,EAAE,CAAC,GAAG,CACP,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAC5B,CAAC;QACF,IAAI,CAAC,EAAE,CAAC,GAAG,CACP,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EACzB,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAC5B,CAAC;KACL;AAED;;;;;;AAMG;IACI,SAAS,CAAC,CAAS,EAAE,CAAS,EAAA;QACjC,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,EAClC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,GAAG,EACjB,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAEvB,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAChB,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QAEtB,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,2BAA2B,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE,EACrG,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,2BAA2B,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;AAEzG,QAAA,OAAO,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC,SAAS,EAAE,CAAC;KACnD;AAED;;;;;AAKG;AACI,IAAA,OAAO,CAAC,CAAO,EAAA;AAClB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,EAC7D,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC;AACvC,QAAA,OAAO,IAAI,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;KACtF;AAED;;;;;;;;AAQG;AACI,IAAA,YAAY,CAAC,KAAa,EAAE,KAAe,EAAE,MAAoB,EAAE,EAAgB,EAAA;AACtF,QAAA,MAAM,GAAG,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC;AAC7B,QAAA,EAAE,GAAG,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC;QAEnB,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,KAAK,CAAC,CAAC;AAC9D,QAAA,IAAI,EAAE,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AACpD,QAAA,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;AAChE,QAAA,IAAI,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAE/B,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC;AAC3C,QAAA,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC;AAC3C,QAAA,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC;KAC9C;AAED;;;;;;;;AAQG;AACI,IAAA,gBAAgB,CAAC,KAAa,EAAE,KAAe,EAAE,MAAoB,EAAE,EAAgB,EAAA;QAC1F,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;KAC/C;AAED;;;;AAIG;IACI,cAAc,CAAC,KAAa,EAAE,MAAa,EAAA;AAC9C,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;KACpD;AAED;;;;;;AAMG;IACI,aAAa,CAAC,CAAO,EAAE,CAAS,EAAA;AACnC,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;KACpE;AAED;;;;AAIG;IACI,aAAa,GAAA;AAChB,QAAA,OAAO,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;KAC9B;AAED;;;;AAIG;IACI,eAAe,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC;KAChC;AAEM,IAAA,iBAAiB,CAAC,CAAS,EAAA;AAC9B,QAAA,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;QAC7B,IAAI,CAAC,WAAW,GAAG,CAAC,KAAK,IAAI,CAAC,sBAAsB,CAAC;KACxD;IAEM,iBAAiB,GAAA;QACpB,OAAO,IAAI,CAAC,mBAAmB,CAAC;KACnC;AAEM,IAAA,cAAc,CAAC,MAAc,EAAA;AAChC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC3C,YAAA,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;AACzC,gBAAA,OAAO,IAAI,CAAC;aACf;SACJ;AACD,QAAA,OAAO,KAAK,CAAC;KAChB;AAED,IAAA,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;KAClD;AAED;;;;AAIG;IACI,mBAAmB,GAAA;AACtB,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAE,CAAC;KAC3C;AAED;;;;AAIG;IACI,uBAAuB,GAAA;AAC1B,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,EAAE,CAAC;KAC/C;AAED;;;;AAIG;IACI,8BAA8B,GAAA;AACjC,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,EAAE,CAAC;KACtD;AAED;;;;AAIG;IACI,0BAA0B,GAAA;AAC7B,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAuB,CAAC,EAAE,CAAC;KAClD;AACJ;;AC5qBD;;;;;;;;;;;;;;;AAeG;AACH,MAAM,YAAa,SAAQ,MAAM,CAAA;IAwE7B,WAAY,CAAA,MAAc,EAAE,OAAA,GAA+B,EAAE,EAAA;AACzD,QAAA,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE;AACf,YAAA,GAAG,OAAO;AACV,YAAA,QAAQ,EAAE,OAAO,CAAC,QAAQ,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE,IAAI,GAAG,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,GAAG,GAAG,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACzG,SAAA,CACJ,CAAC;AAEF,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QAErB,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,CAAC,CAAC;QAE5C,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,QAAQ,CAAC;AAEnD,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAEjE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;QAElD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;AAE5C,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,IAAI,EAAE,CAAC;AAEhC,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AAEf,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;AAE1B,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC9B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QAEnC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;KACvC;AAEM,IAAA,2BAA2B,CAAC,QAAiB,EAAA;AAChD,QAAA,IAAI,CAAC,sBAAsB,GAAG,QAAQ,CAAC;KAC1C;AAED;;;;AAIG;IACa,MAAM,GAAA;AAClB,QAAA,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;AAE9B,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,EAAE,CAAC;QAE1E,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,MAAM,EAAE;AAC5B,YAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;SACrD;QAED,KAAK,CAAC,MAAM,EAAE,CAAC;QAEf,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAE9B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAEvC,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;KACtD;IAEM,sBAAsB,GAAA;AACzB,QAAA,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AACnE,QAAA,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI3C,OAAgB,EAAE;YAChD,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SAC7D;KACJ;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,GAAW,EAAA;AAE1B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;AAC3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAE3D,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAE7B,QAAA,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;KAC/B;AAED;;;AAGG;IACI,WAAW,GAAA;QACd,OAAO,IAAI,CAAC,gBAAgB,CAAC;KAChC;AAED;;;;;;AAMG;AACI,IAAA,SAAS,CAAC,MAAc,EAAE,UAAmB,EAAE,EAAS,EAAA;QAC3D,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAC/E,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;QAC/B,IAAI,MAAM,GAAG,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAChD,QAAA,IAAI,OAAO,GAAG,UAAU,GAAG,EAAE,CAAC,iBAAiB,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;AACxE,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;QAC5C,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED;;;;AAIG;IACI,SAAS,GAAA;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;KAC9B;AAED;;;;;;AAMG;IACI,iBAAiB,CAAC,MAAc,EAAE,MAAsB,EAAA;AAE3D,QAAA,MAAM,GAAG,MAAM,IAAI,CAAC,CAAC;AAErB,QAAA,IAAI,KAAK,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;AAC9B,QAAA,IAAI,KAAK,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;AAC9B,QAAA,IAAI,IAAI,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAA,IAAI,IAAI,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC;AAE5B,QAAA,IAAI,IAAI,GAAG,IAAI,EAAE;YACb,IAAI,IAAI,GAAG,CAAC;SACf;AAED,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;QAE9B,IAAI,IAAI,GAAG,IAAI,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QACnC,IAAI,SAAS,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;QACjB,IAAI,SAAS,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;QAChB,IAAI,SAAS,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;QACjB,IAAI,SAAS,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAE1C,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAEvE,QAAA,IAAI,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC1B,QAAA,IAAI,GAAG,GAAG,QAAQ,EAAE;YAChB,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,GAAG,CAAC;YAC/B,IAAI,CAAC,GAAG,GAAG,CAAC,KAAK,GAAG,KAAK,IAAI,GAAG,CAAC;AACjC,YAAA,MAAM,GAAG,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;SACtC;AAED,QAAA,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACvB,QAAA,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACvB,QAAA,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACvB,QAAA,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEvB,IAAI,SAAS,GAAG,MAAM,CAAC,SAAS,EAAE,CAAC;AACnC,QAAA,IAAI,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,CAAC;QACpD,IAAI,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,SAAS,EAAE,CAAC;QAE5C,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CACb,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAC3B,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAC3B,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAC3B,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAC9B,CAAC;QAEF,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CACb,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAC9B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAC9B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAC9B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CACjC,CAAC;AAEF,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG2C,OAAY,GAAG,GAAG,CAAC,CAAC;AAC5D,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACrC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,QAAQ,EAAE,EAAE,GAAG,MAAM,CAAC,CAAC;QAE7C,MAAM,CAAC,SAAS,EAAE,CAAC;QACnB,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC;AAE/B,QAAA,OAAO,MAAM,CAAC;KACjB;AAED;;;;;AAKG;IACI,UAAU,CAAC,MAAc,EAAE,MAAe,EAAA;QAC7C,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACxE,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED;;;;;;;;;;AAUG;AACI,IAAA,SAAS,CACZ,MAAc,EACd,MAAsB,EACtB,EAAgB,EAChB,IAAoB,EACpB,gBAAkC,EAClC,aAA+B,EAC/B,aAA+B,EAAA;AAC/B,QAAA,IAAI,CAAC,YAAY,CACb,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,MAAM,CAAC,EACtC,IAAI,CAAC,IAAI,EACT,EAAE,EACF,IAAI,IAAI,IAAI,GAAG,CAAC,GAAG,IAAI,EACvB,gBAAgB,EAChB,aAAa,EACb,aAAa,CAChB,CAAC;KACL;AAEM,IAAA,YAAY,CAAC,SAAe,EAAE,QAAA,GAAmB,OAAO,EAAA;AAC3D,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC3D,QAAA,IAAI,IAAI,GAAG,IAAI,CAAC,yBAAyB,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE,SAAS,CAAC,SAAS,EAAE,CAAC,CAAC;AACjF,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE;AACf,YAAA,IAAI,MAAM,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AACjE,YAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;SAC/B;aAAM;AACH,YAAA,IAAI,MAAM,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EACxE,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;YACvC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;SACtC;QACD,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAEM,IAAA,WAAW,CACd,SAAe,EACf,QAAA,GAAmB,OAAO,EAC1B,IAAe,GAAA,GAAG,EAClB,gBAA2B,EAC3B,aAAwB,EACxB,aAAwB,EAAA;AAExB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC3D,QAAA,IAAI,IAAI,GAAG,IAAI,CAAC,yBAAyB,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE,SAAS,CAAC,SAAS,EAAE,CAAC,CAAC;AACjF,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE;AACf,YAAA,IAAI,MAAM,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AACjE,YAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;SAC/B;aAAM;AACH,YAAA,IAAI,MAAM,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EACxE,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AACvC,YAAA,IAAI,CAAC,YAAY,CACb,MAAM,EACN,SAAS,EACT,KAAK,EACL,IAAI,EACJ,gBAAgB,EAChB,aAAa,EACb,aAAa,CAChB,CAAC;SACL;KACJ;AAED;;;;;;;;;;AAUG;AACH,IAAA,YAAY,CACR,SAAe,EACf,OAA6B,IAAI,CAAC,IAAI,EACtC,EAAA,GAAkB,IAAI,CAAC,KAAK,EAC5B,IAAA,GAAe,GAAG,EAClB,gBAAA,GAAoC,MAAK;KACxC,EACD,aAAiC,GAAA,MAAK;KACrC,EACD,aAAiC,GAAA,MAAK;KACrC,EAAA;QAED,IAAI,CAAC,UAAU,EAAE,CAAC;AAElB,QAAA,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC;AACzB,QAAA,EAAE,GAAG,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC;AAEtB,QAAA,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;AAE1C,QAAA,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;QAEpC,IAAI,aAAa,EAAE;AACf,YAAA,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5B;AAED,QAAA,IAAI,IAAI,YAAY,MAAM,EAAE;YACxB,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;SACxD;QAED,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAClD,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CACjD,CAAC;QAEF,IAAI,GAAG,GAAG,IAAI,CAAC,EAAE,EACb,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;AAElB,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;QAClE,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAClD,IAAI,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAC5C,CAAC;QACF,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,IAAY,CAAC,CAAC;QAC5C,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC1B,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,GAAG,CAAC,SAAS,EAAE,CAAC;QAChB,IAAI,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAEzB,QAAA,IAAI,EAAE,GAAG,QAAQ,CAAC,SAAS,EAAE,CAAC;AAC9B,QAAA,IAAI,EAAE,GAAG,QAAQ,CAAC,SAAS,EAAE,CAAC;QAC9B,IAAI,IAAI,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,IAAI,GAAG,IAAI,GAAGyB,SAAc,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,CAAC,CAAC;QAEtE,IAAI,SAAS,GAAG,OAAO,CAAC;AACxB,QAAA,IAAI,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;AACnE,QAAA,IAAI,aAAa,GAAG,SAAS,EAAE;YAC3B,SAAS,GAAG,aAAa,CAAC;SAC7B;AACD,QAAA,IAAI,KAAK,GAAG,aAAa,GAAG,GAAG,GAAG,IAAI,IAAI,SAAS,GAAG,aAAa,CAAC,CAAC;AACrE,QAAA,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;;AAGrB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE;YACvC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;AAChC,YAAA,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YACxB,CAAC,IAAI,CAAC,CAAC;AAEP,YAAA,IAAI,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;AAClD,YAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,IAAI1B,KAAG,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;AAC3E,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACd,YAAA,IAAI,QAAQ,GACR,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;AAC/B,gBAAA,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;AACrB,gBAAA,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;gBACrB,QAAQ,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAEhC,YAAA,IAAI,KAAK,GAAG,QAAS,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;YAChD,IAAI,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC7B,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;AAE3D,YAAA,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YAC7E,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,CAAC,CAAC,SAAS,EAAE,CAAC;YACd,CAAC,CAAC,SAAS,EAAE,CAAC;YAEd,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACnB,YAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG;AACjB,gBAAA,GAAG,EAAE,KAAK;AACV,gBAAA,CAAC,EAAE,CAAC;AACJ,gBAAA,CAAC,EAAE,CAAC;AACJ,gBAAA,CAAC,EAAE,CAAC;aACP,CAAC;SACL;AAED,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC;AACtC,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;KACvB;AAED;;;;;;;;;;AAUG;AACH,IAAA,SAAS,CACL,MAAc,EACd,IAAoB,EACpB,EAAS,EACT,IAAa,EACb,gBAA2B,EAC3B,aAAwB,EACxB,YAAuB,EAAA;QAEvB,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACvF,IAAI,CAAC,YAAY,CACb,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAChD,IAAI,EACJ,EAAE,EACF,IAAI,EACJ,gBAAgB,EAChB,aAAa,EACb,YAAY,CACf,CAAC;KACL;AAED;;;AAGG;IACH,UAAU,GAAA;QACN,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC1C,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5C,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEjD,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACrB,QAAA,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;AAC3B,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;AACzB,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;KAC9B;AAED;;;;AAIG;IACH,QAAQ,GAAA;QACJ,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AAED;;;;;AAKG;IACI,UAAU,CAAC,KAAa,EAAE,IAAa,EAAA;AAC1C,QAAA,IAAI,CAAC,gBAAgB,CAAC,KAAK,GAAGC,OAAY,EAAE,IAAI,KAAK,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACtE,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED;;;;;AAKG;IACI,WAAW,CAAC,KAAa,EAAE,IAAa,EAAA;AAC3C,QAAA,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,GAAGA,OAAY,EAAE,IAAI,KAAK,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACvE,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED;;;;AAIG;AACI,IAAA,QAAQ,CAAC,KAAa,EAAA;AACzB,QAAA,IAAI,CAAC,cAAc,CAAC,KAAK,GAAGA,OAAY,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACrD,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED;;;;AAIG;AACI,IAAA,UAAU,CAAC,KAAa,EAAA;AAC3B,QAAA,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,GAAGA,OAAY,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACtD,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAEe,IAAA,cAAc,CAAC,KAAa,EAAE,MAAY,EAAE,WAAmB,CAAC,EAAA;AAC5E,QAAA,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;AACjD,QAAA,IAAI,EAAE,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AACpD,QAAA,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;AAChE,QAAA,IAAI,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAE/B,IAAI,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAChC,QAAA,IAAI,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC;AACzC,QAAA,IAAI,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC;AACzC,QAAA,IAAI,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC;AAEzC,QAAA,IAAI,OAAO,GAAG,GAAG,CAAC,SAAS,EAAE,CAAC;QAC9B,IAAI,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE3B,IAAI,QAAQ,EAAE;AACV,YAAA,IAAI,MAAM,GAAG,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AAEhC,YAAA,IAAI,KAAK,GAAG,QAAQ,IAAI,MAAM,GAAG,CAAC;gBAAE,OAAO;AAE3C,YAAA,IACI,CAAC,KAAK,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC;gBAClC,IAAI,CAAC,KAAK,IAAI,GAAG;AACjB,gBAAA,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,IAAI,GAAG,EAC1C;AACE,gBAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,gBAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ,gBAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ,gBAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;aACf;SACJ;aAAM;AACH,YAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,YAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ,YAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ,YAAA,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;SACf;KACJ;AAED;;;AAGG;IACI,QAAQ,GAAA;AACX,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC;YAE9C,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC1C,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC5C,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAEjD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;YAClC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAE/B,YAAA,IAAI,IAAI,CAAC,cAAc,EAAE;gBACrB,IAAI,CAAC,cAAc,EAAE,CAAC;aACzB;YAED,IAAI,CAAC,MAAM,EAAE,CAAC;YAEd,IAAI,CAAC,cAAc,EAAE,CAAC;AAEtB,YAAA,IAAI,IAAI,CAAC,cAAc,GAAG,CAAC,EAAE;gBACzB,IAAI,CAAC,UAAU,EAAE,CAAC;AAClB,gBAAA,IAAI,IAAI,CAAC,iBAAiB,EAAE;oBACxB,IAAI,CAAC,iBAAiB,EAAE,CAAC;AACzB,oBAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;iBACjC;aACJ;SACJ;KACJ;IAEM,qBAAqB,GAAA;QACxB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QAC5C,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE;YACnD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CACvD,IAAI,CAAC,GAAG,EACR,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,IAAI,CAAC,EACzC,IAAI,CAAC,aAAa,CACrB,CAAC;AACF,YAAA,IAAI,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,sBAAsB,EAAE;AACzE,gBAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aACtC;YACD,OAAO,IAAI,CAAC,aAAa,CAAC;SAC7B;KACJ;AAEM,IAAA,yBAAyB,CAAC,CAAS,EAAA;QACtC,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC;QAC7C,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;KAC3D;IAEM,UAAU,GAAA;QACb,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;QAC7B,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CACpB,IAAI,CAAC,KAAK,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,EAAE,GAAG,IAAI,CAAC,UAAU,EAAE,EACrD,CAAC,CACJ,CAAC,SAAS,EAAE,EACb,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;AACxD,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAGQ,OAAY,CAAC;AAC5E,QAAA,IAAI,GAAG,GAAG,GAAG,EAAE;YACX,OAAO,KAAK,GAAG,GAAG,CAAC;SACtB;AACD,QAAA,OAAO,GAAG,CAAC;KACd;AAEM,IAAA,SAAS,CAAC,GAAS,EAAA;QACtB,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;QAC1B,OAAO,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC;KAC9F;AAmBJ;;ACluBD;AA4BA,MAAM,aAAc,SAAQ,UAAuB,CAAA;AAC/C,IAAA,WAAA,CAAY,aAAqB,CAAC,EAAA;AAC9B,QAAA,KAAK,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;KACtC;AAEkB,IAAA,UAAU,CAAC,CAAkB,EAAA;QAC5C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAE,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACpE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAE/B,QAAA,CAAC,CAAC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC/B,QAAA,CAAC,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAChC,QAAA,CAAC,CAAC,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;AACpC,QAAA,CAAC,CAAC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACnC,QAAA,CAAC,CAAC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC9B,QAAA,CAAC,CAAC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAClC,QAAA,CAAC,CAAC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;KACpC;AAEe,IAAA,IAAI,CAAC,IAAiB,EAAA;AAClC,QAAA,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE;AAE1D,YAAA,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;gBAE1B,MAAM,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,EAAG,CAAC;gBAEnC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEvC,gBAAA,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;gBAE3B,CAAC,CAAC,WAAW,CAAC;oBACV,YAAY,EAAE,IAAI,CAAC,UAAU;oBAC7B,oBAAoB,EAAE,OAAO,CAAC,aAAa;oBAC3C,mBAAmB,EAAE,OAAO,CAAC,YAAY;oBACzC,wBAAwB,EAAE,OAAO,CAAC,iBAAiB;oBACnD,uBAAuB,EAAE,OAAO,CAAC,gBAAgB;AACjD,oBAAA,cAAc,EAAE,OAAO,CAAC,MAAM,CAAC,aAAa;AAC5C,oBAAA,UAAU,EAAE,OAAO,CAAC,MAAM,CAAC,OAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC;AACpE,oBAAA,cAAc,EAAE,OAAO,CAAC,MAAM,CAAC,OAAQ,CAAC,YAAY;oBACpD,IAAI,EAAE,IAAI,CAAC,SAAS;iBACvB,EAAE;oBACC,IAAI,CAAC,UAAU,CAAC,MAAM;oBACtB,OAAO,CAAC,aAAc,CAAC,MAAM;oBAC7B,OAAO,CAAC,YAAa,CAAC,MAAM;oBAC5B,OAAO,CAAC,iBAAkB,CAAC,MAAM;oBACjC,OAAO,CAAC,gBAAiB,CAAC,MAAM;AACnC,iBAAA,CAAC,CAAC;gBAEH,IAAI,CAAC,SAAS,EAAE,CAAC;aAEpB;iBAAM;AACH,gBAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACjC;SACJ;aAAM;YACH,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;KACJ;AACJ,CAAA;AAED,MAAM,eAAe,GACjB,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAkfE;;AChkBN,IAAI,OAAO,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAElC,MAAM,cAAc,GAAG,IAAI,CAAC;MAEf,iBAAiB,CAAA;AAQ1B,IAAA,WAAA,CAAY,MAAc,EAAE,KAAA,GAAgB,GAAG,EAAE,SAAiB,GAAG,EAAA;AACjE,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AACjB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACxB;IAEM,IAAI,GAAA;QAEP,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,OAAO,CAAC;;QAG/C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,2BAA2B,EAAE;YACrD,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,OAAO,CAAC,6BAA6B,EAAE;AAChE,gBAAA,QAAQ,EAAE;AACN,oBAAA,UAAU,EAAE,MAAM;AAClB,oBAAA,kBAAkB,EAAE,OAAO;AAC3B,oBAAA,OAAO,EAAE,OAAO;AAChB,oBAAA,kBAAkB,EAAE,MAAM;AAC1B,oBAAA,iBAAiB,EAAE,MAAM;AAC5B,iBAAA;AACD,gBAAA,UAAU,EAAE;AACR,oBAAA,UAAU,EAAE,MAAM;AAClB,oBAAA,aAAa,EAAE,MAAM;AACrB,oBAAA,UAAU,EAAE,MAAM;AAElB,oBAAA,SAAS,EAAE,MAAM;AACjB,oBAAA,YAAY,EAAE,MAAM;AACpB,oBAAA,SAAS,EAAE,MAAM;AAEjB,oBAAA,OAAO,EAAE,OAAO;AAChB,oBAAA,OAAO,EAAE,MAAM;AACf,oBAAA,WAAW,EAAE,OAAO;AACvB,iBAAA;AACD,gBAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFF,iBAAA,CAAA;AACF,gBAAA,cAAc,EAAE,CAAA;;;;;AAKd,iBAAA,CAAA;AACL,aAAA,CAAC,CAAC,CAAC;SACP;;QAGD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,8BAA8B,EAAE;YACxD,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,OAAO,CAAC,gCAAgC,EAAE;AACnE,gBAAA,QAAQ,EAAE;AACN,oBAAA,kBAAkB,EAAE,MAAM;AAC1B,oBAAA,iBAAiB,EAAE,MAAM;AAC5B,iBAAA;AACD,gBAAA,UAAU,EAAE;AACR,oBAAA,iBAAiB,EAAE,MAAM;AACzB,oBAAA,gBAAgB,EAAE,MAAM;AACxB,oBAAA,QAAQ,EAAE,MAAM;AACnB,iBAAA;AACD,gBAAA,YAAY,EACR,CAAA;;;;;;;;;;;;;;;;AAgBF,iBAAA,CAAA;AACF,gBAAA,cAAc,EACV,CAAA;;;;AAIF,iBAAA,CAAA;AACL,aAAA,CAAC,CAAC,CAAC;SACP;QAED,IAAI,CAAC,YAAY,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE;YAC/C,KAAK,EAAE,IAAI,CAAC,MAAM;YAClB,MAAM,EAAE,IAAI,CAAC,OAAO;AACpB,YAAA,QAAQ,EAAE,KAAK;AAClB,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;KAC5B;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACvD,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,EAClB,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEf,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AACzB,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAE1B,YAAA,IAAI,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,2BAA2B,EAC9C,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,8BAA8B,CAAC;AAEtD,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,EAChB,EAAE,GAAG,IAAI,CAAC,OAAO,EACjB,KAAK,GAAG,EAAE,EACV,MAAM,GAAG,EAAE,EACX,GAAG,GAAG,KAAK,IAAI,CAAC,EAChB,GAAG,GAAG,MAAM,IAAI,CAAC,CAAC;;AAItB,YAAA,IAAI,gBAAgB,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;AAC3C,YAAA,IAAI,eAAe,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;YAE1C,IAAI,CAAC,GAAG,IAAI,CAAC,YAAa,CAAC,QAAQ,EAAE,CAAC;AAEtC,YAAA,IAAI,SAAS,GAAG,CAAC,EACb,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;YAEzC,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,SAAS,GAAG,cAAc,EAAE;gBACrD,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAG,CAAC;AACpC,gBAAA,IAAI,QAAQ,CAAC,SAAS,IAAI,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,SAAS,EAAE;AACtE,oBAAA,IAAI,cAAc,GAAG,QAAQ,CAAC,KAAK,CAAC,eAAe,CAAC;oBAEpD,IAAI,QAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,EAAE;wBAC/B,KAAK,GAAG,GAAG,CAAC;wBACZ,MAAM,GAAG,GAAG,CAAC;qBAChB;yBAAM;wBACH,KAAK,GAAG,EAAE,CAAC;wBACX,MAAM,GAAG,EAAE,CAAC;qBACf;AAED,oBAAA,IAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,IAAI,CAAC,CAAC,oBAAoB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;oBAC/E,IAAI,WAAW,GAAG,cAAc,GAAG,QAAQ,CAAC,kBAAkB,IAAI,CAAC,CAAC,oBAAoB,CAAC,KAAK,EAAE,MAAM,CAAC,GAAG,IAAI,CAAC;AAE/G,oBAAA,QAAQ,CAAC,YAAY,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;AAE5C,oBAAA,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;AAEzB,oBAAA,CAAC,CAAC,iBAAiB,CAAC,OAAQ,CAAC,CAAC;oBAE9B,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAClC,oBAAA,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;oBAE9B,IAAI,MAAM,GAAG,QAAQ,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;oBAE9C,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;oBAClD,gBAAgB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;oBACjC,eAAe,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;oBAEhC,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;oBAClD,gBAAgB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;oBACjC,eAAe,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;oBAEhC,gBAAgB,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;oBAC9C,gBAAgB,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC,SAAS,EAAE,CAAC;oBAE/C,KAAK,CAAC,QAAQ,EAAE,CAAC;AACjB,oBAAA,IAAI,EAAE,GAAG,KAAK,CAAC,QAAQ,CAAC;oBACxB,IAAI,GAAG,GAAG,EAAE,CAAC,UAAU,EACnB,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AAEtB,oBAAA,IAAI,WAAW,GAAI,QAAQ,CAAC,KAAgB,CAAC,gBAAgB,CAAC;;;;oBAK9D,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;oBACtD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;oBAEpD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,2BAA4B,CAAC,CAAC;oBACzE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,eAAe,EAAE,WAAW,CAAC,2BAA4B,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAEtH,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,0BAA2B,CAAC,CAAC;oBACxE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,cAAc,EAAE,WAAW,CAAC,0BAA2B,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAEpH,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,iBAAkB,CAAC,CAAC;oBAC/D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,CAAC,iBAAkB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAEnG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,WAAW,CAAC,kBAAmB,CAAC,CAAC;AAExE,oBAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,EAAE,WAAW,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;;oBAG5F,IAAI,cAAc,EAAE;AAChB,wBAAA,CAAC,CAAC,iBAAiB,CAAC,WAAY,CAAC,CAAC;wBAElC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AAClC,wBAAA,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;wBAE9B,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,wBAAyB,CAAC,CAAC;wBACtE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,CAAC,wBAAyB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE1G,wBAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,EAAE,WAAW,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;qBAC/F;;;;AAKD,oBAAA,CAAC,CAAC,iBAAiB,CAAC,OAAQ,CAAC,CAAC;oBAE9B,KAAK,CAAC,QAAQ,EAAE,CAAC;AACjB,oBAAA,EAAE,GAAG,KAAK,CAAC,QAAQ,CAAC;AACpB,oBAAA,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC;AACpB,oBAAA,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AAElB,oBAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC;oBAE7C,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;oBACtD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;;AAGpD,oBAAA,IAAI,EAAE,GAAG,WAAW,CAAC,2BAA4B,CAAC;oBAClD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;oBAEnC,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACzE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;oBAC7E,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;AAE1E,oBAAA,EAAE,GAAG,WAAW,CAAC,0BAA2B,CAAC;oBAC7C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;oBAEnC,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACxE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;oBAC5E,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;;oBAGzE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,iBAAkB,CAAC,CAAC;oBAC/D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,CAAC,iBAAkB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAElG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,WAAW,CAAC,kBAAmB,CAAC,CAAC;;oBAGxE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,kBAAmB,CAAC,CAAC;oBAChE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,SAAS,EAAE,WAAW,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAEvG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,uBAAwB,CAAC,CAAC;oBACrE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,CAAC,uBAAwB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;oBAGxG,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;oBACtC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAC9B,oBAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,WAAW,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;;;oBAGjG,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;oBACtC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AAC7B,oBAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,WAAW,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;;oBAGjG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,oBAAqB,CAAC,CAAC;oBAClE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,SAAS,EAAE,WAAW,CAAC,oBAAqB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAEzG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,iBAAkB,CAAC,CAAC;oBAC/D,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,CAAC,iBAAkB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;oBAGlG,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;oBACtC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAC9B,oBAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,WAAW,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;;;oBAGjG,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;oBACtC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AAC7B,oBAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,WAAW,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;oBAEjG,IAAI,cAAc,EAAE;AAChB,wBAAA,CAAC,CAAC,iBAAiB,CAAC,WAAY,CAAC,CAAC;wBAClC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;wBACtC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,wBAAyB,CAAC,CAAC;wBACtE,EAAE,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,CAAC,wBAAyB,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACzG,wBAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,EAAE,WAAW,CAAC,kBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;qBACpG;iBACJ;qBAAM;AACH,oBAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;iBAC9B;gBAED,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,SAAS,CAAC;aACpD;AAED,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACzB,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;YAExB,CAAC,CAAC,UAAU,EAAE,CAAC;SAClB;KACJ;AAEM,IAAA,GAAG,CAAC,QAAkB,EAAA;AACzB,QAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KAC9B;AAEM,IAAA,MAAM,CAAC,QAAkB,EAAA;;KAE/B;AAED,IAAA,IAAW,SAAS,GAAA;AAChB,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;KAC7B;AACJ;;ACrYD;;;;;AAKG;AACH,MAAM,SAAS,CAAA;AA6BX,IAAA,WAAA,CAAY,cAAyB,GAAA,CAAC,EAAE,SAAA,GAAoB,CAAC,EAAA;AACzD,QAAA,IAAI,CAAC,EAAE,GAAG,cAAc,CAAC;AACzB,QAAA,IAAI,CAAC,EAAE,GAAG,SAAS,CAAC;QACpB,IAAI,CAAC,WAAW,GAAG,CAAC,cAAc,GAAG,SAAS,IAAI,cAAc,CAAC;QACjE,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AAE/B,QAAA,IAAI,CAAC,GAAG,GAAG,cAAc,GAAG,cAAc,CAAC;AAC3C,QAAA,IAAI,CAAC,GAAG,GAAG,SAAS,GAAG,SAAS,CAAC;AAEjC,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;AAE7C,QAAA,IAAI,CAAC,EAAE,GAAG,KAAK,GAAG,cAAc,CAAC;QACjC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QAC7B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;AAEhC,QAAA,IAAI,CAAC,EAAE,GAAG,KAAK,GAAG,SAAS,CAAC;QAC5B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AAE7B,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,cAAc,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;AAClE,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,IAAI,CAAC,GAAG,GAAG,cAAc,EAAE,GAAG,GAAG,cAAc,EAAE,GAAG,GAAG,SAAS,CAAC,CAAC;QACvF,IAAI,CAAC,UAAU,GAAG,IAAI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;KAC9E;AAED;;;;;AAKG;IACI,eAAe,CAAC,WAAmB,EAAE,SAAiB,EAAA;AACzD,QAAA,MAAM,EAAE,GAAG,WAAW,CAAC,GAAG,GAAG,OAAO,CAAC;AACrC,QAAA,MAAM,EAAE,GAAG,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC;AACnC,QAAA,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;QAC5D,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE;AAAE,YAAA,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;AAC9E,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACrF,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QACzD,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAC7C,QAAA,OAAO,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;KACtB;AAED;;;;;;AAMG;AACI,IAAA,iCAAiC,CAAC,OAAe,EAAE,OAAe,EAAE,QAAgB,EAAA;QACvF,IAAI,QAAQ,IAAI,CAAC;AAAE,YAAA,OAAO,OAAO,CAAC,KAAK,EAAE,CAAC;QAC1C,IAAI,QAAQ,IAAI,CAAC;AAAE,YAAA,OAAO,OAAO,CAAC,KAAK,EAAE,CAAC;QAC1C,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AAC/C,QAAA,MAAM,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC;AAC9B,QAAA,MAAM,OAAO,GAAG,OAAO,CAAC,cAAc,CAAC;QACvC,OAAO,KAAK,CAAC,OAAO,CAAC,GAAG,OAAO,GAAG,IAAI,CAAC,yBAAyB,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,GAAG,QAAQ,CAAC,CAAC;KACvG;AAED;;;;;AAKG;AACH,IAAA,OAAO,UAAU,CAAC,OAAe,EAAE,OAAe,EAAA;AAC9C,QAAA,IAAI,EAAE,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,EAC1B,EAAE,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC;AAC/B,QAAA,IAAI,EAAE,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,EAC1B,EAAE,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC;AAC/B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AACzC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;QACtF,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,OAAO,CAAC;KACrC;IAEM,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED;;;;AAIG;IACI,iBAAiB,GAAA;QACpB,OAAO,IAAI,CAAC,EAAE,CAAC;KAClB;AAED,IAAA,IAAW,cAAc,GAAA;QACrB,OAAO,IAAI,CAAC,EAAE,CAAC;KAClB;AAED,IAAA,IAAW,iBAAiB,GAAA;QACxB,OAAO,IAAI,CAAC,GAAG,CAAC;KACnB;AAED;;;;AAIG;IACI,YAAY,GAAA;QACf,OAAO,IAAI,CAAC,EAAE,CAAC;KAClB;AAED,IAAA,IAAW,SAAS,GAAA;QAChB,OAAO,IAAI,CAAC,EAAE,CAAC;KAClB;AAED,IAAA,IAAW,YAAY,GAAA;QACnB,OAAO,IAAI,CAAC,GAAG,CAAC;KACnB;AAED;;;;;AAKG;AACI,IAAA,iBAAiB,CAAC,MAAc,EAAA;AACnC,QAAA,OAAO,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;KAC1E;AAED;;;;;;AAMG;IACI,oBAAoB,CAAC,MAAc,EAAE,GAAS,EAAA;AACjD,QAAA,OAAO,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;KAC/E;AAED;;;;;;;;AAQG;IACI,mBAAmB,CAAC,GAAW,EAAE,GAAW,EAAE,MAAiB,GAAA,CAAC,EAAE,GAAA,GAAY,IAAI,IAAI,EAAE,EAAA;QAC3F,IAAI,MAAM,GAAG,OAAO,GAAG,GAAG,EACtB,MAAM,GAAG,OAAO,GAAG,GAAG,CAAC;QAE3B,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAE3B,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;AACtD,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,MAAM,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAEzC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC9B,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AAC9B,QAAA,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,IAAI,GAAG,CAAC;AAE5C,QAAA,OAAO,GAAG,CAAC;KACd;AAED;;;;;AAKG;AACI,IAAA,aAAa,CAAC,CAAO,EAAA;QAExB,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,EACf,EAAE,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,EACf,EAAE,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC;AAEpB,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AAEpD,QAAA,IAAI,MAAM,KAAK,CAAC,EAAE;YACd,OAAO,IAAI,CAAC,iBAAiB,CAAC,IAAI,MAAM,EAAE,CAAC,CAAC;SAC/C;QAED,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,EAC9B,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,EAC9B,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QAEnC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,UAAU,EACzB,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,UAAU,EACzB,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,UAAU,CAAC;AAE9B,QAAA,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC;QAClC,IAAI,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAE7B,QAAA,IAAI,IAAI,GAAG,IAAI,EAAE;AACb,YAAA,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,IAAI,IAAI,EAAE,GAAG,KAAK,CAAA;SACtD;QAED,IAAI,MAAM,GAAG,CAAC,CAAC,GAAG,GAAG,KAAK,IAAI,MAAM,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,EAAE,CAAC;QAE7E,IAAI,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC;AAEpC,QAAA,GAAG;YACC,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,MAAM,GAAG,UAAU,CAAC,CAAC;YACxC,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,MAAM,GAAG,UAAU,CAAC,CAAC;YACxC,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,MAAM,GAAG,UAAU,CAAC,CAAC;AAExC,YAAA,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,EAChB,IAAI,GAAG,GAAG,GAAG,GAAG,EAChB,IAAI,GAAG,GAAG,GAAG,GAAG,CAAC;AAErB,YAAA,IAAI,IAAI,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,IAAI,GAAG,GAAG,CAAC;YAEnD,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,KAAK,EAAE;gBACxB,MAAM;aACT;AAED,YAAA,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,EACjB,IAAI,GAAG,IAAI,GAAG,GAAG,EACjB,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC;YAEtB,MAAM,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,GAAG,IAAI,GAAG,UAAU,GAAG,EAAE,GAAG,IAAI,GAAG,UAAU,GAAG,EAAE,GAAG,IAAI,GAAG,UAAU,CAAC,CAAC;AAEtG,SAAC,QAAQ,IAAI,EAAE;AAEf,QAAA,OAAO,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,CAAC,CAAC;KACjD;AAED;;;;AAIG;AACI,IAAA,iBAAiB,CAAC,IAAU,EAAA;AAC/B,QAAA,OAAO,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;KAC1C;AAED;;;;;AAKG;AACI,IAAA,oBAAoB,CAAC,IAAU,EAAE,GAAc,GAAA,IAAI,MAAM,EAAE,EAAA;QAC9D,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AACjC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAC9B,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAEpB,QAAA,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;AACzC,QAAA,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;AACnC,QAAA,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;AAEjD,QAAA,OAAO,GAAG,CAAC;KACd;AAED;;;;;AAKG;AACI,IAAA,kBAAkB,CAAC,KAAW,EAAA;AACjC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;AACzB,QAAA,IAAI,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EACnB,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EACnB,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACxB,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;AACrD,QAAA,OAAO,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;KAC3C;IAEM,sBAAsB,CAAC,OAAe,EAAE,OAAe,EAAA;QAC1D,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC;KAClD;AAED;;;;;;;;AAQG;AACI,IAAA,yBAAyB,CAAC,MAAc,EAAE,OAAe,EAAE,IAAY,EAAA;AAC1E,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,WAAW,CAAC;KACzD;AAED;;;;;AAKG;IACI,OAAO,CAAC,OAAe,EAAE,OAAe,EAAA;AAE3C,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AAEnD,QAAA,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,EAAE,OAAO,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC;AACnE,QAAA,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,EAAE,OAAO,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC;AAEnE,QAAA,MAAM,CAAC,GAAG,OAAO,GAAG,OAAO,CAAC;AAC5B,QAAA,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,KAAK,GAAG,KAAK,EAAE,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC;AACzG,QAAA,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,KAAK,GAAG,KAAK,EAAE,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC;AAEzG,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AAEjF,QAAA,IAAI,GAAG,GAAG,CAAC,EAAE,MAAM,GAAG,IAAI,EAAE,MAAM,GAAG,IAAI,CAAC;AAC1C,QAAA,IAAI,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,SAAS,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,GAAG,IAAI,CAAC;AACtF,QAAA,IAAI,MAAM,GAAG,CAAC,CAAC;AACf,QAAA,IAAI,MAAM,GAAG,CAAC,CAAC;AAEf,QAAA,IAAI,IAAI,GAAG,IAAI,EAAE,UAAU,GAAG,CAAC,CAAC;AAChC,QAAA,GAAG;AACC,YAAA,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACvB,YAAA,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACvB,MAAM,GAAG,CAAC,KAAK,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,MAAM,KAAK,CAAC,CAAC;AAC/E,YAAA,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,KAAK;AAAE,gBAAA,MAAM;AACpC,YAAA,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC1B,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC;YAC/C,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YAC7B,MAAM,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,MAAM,GAAG,KAAK,CAAC;AAC7C,YAAA,MAAM,GAAG,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC;YAC3B,MAAM,GAAG,CAAC,MAAM,IAAI,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,KAAK,GAAG,MAAM,IAAI,CAAC,CAAC;YAClE,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YACvD,IAAI,GAAG,GAAG,CAAC;AACX,YAAA,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,IAAI,MAAM,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACxG,SAAC,QAAQ,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,KAAK,IAAI,EAAE,UAAU,GAAG,IAAI,EAAE;AAE9D,QAAA,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AAC/C,QAAA,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,KAAK,IAAI,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAC5E,MAAM,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QACpE,MAAM,EAAE,GAAG,CAAC,GAAG,KAAK,IAAI,MAAM,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AAExJ,QAAA,MAAM,IAAI,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;;;;;AAM9B,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC;AACtH,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,EAAE,CAAC,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC;QAE7H,OAAO;AACH,YAAA,QAAQ,EAAE,IAAI;YACd,cAAc,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,GAAG,GAAG,SAAS,CAAC,EAAE,CAAC,GAAG,OAAO;YAC/E,YAAY,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,OAAO,GAAG,GAAG,GAAG,SAAS,CAAC,EAAE,CAAC,GAAG,OAAO;SAChF,CAAC;KACL;AAED;;;;;;;;AAQG;AACI,IAAA,MAAM,CAAC,MAAc,EAAE,OAAe,EAAE,IAAY,EAAA;QAEvD,IAAI,IAAI,GAAG,MAAM,CAAC,GAAG,EACjB,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC;QAEtB,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,EACX,CAAC,GAAG,IAAI,CAAC,EAAE,EACX,CAAC,GAAG,IAAI,CAAC,WAAW,EACpB,CAAC,GAAG,IAAI,EACR,MAAM,GAAG,OAAO,GAAG,OAAO,EAC1B,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAC5B,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAC5B,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,OAAO,CAAC,EAC1C,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC,EACxC,KAAK,GAAG,KAAK,GAAG,KAAK,EACrB,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,SAAS,CAAC,EACrC,QAAQ,GAAG,KAAK,GAAG,SAAS,EAC5B,UAAU,GAAG,CAAC,GAAG,QAAQ,GAAG,QAAQ,EACpC,GAAG,GAAG,CAAC,UAAU,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAC9C,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,KAAK,KAAK,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,EACvE,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,EAC/D,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EACnB,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;AAEzB,QAAA,IAAI,UAAU,GAAG,CAAC,EACd,QAAQ,GAAG,CAAC,EACZ,QAAQ,GAAG,CAAC,EACZ,UAAU,GAAG,CAAC,CAAC;QAEnB,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,KAAK,EAAE;YACrC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,GAAG,KAAK,CAAC,CAAC;AAC1C,YAAA,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC3B,YAAA,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAC3B,UAAU,GAAG,CAAC,GAAG,QAAQ;AACrB,iBAAC,UAAU,GAAG,CAAC,CAAC,GAAG,CAAC;qBAEZ,QAAQ,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,UAAU,GAAG,UAAU,CAAC;AAC7C,wBAAA,CAAC,CAAC,GAAG,CAAC,IAAI,UAAU,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,UAAU,GAAG,UAAU,CAAC,CAC7F,CAAC,CAAC;YACX,MAAM,GAAG,KAAK,CAAC;YACf,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC;SACpC;AAED,QAAA,IAAI,GAAG,GAAG,KAAK,GAAG,QAAQ,GAAG,KAAK,GAAG,QAAQ,GAAG,SAAS,EACrD,IAAI,GAAG,IAAI,CAAC,KAAK,CACb,KAAK,GAAG,QAAQ,GAAG,KAAK,GAAG,QAAQ,GAAG,SAAS,EAC/C,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,GAAG,GAAG,GAAG,GAAG,CAAC,CACvD,EACD,MAAM,GAAG,IAAI,CAAC,KAAK,CACf,QAAQ,GAAG,SAAS,EACpB,KAAK,GAAG,QAAQ,GAAG,KAAK,GAAG,QAAQ,GAAG,SAAS,CAClD,EACD,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,IAAI,UAAU,IAAI,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,UAAU,CAAC,CAAC,EAClE,CAAC,GAAG,MAAM,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,QAAQ,IAAI,KAAK,GAAG,CAAC,GAAG,QAAQ,IAAI,UAAU,GAAG,CAAC,GAAG,QAAQ,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,UAAU,GAAG,UAAU,CAAC,CAAC,CAAC,EACrI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,CAAC;QAEvC,OAAO;AACH,YAAA,WAAW,EAAE,IAAI,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,OAAO,EAAE,IAAI,GAAG,OAAO,CAAC;YAC3D,YAAY,EAAE,KAAK,GAAG,OAAO;SAChC,CAAC;KACL;AAGD;;;;;;;AAOG;IACI,MAAM,CAAC,MAAY,EAAE,SAAe,EAAA;QACvC,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACnC,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAEtC,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAClB,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAElB,IAAI,UAAU,EAAE,EAAE,EAAE,OAAO,EAAE,YAAY,EAAE,IAAI,CAAC;AAEhD,QAAA,IAAI,EAAE,GAAG,GAAG,EAAE;;AAEV,YAAA,IAAI,EAAE,IAAI,GAAG,EAAE;;AAEX,gBAAA,OAAO,SAAS,CAAC;aACpB;;AAGD,YAAA,IAAI,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC;AAClB,YAAA,UAAU,GAAG,EAAE,GAAG,GAAG,CAAC;AACtB,YAAA,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACd,YAAA,OAAO,GAAG,EAAE,GAAG,UAAU,CAAC;YAE1B,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC;YAElC,IAAI,GAAG,GAAG,KAAK,IAAI,GAAG,GAAG,OAAO,EAAE;;AAE9B,gBAAA,OAAO,SAAS,CAAC;aACpB;AAAM,iBAAA,IAAI,GAAG,GAAG,OAAO,EAAE;;AAEtB,gBAAA,YAAY,GAAG,EAAE,GAAG,EAAE,GAAG,OAAO,CAAC;AACjC,gBAAA,IAAI,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACrC,gBAAA,IAAI,KAAK,GAAG,IAAI,GAAG,EAAE,CAAC;AACtB,gBAAA,IAAI,KAAK,GAAG,UAAU,GAAG,IAAI,CAAC;AAC9B,gBAAA,IAAI,KAAK,GAAG,KAAK,EAAE;oBACf,OAAO,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;iBAC/C;gBACD,OAAO,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;aAC/C;iBAAM;;gBAEH,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,CAAC;gBACtC,OAAO,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;aAC9C;SACJ;AAAM,aAAA,IAAI,EAAE,GAAG,GAAG,EAAE;;AAEjB,YAAA,UAAU,GAAG,EAAE,GAAG,GAAG,CAAC;AACtB,YAAA,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACd,YAAA,OAAO,GAAG,EAAE,GAAG,UAAU,CAAC;AAC1B,YAAA,YAAY,GAAG,EAAE,GAAG,EAAE,GAAG,OAAO,CAAC;AACjC,YAAA,IAAI,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACrC,YAAA,OAAO,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC;SACnD;aAAM;;AAEH,YAAA,IAAI,EAAE,GAAG,GAAG,EAAE;;AAEV,gBAAA,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACd,gBAAA,OAAO,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;aAClD;;;SAGJ;KACJ;AAEM,IAAA,qBAAqB,CAAC,SAAe,EAAA;QACxC,IAAI,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;AAC3C,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAC5C,OAAO,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KACrC;AAED;;;;;;AAMG;AACI,IAAA,qBAAqB,CAAC,OAAe,EAAE,UAAkB,GAAG,EAAE,WAAmB,CAAC,EAAA;AACrF,QAAA,OAAO,GAAG,OAAO,GAAG,OAAO,CAAC;AAC5B,QAAA,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC;AAC7C,QAAA,IAAI,EAAE,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,EAC1B,EAAE,GAAG,IAAI,GAAG,OAAO,CAAC;AACxB,QAAA,IAAI,EAAE,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC;AAC5B,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CACd,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAChF,CAAC;AACF,QAAA,OAAO,IAAI,MAAM,CACb,CAAC,EAAE;YACC,IAAI,CAAC,KAAK,CACN,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EAC/C,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAC7C;AACL,YAAA,OAAO,EACP,EAAE,GAAG,OAAO,CACf,CAAC;KACL;AAED;;;;;;AAMG;AACH,IAAA,OAAO,iCAAiC,CAAC,OAAe,EAAE,OAAe,EAAE,QAAgB,EAAA;AACvF,QAAA,IAAI,EAAE,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,EAC1B,EAAE,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC;AAC/B,QAAA,IAAI,EAAE,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,EAC1B,EAAE,GAAG,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC;AAE/B,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EACpB,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EACpB,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EACpB,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AACzB,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EACpB,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EACpB,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,EACpB,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAEzB,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,EACZ,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AACjB,QAAA,IAAI,CAAC,GACD,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;AACnC,YAAA,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAEvD,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,QAAQ,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACnD,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAE7C,QAAA,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC;AAC9C,QAAA,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC;QAC9C,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC;QAE9B,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACjD,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAE1B,OAAO,IAAI,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,OAAO,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE,EAAE,GAAG,OAAO,CAAC,CAAC;KACvE;AAED,IAAA,OAAO,eAAe,CAAC,OAAe,EAAE,OAAe,EAAA;AACnD,QAAA,IAAI,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,OAAO,CAAC;QACjD,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CACf,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,GAAG,OAAO,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;YACnD,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,GAAG,OAAO,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CACtD,CAAC;QACF,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE;AAC1B,YAAA,IAAI,IAAI,GAAG,CAAC,EAAE;AACV,gBAAA,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;aACpC;iBAAM;gBACH,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;aAC7B;SACJ;AACD,QAAA,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,OAAO,GAAG,GAAG,IAAI,GAAG,CAAC;KACzD;AACJ;;AChnBD;;;AAGG;AACI,MAAM,KAAK,GAAG,IAAI,SAAS,CAAC,SAAS,EAAE,kBAAkB,EAAE;;ACsElE,MAAM,YAAY,GAAG,GAAG,CAAC;AACzB,MAAM,YAAY,GAAG,GAAG,CAAC;AACzB,MAAM,YAAY,GAAG,GAAG,CAAC;AAEzB,IAAI,gBAAgB,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;AACzC,IAAI,gBAAgB,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;AAEzC,MAAM,cAAc,GAAG,EAAE,CAAC;AAE1B;;;;;AAKG;AACH,MAAM,SAAS,GAAG,GAAG,CAAC;AAEtB,MAAM,eAAe,GAAG,IAAI,CAAC;AAI7B;;;;;;;;;;;;;;;;;AAiBG;AACG,MAAO,MAAO,SAAQ,UAAU,CAAA;AA8RlC,IAAA,WAAA,CAAY,UAAyB,EAAE,EAAA;AACnC,QAAA,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAwqCd,QAAA,IAAA,CAAA,qBAAqB,GAAG,CAAC,KAA2B,EAAE,EAAW,EAAE,WAAiB,EAAE,EAAW,EAAE,UAAkB,EAAE,sBAAkC,KAAI;AAEnK,YAAA,IAAI,WAAW,GAAG,UAAU,KAAK,CAAC,CAAC;AACnC,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC;YAE1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,WAAW,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBACjE,IAAI,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;AAC5C,gBAAA,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;oBACpF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AAE7B,oBAAA,IAAI,CAAC,CAAC,kBAAkB,GAAG,GAAG,EAAE;AAC5B,wBAAA,sBAAuB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;qBACnC;yBAAM;wBACH,IAAI,WAAW,EAAE;AACb,4BAAA,IAAI,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;AACrB,4BAAA,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;4BAC9B,CAAC,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC;yBACzC;6BAAM;AACH,4BAAA,CAAC,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;yBACxE;qBACJ;iBACJ;aACJ;AACL,SAAC,CAAA;AAES,QAAA,IAAA,CAAA,4BAA4B,GAAG,CAAC,KAA2B,EAAE,EAAW,EAAE,WAAiB,EAAE,EAAW,EAAE,UAAkB,KAAI;AAEtI,YAAA,IAAI,WAAW,GAAG,UAAU,KAAK,CAAC,CAAC;AACnC,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC;AAC1C,YAAA,IAAI,EAAE,GAAG,EAAE,CAAC,EAAG,CAAC;AAEhB,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;YAE1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,WAAW,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBACjE,IAAI,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;AAC5C,gBAAA,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;oBACpF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;oBAC7B,IAAI,WAAW,EAAE;AACb,wBAAA,IAAI,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;AACrB,wBAAA,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;wBAC9B,CAAC,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC;qBACzC;yBAAM;AACH,wBAAA,CAAC,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;qBACxE;iBACJ;aACJ;AAED,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAC7B,SAAC,CAAA;QAttCG,IAAI,CAAC,WAAW,GAAG,IAAI,UAAU,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;AAEhE,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,GAAG,EAAgB,CAAC;AAC1C,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,GAAG,EAAgB,CAAC;AAE1C,QAAA,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAE1B,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,KAAK,CAAC;AAE5C,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QAEzB,IAAI,CAAC,cAAc,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,GAAG,OAAO,KAAK,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,GAAG,OAAO,CAAC,CAAC;AAE5G,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAElB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAE1B,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;AAElC,QAAA,IAAI,CAAC,yBAAyB,GAAG,EAAE,CAAC;AAEpC,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAEtB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,YAAY,CAAC,IAAI,EAAE;YACjC,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,GAAG,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;YAC7B,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,EAAE,EAAE,IAAI,CAAC,KAAK;YACd,WAAW,EAAE,OAAO,CAAC,WAAW;YAChC,WAAW,EAAE,OAAO,CAAC,WAAW;AACnC,SAAA,CAAC,CAAC;QAEH,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,IAAI,UAAU,CAAC;QACvE,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,IAAI,OAAO,CAAC;QACpE,IAAI,CAAC,uBAAuB,GAAG,OAAO,CAAC,uBAAuB,IAAI,GAAG,CAAC;AAEtE,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,IAAI,EAAE,CAAC;AAEvC,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,WAAW,GAAGhE,GAAQ,CAAC;AAE5B,QAAA,IAAI,CAAC,WAAW,GAAGC,GAAQ,CAAC;QAE5B,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,IAAI,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;AAE5E,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAE5B,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAE/B,QAAA,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;AAE5B,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AACzB,QAAA,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;AAElC,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,GAAiB,CAAC;AAC1C,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;AAEhC,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;AAEzB,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;AAChC,QAAA,IAAI,CAAC,4BAA4B,GAAG,CAAC,CAAC;AAEtC,QAAA,IAAI,CAAC,yBAAyB,GAAG,EAAE,CAAC;QAEpC,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,yBAAyB,GAAG,IAAI,OAAO,CAAC,yBAAyB,CAAC,IAAI,CAAC,GAAG,IAAI,qBAAqB,CAAC,IAAI,CAAC,CAAC;AAE1I,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,IAAI,CAAC,GAAGU,cAAoB,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;QACvE,IAAI,CAAC,GAAGA,cAAoB,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;QACvE,IAAI,CAAC,GAAGA,cAAoB,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;AACpF,QAAA,IAAI,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC;QAE1C,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,SAAS,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC;AAE9D,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,IAAI,GAAG,CAAC,CAAC;AAE1D,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACxC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AAExC,QAAA,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC;AAC7B,QAAA,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC;AAChC,QAAA,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC;AAChC,QAAA,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC;QAEhC,IAAI,CAAC,gBAAgB,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,WAAW,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACnD,IAAI,CAAC,eAAe,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAEvD,IAAI,CAAC,gBAAgB,GAAG,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;QAElD,IAAI,CAAC,kBAAkB,GAAG,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAEtD,IAAI,CAAC,iBAAiB,GAAG,IAAI,gBAAgB,CAAC,IAAI,CAAC,CAAC;QAEpD,IAAI,CAAC,cAAc,GAAG,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC;QAE3C,IAAI,CAAC,mBAAmB,GAAG,IAAI,kBAAkB,CAAC,CAAC,CAAC,CAAC;AAErD,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,kBAAkB,IAAI,EAAE,CAAC,CAAC;AAEhE,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,EAAE,CAAC;AAEzB,QAAA,IAAI,CAAC,MAAM,GAAG,YAAY,CAAmB,aAAa,CAAC,CAAC;AAE5D,QAAA,IAAI,CAAC,mBAAmB,GAAG,GAAG,CAAC;AAE/B,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAE1B,QAAA,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AAEjB,QAAA,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAC9B,QAAA,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;AAEvC,QAAA,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;AAC/B,QAAA,IAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;AACxC,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;AAExC,QAAA,IAAI,CAAC,uBAAuB,GAAG,GAAG,CAAC;AAEnC,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,6BAA6B,CAAC;AACjE,QAAA,IAAI,CAAC,gCAAgC,GAAG,IAAI,CAAC,uCAAuC,CAAC;QAErF,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,iBAAiB,IAAI,KAAK,CAAC;AAC7D,QAAA,IAAI,CAAC,wBAAwB,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;AAE9D,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAE5B,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,eAAe,IAAI,IAAI,CAAC;QACxD,IAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC,kBAAkB,IAAI,IAAI,CAAC;AAE9D,QAAA,IAAI,CAAC,yBAAyB,GAAG,OAAO,CAAC,wBAAwB,IAAI,SAAS,GAAG,OAAO,CAAC,wBAAwB,GAAG,IAAI,CAAC;KAC5H;AAED;;AAEG;AACH,IAAA,IAAW,YAAY,GAAA;AACnB,QAAA,OAAO,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,0BAA0B,CAAC;KACpE;AAED,IAAA,IAAW,WAAW,GAAA;QAClB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;AAEM,IAAA,qBAAqB,CAAC,SAAe,EAAA;QACxC,OAAO,IAAI,CAAC,SAAS,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;KAC1D;IAED,IAAW,oBAAoB,CAAC,OAAe,EAAA;AAC3C,QAAA,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;KAC9C;AAED,IAAA,IAAW,oBAAoB,GAAA;AAC3B,QAAA,OAAO,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;KAC3C;IAED,IAAW,oBAAoB,CAAC,OAAe,EAAA;AAC3C,QAAA,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;KAC9C;AAED,IAAA,IAAW,oBAAoB,GAAA;AAC3B,QAAA,OAAO,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;KAC3C;IAED,IAAW,iBAAiB,CAAC,OAAgB,EAAA;AACzC,QAAA,IAAI,OAAO,IAAI,IAAI,CAAC,kBAAkB,EAAE;AACpC,YAAA,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC;YAClC,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAChC;KACJ;AAED,IAAA,IAAW,iBAAiB,GAAA;QACxB,OAAO,IAAI,CAAC,kBAAkB,CAAC;KAClC;IAED,IAAW,OAAO,CAAC,GAAiC,EAAA;AAChD,QAAA,IAAI,GAAG,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC;QAC9B,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;KACnD;IAED,IAAW,OAAO,CAAC,GAAiC,EAAA;AAChD,QAAA,IAAI,GAAG,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC;QAC9B,IAAI,CAAC,QAAQ,GAAG,IAAI,YAAY,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;KACnD;IAED,IAAW,QAAQ,CAAC,GAAiC,EAAA;AACjD,QAAA,IAAI,GAAG,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC;QAC9B,IAAI,CAAC,SAAS,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KAC/E;IAED,IAAW,SAAS,CAAC,CAAS,EAAA;AAC1B,QAAA,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;KACzB;AAED,IAAA,IAAW,gBAAgB,GAAA;QACvB,OAAO,IAAI,CAAC,iBAAiB,CAAC;KACjC;AAED,IAAA,IAAW,MAAM,GAAA;AACb,QAAA,OAAO,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;KAC5B;AAED;;;;;AAKG;IACI,SAAS,GAAA;QACZ,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;AAGD,IAAA,IAAW,MAAM,GAAA;AACb,QAAA,OAAQ,IAAI,CAAC,QAAS,CAAC,QAAQ,CAAC,GAAW,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;KACtE;AAED;;;AAGG;AACI,IAAA,UAAU,CAAC,OAAgB,EAAA;AAC9B,QAAA,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;AACtB,QAAA,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;KACjC;AAED,IAAA,IAAW,OAAO,GAAA;QACd,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;AAEM,IAAA,UAAU,CAAC,cAAsB,EAAE,UAAmB,EAAE,UAAmB,EAAA;QAC9E,IAAI,CAAC,WAAW,GAAG,UAAU,IAAI,IAAI,CAAC,WAAW,CAAC;QAClD,IAAI,CAAC,WAAW,GAAG,UAAU,IAAI,IAAI,CAAC,WAAW,CAAC;AAClD,QAAA,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC;AAClC,QAAA,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;AACvC,QAAA,IAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;KAC3C;AAED;;;AAGG;AACI,IAAA,WAAW,CAAC,IAAe,EAAA;AAC9B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B;KACJ;AAED;;;;;AAKG;AACI,IAAA,cAAc,CAAC,IAAY,EAAA;QAC9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACrD,IAAI,IAAI,KAAK,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;AAC/B,gBAAA,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;aAC1B;SACJ;KACJ;AAED;;;;AAIG;AACI,IAAA,QAAQ,CAAC,KAAY,EAAA;AACxB,QAAA,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KACrB;AAED;;;;AAIG;AACI,IAAA,yBAAyB,CAAC,KAAY,EAAA;AACzC,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,KAAK,CAAC,CAAC;KAClE;AAED;;;;AAIG;AACI,IAAA,SAAS,CAAC,MAAe,EAAA;AAC5B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC/C,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B;KACJ;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,KAAY,EAAA;QAC3B,KAAK,CAAC,MAAM,EAAE,CAAC;KAClB;AAED;;;;AAIG;AACI,IAAA,mBAAmB,CAAC,KAAY,EAAA;AACnC,QAAA,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;KACnD;AAED;;;;AAIG;AACI,IAAA,YAAY,CAAC,KAAY,EAAA;AAC5B,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AAChC,gBAAA,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACpC,gBAAA,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;AACvB,gBAAA,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AAC1B,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;aAC5D;SACJ;aAAM;AACH,YAAA,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;AACvB,YAAA,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AACnC,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;SAC5D;KACJ;AAED;;;AAGG;AACI,IAAA,eAAe,CAAC,MAAc,EAAA;AACjC,QAAA,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;AACvC,QAAA,IAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;AAExC,QAAA,IAAI,IAAI,CAAC,aAAa,KAAK,MAAM,EAAE;AAC/B,YAAA,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;AAC5B,YAAA,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,CAAC;YACxC,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAC9B,IAAI,CAAC,0BAA0B,EAAE,CAAC;SACrC;KACJ;AAED;;;AAGG;IACI,eAAe,GAAA;QAClB,OAAO,IAAI,CAAC,aAAa,CAAC;KAC7B;AAED;;;;AAIG;AACI,IAAA,UAAU,CAAC,OAAqB,EAAA;AACnC,QAAA,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;AACvC,QAAA,IAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;AAExC,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,QAAQ,EAAE,CAAC;SACnB;AAED,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;AAC5B,YAAA,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;AAC1B,YAAA,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;SAC/B;AAED,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,QAAA,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;AAE5B,QAAA,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,CAAC;AAExC,QAAA,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE;YACtB,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;AACtD,YAAA,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC3B;aAAM;YACH,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC;AAC7B,iBAAA,IAAI,CAAC,CAAC,CAAoB,KAAI;AAC3B,gBAAA,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC1B,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;AACtD,gBAAA,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC5B,aAAC,CAAC;AACD,iBAAA,KAAK,CAAC,CAAC,GAAG,KAAI;AACX,gBAAA,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACtB,aAAC,CAAC,CAAC;SACV;KACJ;AAEM,IAAA,oBAAoB,CAAC,WAAkC,EAAA;AAC1D,QAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,IAAI,IAAI,CAAC,kBAAkB,EAAE;AACnE,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;AAC9B,YAAA,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;AACd,gBAAA,CAAC,CAAC,aAAa,CAAC,oBAAoB,CAAC,CAAC;AACtC,gBAAA,CAAC,CAAC,UAAU,CAACuE,8BAAsC,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAC;aAC3E;iBAAM;AACH,gBAAA,OAAO,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;aAC1C;SACJ;KACJ;AAED,IAAA,IAAW,iBAAiB,GAAA;QACxB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;IAES,qBAAqB,GAAA;QAE3B,IAAI,CAAC,IAAI,CAAC,QAAQ;YAAE,OAAO;AAE3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;AAE9B,QAAA,CAAC,CAAC,aAAa,CAAC,oBAAoB,CAAC,CAAC;AAEtC,QAAA,IAAI,IAAI,CAAC,kBAAkB,EAAE;AAEzB,YAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,2BAA2B,CAAC;AAC/D,YAAA,IAAI,CAAC,gCAAgC,GAAG,IAAI,CAAC,qCAAqC,CAAC;YAEnF,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,EAAE;AACpC,gBAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aACrC;AAED,YAAA,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;AAE5B,YAAA,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;AACd,gBAAA,CAAC,CAAC,UAAU,CAACA,8BAAsC,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,EAAE,IAAI,CAAC,CAAC;aAC3F;iBAAM;gBACH,CAAC,CAAC,UAAU,CAACC,gCAAwC,EAAE,EAAE,IAAI,CAAC,CAAC;aAClE;YAED,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,EAAE;gBAC5C,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,CAAC,UAAU,EAAE,CAAC;aAC3D;SAEJ;aAAM;AAEH,YAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,6BAA6B,CAAC;AACjE,YAAA,IAAI,CAAC,gCAAgC,GAAG,IAAI,CAAC,uCAAuC,CAAC;AAErF,YAAA,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAE9B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,EAAE;AAC7C,gBAAA,IAAI,CAAC,UAAU,CAAC,IAAI,mBAAmB,EAAE,CAAC,CAAC;aAC9C;iBAAM;gBACH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,CAAC,QAAQ,EAAE,CAAC;aACzD;AAED,YAAA,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;gBACd,CAAC,CAAC,UAAU,CAACC,gCAAwC,EAAE,EAAE,IAAI,CAAC,CAAC;aAClE;iBAAM;gBACH,CAAC,CAAC,UAAU,CAACD,gCAAwC,EAAE,EAAE,IAAI,CAAC,CAAC;aAClE;SACJ;KACJ;IAES,kBAAkB,GAAA;AACxB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC;QAE/B,CAAC,CAAC,UAAU,CAACE,kBAA0B,EAAE,EAAE,IAAI,CAAC,CAAC;QACjD,CAAC,CAAC,UAAU,CAACC,qBAA6B,EAAE,EAAE,IAAI,CAAC,CAAC;QACpD,CAAC,CAAC,UAAU,CAACC,cAAsB,EAAE,EAAE,IAAI,CAAC,CAAC;QAC7C,CAAC,CAAC,UAAU,CAACC,sBAA8B,EAAE,EAAE,IAAI,CAAC,CAAC;QAErD,IAAI,CAAC,QAAS,CAAC,kBAAkB,CAAC,IAAI,EAAE,IAAI,CAAC,kCAAkC,CAAC,CAAC;QACjF,IAAI,CAAC,QAAS,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,CAAC,2BAA2B,CAAC,CAAC;QACxE,IAAI,CAAC,QAAS,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,8BAA8B,CAAC,CAAC;KACjF;AAES,IAAA,eAAe,CAAC,KAAY,EAAA;AAClC,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;KACzD;IAEe,IAAI,GAAA;AAEhB,QAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;;QAGvElB,WAAyB,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAE9D,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC;QAEpC,IAAI,EAAE,GAAG,CAAC,CAAC;;AAEX,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,SAAS,EAAE,CAAC,EAAE,EAAE;YACjC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;AACzE,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,SAAS,EAAE,CAAC,EAAE,EAAE;gBACjC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;AAC/E,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,SAAS,EAAE,CAAC,EAAE,EAAE;AACjC,oBAAA,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;AACrF,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,SAAS,EAAE,CAAC,EAAE,EAAE;AACjC,wBAAA,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;AAC3F,wBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,SAAS,EAAE,CAAC,EAAE,EAAE;AAEjC,4BAAA,IAAI,GAAG,GAAyB;AAC5B,gCAAA,MAAM,EAAE,IAAI;6BACf,CAAC;4BAEF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;gCACpD,IAAI,OAAO,GAAGA,WAAyB,EAAE,CAAC,oBAAoB,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAChF,gCAAA,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,wBAAwB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;6BAC5E;iCAAM;gCACH,IAAI,CAAC,qBAAqB,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC;6BAC1C;AAED,4BAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;yBAC3C;qBACJ;iBACJ;aACJ;SACJ;QAED,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAK;AACpC,YAAA,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;AACvC,YAAA,IAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;AAC5C,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,iBAAiB,EAAE,MAAK;YAC7C,IAAI,CAAC,gCAAgC,EAAE,CAAC;AAC5C,SAAC,CAAC,CAAC;;AAGH,QAAA,IAAI,CAAC,yBAAyB,GAAG,EAAE,CAAC;AAEpC,QAAA,IAAI,aAAa,GAAGA,WAAyB,EAAE,CAAC,sBAAsB,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;AAEtF,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,SAAS,EAAE,CAAC,EAAE,EAAE;AACjC,YAAA,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACtI;;AAGD,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,IAAI,EAAE,CAAC,CAAkB,KAAI;AACrE,YAAA,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;AACzB,YAAA,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;AAC7B,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,kBAAkB,CAAC;AAEpE,QAAA,IAAI,CAAC,uBAAuB,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACtE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACrE,YAAA,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;SACxC;;AAGD,QAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;AAE7B,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,EAAG,CAAC,cAAc,CAAC;;QAG1D,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE1B,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAE7B,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAE5B,IAAI,CAAC,QAAS,CAAC,kBAAkB,CAAC,IAAI,EAAE,IAAI,CAAC,uCAAuC,CAAC,CAAC;;AAGtF,QAAA,IAAI,IAAI,CAAC,gBAAgB,EAAE;AAEvB,YAAA,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;AACtB,YAAA,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC;AAC9B,YAAA,GAAG,CAAC,MAAM,GAAG,MAAK;AACd,gBAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,GAAG,CAAE,CAAC;AACvE,gBAAA,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC;AACtC,aAAC,CAAC;AACF,YAAA,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC;;;;SAKnC;;AAGD,QAAA,IAAI,IAAI,CAAC,mBAAmB,EAAE;AAC1B,YAAA,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;AACtB,YAAA,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC;AAC9B,YAAA,GAAG,CAAC,MAAM,GAAG,MAAK;AACd,gBAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,GAAG,CAAE,CAAC;AAC1E,gBAAA,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG,IAAI,CAAC;AACzC,aAAC,CAAC;AACF,YAAA,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC;;;;SAKtC;AAED,QAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;AAE7B,QAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC;AAE/B,QAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC;;QAGlE,IAAI,CAAC,UAAU,EAAE,CAAC;QAElB,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,MAAK;YACtC,IAAI,CAAC,qBAAqB,EAAE,CAAC;AACjC,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,EAAE,CAAC;AAElB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;;;AAKzB,QAAA,IAAI,IAAI,CAAC,kBAAkB,EAAE;AACzB,YAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;SAC5C;QAED,IAAI,CAAC,QAAS,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1C,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;AACzC,QAAA,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;KACxB;IAEM,UAAU,GAAA;QACb,IAAI,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;AAC7B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SAC1B;KACJ;IAES,kBAAkB,GAAA;AACxB,QAAA,IAAI,CAAC,4BAA4B,GAAG,CAAC,CAAC;AACtC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,qBAAqB,EAC9B,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,EAAG,CAAC;AACpC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC1C,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACd,YAAA,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,MAAqB,CAAC,CAAC;AAC1C,YAAA,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC;SACpB;KACJ;IAES,UAAU,GAAA;AAChB,QAAA,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC;QAClC,IAAI,CAAC,QAAQ,EAAE,CAAC;KACnB;IAES,QAAQ,GAAA;QACd,IAAI,CAAC,sBAAsB,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAC5B,QAAA,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC;KACnC;AAED;;;;;AAKG;IACI,qBAAqB,CAAC,MAA6B,EAAE,MAA6B,EAAA;AACrF,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,EAAG,CAAC,aAAa,CAAC,IAAI,CAAC,eAAgB,CAAC,CAAC;AAChE,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,EAAG,CAAC,aAAa,CAAC,IAAI,CAAC,eAAgB,CAAC,CAAC;AAChE,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,MAAM,EAAE,CAAC,OAAwB,KAAI;AAC7E,YAAA,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;AACnC,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,MAAM,EAAE,CAAC,OAAwB,KAAI;AAC7E,YAAA,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;AACnC,SAAC,CAAC,CAAC;KACN;AAES,IAAA,wBAAwB,CAAC,KAAY,EAAA;AAC3C,QAAA,OAAO,sCAAsC,KAAK,CAAC,cAAc,EAAE,QAAQ,CAAC;KAC/E;AAED;;;AAGG;IACI,sBAAsB,GAAA;QACzB,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACrD,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AACzB,YAAA,IAAI,EAAE,CAAC,aAAa,EAAE,EAAE;AACpB,gBAAA,IAAI,EAAE,CAAC,cAAc,EAAE,CAAC,MAAM,EAAE;AAC5B,oBAAA,IAAI,IAAI,IAAI,CAAC,wBAAwB,CAAC,EAAE,CAAC,CAAC;iBAC7C;aACJ;SACJ;AACD,QAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAA;KAC/B;IAEM,mBAAmB,GAAA;AACtB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC5B;IAES,oBAAoB,GAAA;AAC1B,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAC5B,QAAA,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC;AAElC,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,mBAAmB,CAAC,MAAM,GAAG,CAAC,CAAC;QAEpC,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACrD,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AACzB,YAAA,IAAI,EAAE,CAAC,aAAa,EAAE,EAAE;AACpB,gBAAA,IAAI,EAAE,CAAC,WAAW,EAAE,EAAE;AAClB,oBAAA,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAE,EAAE,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAE,CAAC,CAAC;AAC7E,oBAAA,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;iBACvB;AAED,gBAAA,IAAI,EAAE,CAAC,eAAe,EAAE,EAAE;AACtB,oBAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBACnC;AAED,gBAAA,IAAI,EAAE,CAAC,QAAQ,EAAE;AACb,oBAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBACrC;AAED,gBAAA,IAAI,EAAE,CAAC,cAAc,EAAE,CAAC,MAAM,EAAE;AAC5B,oBAAA,IAAI,IAAI,IAAI,CAAC,wBAAwB,CAAC,EAAE,CAAC,CAAC;iBAC7C;aAEJ;iBAAM,IAAI,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC,cAAc,GAAG,CAAC,EAAE;AAC5C,gBAAA,IAAI,EAAE,CAAC,eAAe,EAAE,EAAE;AACtB,oBAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBACnC;AAED,gBAAA,IAAI,EAAE,CAAC,QAAQ,EAAE;AACb,oBAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBACrC;aACJ;SACJ;AAED,QAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAE7B,IAAI,CAAC,WAAW,EAAE,CAAC;KACtB;AAED;;;AAGG;AACO,IAAA,iBAAiB,CAAC,IAAY,EAAA;QACpC,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE;AACpC,YAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,gBAAA,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,YAAa,CAAC,SAAS,KAAK,IAAI,EAAE;oBACpD,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,YAAa,CAAC,SAAS,GAAG,IAAI,CAAC;iBACpD;aACJ;iBAAM;gBACH,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,YAAa,CAAC,SAAS,GAAG,EAAE,CAAC;aAClD;SACJ;KACJ;AAED;;;AAGG;IACO,WAAW,GAAA;AAEjB,QAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAE5G,QAAA,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;AAClC,QAAA,IAAI,CAAC,uBAAuB,CAAC,MAAM,GAAG,CAAC,CAAC;AAExC,QAAA,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE;AAC/B,YAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAE1G,YAAA,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YACX,IAAI,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;YACvD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC/D,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,KAAK,CAAC,IAAI,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,KAAK,UAAU,EAAE;AACnF,oBAAA,CAAC,EAAE,CAAC;AACJ,oBAAA,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;oBACrC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;iBACtD;AACD,gBAAA,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;aACnE;SACJ;KACJ;IAES,sBAAsB,GAAA;AAC5B,QAAA,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;AAC/B,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;KAC5B;IAES,0BAA0B,GAAA;QAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YACrE,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;AAC3C,YAAA,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;SACxC;KACJ;AAES,IAAA,4BAA4B,CAAC,GAAiB,EAAA;AACpD,QAAA,IAAI,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,uBAAuB,IAAI,GAAG,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,oBAAoB,IAAI,GAAG,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,oBAAoB,EAAE;AAE9I,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;AAEpC,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,cAAc,EAC1B,EAAE,GAAG,IAAI,CAAC,uBAAuB,EACjC,KAAK,GAAG,EAAE,CAAC;YAEf,IAAI,CAAC,0BAA0B,EAAE,CAAC;AAClC,YAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AAEzB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC7C,gBAAA,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AACjB,gBAAA,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AAC7C,gBAAA,IAAI,EAAE,CAAC,OAAO,CAAC,QAAQ,KAAK,IAAI,CAAC,WAAW,IAAI,EAAE,GAAG,eAAe,EAAE;AAClE,oBAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBAC7B,IAAI,CAAC,GAAG,CAAC,EAAE,SAAS,GAAG,EAAE,CAAC,SAAS,CAAC;oBACpC,OAAO,SAAS,EAAE;AACd,wBAAA,IAAI,SAAS,GAAG,CAAC,EAAE;4BACf,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;yBAClB;AACD,wBAAA,CAAC,EAAE,CAAC;wBACJ,SAAS,KAAK,CAAC,CAAC;qBACnB;iBACJ;qBAAM;AACH,oBAAA,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBAClB;aACJ;AAED,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC9C,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aACrE;SACJ;KACJ;IAED,IAAW,wBAAwB,CAAC,SAAkB,EAAA;AAClD,QAAA,IAAI,CAAC,yBAAyB,GAAG,SAAS,CAAC;;KAE9C;AAED,IAAA,IAAW,wBAAwB,GAAA;QAC/B,OAAO,IAAI,CAAC,yBAAyB,CAAC;KACzC;AAED;;;AAGG;AACO,IAAA,mBAAmB,CAAC,GAAiB,EAAA;AAC3C,QAAA,IAAI,CAAC,QAAQ,GAAGmB,IAAS,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AACjG,QAAA,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC;;QAG1B,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,0BAA0B,EAAE,CAAC;QAElC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACzC,QAAA,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;;AAG3C,QAAA,IAAI,CAAC,WAAW,GAAGzF,GAAQ,CAAC;AAC5B,QAAA,IAAI,CAAC,WAAW,GAAGC,GAAQ,CAAC;AAE5B,QAAA,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,CAAC;AAE3C,QAAA,IAAI,CAAC,4BAA4B,CAAC,GAAG,CAAC,CAAC;;AAGvC,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;AAE1B,QAAA,IAAI,IAAI,CAAC,yBAAyB,EAAE;YAEhC,IAAI,WAAW,GAAW,EAAE,CAAC;AAE7B,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACjD,IAAI,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;;;gBAGhC,EAAE,CAAC,mBAAmB,EAAE,CAAC;gBACzB,EAAE,CAAC,yBAAyB,EAAE,CAAC;gBAE/B,IAAI,EAAE,CAAC,OAAO,CAAC,kBAAkB,IAAI,GAAG,EAAE;oBACtC,EAAE,CAAC,cAAc,EAAE,CAAC;AACpB,oBAAA,EAAE,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC;AAC1C,oBAAA,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBACxB;qBAAM;AACH,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBAC7C,IAAI,GAAG,GAAG,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;AAC7B,wBAAA,IAAI,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,OAAO,CAAC,kBAAkB,IAAI,GAAG,EAAE;4BACtD,GAAG,CAAC,cAAc,EAAE,CAAC;AACrB,4BAAA,GAAG,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC;AAC3C,4BAAA,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;yBACzB;qBACJ;iBACJ;aACJ;SACJ;KACJ;IAES,6BAA6B,GAAA;AACnC,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAA4B,CAAC;QACtD,IAAI,EAAE,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;;;AAGvC,QAAA,IAAI,CAAC,qBAAqB,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,CAAC;KAC9F;IAES,2BAA2B,GAAA;AACjC,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAA4B,CAAC;QACtD,IAAI,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;;;AAGrC,QAAA,IAAI,CAAC,qBAAqB,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,CAAC;KAC9F;IAES,uCAAuC,GAAA;AAC7C,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAA4B,CAAC;QACtD,IAAI,EAAE,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;;;AAGvC,QAAA,IAAI,CAAC,+BAA+B,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,CAAC;KACxG;IAES,qCAAqC,GAAA;AAC3C,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAA4B,CAAC;QACtD,IAAI,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;;;AAGrC,QAAA,IAAI,CAAC,+BAA+B,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,CAAC;KACxG;IAES,cAAc,GAAA;AACpB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;;;QAItB,IAAI,CAAC,QAAS,CAAC,0BAA0B,GAAG,CAAC,IAAI,CAAC,OAAQ,CAAC,OAAO,CAAC;AAEnE,QAAA,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC/D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC/B,GAAG,CAAC,QAAQ,EAAE,CAAC;;AAGf,QAAA,IAAI,IAAI,CAAC,kBAAkB,GAAG,SAAS,IAAI,IAAI,CAAC,mBAAmB,GAAG,MAAM,EAAE;AAC1E,YAAA,IAAI,CAAC,OAAQ,CAAC,UAAU,EAAE,CAAC;YAC3B,IAAI,CAAC,QAAQ,EAAE,CAAC;SACnB;AAED,QAAA,IAAI,IAAI,CAAC,4BAA4B,GAAG,GAAG,EAAE;YACzC,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAC7B;KACJ;AAED;;;AAGG;IACa,QAAQ,GAAA;AAEpB,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,YAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,oBAAoB,EAAE,CAAC;SAC/B;AAED,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE;AACzB,YAAA,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;YAErB,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,2BAA2B,EAAE;AACzD,gBAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACzC;AAED,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAE3B,IAAI,CAAC,eAAe,EAAE,CAAC;;AAGvB,YAAA,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;;AAG/B,YAAA,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;;AAG9B,YAAA,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;AAEhC,YAAA,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;AACpC,YAAA,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;;;AAIrB,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;YAG7C,IAAI,CAAC,8BAA8B,EAAE,CAAC;SACzC;AAED,QAAA,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;KAC9D;AAED;;;;;AAKG;IACa,KAAK,GAAA;QACjB,IAAI,CAAC,sBAAsB,EAAE,CAAC;KACjC;IAES,qBAAqB,GAAA;AAC3B,QAAA,IAAI,IAAI,CAAC,gBAAgB,EAAE;AACvB,YAAA,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE;AACjC,gBAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC;AACtC,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;aAC3D;SACJ;aAAM;AACH,YAAA,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;SAC1C;AACD,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,IAAI,CAAC,iBAAiB,EAAE;AACxB,YAAA,IAAI,CAAC,IAAI,CAAC,0BAA0B,EAAE;AAClC,gBAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;AACvC,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;aAC5D;SACJ;aAAM;AACH,YAAA,IAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;SAC3C;AAED,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;KACjC;IAEM,YAAY,GAAA;AACf,QAAA,IAAI,CAAC,2BAA2B,GAAG,KAAK,CAAC;AACzC,QAAA,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,KAAK,CAAC,CAAC;KAClD;IAEM,cAAc,GAAA;AACjB,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;AACxC,QAAA,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,IAAI,CAAC,CAAC;KACjD;AAGS,IAAA,mBAAmB,CAAC,GAAiB,EAAA;QAC3C,IAAI,EAAE,EAAE,GAAG,CAAC;AACZ,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAS,CAAC;AAE9B,QAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC;AACzB,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEf,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAExB,QAAQ,CAAC,sBAAsB,EAAE,CAAC;AAElC,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,YAAA,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;YACzC,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC;AAC5C,YAAA,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;YAElB,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAC1D,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;AAChE,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAE5E,YAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,gBAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;AACrE,gBAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;AACrE,gBAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC;AACxE,gBAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,uBAAuB,EAAE,IAAI,CAAC,SAAS,CAAC,uBAAuB,IAAI,IAAI,CAAC,uBAAuB,CAAC,CAAC;aACrH;iBAAM;gBACH,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC1C,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC1C,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC5C,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,uBAAuB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;aAC3E;;;;YAKD,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;AAChD,YAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,aAAc,IAAI,IAAI,CAAC,kBAAmB,CAAC,CAAC;YAC/E,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAEhD,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AACpD,YAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,gBAAiB,IAAI,IAAI,CAAC,kBAAmB,CAAC,CAAC;AAClF,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AAEvD,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC;SAEhD;aAAM;AACH,YAAA,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;YACzC,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC;AAC5C,YAAA,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AAClB,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;AAChE,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC,CAAC;SAC/E;QAED,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;QAChD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;AAE9C,QAAA,OAAO,EAAE,CAAC;KACb;AAES,IAAA,iBAAiB,CAAC,GAAiB,EAAA;QAEzC,IAAI,EAAE,EAAE,GAAG,CAAC;AACZ,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAS,CAAC;AAC9B,QAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC;AACzB,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEf,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAExB,QAAQ,CAAC,sBAAsB,EAAE,CAAC;AAElC,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,YAAA,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;YACzC,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC;AAC5C,YAAA,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;YAElB,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAC1D,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;AAChE,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAE5E,YAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,gBAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;AACrE,gBAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;AACrE,gBAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC;AACxE,gBAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,uBAAuB,EAAE,IAAI,CAAC,SAAS,CAAC,uBAAuB,IAAI,IAAI,CAAC,uBAAuB,CAAC,CAAC;aACrH;iBAAM;gBACH,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC1C,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC1C,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC5C,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,uBAAuB,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;aAC3E;YAED,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;;;;YAKhE,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;AAChD,YAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,aAAc,IAAI,IAAI,CAAC,kBAAmB,CAAC,CAAC;YAC/E,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAEhD,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AACpD,YAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,gBAAiB,IAAI,IAAI,CAAC,kBAAmB,CAAC,CAAC;AAClF,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;;;;AAKvD,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;YACpD,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAG,QAAQ,CAAC,QAAQ,CAAC,UAAyB,CAAC,oBAAqB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9G,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,oBAAoB,EAAE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AAE5D,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;YACpD,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAG,QAAQ,CAAC,QAAQ,CAAC,UAAyB,CAAC,iBAAkB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3G,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;AAEzD,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC;SAEhD;aAAM;AACH,YAAA,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;YACzC,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC;AAC5C,YAAA,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AAClB,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;AAChE,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC,CAAC;SAC/E;QAED,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;QAChD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;AAE9C,QAAA,OAAO,EAAE,CAAC;KACb;AAoDD;;AAEG;AACO,IAAA,qBAAqB,CAAC,EAAW,EAAE,GAAiB,EAAE,aAAqB,EAAA;AAEjF,QAAA,IAAI,SAAS,GAAG,GAAG,CAAC,WAAW,CAAC;AAEhC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,uBAAuB,CAAC;AAEtC,QAAA,IAAI,EAAE,CAAC,MAAM,EAAE;AACX,YAAA,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AAChB,YAAA,KAAK,IAAI,CAAC,GAAG,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AACtC,gBAAA,IAAI,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;gBAChB,IAAI,EAAE,CAAC,OAAO,IAAI,SAAS,IAAI,EAAE,CAAC,qBAAqB,EAAE,EAAE;AACvD,oBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;iBACpB;aACJ;SACJ;AAED,QAAA,IAAI,KAAK,GAAG,IAAI,GAAoB,CAAC;QACrC,IAAI,mBAAmB,GAAc,EAAE,CAAC;AAExC,QAAA,IAAI,IAAI,GAAG,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC;AAC1C,QAAA,IAAI,CAAC,GAAG,aAAa,CAAC,MAAM,CAAC;AAE7B,QAAA,IAAI,GAAG,CAAC,KAAK,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,mCAAmC;YAC3F,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,EAAE,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;AAC1B,gBAAA,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC;AAEnB,gBAAA,IAAI,CAAC,4BAA4B,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAE3D,gBAAA,IAAI,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;AACrB,gBAAA,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;AAC9B,gBAAA,CAAC,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACnC;SACJ;aAAM;YACH,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,EAAE,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;AAC1B,gBAAA,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC;AAEnB,gBAAA,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,mBAAmB,CAAC,CAAC;AAEzE,gBAAA,IAAI,CAAC,CAAC,kBAAkB,GAAG,CAAC,EAAE;AAC1B,oBAAA,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAC/B;qBAAM;AACH,oBAAA,IAAI,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;AACrB,oBAAA,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;AAC9B,oBAAA,CAAC,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;iBACnC;aACJ;AAED,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACjD,gBAAA,IAAI,EAAE,GAAG,mBAAmB,CAAC,CAAC,CAAC,CAAC;AAEhC,gBAAA,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE,CAAC;AACtB,gBAAA,EAAE,CAAC,aAAa,IAAI,EAAE,CAAC,MAAM,EAAE,CAAC;AAChC,gBAAA,EAAE,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACpC;SACJ;KAEJ;AAES,IAAA,+BAA+B,CAAC,EAAW,EAAE,GAAiB,EAAE,aAAqB,EAAA;QAC3F,IAAI,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,EAAG,CAAC;AACpC,QAAA,IAAI,SAAS,GAAG,GAAG,CAAC,WAAW,CAAC;AAEhC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,uBAAuB,CAAC;AAEtC,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,mBAAmB,CAAC,CAAC;AAClC,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAEzB,QAAA,IAAI,KAAK,GAAG,IAAI,GAAoB,CAAC;QACrC,IAAI,mBAAmB,GAAc,EAAE,CAAC;AAExC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC3C,YAAA,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AAChB,YAAA,KAAK,IAAI,CAAC,GAAG,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;AACtC,gBAAA,IAAI,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;gBAChB,IAAI,EAAE,CAAC,OAAO,IAAI,SAAS,IAAI,EAAE,CAAC,qBAAqB,EAAE,EAAE;AACvD,oBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;iBACpB;aACJ;YAED,EAAE,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACxB,YAAA,IAAI,CAAC,GAAG,aAAa,CAAC,MAAM,CAAC;YAC7B,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,EAAE,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;AAC1B,gBAAA,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,mBAAmB,CAAC,CAAC;gBACzE,IAAI,EAAE,CAAC,OAAO,CAAC,kBAAkB,GAAG,CAAC,EAAE;AACnC,oBAAA,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;iBAC3B;qBAAM;oBACH,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;iBAC3E;aACJ;SACJ;AAED,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,mBAAmB,CAAC,CAAC;AACnC,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;KAC3B;IAES,8BAA8B,GAAA;AACpC,QAAA,IAAI,CAAC,IAAI,CAAC,OAAQ,CAAC,OAAO,EAAE;AAExB,YAAA,IAAI,EAAE,CAAC;AACP,YAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAS,CAAC;AAC9B,YAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC;AACzB,YAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AACf,YAAA,IAAI,GAAG,GAAG,QAAQ,CAAC,YAA4B,CAAC;AAEhD,YAAA,CAAC,CAAC,QAAQ,CAAC,sBAAsB,CAAC,QAAQ,EAAE,CAAC;YAC7C,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,sBAAsB,CAAC,QAAQ,CAAC;AAChD,YAAA,IAAI,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AAEtB,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;AAChE,YAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC,CAAC;YAE5E,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;YAChD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;;YAG9C,IAAI,EAAE,GAAG,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;AAC/D,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,uBAAuB,CAAC;AAEtC,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YAClB,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,sBAAsB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;aACnD;SACJ;KACJ;IAES,kCAAkC,GAAA;AACxC,QAAA,IAAI,EAAE,CAAC;AACP,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAS,CAAC;AAC9B,QAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC;AACzB,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AACf,QAAA,CAAC,CAAC,QAAQ,CAAC,qBAAqB,CAAC,QAAQ,EAAE,CAAC;QAC5C,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,qBAAqB,CAAC,QAAQ,CAAC;AAC/C,QAAA,IAAI,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AACtB,QAAA,IAAI,GAAG,GAAG,QAAQ,CAAC,YAAa,CAAC;AAEjC,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AAExB,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;AAChE,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC,CAAC;QAE5E,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;QAChD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;;QAG9C,IAAI,EAAE,GAAG,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,iBAAiB,EAAE,CAAC,CAAC;AAC/D,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,uBAAuB,CAAC;AAEtC,QAAA,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;QAClB,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACrD;;QAGD,QAAQ,CAAC,kBAAkB,EAAE,CAAC;AAE9B,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,mBAAmB,CAAC,CAAC;AAClC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC3C,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,EAAE,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACxB,OAAO,CAAC,EAAE,EAAE;gBACR,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;aACpF;SACJ;AACD,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,mBAAmB,CAAC,CAAC;KACtC;IAES,2BAA2B,GAAA;AACjC,QAAA,IAAI,EAAE,CAAC;AACP,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAS,CAAC;AAC9B,QAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC;AACzB,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AACf,QAAA,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC;QACrC,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC;AACxC,QAAA,IAAI,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AACtB,QAAA,IAAI,GAAG,GAAG,QAAQ,CAAC,YAAa,CAAC;AAEjC,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AACrB,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,mBAAmB,CAAC,CAAC;AAEnC,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;AAChE,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC,CAAC;QAE5E,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;QAChD,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;AAE9C,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,mBAAmB,EAAE,GAAG,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;;AAGnE,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,iBAAiB,EAAE,CAAC,EAC1D,EAAE,GAAG,IAAI,CAAC,uBAAuB,CAAC;AAEtC,QAAA,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;QAClB,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;SAC3C;AAED,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;KACvB;IAES,8BAA8B,GAAA;AACpC,QAAA,IAAI,CAAC,yBAAyB,CAAC,MAAM,GAAG,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,yBAAyB,GAAG,EAAE,CAAC;AAEpC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC;QACxC,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,EAAE,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAW,CAAC;YAE/C,IAAI,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC,qBAAqB,EAAE,EAAE;gBAC1C,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACzC;AAED,YAAA,EAAE,CAAC,yBAAyB,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;YAC7D,EAAE,CAAC,MAAM,EAAE,CAAC;SACf;KACJ;IAES,uCAAuC,GAAA;AAC7C,QAAA,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;KACrE;AAED;;;AAGG;IACI,QAAQ,GAAA;AACX,QAAA,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;AAE7B,QAAA,IAAI,CAAC,MAAM,CAAC,cAAc,GAAG,IAAI,CAAC;QAElC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAE1C,QAAA,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,OAAQ,CAAC,YAAY,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAE1C,QAAA,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;KAC/B;AAED;;;;;;AAMG;AACI,IAAA,2BAA2B,CAAC,GAAQ,EAAA;AACvC,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC;KAC3D;AAED;;;;;AAKG;AACI,IAAA,8BAA8B,CAAC,EAA0B,EAAA;AAC5D,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;QACvC,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KACpE;AAED;;;;;AAKG;AACI,IAAA,2BAA2B,CAAC,EAAQ,EAAA;QACvC,IAAI,MAAM,GAAG,IAAI,CAAC,8BAA8B,CAAC,EAAE,CAAC,CAAC;QACrD,IAAI,MAAM,EAAE;YACR,OAAO,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;SACnD;KACJ;AAED;;;;AAIG;IACI,4BAA4B,GAAA;QAC/B,IAAI,EAAE,GAAG,IAAI,CAAC,QAAS,CAAC,MAAM,CAAC,UAAU,CAAC;QAC1C,IAAI,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,CAAC;QAC7C,IAAI,QAAQ,EAAE;AACV,YAAA,OAAO,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC,GAAG,CAAC,CAAC;SAChF;KACJ;AAED;;;;;;AAMG;AACI,IAAA,4BAA4B,CAAC,EAA0B,EAAA;QAC1D,IAAI,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,CAAC;QAC7C,IAAI,QAAQ,EAAE;YACV,IAAI,SAAS,GAAI,EAAsB,CAAC,SAAS,IAAI,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AACxG,YAAA,OAAO,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC,GAAG,CAAC,CAAC;SAC7E;KACJ;AAED;;;;;;AAMG;AACI,IAAA,yBAAyB,CAAC,EAA0B,EAAA;QACvD,IAAI,MAAM,GAAG,IAAI,CAAC,4BAA4B,CAAC,EAAE,CAAC,CAAC;QACnD,IAAI,MAAM,EAAE;YACR,OAAO,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;SACnD;KACJ;AAED;;;;;AAKG;AACI,IAAA,qBAAqB,CAAC,MAAY,EAAA;QACrC,OAAO,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;KACvD;AAED;;;;;AAKG;AACI,IAAA,kBAAkB,CAAC,MAAc,EAAA;QACpC,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;QACtD,IAAI,MAAM,EAAE;YACR,OAAO,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SACvD;KACJ;AAED;;;;;AAKG;AACI,IAAA,6BAA6B,CAAC,EAA0B,EAAA;QAC3D,IAAI,MAAM,GAAG,IAAI,CAAC,8BAA8B,CAAC,EAAE,CAAC,CAAC;QACrD,IAAI,MAAM,EAAE;AACR,YAAA,OAAO,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC,GAAG,CAAC,CAAC;SAC5D;KACJ;AAED;;;;;AAKG;AACI,IAAA,oBAAoB,CAAC,EAA0B,EAAA;AAClD,QAAA,IAAI,IAAI,CAAC,OAAQ,CAAC,OAAO,EAAE;YACvB,OAAO,IAAI,CAAC,6BAA6B,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;SACtD;aAAM;AAEH,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC;AACvB,YAAA,IAAI,GAAG,GAAG,CAAC,CAAC,OAAQ,CAAC,MAAO,CAAC;YAE7B,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC;AAC3B,YAAA,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC;AAE3C,YAAA,gBAAgB,CAAC,CAAC,CAAC,GAAG,gBAAgB,CAAC,CAAC,CAAC,GAAG,gBAAgB,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YAEtE,IAAI,IAAI,GAAG,CAAC,CAAC;YAEb,CAAC,CAAC,iBAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,gBAAgB,CAAC,CAAC;AAEhD,YAAA,IAAI,GAAG,sBAAsB,CAAC,gBAAgB,CAAC,CAAC;AAEhD,YAAA,IAAI,EAAE,gBAAgB,CAAC,CAAC,CAAC,IAAI,gBAAgB,CAAC,CAAC,CAAC,IAAI,gBAAgB,CAAC,CAAC,CAAC,CAAC,EAAE;gBACtE,IAAI,GAAG,IAAI,CAAC,6BAA6B,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;aACtD;AAAM,iBAAA,IAAI,IAAI,GAAG,cAAc,EAAE;AAC9B,gBAAA,CAAC,CAAC,sBAAuB,CAAC,QAAQ,EAAE,CAAC;;gBAGrC,CAAC,CAAC,sBAAuB,CAAC,UAAU,CAAC,gBAAgB,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;AACjE,gBAAA,IAAI,SAAS,GAAG,IAAI,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;AACvH,gBAAA,IAAI,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,uBAAuB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;gBACtF,IAAI,GAAG,GAAI,EAAsB,CAAC,SAAS,IAAI,CAAC,CAAC,YAAa,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;gBACrF,IAAI,GAAG,EAAE,YAAY,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,YAAa,CAAC,UAAU,EAAE,CAAC,CAAC;;AAGlF,gBAAA,CAAC,CAAC,sBAAuB,CAAC,UAAU,EAAE,CAAC;aAC1C;AACD,YAAA,OAAO,IAAI,CAAC;SACf;KACJ;AAED;;;;AAIG;AACI,IAAA,UAAU,CAAC,MAAc,EAAA;AAC5B,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;SAClC;aAAM;AACH,YAAA,IAAI,CAAC,kBAAkB,GAAG,MAAM,CAAC;SACpC;KACJ;AAED;;;;;AAKG;AACI,IAAA,aAAa,CAAC,SAAuB,EAAA;AACxC,QAAA,IAAI,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KAC/G;AAED;;;;AAIG;IACI,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED;;;;;;AAMG;AACI,IAAA,UAAU,CAAC,MAAc,EAAE,UAAmB,EAAE,EAAS,EAAA;QAC5D,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;KACjD;AAED;;;;;;;;;AASG;IACI,SAAS,CACZ,MAAc,EACd,MAAe,EACf,EAAS,EACT,IAAa,EACb,gBAA2B,EAC3B,aAAwB,EAAA;AAExB,QAAA,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,gBAAgB,EAAE,aAAa,CAAC,CAAC;KACpF;AAED;;;;;;;;;;AAUG;AACI,IAAA,YAAY,CACf,SAAe,EACf,IAAkB,EAClB,EAAgB,EAChB,IAAa,EACb,gBAAkC,EAClC,aAA+B,EAC/B,aAA+B,EAAA;AAE/B,QAAA,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,gBAAgB,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC;KACvG;AAED;;;;;;;;;;AAUG;AACI,IAAA,SAAS,CACZ,MAAc,EACd,IAAoB,EACpB,EAAS,EACT,IAAa,EACb,gBAA2B,EAC3B,aAAwB,EACxB,aAAwB,EAAA;AAExB,QAAA,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,gBAAgB,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC;KACjG;AAED;;;AAGG;IACI,UAAU,GAAA;AACb,QAAA,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;KAC5B;IAEe,yBAAyB,GAAA;AACrC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACpD,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,CAAC;SACpE;QAED,IAAI,gBAAgB,GAA4B,EAAE,CAAC;AACnD,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AACzB,YAAA,IAAI,EAAE,YAAY,MAAM,EAAE;AACrB,gBAAA,EAAa,CAAC,IAAI,CAAC,UAAU,CAAS,EAAA;AACnC,oBAAA,IAAI,CAAC,CAAC,iBAAiB,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE;AAClE,wBAAA,CAAC,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,CAAC;wBAC3D,gBAAgB,CAAC,CAAC,CAAC,iBAAiB,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;qBACnD;AACL,iBAAC,CAAC,CAAC;aACN;SACJ;KACJ;IAEM,qBAAqB,CAAC,MAAc,EAAE,GAAS,EAAA;QAClD,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;QAC1C,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;AACrC,gBAAA,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;aAC1D;SACJ;KACJ;IAEM,MAAM,gBAAgB,CAAC,MAAc,EAAA;AACxC,QAAA,OAAO,IAAI,OAAO,CAAS,CAAC,OAA8B,KAAI;AAC1D,YAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,gBAAA,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,GAAW,KAAI;oBACxD,OAAO,CAAC,GAAG,CAAC,CAAC;AACjB,iBAAC,CAAC,CAAC;aACN;iBAAM;gBACH,OAAO,CAAC,CAAC,CAAC,CAAC;aACd;AACL,SAAC,CAAC,CAAC;KACN;IAEM,MAAM,iBAAiB,CAAC,MAAc,EAAA;AACzC,QAAA,OAAO,IAAI,OAAO,CAAS,CAAC,OAA8B,KAAI;AAC1D,YAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,gBAAA,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,GAAW,KAAI;AACxD,oBAAA,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,OAAQ,CAAC,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC;AAC/D,iBAAC,CAAC,CAAC;aACN;iBAAM;gBACH,OAAO,CAAC,CAAC,CAAC,CAAC;aACd;AACL,SAAC,CAAC,CAAC;KACN;IAEe,QAAQ,GAAA;QACpB,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,QAAA,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,CAAC;AACxC,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;KAC5B;AAcJ,CAAA;AAED,MAAM,aAAa,GAAqB;AACpC;;;AAGG;IACH,MAAM;AAEN;;;AAGG;IACH,UAAU;AAEV;;;AAGG;IACH,iBAAiB;AAEjB;;;AAGG;IACH,aAAa;AAEb;;;AAGG;IACH,uBAAuB;AAEvB;;;AAGG;IACH,iBAAiB;AAEjB;;;AAGG;IACH,kBAAkB;AAElB;;;AAGG;IACH,cAAc;CACjB;;SC/uEe,MAAM,GAAA;AAClB,IAAA,OAAO,IAAI,OAAO,CAAC,QAAQ,EAAE;AACzB,QAAA,QAAQ,EAAE;AACN,YAAA,oBAAoB,EAAE,EAAC,IAAI,EAAE,KAAK,CAAC,IAAI,EAAC;AACxC,YAAA,QAAQ,EAAE,EAAC,IAAI,EAAE,KAAK,CAAC,WAAW,EAAC;AACnC,YAAA,GAAG,EAAE,EAAC,IAAI,EAAE,KAAK,CAAC,IAAI,EAAC;AAC1B,SAAA;AACD,QAAA,UAAU,EAAE;YACR,eAAe,EAAE,EAAC,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,WAAW,EAAE,IAAI,EAAC;AACzD,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;;;AAOE,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;;AAKE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;AC1BA,MAAM,MAAO,SAAQ,UAAU,CAAA;AAM3B,IAAA,WAAA,CAAY,MAAuB,EAAA;QAC/B,KAAK,CAAC,QAAQ,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AACjC,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;KACvB;IAED,OAAO,aAAa,CAAC,aAAqB,EAAA;QACtC,OAAO,IAAI,MAAM,CAAC;YACd,EAAE,EAAE,aAAa,GAAG,oBAAoB;YACxC,EAAE,EAAE,aAAa,GAAG,oBAAoB;YACxC,EAAE,EAAE,aAAa,GAAG,oBAAoB;YACxC,EAAE,EAAE,aAAa,GAAG,oBAAoB;YACxC,EAAE,EAAE,aAAa,GAAG,oBAAoB;YACxC,EAAE,EAAE,aAAa,GAAG,oBAAoB;AAC3C,SAAA,CAAC,CAAC;KACN;IAEe,IAAI,GAAA;AAChB,QAAA,IAAI,CAAC,QAAS,CAAC,OAAQ,CAAC,UAAU,CAACyF,MAAc,EAAE,EAAE,IAAI,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACtE,IAAI,CAAC,cAAc,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,EAAG,CAAC,SAAS,CAAC;KACxD;IAEe,KAAK,GAAA;AACjB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC;AAC/B,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AACf,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAS,CAAC,YAAa,CAAC;AACvC,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAE1B,QAAA,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAC7B,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC;AACpC,QAAA,IAAI,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC;AACtB,QAAA,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,oBAAoB,EAAE,KAAK,EAAE,GAAG,CAAC,uBAAuB,EAAE,CAAC,CAAC;AACpF,QAAA,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;AAC1C,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAC9B,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,OAAQ,CAAC,CAAC;QACnD,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;AAC9B,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,oBAAqB,CAAC;QACrC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;QACpC,EAAE,CAAC,mBAAmB,CAAC,EAAE,CAAC,UAAU,CAAC,eAAe,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE3F,QAAA,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC9C,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;KAC5B;IAES,cAAc,GAAA;AAEpB,QAAA,MAAM,QAAQ,GAAG,IAAI,YAAY,CAAC;AAC9B,YAAA,CAAC,WAAW,EAAE,WAAW,EAAE,CAAC,WAAW;AACvC,YAAA,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC,WAAW;AACxC,YAAA,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC,WAAW;AACvC,YAAA,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC,WAAW;AACvC,YAAA,WAAW,EAAE,WAAW,EAAE,CAAC,WAAW;AACtC,YAAA,CAAC,WAAW,EAAE,WAAW,EAAE,CAAC,WAAW;AAEvC,YAAA,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW;AACvC,YAAA,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC,WAAW;AACxC,YAAA,CAAC,WAAW,EAAE,WAAW,EAAE,CAAC,WAAW;AACvC,YAAA,CAAC,WAAW,EAAE,WAAW,EAAE,CAAC,WAAW;AACvC,YAAA,CAAC,WAAW,EAAE,WAAW,EAAE,WAAW;AACtC,YAAA,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW;AAEvC,YAAA,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC,WAAW;AACvC,YAAA,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW;YACtC,WAAW,EAAE,WAAW,EAAE,WAAW;YACrC,WAAW,EAAE,WAAW,EAAE,WAAW;AACrC,YAAA,WAAW,EAAE,WAAW,EAAE,CAAC,WAAW;AACtC,YAAA,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC,WAAW;AAEvC,YAAA,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW;AACvC,YAAA,CAAC,WAAW,EAAE,WAAW,EAAE,WAAW;YACtC,WAAW,EAAE,WAAW,EAAE,WAAW;YACrC,WAAW,EAAE,WAAW,EAAE,WAAW;AACrC,YAAA,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW;AACtC,YAAA,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW;AAEvC,YAAA,CAAC,WAAW,EAAE,WAAW,EAAE,CAAC,WAAW;AACvC,YAAA,WAAW,EAAE,WAAW,EAAE,CAAC,WAAW;YACtC,WAAW,EAAE,WAAW,EAAE,WAAW;YACrC,WAAW,EAAE,WAAW,EAAE,WAAW;AACrC,YAAA,CAAC,WAAW,EAAE,WAAW,EAAE,WAAW;AACtC,YAAA,CAAC,WAAW,EAAE,WAAW,EAAE,CAAC,WAAW;AAEvC,YAAA,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC,WAAW;AACxC,YAAA,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW;AACvC,YAAA,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC,WAAW;AACvC,YAAA,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC,WAAW;AACvC,YAAA,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW;AACvC,YAAA,WAAW,EAAE,CAAC,WAAW,EAAE,WAAW;AACzC,SAAA,CAAC,CAAC;QAEH,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,EAAE,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC1G;AACJ;;;;;;;;;;ACtFD;;;;;;;;;;;;AAYG;AACH,MAAM,YAAY,CAAA;AAwEd,IAAA,WAAA,CAAY,UAA+B,EAAE,EAAA;AAEzC,QAAA,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC;QAEvC,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,IAAI,KAAK,CAAC;AAE1D,QAAA,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;AAE7B,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC;QAEpC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,CAAC,CAAC;QAEpC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,EAAE,CAAC;QAErC,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,IAAI,CAAC,OAAO,CAAC;AAE3D,QAAA,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,IAAI;YAC5C,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;SAC/E,CAAC;QAEF,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;AAEvB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AAEvB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,IAAI,IAAI,KAAK,CAAC;AACrC,YAAA,GAAG,EAAE,OAAO,CAAC,QAAQ,IAAI,IAAI;AAChC,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;;;;;;;;;;;;;;KAqBzB;AAED;;;;AAIG;AACI,IAAA,qBAAqB,CAAC,EAAkB,EAAA;KAC9C;AAED,IAAA,IAAW,MAAM,GAAA;AACb,QAAA,OAAO,IAAI,CAAC;KACf;AAEM,IAAA,OAAO,CAAC,GAAS,EAAA;AACpB,QAAA,OAAO,GAAG,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC;KACjC;AAED,IAAA,OAAO,gBAAgB,CAAC,YAAmC,EAAE,KAAa,EAAA;QACtE,OAAO,gBAAgB,CAAC,YAAY,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;KACvD;AAEM,IAAA,MAAM,CAAC,OAAiB,EAAA;AAC3B,QAAA,OAAO,KAAK,CAAC;KAChB;IAED,IAAW,WAAW,CAAC,GAAW,EAAA;QAC9B,IAAI,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YACtC,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;SACxC;AACD,QAAA,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;KAC3B;AAED,IAAA,IAAW,WAAW,GAAA;QAClB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;IAED,IAAW,KAAK,CAAC,KAAY,EAAA;AACzB,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;KACvB;AAED,IAAA,IAAW,KAAK,GAAA;QACZ,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;IAEM,QAAQ,GAAA;QACX,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;AAED;;;;AAIG;AACI,IAAA,oBAAoB,CAAC,OAAgB,EAAA;AACxC,QAAA,OAAO,CAAC,gBAAgB,GAAG,KAAK,CAAC;AACjC,QAAA,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC;AAC5B,QAAA,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC;KAChC;IAEM,OAAO,GAAA;QACV,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;IAEM,YAAY,GAAA;KAClB;IAEM,UAAU,GAAA;KAChB;IAEM,cAAc,CAAC,MAAc,EAAE,QAAkC,EAAA;QACpE,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,QAAA,OAAO,IAAI,CAAC;KACf;AAEM,IAAA,WAAW,CAAC,OAAgB,EAAE,YAAA,GAAwB,KAAK,EAAA;KAEjE;;AA1MM,YAAW,CAAA,WAAA,GAAW,CAAC;;ACLlC;;;;;;;;;;;;;;;;;;;;;AAqBG;AACH,MAAM,aAAc,SAAQ,YAAY,CAAA;AAqCpC,IAAA,WAAA,CAAY,IAAe,GAAA,EAAE,EAAE,OAAA,GAAgC,EAAE,EAAA;AAE7D,QAAA,KAAK,CAAC;AACF,YAAA,QAAQ,EAAE,2CAA2C;AACrD,YAAA,aAAa,EAAE,OAAO,CAAC,aAAa,IAAI,EAAE;AAC1C,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,UAAU,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAEhD,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;AAEvD,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;AAEvB,QAAA,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC;AAEhC,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AAErB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAE5B,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,YAAY,CAAC;QAEjC,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,kDAAkD,CAAC;AAE7E,QAAA,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,IAAI;YAC5C,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;SACtF,CAAC;AAEF,QAAA,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,YAAY,IAAI,SAAS,GAAG,OAAO,CAAC,YAAY,GAAG,GAAG,CAAC;QAEpF,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,IAAI,EAAE,CAAC;AAE/C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC/C,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC;SAC9C;QAED,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,EAAE,CAAC;AAEjD,QAAA,IAAI,CAAC,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;AAE5G,QAAA,IAAI,CAAC,SAAS,GAAG,aAAa,CAAC;QAE/B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;AAEnD,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAE1B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,EAAiB,CAAC;QAE3C,IAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC,UAAU,IAAI,IAAI,CAAC;KACzD;AAED,IAAA,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;IAEe,UAAU,GAAA;AACtB,QAAA,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,eAAe,EAAE;YAChC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC;YACvC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;AACtC,YAAA,OAAO,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;SAClC;;AAED,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAE1B,QAAA,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,EAAE;;AAE5B,YAAA,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AAC3B,YAAA,OAAO,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;SAC9B;;AAED,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;KACzB;AAEe,IAAA,MAAM,CAAC,OAAgB,EAAA;AACnC,QAAA,OAAO,OAAO,CAAC,QAAQ,IAAI,CAAC,CAAC;KAChC;IAEM,iBAAiB,CAAC,SAAiB,EAAE,QAAkB,EAAA;AAC1D,QAAA,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,QAAQ,CAAC;KAC9C;AAEM,IAAA,iBAAiB,CAAC,SAAiB,EAAA;AACtC,QAAA,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;KAC1C;AAEe,IAAA,cAAc,CAAC,MAAc,EAAE,QAA6B,EAAE,IAAa,EAAE,YAAsB,EAAA;AAC/G,QAAA,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,GAAG,GAAG7E,OAAgB,IAAI,MAAM,CAAC,GAAG,GAAGD,OAAgB,EAAE;YAC3E,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,YAAA,OAAO,IAAI,CAAC;SACf;AAED,QAAA,YAAY,GAAG,YAAY,IAAI,SAAS,GAAG,YAAY,GAAG,IAAI,CAAC;QAE/D,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,GAAG,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC;AAEpG,QAAA,IAAI,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC;QAEvD,IAAI,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;QAE9C,IAAI,IAAI,GAAG4D,OAAgB,CAAC,MAAM,CAAC,CAAA;QAEnC,IAAI,KAAK,EAAE;AACP,YAAA,IAAI,KAAK,CAAC,OAAO,EAAE;gBACf,QAAQ,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;aACpD;iBAAM;gBACH,QAAQ,CAAC,CAAC,CAAC,CAAC;aACf;AACD,YAAA,OAAO,IAAI,CAAC;SACf;aAAM;YACH,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;YACtC,IAAI,CAAC,GAAG,EAAE;AACN,gBAAA,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;AACrB,oBAAA,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC;oBACtC,IAAI,EAAE,IAAI,CAAC,SAAS;AACvB,iBAAA,CAAC,CAAC;AACH,gBAAA,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC;aACrC;AAED,YAAA,GAAI,CAAC,IAAI,CAAC,CAAC,QAAmB,KAAI;AAE9B,gBAAA,IAAI,MAAM,GAAGE,aAAsB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE7C,gBAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;AAE7B,oBAAA,IAAI,KAAK,GAAa;wBAClB,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC;AAC7E,wBAAA,MAAM,EAAE,MAAM;qBACjB,CAAC;AAEF,oBAAA,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;oBAEzC,QAAQ,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;iBAEpD;AAAM,qBAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;oBACpC,IAAI,YAAY,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE;wBACxC,YAAY,GAAG,KAAK,CAAC;AACrB,wBAAA,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;wBACjE,OAAO;qBACV;AAED,oBAAA,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE;AAC9B,wBAAA,OAAO,EAAE,IAAI;AACb,wBAAA,MAAM,EAAE,MAAM;AACjB,qBAAA,CAAC,CAAC;oBAEH,QAAQ,CAAC,CAAC,CAAC,CAAC;iBAEf;qBAAM;;AAEH,oBAAA,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;AACnC,oBAAA,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;iBACtC;AACL,aAAC,CAAC,CAAC;SACN;AAED,QAAA,OAAO,KAAK,CAAC;KAChB;IAES,oBAAoB,CAAC,IAAY,EAAE,QAAkB,EAAA;QAC3D,IAAI,EAAE,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,OAAO,CAAC,EAAE;AACxC,YAAA,OAAO,CAAC,CAAC;SACZ;QAED,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,EAC9B,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE5C,IAAI,IAAI,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;AAExB;;;;;;AAME;QAEF,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,EACzE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC;AAEtE,QAAA,IAAI,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,EACxB,KAAK,GAAG,KAAK,GAAG,CAAC,EACjB,KAAK,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,EAClB,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;AAEtB,QAAA,IAAI,EAAE,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAC5B,EAAE,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAC5B,EAAE,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAC5B,EAAE,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAEjC,QAAA,IAAI,EAAE,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,EAAE,EAAE,EAAE,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,EAC5G,EAAE,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EACpC,EAAE,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,EACpC,EAAE,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;AAEhD,QAAA,IAAI,GAAG,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,EAC5C,GAAG,GAAG,IAAInB,KAAG,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAE3C,QAAA,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,GAAG,GAAG,CAAC,WAAW,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;AAEzC,QAAA,IAAI,CAAC,KAAKA,KAAG,CAAC,MAAM,EAAE;YAClB,OAAO,GAAG,CAAC,CAAC,CAAC;SAChB;AAED,QAAA,CAAC,GAAG,GAAG,CAAC,WAAW,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;AACrC,QAAA,IAAI,CAAC,KAAKA,KAAG,CAAC,MAAM,EAAE;YAClB,OAAO,GAAG,CAAC,CAAC,CAAC;SAChB;AAED,QAAA,OAAO,CAAC,CAAC;KACZ;AAED;;;AAGG;IACa,YAAY,GAAA;AACxB,QAAA,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;KAC3B;AAED;;;;;;AAMG;AACI,IAAA,MAAM,CAAC,GAAW,EAAA;AACrB,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;KAClB;AAED;;;;AAIG;AACI,IAAA,OAAO,CAAC,IAAY,EAAA;AACvB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;KACpB;AAEM,IAAA,aAAa,CAAC,OAAgB,EAAA;AACjC,QAAA,OAAO,OAAO,CAAC,UAAU,KAAK,gBAAgB,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC;KACtG;AAED;;;;;AAKG;AACa,IAAA,WAAW,CAAC,OAAgB,EAAE,YAAA,GAAwB,KAAK,EAAA;QAEvE,IAAI,IAAI,CAAC,OAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,EAAE;AAEpC,YAAA,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC;AAC7B,YAAA,OAAO,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAEhC,YAAA,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE;gBAE7B,IAAI,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;gBAEtD,IAAI,KAAK,EAAE;oBACP,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;iBACrD;qBAAM;AACH,oBAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;AACV,wBAAA,MAAM,EAAE,IAAI;AACZ,wBAAA,GAAG,EAAE,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC;AACxC,wBAAA,OAAO,EAAE,OAAO;wBAChB,IAAI,EAAE,IAAI,CAAC,SAAS;AACpB,wBAAA,MAAM,EAAE,MAAM,CAAC,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,YAAY,KAAK,YAAY;qBACjG,EAAE,CAAC,QAAmB,KAAI;AAEvB,wBAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;AAE7B,4BAAA,IAAI,OAAO,GAAG,IAAI,CAAC,cAAc,CAC7B,QAAQ,CAAC,IAAI,EACb,OAAO,EACP,OAAO,CAAC,UAAU,EAClB,OAAO,CAAC,KAAK,EACb,OAAO,CAAC,KAAK,EACb,OAAO,CAAC,QAAQ,EAChB,OAAO,CAAC,SAAS,EAAE,EACnB,OAAO,CAAC,QAAQ,KAAK,IAAI,CAAC,OAAO,CACpC,CAAC;AAEF,4BAAA,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,SAAS,EAAE;AACtC,gCAAA,OAAO,EAAE,OAAO;AAChB,gCAAA,MAAM,EAAE,OAAO,CAAC,SAAS,EAAE;AAC9B,6BAAA,CAAC,CAAC;AAEH,4BAAA,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;yBAE/C;AAAM,6BAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;AACpC,4BAAA,OAAO,CAAC,gBAAgB,GAAG,KAAK,CAAC;yBACpC;AAAM,6BAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;AACpC,4BAAA,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;yBAC5C;6BAAM;AACH,4BAAA,OAAO,CAAC,gBAAgB,GAAG,KAAK,CAAC;yBACpC;AACL,qBAAC,CACJ,CAAC;iBACL;aACJ;iBAAM;gBACH,OAAO,CAAC,mBAAmB,EAAE,CAAC;aACjC;SACJ;aAAM;AACH,YAAA,OAAO,CAAC,gBAAgB,GAAG,KAAK,CAAC;SACpC;KACJ;IAES,aAAa,GAAA;QACnB,IAAI,CAAC,aAAa,EAAE,CAAC;AACrB,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC;KACjI;AAEM,IAAA,QAAQ,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,SAAiB,EAAA;AAC9D,QAAA,OAAO,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE;AAC5B,YAAA,CAAC,EAAE,IAAI,CAAC,aAAa,EAAE;AACvB,YAAA,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE;AACf,YAAA,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE;AACf,YAAA,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE;AAClB,SAAA,CAAC,CAAC;KACN;AAED;;;;;AAKG;AACO,IAAA,UAAU,CAAC,OAAgB,EAAA;QACjC,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC;KAC5F;AAED;;;;;AAKG;AACO,IAAA,qBAAqB,CAAC,OAAgB,EAAA;AAC5C,QAAA,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC1B,OAAO,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;SACnI;aAAM;AACH,YAAA,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;SACnC;KACJ;AAED;;;;AAIG;AACa,IAAA,qBAAqB,CAAC,EAAkB,EAAA;AACpD,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;KACjC;AAED;;;;AAIG;AACO,IAAA,cAAc,CAAC,IAAS,EAAE,OAAwB,EAAE,SAAkB,EAAE,CAAU,EAAE,CAAU,EAAE,CAAU,EAAE,MAAe,EAAE,SAAmB,EAAA;AACtJ,QAAA,IAAI,IAAI,CAAC,aAAa,KAAK,CAAC,EAAE;AAC1B,YAAA,IAAI,GAAG,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC;AACjC,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC5C,gBAAA,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;aACxC;AACD,YAAA,OAAO,GAAG,CAAC;SACd;AACD,QAAA,OAAO,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC;KACjC;AAED;;AAEG;IACO,oBAAoB,CAAC,OAAgB,EAAE,UAAwC,EAAA;QACrF,IAAI,OAAO,EAAE;AACT,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,IAAK,CAAC;AAC1B,YAAA,IAAI,CAAC,CAAC,QAAQ,CAAC,MAAM,EAAE;AACnB,gBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE;AACpB,oBAAA,UAAU,EAAE,UAAU;AACtB,oBAAA,OAAO,EAAE,OAAO;AACnB,iBAAA,CAAC,CAAC;aACN;AACD,YAAA,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;SACpC;KACJ;AACJ,CAAA;AASD,MAAM,oBAAoB,GAA4B;AAClD;;;AAGG;IACH,MAAM;AAEN;;;AAGG;IACH,SAAS;CACZ;;AC5dD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BG;AACG,MAAO,GAAI,SAAQ,KAAK,CAAA;IA2C1B,WAAY,CAAA,IAAmB,EAAE,OAAA,GAAsB,EAAE,EAAA;AACrD,QAAA,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;;QAGrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;QAEpD,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,EAAE,CAAC;AAE7B,QAAA,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,UAAU,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAEhD,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,CAAC,CAAC;QAEhD,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,EAAE,CAAC;QAEjD,IAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC,UAAU,IAAI,IAAI,CAAC;AAEtD,QAAA,IAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC;AAEjC,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;KAC1B;AAED;;AAEG;AACH,IAAA,IAAoB,MAAM,GAAA;AACtB,QAAA,OAAO,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,OAAQ,CAAC,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAClF;AAED,IAAA,IAAoB,YAAY,GAAA;AAC5B,QAAA,OAAO,KAAK,CAAC;KAChB;AAED;;;AAGG;IACa,YAAY,GAAA;AACxB,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SACxC;KACJ;AAED;;;;AAIG;AACa,IAAA,aAAa,CAAC,UAAmB,EAAA;AAC7C,QAAA,IAAI,UAAU,KAAK,IAAI,CAAC,WAAW,EAAE;AACjC,YAAA,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;YAChC,IAAI,CAAC,UAAU,EAAE;gBACb,IAAI,CAAC,YAAY,EAAE,CAAC;aACvB;SACJ;KACJ;IAEe,MAAM,GAAA;QAClB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,KAAK,CAAC,MAAM,EAAE,CAAC;AACf,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;;;AAOG;AACI,IAAA,MAAM,CAAC,GAAW,EAAA;AACrB,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;KAClB;AAEM,IAAA,aAAa,CAAC,OAAgB,EAAA;AACjC,QAAA,OAAO,OAAO,CAAC,WAAW,CAAC,EAAE,KAAK,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,UAAU,CAAC,EAAE,CAAC;KAClF;AAED;;;;;;AAMG;AACa,IAAA,YAAY,CAAC,QAAkB,EAAE,YAAA,GAAwB,KAAK,EAAA;AAE1E,QAAA,IAAI,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC;AAE3B,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;AACnB,YAAA,QAAQ,CAAC,OAAO,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAC;SAC9C;aAAM;YACH,QAAQ,CAAC,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,kBAAkB,CAAC;SACpD;;AAGD,QAAA,IAAI,IAAI,CAAC,OAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,QAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,EAAE;AACnE,YAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,YAAA,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;AAE1B,YAAA,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE;gBACzB,QAAQ,CAAC,eAAe,EAAE,CAAC;AAE3B,gBAAA,IAAI,CAAC,OAAQ,CAAC,WAAW,CAAC,IAAI,CAAC;AACvB,oBAAA,MAAM,EAAE,IAAI;oBACZ,GAAG,EAAE,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,OAAO,CAAC;AACjD,oBAAA,IAAI,EAAE,aAAa;AACnB,oBAAA,MAAM,EAAE,MAAM,CAAC,GAAG,CAAC,WAAW,IAAI,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,SAAS,KAAK,YAAY;AACpF,oBAAA,OAAO,EAAE,EAAE;iBACd,EACD,CAAC,QAAmB,KAAI;AACpB,oBAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;AAC7B,wBAAA,IAAI,QAAQ,CAAC,SAAS,EAAE;AACpB,4BAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,IAAK,CAAC;AAC1B,4BAAA,IAAI,CAAC,CAAC,QAAQ,CAAC,MAAM,EAAE;gCACnB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;6BACrC;AACD,4BAAA,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACnC,4BAAA,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;yBACxB;qBACJ;AAAM,yBAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;AACpC,wBAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;qBAC9B;AAAM,yBAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;AACpC,wBAAA,IAAI,QAAQ,CAAC,SAAS,EAAE;4BACpB,QAAQ,CAAC,gBAAgB,EAAE,CAAC;yBAC/B;qBACJ;iBACJ;;iBAEJ,CAAC;aACL;iBAAM;gBACH,QAAQ,CAAC,gBAAgB,EAAE,CAAC;aAC/B;SACJ;KACJ;AAED;;;;;;AAMG;AACO,IAAA,UAAU,CAAC,OAAgB,EAAA;AACjC,QAAA,OAAO,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE;AAC5B,YAAA,CAAC,EAAE,IAAI,CAAC,aAAa,EAAE;AACvB,YAAA,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE;AAC3B,YAAA,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE;AAC3B,YAAA,CAAC,EAAE,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE;AACjC,SAAA,CAAC,CAAC;KACN;IAES,aAAa,GAAA;QACnB,IAAI,CAAC,aAAa,EAAE,CAAC;AACrB,QAAA,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC;KACnI;AAED;;;;;AAKG;AACO,IAAA,qBAAqB,CAAC,OAAgB,EAAA;QAC5C,OAAO,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KAC5G;AAED;;;;AAIG;AACI,IAAA,qBAAqB,CAAC,EAAY,EAAA;AACrC,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;KACjC;AAEe,IAAA,aAAa,CAAC,QAAkB,EAAE,YAAA,GAAwB,KAAK,EAAA;AAC3E,QAAA,IAAI,QAAQ,CAAC,OAAO,EAAE;YAClB,OAAO,QAAQ,CAAC,SAAS,CAAC;SAC7B;aAAM,IAAI,QAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,EAAE;YACvD,QAAQ,CAAC,gBAAgB,EAAE,CAAC;SAC/B;aAAM;AAEH,YAAA,IAAI,OAAO,GAAG,QAAQ,CAAC,OAAO,EAC1B,EAAE,GAAG,OAAO,CAAC,IAAI,EACjB,QAAQ,GAAG,KAAK,CAAC;AAErB,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;YACpB,IAAI,KAAK,GAAG,QAAQ,CAAC;AACrB,YAAA,OAAO,EAAE,CAAC,UAAU,EAAE;AAClB,gBAAA,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;gBACnB,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAClC,gBAAA,IAAI,KAAK,IAAI,KAAK,CAAC,aAAa,EAAE;oBAC9B,QAAQ,GAAG,IAAI,CAAC;oBAChB,MAAM;iBACT;aACJ;AAED,YAAA,IAAI,OAAO,CAAC,SAAS,EAAE;AACnB,gBAAA,IAAI,aAAa,GAAI,QAAQ,CAAC,KAAa,CAAC,aAAa,CAAC;gBAC1D,IAAI,EAAE,CAAC,OAAO,CAAC,QAAQ,KAAK,aAAa,EAAE;oBACvC,QAAQ,CAAC,gBAAgB,EAAE,CAAC;iBAC/B;qBAAM,IAAI,QAAQ,CAAC,OAAO,CAAC,QAAQ,IAAI,aAAa,EAAE;AACnD,oBAAA,CAAC,QAAQ,CAAC,SAAS,IAAI,CAAC,QAAQ,CAAC,OAAO,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;iBACzF;qBAAM;AACH,oBAAA,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC;AACtB,oBAAA,OAAO,EAAE,CAAC,OAAO,CAAC,QAAQ,GAAI,QAAQ,CAAC,KAAa,CAAC,aAAa,EAAE;AAChE,wBAAA,EAAE,GAAG,EAAE,CAAC,UAAW,CAAC;qBACvB;AACD,oBAAA,IAAI,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;oBACpD,IAAI,GAAG,EAAE;AACL,wBAAA,CAAC,GAAG,CAAC,SAAS,IAAI,CAAC,GAAG,CAAC,OAAO,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;qBAClE;yBAAM;wBACH,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,cAAc,CAC3E,EAAE,CAAC,OAAO,CACb,CAAC;AACF,wBAAA,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;qBAChC;iBACJ;aACJ;YAED,IAAI,QAAQ,EAAE;AACV,gBAAA,QAAQ,CAAC,WAAW,GAAG,EAAE,CAAC;AAC1B,gBAAA,QAAQ,CAAC,aAAa,GAAG,EAAE,CAAC,MAAM,CAAC;AACnC,gBAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;gBACjC,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,OAAO,CAAC,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;AACpE,gBAAA,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,KAAK,GAAG,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;AAC/D,gBAAA,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,KAAK,GAAG,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;AAC/D,gBAAA,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAC5B,gBAAA,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;aAC/B;iBAAM;gBACH,QAAQ,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,kBAAkB,CAAC;AACrD,gBAAA,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAC5B,gBAAA,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAC5B,gBAAA,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAC5B,gBAAA,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;aAC/B;SACJ;QAED,OAAO,QAAQ,CAAC,SAAS,CAAC;KAC7B;AAEe,IAAA,aAAa,CAAC,QAAkB,EAAA;QAC5C,IAAI,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,aAAa,EAAE;YAC5C,CAAC,QAAQ,CAAC,OAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,OAAQ,CAAC,CAAC;AAC5F,YAAA,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;SAC3B;AAED,QAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,QAAA,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC;AAC/B,QAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;KAC9B;AAED;;AAEG;IACgB,kBAAkB,GAAA;QACjC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,EAChB,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AAC1B,QAAA,IAAI,oBAAoB,GAAGa,IAAa,GAAG,KAAK,CAAC;AACjD,QAAA,IAAI,oBAAoB,GAAGA,IAAa,GAAG,KAAK,CAAC;QACjD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,KAAK,IAAI,EAAE;AAC1B,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,oBAAoB,CAAC;SAC3C;QACD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,KAAK,KAAK,EAAE;AAC3B,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,oBAAoB,CAAC;SAC3C;QACD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE;AAC3B,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,oBAAoB,CAAC;SAC5C;QACD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE;AAC5B,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,oBAAoB,CAAC;SAC5C;QAED,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,IAAIvD,OAAgB,EAAE;YACrC,CAAC,CAAC,SAAS,CAAC,GAAG,GAAGA,OAAgB,CAAC;SACtC;QAED,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,IAAID,OAAgB,EAAE;YACrC,CAAC,CAAC,SAAS,CAAC,GAAG,GAAGA,OAAgB,CAAC;SACtC;KACJ;AACJ,CAAA;AAED,MAAM,UAAU,GAAkB;AAC9B;;;AAGG;IACH,MAAM;AAEN;;;AAGG;IACH,SAAS;CACZ;;AC7XD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BG;AACH,MAAM,GAAI,SAAQ,GAAG,CAAA;IA6BjB,WAAY,CAAA,IAAmB,EAAE,OAAmB,EAAA;AAChD,QAAA,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;AAErB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,CAAC;AAE5D,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YACjB,IAAI,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;SAC9E;AAED,QAAA,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;AAE7B;;;;AAIG;QACH,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,GAAG,CAAC;AAE5C;;;;AAIG;QACH,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,GAAG,CAAC;AAE9C,QAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,eAAe,CAAC;AAEpC,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEnB,QAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACpC;IAED,OAAO,gBAAgB,CACnB,GAAW,EACX,MAAc,EACd,MAAiB,GAAA,WAAW,EAC5B,OAAA,GAAkB,OAAO,EACzB,UAAkB,QAAQ,EAC1B,GAAW,EACX,IAAY,EACZ,KAAgB,GAAA,GAAG,EACnB,MAAA,GAAiB,GAAG,EACpB,KAAc,EAAA;AAEd,QAAA,OAAO,CAAG,EAAA,GAAG,CAAY,SAAA,EAAA,MAAM,WAAW,MAAM,CAAA,qBAAA,EAAwB,OAAO,CAAA,SAAA,EAAY,OAAO,CAAA,KAAA,EAAQ,GAAG,CAAA,MAAA,EAAS,IAAI,CAAU,OAAA,EAAA,KAAK,CAAW,QAAA,EAAA,MAAM,CAAE,CAAA,IAAI,KAAK,GAAG,CAAI,CAAA,EAAA,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC;KAC7L;IAED,OAAO,eAAe,CAAC,MAAc,EAAA;QACjC,OAAO,CAAA,EAAG,MAAM,CAAC,OAAO,EAAE,CAAI,CAAA,EAAA,MAAM,CAAC,QAAQ,EAAE,IAAI,MAAM,CAAC,OAAO,EAAE,CAAA,CAAA,EAAI,MAAM,CAAC,QAAQ,EAAE,CAAA,CAAE,CAAC;KAC9F;IAED,OAAO,eAAe,CAAC,MAAc,EAAA;QACjC,OAAO,CAAA,EAAG,MAAM,CAAC,QAAQ,EAAE,CAAI,CAAA,EAAA,MAAM,CAAC,OAAO,EAAE,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAA,CAAA,EAAI,MAAM,CAAC,OAAO,EAAE,CAAA,CAAE,CAAC;KAC9F;AAEe,IAAA,aAAa,CAAC,OAAgB,EAAA;AAC1C,QAAA,OAAO,IAAI,CAAC;KACf;AAED,IAAA,IAAoB,YAAY,GAAA;AAC5B,QAAA,OAAO,KAAK,CAAC;KAChB;AAEkB,IAAA,UAAU,CAAC,OAAgB,EAAA;QAC1C,OAAO,GAAG,CAAC,gBAAgB,CACvB,IAAI,CAAC,GAAG,EACR,IAAI,CAAC,MAAM,EACX,WAAW,EACX,IAAI,CAAC,QAAQ,EACb,QAAQ,EACR,OAAO,CAAC,WAAW,CAAC,IAAI,EACxB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,EAClC,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,MAAM,CACd,CAAC;KACL;AAEM,IAAA,UAAU,CAAC,OAAgB,EAAA;QAC9B,IAAI,OAAO,EAAE;AACT,YAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;SAC3B;aAAM;AACH,YAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;SAC3B;AAED,QAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,OAAO,EAAE;AAC3B,YAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,eAAe,CAAC;SACvC;AAAM,aAAA,IAAI,OAAO,KAAK,OAAO,EAAE;AAC5B,YAAA,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,eAAe,CAAC;SACvC;KACJ;IAEe,kBAAkB,GAAA;AAC9B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACvB,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC;AAE5B,QAAA,MAAM,oBAAoB,GAAGwD,IAAa,GAAG,KAAK,CAAC;AACnD,QAAA,MAAM,oBAAoB,GAAGA,IAAa,GAAG,KAAK,CAAC;QAEnD,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,KAAK,IAAI,EAAE;AAC1B,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,oBAAoB,CAAC;SAC3C;QAED,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,KAAK,KAAK,EAAE;AAC3B,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,oBAAoB,CAAC;SAC3C;QAED,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE;AAC3B,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,oBAAoB,CAAC;SAC5C;QAED,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE;AAC5B,YAAA,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,oBAAoB,CAAC;SAC5C;KACJ;AACJ;;AChLD,MAAM,UAAW,SAAQ,aAAa,CAAA;AAQlC,IAAA,WAAA,CAAY,UAA6B,EAAE,EAAA;AACvC,QAAA,KAAK,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;AAE7B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAE5B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,CAAC,CAAC;QAEpC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,EAAE,CAAC;AAErC,QAAA,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,IAAI,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAE3D,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,EAAE,CAAC;AAE7B,QAAA,IAAI,CAAC,OAAO,GAAG,mBAAmB,CAAC;QAEnC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,EAAE,CAAC;QAEpC,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,SAAS,IAAI,GAAG,CAAC;AAE3C,QAAA,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,SAAS;cACjD,OAAO,CAAC,aAAa;cACrB,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AAEvG,QAAA,IAAI,CAAC,SAAS,GAAG,aAAa,CAAC;KAClC;AAEe,IAAA,MAAM,CAAC,OAAgB,EAAA;AACnC,QAAA,OAAO,OAAO,CAAC,QAAQ,IAAI,EAAE,CAAC;KACjC;AAEkB,IAAA,UAAU,CAAC,OAAgB,EAAA;QAC1C,OAAO,GAAG,CAAC,gBAAgB,CACvB,IAAI,CAAC,GAAG,EACR,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,OAAO,EACZ,OAAO,EACP,QAAQ,EACR,OAAO,CAAC,WAAW,CAAC,IAAI,EACxB,GAAG,CAAC,eAAe,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,EACxC,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,UAAU,CAClB,CAAC;KACL;AAEkB,IAAA,cAAc,CAAC,IAAc,EAAE,OAAuB,EAAE,SAAiB,EAAE,KAAa,EAAE,KAAa,EAAE,QAAgB,EAAE,MAAc,EAAE,eAAwB,EAAA;AAElL,QAAA,IAAI,KAAK,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;;;;QAKjC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;YAChC,IAAI,mBAAmB,GAAG,IAAI,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;AAEzD,YAAA,kCAAkC,CAAC,KAAK,EAAE,mBAAmB,CAAC,CAAC;AAC/D,YAAA,OAAO,mBAAmB,CAAC;SAC9B;AAED,QAAA,IAAI,cAAc,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,CAAC,KAAK,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;QAEzE,IAAI,CAAC,GAAG,CAAC,CAAC;AAEV,QAAA,IAAI,qBAAqB,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;AAEzC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,qBAAqB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AAC9B,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,gBAAA,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,YAAY,CAAC,cAAc,CAAC,CAAC;aAClE;SACJ;AAED,QAAA,IAAI,mBAAmB,GAAG,IAAI,YAAY,CAAC,cAAc,CAAC,CAAC;QAE3D,qBAAqB,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,EAAE,mBAAmB,EAAE,qBAAqB,CAAC,CAAC;AAE5F,QAAA,IAAI,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;AAEtE,QAAA,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE;AAC9B,YAAA,OAAO,EAAE,mBAAmB;AAC5B,YAAA,MAAM,EAAE,MAAM;AACjB,SAAA,CAAC,CAAC;QAEH,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC;AAE9C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;AACzB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;gBACzB,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,EACjB,CAAC,GAAG,QAAQ,GAAG,CAAC,CAAC;AACrB,gBAAA,IAAI,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC;AACvD,gBAAA,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE;AAC9B,oBAAA,OAAO,EAAE,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,MAAM,EAAE,aAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACjC,iBAAA,CAAC,CAAC;aACN;SACJ;AAED,QAAA,OAAO,mBAAmB,CAAC;KAC9B;AACJ,CAAA;AAED,SAAS,kCAAkC,CAAC,IAA2B,EAAE,mBAA0C,EAAA;AAC/G,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,mBAAmB,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;QAC5D,mBAAmB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;KACpC;AACL,CAAC;AAED,SAAS,qBAAqB,CAAC,IAA2B,EAAE,YAAmC,EAAE,mBAA0C,EAAE,qBAAoD,EAAA;AAC7L,IAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACzD,IAAA,IAAI,WAAW,GAAG,QAAQ,GAAG,CAAC,CAAC;IAC/B,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACxC,IAAA,IAAI,EAAE,GAAG,UAAU,GAAG,QAAQ,CAAC;AAE/B,IAAA,IAAI,WAAW,GAAG,CAAC,EACf,YAAY,GAAG,CAAC,CAAC;IAErB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,SAAS,GAAG,CAAC,EAAE,gBAAgB,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,gBAAgB,EAAE,CAAC,EAAE,EAAE;AACtF,QAAA,IAAI,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AAErB,QAAA,IAAI,eAAe,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,CAAC,EACnE,aAAa,GAAG,KAAK,EACrB,cAAc,GAAG,KAAK,CAAC;AAE3B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,UAAU,CAAC,EAC9B,CAAC,GAAG,CAAC,GAAG,UAAU,CAAC;QAEvB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,EAChC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAErC,IAAI,OAAO,GAAG,qBAAqB,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;QAElD,IAAI,EAAE,GAAG,CAAC,GAAG,QAAQ,EACjB,EAAE,GAAG,CAAC,GAAG,QAAQ,CAAC;AAEtB,QAAA,IAAI,SAAS,GAAG,CAAC,EAAE,GAAG,KAAK,IAAI,WAAW,GAAG,EAAE,GAAG,KAAK,CAAC;AAExD,QAAA,OAAO,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC;QAE5B,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,EAAE;AAClD,YAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,MAAM,CAAC;SAC7C;AAED,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC,EAAE;;AAElD,YAAA,WAAW,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YAEtB,aAAa,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;YAEvE,IAAI,YAAY,GAAG,MAAM,CAAC;AAC1B,YAAA,IAAI,EAAE,eAAe,IAAI,aAAa,CAAC,EAAE;gBACrC,YAAY,GAAG,CAAC,MAAM,GAAG,WAAW,IAAI,GAAG,CAAC;aAC/C;AAED,YAAA,SAAS,GAAG,CAAC,EAAE,GAAG,KAAK,IAAI,WAAW,GAAG,EAAE,GAAG,CAAC,CAAC;AAChD,YAAA,OAAO,CAAC,SAAS,CAAC,GAAG,YAAY,CAAC;YAElC,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,EAAE;AACxB,gBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,YAAY,CAAC;aACnD;;AAGD,YAAA,IAAI,UAAU,GAAG,CAAC,EAAE,GAAG,KAAK,IAAI,WAAW,IAAI,CAAC,EAAE,GAAG,CAAC,IAAI,QAAQ,CAAC,CAAC;AACpE,YAAA,qBAAqB,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,YAAY,CAAC;SACtE;AAED,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC,EAAE;;AAElD,YAAA,YAAY,GAAG,IAAI,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC;YAEpC,cAAc,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;YAEzE,IAAI,YAAY,GAAG,MAAM,CAAC;AAE1B,YAAA,IAAI,EAAE,eAAe,IAAI,cAAc,CAAC,EAAE;gBACtC,YAAY,GAAG,CAAC,MAAM,GAAG,YAAY,IAAI,GAAG,CAAC;aAChD;AAED,YAAA,SAAS,GAAG,CAAC,EAAE,GAAG,CAAC,IAAI,WAAW,GAAG,EAAE,GAAG,KAAK,CAAC;AAChD,YAAA,OAAO,CAAC,SAAS,CAAC,GAAG,YAAY,CAAC;YAElC,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,EAAE;AACxB,gBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,YAAY,CAAC;aACnD;;AAGD,YAAA,IAAI,WAAW,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,QAAQ,IAAI,WAAW,GAAG,EAAE,GAAG,KAAK,CAAC;AACnE,YAAA,qBAAqB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,GAAG,YAAY,CAAC;SACvE;QAED,IACI,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC;YACxB,CAAC,KAAK,UAAU,GAAG,CAAC;AACpB,YAAA,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC;AACxB,YAAA,CAAC,KAAK,UAAU,GAAG,CAAC,EACtB;;YAEE,IAAI,iBAAiB,GAAG,IAAI,CAAC,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC,CAAC;YAEjD,IAAI,mBAAmB,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,iBAAiB,CAAC,CAAC;YAEvF,IAAI,YAAY,GAAG,MAAM,CAAC;YAE1B,IAAI,EAAE,eAAe,IAAI,aAAa,IAAI,cAAc,IAAI,mBAAmB,CAAC,EAAE;AAC9E,gBAAA,YAAY,GAAG,CAAC,MAAM,GAAG,WAAW,GAAG,YAAY,GAAG,iBAAiB,IAAI,IAAI,CAAC;aACnF;AAED,YAAA,SAAS,GAAG,CAAC,EAAE,GAAG,CAAC,IAAI,WAAW,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;AAC9C,YAAA,OAAO,CAAC,SAAS,CAAC,GAAG,YAAY,CAAC;AAElC,YAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,YAAY,CAAC;;YAGhD,IAAI,UAAU,GAAG,CAAC,EAAE,GAAG,CAAC,IAAI,WAAW,CAAC;AACxC,YAAA,qBAAqB,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,YAAY,CAAC;;YAGnE,IAAI,WAAW,GAAG,QAAQ,CAAC;AAC3B,YAAA,qBAAqB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,GAAG,YAAY,CAAC;;YAGpE,IAAI,gBAAgB,GAAG,CAAC,CAAC;AACzB,YAAA,qBAAqB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,gBAAgB,CAAC,GAAG,YAAY,CAAC;SAChF;KACJ;AACL;;ACtOA;;;;;;;;;;AAUG;AACH,MAAM,UAAW,SAAQ,aAAa,CAAA;IAYlC,WAAY,CAAA,IAAmB,EAAE,OAAA,GAA6B,EAAE,EAAA;AAC5D,QAAA,KAAK,CAAC,IAAI,IAAI,YAAY,EAAE;AACxB,YAAA,gBAAgB,EAAE,OAAO,CAAC,gBAAgB,IAAI,SAAS,GAAG,OAAO,CAAC,gBAAgB,GAAG,IAAI;AACzF,YAAA,OAAO,EAAE,OAAO,CAAC,OAAO,IAAI,EAAE;YAC9B,YAAY,EAAE,OAAO,CAAC,YAAY,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,SAAS,GAAG,OAAO,CAAC,SAAS,GAAG,CAAC,KAAK,CAAC;AACnG,YAAA,aAAa,EAAE,OAAO,CAAC,aAAa,IAAI,GAAG;AAC3C,YAAA,GAAG,EAAE,OAAO,CAAC,GAAG,IAAI,SAAS;kBACvB,OAAO,CAAC,GAAG;AACb,kBAAE,CAA0E,uEAAA,EAAA,OAAO,CAAC,GAAG,IAAI,OAAO,CAAE,CAAA;AACxG,YAAA,cAAc,EAAE,OAAO,CAAC,cAAc,IAAI;AACtC,gBAAA,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;AACrF,aAAA;AACD,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;QAEH,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,IAAI,KAAK,CAAC;AAExD,QAAA,IAAI,CAAC,SAAS,GAAG,aAAa,CAAC;QAE/B,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,SAAS,IAAI,GAAG,CAAC;QAE3C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAExD,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAE1B,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,SAAS,IAAI,CAAC,OAAO,CAAC;QAChD,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,IAAI,GAAG,CAAC;KAChD;AAED,IAAA,OAAgB,gBAAgB,CAAC,YAAmC,EAAE,KAAa,EAAA;AAC/E,QAAA,IAAI,KAAK,GAAG,KAAK,EAAE;AACf,YAAA,OAAO,IAAI,CAAC;SACf;QACD,OAAO,gBAAgB,CAAC,YAAY,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;KACvD;AAEM,IAAA,UAAU,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;;AAE7C,QAAA,IAAI,CAAC,KAAK,GAAG,EAAE;YACX,OAAO,IAAI,CAAC,UAAU,CAAC;SAC1B;QACD,OAAO,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;KAC7E;AAEe,IAAA,MAAM,CAAC,OAAgB,EAAA;AACnC,QAAA,OAAO,OAAO,CAAC,QAAQ,IAAI,EAAE,CAAC;KACjC;AAES,IAAA,qBAAqB,CAAC,IAAY,EAAA;QACxC,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAC9C,QAAA,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;AACpB,QAAA,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;AACrB,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,IAAI,EAAE;AAC3B,YAAA,kBAAkB,EAAE,IAAI;AAC3B,SAAA,CAAE,CAAC;KACP;AAEkB,IAAA,cAAc,CAAC,IAAoC,EAAE,OAAuB,EAAE,SAAiB,EAAE,KAAa,EAAE,KAAa,EAAE,QAAgB,EAAE,MAAc,EAAE,eAAwB,EAAA;AAExM,QAAA,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAC5D,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAChC,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;AAEnF,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;AAExB,QAAA,IAAI,oBAAoB,GAAG,CAAC,EACxB,oBAAoB,GAAG,CAAC,EACxB,uBAAuB,GAAG,CAAC,EAC3B,mBAAmB,GAAiC,IAAI,EACxD,mBAAmB,GAAG,KAAK,CAAC;;;;QAKhC,IAAI,OAAO,EAAE;YACT,IAAI,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,EAAE;AACvC,gBAAA,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC;gBACtB,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,aAAa,EAAE;AACpC,oBAAA,EAAE,GAAG,EAAE,CAAC,UAAW,CAAC;iBACvB;gBACD,IAAI,EAAE,EAAE;AACJ,oBAAA,oBAAoB,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;AACxC,oBAAA,oBAAoB,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;AACxC,oBAAA,uBAAuB,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC;AAC9C,oBAAA,mBAAmB,GAAG,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC;;AAE/C,oBAAA,mBAAmB,GAAG,uBAAuB,IAAI,CAAC,CAAC;iBACtD;aACJ;SACJ;;;;AAKD,QAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,KAAK,IAAI,CAAC,UAAU,EAAE;YAC5D,IAAI,mBAAmB,GAAG,IAAI,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;YACxD,IAAI,CAAC,qCAAqC,CAAC,QAAQ,EAAE,mBAAmB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;AAC9F,YAAA,OAAO,mBAAmB,CAAC;SAC9B;;;;QAKD,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,CAAC,aAAa,EAAE;AAExC,YAAA,IAAI,cAAc,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,CAAC,KAAK,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AACzE,YAAA,IAAI,mBAAmB,GAAG,IAAI,YAAY,CAAC,cAAc,CAAC,CAAC;AAE3D,YAAA,IAAI,CACA,sBAAsB,EACtB,sBAAsB,EACtB,iBAAiB,CACpB,GACG,OAAO,GAAG,aAAa,CACnB,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,QAAQ,EAC9C,oBAAoB,EAAE,oBAAoB,EAAE,uBAAuB,CACtE,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAElB,YAAA,IAAI,CAAC,sBAAsB,CACvB,QAAQ,EACR,IAAI,CAAC,YAAY,EACjB,mBAAmB,EACnB,sBAAsB,EACtB,sBAAsB,EACtB,iBAAiB,EACjB,mBAAmB,EACnB,mBAAmB,EACnB,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,UAAU,CAClB,CAAC;AAEF,YAAA,OAAO,mBAAmB,CAAC;SAC9B;;;;AAKD,QAAA,IAAI,cAAc,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,CAAC,KAAK,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;AAEzE,QAAA,IAAI,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC;AAElC,QAAA,IAAI,mBAAmB,GAAG,IAAI,YAAY,CAAC,cAAc,CAAC,CAAC;AAC3D,QAAA,IAAI,qBAAqB,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;AAEzC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,qBAAqB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AAC9B,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,gBAAA,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,YAAY,CAAC,cAAc,CAAC,CAAC;aAClE;SACJ;QAED,IAAI,CAAC,eAAe,EAAE;AAClB,YAAA,IAAI,CAAC,wBAAwB,CACzB,QAAQ,EACR,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,YAAY,EACjB,mBAAmB,EACnB,oBAAoB,EACpB,oBAAoB,EACpB,uBAAuB,EACvB,OAAO,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,EAC3B,OAAO,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,EAC3B,OAAO,GAAG,OAAO,CAAC,QAAQ,GAAG,CAAC,EAC9B,mBAAmB,EACnB,mBAAmB,EACnB,qBAAqB,CACxB,CAAC;;AAGF,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;oBACxB,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,iBAAiB,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAChE,oBAAA,IAAI,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC;AACvD,oBAAA,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE;AAC9B,wBAAA,OAAO,EAAE,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;;;wBAIpC,MAAM,EAAE,aAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACjC,qBAAA,CAAC,CAAC;iBACN;aACJ;SACJ;aAAM;AACH,YAAA,IAAI,CAAC,kCAAkC,CACnC,QAAQ,EACR,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,YAAY,EACjB,mBAAmB,EACnB,oBAAoB,EACpB,oBAAoB,EACpB,uBAAuB,EACvB,OAAO,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,EAC3B,OAAO,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,EAC3B,OAAO,GAAG,OAAO,CAAC,QAAQ,GAAG,CAAC,EAC9B,mBAAmB,EACnB,mBAAmB,CACtB,CAAC;SACL;AAED,QAAA,IAAI,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;;AAGtE,QAAA,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE;AAC9B,YAAA,OAAO,EAAE,mBAAmB;AAC5B,YAAA,MAAM,EAAE,MAAM;AACjB,SAAA,CAAC,CAAC;AAEH,QAAA,OAAO,mBAAmB,CAAC;KAC9B;AAEe,IAAA,cAAc,CAAC,MAAc,EAAE,QAA6B,EAAE,IAAa,EAAA;AAEvF,QAAA,IAAI,GAAG,IAAI,IAAI,SAAS,GAAG,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;AAE/C,QAAA,IAAI,IAAI,KAAK,CAAC,EAAE;YACZ,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,YAAA,OAAO,IAAI,CAAC;SACf;AAED,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC;AAC3C,QAAA,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QACzD,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AACzE,QAAA,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,CAAC;AAC5C,QAAA,MAAM,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC;AAEzD,QAAA,IAAI,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,EAAE;YACjC,IAAI,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;AAC3C,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;AACjG,YAAA,IAAI,QAAQ,GAAG,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;YACtE,IAAI,QAAQ,EAAE;AACV,gBAAA,OAAO,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC;aAC1D;iBAAM;AACH,gBAAA,QAAQ,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9F,gBAAA,OAAO,IAAI,CAAC;aACf;SACJ;QAED,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QACtC,IAAI,CAAC,GAAG,EAAE;AACN,YAAA,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;AACrB,gBAAA,GAAG,EAAE,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC;gBAClH,IAAI,EAAE,IAAI,CAAC,SAAS;AACvB,aAAA,CAAC,CAAC;AACH,YAAA,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC;SACrC;AAED,QAAA,GAAI,CAAC,IAAI,CAAC,CAAC,QAAmB,KAAI;AAC9B,YAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;AAC7B,gBAAA,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAC5D,gBAAA,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACzC,gBAAA,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC;AACvD,gBAAA,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;AAEvC,gBAAA,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;AACjG,gBAAA,IAAI,QAAQ,GAAG,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;gBACtE,IAAI,QAAQ,EAAE;AACV,oBAAA,OAAO,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAK,GAAG,CAAC,CAAC,CAAC;iBAC3D;qBAAM;AACH,oBAAA,QAAQ,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;iBACjG;aACJ;AAAM,iBAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,OAAO,EAAE;AACpC,gBAAA,OAAO,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAK,GAAG,CAAC,CAAC,CAAC;aAC3D;iBAAM;;AAEH,gBAAA,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;AACnC,gBAAA,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;aACtC;AACL,SAAC,CAAC,CAAC;AAEH,QAAA,OAAO,KAAK,CAAC;KAChB;IAEM,sBAAsB,CACzB,QAA+B,EAC/B,YAAmC,EACnC,mBAAoD,GAAA,IAAI,EACxD,sBAA8B,EAC9B,sBAA8B,EAC9B,iBAAyB,EACzB,mBAA4B,EAC5B,mBAA0C,EAC1C,YAAA,GAAuB,CAAC,EACxB,SAAiB,EAAA;AAGjB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,GAAG,SAAS,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACvD,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,SAAS,EACjB,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC;AAClC,YAAA,IAAI,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC;YACrB,IAAI,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;YAChH,IAAI,QAAQ,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;YACjE,IAAI,CAAC,QAAQ,IAAI,MAAM,KAAK,CAAC,KAAK,mBAAmB,EAAE;AACnD,gBAAA,MAAM,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,CAAC,EAAE,CAAC,EAAE,mBAAmB,CAAC,CAAC;aAC/I;AACD,YAAA,mBAAmB,CAAC,CAAC,IAAI,SAAS,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;SACzD;AAED,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC3C,YAAA,IAAI,CAAC,GAAG,SAAS,GAAG,CAAC,CAAC;YACtB,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,SAAS,GAAG,CAAC,IAAI,CAAC,CAAC;YACvC,IAAI,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;YAChH,IAAI,QAAQ,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;YACjE,IAAI,CAAC,QAAQ,IAAI,MAAM,KAAK,CAAC,KAAK,mBAAmB,EAAE;AACnD,gBAAA,MAAM,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,CAAC,EAAE,CAAC,EAAE,mBAAmB,CAAC,CAAC;aAC/I;AACD,YAAA,mBAAmB,CAAC,CAAC,IAAI,SAAS,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,GAAG,MAAM,CAAC;SACjE;AAED,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC3C,YAAA,IAAI,CAAC,GAAG,SAAS,GAAG,CAAC,CAAC;YACtB,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,SAAS,GAAG,CAAC,IAAI,CAAC,CAAC;YACvC,IAAI,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;YAChH,IAAI,QAAQ,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;YACjE,IAAI,CAAC,QAAQ,IAAI,MAAM,KAAK,CAAC,KAAK,mBAAmB,EAAE;AACnD,gBAAA,MAAM,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,CAAC,EAAE,CAAC,EAAE,mBAAmB,CAAC,CAAC;aAC/I;AACD,YAAA,mBAAmB,CAAC,SAAS,IAAI,SAAS,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;SACjE;AAED,QAAA,IAAI,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;QACzI,IAAI,QAAQ,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;QACjE,IAAI,CAAC,QAAQ,IAAI,MAAM,KAAK,CAAC,KAAK,mBAAmB,EAAE;YACnD,MAAM,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,CAAC,EAAE,mBAAmB,CAAC,CAAC;SACvK;QACD,mBAAmB,CAAC,mBAAmB,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;KAChE;AAEM,IAAA,qCAAqC,CAAC,QAA+B,EAAE,mBAA0C,EAAE,eAAuB,CAAC,EAAA;AAC9I,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,mBAAmB,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC5D,YAAA,IAAI,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;AACf,YAAA,mBAAmB,CAAC,CAAC,CAAC,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;SAC7G;KACJ;IAEM,wBAAwB,CAC3B,QAA+B,EAC/B,YAAoB,EACpB,YAAmC,EACnC,mBAAoD,GAAA,IAAI,EACxD,oBAA4B,EAC5B,oBAA4B,EAC5B,uBAA+B,EAC/B,YAAoB,EACpB,YAAoB,EACpB,eAAuB,EACvB,mBAA4B,EAC5B,mBAA0C,EAC1C,qBAAoD,EAAA;AAEpD,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACzD,QAAA,IAAI,WAAW,GAAG,QAAQ,GAAG,CAAC,CAAC;AAC/B,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAChD,QAAA,IAAI,EAAE,GAAG,UAAU,GAAG,QAAQ,CAAC;QAE/B,IAAI,WAAW,GAAG,CAAC,EACf,YAAY,GAAG,CAAC,EAChB,WAAW,GAAG,CAAC,CAAC;QAEpB,IAAI,CAAC,sBAAsB,EAAE,sBAAsB,EAAE,iBAAiB,CAAC,GAAG,aAAa,CACnF,YAAY,EAAE,YAAY,EAAE,eAAe,EAC3C,oBAAoB,EAAE,oBAAoB,EAAE,uBAAuB,CACtE,CAAC;QAEF,KACI,IAAI,CAAC,GAAG,CAAC,EAAE,SAAS,GAAG,CAAC,EAAE,gBAAgB,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAChE,CAAC,GAAG,gBAAgB,EACpB,CAAC,EAAE,EACL;AACE,YAAA,IAAI,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;YAEf,IAAI,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;AAE9F,YAAA,IAAI,eAAe,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,CAAC,EACnE,aAAa,GAAG,KAAK,EACrB,cAAc,GAAG,KAAK,CAAC;AAE3B,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,UAAU,CAAC,EAC9B,CAAC,GAAG,CAAC,GAAG,UAAU,CAAC;;;YAIvB,IAAI,CAAC,eAAe,IAAI,MAAM,KAAK,CAAC,KAAK,mBAAmB,EAAE;AAC1D,gBAAA,MAAM,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,mBAAmB,CAAC,CAAC;aACjL;YAED,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,EAChC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;YAErC,IAAI,OAAO,GAAG,qBAAqB,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;YAElD,IAAI,EAAE,GAAG,CAAC,GAAG,QAAQ,EACjB,EAAE,GAAG,CAAC,GAAG,QAAQ,CAAC;AAEtB,YAAA,IAAI,SAAS,GAAG,CAAC,EAAE,GAAG,KAAK,IAAI,WAAW,GAAG,EAAE,GAAG,KAAK,CAAC;AAExD,YAAA,OAAO,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC;YAE5B,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,EAAE;AAClD,gBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,MAAM,CAAC;aAC7C;AAED,YAAA,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC,EAAE;;AAElD,gBAAA,WAAW,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;gBACnG,aAAa,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;;;gBAIvE,IAAI,CAAC,aAAa,IAAI,WAAW,KAAK,CAAC,KAAK,mBAAmB,EAAE;AAC7D,oBAAA,WAAW,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,mBAAmB,CAAC,CAAC;iBAC5L;gBAED,IAAI,YAAY,GAAG,MAAM,CAAC;AAE1B,gBAAA,IAAI,EAAE,eAAe,IAAI,aAAa,CAAC,EAAE;oBACrC,YAAY,GAAG,CAAC,MAAM,GAAG,WAAW,IAAI,GAAG,CAAC;iBAC/C;AAED,gBAAA,SAAS,GAAG,CAAC,EAAE,GAAG,KAAK,IAAI,WAAW,GAAG,EAAE,GAAG,CAAC,CAAC;AAChD,gBAAA,OAAO,CAAC,SAAS,CAAC,GAAG,YAAY,CAAC;gBAElC,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,EAAE;AACxB,oBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,YAAY,CAAC;iBACnD;;AAGD,gBAAA,IAAI,UAAU,GAAG,CAAC,EAAE,GAAG,KAAK,IAAI,WAAW,IAAI,CAAC,EAAE,GAAG,CAAC,IAAI,QAAQ,CAAC,CAAC;AACpE,gBAAA,qBAAqB,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,YAAY,CAAC;aACtE;AAED,YAAA,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC,EAAE;;AAElD,gBAAA,WAAW,GAAG,UAAU,GAAG,CAAC,CAAC;AAE7B,gBAAA,YAAY,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,GAAG,WAAW,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC1I,cAAc,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;;;gBAIzE,IAAI,CAAC,cAAc,IAAI,YAAY,KAAK,CAAC,KAAK,mBAAmB,EAAE;AAC/D,oBAAA,YAAY,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,mBAAmB,CAAC,CAAC;iBAC7L;gBAED,IAAI,YAAY,GAAG,CAAC,MAAM,GAAG,YAAY,IAAI,GAAG,CAAC;AAEjD,gBAAA,IAAI,EAAE,eAAe,IAAI,cAAc,CAAC,EAAE;oBACtC,YAAY,GAAG,CAAC,MAAM,GAAG,YAAY,IAAI,GAAG,CAAC;iBAChD;AAED,gBAAA,SAAS,GAAG,CAAC,EAAE,GAAG,CAAC,IAAI,WAAW,GAAG,EAAE,GAAG,KAAK,CAAC;AAChD,gBAAA,OAAO,CAAC,SAAS,CAAC,GAAG,YAAY,CAAC;gBAElC,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,EAAE;AACxB,oBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,YAAY,CAAC;iBACnD;;AAGD,gBAAA,IAAI,WAAW,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,QAAQ,IAAI,WAAW,GAAG,EAAE,GAAG,KAAK,CAAC;AACnE,gBAAA,qBAAqB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,GAAG,YAAY,CAAC;aACvE;AAED,YAAA,IACI,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC;AAChD,gBAAA,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC,EAClD;;AAEE,gBAAA,IAAI,iBAAiB,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvJ,IAAI,mBAAmB,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,iBAAiB,CAAC,CAAC;;;gBAIvF,IAAI,CAAC,mBAAmB,IAAI,iBAAiB,KAAK,CAAC,KAAK,mBAAmB,EAAE;AACzE,oBAAA,iBAAiB,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,mBAAmB,CAAC,CAAC;iBACxM;gBAED,IAAI,YAAY,GAAG,MAAM,CAAC;gBAE1B,IAAI,EAAE,eAAe,IAAI,aAAa,IAAI,cAAc,IAAI,mBAAmB,CAAC,EAAE;AAC9E,oBAAA,YAAY,GAAG,CAAC,MAAM,GAAG,WAAW,GAAG,YAAY,GAAG,iBAAiB,IAAI,IAAI,CAAC;iBACnF;AAED,gBAAA,SAAS,GAAG,CAAC,EAAE,GAAG,CAAC,IAAI,WAAW,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;AAC9C,gBAAA,OAAO,CAAC,SAAS,CAAC,GAAG,YAAY,CAAC;AAElC,gBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,YAAY,CAAC;;gBAGhD,IAAI,UAAU,GAAG,CAAC,EAAE,GAAG,CAAC,IAAI,WAAW,CAAC;AACxC,gBAAA,qBAAqB,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,YAAY,CAAC;;gBAGnE,IAAI,WAAW,GAAG,QAAQ,CAAC;AAC3B,gBAAA,qBAAqB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,GAAG,YAAY,CAAC;;gBAGpE,IAAI,gBAAgB,GAAG,CAAC,CAAC;AACzB,gBAAA,qBAAqB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,gBAAgB,CAAC,GAAG,YAAY,CAAC;aAChF;SACJ;KACJ;IAEM,kCAAkC,CACrC,QAA+B,EAC/B,YAAoB,EACpB,YAAmC,EACnC,mBAAA,GAAoD,IAAI,EACxD,oBAA4B,EAC5B,oBAA4B,EAC5B,uBAA+B,EAC/B,YAAoB,EACpB,YAAoB,EACpB,eAAuB,EACvB,mBAA4B,EAC5B,mBAA0C,EAAA;AAE1C,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACzD,QAAA,IAAI,WAAW,GAAG,QAAQ,GAAG,CAAC,CAAC;AAC/B,QAAA,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAChD,QAAA,IAAI,EAAE,GAAG,UAAU,GAAG,QAAQ,CAAC;QAE/B,IAAI,WAAW,GAAG,CAAC,EACf,YAAY,GAAG,CAAC,EAChB,WAAW,GAAG,CAAC,CAAC;QAEpB,IAAI,CAAC,sBAAsB,EAAE,sBAAsB,EAAE,iBAAiB,CAAC,GAAG,aAAa,CACnF,YAAY,EAAE,YAAY,EAAE,eAAe,EAC3C,oBAAoB,EAAE,oBAAoB,EAAE,uBAAuB,CACtE,CAAC;QAEF,KACI,IAAI,CAAC,GAAG,CAAC,EAAE,SAAS,GAAG,CAAC,EAAE,gBAAgB,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAChE,CAAC,GAAG,gBAAgB,EACpB,CAAC,EAAE,EACL;AACE,YAAA,IAAI,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;YAEf,IAAI,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;AAE9F,YAAA,IAAI,eAAe,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,CAAC,EACnE,aAAa,GAAG,KAAK,EACrB,cAAc,GAAG,KAAK,CAAC;AAE3B,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,UAAU,CAAC,EAC9B,CAAC,GAAG,CAAC,GAAG,UAAU,CAAC;YAEvB,IAAI,CAAC,eAAe,IAAI,MAAM,KAAK,CAAC,KAAK,mBAAmB,EAAE;gBAC1D,MAAM,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,WAAW,CAAC,EAAE,SAAS,GAAG,WAAW,EAAE,mBAAmB,CAAC,CAAC;aACvM;YAED,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,EAChC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;YAErC,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,EAAE;AAClD,gBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,MAAM,CAAC;aAC7C;AAED,YAAA,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC,EAAE;;AAElD,gBAAA,WAAW,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;gBACnG,aAAa,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;gBAEvE,IAAI,CAAC,aAAa,IAAI,WAAW,KAAK,CAAC,KAAK,mBAAmB,EAAE;oBAC7D,WAAW,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,WAAW,CAAC,EAAE,SAAS,GAAG,WAAW,EAAE,mBAAmB,CAAC,CAAC;iBAC5M;gBAED,IAAI,YAAY,GAAG,MAAM,CAAC;AAE1B,gBAAA,IAAI,EAAE,eAAe,IAAI,aAAa,CAAC,EAAE;oBACrC,YAAY,GAAG,CAAC,MAAM,GAAG,WAAW,IAAI,GAAG,CAAC;iBAC/C;gBAED,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,EAAE;AACxB,oBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,YAAY,CAAC;iBACnD;aACJ;AAED,YAAA,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC,EAAE;;AAElD,gBAAA,WAAW,GAAG,UAAU,GAAG,CAAC,CAAC;AAE7B,gBAAA,YAAY,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,GAAG,WAAW,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC1I,cAAc,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;gBAEzE,IAAI,CAAC,cAAc,IAAI,YAAY,KAAK,CAAC,KAAK,mBAAmB,EAAE;oBAC/D,YAAY,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,WAAW,CAAC,EAAE,SAAS,GAAG,WAAW,EAAE,mBAAmB,CAAC,CAAC;iBAC7M;gBAED,IAAI,YAAY,GAAG,CAAC,MAAM,GAAG,YAAY,IAAI,GAAG,CAAC;AAEjD,gBAAA,IAAI,EAAE,eAAe,IAAI,cAAc,CAAC,EAAE;oBACtC,YAAY,GAAG,CAAC,MAAM,GAAG,YAAY,IAAI,GAAG,CAAC;iBAChD;gBAED,IAAI,CAAC,CAAC,GAAG,KAAK,IAAI,EAAE,KAAK,CAAC,EAAE;AACxB,oBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,YAAY,CAAC;iBACnD;aACJ;AAED,YAAA,IACI,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC;AAChD,gBAAA,CAAC,CAAC,GAAG,CAAC,IAAI,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,CAAC,EAClD;;AAEE,gBAAA,IAAI,iBAAiB,GAAG,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,GAAG,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvJ,IAAI,mBAAmB,GAAG,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,iBAAiB,CAAC,CAAC;gBAEvF,IAAI,CAAC,mBAAmB,IAAI,iBAAiB,KAAK,CAAC,KAAK,mBAAmB,EAAE;oBACzE,iBAAiB,GAAG,eAAe,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,WAAW,CAAC,EAAE,SAAS,GAAG,WAAW,EAAE,mBAAmB,CAAC,CAAC;iBAClN;gBAED,IAAI,YAAY,GAAG,MAAM,CAAC;gBAE1B,IAAI,EAAE,eAAe,IAAI,aAAa,IAAI,cAAc,IAAI,mBAAmB,CAAC,EAAE;AAC9E,oBAAA,YAAY,GAAG,CAAC,MAAM,GAAG,WAAW,GAAG,YAAY,GAAG,iBAAiB,IAAI,IAAI,CAAC;iBACnF;AAED,gBAAA,mBAAmB,CAAC,SAAS,EAAE,CAAC,GAAG,YAAY,CAAC;aACnD;SACJ;KACJ;AACJ,CAAA;AAED,SAAS,aAAa,CAClB,YAAoB,EACpB,YAAoB,EACpB,eAAuB,EACvB,WAAmB,EACnB,WAAmB,EACnB,cAAsB,EAAA;IAEtB,IAAI,GAAG,GAAG,CAAC,KAAK,eAAe,GAAG,cAAc,GAAG,CAAC,CAAC,CAAC;AACtD,IAAA,OAAO,CAAC,YAAY,GAAG,GAAG,GAAG,WAAW,EAAE,YAAY,GAAG,GAAG,GAAG,WAAW,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC;AAC3F,CAAC;AAED,SAAS,iBAAiB,CACtB,kBAA0B,EAC1B,kBAA0B,EAC1B,qBAA6B,EAC7B,YAAoB,EACpB,YAAoB,EAAA;AAEpB,IAAA,OAAO,CAAC,kBAAkB,GAAG,CAAC,GAAG,YAAY,EAAE,kBAAkB,GAAG,CAAC,GAAG,YAAY,EAAE,qBAAqB,GAAG,CAAC,CAAC,CAAC;AACrH,CAAC;AAED,SAAS,eAAe,CAAC,QAAgB,EAAE,OAAe,EAAE,OAAe,EAAE,OAA8B,EAAE,CAAS,EAAE,CAAS,EAAE,mBAA6B,EAAA;IAC5J,IAAI,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAC/C,IAAA,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,QAAQ,GAAG,cAAc,GAAG,CAAC,GAAG,QAAQ,CAAC,EACnE,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,QAAQ,GAAG,cAAc,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC;IACxE,IAAI,CAAC,GAAG,OAAO,CAAC,EAAE,GAAG,cAAc,GAAG,EAAE,CAAC,CAAC;IAC1C,OAAO,mBAAmB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACrD;;AChrBA,MAAM,OAAO,GAA2B;IACpC,CAAC,eAAe,GAAG,OAAO;IAC1B,CAAC,eAAe,GAAG,OAAO;CAC7B,CAAA;AAED,MAAM,cAAc,GAAG,CAAC,KAAa,EAAE,KAAa,EAAE,QAAgB,EAAE,SAAiB,KAAwB;AAC7G,IAAA,IAAI,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAC3B,IAAA,IAAI,CAAC;QAAE,OAAO,CAAA,qCAAA,EAAwC,CAAC,CAAI,CAAA,EAAA,QAAQ,IAAI,KAAK,CAAA,CAAA,EAAI,KAAK,CAAA,IAAA,CAAM,CAAC;AAChG,CAAC,CAAA;AAEK,MAAO,gBAAiB,SAAQ,UAAU,CAAA;IAC5C,WAAY,CAAA,IAAoB,EAAE,OAA2B,EAAA;AACzD,QAAA,KAAK,CAAC,IAAI,IAAI,gBAAgB,EAAE;AAC5B,YAAA,aAAa,EAAE,CAAC;AAChB,YAAA,OAAO,EAAE,EAAE;AACX,YAAA,GAAG,EAAE,wDAAwD;AAC7D,YAAA,UAAU,EAAE,cAAc;AAC1B,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;KACN;AAEe,IAAA,aAAa,CAAC,OAAgB,EAAA;QAC1C,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC;KAC3D;AACJ;;;;;;;;;;;ACjBD;;;;AAIG;AACH,MAAM,QAAS,SAAQ,YAAY,CAAA;IAiB/B,WAAY,CAAA,IAAmB,EAAE,OAAA,GAA2B,EAAE,EAAA;AAC1D,QAAA,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC;QACpC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,GAAG,IAAI,IAAI,CAAC;AAChC,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACxB;AAED,IAAA,IAAoB,YAAY,GAAA;AAC5B,QAAA,OAAO,UAAU,CAAC;KACrB;IAEe,YAAY,GAAA;AACxB,QAAA,IAAI,IAAI,CAAC,MAAM,YAAY,gBAAgB,EAAE;AACzC,YAAA,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC;SACxB;KACJ;AAED;;;;AAIG;AACI,IAAA,MAAM,CAAC,GAAW,EAAA;AACrB,QAAA,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;AAChB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAC5B,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,KAAK,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,WAAW,CAAC;QACtC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpD,QAAA,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC;KACzB;AAED;;;;AAIG;AACI,IAAA,QAAQ,CAAC,KAAuB,EAAA;AACnC,QAAA,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAC5B,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,QAAA,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,WAAW,CAAC;AACtC,QAAA,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC;AACtB,QAAA,IAAI,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AAC5B,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACjC;aAAM;YACH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACxC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SACvD;KACJ;AAED;;;;AAIG;IACgB,oBAAoB,GAAA;QACnC,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,MAAM,EAAE;AACrC,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACnF,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC9B;KACJ;AAES,IAAA,OAAO,CAAC,EAAS,EAAA;AACvB,QAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC9B,QAAA,IAAI,IAAI,CAAC,MAAM,YAAY,gBAAgB,EAAE;YACzC,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,QAAS,CAAC,CAAC;SAC3D;AACD,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACxB;AAES,IAAA,WAAW,CAAC,GAA8D,EAAA;QAChF,IAAI,GAAG,EAAE;AACL,YAAA,IAAI,CAAC,WAAW,GAAG,qBAAqB,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;AAC9D,YAAA,IAAI,CAAC,YAAY,GAAG,qBAAqB,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;AAChE,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,YAAA,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aAC3C;SACJ;KACJ;AAGD;;;;AAIG;AACa,IAAA,YAAY,CAAC,QAAkB,EAAA;AAC3C,QAAA,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,IAAI,EAAE;AACjC,YAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,gBAAA,IAAI,IAAI,CAAC,MAAM,YAAY,gBAAgB,EAAE;AACzC,oBAAA,IAAI,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AAC5B,wBAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;qBACjC;yBAAM;wBACH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;wBACxC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;qBACvD;iBACJ;aACJ;iBAAM;AACH,gBAAA,IAAI,CAAC,MAAM,GAAG,IAAI,KAAK,EAAE,CAAC;AAC1B,gBAAA,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,WAAW,CAAC;gBACtC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACxC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACpD,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;aAC/B;SACJ;AAAM,aAAA,IAAI,IAAI,CAAC,OAAO,EAAE;YACrB,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SAC3C;KACJ;AAED;;;AAGG;AACa,IAAA,oBAAoB,CAAC,QAAkB,EAAA;QACnD,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,YAAY,gBAAgB,EAAE;AACxD,YAAA,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC;SACxB;AACD,QAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;AACjC,QAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;AAC3B,QAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;KAC5B;AACJ;;ACrJD,MAAM,YAAa,SAAQ,YAAY,CAAA;IACnC,WAAY,CAAA,IAAmB,EAAE,OAAA,GAA+B,EAAE,EAAA;AAC9D,QAAA,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QAErB,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC;AAE9C,QAAA,IAAI,OAAO,CAAC,OAAO,EAAE;AACjB,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC9B;QAED,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,IAAI,SAAS,GAAG,qBAAqB,CAAC,OAAO,CAAC,UAAW,CAAC,GAAG,GAAG,CAAC;QACtG,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,WAAW,IAAI,SAAS,GAAG,qBAAqB,CAAC,OAAO,CAAC,WAAY,CAAC,GAAG,GAAG,CAAC;AAEzG,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACxB;AAED,IAAA,IAAoB,YAAY,GAAA;AAC5B,QAAA,OAAO,cAAc,CAAC;KACzB;AAEe,IAAA,YAAY,CAAC,QAAkB,EAAA;QAC3C,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;KAC5C;AAEM,IAAA,WAAW,CAAC,OAAwB,EAAA;AACvC,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC;KACjC;IAEM,OAAO,CAAC,KAAa,EAAE,MAAc,EAAA;AACxC,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AACzB,QAAA,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;AAC3B,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;KAC9B;AAEe,IAAA,oBAAoB,CAAC,QAAkB,EAAA;AACnD,QAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;AACjC,QAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;AAC3B,QAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;KAC5B;AACJ;;AC7CD;;;;AAIG;AACH,MAAM,QAAS,SAAQ,YAAY,CAAA;IAgB/B,WAAY,CAAA,IAAmB,EAAE,OAAA,GAA2B,EAAE,EAAA;AAC1D,QAAA,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;AAErB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,YAAY,IAAI,IAAI,CAAC;QAE3C,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,GAAG,IAAI,IAAI,CAAC;KACnC;AAED,IAAA,IAAoB,YAAY,GAAA;AAC5B,QAAA,OAAO,UAAU,CAAC;KACrB;AAED;;;;AAIG;AACI,IAAA,MAAM,CAAC,GAAW,EAAA;AACrB,QAAA,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;AAChB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;KAC7B;AAED;;;;AAIG;AACI,IAAA,eAAe,CAAC,KAAuB,EAAA;AAC1C,QAAA,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC3D,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,QAAA,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC;AACtB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;KAC7B;AAED;;;;AAIG;AACa,IAAA,aAAa,CAAC,UAAmB,EAAA;AAC7C,QAAA,IAAI,UAAU,IAAI,IAAI,CAAC,WAAW,EAAE;AAChC,YAAA,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;AAChC,YAAA,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,IAAI,UAAU,EAAE;AACZ,oBAAA,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBAC7D,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;iBACrC;qBAAM;AACH,oBAAA,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;oBAChE,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;iBACtC;aACJ;SACJ;KACJ;AAED;;;;AAIG;IACgB,oBAAoB,GAAA;QACnC,IAAI,EAAE,GAAG,IAAI,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,CAAC,EAAG,CAAC;AAC7C,QAAA,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,cAAe,CAAC,CAAC;YACpD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,MAAO,CAAC,CAAC;SACrF;aAAM;AACH,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAQ,CAAC,QAAS,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAO,CAAC,CAAC;AAC3F,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC9B;KACJ;AAED;;AAEG;AACO,IAAA,UAAU,CAAC,KAAuB,EAAA;AACxC,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,UAAU,CAAC;AACpC,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,WAAW,CAAC;AACtC,QAAA,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC;AAC/B,QAAA,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,WAAW,CAAC;QACjC,KAAK,CAAC,IAAI,EAAE,CAAC;AACb,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;KAC5C;AAES,IAAA,QAAQ,CAAC,KAAuB,EAAA;QACtC,IAAI,GAAG,GAAG,eAAe,CAAC;AAC1B,QAAA,QAAQ,KAAK,CAAC,KAAM,CAAC,IAAI;AACrB,YAAA,KAAK,CAAC;gBACF,GAAG,GAAG,uBAAuB,CAAC;gBAC9B,MAAM;AACV,YAAA,KAAK,CAAC;gBACF,GAAG,GAAG,uBAAuB,CAAC;gBAC9B,MAAM;AACV,YAAA,KAAK,CAAC;gBACF,GAAG,GAAG,6DAA6D,CAAC;gBACpE,MAAM;AACV,YAAA,KAAK,CAAC;gBACF,GAAG,GAAG,qBAAqB,CAAC;gBAC5B,MAAM;SACb;AACD,QAAA,OAAO,CAAC,IAAI,CAAC,CAAA,OAAA,EAAU,GAAG,CAAA,YAAA,EAAe,KAAK,CAAC,KAAM,CAAC,IAAI,CAAA,CAAA,CAAG,CAAC,CAAC;KAClE;AAED;;;;AAIG;AACa,IAAA,YAAY,CAAC,QAAkB,EAAA;AAC3C,QAAA,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,IAAI,EAAE;AACjC,YAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,gBAAA,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE;AACzD,oBAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBAChC;AAAM,qBAAA,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE;oBACxB,IAAI,IAAI,GAAG,IAAI,CAAC;oBAChB,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAU,CAAQ,EAAA;AACtD,wBAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AAC1B,qBAAC,CAAC,CAAC;iBACN;aACJ;iBAAM;gBACH,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AAC9C,gBAAA,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,WAAW,CAAC;gBACtC,IAAI,IAAI,GAAG,IAAI,CAAC;AAChB,gBAAA,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,YAAA;AACpC,oBAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AAC1B,iBAAC,CAAC,CAAC;AACH,gBAAA,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,YAAA;AAClC,oBAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACxB,iBAAC,CAAC,CAAC;aACN;AACD,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC5B,YAAA,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;AAC5B,YAAA,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;YAChD,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;SAC1D;aAAM;YACH,IAAI,CAAC,OAAQ,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SAC5C;KACJ;AAED;;;AAGG;AACa,IAAA,oBAAoB,CAAC,QAAkB,EAAA;AACnD,QAAA,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC;AACtC,QAAA,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;AACjC,QAAA,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;AAC3B,QAAA,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;KAC5B;AACJ;;AC5KD;;;;;;AAMG;AACG,MAAO,GAAI,SAAQ,MAAM,CAAA;IAK3B,WAAY,CAAA,IAAY,EAAE,OAAA,GAAsB,EAAE,EAAA;AAC9C,QAAA,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;AACrB,QAAA,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,SAAS,IAAI;AACnC,YAAA,GAAG,EAAE,uDAAuD;SAC/D,CAAC;QAEF,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,IAAI,SAAS,CAAC;KAC5C;AAED,IAAA,IAAoB,YAAY,GAAA;AAC5B,QAAA,OAAO,KAAK,CAAC;KAChB;AAES,IAAA,0BAA0B,CAAC,MAAmB,EAAA;AACpD,QAAA,MAAM,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,aAAa,CAAC,CAAC,CAAC;AACnE,QAAA,MAAM,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,WAAY,CAAC,IAAI,EAAE,CAAC,CAAC;QAC1D,MAAM,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,IAChC,IAAI;AACC,aAAA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;AACnB,aAAA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;AACnB,aAAA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;aACnB,KAAK,CAAC,GAAG,CAAC;AACV,aAAA,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAClD,CAAC;AACF,QAAA,OAAO,WAAW,CAAC;KACtB;AAES,IAAA,WAAW,CAAC,IAAY,EAAA;AAC9B,QAAA,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC;YAAE,OAAO;AAEtC,QAAA,MAAM,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC;AAC/C,QAAA,MAAM,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AACzC,QAAA,MAAM,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AACzC,QAAA,MAAM,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAEzC,OAAO,CAAA,KAAA,EAAQ,CAAC,CAAI,CAAA,EAAA,CAAC,IAAI,CAAC,CAAA,CAAA,EAAI,CAAC,CAAA,CAAA,CAAG,CAAC;KACtC;AAED;;;AAGG;AACO,IAAA,oBAAoB,CAAC,MAAe,EAAA;AAC1C,QAAA,MAAM,WAAW,GAAG,MAAM,CAAC,SAAS,CAAC,IAAI,EAAE;AACtC,aAAA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;AACnB,aAAA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;AACnB,aAAA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;aACnB,KAAK,CAAC,GAAG,CAAC;AACV,aAAA,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAA;AAE/C,QAAA,OAAO,WAAW,CAAC;KACtB;IAES,qBAAqB,CAAC,SAAqC,EAAE,MAAc,EAAA;AACjF,QAAA,IAAI,CAAC,SAAS;YAAE,OAAO;AAEvB,QAAA,MAAM,QAAQ,GAAc,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAA;QAC9E,MAAM,IAAI,GAAW,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC;AAEzF,QAAA,MAAM,EAAC,WAAW,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAC,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;;QAI9F,MAAM,OAAO,GAAa,EAAE,CAAC;QAC7B,KAAK,MAAM,KAAK,IAAI,SAAS,CAAC,oBAAoB,CAAC,aAAa,CAAC,EAAE;AAC/D,YAAA,MAAM,WAAW,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;AAEnE,YAAA,KAAK,MAAM,SAAS,IAAI,WAAW,EAAE;gBACjC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,GAAG,SAAS,CAAA;AAEjC,gBAAA,OAAO,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAExC,gBAAA,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG;AAAE,oBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;AAC3D,gBAAA,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG;AAAE,oBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;AAC3D,gBAAA,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG;AAAE,oBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;AAC3D,gBAAA,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG;AAAE,oBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;aAC9D;SACJ;AAED,QAAA,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AACtB,YAAA,MAAM,MAAM,GAAG,WAAW,GAAG,UAAU,CAAC;YAExC,OAAO,IAAI,MAAM,CAAC;gBACd,IAAI;AACJ,gBAAA,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;AAClB,gBAAA,SAAS,EAAE;AACP,oBAAA,GAAG,EAAE,OAAO;AACZ,oBAAA,IAAI,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;AACd,oBAAA,KAAK,EAAE,SAAS;AAChB,oBAAA,QAAQ,EAAE,MAAM;AACnB,iBAAA;AACD,gBAAA,UAAU,EAAE;AACR,oBAAA,KAAK,EAAE,SAAS;AAChB,oBAAA,OAAO,EAAE,WAAW;AACvB,iBAAA;AACJ,aAAA,CAAC,CAAC;SAEN;aAAM;YACH,OAAO,IAAI,MAAM,CAAC;AACd,gBAAA,QAAQ,EAAE;oBACN,UAAU,EAAE,CAAC,OAAO,CAAC;AACrB,oBAAA,SAAS,EAAE,SAAS;AACpB,oBAAA,KAAK,EAAE,SAAS;AAChB,oBAAA,QAAQ,EAAE,KAAK;AAClB,iBAAA;AACJ,aAAA,CAAC,CAAC;SACN;KACJ;AAES,IAAA,aAAa,CAAC,SAAkB,EAAA;AACtC,QAAA,IAAI,SAAS,CAAC;AACd,QAAA,IAAI,WAAW,CAAC;AAChB,QAAA,IAAI,OAAO,CAAC;AACZ,QAAA,IAAI,SAAS,CAAC;AACd,QAAA,IAAI,SAAS,CAAC;QAEd,MAAM,KAAK,GAAG,SAAS,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QACzD,IAAI,KAAK,EAAE;YACP,IAAI,SAAS,GAAG,KAAK,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3D,IAAI,SAAS,EAAE;gBACX,IAAI,KAAK,GAAG,SAAS,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACvD,gBAAA,IAAI,KAAK;AACL,oBAAA,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;gBAEzD,IAAI,OAAO,GAAG,SAAS,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3D,IAAI,OAAO,EAAE;oBACT,MAAM,GAAG,GAAG,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;AACjD,oBAAA,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG;AACtB,wBAAA,WAAW,GAAG,GAAG,GAAG,GAAG,CAAC;iBAC/B;gBAED,IAAI,IAAI,GAAG,SAAS,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrD,IAAI,IAAI,EAAE;oBACN,IAAI,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;oBAChD,IAAI,IAAI,EAAE;AACN,wBAAA,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;qBACnC;iBACJ;aACJ;YAED,IAAI,SAAS,GAAG,KAAK,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3D,IAAI,SAAS,EAAE;gBACX,IAAI,KAAK,GAAG,SAAS,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACvD,gBAAA,IAAI,KAAK;AACL,oBAAA,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;gBACzD,IAAI,KAAK,GAAG,SAAS,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvD,IAAI,KAAK,KAAK,SAAS;oBACnB,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;aACtD;SACJ;AAED,QAAA,IAAI,CAAC,SAAS;YAAE,SAAS,GAAG,SAAS,CAAA;AACrC,QAAA,IAAI,CAAC,WAAW;YAAE,WAAW,GAAG,CAAC,CAAA;AACjC,QAAA,IAAI,CAAC,OAAO;YAAE,OAAO,GAAG,uDAAuD,CAAA;AAE/E,QAAA,IAAI,CAAC,SAAS;YAAE,SAAS,GAAG,SAAS,CAAA;AACrC,QAAA,IAAI,CAAC,SAAS;YAAE,SAAS,GAAG,CAAC,CAAA;QAE7B,OAAO,EAAC,WAAW,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAC,CAAC;KAClE;AAES,IAAA,SAAS,CAAC,GAAgB,EAAE,MAAc,EAAE,QAAmB,EAAA;AACrE,QAAA,IAAI,CAAC,QAAQ;YACT,QAAQ,GAAG,EAAE,CAAC;AAElB,QAAA,IAAI,GAAG,CAAC,eAAe,CAAC,QAAQ,KAAK,KAAK;AACtC,YAAA,OAAO,QAAQ,CAAC;QAEpB,KAAK,MAAM,SAAS,IAAI,GAAG,CAAC,oBAAoB,CAAC,WAAW,CAAC,EAAE;YAC3D,MAAM,MAAM,GAAG,IAAI,CAAC,qBAAqB,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;AAC7D,YAAA,IAAI,MAAM;AAAE,gBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACrC;AAED,QAAA,OAAO,QAAQ,CAAC;KACnB;AAES,IAAA,uBAAuB,CAAC,GAAgB,EAAA;QAC9C,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9E,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;AAE7C,QAAA,OAAO,EAAC,QAAQ,EAAE,MAAM,EAAC,CAAA;KAC5B;AAED;;;;;;AAMG;AACO,IAAA,+BAA+B,CAAC,WAA2B,EAAE,KAAa,EAAE,SAA4B,EAAA;QAC9G,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;AAC9E,QAAA,MAAM,WAAW,GAAG,CAAC,CAAW,KAAI;AAChC,YAAA,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,EACZ,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACf,YAAA,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG;AAAE,gBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;AAC3D,YAAA,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG;AAAE,gBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;AAC3D,YAAA,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG;AAAE,gBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;AAC3D,YAAA,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG;AAAE,gBAAA,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,CAAC;AAC/D,SAAC,CAAC;QACF,MAAM,OAAO,GAAiB,EAAE,CAAC;QAEjC,WAAW,CAAC,OAAO,CAAC,CAAC,OAAqB,KAAK,OAAO,CAAC,OAAO,CAAC,CAAC,CAAa,KAAK,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAEpG,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,KAAI;AAClC,YAAA,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACnB,gBAAA,MAAM,MAAM,GAAG,IAAI,CAAC,CAAC,CAAiB,CAAC;gBACvC,MAAM,OAAO,GAAG,IAAI,MAAM,CAAC,EAAC,MAAM,EAAE,SAAS,EAAC,CAAC,CAAC;gBAChD,WAAW,CAAC,MAAM,CAAC,CAAC;AACpB,gBAAA,OAAO,OAAO,CAAC;aAClB;AAAM,iBAAA,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACxB,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAc,KAAI;oBAC3C,WAAW,CAAC,IAAI,CAAC,CAAC;AAClB,oBAAA,OAAO,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AACjD,iBAAC,CAAC,CAAC;AACH,gBAAA,MAAM,OAAO,GAAG,IAAI,MAAM,CAAC;AACvB,oBAAA,QAAQ,EAAE,EAAC,UAAU,EAAE,CAAC,UAAU,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAC;AAC7E,iBAAA,CAAC,CAAC;AACH,gBAAA,OAAO,OAAO,CAAC;aAClB;AACL,SAAC,CAAC,CAAC;AACH,QAAA,OAAO,EAAC,QAAQ,EAAE,MAAM,EAAC,CAAC;KAC7B;AAED;;;AAGG;AACO,IAAA,cAAc,CAAC,IAAU,EAAA;AAC/B,QAAA,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,KAAI;AAC3B,YAAA,MAAM,UAAU,GAAG,IAAI,UAAU,EAAE,CAAC;YACpC,UAAU,CAAC,MAAM,GAAG,OAAO,CAAC,KACxB,OAAO,CAAC,IAAI,SAAS,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC,MAAO,CAAC,MAAgB,EAAE,UAAU,CAAC,CAAC,CAAC;AACrF,YAAA,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AAChC,SAAC,CAAC,CAAC;KACN;IAES,cAAc,CAAC,OAAkC,EAAE,OAAe,EAAA;AACxE,QAAA,IAAI,CAAC,OAAO;AAAE,YAAA,OAAO,OAAO,CAAC;QAC7B,IAAI,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG;YAC7C,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC;QAClD,IAAI,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG;YAC7C,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC;QAClD,IAAI,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG;YAC7C,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC;QAClD,IAAI,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG;YAC7C,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC;AAClD,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;AAMG;AACI,IAAA,MAAM,eAAe,CAAC,IAAY,EAAE,KAAc,EAAE,SAA4B,EAAA;AACnF,QAAA,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,IAAI,CAAA;AACrC,QAAA,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;QACjE,MAAM,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QACjE,MAAM,EAAC,QAAQ,EAAE,MAAM,EAAC,GAAG,IAAI,CAAC,+BAA+B,CAC3D,WAAW,EACX,KAAK,IAAI,IAAI,CAAC,MAAM,EACpB,SAAS,IAAI,IAAI,CAAC,UAAU,CAC/B,CAAC;AACF,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AACzD,QAAA,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACtC,QAAA,OAAO,EAAC,QAAQ,EAAE,MAAM,EAAC,CAAC;KAC7B;AAED;;;AAGG;AACI,IAAA,QAAQ,CAAC,KAAa,EAAA;AACzB,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,QAAA,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;KACjC;AAES,IAAA,cAAc,CAAC,GAAW,EAAA;QAChC,OAAO,IAAI,OAAO,CAAW,CAAC,OAAO,EAAE,MAAM,KAAI;AAC7C,YAAA,MAAM,OAAO,GAAG,IAAI,cAAc,EAAE,CAAC;YACrC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AAC/B,YAAA,OAAO,CAAC,YAAY,GAAG,UAAU,CAAC;AAClC,YAAA,OAAO,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;AACrC,YAAA,OAAO,CAAC,MAAM,GAAG,MAAK;AAClB,gBAAA,IAAI,OAAO,CAAC,UAAU,KAAK,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC,MAAM,KAAK,GAAG,EAAE;AAC/D,oBAAA,OAAO,CAAC,OAAO,CAAC,WAAY,CAAC,CAAC;iBACjC;qBAAM;AACH,oBAAA,MAAM,CAAC,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC;iBAC1C;AACL,aAAC,CAAC;YACF,OAAO,CAAC,IAAI,EAAE,CAAC;AACnB,SAAC,CAAC,CAAC;KACN;AAED;;;;;;AAMG;AACI,IAAA,MAAM,aAAa,CAAC,GAAW,EAAE,KAAc,EAAE,SAAwC,EAAA;QAC5F,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;AAC3C;;;;;;;AAOE;AACF,QAAA,MAAM,EAAC,QAAQ,EAAE,MAAM,EAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC;AAE7D,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AAEzD,QAAA,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAEtC,QAAA,OAAO,EAAC,QAAQ,EAAE,MAAM,EAAC,CAAC;KAC7B;AACJ;;ACxVK,MAAO,aAAc,SAAQ,GAAG,CAAA;IAClC,WAAY,CAAA,IAAmB,EAAE,OAAA,GAAsB,EAAE,EAAA;AACrD,QAAA,KAAK,CAAC,IAAI,IAAI,eAAe,EAAE;AAC3B,YAAA,OAAO,EAAE,6CAA6C;AACtD,YAAA,GAAG,EAAE,oDAAoD;AACzD,YAAA,WAAW,EAAE,yCAAyC;AACtD,YAAA,WAAW,EAAE,IAAI;AACjB,YAAA,aAAa,EAAE,EAAE;AACjB,YAAA,eAAe,EAAE,CAAC,EAAC,KAAK,EAAE,SAAS,EAAC,EAAE,EAAC,KAAK,EAAE,SAAS,EAAC,CAAC;AACzD,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,SAAS,EAAE,EAAE;AACb,YAAA,QAAQ,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;AACrC,YAAA,OAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;AACxB,YAAA,OAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;AACxB,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;KACN;AACJ;;ACfD,SAAS,SAAS,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;IAC9C,IAAI,KAAK,GAAG,EAAE,CAAC;AACf,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;QACxB,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,IAAI,IAAI,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,CAAC,GAAG,IAAI,MAAM,CAAC;AAAE,YAAA,CAAC,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,CAAC,GAAG,IAAI,MAAM,CAAC;YAAE,CAAC,IAAI,CAAC,CAAC;AAC7B,QAAA,KAAK,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;KACzB;AACD,IAAA,OAAO,KAAK,CAAC;AACjB,CAAC;AAEK,MAAO,IAAK,SAAQ,GAAG,CAAA;IACzB,WAAY,CAAA,IAAmB,EAAE,OAAA,GAAsB,EAAE,EAAA;AACrD,QAAA,KAAK,CAAC,IAAI,IAAI,MAAM,EAAE;AAClB,YAAA,OAAO,EAAE,kEAAkE;YAC3E,UAAU,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;AACpC,YAAA,GAAG,EAAE,sEAAsE;AAC3E,YAAA,WAAW,EAAE,IAAI;AACjB,YAAA,aAAa,EAAE,QAAQ;AACvB,YAAA,aAAa,EAAE,EAAE;AACjB,YAAA,eAAe,EAAE,CAAC,EAAC,KAAK,EAAE,SAAS,EAAC,EAAE,EAAC,KAAK,EAAE,SAAS,EAAC,CAAC;AACzD,YAAA,WAAW,EAAE,CAAqS,mSAAA,CAAA;AAClT,YAAA,UAAU,EAAE,CAAC,CAAU,EAAE,CAAS,KAAI;gBAClC,OAAO,cAAc,CAAC,CAAC,EAAE;AACrB,oBAAA,GAAG,EAAE,IAAI,CAAC,aAAa,EAAE;AACzB,oBAAA,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,QAAQ,CAAC;AAClD,iBAAA,CAAC,CAAC;aACN;AACD,YAAA,QAAQ,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;AACrC,YAAA,OAAO,EAAE,eAAe;AACxB,YAAA,OAAO,EAAE,kBAAkB;AAC3B,YAAA,SAAS,EAAE,EAAE;AACb,YAAA,uBAAuB,EAAE,GAAG;AAC5B,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;KACN;AACJ;;;;;;;;;;;;;;;;;;;AClCD,MAAM,YAAY,GAAoB,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;AAUvE;;;;;;;;AAQG;AACH,MAAM,KAAK,CAAA;AAmEP,IAAA,WAAA,CAAY,SAAuB,EAAE,EAAA;QAhE9B,IAAS,CAAA,SAAA,GAAmB,IAAI,CAAC;AA6CxC;;;;AAIG;QACI,IAAM,CAAA,MAAA,GAAY,IAAI,CAAC;AAiB1B,QAAA,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QAEhC,IAAI,CAAC,MAAM,GAAG,YAAY,CAAkB,YAAY,EAAE,IAAI,CAAC,CAAC;QAEhE,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC;QAE9B,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,IAAI,CAAC,CAAC;QAEvC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,IAAI,CAAC,CAAC;AAEnC,QAAA,IAAI,WAAW,GAAG,MAAM,CAAC,WAAW,IAAIuB,SAAY,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;QACjE,IAAI,MAAM,CAAC,SAAS,IAAI,WAAW,GAAG,MAAM,CAAC,SAAS,EAAE;AACpD,YAAA,WAAW,GAAG,MAAM,CAAC,SAAS,CAAC;SAClC;QACD,IAAI,MAAM,CAAC,OAAO,IAAI,WAAW,GAAG,MAAM,CAAC,OAAO,EAAE;AAChD,YAAA,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC;SAChC;AAED,QAAA,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;AAE/B,QAAA,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,KAAK,SAAS,GAAG,MAAM,CAAC,UAAU,GAAG,GAAG,CAAC;AAC7E,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAElB,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AAEpB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AAEnB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;KACjC;IAEM,aAAa,GAAA;AAChB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;KACjC;IAEM,WAAW,CAAC,KAAa,EAAE,QAAkB,EAAA;AAChD,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC;QACvC,IAAI,CAAC,cAAc,GAAG,KAAK,GAAGC,2BAA8B,CAAC;AAC7D,QAAA,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC;KACrC;AAED;;;;AAIG;AACI,IAAA,OAAO,CAAC,IAAU,EAAA;QACrB,IAAI,CAAC,GAAGD,SAAY,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE;AACtC,YAAA,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;SACtB;QACD,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE;AAClC,YAAA,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;SACpB;AACD,QAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;KACxB;AAED;;;;AAIG;IACI,OAAO,GAAA;QACV,OAAOE,SAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;KACzC;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,YAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC;SACrC;KACJ;AAEM,IAAA,IAAI,CAAC,EAAU,EAAA;QAClB,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC;AACzC,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,GAAG,CAAC,CAAA;AACxB,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,EAAE,GAAGC,eAAkB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAC/D,YAAA,IAAI,CAAC,GAAG,CAAC,EAAE;gBACP,IAAI,IAAI,CAAC,OAAO,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE;AACnC,oBAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC;AAClC,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;iBAC/C;qBAAM;AACH,oBAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;iBACzB;aACJ;iBAAM;gBACH,IAAI,IAAI,CAAC,SAAS,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,EAAE;AACvC,oBAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC;AAChC,oBAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;iBAC/C;qBAAM;AACH,oBAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;iBACzB;aACJ;AAED,YAAA,IAAI,IAAI,CAAC,iBAAiB,EAAE;AACxB,gBAAA,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,EAAE;AAC/D,oBAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC;AACvC,oBAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;iBAChC;aACJ;AAED,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAChD;KACJ;AAED;;;;AAIG;AACI,IAAA,OAAO,CAAC,KAAY,EAAA;AACvB,QAAA,OAAO,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,CAAC;KACnC;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,EAAE;AACrB,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SACjD;KACJ;AAED,IAAA,IAAW,UAAU,GAAA;QACjB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;IAED,IAAW,UAAU,CAAC,KAAa,EAAA;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;KAC5B;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,EAAE;AACrB,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAChD;KACJ;;AA7MM,KAAW,CAAA,WAAA,GAAW,CAAX;;ACxBtB;;;;;;;AAOG;MACU,iBAAiB,CAAA;IAuB1B,WAAY,CAAA,OAAgB,EAAE,OAAgB,EAAA;AAC1C,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;AACxB,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;AACxB,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;KAC3B;AAED;;;AAGG;IACI,UAAU,GAAA;AACb,QAAA,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;YAClB,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;SACjD;KACJ;AAED;;;;AAIG;IACI,UAAU,GAAA;QACb,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;AAED;;;;AAIG;IACI,QAAQ,GAAA;AACX,QAAA,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;AAClB,YAAA,IAAI,CAAC,QAAQ,CAAC,aAAc,CAAC,UAAU,EAAE,CAAC;AAC1C,YAAA,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC;AACnC,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;AACtB,YAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,CAAC,CAAC,kBAAkB,EAAE,CAAC;YACvB,CAAC,CAAC,GAAG,EAAE,CAAC;SACX;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;AAGG;IACI,MAAM,GAAA;AACT,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;QAC/B,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AACvB,YAAA,IAAI,IAAI,CAAC,UAAU,EAAE;gBACjB,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;AACD,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YACvB,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SAChC;KACJ;AAED;;;AAGG;IACI,UAAU,GAAA;AACb,QAAA,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;KAC3B;AAED;;;;AAIG;IACI,QAAQ,GAAA;QACX,OAAO,IAAI,CAAC,UAAU,CAAC;KAC1B;AAED;;;;;AAKG;AACI,IAAA,GAAG,CAAC,MAA2B,EAAA;QAClC,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,QAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AAC1B,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;;AAMG;IACI,eAAe,CAAC,IAAY,EAAE,MAAsB,EAAA;QACvD,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AAC5C,QAAA,OAAO,IAAI,CAAC;KACf;AAED;;;;;AAKG;IACI,UAAU,CAAC,IAAY,EAAE,QAAgB,EAAA;QAC5C,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACzC,QAAA,OAAO,IAAI,CAAC;KACf;AACJ;;AC/ID,MAAM,IAAI,CAAA;AAMN,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;KACpB;AACJ,CAAA;AAED;;;AAGG;AACH,MAAM,KAAK,CAAA;AAKP,IAAA,WAAA,CAAY,OAAe,GAAG,EAAA;AAC1B,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAK,CAAC;AAC9B,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC;AAE3B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;AAC3B,YAAA,IAAI,CAAC,GAAG,IAAI,IAAI,EAAK,CAAC;AACtB,YAAA,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;AACvB,YAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,CAAC;AACvB,YAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACrB;AACD,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;KAC9B;IAEM,OAAO,GAAA;QACV,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;AAEM,IAAA,IAAI,CAAC,IAAO,EAAA;QACf,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAK,CAAC;AACpC,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;KAC7B;IAEM,GAAG,GAAA;AACN,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;;QAE7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAK,CAAC;AACpC,QAAA,OAAO,GAAG,CAAC;KACd;IAEM,OAAO,GAAA;QACV,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAK,CAAC;AACpC,QAAA,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;KAC7B;AACJ;;ACRD,MAAM,cAAc,GAAG,CAAC,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;AAC/C,MAAM,YAAY,GAAG,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AAEzC;AACA,MAAM,UAAU,GAAG,CAAC,CAAC;AAErB;;;;;;;;;;AAUG;AACH,MAAM,OAAO,CAAA;IAkIT,WAAY,CAAA,YAAoD,EAAE,MAAA,GAA6B,EAAE,EAAA;AAlB1F,QAAA,IAAA,CAAA,gBAAgB,GAAG,IAAI,KAAK,EAAmB,CAAC;QAgB7C,IAAwB,CAAA,wBAAA,GAAW,CAAC,CAAC;AA47B/C;;;AAGG;QACI,IAAS,CAAA,SAAA,GAAG,MAAK;;YAEpB,IAAI,GAAG,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;YACnC,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,uBAAuB,CAAC;AACpD,YAAA,IAAI,CAAC,uBAAuB,GAAG,GAAG,CAAC;YAEnC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAEvC,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC1C,gBAAA,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACxC;;AAGD,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,MAAO,CAAC;AAE1B,YAAA,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,MAAM,CAAC,MAAM,EAAE;AAC1J,gBAAA,IAAI,MAAM,CAAC,WAAW,KAAK,CAAC,IAAI,MAAM,CAAC,YAAY,KAAK,CAAC,EAAE;oBACvD,IAAI,CAAC,IAAI,EAAE,CAAC;iBACf;AAAM,qBAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;oBACzB,IAAI,CAAC,KAAK,EAAE,CAAC;oBACb,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,WAAW,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC;iBACzD;aACJ;;YAGD,IAAI,CAAC,cAAc,EAAE,CAAC;AAC1B,SAAC,CAAA;QAt9BG,IAAI,CAAC,MAAM,GAAG,YAAY,CAAiC,CAAC,kBAAkB,EAAE,QAAQ,CAAC,CAAC,CAAC;AAE3F,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC;AAE1C,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,KAAK,EAAE,CAAC;AAEhC,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAElB,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AAEnB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AAEnB,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;AAEf,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEnB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAE1B,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAE1B,IAAI,CAAC,OAAO,GAAG;AACX,YAAA,UAAU,EAAE,MAAM,CAAC,UAAU,IAAI,CAAC;AAClC,YAAA,KAAK,EAAE,MAAM,CAAC,KAAK,IAAI,GAAG;AAC1B,YAAA,MAAM,EAAE,MAAM,CAAC,MAAM,IAAI,GAAG;YAC5B,UAAU,EAAE,WAAW,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,UAAU,IAAI,GAAG;AAC7D,YAAA,UAAU,EAAE,MAAM,CAAC,UAAU,IAAI,EAAE;AACnC,YAAA,OAAO,EAAE,MAAM,CAAC,OAAO,IAAI,EAAE;SAChC,CAAA;AAED,QAAA,IAAI,CAAC,YAAY,GAAG,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;AAE1E,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AAErB,QAAA,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;AAElC,QAAA,IAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC;AAEjC,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAE1B,IAAI,CAAC,cAAc,GAAG,YAAA;AACtB,SAAC,CAAC;AAEF,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAE/B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,KAAK,EAAE,CAAC;QAEpC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9D,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE9D,IAAI,CAAC,aAAa,GAAG;YACjB,SAAS,EAAE,IAAI,CAAC,eAAe;YAC/B,QAAQ,EAAE,IAAI,CAAC,eAAe;YAC9B,QAAQ,EAAE,IAAI,CAAC,gBAAgB;YAC/B,aAAa,EAAE,IAAI,CAAC,eAAe;SACtC,CAAC;AAEF,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,eAAe,CAAC;AAEjD,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAE3B,IAAI,CAAC,aAAa,EAAE,CAAC;QAErB,IAAI,MAAM,CAAC,YAAY,IAAI,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE;YACrD,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;KACJ;IAED,IAAW,UAAU,CAAC,KAAa,EAAA;AAC/B,QAAA,IAAI,KAAK,KAAK,CAAC,EAAE;AACb,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC;SAC7C;aAAM;YACH,IAAI,CAAC,mBAAmB,GAAG,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;SAC9D;KACJ;IAEM,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;IAES,aAAa,GAAA;AACnB,QAAA,IAAI,IAAI,CAAC,aAAa,EAAE;AACpB,YAAA,IAAI,IAAI,CAAC,aAAa,YAAY,WAAW,EAAE;AAC3C,gBAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC;aACpC;iBAAM;gBACH,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,CAAsB,CAAC;aAClI;SACJ;aAAM;YACH,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YAC/C,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;YACvC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;SAC5C;KACJ;AAED;;;;;AAKG;AACH,IAAA,OAAO,YAAY,CAAC,EAAyD,EAAE,IAAY,EAAA;AAEvF,QAAA,IAAI,CAAC,EAAE;YAAE,OAAO;QAEhB,IAAI,CAAC,EAAE,GAAG,CAAC;AACX,QAAA,KAAK,CAAC,IAAI,cAAc,EAAE;AACtB,YAAA,GAAG,GAAG,EAAE,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;YAChD,IAAI,GAAG,EAAE;AACL,gBAAA,OAAO,GAAG,CAAC;aACd;SACJ;KACJ;AAED;;;;;AAKG;AACH,IAAA,OAAO,UAAU,CAAC,MAAyB,EAAE,iBAAuB,EAAA;QAChE,IAAI,GAAG,GAA2B,IAAI,CAAC;AAEvC,QAAA,IAAI;YACA,IAAI,SAAS,GAAG,IAAI,eAAe,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACrD,IAAI,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAClC,IAAI,GAAG,EAAE;gBACL,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE,iBAAiB,CAAoB,CAAC;gBACnE,IAAI,GAAG,EAAE;AACL,oBAAA,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC;iBAClB;aACJ;iBAAM;AACH,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC1C,oBAAA,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,iBAAiB,CAAoB,CAAC;oBAC/E,IAAI,GAAG,EAAE;AACL,wBAAA,GAAG,CAAC,IAAI,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;wBAC3B,MAAM;qBACT;iBACJ;aACJ;SACJ;QAAC,OAAO,EAAE,EAAE;AACT,YAAA,IAAI,CAAC,MAAM,CAAC,gDAAgD,CAAC,CAAC;SACjE;QAED,IAAI,CAAC,GAAG,EAAE;AACN,YAAA,IAAI,CAAC,MAAM,CAAC,4BAA4B,CAAC,CAAC;SAC7C;AAED,QAAA,OAAO,GAAG,CAAC;KACd;AAED;;;;AAIG;AACI,IAAA,gBAAgB,CAAC,QAAkB,EAAA;QACtC,QAAQ,KAAK,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,CAAC;KAChD;AAED;;;;;;;;;;;AAWG;IACI,uBAAuB,CAC1B,QAAgB,CAAC,EACjB,SAAiB,CAAC,EAClB,SAAiB,SAAS,EAC1B,iBAAyB,MAAM,EAC/B,SAAiB,MAAM,EACvB,OAAe,eAAe,EAC9B,QAAgB,CAAC,EAAA;AAGjB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,IAAI,OAAO,GAAG,EAAE,CAAC,aAAa,EAAE,CAAC;QACjC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;AAEvC,QAAA,EAAE,CAAC,UAAU,CACT,EAAE,CAAC,UAAU,EACb,KAAK,EACJ,EAAU,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC,EACzC,KAAK,EACL,MAAM,EACN,CAAC,EACA,EAAU,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,EAChC,EAAU,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,EAC/B,IAAK,CACR,CAAC;AACF,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAG,EAAU,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;AAC1F,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAG,EAAU,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;AAC1F,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,oBAAoB,CACvB,KAAa,EACb,MAAc,EACd,cAAuB,EAAA;AAEvB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,IAAI,OAAO,GAAG,EAAE,CAAC,aAAa,EAAE,CAAC;QACjC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;AAEvC,QAAA,EAAE,CAAC,UAAU,CACT,EAAE,CAAC,UAAU,EACb,CAAC,EACD,cAAc,IAAI,EAAE,CAAC,IAAI,EACzB,KAAK,EACL,MAAM,EACN,CAAC,EACD,EAAE,CAAC,IAAI,EACP,EAAE,CAAC,aAAa,EAChB,IAAK,CACR,CAAC;AACF,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;AACnE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;AACnE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,oBAAoB,CACvB,KAAa,EACb,MAAc,EACd,cAAuB,EAAA;AAEvB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,IAAI,OAAO,GAAG,EAAE,CAAC,aAAa,EAAE,CAAC;QACjC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;AAEvC,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,cAAc,IAAI,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,IAAK,CAAC,CAAC;AAC/G,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AAClE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AAClE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,sBAAsB,CACzB,KAAkB,EAClB,cAAuB,EACvB,UAA+B,IAAI,EAAA;AAEnC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC,aAAa,EAAE,CAAC;QACxC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;QAEvC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,cAAc,IAAI,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AAC7F,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;AACnE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;AACnE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,sBAAsB,CACzB,KAAkB,EAClB,cAAuB,EACvB,UAA+B,IAAI,EAAA;AAEnC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC,aAAa,EAAE,CAAC;QACxC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;QACvC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,cAAc,IAAI,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AAC7F,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AAClE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AAClE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,uBAAuB,CAC1B,KAAkB,EAClB,cAAuB,EACvB,UAA+B,IAAI,EAAA;AAEnC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC,aAAa,EAAE,CAAC;QACxC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;QAEvC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,cAAc,IAAI,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AAC7F,QAAA,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACjC,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,oBAAoB,CAAC,CAAC;AAChF,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,sBAAsB,CACzB,KAAkB,EAClB,cAAuB,EACvB,UAA+B,IAAI,EAAA;AAEnC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC,aAAa,EAAE,CAAC;QACxC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;QAEvC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,cAAc,IAAI,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AAC7F,QAAA,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACjC,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,oBAAoB,CAAC,CAAC;QAChF,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,8BAA8B,CAAC,0BAA0B,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;AACpI,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,sBAAsB,CACzB,KAAkB,EAClB,cAAuB,EACvB,UAA+B,IAAI,EAAA;AAEnC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC,aAAa,EAAE,CAAC;QACxC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;;QAGvC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,cAAc,IAAI,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;AACzF,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AACtG,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;AACnE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;AACnE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,sBAAsB,CACzB,KAAkB,EAClB,cAAuB,EACvB,UAA+B,IAAI,EAAA;AAEnC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC,aAAa,EAAE,CAAC;QACxC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;;QAGvC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,cAAc,IAAI,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;AACzF,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AACtG,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AAClE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AAClE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,uBAAuB,CAC1B,KAAkB,EAClB,cAAuB,EACvB,UAA+B,IAAI,EAAA;AAEnC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC,aAAa,EAAE,CAAC;QACxC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;QAEvC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,UAAU,EAAE,UAAU,EAAE,cAAc,IAAI,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;AAClG,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AACtG,QAAA,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACjC,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,oBAAoB,CAAC,CAAC;AAChF,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AAErC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;AAOG;AACI,IAAA,sBAAsB,CACzB,KAAkB,EAClB,cAAuB,EACvB,UAA+B,IAAI,EAAA;AAEnC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC,aAAa,EAAE,CAAC;QACxC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;;;QAGvC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,UAAU,EAAE,UAAU,EAAE,cAAc,IAAI,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;AAClG,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AACtG,QAAA,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACjC,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,oBAAoB,CAAC,CAAC;QAChF,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,8BAA8B,CAAC,0BAA0B,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;AACpI,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;QACrE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;AACrC,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;;;;;;AAWG;AACI,IAAA,kBAAkB,CAAC,MAAuB,EAAA;AAE7C,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAElB,QAAA,IAAI,OAAO,GAAG,EAAE,CAAC,aAAa,EAAE,CAAC;QACjC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC;AAC7C,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,gBAAgB,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AAC3E,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,gBAAgB,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CAAC,aAAa,CAAC,CAAC;AAC3E,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,gBAAgB,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AACxE,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,gBAAgB,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AAExE,QAAA,IAAI,KAAK,GAAuB;AAC5B,YAAA,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,2BAA2B,CAAC;AAC3C,YAAA,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,2BAA2B,CAAC;AAC3C,YAAA,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,2BAA2B,CAAC;AAC3C,YAAA,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,2BAA2B,CAAC;AAC3C,YAAA,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,2BAA2B,CAAC;AAC3C,YAAA,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,2BAA2B,CAAC;SAC9C,CAAC;AAEF,QAAA,IAAI,WAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QACpC,WAAW,CAAC,SAAS,EAAE,CAAC;AACxB,QAAA,IAAI,UAAU,GAAG,WAAW,CAAC,QAAQ,EAAE,CAAC;AAExC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvB,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC;;YAE7C,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;SAC1E;AAED,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvB,YAAA,IAAI,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;AACxB,YAAA,KAAK,CAAC,WAAW,GAAG,EAAE,CAAC;YACvB,KAAK,CAAC,MAAM,GAAG,CAAC,UAAU,OAA4B,EAAE,IAAY,EAAE,KAAuB,EAAA;gBACzF,OAAO,YAAA;AACH,oBAAA,IAAI,EAAE,IAAI,OAAO,EAAE;wBACf,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC;;wBAE7C,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;qBACrE;AACL,iBAAC,CAAC;aACL,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;YAEzB,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC3B;AACD,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;;;AAMG;AACI,IAAA,UAAU,CAAC,OAAgB,EAAE,WAAA,GAAuB,KAAK,EAAA;QAC5D,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAC9B,IAAI,EAAE,GAAG,IAAI,iBAAiB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YAC9C,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;AACjC,YAAA,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;YAChC,IAAI,WAAW,EAAE;AACb,gBAAA,EAAE,CAAC,UAAU,GAAG,KAAK,CAAC;aACzB;SACJ;aAAM;YACH,OAAO,CAAC,IAAI,CAAC,CAAA,iBAAA,EAAoB,OAAO,CAAC,IAAI,CAAmB,iBAAA,CAAA,CAAC,CAAC;SACrE;AACD,QAAA,OAAO,OAAO,CAAC;KAClB;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,IAAY,EAAA;AAC7B,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;KACvD;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,WAAsB,EAAA;AACrC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACzC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;SACnC;KACJ;AAED;;;;AAIG;AACO,IAAA,sBAAsB,CAAC,EAAqB,EAAA;AAClD,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,EAAE,CAAC,UAAU,EAAE,CAAC;AAChB,YAAA,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;AACrB,gBAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;gBACxB,EAAE,CAAC,QAAQ,EAAE,CAAC;aACjB;iBAAM;gBACH,EAAE,CAAC,UAAU,EAAE,CAAC;AAChB,gBAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,kBAAkB,EAAE,CAAC;AACjD,gBAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;aACrC;SACJ;KACJ;AAED;;;AAGG;IACO,aAAa,GAAA;AACnB,QAAA,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;YACzB,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SACjD;KACJ;AAED;;;;;;AAMG;AACI,IAAA,mBAAmB,CAAC,YAAoB,EAAE,OAAA,GAAmB,KAAK,EAAA;AACrE,QAAA,IAAI,EAAE,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,EAAE;AACrD,YAAA,IAAI,GAAG,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;YACtD,IAAI,GAAG,EAAE;AACL,gBAAA,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,GAAG,CAAC;aACvC;iBAAM,IAAI,OAAO,EAAE;gBAChB,OAAO,CAAC,IAAI,CACR,+BAA+B,GAAG,YAAY,GAAG,uBAAuB,CAC3E,CAAC;aACL;SACJ;QACD,OAAO,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;KAC3D;AAED;;;AAGG;IACI,UAAU,GAAA;QAEb,IAAI,IAAI,CAAC,YAAY;YAAE,OAAO;QAE9B,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;AAEzB,QAAA,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAEhE,IAAI,CAAC,IAAI,CAAC,EAAE;YAAE,OAAO;AAErB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;;QAGzB,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;QAE/D,IAAI,IAAI,CAAC,EAAE,CAAC,IAAI,KAAK,OAAO,EAAE;YAC1B,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;YACzD,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;YACvD,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;YACpD,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;;;SAG1D;aAAM;YACH,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;YACvD,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;;SAE5D;QAED,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC;QACvC,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;SAC9D;QAED,IAAI,IAAI,CAAC,EAAE,CAAC,IAAI,KAAK,OAAO,EAAE;YAC1B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9D,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACjE;aAAM;YACH,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9D,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACjE;QAED,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC;QACrD,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC;QACpD,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC;QACrD,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC;AAEzD,QAAA,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,8BAA8B,EAAE;AACjD,YAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,gBAAgB,CAAC;SACrD;aAAM;AACH,YAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,eAAe,CAAC;SACpD;;QAGD,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,oBAAoB,GAAG,IAAI,oBAAoB,CAAC,CAAC,OAAO,KAAI;AAC7D,YAAA,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC;AAC7E,SAAC,EAAE,EAAC,SAAS,EAAE,CAAC,EAAC,CAAC,CAAC;QAEnB,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAE/C,IAAI,CAAC,cAAc,GAAG,IAAI,cAAc,CAAC,OAAO,IAAG;YAC/C,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,KAAK,KAAK,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;AAC5G,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAEzC,QAAA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAK;YAC/C,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,eAAe,KAAK,SAAS,CAAC,CAAC;AACzE,SAAC,CAAC,CAAC;KACN;AAES,IAAA,uBAAuB,CAAC,UAAmB,EAAA;QACjD,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,KAAK,EAAE,CAAC;AACb,YAAA,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;AAC7C,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;SAC5D;aAAM;AACH,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;YAC1D,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;KACJ;AAED;;;AAGG;IACO,YAAY,GAAA;AAElB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AAEjB,QAAA,IAAI,CAAC,EAAE;YAAE,OAAO;QAChB,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;AAEzB,QAAA,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AACtB,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;QACzB,IAAI,CAAC,OAAO,CACR,IAAI,CAAC,MAAM,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,EAC7C,IAAI,CAAC,MAAM,CAAC,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAClD,CAAC;AACF,QAAA,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;AACrB,QAAA,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AACrB,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AACxB,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AACrB,QAAA,IAAI,CAAC,oBAAoB,CAAC,EAAC,KAAK,EAAE,iBAAiB,EAAC,EAAE,CAAC,CAAkB,KAAI;AACzE,YAAA,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;AAChC,SAAC,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,oBAAoB,CAAC,EAAC,KAAK,EAAE,0BAA0B,EAAC,EAAE,CAAC,CAAkB,KAAI;AAClF,YAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AAC5B,SAAC,CAAC,CAAC;KACN;IAEM,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;AAED;;;;;;;;AAQG;IACI,uBAAuB,CAAC,QAAgB,EAAE,QAAgB,EAAE,KAAc,EAAE,QAAgB,CAAC,EAAA;AAChG,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAClB,QAAA,IAAI,MAAM,GAAmB,EAAE,CAAC,YAAY,EAAoB,CAAC;QACjE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;AACvC,QAAA,EAAE,CAAC,UAAU,CACT,EAAE,CAAC,YAAY,EACf,QAAQ,GAAG,QAAQ,GAAG,KAAK,EAC3B,KAAK,IAAI,EAAE,CAAC,WAAW,CAC1B,CAAC;QACF,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAK,CAAC,CAAC;AACtC,QAAA,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC3B,QAAA,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC3B,QAAA,OAAO,MAAM,CAAC;KACjB;AAED;;;;;;;AAOG;AACI,IAAA,oBAAoB,CAAC,MAAsB,EAAE,KAAiB,EAAE,SAAiB,CAAC,EAAA;AACrF,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;QAClB,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;QACvC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACjD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAK,CAAC,CAAC;AACtC,QAAA,OAAO,MAAM,CAAC;KACjB;AAED;;;;;;;;AAQG;AACI,IAAA,iBAAiB,CAAC,KAAiB,EAAE,QAAgB,EAAE,QAAgB,EAAE,KAAc,EAAA;AAC1F,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAClB,QAAA,IAAI,MAAM,GAAmB,EAAE,CAAC,YAAY,EAAoB,CAAC;QACjE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;AACvC,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,KAAK,EAAE,KAAK,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC;QAC/D,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAK,CAAC,CAAC;AACtC,QAAA,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC3B,QAAA,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC3B,QAAA,OAAO,MAAM,CAAC;KACjB;AAED;;;;;;AAMG;IACI,uBAAuB,CAAC,IAAY,EAAE,KAAc,EAAA;AACvD,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAClB,QAAA,IAAI,MAAM,GAAmB,EAAE,CAAC,YAAY,EAAoB,CAAC;QACjE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;AACvC,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,EAAE,KAAK,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC;QAC9D,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAK,CAAC,CAAC;AACtC,QAAA,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC;AACpB,QAAA,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;AACvB,QAAA,OAAO,MAAM,CAAC;KACjB;AAED;;;;;;;;AAQG;AACI,IAAA,wBAAwB,CAAC,KAAiB,EAAE,QAAgB,EAAE,QAAiB,EAAE,KAAc,EAAA;AAClG,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;AAClB,QAAA,IAAI,MAAM,GAAG,EAAE,CAAC,YAAY,EAAoB,CAAC;QACjD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;AAC/C,QAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,KAAK,EAAE,KAAK,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC;QACvE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAK,CAAC,CAAC;AAC9C,QAAA,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC3B,MAAM,CAAC,QAAQ,GAAG,QAAQ,IAAI,KAAK,CAAC,MAAM,CAAC;AAC3C,QAAA,OAAO,MAAM,CAAC;KACjB;AAED;;;;;AAKG;IACI,OAAO,CAAC,CAAS,EAAE,CAAS,EAAA;AAC/B,QAAA,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;AACvB,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;AAChD,YAAA,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;YAEjD,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YACxC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YAEzC,IAAI,CAAC,YAAY,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;AAE7C,YAAA,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACxD,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SAClD;KACJ;AAED,IAAA,IAAW,UAAU,GAAA;AACjB,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;KAClC;IAED,IAAW,UAAU,CAAC,EAAU,EAAA;AAC5B,QAAA,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;KACzD;AAED;;;;AAIG;IACI,QAAQ,GAAA;AACX,QAAA,OAAO,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC;KAC9C;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,OAAO,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;KAC/C;AAED;;;;AAIG;IACI,eAAe,GAAA;QAClB,OAAO,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC;KAC/E;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;AACpB,QAAA,OAAO,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;KAC3F;AAkCD;;;AAGG;IACI,UAAU,GAAA;AACb,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAG,CAAC;QAClB,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAClC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC;KACvD;AAED;;;AAGG;IACI,KAAK,GAAA;QACR,IAAI,CAAC,IAAI,CAAC,wBAAwB,IAAI,IAAI,CAAC,YAAY,EAAE;YACrD,IAAI,CAAC,uBAAuB,EAAE,CAAC;SAClC;KACJ;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,wBAAwB,EAAE;AAC/B,YAAA,MAAM,CAAC,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;AAC3D,YAAA,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC;SACrC;KACJ;IAEM,SAAS,GAAA;AACZ,QAAA,OAAO,CAAC,IAAI,CAAC,wBAAwB,CAAC;KACzC;AAED;;;AAGG;IACI,QAAQ,GAAA;AACX,QAAA,OAAO,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,KAAK,QAAQ,GAAG,KAAK,CAAC;KACtD;AAED;;;AAGG;IACO,uBAAuB,GAAA;QAC7B,IAAI,CAAC,wBAAwB,GAAG,MAAM,CAAC,qBAAqB,CAAC,MAAK;YAC9D,IAAI,CAAC,mBAAmB,EAAE,CAAC;AAC3B,YAAA,IAAI,CAAC,wBAAwB,IAAI,IAAI,CAAC,uBAAuB,EAAE,CAAC;AACpE,SAAC,CAAC,CAAC;KACN;AAED;;;;;AAKG;IACI,oBAAoB,CAAC,MAAoC,EAAE,OAA2C,EAAA;AAEzG,QAAA,IAAI,MAAM,CAAC;AACX,QAAA,IAAI,OAAO,CAAC;AAEZ,QAAA,IAAI,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE;YACxB,MAAM,GAAG,IAAI,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/B,YAAA,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAC/B,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,CAAE,CAAC;AACpD,YAAA,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;YACvB,OAAO,CAAC,OAAO,CAAC,CAAC;SACpB;AAAM,aAAA,IAAI,MAAM,IAAI,MAAM,CAAC,GAAG,EAAE;AAC7B,YAAA,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;YACtB,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,GAAG,CAAC,MAAM,GAAG,YAAA;AACT,gBAAA,OAAO,GAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAE,CAAC;AAC1C,gBAAA,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;gBACvB,OAAO,CAAC,OAAO,CAAC,CAAC;AACrB,aAAC,CAAC;AACF,YAAA,GAAG,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;SACxB;aAAM;YACH,MAAM,GAAG,IAAI,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/B,YAAA,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YAC5B,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,CAAE,CAAC;AACpD,YAAA,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;YACvB,OAAO,CAAC,OAAO,CAAC,CAAC;SACpB;KACJ;AAEM,IAAA,aAAa,CAAC,OAA2C,EAAA;AAC5D,QAAA,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;AAC7B,YAAA,IAAI,CAAC,EAAG,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;SACnC;KACJ;AAED;;AAEG;IACI,OAAO,GAAA;AAEV,QAAA,IAAI,CAAC,cAAc,EAAE,UAAU,EAAE,CAAC;AAClC,QAAA,IAAI,CAAC,oBAAoB,EAAE,UAAU,EAAE,CAAC;QAExC,IAAI,CAAC,IAAI,EAAE,CAAC;;;;AAKZ,QAAA,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;AACzB,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;SACzB;;;;AAKD,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QAEjB,IAAI,EAAE,EAAE;AACJ,YAAA,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,kBAAkC,CAAC,CAAC;AAC1D,YAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAE/B,YAAA,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,cAA8B,CAAC,CAAC;AACtD,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAE3B,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,KAAK,EAAE,CAAC;;;;YAKpC,IAAI,UAAU,GAAG,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC;AACxD,YAAA,IAAI,GAAG,GAAG,EAAE,CAAC,YAAY,EAAE,CAAC;YAC5B,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;AACpC,YAAA,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,UAAU,EAAE,EAAE,EAAE,EAAE;AACpC,gBAAA,EAAE,CAAC,wBAAwB,CAAC,EAAE,CAAC,CAAC;AAChC,gBAAA,EAAE,CAAC,mBAAmB,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACrD,gBAAA,EAAE,CAAC,cAAc,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;aAC5B;AACD,YAAA,EAAE,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;;;;YAKrB,IAAI,eAAe,GAAG,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,uBAAuB,CAAC,CAAC;AAClE,YAAA,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,eAAe,EAAE,EAAE,EAAE,EAAE;gBACzC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC,CAAC;gBACnC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAK,CAAC,CAAC;gBAC3C,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAK,CAAC,CAAC;aACxC;;;;AAKD,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAC9B,YAAA,EAAE,CAAC,UAAU,CAAC,IAAK,CAAC,CAAC;YACrB,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAK,CAAC,CAAC;YACtC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAK,CAAC,CAAC;YAC9C,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAK,CAAC,CAAC;YAC1C,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,YAAY,EAAE,IAAK,CAAC,CAAC;AAC5C,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AACrB,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;AACzB,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAC1B,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;AACtB,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC;YAC5B,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC1B,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;YAC9B,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;YAC9B,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC1B,YAAA,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACjB,YAAA,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;SACvB;;;;AAKD,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;gBACxB,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACnD;AACD,YAAA,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC;AACtB,YAAA,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;AACvB,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACtB;AAED,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;AAEf,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;KAC7B;AAEM,IAAA,QAAQ,CAAC,KAAY,EAAA;AACxB,QAAA,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;AAClB,YAAA,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;AACvB,YAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC5B;KACJ;AAEM,IAAA,SAAS,CAAC,QAAiB,EAAA;AAC9B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9B;KACJ;AAEM,IAAA,WAAW,CAAC,KAAY,EAAA;AAC3B,QAAA,IAAI,KAAK,CAAC,SAAS,EAAE;AACjB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACrB,YAAA,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YACjB,OAAO,CAAC,EAAE,EAAE;gBACR,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AACrB,oBAAA,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;AACvB,oBAAA,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBACf,MAAM;iBACT;aACJ;SACJ;KACJ;AAmCJ;;ACx4CD;;;;;AAKG;AACG,MAAO,WAAY,SAAQ,eAAe,CAAA;IAS5C,WAAY,CAAA,OAAgB,EAAE,OAAA,GAA8B,EAAE,EAAA;AAE1D,QAAA,KAAK,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AAExB,QAAA,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC,WAAW,EAAE,GAAG,OAAO,CAAC;AAE/F,QAAA,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,IAAI,SAAS,GAAG,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;AAE1D,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QAEnB,IAAI,CAAC,aAAa,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC9C;IAEe,OAAO,GAAA;AACnB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;AAEzB,QAAA,IAAI,CAAC,EAAE;YAAE,OAAO;AAEhB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,EAAE,CAAC,kBAAkB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;SAChD;QACD,IAAI,CAAC,aAAa,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAE3C,QAAA,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChC,QAAA,EAAE,CAAC,kBAAkB,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;AAE/C,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAEjB,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;KACxB;AAED;;;AAGG;IACa,IAAI,GAAA;AAChB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;AAEzB,QAAA,IAAI,CAAC,EAAE;YAAE,OAAO;QAEhB,IAAI,CAAC,SAAS,GAAI,EAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAE3C,QAAA,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,iBAAiB,EAAE,CAAC;QAEnC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAE9C,IAAI,gBAAgB,GAAG,EAAE,CAAC;AAC1B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChD,YAAA,IAAI,EAAE,GAAG,EAAE,CAAC,kBAAkB,EAAE,CAAC;YACjC,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;AAEzC,YAAA,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;gBAChB,EAAE,CAAC,8BAA8B,CAC7B,EAAE,CAAC,YAAY,EACf,IAAI,CAAC,KAAK,EACT,EAAU,CAAC,IAAI,CAAC,eAAe,CAAC,EACjC,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,CACf,CAAC;aACL;iBAAM;gBACH,EAAE,CAAC,mBAAmB,CAClB,EAAE,CAAC,YAAY,EACd,EAAU,CAAC,IAAI,CAAC,eAAe,CAAC,EACjC,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,CACf,CAAC;aACL;AAED,YAAA,EAAE,CAAC,uBAAuB,CACtB,EAAE,CAAC,WAAW,EACd,EAAE,CAAC,iBAAiB,GAAG,CAAC,EACxB,EAAE,CAAC,YAAY,EACf,EAAE,CACL,CAAC;YACF,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,iBAAiB,GAAG,CAAC,CAAC,CAAC;AAChD,YAAA,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,EAAG,CAAC;YAC5B,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,YAAY,EAAE,IAAK,CAAC,CAAC;SAC/C;AACD,QAAA,EAAE,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;AAEjC,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAChB,YAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC,kBAAkB,EAAE,CAAC;YAClD,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;YAC9D,EAAE,CAAC,8BAA8B,CAC7B,EAAE,CAAC,YAAY,EACf,IAAI,CAAC,KAAK,EACT,EAAU,CAAC,IAAI,CAAC,eAAe,CAAC,EACjC,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,CACf,CAAC;AACF,YAAA,EAAE,CAAC,uBAAuB,CACtB,EAAE,CAAC,WAAW,EACd,EAAE,CAAC,gBAAgB,EACnB,EAAE,CAAC,YAAY,EACf,IAAI,CAAC,kBAAkB,CAC1B,CAAC;YACF,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;SAC9C;QAED,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;KAC5C;AAEM,IAAA,MAAM,CAAC,WAA4B,EAAE,eAAA,GAA0B,CAAC,EAAA;AACnE,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;QAE1B,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACnD,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,gBAAgB,EAAE,WAAW,CAAC,IAAI,CAAC,CAAC;QAC1D,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,GAAG,eAAe,CAAC,CAAC;AAEtD,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAEpD,QAAA,EAAE,CAAC,eAAe,CACd,CAAC,EACD,CAAC,EACD,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,EACZ,CAAC,EACD,CAAC,EACD,WAAW,CAAC,MAAM,EAClB,WAAW,CAAC,OAAO,EACnB,EAAE,CAAC,gBAAgB,EACnB,IAAI,CAAC,SAAS,CACjB,CAAC;QAEF,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACzC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;QAC9C,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;KACjD;AACJ;;;;;;;;;;;ACpJD,MAAM,YAAY,GAAG,GAAG,CAAC;AAQzB,MAAM,eAAe,GAAG,UAAU,CAAmB,EAAE,CAAmB,EAAA;IACtE,OAAO,MAAM,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;AAC3C,CAAC,CAAC;AAEF,MAAM,eAAe,CAAA;AAUjB,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;AAChC,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;AAChC,QAAA,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;AAClC,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAC7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,QAAQ,CAAC,SAAS,GAAG,CAAC,KAAoB,KAAI;AAC1C,YAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,YAAA,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;AACzC,SAAC,CAAC;AAEF,QAAA,QAAQ,CAAC,OAAO,GAAG,CAAC,KAAoB,KAAI;AACxC,YAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,YAAA,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;AACvC,SAAC,CAAC;KACL;IAEM,uBAAuB,GAAA;QAC1B,OAAO,IAAI,CAAC,qBAAqB,CAAC;KACrC;IAEM,uBAAuB,GAAA;QAC1B,OAAO,IAAI,CAAC,qBAAqB,CAAC;KACrC;IAEM,yBAAyB,GAAA;QAC5B,OAAO,IAAI,CAAC,uBAAuB,CAAC;KACvC;IAEM,oBAAoB,GAAA;QACvB,OAAO,IAAI,CAAC,kBAAkB,CAAC;KAClC;AAEM,IAAA,WAAW,CAAC,KAAa,EAAE,OAAe,EAAE,QAAuB,EAAA;AACtE,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,EAAG,QAA+B,CAAC,cAAe,CAAC,CAAC;QAC1F,IAAK,QAA+B,CAAC,cAAc,IAAI,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE;;AAEzE,YAAA,OAAO,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;AAE5B,YAAA,IAAI,KAAK,KAAK,UAAU,EAAE;AACtB,gBAAA,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,EAAE,QAAQ,CAAC,CAAC;aACvE;AAAM,iBAAA,IAAI,KAAK,KAAK,SAAS,EAAE;AAC5B,gBAAA,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,EAAE,QAAQ,CAAC,CAAC;aACzE;AAAM,iBAAA,IAAI,KAAK,KAAK,cAAc,EAAE;AACjC,gBAAA,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,EAAE,QAAQ,CAAC,CAAC;aACpE;SACJ;KACJ;IAES,eAAe,CAAC,QAA4B,EAAE,QAA4B,EAAA;AAChF,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACtC,YAAA,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,KAAK,QAAQ,CAAC,cAAc,EAAE;AACjE,gBAAA,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACzB;SACJ;KACJ;AAES,IAAA,SAAS,CAAC,IAAY,EAAE,OAAe,EAAE,IAAY,EAAA;QAC3D,OAAO,CAAA,EAAG,IAAI,CAAA,EAAG,YAAY,CAAA,EAAG,OAAO,CAAA,EAAG,YAAY,CAAA,EAAG,IAAI,CAAA,CAAE,CAAC;KACnE;AAES,IAAA,MAAM,CAAC,IAAY,EAAE,OAAe,EAAE,GAAQ,EAAA;AACpD,QAAA,MAAM,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;AACxB,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE;AACvB,YAAA,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;AAC5B,YAAA,OAAO,IAAI,CAAC;SACf;AACD,QAAA,OAAO,KAAK,CAAC;KAChB;AAEM,IAAA,WAAW,CAAC,QAAiB,EAAA;AAChC,QAAA,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;KAC3B;IAEM,WAAW,GAAA;AACd,QAAA,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;KACnC;IAEM,QAAQ,CAAC,KAAa,EAAE,OAAe,EAAE,QAAuB,EAAE,MAAY,EAAE,QAAiB,EAAA;;QAGpG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,CAAC;YAAE,OAAO;AAEnD,QAAA,IAAI,QAAQ,KAAK,SAAS,EAAE;YACxB,QAAQ,GAAG,IAAI,CAAC;SACnB;QACD,QAAQ,KAAK;AACT,YAAA,KAAK,SAAS;gBACV,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,EAAE;AACxC,oBAAA,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;iBAC9C;gBACD,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAC,CAAC,CAAC;gBACrG,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBAC5D,MAAM;AAEV,YAAA,KAAK,UAAU;AACX,gBAAA,IAAI,OAAO,IAAI,IAAI,EAAE;AACjB,oBAAA,IAAI,CAAC,eAAe,GAAG,EAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,IAAI,IAAI,EAAC,CAAC;iBACvE;qBAAM;oBACH,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,EAAE;AACtC,wBAAA,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;qBAC5C;oBACD,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAC,CAAC,CAAC;oBACnG,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;iBAC7D;gBACD,MAAM;AAEV,YAAA,KAAK,cAAc;gBACf,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,EAAE;AACnC,oBAAA,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;iBACzC;gBACD,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAC,CAAC,CAAC;gBAChG,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBACvD,MAAM;SACb;KACJ;AAEM,IAAA,YAAY,CAAC,OAAe,EAAA;AAC/B,QAAA,OAAO,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;KAC9C;IAEM,aAAa,GAAA;;;QAGhB,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACrG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;AACxD,QAAA,KAAK,IAAI,EAAE,IAAI,IAAI,CAAC,kBAAkB,EAAE;YACpC,IAAI,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,KAAK,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE;gBAC/E,IAAI,GAAG,GAAG,IAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;AACtC,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChC,oBAAA,GAAG,CAAC,CAAC,CAAC,CAAC,QAAqB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;iBAClE;aACJ;SACJ;QAED,IAAI,IAAI,CAAC,MAAO,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,MAAO,CAAC,OAAO,IAAI,KAAK,CAAC,SAAS,EAAE;AAClF,YAAA,IAAI,CAAC,MAAO,CAAC,cAAc,EAAE,CAAC;SACjC;KACJ;IAEM,WAAW,GAAA;QACd,IAAI,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,MAAO,CAAC,OAAO,KAAK,KAAK,CAAC,eAAe,EAAE;AACpG,YAAA,KAAK,IAAI,EAAE,IAAI,IAAI,CAAC,uBAAuB,EAAE;gBACzC,IAAI,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,MAAO,CAAC,OAAO,KAAK,KAAK,CAAC,eAAe,IAAI,MAAM,CAAC,EAAE,CAAC,KAAK,KAAK,CAAC,eAAe,EAAE;oBAC1H,IAAI,GAAG,GAAG,IAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC,CAAC;AAC3C,oBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChC,wBAAA,GAAG,CAAC,CAAC,CAAC,CAAC,QAAqB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;qBAClE;iBACJ;aACJ;SACJ;QACD,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;KAC5D;IAEM,YAAY,GAAA;AACf,QAAA,KAAK,IAAI,EAAE,IAAI,IAAI,CAAC,qBAAqB,EAAE;AACvC,YAAA,IAAI,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,EAAE;gBAChC,IAAI,GAAG,GAAG,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;AACzC,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChC,oBAAA,GAAG,CAAC,CAAC,CAAC,CAAC,QAAqB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;iBAClE;aACJ;SACJ;KACJ;AACJ;;ACzLD,MAAM,YAAY,CAAA;AAId,IAAA,WAAA,CAAY,UAAuB,EAAA;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;KACjC;AAEM,IAAA,QAAQ,CAAC,KAAa,EAAE,MAAW,EAAE,QAAmC,EAAA;QAC3E,QAAQ,KAAK;AACT,YAAA,KAAK,YAAY;;;;;;;;;gBAUb,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,KAAoB,EAAA;AACrE,oBAAA,IAAI,KAAK,GAAG,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,UAAU,IAAI,CAAC,CAAC;AAElE,oBAAA,IAAI,KAAK,CAAC,UAAU,IAAI,SAAS,EAAE;wBAC/B,KAAK,CAAC,UAAU,GAAG,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC;qBACrC;AACD,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;oBAC7B,KAAK,CAAC,cAAc,EAAE,CAAC;iBAC1B,EAAE,KAAK,CAAC,CAAC;gBACV,MAAM;AAEV,YAAA,KAAK,WAAW;gBACZ,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAU,KAAoB,EAAA;AACzE,oBAAA,IAAI,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;AACxC,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE;wBACzB,MAAM,EAAE,KAAK,CAAC,MAAM;AACpB,wBAAA,OAAO,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI;AAClC,wBAAA,OAAO,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG;AACpC,qBAAA,CAAC,CAAC;AACP,iBAAC,CAAC,CAAC;gBACH,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,aAAa,EAAE,UAAU,KAAoB,EAAA;oBAC3E,KAAK,CAAC,cAAc,EAAE,CAAC;AACvB,oBAAA,OAAO,KAAK,CAAC;AACjB,iBAAC,CAAC,CAAC;gBACH,MAAM;AAEV,YAAA,KAAK,SAAS;gBACV,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAU,KAAoB,EAAA;AACvE,oBAAA,IAAI,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;AACxC,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE;wBACzB,MAAM,EAAE,KAAK,CAAC,MAAM;AACpB,wBAAA,OAAO,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI;AAClC,wBAAA,OAAO,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG;AACpC,qBAAA,CAAC,CAAC;AACP,iBAAC,CAAC,CAAC;gBACH,MAAM;AAEV,YAAA,KAAK,WAAW;gBACZ,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAU,KAAoB,EAAA;AACzE,oBAAA,IAAI,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;AACxC,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE;AACzB,wBAAA,OAAO,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI;AAClC,wBAAA,OAAO,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG;AACpC,qBAAA,CAAC,CAAC;AACP,iBAAC,CAAC,CAAC;gBACH,MAAM;AAEV,YAAA,KAAK,YAAY;gBACb,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,YAAY,EAAE,UAAU,KAAoB,EAAA;AAC1E,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AACjC,iBAAC,CAAC,CAAC;gBACH,MAAM;AAEV,YAAA,KAAK,UAAU;gBACX,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,UAAU,EAAE,UAAU,KAAoB,EAAA;AACxE,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AACjC,iBAAC,CAAC,CAAC;gBACH,MAAM;AAEV,YAAA,KAAK,WAAW;gBACZ,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAU,KAAoB,EAAA;AACzE,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AACjC,iBAAC,CAAC,CAAC;gBACH,MAAM;AAEV,YAAA,KAAK,YAAY;gBACb,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,YAAY,EAAE,UAAU,KAAoB,EAAA;AAC1E,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AACjC,iBAAC,CAAC,CAAC;gBACH,MAAM;SACb;KACJ;AACJ;;ACnGD,MAAM,YAAY,CAAA;AAId,IAAA,WAAA,CAAY,UAAuB,EAAA;AAC/B,QAAA,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;KACjC;AAEM,IAAA,QAAQ,CAAC,KAAa,EAAE,MAAW,EAAE,QAAmC,EAAA;QAC3E,QAAQ,KAAK;AACT,YAAA,KAAK,aAAa;gBACd,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,aAAa,EAAE,UAAU,KAAiB,EAAA;oBACxE,KAAK,CAAC,cAAc,EAAE,CAAC;AACvB,oBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;oBAC1C,MAAM,QAAQ,GAAkB,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;AACrG,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AACpC,iBAAC,CAAC,CAAC;gBACH,MAAM;AAEV,YAAA,KAAK,YAAY;gBACb,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,YAAY,EAAE,UAAU,KAAiB,EAAA;oBACvE,KAAK,CAAC,cAAc,EAAE,CAAC;AACvB,oBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;oBAC1C,MAAM,QAAQ,GAAkB,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;AACrG,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AACpC,iBAAC,CAAC,CAAC;gBACH,MAAM;AAEV,YAAA,KAAK,UAAU;gBACX,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,UAAU,EAAE,UAAU,KAAiB,EAAA;oBACrE,KAAK,CAAC,cAAc,EAAE,CAAC;AACvB,oBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;oBAC1C,MAAM,QAAQ,GAAkB,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;AACrG,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AACpC,iBAAC,CAAC,CAAC;gBACH,MAAM;AAEV,YAAA,KAAK,WAAW;gBACZ,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAU,KAAiB,EAAA;oBACtE,KAAK,CAAC,cAAc,EAAE,CAAC;AACvB,oBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;oBAC1C,MAAM,QAAQ,GAAkB,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;AACrG,oBAAA,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AACpC,iBAAC,CAAC,CAAC;gBACH,MAAM;SACb;KACJ;AACJ;;ACvCK,SAAU,oBAAoB,CAAC,QAAkB,EAAA;AACnD,IAAA,OAAO,IAAI,cAAc,CAAC,QAAQ,CAAC,CAAC;AACxC,CAAC;AA8HD,MAAM,IAAI,GAAG,MAAM,CAAC;AACpB,MAAM,IAAI,GAAG,MAAM,CAAC;AACpB,MAAM,IAAI,GAAG,MAAM,CAAC;AAEpB,MAAM,OAAO,GAAG,CAAC,CAA4B,KAAc,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnF,MAAM,QAAQ,GAAG,CAAC,CAA4B,KAAc,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAErF;;;AAGG;AACH,IAAI,iBAAiB,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;AAC1C,IAAI,qBAAqB,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;AAE9C;;;AAGG;AACH,IAAI,iBAAiB,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;AAE1C;;;;AAIG;AACH,MAAM,cAAe,SAAQ,MAA0B,CAAA;AAmEnD,IAAA,WAAA,CAAY,QAAkB,EAAA;QAE1B,KAAK,CAAC,eAAe,CAAC,CAAC;AAEvB,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAEzB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,CAAC;AAEhE,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAO,CAAC,CAAC;AAEhE,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,eAAe,EAAE,CAAC;AAE9C,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAEtB,IAAI,CAAC,UAAU,GAAG;AACd,YAAA,OAAO,EAAE,CAAC;AACV,YAAA,OAAO,EAAE,CAAC;YACV,GAAG,EAAE,IAAI,IAAI,EAAE;AACf,YAAA,CAAC,EAAE,CAAC;AACJ,YAAA,CAAC,EAAE,CAAC;AACJ,YAAA,EAAE,EAAE,CAAC;AACL,YAAA,EAAE,EAAE,CAAC;AACL,YAAA,MAAM,EAAE,CAAC;AACT,YAAA,MAAM,EAAE,CAAC;YACT,SAAS,EAAE,IAAI,IAAI,EAAE;AACrB,YAAA,YAAY,EAAE,KAAK;AACnB,YAAA,aAAa,EAAE,KAAK;AACpB,YAAA,cAAc,EAAE,KAAK;AACrB,YAAA,cAAc,EAAE,KAAK;AACrB,YAAA,eAAe,EAAE,KAAK;AACtB,YAAA,gBAAgB,EAAE,KAAK;AACvB,YAAA,cAAc,EAAE,KAAK;AACrB,YAAA,eAAe,EAAE,KAAK;AACtB,YAAA,gBAAgB,EAAE,KAAK;AACvB,YAAA,qBAAqB,EAAE,KAAK;AAC5B,YAAA,sBAAsB,EAAE,KAAK;AAC7B,YAAA,uBAAuB,EAAE,KAAK;AAC9B,YAAA,eAAe,EAAE,KAAK;AACtB,YAAA,gBAAgB,EAAE,KAAK;AACvB,YAAA,iBAAiB,EAAE,KAAK;AACxB,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,WAAW,EAAE,KAAK;AAClB,YAAA,gBAAgB,EAAE,GAAG;AACrB,YAAA,UAAU,EAAE,GAAG;AACf,YAAA,UAAU,EAAE,CAAC;AACb,YAAA,GAAG,EAAE,IAAI;AACT,YAAA,aAAa,EAAE,IAAI;AACnB,YAAA,QAAQ,EAAE,QAAQ;SACrB,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG;AACd,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,QAAQ,EAAE,KAAK;AACf,YAAA,UAAU,EAAE,KAAK;AACjB,YAAA,WAAW,EAAE,KAAK;AAClB,YAAA,WAAW,EAAE,KAAK;AAClB,YAAA,gBAAgB,EAAE,GAAG;AACrB,YAAA,iBAAiB,EAAE,EAAE;AACrB,YAAA,OAAO,EAAE,CAAC;AACV,YAAA,OAAO,EAAE,CAAC;YACV,GAAG,EAAE,IAAI,IAAI,EAAE;AACf,YAAA,CAAC,EAAE,CAAC;AACJ,YAAA,CAAC,EAAE,CAAC;AACJ,YAAA,EAAE,EAAE,CAAC;AACL,YAAA,EAAE,EAAE,CAAC;AACL,YAAA,MAAM,EAAE,CAAC;AACT,YAAA,MAAM,EAAE,CAAC;YACT,SAAS,EAAE,IAAI,IAAI,EAAE;AACrB,YAAA,GAAG,EAAE,IAAI;AACT,YAAA,aAAa,EAAE,IAAI;AACnB,YAAA,QAAQ,EAAE,QAAQ;SACrB,CAAC;AAEF,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAC5B,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;AAEvC,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,IAAI,EAAE,CAAC;AAChC,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAC5B,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;AACvB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;AACrB,QAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;AACrB,QAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;AACrB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;KACrB;IAEM,YAAY,GAAA;QACf,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,EACpB,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;QACzB,QACI,EAAE,CAAC,MAAM;AACT,YAAA,EAAE,CAAC,WAAW;AACd,YAAA,EAAE,CAAC,MAAM;AACT,YAAA,EAAE,CAAC,UAAU;AACb,YAAA,EAAE,CAAC,QAAQ;AACX,YAAA,EAAE,CAAC,UAAU,KAAK,CAAC,EACtB;KACJ;AAED,IAAA,IAAW,MAAM,GAAA;QACb,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;IAED,IAAW,MAAM,CAAC,QAAiB,EAAA;AAC/B,QAAA,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;AACxB,QAAA,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;KAC/C;AAED;;;AAGG;IACI,YAAY,GAAA;AACf,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAa,CAAC,SAAS,CAC7D,IAAI,CAAC,UAAU,CAAC,CAAC,EACjB,IAAI,CAAC,UAAU,CAAC,CAAC,CACpB,CAAC;;;;YAIF,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAa,CAAC,SAAS,CAC7D,IAAI,CAAC,UAAU,CAAC,CAAC,EACjB,IAAI,CAAC,UAAU,CAAC,CAAC,CACpB,CAAC;AAEF,YAAA,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;YACrC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC9B;KACJ;IAEe,EAAE,CAAC,IAAY,EAAE,EAA0B,EAAE,EAA2B,EAAE,EAAQ,EAAE,WAAoB,EAAA;AACpH,QAAA,IAAI,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,cAAc,IAAI,IAAI,KAAK,SAAS,EAAE;AACtE,YAAA,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAY,EAAE,EAAmB,EAAE,EAAE,EAAE,WAAW,CAAC,CAAC;SAC5F;aAAM;YACH,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,EAAmB,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;SAC/C;KACJ;AAEe,IAAA,GAAG,CAAC,IAAY,EAAE,EAAkC,EAAE,EAAkB,EAAA;AACpF,QAAA,IAAI,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,cAAc,IAAI,IAAI,KAAK,SAAS,EAAE;YACtE,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,IAAI,EAAE,EAAY,EAAE,EAAmB,CAAC,CAAC;SAC9E;aAAM;AACH,YAAA,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,EAAmB,CAAC,CAAC;SACxC;KACJ;AAED;;;;;AAKG;AACI,IAAA,YAAY,CAAC,OAAe,EAAA;QAC/B,OAAO,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;KACtD;IAEM,WAAW,GAAA;AACd,QAAA,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC;KACvC;AAED;;;AAGG;IACI,UAAU,GAAA;AACb,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AAC7D,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AACjE,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AACjE,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AACnE,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AACnE,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AAEnE,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;AACnE,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAC/D,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;AACrE,QAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;KACpE;AAED;;AAEG;AACO,IAAA,YAAY,CAAC,KAAoB,EAAA;AACvC,QAAA,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,KAAK,CAAC,UAAU,IAAI,CAAC,CAAC;KACtD;AAEM,IAAA,mBAAmB,CAAC,OAAe,EAAA;AACtC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,IAAI,KAAK,EAAE,CAAC,cAAc,EAAE;AACvC,YAAA,EAAE,CAAC,cAAc,GAAG,IAAI,CAAC;SAC5B;aAAM;AACH,YAAA,EAAE,CAAC,cAAc,GAAG,KAAK,CAAC;AAC1B,YAAA,EAAE,CAAC,cAAc,GAAG,KAAK,CAAC;SAC7B;QAED,IAAI,CAAC,OAAO,GAAG,IAAI,KAAK,EAAE,CAAC,eAAe,EAAE;AACxC,YAAA,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC;SAC7B;aAAM;AACH,YAAA,EAAE,CAAC,eAAe,GAAG,KAAK,CAAC;AAC3B,YAAA,EAAE,CAAC,eAAe,GAAG,KAAK,CAAC;SAC9B;QAED,IAAI,CAAC,OAAO,GAAG,IAAI,KAAK,EAAE,CAAC,gBAAgB,EAAE;AACzC,YAAA,EAAE,CAAC,gBAAgB,GAAG,IAAI,CAAC;SAC9B;aAAM;AACH,YAAA,EAAE,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAC5B,YAAA,EAAE,CAAC,gBAAgB,GAAG,KAAK,CAAC;SAC/B;KACJ;IAES,WAAW,CAAC,GAAe,EAAE,KAAyB,EAAA;AAE5D,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;AACzB,QAAA,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACtC,QAAA,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC;AAEb,QAAA,IAAI,EAAE,GAAG,KAAM,CAAC,OAAO,EACnB,EAAE,GAAG,KAAM,CAAC,OAAO,EACnB,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;QAEzB,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE;AACxE,YAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,YAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;SACxB;QAED,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE;AACxE,YAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,YAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;SACxB;QAED,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE;AACxE,YAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,YAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;SACxB;AAED,QAAA,IAAI,EAAE,CAAC,OAAO,KAAK,KAAM,CAAC,OAAO,IAAI,EAAE,CAAC,OAAO,KAAK,KAAM,CAAC,OAAO,EAAE;YAChE,OAAO;SACV;AAED,QAAA,EAAE,CAAC,OAAO,GAAG,KAAM,CAAC,OAAO,CAAC;AAC5B,QAAA,EAAE,CAAC,OAAO,GAAG,KAAM,CAAC,OAAO,CAAC;AAE5B,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;AAE9B,QAAA,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,KAAM,CAAC,OAAO,GAAG,CAAC,CAAC,UAAU,CAAC;AAChD,QAAA,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,KAAM,CAAC,OAAO,GAAG,CAAC,CAAC,UAAU,CAAC;AAEhD,QAAA,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAO,CAAC,KAAK,CAAC;AAC/B,QAAA,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAO,CAAC,MAAM,CAAC;AAEhC,QAAA,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC;;AAGjB,QAAA,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;AACpC,QAAA,IAAI,CAAC,gBAAgB,GAAG,UAAU,CAAC,YAAA;AAC/B,YAAA,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC;SACzB,EAAE,GAAG,CAAC,CAAC;KACX;AAES,IAAA,YAAY,CAAC,GAAe,EAAA;AAClC,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAC5B,QAAA,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,CAAC;QAC1B,IAAI,CAAC,QAAQ,CAAE,IAA8B,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KAC9E;AAES,IAAA,YAAY,CAAC,GAAe,EAAA;AAClC,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,CAAC;QAC1B,IAAI,CAAC,QAAQ,CAAE,IAA8B,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KAC9E;IAES,WAAW,CAAC,GAAe,EAAE,KAAyB,EAAA;QAC5D,IAAI,KAAM,CAAC,MAAM,KAAK,KAAK,CAAC,OAAO,EAAE;YACjC,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;AAC5C,YAAA,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC;AAC/B,YAAA,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC;AAC/B,YAAA,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,CAAC;AAC1B,YAAA,IAAI,CAAC,UAAU,CAAC,cAAc,GAAG,IAAI,CAAC;SACzC;aAAM,IAAI,KAAM,CAAC,MAAM,KAAK,KAAK,CAAC,QAAQ,EAAE;YACzC,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;AAC5C,YAAA,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC;AAC/B,YAAA,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC;AAC/B,YAAA,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,CAAC;AAC1B,YAAA,IAAI,CAAC,UAAU,CAAC,eAAe,GAAG,IAAI,CAAC;SAC1C;aAAM,IAAI,KAAM,CAAC,MAAM,KAAK,KAAK,CAAC,SAAS,EAAE;YAC1C,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;AAC5C,YAAA,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC;AAC/B,YAAA,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC;AAC/B,YAAA,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,CAAC;AAC1B,YAAA,IAAI,CAAC,UAAU,CAAC,gBAAgB,GAAG,IAAI,CAAC;SAC3C;KACJ;IAES,SAAS,CAAC,GAAe,EAAE,KAAyB,EAAA;AAC1D,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;AACzB,QAAA,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC;QACb,IAAI,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;QAEjC,IAAI,KAAM,CAAC,MAAM,KAAK,KAAK,CAAC,OAAO,EAAE;AACjC,YAAA,EAAE,CAAC,cAAc,GAAG,KAAK,CAAC;AAC1B,YAAA,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC;AAEvB,YAAA,IACI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW;AAC3D,gBAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW;gBAC3D,CAAC,GAAG,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC,UAAU,EACvC;AACE,gBAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,oBAAA,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC;AAC/D,oBAAA,IAAI,SAAS,IAAI,EAAE,CAAC,gBAAgB,EAAE;AAClC,wBAAA,EAAE,CAAC,qBAAqB,GAAG,IAAI,CAAC;qBACnC;AACD,oBAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;iBAC3B;qBAAM;oBACH,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;iBAClD;AAED,gBAAA,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC;AAC1B,gBAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;aACxB;SACJ;aAAM,IAAI,KAAM,CAAC,MAAM,KAAK,KAAK,CAAC,QAAQ,EAAE;AACzC,YAAA,EAAE,CAAC,eAAe,GAAG,KAAK,CAAC;AAC3B,YAAA,EAAE,CAAC,aAAa,GAAG,IAAI,CAAC;AAExB,YAAA,IACI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW;AAC3D,gBAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW;gBAC3D,CAAC,GAAG,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC,UAAU,EACvC;AACE,gBAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,oBAAA,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC;AAC/D,oBAAA,IAAI,SAAS,IAAI,EAAE,CAAC,gBAAgB,EAAE;AAClC,wBAAA,EAAE,CAAC,sBAAsB,GAAG,IAAI,CAAC;qBACpC;AACD,oBAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;iBAC3B;qBAAM;oBACH,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;iBAClD;AAED,gBAAA,EAAE,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC3B,gBAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;aACxB;SACJ;aAAM,IAAI,KAAM,CAAC,MAAM,KAAK,KAAK,CAAC,SAAS,EAAE;AAC1C,YAAA,EAAE,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAC5B,YAAA,EAAE,CAAC,cAAc,GAAG,IAAI,CAAC;AAEzB,YAAA,IACI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW;AAC3D,gBAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW;gBAC3D,CAAC,GAAG,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC,UAAU,EACvC;AACE,gBAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,oBAAA,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC;AAC/D,oBAAA,IAAI,SAAS,IAAI,EAAE,CAAC,gBAAgB,EAAE;AAClC,wBAAA,EAAE,CAAC,uBAAuB,GAAG,IAAI,CAAC;qBACrC;AACD,oBAAA,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;iBAC3B;qBAAM;oBACH,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;iBAClD;AAED,gBAAA,EAAE,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAC5B,gBAAA,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;aACxB;SACJ;KACJ;AAES,IAAA,YAAY,CAAC,KAAoB,EAAA;AACvC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;AACzB,QAAA,EAAE,CAAC,GAAG,GAAG,KAAK,CAAC;AAEf,QAAA,EAAE,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,KAAK,CAAC,UAAU,CAAC;AAC/D,QAAA,EAAE,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC;AAE9D,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;AAE9B,QAAA,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,UAAU,CAAC;AAC5C,QAAA,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,UAAU,CAAC;AAE5C,QAAA,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAO,CAAC,KAAK,CAAC;AAC/B,QAAA,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAO,CAAC,MAAM,CAAC;AAChC,QAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACjB,QAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACjB,QAAA,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC;QAErB,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5B,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AAC5B,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC9B;aAAM;AACH,YAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;SAC/B;KACJ;AAED;;AAEG;AACO,IAAA,UAAU,CAAC,KAAoB,EAAA;AACrC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;AACzB,QAAA,EAAE,CAAC,GAAG,GAAG,KAAK,CAAC;AACf,QAAA,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC;QAEnB,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AAC5B,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACjB,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AAEjB,YAAA,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,gBAAA,IAAI,IAAI,CAAC,aAAa,EAAE;AACpB,oBAAA,IAAI,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC;AAC9D,oBAAA,IAAI,SAAS,IAAI,EAAE,CAAC,gBAAgB,EAAE;AAClC,wBAAA,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC;qBACzB;AACD,oBAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;iBAC1B;gBACD,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;AAC9C,gBAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;aAC/B;SACJ;KACJ;AAES,IAAA,aAAa,CAAC,KAAoB,EAAA;AACxC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;AACzB,QAAA,EAAE,CAAC,GAAG,GAAG,KAAK,CAAC;AACf,QAAA,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC;KACzB;AAES,IAAA,WAAW,CAAC,KAAoB,EAAA;AACtC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;AAEzB,QAAA,EAAE,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,KAAK,CAAC,UAAU,CAAC;AAC/D,QAAA,EAAE,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC;AAE9D,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;QAE9B,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,UAAU,CAAC;QACjC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,UAAU,CAAC;AAEjC,QAAA,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAO,CAAC,KAAK,CAAC;AAC/B,QAAA,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAO,CAAC,MAAM,CAAC;AAEhC,QAAA,EAAE,CAAC,GAAG,GAAG,KAAK,CAAC;AACf,QAAA,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC;QAEjB,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,CAAA;QACzB,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,CAAA;AACzB,QAAA,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE;AACtC,YAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;AACvB,YAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;SAC/B;KACJ;IAES,mBAAmB,GAAA;QACzB,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,EACpB,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;;QAGzB,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,0BAA0B,EAAE;AACzD,YAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC,cAAc,CAAC;AACtD,YAAA,IAAI,CAAC,IAAI,CAAC,0BAA0B,EAAE;AAClC,gBAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;gBACtB,IAAI,CAAC,GAAG,iBAAiB,CAAC;gBAC1B,IAAI,EAAE,GAAG,CAAC,CAAC,mBAAmB,CAAM,CAAC,CAAC,CAAC;gBACvC,IAAI,EAAE,EAAE;AACJ,oBAAA,IAAI,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;AAC3B,oBAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;oBACtB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;AACrC,oBAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;oBACtB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;iBACxC;AACD,gBAAA,iBAAiB,CAAC,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC;AACrF,oBAAA,iBAAiB,CAAC,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC;wBACrF,qBAAqB,CAAC,CAAC,CAAC,GAAG,qBAAqB,CAAC,CAAC,CAAC,GAAG,qBAAqB,CAAC,CAAC,CAAC,GAAG,qBAAqB,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;aAC3H;SACJ;AAED,QAAA,IAAI,IAAI,CAAC,cAAc,IAAI,EAAE,EAAE,CAAC,cAAc,IAAI,EAAE,CAAC,eAAe,IAAI,EAAE,CAAC,gBAAgB,CAAC,EAAE;AAE1F,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;YACtB,IAAI,CAAC,GAAG,iBAAiB,EACrB,CAAC,GAAG,iBAAiB,EACrB,CAAC,GAAG,qBAAqB,CAAC;YAE9B,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;AACd,gBAAA,CAAC,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;aAC3C;iBAAM;AACH,gBAAA,CAAC,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;aAC3C;YAED,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACZ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACZ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAEZ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACZ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACZ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAEZ,YAAA,EAAE,CAAC,aAAa,GAAG,IAAI,CAAC;AACxB,YAAA,EAAE,CAAC,aAAa,GAAG,IAAI,CAAC;YAExB,IAAI,EAAE,GAAG,CAAC,CAAC,mBAAmB,CAAM,CAAC,CAAC,CAAC;AAEvC,YAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;AACtB,YAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;;AAGtB,YAAA,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;;AAGjD,gBAAA,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE;oBACZ,IAAI,EAAE,GAAG,CAAC,CAAC,mBAAmB,CAAM,CAAC,CAAC,CAAC;oBACvC,IAAI,EAAE,EAAE;AACJ,wBAAA,IAAI,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;AAC3B,wBAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;wBACtB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;AACrC,wBAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;wBACtB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;qBACxC;iBACJ;qBAAM;;;AAIH,oBAAA,IAAI,QAAQ,CAAC,CAAC,CAAC,EAAE;wBACb,IAAI,EAAE,GAAG,CAAC,CAAC,mBAAmB,CAAM,CAAC,CAAC,CAAC;wBACvC,IAAI,EAAE,EAAE;AACJ,4BAAA,IAAI,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;AAC3B,4BAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;4BACtB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;AACrC,4BAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;4BACtB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;yBACxC;qBACJ;oBAED,IAAI,EAAE,EAAE;AACJ,wBAAA,IAAI,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;AAC3B,wBAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;wBACtB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;AACrC,wBAAA,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;wBACtB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;qBACxC;iBACJ;aACJ;SACJ;KACJ;IAES,iBAAiB,GAAA;QACvB,IAAI,KAAK,GAAG,IAA6B,CAAC;AAC1C,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;QACzB,IAAI,EAAE,GAAG,EAAE,CAAC,aAAa,EACrB,EAAE,GAAG,IAAI,CAAC;AAEd,QAAA,IAAI,EAAE,CAAC,eAAe,EAAE;YACpB,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;aACpC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAChC,YAAA,EAAE,CAAC,eAAe,GAAG,KAAK,CAAC;SAC9B;AAED,QAAA,IAAI,EAAE,CAAC,gBAAgB,EAAE;YACrB,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;aACpC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAChC,YAAA,EAAE,CAAC,gBAAgB,GAAG,KAAK,CAAC;SAC/B;AAED,QAAA,IAAI,EAAE,CAAC,iBAAiB,EAAE;YACtB,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;aACpC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAChC,YAAA,EAAE,CAAC,iBAAiB,GAAG,KAAK,CAAC;SAChC;AAED,QAAA,IAAI,EAAE,CAAC,cAAc,EAAE;AACnB,YAAA,IAAI,EAAE,CAAC,cAAc,EAAE;gBACnB,IAAI,EAAE,EAAE;AACJ,oBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;oBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;aAClC;iBAAM;AACH,gBAAA,EAAE,CAAC,cAAc,GAAG,IAAI,CAAC;gBACzB,IAAI,EAAE,EAAE;AACJ,oBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;oBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;aAClC;SACJ;AAED,QAAA,IAAI,EAAE,CAAC,eAAe,EAAE;AACpB,YAAA,IAAI,EAAE,CAAC,eAAe,EAAE;gBACpB,IAAI,EAAE,EAAE;AACJ,oBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;oBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;aAClC;iBAAM;AACH,gBAAA,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC;gBAC1B,IAAI,EAAE,EAAE;AACJ,oBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;oBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;aAClC;SACJ;AAED,QAAA,IAAI,EAAE,CAAC,gBAAgB,EAAE;AACrB,YAAA,IAAI,EAAE,CAAC,gBAAgB,EAAE;gBACrB,IAAI,EAAE,EAAE;AACJ,oBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;oBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;aAClC;iBAAM;AACH,gBAAA,EAAE,CAAC,gBAAgB,GAAG,IAAI,CAAC;gBAC3B,IAAI,EAAE,EAAE;AACJ,oBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;oBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;iBACnC;gBACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;aAClC;SACJ;AAED,QAAA,IAAI,EAAE,CAAC,YAAY,EAAE;YACjB,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;aACjC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;AAC7B,YAAA,EAAE,CAAC,YAAY,GAAG,KAAK,CAAC;AACxB,YAAA,EAAE,CAAC,cAAc,GAAG,KAAK,CAAC;SAC7B;AAED,QAAA,IAAI,EAAE,CAAC,aAAa,EAAE;YAClB,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;aACjC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;AAC7B,YAAA,EAAE,CAAC,aAAa,GAAG,KAAK,CAAC;AACzB,YAAA,EAAE,CAAC,eAAe,GAAG,KAAK,CAAC;SAC9B;AAED,QAAA,IAAI,EAAE,CAAC,cAAc,EAAE;YACnB,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;aACjC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;AAC7B,YAAA,EAAE,CAAC,cAAc,GAAG,KAAK,CAAC;AAC1B,YAAA,EAAE,CAAC,gBAAgB,GAAG,KAAK,CAAC;SAC/B;AAED,QAAA,IAAI,EAAE,CAAC,qBAAqB,EAAE;YAC1B,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;aACvC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,qBAAqB,GAAG,KAAK,CAAC;SACpC;AAED,QAAA,IAAI,EAAE,CAAC,sBAAsB,EAAE;YAC3B,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;aACvC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,sBAAsB,GAAG,KAAK,CAAC;SACrC;AAED,QAAA,IAAI,EAAE,CAAC,uBAAuB,EAAE;YAC5B,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;aACvC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,uBAAuB,GAAG,KAAK,CAAC;SACtC;AAED,QAAA,IAAI,EAAE,CAAC,UAAU,EAAE;YACf,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;aACxC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;SACvC;AAED,QAAA,IAAI,EAAE,CAAC,MAAM,EAAE;YACX,IAAI,EAAE,EAAE;AACJ,gBAAA,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC;gBACvB,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;aACvC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACjB,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;SACpB;AAED,QAAA,IAAI,EAAE,CAAC,WAAW,EAAE;YAChB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;SACtC;KACJ;AAED;;AAEG;IACO,iBAAiB,GAAA;QACvB,IAAI,KAAK,GAAG,IAA6B,CAAC;AAE1C,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;QAEzB,IAAI,GAAG,GAAG,EAAE,CAAC,aAAa,EACtB,GAAG,GAAG,IAAI,CAAC;AAEf,QAAA,IAAI,EAAE,CAAC,WAAW,EAAE;YAChB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;AACrC,YAAA,EAAE,CAAC,WAAW,GAAG,KAAK,CAAC;SAC1B;AAED,QAAA,IAAI,EAAE,CAAC,UAAU,EAAE;AACf,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;AAEtB,YAAA,CAAC,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,iBAAiB,CAAC,CAAC;YAExD,IAAI,EAAE,GAAG,CAAC,CAAC,mBAAmB,CAAM,iBAAiB,CAAC,CAAC;AACvD,YAAA,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,EAAE,CAAC;YAC5B,IAAI,GAAG,EAAE;AACL,gBAAA,GAAG,GAAG,GAAG,CAAC,cAAc,CAAC;gBACzB,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;aAC3C;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;AACpC,YAAA,EAAE,CAAC,UAAU,GAAG,KAAK,CAAC;SACzB;AAED,QAAA,IAAI,EAAE,CAAC,WAAW,EAAE;YAChB,IAAI,GAAG,EAAE;AACL,gBAAA,GAAG,GAAG,GAAG,CAAC,cAAc,CAAC;gBACzB,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;aAC5C;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;AACrC,YAAA,EAAE,CAAC,WAAW,GAAG,KAAK,CAAC;SAC1B;AAED,QAAA,IAAI,EAAE,CAAC,QAAQ,EAAE;YACb,IAAI,GAAG,EAAE;AACL,gBAAA,GAAG,GAAG,GAAG,CAAC,cAAc,CAAC;gBACzB,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;aACzC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;AAClC,YAAA,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,YAAA,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;AACT,YAAA,EAAE,CAAC,QAAQ,GAAG,KAAK,CAAC;SACvB;AAED,QAAA,IAAI,EAAE,CAAC,MAAM,EAAE;YACX,IAAI,GAAG,EAAE;AACL,gBAAA,GAAG,GAAG,GAAG,CAAC,cAAc,CAAC;gBACzB,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;aAC1C;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;AACnC,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;AACjB,YAAA,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;SACpB;KACJ;AACJ,CAAA;AAED,MAAM,eAAe,GAAuB;AACxC;;;AAGG;IACH,MAAM;AAEN;;;AAGG;IACH,iBAAiB;AAEjB;;;AAGG;IACH,UAAU;AAEV;;;AAGG;IACH,QAAQ;AAER;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,QAAQ;AAER;;;AAGG;IACH,QAAQ;AAER;;;AAGG;IACH,QAAQ;AAER;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,KAAK;AAEL;;;AAGG;IACH,KAAK;AAEL;;;AAGG;IACH,KAAK;AAEL;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,OAAO;AAEP;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,UAAU;AAEV;;;AAGG;IACH,aAAa;AAEb;;;AAGG;IACH,WAAW;AAEX;;;AAGG;IACH,aAAa;AAEb;;;AAGG;IACH,YAAY;AAEZ;;;AAGG;IACH,YAAY;CACf;;SCrrCe,KAAK,GAAA;AACjB,IAAA,OAAO,IAAI,OAAO,CAAC,OAAO,EAAE;AACxB,QAAA,QAAQ,EAAE;AACN,YAAA,YAAY,EAAE,WAAW;AAC5B,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,OAAO,EAAE,MAAM;AAClB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;;;;;AASE,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;;;;;;;;;;;;;;;;;;AAqBE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;AC7CA;;;;;;;AAOG;AACH,MAAM,SAAS,CAAA;IA6BX,WAAY,CAAA,IAAA,GAAe,CAAC,EAAE,GAAc,GAAA,CAAC,EAAE,KAAgB,GAAA,CAAC,EAAE,MAAA,GAAiB,CAAC,EAAA;AAChF,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;KACxB;IAEM,GAAG,CAAC,IAAe,GAAA,CAAC,EAAE,GAAA,GAAc,CAAC,EAAE,KAAgB,GAAA,CAAC,EAAE,MAAA,GAAiB,CAAC,EAAA;AAC/E,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;KACxB;AAED;;;;AAIG;IACI,KAAK,GAAA;AACR,QAAA,OAAO,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;KACtE;AAED;;;;AAIG;IACI,QAAQ,GAAA;AACX,QAAA,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;KAC3C;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;KAC3C;AAED;;;;AAIG;IACI,SAAS,GAAA;QACZ,OAAO,IAAI,CAAC,SAAS,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;KAC7C;AAED;;;;AAIG;IACI,WAAW,GAAA;AACd,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,EACnB,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;AACzB,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;KACnC;AAED;;;;;;AAMG;IACI,GAAG,CAAC,KAAa,EAAE,MAAc,EAAA;AACpC,QAAA,OAAO,IAAI,CAAC,QAAQ,EAAE,KAAK,KAAK,IAAI,IAAI,CAAC,SAAS,EAAE,KAAK,MAAM,CAAC;KACnE;IAEM,QAAQ,CAAC,CAAS,EAAE,CAAS,EAAA;QAChC,OAAO,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC;KACjF;AACJ;;ACpGD,MAAM,kBAAkB,CAAA;AAQpB,IAAA,WAAA,GAAA;AACI,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,UAAU,EAAuB,CAAC;AAC5D,QAAA,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;KAC/B;IAEM,IAAI,CAAC,GAAW,EAAE,OAAmC,EAAA;AACxD,QAAA,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE;YACvB,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;SAClC;aAAM;YACH,IAAI,GAAG,GAAG,EAAC,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,OAAO,EAAC,CAAC;AAC3C,YAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AACpB,gBAAA,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;aACpC;iBAAM;AACH,gBAAA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;aACnB;SACJ;KACJ;AAES,IAAA,KAAK,CAAC,GAAwB,EAAA;QACpC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,MAAM,IAAI,GAAG,IAAI,CAAC;AAElB,QAAA,IAAI,GAAG,GAAwB,IAAI,KAAK,EAAE,CAAC;AAC3C,QAAA,GAAG,CAAC,WAAW,GAAG,EAAE,CAAC;QACrB,GAAG,CAAC,MAAM,GAAG,YAAA;YACT,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;AAChC,YAAA,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAC5C,YAAA,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YACjB,IAAI,CAAC,eAAe,EAAE,CAAC;AAC3B,SAAC,CAAC;QAEF,GAAG,CAAC,OAAO,GAAG,YAAA;YACV,IAAI,CAAC,eAAe,EAAE,CAAC;AAC3B,SAAC,CAAC;AAEF,QAAA,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;KACrB;IAES,eAAe,GAAA;QACrB,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChB,QAAA,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE;AACjD,YAAA,OAAO,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE;gBAC/B,IAAI,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;gBACpC,IAAI,GAAG,EAAE;oBACL,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;AAC3B,wBAAA,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;AACpB,4BAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;yBACrB;6BAAM;4BACH,IAAI,CAAC,QAAQ,EAAE,CAAC;yBACnB;AACD,wBAAA,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;qBAC1C;yBAAM;AACH,wBAAA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBAChB,MAAM;qBACT;iBACJ;aACJ;SACJ;KACJ;AACJ;;AC7ED;;;;;;AAMG;AACH,MAAM,YAAY,CAAA;AA4Bd,IAAA,WAAA,CAAY,KAAgB,GAAA,IAAI,EAAE,MAAA,GAAiB,IAAI,EAAA;AAEnD,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,GAAG,EAA4B,CAAC;AAEjD,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,IAAI,CAAC,MAAM,GAAG,IAAI,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAE7C,IAAI,CAAC,WAAW,EAAE,CAAC;AAEnB,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAErB,QAAA,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAElB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AAEnB,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,kBAAkB,EAAE,CAAC;AAEpD,QAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;KACvB;AAED;;;;AAIG;IACI,QAAQ,GAAA;AACX,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;KACjC;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;KAClC;AAED;;;AAGG;IACI,WAAW,GAAA;AACd,QAAA,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;KAC3B;AAED;;;;AAIG;AACI,IAAA,aAAa,CAAC,OAAgB,EAAA;AACjC,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,aAAa,EAAE,CAAC;KACxB;AAED;;;;AAIG;AACI,IAAA,WAAW,CAAC,KAA0B,EAAA;AACzC,QAAA,IAAI,CAAC,GAAG,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,KAAK,EACnC,CAAC,GAAG,KAAK,CAAC,WAAW,IAAI,KAAK,CAAC,MAAM,CAAC;AAC1C,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;KACnC;AAED;;;;;;;AAOG;AACI,IAAA,QAAQ,CAAC,KAA0B,EAAE,UAAA,GAAsB,KAAK,EAAA;QACnE,IAAI,EAAE,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE;YAChC,OAAO;SACV;AAED,QAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAEzB,QAAA,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;AAE5B,QAAA,IAAI,KAAK,CAAC,WAAW,IAAI,SAAS,EAAE;YAChC,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;SACtC;KACJ;IAES,aAAa,CAAC,KAAoC,EAAE,IAA8B,EAAA;QACxF,IAAI,IAAI,EAAE;AAEN,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,EAC1B,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;AAEhC,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,KAAM,CAAC;AACrB,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;AAClB,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,CAAC;AAC3C,YAAA,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,GAAG,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,EAAE,EAAE,CAAC,UAAU,IAAI,CAAC,EAAE,EAAE,CAAC,WAAW,IAAI,CAAC,CAAC,CAAC;AAE5F,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;AAExB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE,IAAI,CAAC,CAAC;AAC1B,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,IAAI,CAAC,CAAC;AAEzB,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE,IAAI,CAAC,CAAC;AAC1B,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,EAAE,IAAI,CAAC,CAAC;AAE5B,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,IAAI,CAAC,CAAC;AAC3B,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,EAAE,IAAI,CAAC,CAAC;AAE5B,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,IAAI,CAAC,CAAC;AAC3B,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,EAAE,IAAI,CAAC,CAAC;AAE5B,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,IAAI,CAAC,CAAC;AAC3B,YAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,IAAI,CAAC,CAAC;AAEzB,YAAA,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE,IAAI,CAAC,CAAC;AAC3B,YAAA,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,IAAI,CAAC,CAAC;YAE1B,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,WAAY,EAAE,IAAI,CAAC,CAAC;SACpC;KACJ;AAED;;;;;AAKG;IACO,UAAU,CAAC,aAAsB,KAAK,EAAA;AAC5C,QAAA,IAAI,UAAU,IAAI,IAAI,CAAC,MAAM,EAAE;AAC3B,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAC/C,YAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;SAC1D;aAAM;YACH,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAE/B,YAAA,EAAE,CAAC,IAAI,CAAC,UAAU,CAAsB,EAAE,CAAsB,EAAA;AAC5D,gBAAA,QACI,CAAC,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,KAAK,CAAC;AACrD,oBAAA,CAAC,CAAC,CAAC,WAAW,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,WAAW,IAAI,CAAC,CAAC,MAAM,CAAC,EAC3D;AACN,aAAC,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,gBAAgB,CAC9B,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CACvE,CAAC;AACF,YAAA,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;YAEzB,IAAI,CAAC,WAAW,EAAE,CAAC;AAEnB,YAAA,IAAI,QAAQ,GAAG,IAAI,GAAG,EAA4B,CAAC;AACnD,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChC,gBAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC3D;;AAED,YAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,YAAA,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;SACzB;KACJ;AAEM,IAAA,GAAG,CAAC,GAAW,EAAA;QAClB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;KAC9B;IAEM,GAAG,CAAC,GAAW,EAAE,KAAuB,EAAA;QAC3C,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;KAC9B;AAED;;;AAGG;IACI,aAAa,CAAC,GAA6B,EAAE,cAAuB,EAAA;AACvE,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,CAAC,QAAQ,CAAC,EAAG,CAAC,aAAa,CAAC,IAAI,CAAC,OAAQ,CAAC,CAAC;YAC/C,IAAI,GAAG,EAAE;AACL,gBAAA,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;AAC1C,gBAAA,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;aAC3D;AACD,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,cAAc,CAAE,CAAC;SAC1F;KACJ;AAED;;;;;AAKG;IACI,SAAS,CAAC,GAAW,EAAE,OAAmC,EAAA;QAC7D,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;KAC/C;AAEM,IAAA,sBAAsB,CAAC,GAAwB,EAAA;AAClD,QAAA,IAAI,GAAG,CAAC,WAAW,IAAI,IAAI,EAAE;YACzB,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YAClC,IAAI,CAAC,EAAE;gBACH,OAAO,CAAC,CAAC,SAAS,CAAC;aACtB;SACJ;KACJ;AACJ,CAAA;AAED;;;;;AAKG;AACH,MAAM,gBAAgB,CAAA;IAOlB,WAAY,CAAA,IAAgB,EAAE,SAAoB,EAAA;AAC9C,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,SAAS,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,IAAI,EAAE,CAAC;AACjC,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;KACrB;AAEM,IAAA,MAAM,CAAC,GAAwB,EAAA;AAClC,QAAA,IAAI,IAAI,CAAC,UAAU,EAAE;AACjB,YAAA,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE7C,IAAI,OAAO,EAAE;AACT,gBAAA,OAAO,OAAO,CAAC;aAClB;YAED,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SACzC;aAAM;AACH,YAAA,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,EAAE;gBACpB,OAAO;aACV;AAED,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;AACnB,YAAA,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,IAAI,GAAG,CAAC,KAAK,IAAI,IAAI,CAAC,KAAM,CAAC,UAAU,CAAC;AACjE,YAAA,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,IAAI,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC,KAAM,CAAC,UAAU,CAAC;AAEnE,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,SAAS,EAAE,EAAE;gBACzC,OAAO;aACV;YAED,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AACd,gBAAA,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;AACjB,gBAAA,OAAO,IAAI,CAAC;aACf;YAED,IAAI,CAAC,UAAU,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,gBAAgB,EAAE,CAAC;YAC5C,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACtC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,gBAAgB,EAAE,CAAC;YAC5C,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YAEtC,MAAM,EAAE,GAAG,EAAE,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;YAC7B,MAAM,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;AAE9B,YAAA,IAAI,EAAE,GAAG,EAAE,EAAE;;;AAGT,gBAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,GAAG,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AACrE,gBAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;aAEzE;iBAAM;;;AAGH,gBAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACnE,gBAAA,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;aAEzE;YAED,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SACzC;KACJ;AACJ;;ACzTD;AACA,MAAM,QAAQ,GAAG,EAAE,CAAC;AAuCpB,MAAM,gBAAiB,SAAQ,YAAY,CAAA;IAQvC,WAAY,CAAA,KAAc,EAAE,MAAe,EAAA;AACvC,QAAA,KAAK,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;AACrB,QAAA,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACf,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AACnB,QAAA,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;AACvB,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,GAAG,EAAgC,CAAC;AACrD,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;KACtB;AAEe,IAAA,GAAG,CAAC,GAAW,EAAA;QAC3B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;KAC9B;AACJ,CAAA;AAYD,MAAM,oBAAqB,SAAQ,gBAAgB,CAAA;IAI/C,WAAY,CAAA,IAAe,EAAE,SAAmB,EAAA;AAC5C,QAAA,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;AACvB,QAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG;AACX,YAAA,EAAE,EAAE,CAAC;AACL,YAAA,IAAI,EAAE,EAAE;AACR,YAAA,KAAK,EAAE,CAAC;AACR,YAAA,MAAM,EAAE,CAAC;AACT,YAAA,CAAC,EAAE,CAAC;AACJ,YAAA,CAAC,EAAE,CAAC;AACJ,YAAA,IAAI,EAAE,CAAC;AACP,YAAA,KAAK,EAAE,CAAC;AACR,YAAA,IAAI,EAAE,CAAC;AACP,YAAA,QAAQ,EAAE,CAAC;AACX,YAAA,OAAO,EAAE,CAAC;AACV,YAAA,OAAO,EAAE,CAAC;AAEV,YAAA,KAAK,EAAE,EAAE;AACT,YAAA,KAAK,EAAE,CAAC;AACR,YAAA,MAAM,EAAE,CAAC;AACT,YAAA,OAAO,EAAE,CAAC;AACV,YAAA,QAAQ,EAAE,CAAC;AACX,YAAA,QAAQ,EAAE,CAAC;AACX,YAAA,QAAQ,EAAE,CAAC;SACd,CAAA;KACJ;AACJ,CAAA;AAED,MAAM,SAAS,CAAA;AAWX,IAAA,WAAA,CAAY,UAAmB,EAAA;AAC3B,QAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,QAAA,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;AACvB,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;AAC/B,QAAA,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,UAAU,GAAG,IAAI,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC5C,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;AACnD,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,UAAU,GAAG,UAAU,IAAI,IAAI,CAAC;KACxC;AAEM,IAAA,aAAa,CAAC,OAAgB,EAAA;AACjC,QAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;KAC3B;AAEM,IAAA,YAAY,CAAC,IAAY,EAAA;QAC5B,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;;QAGvC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE;AAC9B,YAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,EAAE,CAAA,EAAG,IAAI,CAAA,KAAA,CAAO,CAAC,CAAC;SACxD;QAED,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,EAAE;YACtC,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,GAAG,IAAI,QAAQ,EAAU,CAAC;SAChE;QACD,OAAO,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC;KACtD;AAEM,IAAA,YAAY,CAAC,IAAY,EAAA;AAC5B,QAAA,OAAO,IAAI,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;KACpC;AAES,IAAA,qBAAqB,CAAC,KAAuB,EAAE,IAAiB,EAAE,QAAgB,CAAC,EAAA;AACzF,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QAEvB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAClC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QACjC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QACjC,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC;AAEvD,QAAA,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,EACf,CAAC,GAAG,KAAK,CAAC,MAAM,EAChB,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC;QAExB,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACjC,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;AACrC,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,aAAa,CAAC;QAEvD,IAAI,QAAQ,GAA2B,EAAE,CAAC;AAE1C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnC,YAAA,IAAI,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AAClB,YAAA,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC;AAEjB,YAAA,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;AAErB,YAAA,IAAI,CAAC,GAAG,IAAI,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC;AAErE,YAAA,IAAI,EAAE,GAAG,IAAI,KAAK,CAAC,EAAE,CAAC,CAAC;YAEvB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;YACnB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAElB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;YACnB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;YAErB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;YAErB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;YAErB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAElB,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;YACpB,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;YAEnB,IAAI,MAAM,GAAG,IAAI,oBAAoB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAC7C,IAAI,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YACvC,IAAI,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;;AAIlC,YAAA,IAAI,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC;AAEvB,YAAA,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;AACb,YAAA,CAAC,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC;AACjB,YAAA,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;AACnB,YAAA,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC;AACrB,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AACX,YAAA,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AACX,YAAA,CAAC,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC;AACjB,YAAA,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;AACnB,YAAA,CAAC,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC;AACjB,YAAA,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC;AACzB,YAAA,CAAC,CAAC,OAAO,GAAG,EAAE,CAAC,OAAO,CAAC;AACvB,YAAA,CAAC,CAAC,OAAO,GAAG,EAAE,CAAC,OAAO,CAAC;AAEvB,YAAA,CAAC,CAAC,KAAK,GAAG,MAAM,CAAC;AACjB,YAAA,CAAC,CAAC,KAAK,GAAG,MAAM,CAAC;YACjB,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;YACpC,CAAC,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YACtC,CAAC,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;YACzC,CAAC,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;AACxC,YAAA,CAAC,CAAC,QAAQ,GAAG,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;AAE9C,YAAA,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC;AAErB,YAAA,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;SACjD;AAED,QAAA,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEpB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC3C,IAAI,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAE1B,IAAI,KAAK,GAAG,EAAE,CAAC,KAAK,EAChB,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC;;;;;;;;YAWvB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;AACxB,gBAAA,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;aAC9B;AAED,YAAA,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC;SACjD;KACJ;AAEM,IAAA,QAAQ,CAAC,QAAgB,EAAE,QAAqB,EAAE,WAAmB,EAAA;AACxE,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;QACnC,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;AAE3C,QAAA,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;QAEpC,IAAI,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;QAC9C,IAAI,CAAC,GAAG,EAAE;YACN,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,GAAG,IAAI,QAAQ,EAAU,CAAC;SACtE;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;;AAGhD,QAAA,IAAI,KAAK,GAAG,IAAI,gBAAgB,EAAE,CAAC;AAEnC,QAAA,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;AACjB,QAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;AAChB,QAAA,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;AACpB,QAAA,KAAK,CAAC,aAAa,GAAG,CAAC,CAAC;AACxB,QAAA,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEpB,QAAA,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;AAEpC,QAAA,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;QAE/B,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;AAEnD,QAAA,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;AACtB,QAAA,GAAG,CAAC,MAAM,GAAG,MAAK;AACd,YAAA,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AAChC,YAAA,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACvB,SAAC,CAAC;AACF,QAAA,GAAG,CAAC,GAAG,GAAG,WAAW,CAAC;KACzB;IAES,cAAc,CAAC,KAAuB,EAAE,GAAwB,EAAA;AACtE,QAAA,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;KAC5B;AAEM,IAAA,QAAQ,CAAC,QAAgB,EAAE,MAAc,EAAE,QAAgB,EAAA;AAE9D,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;QACnC,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;AAE3C,QAAA,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;QAEpC,IAAI,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;QAC9C,IAAI,CAAC,GAAG,EAAE;YACN,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,GAAG,IAAI,QAAQ,EAAU,CAAC;SACtE;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;;AAGhD,QAAA,IAAI,KAAK,GAAG,IAAI,gBAAgB,EAAE,CAAC;AAEnC,QAAA,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;AACjB,QAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;AAChB,QAAA,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;AACpB,QAAA,KAAK,CAAC,aAAa,GAAG,CAAC,CAAC;AACxB,QAAA,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEpB,QAAA,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,QAAS,CAAC,CAAC;AACpC,QAAA,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;AAE/B,QAAA,KAAK,CAAC,CAAG,EAAA,MAAM,CAAI,CAAA,EAAA,QAAQ,EAAE,CAAC;AACzB,aAAA,IAAI,CAAC,CAAC,QAAkB,KAAI;AACzB,YAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;gBACd,MAAM,KAAK,CAAC,CAAmB,gBAAA,EAAA,MAAM,IAAI,QAAQ,CAAA,CAAA,CAAG,CAAC,CAAC;aACzD;;AAED,YAAA,OAAO,QAAQ,CAAC,IAAI,EAAE,CAAC;AAC3B,SAAC,CAAC;AACD,aAAA,IAAI,CAAC,CAAC,IAAiB,KAAI;YAExB,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AAE/C,YAAA,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;AACtB,YAAA,GAAG,CAAC,MAAM,GAAG,MAAK;AACd,gBAAA,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AAChC,gBAAA,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACvB,aAAC,CAAC;AAEF,YAAA,GAAG,CAAC,GAAG,GAAG,CAAA,EAAG,MAAM,CAAA,CAAA,EAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;AACvC,YAAA,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC;AAClC,SAAC,CAAC;aACD,KAAK,CAAC,GAAG,IAAG;YACT,GAAG,CAAC,MAAM,EAAE,CAAC;AACb,YAAA,OAAO,EAAC,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAC,CAAC;AACtD,SAAC,CAAC,CAAC;KACV;AACJ;;SC/Ve,WAAW,GAAA;AACvB,IAAA,OAAO,IAAI,OAAO,CAAC,aAAa,EAAE;AAC9B,QAAA,QAAQ,EAAE;AACN,YAAA,OAAO,EAAE,WAAW;AACvB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,OAAO,EAAE,MAAM;AAClB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;;AAME,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;;;;AAOE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;SC1BgB,WAAW,GAAA;AACvB,IAAA,OAAO,IAAI,OAAO,CAAC,aAAa,EAAE;AAC9B,QAAA,QAAQ,EAAE;AACN,YAAA,SAAS,EAAE,WAAW;AACtB,YAAA,QAAQ,EAAE,OAAO;AACjB,YAAA,KAAK,EAAE,OAAO;AACd,YAAA,UAAU,EAAE,OAAO;AACtB,SAAA;AACD,QAAA,UAAU,EAAE;AACR,YAAA,OAAO,EAAE,MAAM;AAClB,SAAA;AACD,QAAA,YAAY,EACR,CAAA;;;;;;;;;AASE,aAAA,CAAA;AACN,QAAA,cAAc,EACV,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DE,aAAA,CAAA;AACT,KAAA,CAAC,CAAC;AACP;;AC9CA,MAAM,YAAY,GAAG,CAAC,CAAC;AAEvB,IAAI,0BAA0B,GAAG,CAAC,CAAC;AAEnC,IAAI,wBAAwB,GAAG,CAAC,CAAC;AAEjC,IAAI,2BAA2B,GAAG,CAAC,CAAC;AAEpC,SAAS,eAAe,CAAC,EAA0B,EAAE,IAAe,EAAE,KAAa,EAAA;IAC/E,OAAO,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,MAAM,KAAI;AACzC,QAAA,SAAS,KAAK,GAAA;AACV,YAAA,MAAM,GAAG,GAAG,EAAE,CAAC,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;AAC9C,YAAA,IAAI,GAAG,IAAI,EAAE,CAAC,WAAW,EAAE;AACvB,gBAAA,MAAM,EAAE,CAAC;aACZ;AAAM,iBAAA,IAAI,GAAG,IAAI,EAAE,CAAC,eAAe,EAAE;gBAClC,qBAAqB,CAAC,KAAK,CAAC,CAAC;aAChC;iBAAM;AACH,gBAAA,OAAO,EAAE,CAAC;aACb;SACJ;AAED,QAAA,KAAK,EAAE,CAAC;AACZ,KAAC,CAAC,CAAC;AACP,CAAC;AA0CD,MAAM,QAAQ,CAAA;IA0KV,WAAY,CAAA,OAAgB,EAAE,MAAA,GAA0B,EAAE,EAAA;QA48BhD,IAAyB,CAAA,yBAAA,GAAG,MAAK;AACvC,YAAA,IAAI,CAAC,kBAAmB,CAAC,QAAQ,EAAE,CAAC;YACpC,IAAI,CAAC,kBAAmB,CAAC,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAC9D,YAAA,IAAI,CAAC,kBAAmB,CAAC,UAAU,EAAE,CAAC;AAC1C,SAAC,CAAA;QAES,IAAyB,CAAA,yBAAA,GAAG,MAAK;AAEvC,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC5B,YAAA,MAAM,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC;AAErC,YAAA,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;AAEzB,gBAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAE9B,gBAAA,IAAI,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC;AAEjC,gBAAA,IAAI,CAAC,GAAG,IAAI,CAAC,kBAAmB,CAAC,KAAK,EAClC,CAAC,GAAG,IAAI,CAAC,kBAAmB,CAAC,MAAM,CAAC;AAExC,gBAAA,IAAI,CAAC,kBAAmB,CAAC,QAAQ,EAAE,CAAC;gBACpC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;AACzC,gBAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;gBACrE,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;gBACxD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;AAC1C,gBAAA,IAAI,CAAC,kBAAmB,CAAC,UAAU,EAAE,CAAC;AAEtC,gBAAA,MAAM,IAAI,GAAG,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,0BAA0B,EAAE,CAAC,CAAE,CAAC;gBAC7D,EAAE,CAAC,KAAK,EAAE,CAAC;gBAEX,eAAe,CAAC,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAK;AACnC,oBAAA,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;AAC/B,oBAAA,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBACpB,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;oBACzC,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;oBACnD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;AAC9C,iBAAC,CAAC,CAAC;aACN;AACL,SAAC,CAAA;QAES,IAA0B,CAAA,0BAAA,GAAG,MAAK;AACxC,YAAA,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,CAAC;YACrC,IAAI,CAAC,mBAAoB,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;AAChE,YAAA,IAAI,CAAC,mBAAoB,CAAC,UAAU,EAAE,CAAC;AAC3C,SAAC,CAAA;QAES,IAA0B,CAAA,0BAAA,GAAG,MAAK;AAExC,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC5B,YAAA,MAAM,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC;AAEtC,YAAA,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;AAE1B,gBAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAE/B,gBAAA,IAAI,IAAI,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAElC,gBAAA,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAoB,CAAC,KAAK,EACnC,CAAC,GAAG,IAAI,CAAC,mBAAoB,CAAC,MAAM,CAAC;AAEzC,gBAAA,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,CAAC;gBACrC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;AACzC,gBAAA,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;gBACrE,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;gBACxD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;AAC1C,gBAAA,IAAI,CAAC,mBAAoB,CAAC,UAAU,EAAE,CAAC;AAEvC,gBAAA,MAAM,IAAI,GAAG,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,0BAA0B,EAAE,CAAC,CAAE,CAAC;gBAC7D,EAAE,CAAC,KAAK,EAAE,CAAC;gBAEX,eAAe,CAAC,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAK;AACnC,oBAAA,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;AAChC,oBAAA,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBACpB,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;oBACzC,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;oBACnD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;AAC9C,iBAAC,CAAC,CAAC;aACN;AACL,SAAC,CAAA;AAxhCG,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;AAEhB,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QAEvB,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,IAAI,CAAC;QAExC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC;AAElC,QAAA,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;AAEtB,QAAA,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;AAE3B,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAE1B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAEzB,QAAA,IAAI,CAAC,MAAM,GAAG,oBAAoB,CAAC,IAAI,CAAC,CAAC;AAEzC,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEnB,QAAA,IAAI,MAAM,CAAC,QAAQ,EAAE;AACjB,YAAA,KAAK,IAAI,CAAC,IAAI,MAAM,CAAC,QAAQ,EAAE;AAC3B,gBAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;aAC/D;SACJ;AAED,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,EAAe,CAAC;AAE3C,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAE/B,IAAI,CAAC,gBAAgB,GAAG,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC;AAE3C,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAEhC,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAE7B,IAAI,CAAC,iBAAiB,GAAG,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC;AAE5C,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAE1B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,IAAI,SAAS,GAAG,IAAI,eAAe,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACrD,IAAI,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzC,IAAI,SAAS,EAAE;AACX,YAAA,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;SACjD;aAAM;AACH,YAAA,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,IAAI,SAAS,GAAG,MAAM,CAAC,IAAI,GAAG,YAAY,CAAC;SACtE;AAED,QAAA,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;AACjC,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAA,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC;AAErB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAE5B,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;AAEnC,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAE1B;;;;AAIG;AACH,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,YAAY,EAAE,CAAC;AAEjD;;;;AAIG;AACH,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,YAAY,EAAE,CAAC;AAEjD;;;;AAIG;QACH,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AAEhD,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAE7B,QAAA,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;AAE/B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAE3B,IAAI,CAAC,WAAW,GAAG,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC;AAEtC,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;AAEvC,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;AAEnC,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC;AAEtC,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AAExB,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAE1B,QAAA,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;AAEhC,QAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AAEjC,QAAA,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;AAE/B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAEhC,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,0BAA0B,CAAC;AAE3D,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,yBAAyB,CAAC;QAEzD,IAAI,MAAM,CAAC,YAAY,IAAI,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE;YACrD,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;KACJ;IAEM,sBAAsB,GAAA;AACzB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC1B,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AACpB,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAC9B,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,mBAAmB,CAAC,CAAC;KAChD;IAEM,kBAAkB,GAAA;AACrB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC1B,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AACpB,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAC9B,QAAA,EAAE,CAAC,iBAAiB,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE,CAAC,mBAAmB,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;KAC9E;AAED;;;AAGG;AACI,IAAA,iBAAiB,CAAC,QAAiB,EAAA;AACtC,QAAA,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,QAAQ,CAAC;KACjC;IAEM,gBAAgB,CAAC,MAAW,EAAE,QAAkB,EAAA;AACnD,QAAA,IAAI,EAAE,GAAG,wBAAwB,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC;YACtB,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM;AAC7C,SAAA,CAAC,CAAC;AACH,QAAA,OAAO,EAAE,CAAC;KACb;AAEM,IAAA,mBAAmB,CAAC,EAAU,EAAA;AACjC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClD,IAAI,EAAE,KAAK,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;gBACnC,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAClC,MAAM;aACT;SACJ;KACJ;IAEM,mBAAmB,CAAC,MAAW,EAAE,QAAkB,EAAA;AACtD,QAAA,IAAI,EAAE,GAAG,2BAA2B,EAAE,CAAC;AACvC,QAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC;YACzB,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM;AAC7C,SAAA,CAAC,CAAC;AACH,QAAA,OAAO,EAAE,CAAC;KACb;AAEM,IAAA,sBAAsB,CAAC,EAAU,EAAA;AACpC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrD,IAAI,EAAE,KAAK,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;gBACtC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACrC,MAAM;aACT;SACJ;KACJ;AAGD;;;;;AAKG;IACI,kBAAkB,CAAC,MAAW,EAAE,QAAkB,EAAA;AACrD,QAAA,IAAI,EAAE,GAAG,0BAA0B,EAAE,CAAC;AACtC,QAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;YACxB,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM;AAC7C,SAAA,CAAC,CAAC;AACH,QAAA,OAAO,EAAE,CAAC;KACb;AAED;;;AAGG;AACI,IAAA,qBAAqB,CAAC,EAAU,EAAA;AACnC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACpD,IAAI,EAAE,KAAK,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;gBACrC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACpC,MAAM;aACT;SACJ;KACJ;AAEM,IAAA,gBAAgB,CAAI,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;AACtD,QAAA,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAA,EAAG,CAAC,CAAA,CAAA,EAAI,CAAC,CAAA,CAAA,EAAI,CAAC,CAAA,CAAE,CAAC,CAAC;KAClD;AAEM,IAAA,mBAAmB,CAAI,GAA8B,EAAA;QACxD,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAA,EAAG,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAI,CAAA,EAAA,GAAG,CAAC,CAAC,CAAC,CAAE,CAAA,CAAC,CAAC;KACjE;AAEM,IAAA,kBAAkB,CAAI,GAAgB,EAAA;QACzC,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAA,EAAG,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAI,CAAA,EAAA,GAAG,CAAC,CAAC,CAAA,CAAE,CAAC,CAAC;KAC9D;AAED;;;;AAIG;AACI,IAAA,kBAAkB,CAAI,GAAuB,EAAA;AAChD,QAAA,IAAI,CAAC,GAAG,CAAC,aAAa,IAAI,GAAG,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE;YAClD,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;YACxB,IAAI,GAAG,GAAG,OAAO,CAAC;AAClB,YAAA,OAAO,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;AACjD,gBAAA,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AACpB,gBAAA,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AACpB,gBAAA,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;gBACpB,GAAG,GAAG,GAAG,CAAC,CAAA,CAAA,EAAI,CAAC,CAAI,CAAA,EAAA,CAAC,EAAE,CAAC;aAC1B;AAED,YAAA,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE;AACpB,gBAAA,GAAG,CAAC,aAAa,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;aACzC;iBAAM;gBACH,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;aAClC;YAED,GAAG,CAAC,cAAc,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;YAEnE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;SACnC;KACJ;AAED;;;;AAIG;AACI,IAAA,iBAAiB,CAAI,GAAuB,EAAA;AAC/C,QAAA,IAAI,GAAG,CAAC,aAAa,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE;AAClD,YAAA,IAAI,CAAC,GAAG,GAAG,CAAC,aAAa,CAAC;AAC1B,YAAA,IAAI,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE;AACb,gBAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAA,EAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAI,CAAA,EAAA,CAAC,CAAC,CAAC,CAAA,CAAE,CAAC,CAAC;AACjD,gBAAA,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;aACvB;SACJ;KACJ;AAED;;;;AAIG;IACI,QAAQ,GAAA;AACX,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,MAAO,CAAC,WAAW,CAAC;KAC3C;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,MAAO,CAAC,YAAY,CAAC;KAC5C;AAED;;;;AAIG;IACI,SAAS,GAAA;AACZ,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAO,CAAC;QAC/B,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC;KAC9E;AAED;;;;AAIG;IACI,eAAe,GAAA;AAClB,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAO,CAAC;QAC/B,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,GAAG,GAAG,CAAC,CAAC,CAAC;KAC1F;AAED;;;AAGG;AACI,IAAA,UAAU,CAAC,OAAgB,EAAA;AAC9B,QAAA,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KACvB;AAED;;;AAGG;AACI,IAAA,WAAW,CAAC,IAAe,EAAA;AAC9B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SACvB;KACJ;AAED;;;AAGG;AACI,IAAA,aAAa,CAAC,OAAgB,EAAA;QACjC,OAAO,CAAC,MAAM,EAAE,CAAC;KACpB;IAEM,aAAa,GAAA;QAChB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC5B;AAED;;;AAGG;IACI,UAAU,GAAA;AAEb,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,OAAO;SACV;aAAM;AACH,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;SAC5B;AAED,QAAA,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;QAE1B,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACxD,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAExD,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAE3C,QAAA,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAK;YAC/B,IAAI,CAAC,IAAI,EAAE,CAAC;AAChB,SAAC,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,CAAC,IAAI,EAAE;AACjC,YAAA,GAAG,EAAE,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAC1E,SAAA,CAAC,CAAC;AAEH,QAAA,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;;QAGzB,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,KAAK,CAAC,cAAc,EAAE,YAAA;YACjD,IAAI,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;AAC9C,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC;QAEvC,IAAI,CAAC,kBAAkB,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE;AACpD,YAAA,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG;AAC1B,SAAA,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC;QAE/B,IAAI,CAAC,gBAAgB,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAE3G,IAAI,CAAC,mBAAmB,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE;AACrD,YAAA,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG;AAC1B,SAAA,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC;QAEhC,IAAI,CAAC,iBAAiB,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,mBAAmB,CAAC,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;;QAG9G,IAAI,CAAC,gBAAgB,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE;AAClD,YAAA,IAAI,EAAE,CAAC;AACP,YAAA,cAAc,EAAE,CAAC,MAAM,EAAE,mBAAmB,CAAC;AAC7C,YAAA,MAAM,EAAE,CAAC,MAAM,EAAE,iBAAiB,CAAC;AACnC,YAAA,IAAI,EAAE,CAAC,eAAe,EAAE,cAAc,CAAC;AACvC,YAAA,UAAU,EAAE,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AACpD,YAAA,QAAQ,EAAE,KAAK;AAClB,SAAA,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;QAE7B,IAAI,CAAC,sBAAsB,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE;AACxD,YAAA,QAAQ,EAAE,KAAK;AAClB,SAAA,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,sBAAsB,CAAC,IAAI,EAAE,CAAC;QAEnC,IAAI,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC,IAAI,KAAK,OAAO,EAAE;AACnC,YAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,0BAA0B,CAAC;AAC3D,YAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,yBAAyB,CAAC;YAEzD,IAAI,CAAC,gBAAgB,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACtD,YAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;AAE7B,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC;YAE9C,IAAI,CAAC,aAAa,GAAG;gBACjB,MAAM,EAAE,IAAI,CAAC,gBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC1C,OAAO,EAAE,IAAI,CAAC,kBAAmB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC7C,QAAQ,EAAE,IAAI,CAAC,mBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC/C,KAAK,EAAE,IAAI,CAAC,sBAAuB,CAAC,QAAQ,CAAC,CAAC,CAAC;aAClD,CAAC;SACL;aAAM;YACH,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;AAErD,YAAA,IAAI,IAAI,CAAC,KAAK,GAAG,QAAQ,EAAE;AACvB,gBAAA,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;aACzB;YAED,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;YAE1C,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAEpC,IAAI,CAAC,gBAAgB,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE;AAClD,gBAAA,IAAI,EAAE,CAAC;gBACP,IAAI,EAAE,IAAI,CAAC,KAAK;gBAChB,cAAc,EAAE,IAAI,CAAC,eAAe;AACpC,gBAAA,MAAM,EAAE,QAAQ;AACnB,aAAA,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;YAE7B,IAAI,CAAC,eAAe,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE;AACjD,gBAAA,IAAI,EAAE,CAAC;AACP,gBAAA,QAAQ,EAAE,KAAK;gBACf,cAAc,EAAE,IAAI,CAAC,eAAe;gBACpC,MAAM,EAAE,IAAI,CAAC,OAAO;gBACpB,IAAI,EAAE,IAAI,CAAC,KAAK;AAChB,gBAAA,MAAM,EAAE,SAAS;AACpB,aAAA,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;YAE5B,IAAI,CAAC,sBAAsB,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE;AACxD,gBAAA,QAAQ,EAAE,KAAK;AAClB,aAAA,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,sBAAsB,CAAC,IAAI,EAAE,CAAC;AAEnC,YAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,gBAAgB,CAAC;YAE5C,IAAI,CAAC,aAAa,GAAG;gBACjB,MAAM,EAAE,IAAI,CAAC,sBAAuB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAChD,OAAO,EAAE,IAAI,CAAC,kBAAmB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC7C,QAAQ,EAAE,IAAI,CAAC,mBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC/C,KAAK,EAAE,IAAI,CAAC,sBAAuB,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC/C,OAAO,EAAE,IAAI,CAAC,gBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC;aAC9C,CAAC;YAEF,IAAI,CAAC,sBAAsB,EAAE,CAAC;SACjC;AAED,QAAA,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,MAAK;YAC/B,IAAI,CAAC,YAAY,EAAE,CAAC;AACpB,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAC9D,IAAI,CAAC,UAAU,EAAE,CAAC;;;;;;AAMlB,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACrE,SAAC,CAAC;AAEF,QAAA,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEtH,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;QAE/C,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAE9B,IAAI,CAAC,mBAAmB,EAAE,CAAC;KAC9B;IAED,sBAAsB,GAAA;AAClB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAE1B,QAAA,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC,YAAY,EAAE,CAAC;QAC9C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC/D,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,mBAAoB,CAAC,KAAK,GAAG,IAAI,CAAC,mBAAoB,CAAC,MAAM,GAAG,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;QAC5H,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;AAE1C,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC,YAAY,EAAE,CAAC;QAC7C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;QAC9D,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,kBAAmB,CAAC,KAAK,GAAG,IAAI,CAAC,kBAAmB,CAAC,MAAM,GAAG,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;QAC1H,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;KAC7C;IAEM,mBAAmB,GAAA;AACtB,QAAA,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;AACzB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,QAAA,KAAK,IAAI,CAAC,IAAI,IAAI,EAAE;YAChB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B;KACJ;IAEM,MAAM,GAAA;QACT,IAAI,CAAC,UAAU,EAAE,CAAC;KACrB;AAEM,IAAA,gBAAgB,CAAC,UAAkB,EAAA;AACtC,QAAA,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC;AACjC,QAAA,IAAI,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,EAAE;YAChC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;SACvD;KACJ;IAEM,YAAY,GAAA;AACf,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAO,CAAC;AAE7B,QAAA,IAAI,CAAC,YAAa,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,gBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,EAAE,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;QAC9D,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,EAAE,CAAC,CAAC,MAAM,GAAG,GAAG,EAAE,IAAI,CAAC,CAAC;KAC7F;IAEM,UAAU,GAAA;AACb,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAO,CAAC;AAE7B,QAAA,IAAI,CAAC,YAAa,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,gBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;AAClD,QAAA,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAE9E,QAAA,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAC5F,QAAA,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AAC5F,QAAA,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAExG,IAAI,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC,IAAI,KAAK,OAAO,EAAE;AACnC,YAAA,IAAI,CAAC,aAAa,CAAC,MAAM,GAAI,IAAI,CAAC,gBAAiC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAChF,YAAA,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAmB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAClE,YAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,IAAI,CAAC,mBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACpE,YAAA,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,sBAAuB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACpE,YAAA,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC,gBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SACnE;aAAM;AACH,YAAA,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC,sBAAuB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACrE,YAAA,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAmB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAClE,YAAA,IAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,IAAI,CAAC,mBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACpE,YAAA,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,sBAAuB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACpE,YAAA,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC,gBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SACnE;AAED,QAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;KAC9C;AAEM,IAAA,UAAU,CAAC,UAAsB,EAAA;;QAEpC,UAAU,CAAC,MAAM,EAAE,CAAC;KACvB;AAED;;;;AAIG;AACI,IAAA,OAAO,CAAC,UAAsB,EAAA;QACjC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;AACpC,YAAA,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACxB,YAAA,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;YACzC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC;SAClD;aAAM;YACH,IAAI,CAAC,MAAM,CAAC,CAAA,UAAA,EAAa,UAAU,CAAC,IAAI,CAAkB,gBAAA,CAAA,CAAC,CAAC;SAC/D;KACJ;IAES,sBAAsB,GAAA;AAC5B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClD,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;SACxC;KACJ;AAED;;;;;AAKG;IACI,aAAa,CAAC,UAAsB,EAAE,gBAA4B,EAAA;QACrE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;AACpC,YAAA,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACxB,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC;AAC/C,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAClD,gBAAA,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAE;oBACnD,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC;oBAC9C,MAAM;iBACT;aACJ;AACD,YAAA,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;SAC5C;aAAM;YACH,IAAI,CAAC,MAAM,CAAC,CAAA,UAAA,EAAa,UAAU,CAAC,IAAI,CAAkB,gBAAA,CAAA,CAAC,CAAC;SAC/D;KACJ;AAED;;;;AAIG;AACI,IAAA,QAAQ,CAAC,QAAsB,EAAA;AAClC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7B;KACJ;AAEM,IAAA,UAAU,CAAC,cAAsB,EAAA;AACpC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;AAC1B,QAAA,IAAI,OAAO,GAAG,EAAE,CAAC,0BAA0B,CAAC,EAAE,CAAC,YAAY,EAAG,EAAU,CAAC,cAAc,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;AACtG,QAAA,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;KACrB;IAEM,OAAO,GAAA;QACV,OAAO,IAAI,CAAC,KAAK,CAAC;KACrB;AAED;;AAEG;AACI,IAAA,8BAA8B,CAAC,KAAyB,EAAA;AAC3D,QAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;KACtE;AAED;;;AAGG;IACO,4BAA4B,GAAA;AAClC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAEjC,QAAA,IAAI,EAAE,CAAC,MAAM,EAAE;YAEX,IAAI,CAAC,kBAAkB,EAAE,CAAC;;AAG1B,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YAClB,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;aAC1D;SACJ;KACJ;AAGD;;;AAGG;IACO,iCAAiC,GAAA;AACvC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAEjC,QAAA,IAAI,EAAE,CAAC,MAAM,EAAE;AACX,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAG,CAAC;YAE1B,IAAI,CAAC,kBAAkB,EAAE,CAAC;;AAG1B,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YAClB,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AAChB,gBAAA,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE;AACtB,oBAAA,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;oBAC1C,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;iBACjC;aACJ;;AAGD,YAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAC9B,YAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,sBAAsB,CAAC,OAAQ,CAAC,CAAC;AAEpE,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;gBAChB,GAAG,CAAC,cAAc,IAAI,GAAG,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;aACrD;;AAGD,YAAA,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC;AACnC,YAAA,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC5B,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;AAClC,gBAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,OAAQ,CAAC,CAAC;aACjD;AAED,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;aACrD;;AAGD,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;aACnD;;AAGD,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;aACxD;;AAGD,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;aACrD;SACJ;KACJ;IAES,2BAA2B,GAAA;AACjC,QAAA,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC;AACnC,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;KAChC;AAED;;;AAGG;IACI,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,YAAa,CAAC,YAAY,EAAE,CAAC;AAElC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;QACpB,CAAC,CAAC,YAAY,EAAE,CAAC;AAEjB,QAAA,IAAI,gBAAgB,GAAG,IAAI,CAAC,gBAAiB,CAAC;QAC9C,gBAAgB,CAAC,QAAQ,EAAE,CAAC;QAE5B,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,EAChB,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;QAEf,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAClC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC;QAEpD,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE1B,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AAEzB,QAAA,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAa,CAAC,QAAQ,CAAC;AAE3C,QAAA,IAAI,YAAY,GAAG,CAAC,CAAC,YAAY,EAAE,CAAC;AACpC,QAAA,IAAI,SAAS,GAAG,CAAC,CAAC,UAAU,CAAC,cAAc,IAAI,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC;;AAG5E,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC;AAC9B,QAAA,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC;QAExB,OAAO,CAAC,EAAE,EAAE;AACR,YAAA,IAAI,CAAC,YAAa,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;AACxC,YAAA,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;AAE9B,YAAA,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YAClB,OAAO,CAAC,EAAE,EAAE;AACR,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;aACvB;YAED,IAAI,CAAC,4BAA4B,EAAE,CAAC;AAEpC,YAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,CAAC,EAAE,EAAE;gBACR,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAC1B,gBAAA,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;aACpB;YAED,IAAI,CAAC,iCAAiC,EAAE,CAAC;YACzC,IAAI,CAAC,2BAA2B,EAAE,CAAC;YAEnC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;AAEpC,YAAA,IAAI,YAAY,IAAI,CAAC,SAAS,EAAE;gBAC5B,IAAI,CAAC,kBAAkB,EAAE,CAAC;aAC7B;AACD,YAAA,IAAI,CAAC,0BAA0B,IAAI,IAAI,CAAC,mBAAmB,EAAE,CAAC;SACjE;QAED,gBAAgB,CAAC,UAAU,EAAE,CAAC;AAE9B,QAAA,IAAI,CAAC,eAAe,IAAK,gBAAgC,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;QAE1F,IAAI,YAAY,EAAE;AACd,YAAA,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;;gBAEd,IAAI,CAAC,gBAAgB,EAAE,CAAC;aAC3B;YACD,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAC7B;AAED,QAAA,IAAI,CAAC,0BAA0B,IAAI,IAAI,CAAC,mBAAmB,EAAE,CAAC;;QAG9D,IAAI,CAAC,cAAe,EAAE,CAAC;QAEvB,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AAE7B,QAAA,CAAC,CAAC,UAAU,CAAC,UAAU,GAAG,CAAC,CAAC;AAC5B,QAAA,CAAC,CAAC,UAAU,CAAC,WAAW,GAAG,KAAK,CAAC;AACjC,QAAA,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;AAC5B,QAAA,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;KAC/B;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AAErB,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,WAAW,EAC3B,CAAC,GAAG,EAAE,CAAC,QAAQ,EACf,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEf,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;QAE1B,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,yBAAwC,CAAC,CAAC;QAC9E,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvE,QAAA,IAAI,CAAC,sBAAuB,CAAC,QAAQ,EAAE,CAAC;QAExC,EAAE,CAAC,QAAQ,EAAE,CAAC;;AAGd,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAC9B,QAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,eAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACjE,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAEtC,QAAA,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;AAC3C,QAAA,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;AACjD,QAAA,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACrD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvC,QAAA,IAAI,CAAC,sBAAuB,CAAC,UAAU,EAAE,CAAC;;AAG1C,QAAA,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC;AAC5B,QAAA,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;QAChB,EAAE,CAAC,QAAQ,EAAE,CAAC;AACd,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAC9B,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAClD,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACpC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvC,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;KAC5B;IAES,kBAAkB,GAAA;AAExB,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACrB,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,WAAW,EAC3B,CAAC,GAAG,EAAE,CAAC,QAAQ,EACf,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEf,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;QAC1B,EAAE,CAAC,QAAQ,EAAE,CAAC;AACd,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAC9B,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAClD,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACpC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,yBAAwC,CAAC,CAAC;QAC9E,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACvE,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACvC,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;KAC5B;AAED;;;AAGG;IACO,kBAAkB,GAAA;AACxB,QAAA,IAAI,CAAC,kBAAmB,CAAC,QAAQ,EAAE,CAAC;AAEpC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACrB,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEf,QAAA,IAAI,IAAI,CAAC,YAAa,CAAC,WAAW,EAAE;YAChC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YAClC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC;SACvD;aAAM;AACH,YAAA,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;SACjC;AAED,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAChC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;;;;;AAK3C,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AAErB;;AAEG;AACH,YAAA,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AAClC,YAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;SACvB;AAED,QAAA,IAAI,CAAC,kBAAmB,CAAC,UAAU,EAAE,CAAC;KACzC;AAED;;;AAGG;IACO,mBAAmB,GAAA;AACzB,QAAA,IAAI,CAAC,mBAAoB,CAAC,QAAQ,EAAE,CAAC;AAErC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACrB,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;AAEf,QAAA,IAAI,IAAI,CAAC,YAAa,CAAC,WAAW,EAAE;YAChC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YAClC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC;SACvD;aAAM;AACH,YAAA,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;SACjC;AAED,QAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AAErB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,kBAAkB,CAAC;AACjC,QAAA,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;QAClB,OAAO,CAAC,EAAE,EAAE;AACR;;AAEG;AACH,YAAA,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;SACrC;AAED,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;AAEpB,QAAA,IAAI,CAAC,mBAAoB,CAAC,UAAU,EAAE,CAAC;KAC1C;IAES,gBAAgB,GAAA;AACtB,QAAA,IAAI,CAAC,gBAAiB,CAAC,QAAQ,EAAE,CAAC;AAElC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACrB,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC;QAEf,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAClC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,gBAAgB,CAAC,CAAC;AAEpD,QAAA,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAEzB,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC;AAC9B,QAAA,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;QAClB,OAAO,CAAC,EAAE,EAAE;AACR;;AAEG;AACH,YAAA,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;SACrC;AAED,QAAA,IAAI,CAAC,gBAAiB,CAAC,UAAU,EAAE,CAAC;;;AAIpC,QAAA,IAAI,CAAC,sBAAuB,CAAC,QAAQ,EAAE,CAAC;AACxC,QAAA,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;QAG3C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,yBAAwC,CAAC,CAAC;QAC9E,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEvE,EAAE,CAAC,QAAQ,EAAE,CAAC;AAEd,QAAA,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AAC9B,QAAA,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,gBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QAClE,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;QAEzC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEvC,QAAA,IAAI,CAAC,sBAAuB,CAAC,UAAU,EAAE,CAAC;KAC7C;AAkFM,IAAA,gBAAgB,CAAC,CAAS,EAAE,CAAS,EAAE,QAAmC,EAAA;AAC7E,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,kBAAmB,CAAC,KAAK,CAAC;AACvC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,kBAAmB,CAAC,MAAM,CAAC;QAExC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QACtB,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAEtB,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAE1B,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;AACzC,QAAA,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AAC7C,QAAA,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;KAChD;AAEM,IAAA,iBAAiB,CAAC,CAAS,EAAE,CAAS,EAAE,QAAmC,EAAA;AAE9E,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAoB,CAAC,KAAK,CAAC;AACxC,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAoB,CAAC,MAAM,CAAC;QAEzC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QACtB,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAEtB,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAE1B,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;AAC1C,QAAA,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AAC9C,QAAA,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;KACjD;AAED;;;AAGG;IACI,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACpB,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;AACD,QAAA,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;KACxB;IAEM,OAAO,GAAA;AACV,QAAA,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;YACzB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;SAC7B;AAED,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClD,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;SACpC;AAED,QAAA,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;AAEhB,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAE1B,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAEzB,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEnB,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;AAEtB,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;;AAG1B,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAEzB,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAE5B,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;;AAG/B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAEhC,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;;AAG7B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AAE9B,QAAA,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;AAE1B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAE7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAE5B,QAAA,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;;;;;AAOnC,QAAA,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAE7B,QAAA,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;AACnC,QAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;;AAGvB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;KAC7B;AAEJ;;AC15CD;AAgEA,MAAM,iBAAiB,GAAG,CAAA,UAAA,CAAY,CAAC;AACvC,MAAM,gBAAgB,GAAG,CAAA,SAAA,CAAW,CAAC;AACrC,MAAM,qBAAqB,GAAG,MAAM,CAAC;AAErC;AACA,MAAM,kBAAkB,GAAG,gBAAgB,CAAC;AAE5C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDG;AAEH,MAAM,KAAK,CAAA;AA8BP,IAAA,WAAA,CAAY,OAAqB,EAAA;AAE7B,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AAEpB,QAAA,IAAI,CAAC,WAAW,GAAG,WAAW,KAAK,CAAC,WAAW,EAAE,GAAG,KAAK,CAAC,WAAW,GAAG,EAAE,IAAI,CAAC;AAC9E,QAAA,MAAc,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC;;;;QAKzC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,SAAS,IAAI,CAAC,WAAW,CAAA,CAAE,CAAC;QAC9C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;QAClC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;QACrC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,eAAe,CAAC;AAEhD;;;;AAIG;QACH,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC5C,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACtC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAEtC,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACzD,QAAA,IAAI,OAAO,CAAC,oBAAoB,EAAE;YAC9B,OAAO,CAAC,oBAAoB,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;SACtE;aAAM;YACH,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;YACzD,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;SACrD;AAED,QAAA,IAAI,OAAO,CAAC,MAAM,EAAE;AAChB,YAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SACjC;AAED,QAAA,MAAM,aAAa,GAAG,CAAC,CAAQ,KAAI;YAC/B,CAAC,CAAC,cAAc,EAAE,CAAC;AACvB,SAAC,CAAA;AAED,QAAA,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,YAAA;AACxB,YAAA,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,aAAa,EAAE;AACnD,gBAAA,OAAO,EAAE,KAAK;AACd,gBAAA,OAAO,EAAE,KAAK;AACjB,aAAA,CAAC,CAAC;AACP,SAAC,CAAC;AACF,QAAA,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,YAAA;AACxB,YAAA,QAAQ,CAAC,mBAAmB,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;AAC9D,SAAC,CAAC;AAEF,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ,CACxB,IAAI,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE;AACtB,YAAA,YAAY,EAAE,KAAK;YACnB,UAAU,EAAE,OAAO,CAAC,GAAG,KAAK,MAAM,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC3D,YAAA,OAAO,EAAE;;AAEL,gBAAA,SAAS,EAAE,KAAK;AAChB,gBAAA,kBAAkB,EAAE,KAAK;AAC5B,aAAA;AACJ,SAAA,CAAC,EAAE;AACA,YAAA,YAAY,EAAE,KAAK;YACnB,IAAI,EAAE,OAAO,CAAC,IAAI;YAClB,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,KAAK,EAAE,OAAO,CAAC,KAAK;YACpB,QAAQ,EAAE,OAAO,CAAC,QAAQ;AAC7B,SAAA,CACJ,CAAC;QAEF,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;;AAGhC,QAAA,IAAI,OAAO,CAAC,MAAM,EAAE;YAChB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SACzC;QAED,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,GAAG,kBAAkB,GAAG,KAAK,CAAC,WAAW,CAAC;AAExF,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC;YACrB,IAAI,EAAE,IAAI,CAAC,WAAW;YACtB,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,SAAS,EAAE,OAAO,CAAC,SAAS;YAC5B,WAAW,EAAE,OAAO,CAAC,WAAW;YAChC,eAAe,EAAE,OAAO,CAAC,eAAe,KAAK,IAAI,GAAG,IAAI,GAAG,GAAG,OAAO,CAAC,YAAY,IAAI,qBAAqB,CAAG,EAAA,iBAAiB,CAAE,CAAA;YACjI,kBAAkB,EAAE,OAAO,CAAC,kBAAkB,KAAK,IAAI,GAAG,IAAI,GAAG,GAAG,OAAO,CAAC,YAAY,IAAI,qBAAqB,CAAG,EAAA,gBAAgB,CAAE,CAAA;YACtI,WAAW,EAAE,OAAO,CAAC,WAAW;AAChC,YAAA,WAAW,EAAE,OAAO,CAAC,WAAW,IAAI,QAAQ;YAC5C,oBAAoB,EAAE,OAAO,CAAC,oBAAoB;YAClD,oBAAoB,EAAE,OAAO,CAAC,oBAAoB;YAClD,uBAAuB,EAAE,OAAO,CAAC,uBAAuB;YACxD,yBAAyB,EAAE,OAAO,CAAC,yBAAyB;YAC5D,kBAAkB,EAAE,OAAO,CAAC,kBAAkB;YAC9C,iBAAiB,EAAE,OAAO,CAAC,iBAAiB;YAC5C,wBAAwB,EAAE,OAAO,CAAC,wBAAwB;YAC1D,oBAAoB,EAAE,OAAO,CAAC,oBAAoB;AACrD,SAAA,CAAC,CAAC;;AAGH,QAAA,IAAI,OAAO,CAAC,OAAO,EAAE;;YAEjB,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;AAChC,gBAAA,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;aAC9C;iBAAM;gBACH,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;aAC3C;SACJ;aAAM;YACH,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,YAAY,EAAE,CAAC,CAAC;SAC9C;QAED,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;AAGnC,QAAA,IAAI,OAAO,CAAC,QAAQ,EAAE;YAClB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SAC7C;aAAM;AACH,YAAA,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;AACpB,gBAAA,IAAI,WAAW,EAAE;gBACjB,OAAO,CAAC,kBAAkB,GAAG,IAAI,eAAe,EAAE,GAAG,IAAI,eAAe,CAAC,EAAC,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAC,CAAC;AACtG,gBAAA,IAAI,eAAe,EAAE;AACrB,gBAAA,IAAI,gBAAgB,EAAE;AACtB,gBAAA,IAAI,YAAY,EAAE;AAClB,gBAAA,IAAI,aAAa,EAAE;AACtB,aAAA,CAAC,CAAC;SACN;AAED,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;AACzC,QAAA,IAAI,GAAG,CAAC;AACR,QAAA,KAAK,IAAI,CAAC,IAAI,SAAS,EAAE;AACrB,YAAA,IAAI,SAAS,CAAC,CAAC,CAAC,YAAY,GAAG,EAAE;AAC7B,gBAAA,GAAG,GAAG,SAAS,CAAC,CAAC,CAAQ,CAAC;gBAC1B,MAAM;aACT;SACJ;QAED,IAAI,CAAC,GAAG,EAAE;AACN,YAAA,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACpC;aAAM;AACH,YAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;SAClB;AAED,QAAA,IAAI,OAAO,CAAC,GAAG,EAAE;AACb,YAAA,IAAI,OAAO,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE;AACzD,gBAAA,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;aACzB;YACD,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO,KAAK,IAAI,EAAE;AAC9B,gBAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;aACnB;SACJ;AAED,QAAA,IAAI,OAAO,CAAC,MAAM,EAAE;YAChB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SACzC;;AAGD,QAAA,IAAI,EAAE,GAAG,OAAO,CAAC,UAAU,CAAC;QAC5B,IAAI,EAAE,EAAE;AACJ,YAAA,IAAI,EAAE,YAAY,KAAK,EAAE;AACrB,gBAAA,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;aACjC;iBAAM;AACH,gBAAA,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAY,CAAC,CAAC;aACxC;SACJ;;QAGD,IAAI,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE;YACvD,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;KACJ;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QACtB,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;AAED;;;AAGG;IACI,MAAM,GAAA;QACT,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;KACtC;AAED;;;AAGG;IACI,OAAO,GAAA;QACV,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC;KACpC;IAEM,QAAQ,CAAC,MAA4B,EAAE,OAAiB,EAAA;QAE3D,IAAI,CAAC,MAAM,EAAE,CAAC;AAEd,QAAA,IAAI,CAAC,CAAC;AACN,QAAA,IAAI,MAAM,YAAY,WAAW,EAAE;YAC/B,CAAC,GAAG,MAAM,CAAC;SACd;aAAM;AACH,YAAA,CAAC,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;SACzE;QAED,IAAI,CAAC,EAAE;AACH,YAAA,IAAI,CAAC,OAAO,GAAG,CAAgB,CAAC;YAChC,IAAI,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;AACpC,gBAAA,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;aACnE;iBAAM;AACH,gBAAA,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC9B;SACJ;KACJ;IAEM,MAAM,GAAA;AACT,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;;;YAGd,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACtC,YAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACvB;KACJ;IAEM,OAAO,GAAA;QACV,IAAI,CAAC,MAAM,EAAE,CAAC;AACd,QAAA,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;AAC5C,QAAA,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;AACtB,QAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;AACvB,QAAA,MAAc,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC;KAC5C;;AAjQM,KAAW,CAAA,WAAA,GAAW,CAAC;;AC9HlC;;;AAGG;AACU,MAAA,IAAI,GAAG,IAAI,SAAS,CAAC,SAAS,EAAE,SAAS;;ACJtD;;;AAGG;AACI,MAAM,IAAI,GAAG,IAAI,SAAS,CAAC,SAAS,EAAE,SAAS,EAAE;;ACGxD,MAAM,QAAQ,GAAG,CAAA;;;;;;;;mDAQkC,UAAU,CAAA;;;WAGlD,CAAC;AAaZ,MAAM,YAAY,GAAoB,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AAExD,MAAM,KAAM,SAAQ,IAAU,CAAA;AAoB1B,IAAA,WAAA,CAAY,OAAqB,EAAA;AAC7B,QAAA,KAAK,CAAC;AACF,YAAA,QAAQ,EAAE,cAAc,CAAC,QAAQ,EAAE;AAC/B,gBAAA,KAAK,EAAE,OAAO,CAAC,KAAK,IAAI,EAAE;aAC7B,CAAC;AACF,YAAA,SAAS,EAAE,OAAO,CAAC,SAAS,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE;AACvD,YAAA,GAAG,OAAO;AACb,SAAA,CAAC,CAAC;;QAGH,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;QAEtD,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,OAAO,IAAI,EAAE,CAAC;AAEtC,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AAEnB,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC;AAE9B,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAExC,IAAI,CAAC,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAE5C,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC;QAE3B,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,IAAI,KAAK,CAAC;QAE/C,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB;IAED,eAAe,GAAA;AACX,QAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACtC;AAEM,IAAA,SAAS,CAAC,CAAO,EAAA;AACpB,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,OAAO,CAAC,UAAU,CAAC;AAClD,YAAA,IAAI,CAAC,EAAG,CAAC,KAAK,CAAC,SAAS;AACpB,gBAAA,CAAA,UAAA,EAAa,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,CAAO,IAAA,EAAA,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,OAAO,CAAC,MAAO,CAAC,YAAY,GAAG,IAAI,CAAC,IAAK,CAAC,YAAY,KAAK,CAAC;SACxJ;KACJ;AAED,IAAA,IAAW,WAAW,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,GAAG,CAAC,CAAC;KAC5C;AAED,IAAA,IAAW,YAAY,GAAA;AACnB,QAAA,OAAO,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,YAAY,GAAG,CAAC,CAAC;KAC7C;AAEM,IAAA,SAAS,CAAC,CAAA,GAAY,CAAC,EAAE,IAAY,CAAC,EAAA;AACzC,QAAA,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACpB,QAAA,IAAI,IAAI,CAAC,EAAE,EAAE;YACT,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,GAAG,CAAA,EAAG,CAAC,CAAA,EAAA,CAAI,CAAC;YAC9B,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,CAAA,EAAG,CAAC,CAAA,EAAA,CAAI,CAAC;SACnC;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAEe,IAAA,MAAM,CAAC,MAAY,EAAA;AAC/B,QAAA,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAErB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAE,CAAC;QAClD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAE,CAAC;QAC9C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,yBAAyB,CAAE,CAAC;AAEpD,QAAA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACjD,QAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC/B,QAAA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAC7B,QAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;YAC3D,IAAI,CAAC,IAAI,EAAE,CAAC;AAChB,SAAC,CAAC,CAAC;AAEH,QAAA,OAAO,IAAI,CAAC;KACf;AAEM,IAAA,aAAa,CAAC,UAAmB,EAAA;QACpC,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;aAAM;YACH,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;AACD,QAAA,OAAO,IAAI,CAAC;KACf;IAEM,YAAY,GAAA;QACf,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;IAEM,mBAAmB,GAAA;AACtB,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAE,CAAC;KAC5C;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;YAC3D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,QAAS,CAAC,GAAkB,CAAC,CAAC;AACzD,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAChD;AACD,QAAA,OAAO,IAAI,CAAC;KACf;IAEM,IAAI,GAAA;AACP,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE;AAC/B,YAAA,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;YACtD,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AACxC,YAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SACjD;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAEM,IAAA,cAAc,CAAC,IAAU,EAAE,MAAA,GAAiB,CAAC,EAAA;AAChD,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAErB,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;AAC9B,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,GAAG,MAAM,EAClD,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC;AAE3B,YAAA,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EACxB,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAE7C,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG,CAAC,UAAU,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,GAAG,GAAG,EAAE;gBACnE,IAAI,CAAC,EAAG,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;gBACjC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;aACrC;iBAAM;gBACH,IAAI,CAAC,EAAG,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;aACnC;SACJ;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AAEM,IAAA,QAAQ,CAAC,IAAY,EAAA;AACxB,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;AACb,YAAA,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC;SAChC;KACJ;AAEM,IAAA,SAAS,CAAC,MAAc,EAAA;AAC3B,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AACd,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;SACxF;KACJ;AAEM,IAAA,UAAU,CAAC,OAAqC,EAAA;QACnD,IAAI,OAAO,EAAE;YACT,IAAI,CAAC,KAAK,EAAE,CAAC;AACb,YAAA,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;AACxB,YAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,gBAAA,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;AAC7B,oBAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,OAAO,CAAC;iBACrC;qBAAM;AACH,oBAAA,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;iBACtC;aACJ;SACJ;KACJ;IAEM,KAAK,GAAA;AACR,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,IAAI,CAAC,QAAQ,EAAE;AACf,YAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,EAAE,CAAC;SAChC;KACJ;AACJ;;AC1NK,MAAO,iBAAkB,SAAQ,aAAa,CAAA;AAChD,IAAA,WAAA,CAAY,IAAU,EAAE,MAAc,EAAE,QAAgB,EAAE,MAAc,EAAA;QACpE,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;AACtC,QAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,QAAA,IAAI,CAAC,UAAU,GAAG,gBAAgB,CAAC;KACtC;IAEkB,WAAW,GAAA;AAC1B,QAAA,OAAO,GAAG,CAAC;KACd;AAEkB,IAAA,mBAAmB,CAAC,MAAc,EAAA;QACjD,MAAM,GAAG,GAAG,MAAM,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC;AACnC,QAAA,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,CAAC;QAC7D,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;KAChC;AAEkB,IAAA,mBAAmB,CAAC,MAAc,EAAA;QACjD,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC;AACjC,QAAA,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC,GAAG,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;QAC5D,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC;AAClC,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC;AACpC,QAAA,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC;KAC5C;AACJ;;ACvBK,MAAO,8BAA+B,SAAQ,oBAAoB,CAAA;IAIpE,WAAY,CAAA,QAA2C,EAAE,MAAc,EAAE,MAA6C,EAAE,MAAc,EAAE,MAAc,EAAE,IAAY,EAAA;AAChK,QAAA,KAAK,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;KAC5B;IAEe,mBAAmB,GAAA;AAC/B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;AACxB,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,MAAM,MAAM,GAAG,GAAG,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC;QACpC,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE,GAAG,GAAG,CAAC;AACrC,QAAA,MAAM,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;AACzB,QAAA,MAAM,EAAE,GAAG,GAAG,CAAC,SAAS,CAAC;AACzB,QAAA,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC;AACvD,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC;AAC9B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC;AAC9B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QAExB,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,8BAA8B,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACrJ,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,8BAA8B,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC1G,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,8BAA8B,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1G,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,8BAA8B,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KACxJ;IAEkB,gBAAgB,GAAA;AAC/B,QAAA,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;KAC1E;AAEe,IAAA,aAAa,CAAC,MAAc,EAAA;AACxC,QAAA,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE;AACzB,YAAA,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;SACvF;QACD,OAAO,MAAM,CAAC,OAAO,CAAC;KACzB;IAEe,SAAS,GAAA;QACrB,IAAI,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AAChD,YAAA,OAAO,IAAI,CAAC;SACf;aAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AACvD,YAAA,OAAO,IAAI,CAAC;SACf;AACD,QAAA,OAAO,KAAK,CAAC;KAChB;AAEe,IAAA,QAAQ,CAAC,MAAc,EAAA;QACnC,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;KAC/C;AAEe,IAAA,gBAAgB,CAAC,MAA0B,EAAE,YAAuB,EAAE,aAAqB,EAAA;QAEvG,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,EAAE;YAC/B,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;SACzD;aAAM;YACH,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;SACzD;QAED,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;AACnD,YAAA,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;AAClB,gBAAA,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;aAC1C;iBAAM;gBACH,IAAI,CAAC,eAAe,EAAE,CAAC;aAC1B;SACJ;AAED,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,gBAAiB,CAAC;QAElC,EAAE,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC;QAC9C,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC;QAChD,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;AAE1C,QAAA,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE;AACf,YAAA,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SACnB;KACJ;AACJ;;AC9EK,MAAO,iCAAkC,SAAQ,6BAA6B,CAAA;IAQhF,WAAY,CAAA,KAAa,EAAE,YAAoB,EAAA;AAC3C,QAAA,KAAK,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;AAE3B,QAAA,IAAI,MAAM,GAAG,KAAK,CAAC,OAAQ,CAAC;AAE5B,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,8BAA8B,CAChE,IAAI,EACJvB,EAAW,EACX,IAAI,EACJ,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,EAC1C,MAAM,EACN,CAAC,CACJ,CAAC;AAEF,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,8BAA8B,CAChE,IAAI,EACJA,EAAW,EACX,IAAI,EACJ,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,EACzC,MAAM,EACN,CAAC,CACJ,CAAC;AAEF,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;KACjC;AAEe,IAAA,YAAY,CAAC,MAAc,EAAE,QAAA,GAAoB,KAAK,EAAA;QAClE,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,EAAE;AACxB,YAAA,IAAI,CAAC,0BAA2B,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YACvD,IAAI,CAAC,0BAA2B,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;SACnE;aAAM;AACH,YAAA,IAAI,CAAC,0BAA2B,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YACvD,IAAI,CAAC,0BAA2B,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;SACnE;KACJ;AAEe,IAAA,iBAAiB,CAAC,cAAuB,EAAA;QACrD,IAAI,CAAC,0BAA0B,CAAC,YAAY,CAAC,CAAC,IAAoC,KAAI;AAClF,YAAA,IAAI,CAAC,gBAAiB,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;AAC7D,SAAC,CAAC,CAAC;QAEH,IAAI,CAAC,0BAA0B,CAAC,YAAY,CAAC,CAAC,IAAoC,KAAI;AAClF,YAAA,IAAI,CAAC,gBAAiB,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;AAC7D,SAAC,CAAC,CAAC;KACN;IAEe,OAAO,GAAA;;AAEnB,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;;AAEvC,QAAA,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;AAEvC,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;KACjC;AAEe,IAAA,cAAc,CAAC,eAAyB,EAAA;AACpD,QAAA,IAAI,YAAY,GAAa,EAAE,EAC3B,YAAY,GAAa,EAAE,CAAC;AAChC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACxD,YAAA,IAAI,MAAM,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;YAChC,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,EAAE;AACxB,gBAAA,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC1B,gBAAA,IAAI,CAAC,0BAA0B,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aACzD;iBAAM;AACH,gBAAA,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC1B,gBAAA,IAAI,CAAC,0BAA0B,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aACzD;SACJ;AAED,QAAA,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;AACxD,QAAA,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;KAC3D;AAEe,IAAA,+BAA+B,CAAC,MAA0B,EAAA;AACtE,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAC9B,QAAA,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;QAE9B,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,OAAQ,CAAC,gBAAwC,CAAC;;AAGxE,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,0BAA0B,CAAC,6BAA6B,CAAC,GAAG,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;AAC7F,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAChC,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,6BAA6B,CAAC,GAAG,CAAC,iBAAiB,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;SAChH;;AAGD,QAAA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,0BAA0B,CAAC,6BAA6B,CAAC,GAAG,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;AAC7F,QAAA,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAC5B,OAAO,CAAC,EAAE,EAAE;YACR,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,6BAA6B,CAAC,GAAG,CAAC,iBAAiB,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;SAChH;KACJ;AACJ;;ACjGK,MAAO,oBAAqB,SAAQ,gBAAgB,CAAA;AAQtD,IAAA,WAAA,CAAY,MAAc,EAAA;AACtB,QAAA,KAAK,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;AAC5B,QAAA,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;AAC9D,QAAA,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;AAE7D,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAC5B,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;KAC/B;IAEe,IAAI,GAAA;QAChB,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,IAAIvB,MAAI,CACJ,iBAAiB,EACjB,IAAI,CAAC,MAAM,EACX,CAAC,EACD,IAAI,EACJ,CAAC,EACD,IAAI,CAAC,WAAW,CACnB;AACD,YAAA,IAAIA,MAAI,CACJ,iBAAiB,EACjB,IAAI,CAAC,MAAM,EACX,CAAC,EACD,IAAI,EACJ,CAAC,EACD,IAAI,CAAC,WAAW,CACnB;SACJ,CAAC;KACL;IAEe,SAAS,CAAC,MAAc,EAAE,IAAY,EAAA;QAClD,IAAI,CAAC,GAAG,IAAI,EACR,CAAC,GAAG,CAAC,CAAC,EACN,CAAC,GAAG,CAAC,CAAC,EACN,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAElB,QAAA,IAAI,MAAM,CAAC,GAAG,GAAG,CAAC,EAAE;AAChB,YAAA,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC;SACtD;aAAM;AACH,YAAA,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;SACpD;AAED,QAAA,CAAC,GAAG,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;QAE/C,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;KACtC;IAEe,mBAAmB,CAAC,MAAc,EAAE,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,QAAgB,EAAA;QACjG,IAAI,MAAM,GAAG,MAAM,CAAC;AACpB,QAAA,IAAI,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;AAE1B,QAAA,IAAI,MAAM,CAAC,GAAG,GAAG,CAAC,EAAE;AAChB,YAAA,MAAM,GAAG,iBAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SACpE;aAAM;AACH,YAAA,MAAM,GAAG,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SACzD;QAED,IAAI,QAAQ,GAAG,MAAM,CAAC,QAAQ,EAAE,IAAI,QAAQ,GAAG,CAAC,CAAC,EAC7C,QAAQ,GAAG,MAAM,CAAC,SAAS,EAAE,IAAI,QAAQ,GAAG,CAAC,CAAC,CAAC;QAEnD,IAAI,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI,QAAQ,CAAC,GAAG,CAAC,EAC5E,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC;AAEnE,QAAA,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KACjB;IAEe,mCAAmC,CAAC,KAAa,EAAE,YAAoB,EAAA;AACnF,QAAA,OAAO,IAAI,iCAAiC,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;KACrE;AAEe,IAAA,kBAAkB,CAAC,IAAU,EAAA;QACzC,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;QACnC,IAAI,GAAG,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,EAAE;YACvB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;SAC9C;aAAM;YACH,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;SAC9C;KACJ;IAEkB,kBAAkB,GAAA;AACjC,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAC5B,QAAA,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;KAC/B;AACJ;;ACpGK,MAAO,wBAAyB,SAAQ,gBAAgB,CAAA;AAC1D,IAAA,WAAA,CAAY,MAAc,EAAA;AACtB,QAAA,KAAK,CAAC,MAAM,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;KACvC;IAEe,IAAI,GAAA;QAChB,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,IAAIA,MAAI,CACJ,iBAAiB,EACjB,IAAI,CAAC,MAAM,EACX,CAAC,EACD,IAAI,EACJ,CAAC,EACD,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAC7C;AACD,YAAA,IAAIA,MAAI,CACJ,iBAAiB,EACjB,IAAI,CAAC,MAAM,EACX,CAAC,EACD,IAAI,EACJ,CAAC,EACD,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,CAC5C;SACJ,CAAC;KACL;AACJ;;ACzBK,MAAO,qBAAsB,SAAQ,gBAAgB,CAAA;AACvD,IAAA,WAAA,CAAY,MAAc,EAAA;AACtB,QAAA,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;KACpC;IAEe,IAAI,GAAA;QAChB,IAAI,CAAC,aAAa,GAAG;AACjB,YAAA,IAAIA,MAAI,CACJ,iBAAiB,EACjB,IAAI,CAAC,MAAM,EACX,CAAC,EAAE,IAAI,EACP,CAAC,EACD,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,CAC/C;SACJ,CAAC;KACL;AACJ;;AClBD,MAAM,oBAAoB,GAAG;AACzB,IAAA,QAAQ,EAAE,wBAAwB;AAClC,IAAA,KAAK,EAAE,qBAAqB;AAC5B,IAAA,IAAI,EAAE,oBAAoB;AAC1B,IAAA,KAAK,EAAE,qBAAqB;;;;;"}